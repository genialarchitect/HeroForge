import{j as e}from"./vendor-state-oFDmcCcB.js";import{r as t}from"./vendor-react-5KxtEOLM.js";import{B as o,bv as u,d as j,J as I,bw as b,M as Y,bx as E,by as H,g as N,p as w,bn as x,e as P,i as D}from"./vendor-ui-7EurIAWU.js";const J=()=>{const[r,v]=t.useState(null),[a,k]=t.useState(null),[m,C]=t.useState([]),[h,R]=t.useState([]),[S,g]=t.useState(!0),[_,p]=t.useState(!1),[n,$]=t.useState("overview");t.useEffect(()=>{T()},[]);const T=async()=>{g(!0);try{const[s,c,i,y]=await Promise.all([fetch("/api/referrals/code").then(l=>l.json()),fetch("/api/referrals/stats").then(l=>l.json()),fetch("/api/referrals/history").then(l=>l.json()),fetch("/api/referrals/leaderboard").then(l=>l.json())]);s.success&&v(s.data),c.success&&k(c.data),i.success&&C(i.data),y.success&&R(y.data)}catch(s){console.error("Failed to load referral data:",s),o.error("Failed to load referral data")}finally{g(!1)}},F=()=>{r&&(navigator.clipboard.writeText(r.code),p(!0),o.success("Referral code copied!"),setTimeout(()=>p(!1),2e3))},f=()=>{if(r){const s=`${window.location.origin}/register?ref=${r.code}`;navigator.clipboard.writeText(s),o.success("Referral link copied!")}},d=s=>{if(!r)return;const c=`${window.location.origin}/register?ref=${r.code}`,i=`Join HeroForge - the AI-powered security platform! Use my referral code ${r.code} to get 20% off your first year.`;switch(s){case"email":window.open(`mailto:?subject=Join HeroForge&body=${encodeURIComponent(i+`

`+c)}`);break;case"twitter":window.open(`https://twitter.com/intent/tweet?text=${encodeURIComponent(i)}&url=${encodeURIComponent(c)}`);break;case"linkedin":window.open(`https://www.linkedin.com/sharing/share-offsite/?url=${encodeURIComponent(c)}`);break}},L=s=>{switch(s){case"converted":return e.jsx(N,{className:"w-4 h-4 text-green-400"});case"pending":case"registered":return e.jsx(w,{className:"w-4 h-4 text-yellow-400"});default:return e.jsx(D,{className:"w-4 h-4 text-gray-400"})}},U=s=>{switch(s){case"converted":return"bg-green-500/20 text-green-400";case"pending":case"registered":return"bg-yellow-500/20 text-yellow-400";default:return"bg-gray-500/20 text-gray-400"}};return S?e.jsx("div",{className:"min-h-screen bg-gray-900 flex items-center justify-center",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-cyan-500"})}):e.jsx("div",{className:"min-h-screen bg-gray-900 py-8",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"mb-8",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx(u,{className:"h-8 w-8 text-cyan-400"}),e.jsx("h1",{className:"text-3xl font-bold text-white",children:"Referral Program"})]}),e.jsx("p",{className:"text-gray-400",children:"Earn free months of HeroForge by referring your colleagues. You get 1 month free for each successful referral, and they get 20% off their first year."})]}),e.jsx("div",{className:"bg-gradient-to-r from-cyan-900/50 to-purple-900/50 rounded-xl border border-cyan-700/50 p-6 mb-8",children:e.jsxs("div",{className:"flex flex-col md:flex-row items-center justify-between gap-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold text-white mb-2",children:"Your Referral Code"}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"bg-gray-900/70 px-6 py-3 rounded-lg border border-cyan-500/50",children:e.jsx("span",{className:"text-3xl font-mono font-bold text-cyan-400 tracking-wider",children:(r==null?void 0:r.code)||"--------"})}),e.jsx("button",{onClick:F,className:"p-3 bg-gray-700 hover:bg-gray-600 rounded-lg transition-colors",title:"Copy code",children:_?e.jsx(j,{className:"w-5 h-5 text-green-400"}):e.jsx(I,{className:"w-5 h-5 text-gray-300"})})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[e.jsxs("button",{onClick:f,className:"flex items-center gap-2 px-4 py-2 bg-cyan-600 hover:bg-cyan-700 text-white rounded-lg transition-colors",children:[e.jsx(b,{className:"w-4 h-4"}),"Copy Link"]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>d("email"),className:"p-2 bg-gray-700 hover:bg-gray-600 rounded-lg transition-colors",title:"Share via email",children:e.jsx(Y,{className:"w-5 h-5 text-gray-300"})}),e.jsx("button",{onClick:()=>d("twitter"),className:"p-2 bg-gray-700 hover:bg-gray-600 rounded-lg transition-colors",title:"Share on Twitter",children:e.jsx(E,{className:"w-5 h-5 text-gray-300"})}),e.jsx("button",{onClick:()=>d("linkedin"),className:"p-2 bg-gray-700 hover:bg-gray-600 rounded-lg transition-colors",title:"Share on LinkedIn",children:e.jsx(H,{className:"w-5 h-5 text-gray-300"})})]})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-8",children:[e.jsxs("div",{className:"bg-gray-800 rounded-xl border border-gray-700 p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx("div",{className:"p-2 bg-green-500/20 rounded-lg",children:e.jsx(N,{className:"w-5 h-5 text-green-400"})}),e.jsx("span",{className:"text-gray-400",children:"Successful Referrals"})]}),e.jsx("div",{className:"text-3xl font-bold text-white",children:(a==null?void 0:a.successful_referrals)||0})]}),e.jsxs("div",{className:"bg-gray-800 rounded-xl border border-gray-700 p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx("div",{className:"p-2 bg-yellow-500/20 rounded-lg",children:e.jsx(w,{className:"w-5 h-5 text-yellow-400"})}),e.jsx("span",{className:"text-gray-400",children:"Pending Referrals"})]}),e.jsx("div",{className:"text-3xl font-bold text-white",children:(a==null?void 0:a.pending_referrals)||0})]}),e.jsxs("div",{className:"bg-gray-800 rounded-xl border border-gray-700 p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx("div",{className:"p-2 bg-cyan-500/20 rounded-lg",children:e.jsx(u,{className:"w-5 h-5 text-cyan-400"})}),e.jsx("span",{className:"text-gray-400",children:"Credits Available"})]}),e.jsx("div",{className:"text-3xl font-bold text-cyan-400",children:(a==null?void 0:a.credits_available)||0}),e.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:["= ",Math.floor(((a==null?void 0:a.credits_available)||0)/30)," months free"]})]}),e.jsxs("div",{className:"bg-gray-800 rounded-xl border border-gray-700 p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx("div",{className:"p-2 bg-purple-500/20 rounded-lg",children:e.jsx(x,{className:"w-5 h-5 text-purple-400"})}),e.jsx("span",{className:"text-gray-400",children:"Leaderboard Rank"})]}),e.jsx("div",{className:"text-3xl font-bold text-white",children:a!=null&&a.leaderboard_rank?`#${a.leaderboard_rank}`:"-"})]})]}),e.jsx("div",{className:"flex gap-2 mb-6 border-b border-gray-700",children:["overview","history","leaderboard"].map(s=>e.jsx("button",{onClick:()=>$(s),className:`px-4 py-2 text-sm font-medium border-b-2 transition-colors ${n===s?"border-cyan-500 text-cyan-400":"border-transparent text-gray-400 hover:text-white"}`,children:s.charAt(0).toUpperCase()+s.slice(1)},s))}),n==="overview"&&e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[e.jsxs("div",{className:"bg-gray-800 rounded-xl border border-gray-700 p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"How It Works"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-cyan-500/20 flex items-center justify-center text-cyan-400 font-bold shrink-0",children:"1"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-white font-medium",children:"Share your code"}),e.jsx("p",{className:"text-gray-400 text-sm",children:"Share your unique referral code or link with colleagues"})]})]}),e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-cyan-500/20 flex items-center justify-center text-cyan-400 font-bold shrink-0",children:"2"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-white font-medium",children:"They sign up"}),e.jsx("p",{className:"text-gray-400 text-sm",children:"Your friend uses your code during registration"})]})]}),e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-cyan-500/20 flex items-center justify-center text-cyan-400 font-bold shrink-0",children:"3"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-white font-medium",children:"They subscribe"}),e.jsx("p",{className:"text-gray-400 text-sm",children:"When they become a paying customer, you both earn rewards"})]})]}),e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-green-500/20 flex items-center justify-center text-green-400 font-bold shrink-0",children:e.jsx(j,{className:"w-4 h-4"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-white font-medium",children:"Everyone wins!"}),e.jsx("p",{className:"text-gray-400 text-sm",children:"You get 1 month free, they get 20% off first year"})]})]})]})]}),e.jsxs("div",{className:"bg-gray-800 rounded-xl border border-gray-700 p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Rewards"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-gray-700/50 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-gray-300",children:"For You (Referrer)"}),e.jsx("span",{className:"text-cyan-400 font-bold",children:"1 Month Free"})]}),e.jsx("p",{className:"text-gray-400 text-sm",children:"For each friend who becomes a paying customer"})]}),e.jsxs("div",{className:"bg-gray-700/50 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-gray-300",children:"For Them (Referee)"}),e.jsx("span",{className:"text-green-400 font-bold",children:"20% Off"})]}),e.jsx("p",{className:"text-gray-400 text-sm",children:"On their first year of subscription"})]}),e.jsxs("div",{className:"bg-purple-900/30 rounded-lg p-4 border border-purple-500/30",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(x,{className:"w-5 h-5 text-purple-400"}),e.jsx("span",{className:"text-purple-300 font-medium",children:"Partner Tier"})]}),e.jsx("p",{className:"text-gray-400 text-sm",children:"Refer 10+ customers and become a HeroForge Partner with exclusive benefits!"})]})]})]})]}),n==="history"&&e.jsx("div",{className:"bg-gray-800 rounded-xl border border-gray-700 overflow-hidden",children:m.length===0?e.jsxs("div",{className:"p-12 text-center",children:[e.jsx(P,{className:"w-12 h-12 text-gray-600 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-white mb-2",children:"No referrals yet"}),e.jsx("p",{className:"text-gray-400 mb-4",children:"Share your code to start earning rewards!"}),e.jsxs("button",{onClick:f,className:"px-4 py-2 bg-cyan-600 hover:bg-cyan-700 text-white rounded-lg transition-colors inline-flex items-center gap-2",children:[e.jsx(b,{className:"w-4 h-4"}),"Share Your Link"]})]}):e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-700/50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"text-left px-6 py-3 text-xs font-medium text-gray-400 uppercase tracking-wider",children:"Email"}),e.jsx("th",{className:"text-left px-6 py-3 text-xs font-medium text-gray-400 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"text-left px-6 py-3 text-xs font-medium text-gray-400 uppercase tracking-wider",children:"Credits"}),e.jsx("th",{className:"text-left px-6 py-3 text-xs font-medium text-gray-400 uppercase tracking-wider",children:"Date"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-700",children:m.map(s=>e.jsxs("tr",{className:"hover:bg-gray-700/30",children:[e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:"text-white",children:s.referee_email||"Unknown"})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[L(s.status),e.jsx("span",{className:`text-xs px-2 py-1 rounded ${U(s.status)}`,children:s.status})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:s.credits_awarded>0?"text-green-400":"text-gray-400",children:s.credits_awarded>0?`+${s.credits_awarded}`:"-"})}),e.jsx("td",{className:"px-6 py-4 text-gray-400 text-sm",children:new Date(s.created_at).toLocaleDateString()})]},s.id))})]})}),n==="leaderboard"&&e.jsx("div",{className:"bg-gray-800 rounded-xl border border-gray-700 overflow-hidden",children:h.length===0?e.jsxs("div",{className:"p-12 text-center",children:[e.jsx(x,{className:"w-12 h-12 text-gray-600 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-white mb-2",children:"Leaderboard is empty"}),e.jsx("p",{className:"text-gray-400",children:"Be the first to refer a friend and claim the top spot!"})]}):e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-700/50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"text-left px-6 py-3 text-xs font-medium text-gray-400 uppercase tracking-wider w-16",children:"Rank"}),e.jsx("th",{className:"text-left px-6 py-3 text-xs font-medium text-gray-400 uppercase tracking-wider",children:"User"}),e.jsx("th",{className:"text-right px-6 py-3 text-xs font-medium text-gray-400 uppercase tracking-wider",children:"Referrals"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-700",children:h.map(s=>e.jsxs("tr",{className:`hover:bg-gray-700/30 ${s.is_current_user?"bg-cyan-900/20":""}`,children:[e.jsx("td",{className:"px-6 py-4",children:e.jsx("div",{className:"flex items-center justify-center w-8 h-8",children:s.rank===1?e.jsx("span",{className:"text-2xl",children:"ðŸ¥‡"}):s.rank===2?e.jsx("span",{className:"text-2xl",children:"ðŸ¥ˆ"}):s.rank===3?e.jsx("span",{className:"text-2xl",children:"ðŸ¥‰"}):e.jsxs("span",{className:"text-gray-400 font-bold",children:["#",s.rank]})})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:s.is_current_user?"text-cyan-400 font-medium":"text-white",children:s.username}),s.is_current_user&&e.jsx("span",{className:"text-xs bg-cyan-500/20 text-cyan-400 px-2 py-0.5 rounded",children:"You"})]})}),e.jsx("td",{className:"px-6 py-4 text-right",children:e.jsx("span",{className:"text-white font-bold",children:s.successful_referrals})})]},s.rank))})]})})]})})};export{J as default};
