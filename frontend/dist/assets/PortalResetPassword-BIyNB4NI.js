import{j as e}from"./vendor-state-DdX3IZQk.js";import{d as j,u as v,r as t,L as u}from"./vendor-react-Da1CiaFS.js";import{as as N}from"./index-DQiW-u5-.js";import"./vendor-ui-DU7fCopR.js";import"./vendor-charts-BthoN68t.js";function R(){const[x]=j(),g=v(),[o,h]=t.useState(""),[n,f]=t.useState(""),[l,i]=t.useState(!1),[d,s]=t.useState(""),[w,p]=t.useState(!1),r=x.get("token");t.useEffect(()=>{r||s("Invalid reset link. Please request a new password reset.")},[r]);const b=async a=>{var c,m;if(a.preventDefault(),s(""),o!==n){s("Passwords do not match");return}if(o.length<8){s("Password must be at least 8 characters");return}if(!r){s("Invalid reset link");return}i(!0);try{await N.resetPassword(r,o),p(!0),setTimeout(()=>g("/portal/login"),3e3)}catch(y){s(((m=(c=y.response)==null?void 0:c.data)==null?void 0:m.error)||"Failed to reset password. The link may have expired.")}finally{i(!1)}};return w?e.jsx("div",{className:"flex min-h-screen items-center justify-center bg-gradient-to-br from-gray-900 via-gray-800 to-gray-900 px-4 py-12 sm:px-6 lg:px-8",children:e.jsx("div",{className:"w-full max-w-md space-y-8",children:e.jsxs("div",{className:"rounded-xl bg-gray-800 p-8 shadow-2xl text-center",children:[e.jsx("div",{className:"mx-auto flex h-12 w-12 items-center justify-center rounded-full bg-green-900/50 mb-4",children:e.jsx("svg",{className:"h-6 w-6 text-green-400",fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12.75L11.25 15 15 9.75M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),e.jsx("h2",{className:"text-xl font-semibold text-white mb-2",children:"Password Reset Successful"}),e.jsx("p",{className:"text-gray-400 mb-4",children:"Your password has been updated. Redirecting to login..."}),e.jsx(u,{to:"/portal/login",className:"text-blue-400 hover:text-blue-300 font-medium",children:"Go to login now"})]})})}):e.jsx("div",{className:"flex min-h-screen items-center justify-center bg-gradient-to-br from-gray-900 via-gray-800 to-gray-900 px-4 py-12 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"w-full max-w-md space-y-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-center text-3xl font-bold tracking-tight text-white",children:"Set New Password"}),e.jsx("h2",{className:"mt-2 text-center text-lg text-gray-400",children:"Enter your new password below"})]}),e.jsxs("div",{className:"rounded-xl bg-gray-800 p-8 shadow-2xl",children:[e.jsxs("form",{className:"space-y-6",onSubmit:b,children:[d&&e.jsx("div",{className:"rounded-lg bg-red-900/50 p-4 text-sm text-red-200",children:d}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"newPassword",className:"block text-sm font-medium text-gray-300",children:"New Password"}),e.jsx("input",{id:"newPassword",name:"newPassword",type:"password",required:!0,value:o,onChange:a=>h(a.target.value),className:"mt-1 block w-full rounded-lg border-0 bg-gray-700 px-4 py-3 text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter new password",minLength:8}),e.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Minimum 8 characters"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-gray-300",children:"Confirm Password"}),e.jsx("input",{id:"confirmPassword",name:"confirmPassword",type:"password",required:!0,value:n,onChange:a=>f(a.target.value),className:"mt-1 block w-full rounded-lg border-0 bg-gray-700 px-4 py-3 text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Confirm new password"})]}),e.jsx("button",{type:"submit",disabled:l||!r,className:"flex w-full justify-center rounded-lg bg-blue-600 px-4 py-3 text-sm font-semibold text-white shadow-sm hover:bg-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 focus:ring-offset-gray-800 disabled:cursor-not-allowed disabled:opacity-50",children:l?"Updating...":"Reset Password"})]}),e.jsx("div",{className:"mt-6 text-center",children:e.jsx(u,{to:"/portal/login",className:"text-sm text-blue-400 hover:text-blue-300",children:"Back to login"})})]}),e.jsx("p",{className:"text-center text-xs text-gray-500",children:"Powered by Genial Architect Platform"})]})})}export{R as default};
