import{b as X,u as _,d as E,j as e}from"./vendor-state-BXNPjUwt.js";import{e as le,u as ce,r as j,R as I}from"./vendor-react-5KxtEOLM.js";import{m as L,bm as V,aW as H,a9 as W,H as oe,F as P,B as x,l as ie,_ as de,aX as G,X as xe,aT as me,z as ge,bn as he,i as ue,g as K,p as T,a6 as pe,ab as ye,bo as be,bp as je,bq as O}from"./vendor-ui-PizTOSgB.js";import{K as u,c as fe,f as Ne}from"./index-DgePDh_X.js";import"./vendor-utils-DfRopTPV.js";const R=({status:t,type:o="item"})=>{const h={not_started:{bg:"bg-gray-700",text:"Not Started",icon:e.jsx(T,{className:"w-3 h-3"})},in_progress:{bg:"bg-blue-900/50 text-blue-400",text:"In Progress",icon:e.jsx(W,{className:"w-3 h-3"})},under_review:{bg:"bg-yellow-900/50 text-yellow-400",text:"Under Review",icon:e.jsx(G,{className:"w-3 h-3"})},completed:{bg:"bg-green-900/50 text-green-400",text:"Completed",icon:e.jsx(K,{className:"w-3 h-3"})},archived:{bg:"bg-gray-800 text-gray-500",text:"Archived",icon:e.jsx(P,{className:"w-3 h-3"})},not_assessed:{bg:"bg-gray-700",text:"Not Assessed",icon:e.jsx(T,{className:"w-3 h-3"})},compliant:{bg:"bg-green-900/50 text-green-400",text:"Compliant",icon:e.jsx(K,{className:"w-3 h-3"})},non_compliant:{bg:"bg-red-900/50 text-red-400",text:"Non-Compliant",icon:e.jsx(ue,{className:"w-3 h-3"})},not_applicable:{bg:"bg-gray-600",text:"N/A",icon:e.jsx(he,{className:"w-3 h-3"})}},i=h[t]||h.not_assessed;return e.jsxs("span",{className:`inline-flex items-center gap-1 px-2 py-1 rounded text-xs ${i.bg}`,children:[i.icon,i.text]})},Q=({value:t,className:o})=>e.jsx("div",{className:`h-2 bg-gray-700 rounded-full overflow-hidden ${o}`,children:e.jsx("div",{className:`h-full rounded-full transition-all ${t>=80?"bg-green-500":t>=50?"bg-yellow-500":t>=20?"bg-orange-500":"bg-red-500"}`,style:{width:`${Math.min(100,Math.max(0,t))}%`}})}),ve=({evidence:t,onDelete:o,onDownload:h})=>{const i={image:e.jsx(O,{className:"w-4 h-4 text-purple-400"}),screenshot:e.jsx(O,{className:"w-4 h-4 text-purple-400"}),document:e.jsx(P,{className:"w-4 h-4 text-blue-400"}),file:e.jsx(je,{className:"w-4 h-4 text-gray-400"}),link:e.jsx(be,{className:"w-4 h-4 text-cyan-400"}),note:e.jsx(P,{className:"w-4 h-4 text-yellow-400"})};return e.jsxs("div",{className:"flex items-center justify-between p-2 bg-gray-700 rounded group",children:[e.jsxs("div",{className:"flex items-center gap-2 flex-1 min-w-0",children:[i[t.evidence_type]||i.file,e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm text-gray-200 truncate",children:t.title}),t.file_name&&e.jsx("p",{className:"text-xs text-gray-500 truncate",children:t.file_name})]})]}),e.jsxs("div",{className:"flex items-center gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[t.file_path&&e.jsx("button",{onClick:()=>h(t.id),className:"p-1 text-gray-400 hover:text-cyan-400 rounded",title:"Download",children:e.jsx(pe,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>o(t.id),className:"p-1 text-gray-400 hover:text-red-400 rounded",title:"Delete",children:e.jsx(ye,{className:"w-4 h-4"})})]})]})},we=({item:t,onToggleCheck:o,onUpdateStatus:h,onViewDetails:i,isSelected:a,onSelect:l})=>{const[d,c]=j.useState(!1);return e.jsxs("div",{className:"border-b border-gray-700 last:border-b-0",children:[e.jsxs("div",{className:"flex items-center gap-3 p-3 hover:bg-gray-800/50",children:[e.jsx("input",{type:"checkbox",checked:a,onChange:N=>l(t.id,N.target.checked),className:"w-4 h-4 rounded border-gray-600 text-cyan-500 focus:ring-cyan-500 focus:ring-offset-gray-800"}),e.jsx("button",{onClick:()=>o(t.id,!t.is_checked),className:"flex-shrink-0",children:t.is_checked?e.jsx(V,{className:"w-5 h-5 text-cyan-400"}):e.jsx(H,{className:"w-5 h-5 text-gray-500 hover:text-gray-400"})}),e.jsx("button",{onClick:()=>c(!d),className:"flex-shrink-0 text-gray-500 hover:text-gray-400",children:d?e.jsx(ie,{className:"w-4 h-4"}):e.jsx(de,{className:"w-4 h-4"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-xs font-mono text-gray-500",children:t.control_id}),t.is_automated&&e.jsx("span",{className:"text-xs px-1.5 py-0.5 bg-purple-900/50 text-purple-400 rounded",children:"Automated"}),t.category&&e.jsx("span",{className:"text-xs px-1.5 py-0.5 bg-gray-700 text-gray-400 rounded",children:t.category})]}),e.jsx("p",{className:`text-sm ${t.is_checked?"text-gray-400 line-through":"text-gray-200"}`,children:t.control_title})]}),e.jsx(R,{status:t.status}),e.jsx("div",{className:"flex items-center gap-1",children:e.jsx("button",{onClick:()=>i(t),className:"p-1.5 text-gray-400 hover:text-cyan-400 rounded hover:bg-gray-700",title:"View Details",children:e.jsx(G,{className:"w-4 h-4"})})})]}),d&&e.jsxs("div",{className:"px-12 py-3 bg-gray-800/30 text-sm",children:[t.control_description&&e.jsx("p",{className:"text-gray-400 mb-2",children:t.control_description}),e.jsxs("div",{className:"flex flex-wrap gap-4 text-xs text-gray-500",children:[t.notes&&e.jsxs("span",{children:["Notes: ",t.notes]}),t.findings&&e.jsxs("span",{children:["Findings: ",t.findings.substring(0,100),"..."]}),t.assigned_to&&e.jsxs("span",{children:["Assigned: ",t.assigned_to]}),t.due_date&&e.jsxs("span",{children:["Due: ",new Date(t.due_date).toLocaleDateString()]})]})]})]})},Ce=({isOpen:t,onClose:o,customers:h,frameworks:i,onSubmit:a})=>{const[l,d]=j.useState({customer_id:"",framework_id:"",name:"",description:""});return t?e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-gray-800 rounded-lg p-6 w-full max-w-lg",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-100 mb-4",children:"Create Compliance Checklist"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Customer *"}),e.jsxs("select",{value:l.customer_id,onChange:c=>d({...l,customer_id:c.target.value}),className:"w-full bg-gray-700 border border-gray-600 rounded px-3 py-2 text-gray-200",children:[e.jsx("option",{value:"",children:"Select Customer"}),h.map(c=>e.jsx("option",{value:c.id,children:c.name},c.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Framework *"}),e.jsxs("select",{value:l.framework_id,onChange:c=>d({...l,framework_id:c.target.value}),className:"w-full bg-gray-700 border border-gray-600 rounded px-3 py-2 text-gray-200",children:[e.jsx("option",{value:"",children:"Select Framework"}),i.map(c=>e.jsx("option",{value:c.id,children:c.name},c.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Name *"}),e.jsx("input",{type:"text",value:l.name,onChange:c=>d({...l,name:c.target.value}),className:"w-full bg-gray-700 border border-gray-600 rounded px-3 py-2 text-gray-200",placeholder:"e.g., Q1 2024 PCI DSS Assessment"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Description"}),e.jsx("textarea",{value:l.description,onChange:c=>d({...l,description:c.target.value}),className:"w-full bg-gray-700 border border-gray-600 rounded px-3 py-2 text-gray-200",rows:3,placeholder:"Optional description..."})]})]}),e.jsxs("div",{className:"flex justify-end gap-2 mt-6",children:[e.jsx("button",{onClick:o,className:"px-4 py-2 text-gray-400 hover:text-gray-200",children:"Cancel"}),e.jsx("button",{onClick:()=>{if(!l.customer_id||!l.framework_id||!l.name){x.error("Please fill in all required fields");return}a(l)},className:"px-4 py-2 bg-cyan-600 hover:bg-cyan-700 text-white rounded",children:"Create Checklist"})]})]})}):null},ke=({item:t,checklistId:o,onClose:h,onSave:i})=>{const[a,l]=j.useState({}),[d,c]=j.useState([]),[N,p]=j.useState(!1),w=I.useRef(null);X(),j.useEffect(()=>{t&&o&&(l({status:t.status,notes:t.notes||"",findings:t.findings||"",remediation_steps:t.remediation_steps||"",compensating_controls:t.compensating_controls||""}),u.listItemEvidence(o,t.id).then(r=>{c(r.data.evidence)}))},[t,o]);const C=async r=>{var f;if(!((f=r.target.files)!=null&&f.length)||!t||!o)return;p(!0);const y=new FormData;y.append("file",r.target.files[0]),y.append("title",r.target.files[0].name);try{const v=await u.uploadEvidence(o,t.id,y);c([v.data,...d]),x.success("Evidence uploaded")}catch{x.error("Failed to upload evidence")}finally{p(!1)}},M=async r=>{if(!(!t||!o))try{await u.deleteEvidence(o,t.id,r),c(d.filter(y=>y.id!==r)),x.success("Evidence deleted")}catch{x.error("Failed to delete evidence")}},k=async r=>{if(!(!t||!o))try{const y=await u.downloadEvidence(o,t.id,r),f=d.find(q=>q.id===r),v=new Blob([y.data]),S=window.URL.createObjectURL(v),m=document.createElement("a");m.href=S,m.download=(f==null?void 0:f.file_name)||"download",m.click(),window.URL.revokeObjectURL(S)}catch{x.error("Failed to download evidence")}};return t?e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-gray-800 rounded-lg w-full max-w-3xl max-h-[90vh] overflow-hidden flex flex-col",children:[e.jsxs("div",{className:"p-4 border-b border-gray-700 flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-mono text-gray-500",children:t.control_id}),e.jsx("h3",{className:"text-lg font-semibold text-gray-100",children:t.control_title})]}),e.jsx("button",{onClick:h,className:"p-1 text-gray-400 hover:text-gray-200",children:e.jsx(xe,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"flex-1 overflow-auto p-4 space-y-4",children:[t.control_description&&e.jsx("p",{className:"text-sm text-gray-400",children:t.control_description}),e.jsx("div",{className:"grid grid-cols-2 gap-4",children:e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Status"}),e.jsxs("select",{value:a.status||"not_assessed",onChange:r=>l({...a,status:r.target.value}),className:"w-full bg-gray-700 border border-gray-600 rounded px-3 py-2 text-gray-200",children:[e.jsx("option",{value:"not_assessed",children:"Not Assessed"}),e.jsx("option",{value:"in_progress",children:"In Progress"}),e.jsx("option",{value:"compliant",children:"Compliant"}),e.jsx("option",{value:"non_compliant",children:"Non-Compliant"}),e.jsx("option",{value:"not_applicable",children:"Not Applicable"})]})]})}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Notes"}),e.jsx("textarea",{value:a.notes||"",onChange:r=>l({...a,notes:r.target.value}),className:"w-full bg-gray-700 border border-gray-600 rounded px-3 py-2 text-gray-200",rows:2})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Findings"}),e.jsx("textarea",{value:a.findings||"",onChange:r=>l({...a,findings:r.target.value}),className:"w-full bg-gray-700 border border-gray-600 rounded px-3 py-2 text-gray-200",rows:3})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Remediation Steps"}),e.jsx("textarea",{value:a.remediation_steps||"",onChange:r=>l({...a,remediation_steps:r.target.value}),className:"w-full bg-gray-700 border border-gray-600 rounded px-3 py-2 text-gray-200",rows:3})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Compensating Controls"}),e.jsx("textarea",{value:a.compensating_controls||"",onChange:r=>l({...a,compensating_controls:r.target.value}),className:"w-full bg-gray-700 border border-gray-600 rounded px-3 py-2 text-gray-200",rows:2})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("label",{className:"text-sm text-gray-400",children:"Evidence"}),e.jsxs("button",{onClick:()=>{var r;return(r=w.current)==null?void 0:r.click()},disabled:N,className:"flex items-center gap-1 text-xs text-cyan-400 hover:text-cyan-300",children:[e.jsx(me,{className:"w-3 h-3"}),N?"Uploading...":"Upload"]}),e.jsx("input",{ref:w,type:"file",onChange:C,className:"hidden"})]}),e.jsx("div",{className:"space-y-2 max-h-40 overflow-auto",children:d.length===0?e.jsx("p",{className:"text-xs text-gray-500 text-center py-4",children:"No evidence attached"}):d.map(r=>e.jsx(ve,{evidence:r,onDelete:M,onDownload:k},r.id))})]})]}),e.jsxs("div",{className:"p-4 border-t border-gray-700 flex justify-end gap-2",children:[e.jsx("button",{onClick:h,className:"px-4 py-2 text-gray-400 hover:text-gray-200",children:"Cancel"}),e.jsxs("button",{onClick:()=>i(t.id,a),className:"px-4 py-2 bg-cyan-600 hover:bg-cyan-700 text-white rounded flex items-center gap-2",children:[e.jsx(ge,{className:"w-4 h-4"}),"Save Changes"]})]})]})}):null},Ie=()=>{const[t,o]=le();ce();const h=X(),i=t.get("customer"),a=t.get("checklist"),[l,d]=j.useState(!1),[c,N]=j.useState(null),[p,w]=j.useState(new Set),[C,M]=j.useState(""),[k,r]=j.useState(""),{data:y}=_({queryKey:["customers"],queryFn:async()=>(await fe.customers.getAll()).data}),{data:f}=_({queryKey:["frameworks"],queryFn:async()=>(await Ne.getFrameworks()).data}),{data:v,refetch:S}=_({queryKey:["clientChecklists",i],queryFn:async()=>(await u.listChecklists(i?{customer_id:i}:void 0)).data,enabled:!!i}),{data:m,refetch:q}=_({queryKey:["clientChecklist",a],queryFn:async()=>(await u.getChecklist(a)).data,enabled:!!a}),{data:g,refetch:D}=_({queryKey:["clientChecklistItems",a],queryFn:async()=>(await u.listItems(a)).data,enabled:!!a}),J=E({mutationFn:u.createChecklist,onSuccess:async s=>{x.success("Checklist created"),d(!1),await u.populateChecklist(s.data.id,s.data.framework_id),h.invalidateQueries({queryKey:["clientChecklists"]}),o({customer:s.data.customer_id,checklist:s.data.id})},onError:()=>x.error("Failed to create checklist")}),U=E({mutationFn:({id:s,data:n})=>u.updateItem(a,s,n),onSuccess:()=>{x.success("Item updated"),D(),q(),N(null)},onError:()=>x.error("Failed to update item")}),Y=E({mutationFn:({itemIds:s,isChecked:n})=>u.bulkUpdateCheckboxes(a,{item_ids:s,is_checked:n}),onSuccess:()=>{x.success("Items updated"),D(),w(new Set)},onError:()=>x.error("Failed to update items")}),F=E({mutationFn:s=>u.syncScans(s),onSuccess:s=>{const n=s.data;n.updated_items>0?x.success(`Synced ${n.synced_count} scans, updated ${n.updated_items} controls with ${n.findings_count} findings`):n.synced_count>0?x.info(`Analyzed ${n.synced_count} scans but no matching controls found`):x.warning("No scans found for this customer"),D(),S()},onError:()=>x.error("Failed to sync scan results")}),Z=(s,n)=>{U.mutate({id:s,data:{is_checked:n}})},ee=(s,n)=>{U.mutate({id:s,data:{status:n}})},se=(s,n)=>{const b=new Set(p);n?b.add(s):b.delete(s),w(b)},te=s=>{s&&(g!=null&&g.items)?w(new Set(g.items.map(n=>n.id))):w(new Set)},$=s=>{p.size!==0&&Y.mutate({itemIds:Array.from(p),isChecked:s})},ae=I.useMemo(()=>g!=null&&g.items?[...new Set(g.items.map(s=>s.category).filter(Boolean))]:[],[g]),A=I.useMemo(()=>{if(!(g!=null&&g.items))return[];let s=g.items;return C&&(s=s.filter(n=>n.category===C)),k&&(s=s.filter(n=>n.status===k)),s},[g,C,k]),re=I.useMemo(()=>{const s={};for(const n of A){const b=n.category||"Uncategorized";s[b]||(s[b]=[]),s[b].push(n)}return s},[A]),z=y||[],ne=(f==null?void 0:f.frameworks)||[],B=(v==null?void 0:v.checklists)||[];return e.jsxs("div",{className:"min-h-screen bg-gray-900 text-gray-100",children:[e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Client Compliance Checklists"}),e.jsx("p",{className:"text-gray-400 text-sm",children:"Manage compliance assessments with checkboxes and evidence for each client"})]}),e.jsxs("button",{onClick:()=>d(!0),className:"flex items-center gap-2 px-4 py-2 bg-cyan-600 hover:bg-cyan-700 text-white rounded",children:[e.jsx(L,{className:"w-4 h-4"}),"New Checklist"]})]}),e.jsxs("div",{className:"grid grid-cols-12 gap-6",children:[e.jsx("div",{className:"col-span-3",children:e.jsxs("div",{className:"bg-gray-800 rounded-lg p-4",children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-400 mb-3",children:"Select Customer"}),e.jsxs("select",{value:i||"",onChange:s=>o(s.target.value?{customer:s.target.value}:{}),className:"w-full bg-gray-700 border border-gray-600 rounded px-3 py-2 text-gray-200 mb-4",children:[e.jsx("option",{value:"",children:"All Customers"}),z.map(s=>e.jsx("option",{value:s.id,children:s.name},s.id))]}),i&&e.jsxs(e.Fragment,{children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-400 mb-3",children:"Checklists"}),e.jsx("div",{className:"space-y-2 max-h-96 overflow-auto",children:B.length===0?e.jsx("p",{className:"text-sm text-gray-500 text-center py-4",children:"No checklists found"}):B.map(s=>e.jsxs("button",{onClick:()=>o({customer:s.customer_id,checklist:s.id}),className:`w-full text-left p-3 rounded transition-colors ${a===s.id?"bg-cyan-900/30 border border-cyan-500":"bg-gray-700 hover:bg-gray-600"}`,children:[e.jsx("p",{className:"text-sm font-medium text-gray-200",children:s.name}),e.jsxs("div",{className:"flex items-center justify-between mt-1",children:[e.jsx(R,{status:s.status,type:"checklist"}),e.jsxs("span",{className:"text-xs text-gray-500",children:[s.overall_score.toFixed(0),"%"]})]}),e.jsx(Q,{value:s.overall_score,className:"mt-2"})]},s.id))})]})]})}),e.jsx("div",{className:"col-span-9",children:m?e.jsxs("div",{className:"bg-gray-800 rounded-lg",children:[e.jsxs("div",{className:"p-4 border-b border-gray-700",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold",children:m.name}),e.jsx("p",{className:"text-sm text-gray-400",children:m.description})]}),e.jsx(R,{status:m.status,type:"checklist"})]}),e.jsxs("div",{className:"grid grid-cols-5 gap-4 mt-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsxs("p",{className:"text-2xl font-bold text-cyan-400",children:[m.overall_score.toFixed(0),"%"]}),e.jsx("p",{className:"text-xs text-gray-500",children:"Score"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-2xl font-bold",children:m.total_controls}),e.jsx("p",{className:"text-xs text-gray-500",children:"Total"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-2xl font-bold text-green-400",children:m.compliant_controls}),e.jsx("p",{className:"text-xs text-gray-500",children:"Compliant"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-2xl font-bold text-red-400",children:m.non_compliant_controls}),e.jsx("p",{className:"text-xs text-gray-500",children:"Non-Compliant"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-2xl font-bold text-gray-400",children:m.not_applicable_controls}),e.jsx("p",{className:"text-xs text-gray-500",children:"N/A"})]})]}),e.jsx(Q,{value:m.overall_score,className:"mt-4"})]}),e.jsxs("div",{className:"p-3 border-b border-gray-700 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("input",{type:"checkbox",checked:p.size===A.length&&A.length>0,onChange:s=>te(s.target.checked),className:"w-4 h-4 rounded border-gray-600 text-cyan-500 focus:ring-cyan-500"}),e.jsx("span",{className:"text-sm text-gray-400",children:p.size>0?`${p.size} selected`:"Select all"}),p.size>0&&e.jsxs("div",{className:"flex items-center gap-2 ml-4",children:[e.jsxs("button",{onClick:()=>$(!0),className:"flex items-center gap-1 px-2 py-1 text-xs bg-green-900/50 text-green-400 rounded hover:bg-green-900/70",children:[e.jsx(V,{className:"w-3 h-3"}),"Check All"]}),e.jsxs("button",{onClick:()=>$(!1),className:"flex items-center gap-1 px-2 py-1 text-xs bg-gray-700 text-gray-300 rounded hover:bg-gray-600",children:[e.jsx(H,{className:"w-3 h-3"}),"Uncheck All"]})]})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("button",{onClick:()=>a&&F.mutate(a),disabled:F.isPending||!a,className:"flex items-center gap-2 px-3 py-1.5 bg-purple-600 hover:bg-purple-700 disabled:bg-gray-600 disabled:cursor-not-allowed text-white rounded text-sm transition-colors",title:"Populate checklist with results from automated scans",children:[e.jsx(W,{className:`w-4 h-4 ${F.isPending?"animate-spin":""}`}),F.isPending?"Syncing...":"Sync Scans"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(oe,{className:"w-4 h-4 text-gray-500"}),e.jsxs("select",{value:k,onChange:s=>r(s.target.value),className:"bg-gray-700 border border-gray-600 rounded px-2 py-1 text-sm text-gray-200",children:[e.jsx("option",{value:"",children:"All Statuses"}),e.jsx("option",{value:"not_assessed",children:"Not Assessed"}),e.jsx("option",{value:"in_progress",children:"In Progress"}),e.jsx("option",{value:"compliant",children:"Compliant"}),e.jsx("option",{value:"non_compliant",children:"Non-Compliant"}),e.jsx("option",{value:"not_applicable",children:"Not Applicable"})]})]}),e.jsxs("select",{value:C,onChange:s=>M(s.target.value),className:"bg-gray-700 border border-gray-600 rounded px-2 py-1 text-sm text-gray-200",children:[e.jsx("option",{value:"",children:"All Categories"}),ae.map(s=>e.jsx("option",{value:s,children:s},s))]})]})]}),e.jsx("div",{className:"max-h-[calc(100vh-400px)] overflow-auto",children:Object.entries(re).map(([s,n])=>e.jsxs("div",{children:[e.jsx("div",{className:"px-4 py-2 bg-gray-900/50 sticky top-0",children:e.jsx("h4",{className:"text-sm font-medium text-gray-400",children:s})}),n.map(b=>e.jsx(we,{item:b,onToggleCheck:Z,onUpdateStatus:ee,onViewDetails:N,isSelected:p.has(b.id),onSelect:se},b.id))]},s))})]}):e.jsxs("div",{className:"bg-gray-800 rounded-lg p-12 text-center",children:[e.jsx(P,{className:"w-16 h-16 text-gray-600 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-300 mb-2",children:"No Checklist Selected"}),e.jsx("p",{className:"text-gray-500 mb-4",children:"Select a customer and checklist from the sidebar, or create a new one."}),e.jsxs("button",{onClick:()=>d(!0),className:"inline-flex items-center gap-2 px-4 py-2 bg-cyan-600 hover:bg-cyan-700 text-white rounded",children:[e.jsx(L,{className:"w-4 h-4"}),"Create Checklist"]})]})})]})]}),e.jsx(Ce,{isOpen:l,onClose:()=>d(!1),customers:z,frameworks:ne,onSubmit:s=>J.mutate(s)}),e.jsx(ke,{item:c,checklistId:a||"",onClose:()=>N(null),onSave:(s,n)=>U.mutate({id:s,data:n})})]})};export{Ie as default};
