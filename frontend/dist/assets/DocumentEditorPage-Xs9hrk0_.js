import{j as e}from"./vendor-state-BjT_zREg.js";import{r,i as me,u as ge,j as ue}from"./vendor-react-5KxtEOLM.js";import{l as G,z as xe,J as he,a3 as pe,B as d,U as ye,m as B,by as fe,aD as be,ac as Ne,aa as je,A as ve,D as we,a$ as Ce,a_ as Ee,a7 as Se,u as _e,bb as Te,aO as Ae,i as ke,g as De,h as Pe,p as Re,F as Le}from"./vendor-ui-CfSMq23b.js";import{p as Ie,a as H,t as Oe,d as p,g as Me}from"./legal-CwbboPqQ.js";import{c as U}from"./index-CJ_zz9jP.js";import"./SignaturePad-CzzZkMNo.js";import{D as $e}from"./DocumentPreview-CsvYv4ap.js";import"./vendor-utils-DfRopTPV.js";const Fe=[{key:"CLIENT_NAME",description:"Customer/company name",source:"customers.name",example:"Acme Corporation"},{key:"CLIENT_ADDRESS",description:"Customer address",source:"customers.address",example:"123 Business St, City, ST 12345"},{key:"CLIENT_CONTACT_NAME",description:"Primary contact name",source:"contacts (primary)",example:"John Smith"},{key:"CLIENT_CONTACT_EMAIL",description:"Primary contact email",source:"contacts.email",example:"john@acme.com"},{key:"CLIENT_CONTACT_PHONE",description:"Primary contact phone",source:"contacts.phone",example:"(555) 123-4567"},{key:"ENGAGEMENT_NAME",description:"Engagement name",source:"engagements.name",example:"Q1 2024 Penetration Test"},{key:"ENGAGEMENT_TYPE",description:"Type of engagement",source:"engagements.engagement_type",example:"External Penetration Test"},{key:"ENGAGEMENT_SCOPE",description:"Testing scope/targets",source:"engagements.scope",example:"192.168.1.0/24, *.acme.com"},{key:"START_DATE",description:"Engagement start date",source:"engagements.start_date",example:"January 15, 2024"},{key:"END_DATE",description:"Engagement end date",source:"engagements.end_date",example:"January 31, 2024"},{key:"COMPANY_NAME",description:"Your company name",source:"system settings",example:"HeroForge Security"},{key:"CURRENT_DATE",description:"Current date",source:"dynamic",example:"January 10, 2024"}],V=[{name:"Client Information",keys:["CLIENT_NAME","CLIENT_ADDRESS","CLIENT_CONTACT_NAME","CLIENT_CONTACT_EMAIL","CLIENT_CONTACT_PHONE"]},{name:"Engagement Details",keys:["ENGAGEMENT_NAME","ENGAGEMENT_TYPE","ENGAGEMENT_SCOPE","START_DATE","END_DATE"]},{name:"Other",keys:["COMPANY_NAME","CURRENT_DATE"]}],Ge=({onSelect:h,className:N=""})=>{const[b,u]=r.useState(!1),[D,w]=r.useState(Fe),[f,C]=r.useState(""),[t,c]=r.useState("Client Information");r.useEffect(()=>{Ie.list().then(a=>{a.length>0&&w(a)}).catch(()=>{})},[]);const y=D.filter(a=>a.key.toLowerCase().includes(f.toLowerCase())||a.description.toLowerCase().includes(f.toLowerCase())),_=a=>{const m=`{{${a}}}`;navigator.clipboard.writeText(m),d.success(`Copied ${m} to clipboard`),h&&h(m)},E=a=>{const m=V.find(x=>x.name===a);return m?y.filter(x=>m.keys.includes(x.key)):[]};return e.jsxs("div",{className:`relative ${N}`,children:[e.jsxs("button",{type:"button",onClick:()=>u(!b),className:"flex items-center gap-2 px-3 py-2 bg-gray-700 border border-gray-600 rounded-lg text-sm text-gray-300 hover:bg-gray-600 transition-colors",children:[e.jsx("span",{children:"Insert Placeholder"}),e.jsx(G,{className:`w-4 h-4 transition-transform ${b?"rotate-180":""}`})]}),b&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>u(!1)}),e.jsxs("div",{className:"absolute z-50 mt-2 w-96 bg-gray-800 border border-gray-700 rounded-lg shadow-xl",children:[e.jsx("div",{className:"p-3 border-b border-gray-700",children:e.jsxs("div",{className:"relative",children:[e.jsx(xe,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),e.jsx("input",{type:"text",value:f,onChange:a=>C(a.target.value),placeholder:"Search placeholders...",className:"w-full pl-10 pr-4 py-2 bg-gray-700 border border-gray-600 rounded-lg text-sm text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-cyan-500"})]})}),e.jsxs("div",{className:"max-h-80 overflow-y-auto",children:[V.map(a=>{const m=E(a.name);return m.length===0?null:e.jsxs("div",{className:"border-b border-gray-700 last:border-b-0",children:[e.jsxs("button",{type:"button",onClick:()=>c(t===a.name?null:a.name),className:"w-full flex items-center justify-between px-4 py-2 text-sm font-medium text-gray-300 hover:bg-gray-700/50 transition-colors",children:[e.jsx("span",{children:a.name}),e.jsx(G,{className:`w-4 h-4 transition-transform ${t===a.name?"rotate-180":""}`})]}),t===a.name&&e.jsx("div",{className:"pb-2",children:m.map(x=>e.jsxs("div",{className:"px-4 py-2 hover:bg-gray-700/50 cursor-pointer group",onClick:()=>_(x.key),children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("code",{className:"px-2 py-0.5 bg-cyan-900/50 text-cyan-400 text-xs rounded font-mono",children:`{{${x.key}}}`}),e.jsx(he,{className:"w-3 h-3 text-gray-500 opacity-0 group-hover:opacity-100 transition-opacity"})]})}),e.jsx("p",{className:"text-xs text-gray-400 mt-1",children:x.description}),e.jsxs("div",{className:"flex items-center gap-1 mt-1",children:[e.jsx(pe,{className:"w-3 h-3 text-gray-500"}),e.jsxs("span",{className:"text-xs text-gray-500",children:["Example: ",x.example]})]})]},x.key))})]},a.name)}),y.length===0&&e.jsxs("div",{className:"px-4 py-6 text-center text-gray-400 text-sm",children:['No placeholders found matching "',f,'"']})]}),e.jsx("div",{className:"px-4 py-2 border-t border-gray-700 bg-gray-800/50",children:e.jsx("p",{className:"text-xs text-gray-500",children:"Click a placeholder to copy it to your clipboard"})})]})]})]})},Be={client:["Authorized Representative","CEO","CTO","CISO","Legal Counsel","IT Director","Security Manager"],provider:["Security Consultant","Project Lead","Account Manager","Technical Director"]},He=({signatures:h,onAdd:N,onRemove:b,isEditable:u=!0,className:D=""})=>{const[w,f]=r.useState(!1),[C,t]=r.useState(!1),[c,y]=r.useState({}),[_,E]=r.useState(!1),[a,m]=r.useState({}),x=h.filter(o=>o.signer_type==="client"),T=h.filter(o=>o.signer_type==="provider"),L=()=>{var l,i;const o={};return(l=c.signerRole)!=null&&l.trim()||(o.role="Role is required"),(i=c.signerEmail)!=null&&i.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(c.signerEmail)||(o.email="Invalid email format"):o.email="Email is required",m(o),Object.keys(o).length===0},A=async o=>{if(L()){E(!0);try{const l=o==="client"?x.length+1:T.length+1;await N({signer_type:o,signer_role:c.signerRole.trim(),signer_email:c.signerEmail.trim(),signature_order:l}),y({}),f(!1),t(!1),m({})}finally{E(!1)}}},I=async o=>{confirm("Are you sure you want to remove this signer?")&&await b(o)},v=o=>e.jsx("div",{className:"bg-gray-700/50 rounded-lg p-4 mt-3",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-400 mb-1",children:"Role"}),e.jsx("div",{className:"flex gap-2",children:e.jsxs("select",{value:c.signerRole||"",onChange:l=>{y({...c,signerRole:l.target.value}),m(i=>({...i,role:void 0}))},className:`flex-1 px-3 py-2 bg-gray-700 border rounded-lg text-sm text-white focus:outline-none focus:ring-2 focus:ring-cyan-500 ${a.role?"border-red-500":"border-gray-600"}`,children:[e.jsx("option",{value:"",children:"Select or type a role..."}),Be[o].map(l=>e.jsx("option",{value:l,children:l},l))]})}),e.jsx("input",{type:"text",value:c.signerRole||"",onChange:l=>{y({...c,signerRole:l.target.value}),m(i=>({...i,role:void 0}))},placeholder:"Or enter custom role",className:`mt-2 w-full px-3 py-2 bg-gray-700 border rounded-lg text-sm text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-cyan-500 ${a.role?"border-red-500":"border-gray-600"}`}),a.role&&e.jsx("p",{className:"mt-1 text-xs text-red-400",children:a.role})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-400 mb-1",children:"Email"}),e.jsx("input",{type:"email",value:c.signerEmail||"",onChange:l=>{y({...c,signerEmail:l.target.value}),m(i=>({...i,email:void 0}))},placeholder:"signer@example.com",className:`w-full px-3 py-2 bg-gray-700 border rounded-lg text-sm text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-cyan-500 ${a.email?"border-red-500":"border-gray-600"}`}),a.email&&e.jsx("p",{className:"mt-1 text-xs text-red-400",children:a.email})]}),e.jsxs("div",{className:"flex items-center gap-2 pt-2",children:[e.jsx("button",{type:"button",onClick:()=>A(o),disabled:_,className:"px-4 py-2 bg-cyan-600 hover:bg-cyan-700 text-white text-sm font-medium rounded-lg transition-colors disabled:opacity-50",children:_?"Adding...":"Add Signer"}),e.jsx("button",{type:"button",onClick:()=>{o==="client"?f(!1):t(!1),y({}),m({})},className:"px-4 py-2 text-gray-400 hover:text-white text-sm transition-colors",children:"Cancel"})]})]})}),S=(o,l)=>e.jsxs("div",{className:"space-y-2",children:[o.map((i,k)=>e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-gray-700/30 rounded-lg group",children:[e.jsx("div",{className:"text-gray-500",children:e.jsx(be,{className:"w-4 h-4"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm font-medium text-white",children:i.signer_role}),e.jsx("span",{className:`text-xs px-2 py-0.5 rounded ${i.status==="signed"?"bg-green-900/50 text-green-400":i.status==="declined"?"bg-red-900/50 text-red-400":"bg-yellow-900/50 text-yellow-400"}`,children:i.status})]}),e.jsx("p",{className:"text-xs text-gray-400 truncate",children:i.signer_email})]}),u&&i.status==="pending"&&e.jsx("button",{type:"button",onClick:()=>I(i.id),className:"p-1.5 text-gray-500 hover:text-red-400 opacity-0 group-hover:opacity-100 transition-all",title:"Remove signer",children:e.jsx(Ne,{className:"w-4 h-4"})})]},i.id)),o.length===0&&e.jsxs("p",{className:"text-sm text-gray-500 text-center py-4",children:["No ",l," signers added"]})]});return e.jsxs("div",{className:`bg-gray-800 rounded-lg p-6 ${D}`,children:[e.jsx("h3",{className:"text-lg font-semibold text-white mb-6",children:"Signature Configuration"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-gray-800/50 border border-gray-700 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ye,{className:"w-5 h-5 text-blue-400"}),e.jsx("h4",{className:"font-medium text-white",children:"Client Signers"}),e.jsxs("span",{className:"text-xs text-gray-500",children:["(",x.length,")"]})]}),u&&!w&&e.jsxs("button",{type:"button",onClick:()=>{f(!0),t(!1),y({})},className:"flex items-center gap-1 text-sm text-cyan-400 hover:text-cyan-300 transition-colors",children:[e.jsx(B,{className:"w-4 h-4"}),"Add"]})]}),S(x,"client"),w&&v("client")]}),e.jsxs("div",{className:"bg-gray-800/50 border border-gray-700 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(fe,{className:"w-5 h-5 text-purple-400"}),e.jsx("h4",{className:"font-medium text-white",children:"Provider Signers"}),e.jsxs("span",{className:"text-xs text-gray-500",children:["(",T.length,")"]})]}),u&&!C&&e.jsxs("button",{type:"button",onClick:()=>{t(!0),f(!1),y({})},className:"flex items-center gap-1 text-sm text-cyan-400 hover:text-cyan-300 transition-colors",children:[e.jsx(B,{className:"w-4 h-4"}),"Add"]})]}),S(T,"provider"),C&&v("provider")]})]}),e.jsx("p",{className:"mt-4 text-xs text-gray-500",children:"Add signers from both the client and provider sides. Each signer will receive an email with a unique signing link. Signatures are collected in the order displayed."})]})},Ue=({status:h})=>{const N=Me(h),b={draft:e.jsx(Le,{className:"w-4 h-4"}),pending_signature:e.jsx(Re,{className:"w-4 h-4"}),partially_signed:e.jsx(Pe,{className:"w-4 h-4"}),fully_signed:e.jsx(De,{className:"w-4 h-4"}),voided:e.jsx(ke,{className:"w-4 h-4"})};return e.jsxs("span",{className:`flex items-center gap-1.5 text-sm font-medium px-3 py-1 rounded-full ${N.color}`,children:[b[h],N.label]})},Ze=()=>{const{id:h}=me(),N=ge(),b=ue(),u=!h||h==="new",[D,w]=r.useState(!0),[f,C]=r.useState(!1),[t,c]=r.useState(null),[y,_]=r.useState([]),[E,a]=r.useState([]),[m,x]=r.useState([]),[T,L]=r.useState(""),[A,I]=r.useState(""),[v,S]=r.useState(""),[o,l]=r.useState("roe"),[i,k]=r.useState(""),[P,z]=r.useState(!1),[O,$]=r.useState(""),[q,F]=r.useState(!1);r.useEffect(()=>{(async()=>{var n;w(!0);try{const[g,oe,ie]=await Promise.all([Oe.list(),U.engagements.getAll(),U.customers.getAll()]),le=oe.data,ce=ie.data;if(_(g),a(le),x(ce),!u&&h){const j=await p.get(h);c(j),S(j.document.name),l(j.document.document_type),k(j.document.content_html),I(j.document.engagement_id)}else{const j=(n=b.state)==null?void 0:n.templateId;if(j){L(j);const M=g.find(de=>de.id===j);M&&(l(M.document_type),k(M.content_html),S(`${M.name} - ${new Date().toLocaleDateString()}`))}}}catch(g){d.error("Failed to load data"),console.error(g)}finally{w(!1)}})()},[h,u,b.state]);const J=s=>{L(s);const n=y.find(g=>g.id===s);n&&(l(n.document_type),k(n.content_html),v||S(`${n.name} - ${new Date().toLocaleDateString()}`))},Y=s=>{const n=E.find(g=>g.id===s);if(n)return m.find(g=>g.id===n.customer_id)},Q=async()=>{if(!v.trim()){d.error("Please enter a document name");return}if(!A){d.error("Please select an engagement");return}const s=Y(A);if(!s){d.error("Could not find customer for selected engagement");return}C(!0);try{if(u){const n=await p.create({template_id:T||void 0,engagement_id:A,customer_id:s.id,document_type:o,name:v,content_html:i});d.success("Document created"),N(`/legal/documents/${n.id}`)}else if(t){await p.update(t.document.id,{name:v,content_html:i}),d.success("Document saved");const n=await p.get(t.document.id);c(n)}}catch{d.error("Failed to save document")}finally{C(!1)}},W=async s=>{if(t)try{await p.addSignature(t.document.id,s);const n=await p.get(t.document.id);c(n),d.success("Signer added")}catch{d.error("Failed to add signer")}},X=async s=>{if(t)try{await p.removeSignature(t.document.id,s);const n=await p.get(t.document.id);c(n),d.success("Signer removed")}catch{d.error("Failed to remove signer")}},K=async()=>{if(t){if(t.signatures.length===0){d.error("Please add at least one signer before sending");return}try{await p.sendForSignature(t.document.id);const s=await p.get(t.document.id);c(s),d.success("Document sent for signature")}catch{d.error("Failed to send document")}}},Z=async()=>{if(t)try{const s=await p.sendReminder(t.document.id);d.success(`Sent ${s.reminders_sent} reminder(s)`)}catch{d.error("Failed to send reminders")}},ee=async()=>{if(t)try{const s=await p.downloadPdf(t.document.id),n=URL.createObjectURL(s),g=document.createElement("a");g.href=n,g.download=`${t.document.name}.pdf`,document.body.appendChild(g),g.click(),document.body.removeChild(g),URL.revokeObjectURL(n)}catch{d.error("Failed to download PDF")}},te=async()=>{if(!(!t||!O.trim()))try{await p.void(t.document.id,{reason:O});const s=await p.get(t.document.id);c(s),F(!1),$(""),d.success("Document voided")}catch{d.error("Failed to void document")}},R=!t||t.document.status==="draft",se=(t==null?void 0:t.document.status)==="draft"&&t.signatures.length>0,ae=(t==null?void 0:t.document.status)==="pending_signature"||(t==null?void 0:t.document.status)==="partially_signed",ne=(t==null?void 0:t.document.status)!=="voided"&&(t==null?void 0:t.document.status)!=="draft",re=(t==null?void 0:t.document.status)==="fully_signed";return D?e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsx(je,{className:"w-8 h-8 text-cyan-400 animate-spin"})}):e.jsxs("div",{className:"p-6 max-w-7xl mx-auto",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("button",{onClick:()=>N("/legal/documents"),className:"p-2 text-gray-400 hover:text-white transition-colors",children:e.jsx(ve,{className:"w-5 h-5"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-white",children:u?"New Document":(t==null?void 0:t.document.name)||"Document"}),!u&&t&&e.jsxs("div",{className:"flex items-center gap-3 mt-1",children:[e.jsx("span",{className:"text-gray-400 text-sm",children:H(t.document.document_type)}),e.jsx(Ue,{status:t.document.status})]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[R&&e.jsxs("button",{onClick:Q,disabled:f,className:"flex items-center gap-2 px-4 py-2 bg-cyan-600 hover:bg-cyan-700 text-white font-medium rounded-lg transition-colors disabled:opacity-50",children:[e.jsx(we,{className:"w-4 h-4"}),f?"Saving...":"Save"]}),se&&e.jsxs("button",{onClick:K,className:"flex items-center gap-2 px-4 py-2 bg-green-600 hover:bg-green-700 text-white font-medium rounded-lg transition-colors",children:[e.jsx(Ce,{className:"w-4 h-4"}),"Send for Signature"]}),ae&&e.jsxs("button",{onClick:Z,className:"flex items-center gap-2 px-4 py-2 border border-gray-600 text-gray-300 hover:text-white hover:border-gray-500 rounded-lg transition-colors",children:[e.jsx(Ee,{className:"w-4 h-4"}),"Send Reminder"]}),re&&e.jsxs("button",{onClick:ee,className:"flex items-center gap-2 px-4 py-2 bg-green-600 hover:bg-green-700 text-white font-medium rounded-lg transition-colors",children:[e.jsx(Se,{className:"w-4 h-4"}),"Download PDF"]}),ne&&e.jsxs("button",{onClick:()=>F(!0),className:"flex items-center gap-2 px-4 py-2 border border-red-600 text-red-400 hover:bg-red-600 hover:text-white rounded-lg transition-colors",children:[e.jsx(_e,{className:"w-4 h-4"}),"Void"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[e.jsxs("div",{className:"bg-gray-800 border border-gray-700 rounded-lg p-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-white mb-4",children:"Document Details"}),e.jsxs("div",{className:"space-y-4",children:[u&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Template"}),e.jsxs("select",{value:T,onChange:s=>J(s.target.value),className:"w-full px-4 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-cyan-500",children:[e.jsx("option",{value:"",children:"Select a template (optional)"}),y.map(s=>e.jsxs("option",{value:s.id,children:[s.name," (",H(s.document_type),")"]},s.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Engagement"}),e.jsxs("select",{value:A,onChange:s=>I(s.target.value),className:"w-full px-4 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-cyan-500",required:!0,children:[e.jsx("option",{value:"",children:"Select an engagement"}),E.map(s=>{const n=m.find(g=>g.id===s.customer_id);return e.jsxs("option",{value:s.id,children:[s.name," ",n?`(${n.name})`:""]},s.id)})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Document Type"}),e.jsxs("select",{value:o,onChange:s=>l(s.target.value),className:"w-full px-4 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-cyan-500",children:[e.jsx("option",{value:"roe",children:"Rules of Engagement"}),e.jsx("option",{value:"ato",children:"Authorization to Test"}),e.jsx("option",{value:"nda",children:"Non-Disclosure Agreement"}),e.jsx("option",{value:"sow",children:"Statement of Work"}),e.jsx("option",{value:"msa",children:"Master Service Agreement"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Document Name"}),e.jsx("input",{type:"text",value:v,onChange:s=>S(s.target.value),disabled:!R,className:"w-full px-4 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-cyan-500 disabled:opacity-50",placeholder:"Enter document name"})]})]})]}),e.jsxs("div",{className:"bg-gray-800 border border-gray-700 rounded-lg p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-lg font-semibold text-white",children:"Content"}),e.jsxs("div",{className:"flex items-center gap-2",children:[R&&e.jsx(Ge,{onSelect:s=>k(n=>n+s)}),e.jsxs("button",{onClick:()=>z(!P),className:`flex items-center gap-2 px-3 py-2 rounded-lg transition-colors ${P?"bg-cyan-600 text-white":"bg-gray-700 text-gray-300 hover:text-white"}`,children:[P?e.jsx(Te,{className:"w-4 h-4"}):e.jsx(Ae,{className:"w-4 h-4"}),P?"Edit":"Preview"]})]})]}),P?e.jsx($e,{contentHtml:i,signatures:(t==null?void 0:t.signatures)||[],showSignatureBlocks:!!t}):e.jsx("textarea",{value:i,onChange:s=>k(s.target.value),disabled:!R,className:"w-full h-[500px] px-4 py-3 bg-gray-700 border border-gray-600 rounded-lg text-white font-mono text-sm placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-cyan-500 disabled:opacity-50 resize-y",placeholder:"Enter document HTML content..."})]})]}),e.jsxs("div",{className:"space-y-6",children:[!u&&t&&e.jsx(He,{signatures:t.signatures,onAdd:W,onRemove:X,isEditable:R}),!u&&t&&t.history.length>0&&e.jsxs("div",{className:"bg-gray-800 border border-gray-700 rounded-lg p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Activity History"}),e.jsx("div",{className:"space-y-3 max-h-80 overflow-y-auto",children:t.history.map(s=>e.jsxs("div",{className:"flex items-start gap-3 text-sm",children:[e.jsx("div",{className:"w-2 h-2 mt-1.5 rounded-full bg-cyan-500 flex-shrink-0"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-gray-300",children:s.action}),s.actor_email&&e.jsx("p",{className:"text-gray-500 text-xs truncate",children:s.actor_email}),e.jsx("p",{className:"text-gray-500 text-xs",children:new Date(s.created_at).toLocaleString()})]})]},s.id))})]})]})]}),q&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50",children:e.jsxs("div",{className:"bg-gray-800 rounded-lg p-6 max-w-md w-full mx-4",children:[e.jsx("h4",{className:"text-lg font-semibold text-white mb-2",children:"Void Document"}),e.jsx("p",{className:"text-gray-400 text-sm mb-4",children:"This will invalidate the document and prevent any further signatures. This action cannot be undone."}),e.jsx("textarea",{value:O,onChange:s=>$(s.target.value),className:"w-full px-4 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-cyan-500 resize-none",rows:3,placeholder:"Enter reason for voiding..."}),e.jsxs("div",{className:"flex items-center justify-end gap-3 mt-4",children:[e.jsx("button",{onClick:()=>{F(!1),$("")},className:"px-4 py-2 text-gray-300 hover:text-white transition-colors",children:"Cancel"}),e.jsx("button",{onClick:te,disabled:!O.trim(),className:"px-4 py-2 bg-red-600 hover:bg-red-700 text-white font-medium rounded-lg transition-colors disabled:opacity-50",children:"Void Document"})]})]})})]})};export{Ze as default};
