import{u as x,j as e}from"./vendor-state-DdX3IZQk.js";import{j as T,u as q,r as S}from"./vendor-react-Da1CiaFS.js";import{ab as z,d as b,B as n,ac as o,ad as f}from"./index-Bb4q83G1.js";import{L as m,bs as v,f as y,j as u,O as g,bQ as N,S as h,h as L,U as R,bR as O,bH as A}from"./vendor-ui-BtTuH1aT.js";import"./vendor-charts-BJqcw2-G.js";const F=({organization:s,memberCount:r,teamCount:t})=>e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-dark-surface rounded-lg border border-dark-border p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Organization Details"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-slate-400",children:"Name"}),e.jsx("p",{className:"text-white font-medium",children:s.name})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-slate-400",children:"Slug"}),e.jsx("p",{className:"text-white font-mono",children:s.slug})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"text-sm text-slate-400",children:"Description"}),e.jsx("p",{className:"text-white",children:s.description||"No description"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-slate-400",children:"Status"}),e.jsx("span",{className:`inline-flex items-center px-2 py-1 text-xs font-medium rounded ${s.is_active?"bg-green-500/20 text-green-400 border border-green-500/30":"bg-red-500/20 text-red-400 border border-red-500/30"}`,children:s.is_active?"Active":"Inactive"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-slate-400",children:"Created"}),e.jsx("p",{className:"text-white",children:new Date(s.created_at).toLocaleDateString()})]})]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsx("div",{className:"bg-dark-surface rounded-lg border border-dark-border p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 rounded-lg bg-cyan-500/20",children:e.jsx(u,{className:"h-5 w-5 text-cyan-400"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold text-white",children:r}),e.jsx("p",{className:"text-sm text-slate-400",children:"Members"})]})]})}),e.jsx("div",{className:"bg-dark-surface rounded-lg border border-dark-border p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 rounded-lg bg-purple-500/20",children:e.jsx(N,{className:"h-5 w-5 text-purple-400"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold text-white",children:t}),e.jsx("p",{className:"text-sm text-slate-400",children:"Teams"})]})]})}),e.jsx("div",{className:"bg-dark-surface rounded-lg border border-dark-border p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 rounded-lg bg-amber-500/20",children:e.jsx(g,{className:"h-5 w-5 text-amber-400"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold text-white",children:"0"}),e.jsx("p",{className:"text-sm text-slate-400",children:"Departments"})]})]})})]})]}),K=({orgId:s,isAdmin:r})=>{const{data:t,isLoading:d}=x({queryKey:["org-members",s],queryFn:async()=>(await o.listMembers(s)).data}),l=a=>{switch(a){case"owner":return e.jsx(A,{className:"h-4 w-4 text-amber-400"});case"admin":return e.jsx(O,{className:"h-4 w-4 text-cyan-400"});default:return e.jsx(R,{className:"h-4 w-4 text-slate-400"})}},i=a=>{switch(a){case"owner":return"bg-amber-500/20 text-amber-400 border-amber-500/30";case"admin":return"bg-cyan-500/20 text-cyan-400 border-cyan-500/30";default:return"bg-slate-500/20 text-slate-400 border-slate-500/30"}};return d?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx(m,{className:"h-8 w-8 animate-spin text-primary"})}):e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("h3",{className:"text-lg font-semibold text-white",children:["Members (",(t==null?void 0:t.length)||0,")"]}),r&&e.jsxs(n,{size:"sm",children:[e.jsx(u,{className:"h-4 w-4 mr-2"}),"Add Member"]})]}),e.jsx("div",{className:"bg-dark-surface rounded-lg border border-dark-border overflow-hidden",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-dark-hover",children:e.jsxs("tr",{children:[e.jsx("th",{className:"text-left px-4 py-3 text-sm font-medium text-slate-400",children:"User"}),e.jsx("th",{className:"text-left px-4 py-3 text-sm font-medium text-slate-400",children:"Email"}),e.jsx("th",{className:"text-left px-4 py-3 text-sm font-medium text-slate-400",children:"Role"}),e.jsx("th",{className:"text-left px-4 py-3 text-sm font-medium text-slate-400",children:"Joined"}),r&&e.jsx("th",{className:"text-right px-4 py-3 text-sm font-medium text-slate-400",children:"Actions"})]})}),e.jsxs("tbody",{className:"divide-y divide-dark-border",children:[t==null?void 0:t.map(a=>e.jsxs("tr",{className:"hover:bg-dark-hover",children:[e.jsx("td",{className:"px-4 py-3",children:e.jsxs("div",{className:"flex items-center gap-2",children:[l(a.role),e.jsx("span",{className:"text-white font-medium",children:a.username})]})}),e.jsx("td",{className:"px-4 py-3 text-slate-400",children:a.email}),e.jsx("td",{className:"px-4 py-3",children:e.jsx("span",{className:`inline-flex items-center px-2 py-1 text-xs font-medium rounded border ${i(a.role)}`,children:a.role})}),e.jsx("td",{className:"px-4 py-3 text-slate-400",children:new Date(a.joined_at).toLocaleDateString()}),r&&e.jsx("td",{className:"px-4 py-3 text-right",children:e.jsx(n,{variant:"ghost",size:"sm",children:"Edit"})})]},a.user_id)),(!t||t.length===0)&&e.jsx("tr",{children:e.jsx("td",{colSpan:r?5:4,className:"px-4 py-8 text-center text-slate-400",children:"No members found"})})]})]})})]})},E=({orgId:s,isAdmin:r})=>{const{data:t,isLoading:d}=x({queryKey:["org-departments",s],queryFn:async()=>(await o.listDepartments(s)).data});return d?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx(m,{className:"h-8 w-8 animate-spin text-primary"})}):e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("h3",{className:"text-lg font-semibold text-white",children:["Departments (",(t==null?void 0:t.length)||0,")"]}),r&&e.jsxs(n,{size:"sm",children:[e.jsx(g,{className:"h-4 w-4 mr-2"}),"Add Department"]})]}),e.jsxs("div",{className:"grid gap-4",children:[t==null?void 0:t.map(l=>e.jsx("div",{className:"bg-dark-surface rounded-lg border border-dark-border p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-white font-medium",children:l.name}),e.jsx("p",{className:"text-sm text-slate-400",children:l.description||"No description"})]}),r&&e.jsx(n,{variant:"ghost",size:"sm",children:"Edit"})]})},l.id)),(!t||t.length===0)&&e.jsx("div",{className:"bg-dark-surface rounded-lg border border-dark-border p-8 text-center text-slate-400",children:"No departments created yet. Departments help organize your teams."})]})]})},M=({orgId:s,isAdmin:r})=>{const{data:t,isLoading:d}=x({queryKey:["org-teams",s],queryFn:async()=>(await o.listTeams(s)).data});return d?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx(m,{className:"h-8 w-8 animate-spin text-primary"})}):e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("h3",{className:"text-lg font-semibold text-white",children:["Teams (",(t==null?void 0:t.length)||0,")"]}),r&&e.jsxs(n,{size:"sm",children:[e.jsx(N,{className:"h-4 w-4 mr-2"}),"Add Team"]})]}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[t==null?void 0:t.map(l=>e.jsxs("div",{className:"bg-dark-surface rounded-lg border border-dark-border p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h4",{className:"text-white font-medium",children:l.name}),r&&e.jsx(n,{variant:"ghost",size:"sm",children:"Edit"})]}),e.jsx("p",{className:"text-sm text-slate-400 mb-3",children:l.description||"No description"}),e.jsx("div",{className:"flex items-center gap-2 text-xs text-slate-500",children:e.jsx("span",{className:"font-mono bg-dark-hover px-2 py-1 rounded",children:l.slug})})]},l.id)),(!t||t.length===0)&&e.jsx("div",{className:"col-span-2 bg-dark-surface rounded-lg border border-dark-border p-8 text-center text-slate-400",children:"No teams created yet. Create a department first, then add teams to it."})]})]})},_=({orgId:s,isAdmin:r})=>{const{data:t}=x({queryKey:["role-templates"],queryFn:async()=>(await f.listRoleTemplates()).data}),{data:d,isLoading:l}=x({queryKey:["org-custom-roles",s],queryFn:async()=>(await f.listCustomRoles(s)).data});return l?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx(m,{className:"h-8 w-8 animate-spin text-primary"})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Role Templates (System)"}),e.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:t==null?void 0:t.map(i=>{var a;return e.jsxs("div",{className:"bg-dark-surface rounded-lg border border-dark-border p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(h,{className:"h-5 w-5 text-primary"}),e.jsx("h4",{className:"text-white font-medium",children:i.display_name})]}),e.jsx("p",{className:"text-sm text-slate-400 mb-3",children:i.description||"No description"}),e.jsxs("div",{className:"text-xs text-slate-500",children:[((a=i.permissions)==null?void 0:a.length)||0," permissions"]})]},i.id)})})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-white",children:"Custom Roles"}),r&&e.jsxs(n,{size:"sm",children:[e.jsx(h,{className:"h-4 w-4 mr-2"}),"Create Custom Role"]})]}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:[d==null?void 0:d.map(i=>{var a;return e.jsxs("div",{className:"bg-dark-surface rounded-lg border border-dark-border p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(h,{className:"h-5 w-5 text-purple-400"}),e.jsx("h4",{className:"text-white font-medium",children:i.display_name})]}),r&&e.jsx(n,{variant:"ghost",size:"sm",children:"Edit"})]}),e.jsx("p",{className:"text-sm text-slate-400 mb-3",children:i.description||"No description"}),e.jsxs("div",{className:"text-xs text-slate-500",children:[((a=i.permissions)==null?void 0:a.length)||0," permissions"]})]},i.id)}),(!d||d.length===0)&&e.jsx("div",{className:"col-span-full bg-dark-surface rounded-lg border border-dark-border p-8 text-center text-slate-400",children:"No custom roles created yet. Create custom roles to define specific permission sets for your organization."})]})]})]})},U=({organization:s,isOwner:r})=>e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-dark-surface rounded-lg border border-dark-border p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"General Settings"}),e.jsxs("form",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-400 mb-1",children:"Organization Name"}),e.jsx("input",{type:"text",defaultValue:s.name,disabled:!r,className:"w-full px-3 py-2 bg-dark-hover border border-dark-border rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-primary disabled:opacity-50"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-400 mb-1",children:"Description"}),e.jsx("textarea",{defaultValue:s.description||"",disabled:!r,rows:3,className:"w-full px-3 py-2 bg-dark-hover border border-dark-border rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-primary disabled:opacity-50"})]}),r&&e.jsx(n,{type:"submit",children:"Save Changes"})]})]}),r&&e.jsxs("div",{className:"bg-dark-surface rounded-lg border border-red-500/30 p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-red-400 mb-4",children:"Danger Zone"}),e.jsx("p",{className:"text-sm text-slate-400 mb-4",children:"Deleting an organization is permanent and cannot be undone. All members, teams, and associated data will be removed."}),e.jsx(n,{variant:"danger",children:"Delete Organization"})]})]}),Q=()=>{const{id:s}=T(),r=q(),[t,d]=S.useState("overview"),{isOrgOwner:l,isOrgAdmin:i}=z(),{data:a,isLoading:w,error:k}=x({queryKey:["organization",s],queryFn:async()=>(await o.get(s)).data,enabled:!!s}),{data:j}=x({queryKey:["org-members",s],queryFn:async()=>(await o.listMembers(s)).data,enabled:!!s}),{data:p}=x({queryKey:["org-teams",s],queryFn:async()=>(await o.listTeams(s)).data,enabled:!!s}),C=[{id:"overview",label:"Overview",icon:e.jsx(y,{className:"h-4 w-4"})},{id:"members",label:"Members",icon:e.jsx(u,{className:"h-4 w-4"})},{id:"departments",label:"Departments",icon:e.jsx(g,{className:"h-4 w-4"})},{id:"teams",label:"Teams",icon:e.jsx(N,{className:"h-4 w-4"})},{id:"roles",label:"Roles",icon:e.jsx(h,{className:"h-4 w-4"})},{id:"settings",label:"Settings",icon:e.jsx(L,{className:"h-4 w-4"})}];if(w)return e.jsx(b,{children:e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx(m,{className:"h-8 w-8 animate-spin text-primary"})})});if(k||!a)return e.jsx(b,{children:e.jsxs("div",{className:"text-center py-12",children:[e.jsx("p",{className:"text-red-400 mb-4",children:"Failed to load organization"}),e.jsxs(n,{onClick:()=>r(-1),children:[e.jsx(v,{className:"h-4 w-4 mr-2"}),"Go Back"]})]})});const D=()=>{switch(t){case"overview":return e.jsx(F,{organization:a,memberCount:(j==null?void 0:j.length)||0,teamCount:(p==null?void 0:p.length)||0});case"members":return e.jsx(K,{orgId:s,isAdmin:i()});case"departments":return e.jsx(E,{orgId:s,isAdmin:i()});case"teams":return e.jsx(M,{orgId:s,isAdmin:i()});case"roles":return e.jsx(_,{orgId:s,isAdmin:i()});case"settings":return e.jsx(U,{organization:a,isOwner:l()});default:return null}};return e.jsx(b,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("button",{onClick:()=>r(-1),className:"p-1 rounded hover:bg-dark-hover transition-colors",children:e.jsx(v,{className:"h-5 w-5 text-slate-400"})}),e.jsx(y,{className:"h-6 w-6 text-primary"}),e.jsx("h1",{className:"text-2xl font-bold text-white",children:a.name})]}),e.jsx("p",{className:"text-slate-400 ml-9",children:a.description||"Organization management"})]})}),e.jsx("div",{className:"bg-dark-surface rounded-lg border border-dark-border p-4",children:e.jsx("div",{className:"flex gap-1",children:C.map(c=>e.jsxs("button",{onClick:()=>d(c.id),className:`flex items-center gap-2 px-4 py-2 rounded-lg text-sm font-medium transition-colors ${t===c.id?"bg-primary text-white":"text-slate-400 hover:text-white hover:bg-dark-hover"}`,children:[c.icon,c.label]},c.id))})}),e.jsx("div",{children:D()})]})})};export{Q as default};
