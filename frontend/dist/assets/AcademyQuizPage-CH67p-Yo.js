import{j as e}from"./vendor-state-oFDmcCcB.js";import{u as M,i as F,r as N,L as I}from"./vendor-react-5KxtEOLM.js";import{u as H}from"./academyStore-DZGOKdtv.js";import{H as W}from"./index-MDkiA-RQ.js";import{g as R,C as Y,bt as Z,bn as K,i as U,w as X,b as T,aE as J,au as V,Z as ee,p as B,B as te,A as se,aU as re,h as ae,$ as ne}from"./vendor-ui-7EurIAWU.js";import"./academyApi-CeTYPipX.js";import"./vendor-utils-DfRopTPV.js";const le=({questionNumber:a,totalQuestions:S,questionType:x,questionText:t,options:C,points:v,selectedAnswer:u,onAnswer:m,showFeedback:d=!1,isCorrect:h,correctAnswer:c,explanation:q,disabled:i=!1})=>{const y=()=>{switch(x){case"multiple_choice":return _();case"multiple_select":return $();case"true_false":return E();case"code_challenge":return A();default:return _()}},_=()=>{const g=typeof u=="number"?u:-1,b=typeof c=="number"?c:-1;return e.jsx("div",{className:"space-y-3",children:C.map((f,l)=>{const n=g===l,s=d&&b===l,o=d&&n&&!h;return e.jsxs("button",{onClick:()=>!i&&m(l),disabled:i,className:`w-full text-left p-4 rounded-lg border-2 transition-all flex items-center ${s?"border-green-500 bg-green-900/20":o?"border-red-500 bg-red-900/20":n?"border-cyan-500 bg-cyan-900/20":"border-gray-700 hover:border-gray-600 bg-gray-800"} ${i?"cursor-not-allowed opacity-75":""}`,children:[e.jsx("div",{className:`w-6 h-6 rounded-full border-2 flex items-center justify-center mr-3 ${s?"border-green-500 bg-green-500":o?"border-red-500 bg-red-500":n?"border-cyan-500 bg-cyan-500":"border-gray-500"}`,children:(n||s)&&e.jsx(R,{className:"w-4 h-4 text-white"})}),e.jsx("span",{className:`${s?"text-green-400":o?"text-red-400":n?"text-cyan-400":"text-gray-300"}`,children:f})]},l)})})},$=()=>{const g=Array.isArray(u)?u:[],b=Array.isArray(c)?c:[],f=l=>{if(i)return;const n=g.includes(l)?g.filter(s=>s!==l):[...g,l];m(n)};return e.jsxs("div",{className:"space-y-3",children:[e.jsx("p",{className:"text-sm text-gray-400 mb-2",children:"Select all that apply"}),C.map((l,n)=>{const s=g.includes(n),o=d&&b.includes(n),j=d&&s&&!b.includes(n),z=d&&!s&&b.includes(n);return e.jsxs("button",{onClick:()=>f(n),disabled:i,className:`w-full text-left p-4 rounded-lg border-2 transition-all flex items-center ${o&&s?"border-green-500 bg-green-900/20":j?"border-red-500 bg-red-900/20":z?"border-yellow-500 bg-yellow-900/20":s?"border-cyan-500 bg-cyan-900/20":"border-gray-700 hover:border-gray-600 bg-gray-800"} ${i?"cursor-not-allowed opacity-75":""}`,children:[e.jsx("div",{className:`w-6 h-6 rounded border-2 flex items-center justify-center mr-3 ${o&&s?"border-green-500 bg-green-500":j?"border-red-500 bg-red-500":z?"border-yellow-500":s?"border-cyan-500 bg-cyan-500":"border-gray-500"}`,children:s&&e.jsx(Z,{className:"w-4 h-4 text-white"})}),e.jsx("span",{className:`${o&&s?"text-green-400":j?"text-red-400":z?"text-yellow-400":s?"text-cyan-400":"text-gray-300"}`,children:l})]},n)})]})},E=()=>{const g=typeof u=="boolean"?u:null,b=typeof c=="boolean"?c:null,f=(l,n)=>{const s=g===l,o=d&&b===l,j=d&&s&&!h;return e.jsx("button",{onClick:()=>!i&&m(l),disabled:i,className:`flex-1 p-6 rounded-lg border-2 transition-all text-center ${o?"border-green-500 bg-green-900/20":j?"border-red-500 bg-red-900/20":s?"border-cyan-500 bg-cyan-900/20":"border-gray-700 hover:border-gray-600 bg-gray-800"} ${i?"cursor-not-allowed opacity-75":""}`,children:e.jsx("span",{className:`text-xl font-bold ${o?"text-green-400":j?"text-red-400":s?"text-cyan-400":"text-gray-300"}`,children:n})})};return e.jsxs("div",{className:"flex gap-4",children:[f(!0,"True"),f(!1,"False")]})},A=()=>{const g=typeof u=="number"?u:-1,b=typeof c=="number"?c:-1;return e.jsx("div",{className:"space-y-3",children:C.map((f,l)=>{const n=g===l,s=d&&b===l,o=d&&n&&!h;return e.jsxs("button",{onClick:()=>!i&&m(l),disabled:i,className:`w-full text-left p-4 rounded-lg border-2 transition-all flex items-start ${s?"border-green-500 bg-green-900/20":o?"border-red-500 bg-red-900/20":n?"border-cyan-500 bg-cyan-900/20":"border-gray-700 hover:border-gray-600 bg-gray-800"} ${i?"cursor-not-allowed opacity-75":""}`,children:[e.jsx("div",{className:`w-6 h-6 rounded-full border-2 flex items-center justify-center mr-3 mt-0.5 ${s?"border-green-500 bg-green-500":o?"border-red-500 bg-red-500":n?"border-cyan-500 bg-cyan-500":"border-gray-500"}`,children:(n||s)&&e.jsx(R,{className:"w-4 h-4 text-white"})}),e.jsx("pre",{className:`font-mono text-sm whitespace-pre-wrap ${s?"text-green-400":o?"text-red-400":n?"text-cyan-400":"text-gray-300"}`,children:f})]},l)})})};return e.jsxs("div",{className:"bg-gray-800 rounded-xl p-6 mb-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-500",children:["Question ",a," of ",S]}),e.jsx("span",{className:"mx-2 text-gray-600",children:"•"}),e.jsxs("span",{className:"text-sm text-cyan-400",children:[v," point",v!==1?"s":""]})]}),e.jsx("span",{className:`text-xs px-2 py-1 rounded ${x==="multiple_choice"?"bg-blue-900/50 text-blue-400":x==="multiple_select"?"bg-purple-900/50 text-purple-400":x==="true_false"?"bg-green-900/50 text-green-400":"bg-orange-900/50 text-orange-400"}`,children:x.replace("_"," ")})]}),e.jsx("h3",{className:"text-lg text-white mb-6",children:t}),y(),d&&e.jsxs("div",{className:`mt-6 p-4 rounded-lg ${h?"bg-green-900/20 border border-green-700":"bg-red-900/20 border border-red-700"}`,children:[e.jsx("div",{className:"flex items-center mb-2",children:h?e.jsxs(e.Fragment,{children:[e.jsx(R,{className:"w-5 h-5 text-green-400 mr-2"}),e.jsx("span",{className:"text-green-400 font-medium",children:"Correct!"})]}):e.jsxs(e.Fragment,{children:[e.jsx(Y,{className:"w-5 h-5 text-red-400 mr-2"}),e.jsx("span",{className:"text-red-400 font-medium",children:"Incorrect"})]})}),q&&e.jsx("p",{className:"text-gray-400 text-sm",children:q})]})]})},ce=({result:a,lessonTitle:S,passThreshold:x,pathSlug:t,nextLessonId:C,onRetry:v,canRetry:u=!0})=>{const m=M(),h=(c=>c>=90?{letter:"A",color:"text-green-400"}:c>=80?{letter:"B",color:"text-cyan-400"}:c>=70?{letter:"C",color:"text-yellow-400"}:c>=60?{letter:"D",color:"text-orange-400"}:{letter:"F",color:"text-red-400"})(a.score_percent);return e.jsxs("div",{className:"quiz-results",children:[e.jsx("div",{className:`rounded-xl p-8 mb-8 text-center ${a.passed?"bg-gradient-to-r from-green-900/30 to-cyan-900/30 border border-green-700":"bg-gradient-to-r from-red-900/30 to-orange-900/30 border border-red-700"}`,children:a.passed?e.jsxs(e.Fragment,{children:[e.jsx(K,{className:"w-20 h-20 text-yellow-400 mx-auto mb-4"}),e.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:"Congratulations!"}),e.jsxs("p",{className:"text-gray-300",children:['You passed the quiz for "',S,'"']})]}):e.jsxs(e.Fragment,{children:[e.jsx(U,{className:"w-20 h-20 text-red-400 mx-auto mb-4"}),e.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:"Not Quite There"}),e.jsxs("p",{className:"text-gray-300",children:["You need ",x,"% to pass. Keep studying and try again!"]})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-8",children:[e.jsxs("div",{className:"bg-gray-800 rounded-xl p-6 text-center",children:[e.jsxs("div",{className:`text-4xl font-bold mb-2 ${h.color}`,children:[a.score_percent,"%"]}),e.jsx("div",{className:"text-gray-400 text-sm",children:"Your Score"})]}),e.jsxs("div",{className:"bg-gray-800 rounded-xl p-6 text-center",children:[e.jsx("div",{className:`text-4xl font-bold mb-2 ${h.color}`,children:h.letter}),e.jsx("div",{className:"text-gray-400 text-sm",children:"Grade"})]}),e.jsxs("div",{className:"bg-gray-800 rounded-xl p-6 text-center",children:[e.jsxs("div",{className:"text-4xl font-bold text-white mb-2",children:[a.questions_correct,"/",a.questions_total]}),e.jsx("div",{className:"text-gray-400 text-sm",children:"Questions Correct"})]}),e.jsxs("div",{className:"bg-gray-800 rounded-xl p-6 text-center",children:[e.jsxs("div",{className:"text-4xl font-bold text-cyan-400 mb-2",children:[a.earned_points,"/",a.total_points]}),e.jsx("div",{className:"text-gray-400 text-sm",children:"Points Earned"})]})]}),e.jsxs("div",{className:"bg-gray-800 rounded-xl p-6 mb-8",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm text-gray-400",children:"Score Progress"}),e.jsxs("span",{className:`text-sm font-medium ${a.passed?"text-green-400":"text-gray-400"}`,children:["Passing: ",x,"%"]})]}),e.jsxs("div",{className:"relative w-full h-4 bg-gray-700 rounded-full overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 bottom-0 w-0.5 bg-yellow-500 z-10",style:{left:`${x}%`}}),e.jsx("div",{className:`h-full rounded-full transition-all duration-1000 ${a.passed?"bg-gradient-to-r from-green-500 to-cyan-500":"bg-red-500"}`,style:{width:`${a.score_percent}%`}})]})]}),e.jsxs("div",{className:"bg-gray-800 rounded-xl p-6 mb-8",children:[e.jsxs("h2",{className:"text-xl font-bold text-white mb-4 flex items-center",children:[e.jsx(X,{className:"w-5 h-5 mr-2 text-cyan-400"}),"Question Breakdown"]}),e.jsx("div",{className:"grid grid-cols-10 gap-2",children:a.feedback.map((c,q)=>e.jsx("div",{className:`aspect-square rounded-lg flex items-center justify-center font-medium ${c.correct?"bg-green-900/50 text-green-400 border border-green-700":"bg-red-900/50 text-red-400 border border-red-700"}`,title:c.correct?"Correct":"Incorrect",children:q+1},c.question_id))}),e.jsxs("div",{className:"flex items-center justify-center gap-6 mt-4 text-sm",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-4 h-4 bg-green-900/50 border border-green-700 rounded mr-2"}),e.jsx("span",{className:"text-gray-400",children:"Correct"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-4 h-4 bg-red-900/50 border border-red-700 rounded mr-2"}),e.jsx("span",{className:"text-gray-400",children:"Incorrect"})]})]})]}),e.jsx("div",{className:"flex flex-col sm:flex-row gap-4",children:a.passed?e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:()=>m(`/academy/path/${t}`),className:"flex-1 bg-gray-700 hover:bg-gray-600 text-white font-medium py-3 px-6 rounded-lg transition-colors flex items-center justify-center",children:[e.jsx(T,{className:"w-5 h-5 mr-2 rotate-180"}),"Back to Course"]}),C?e.jsxs("button",{onClick:()=>m(`/academy/lesson/${C}`),className:"flex-1 bg-cyan-600 hover:bg-cyan-700 text-white font-medium py-3 px-6 rounded-lg transition-colors flex items-center justify-center",children:["Next Lesson",e.jsx(T,{className:"w-5 h-5 ml-2"})]}):e.jsxs("button",{onClick:()=>m(`/academy/path/${t}`),className:"flex-1 bg-gradient-to-r from-cyan-600 to-purple-600 hover:from-cyan-700 hover:to-purple-700 text-white font-medium py-3 px-6 rounded-lg transition-colors flex items-center justify-center",children:[e.jsx(J,{className:"w-5 h-5 mr-2"}),"Complete Course"]})]}):e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>m(`/academy/path/${t}`),className:"flex-1 bg-gray-700 hover:bg-gray-600 text-white font-medium py-3 px-6 rounded-lg transition-colors flex items-center justify-center",children:"Review Material"}),u&&v&&e.jsxs("button",{onClick:v,className:"flex-1 bg-cyan-600 hover:bg-cyan-700 text-white font-medium py-3 px-6 rounded-lg transition-colors flex items-center justify-center",children:[e.jsx(V,{className:"w-5 h-5 mr-2"}),"Try Again"]})]})}),e.jsx("div",{className:"mt-8 text-center",children:a.passed?e.jsxs("p",{className:"text-gray-400",children:[e.jsx(ee,{className:"w-4 h-4 inline mr-1 text-yellow-400"}),"Great job! You've demonstrated solid understanding of this material."]}):e.jsxs("p",{className:"text-gray-400",children:[e.jsx(B,{className:"w-4 h-4 inline mr-1 text-cyan-400"}),"Don't worry! Review the lesson content and try again when you're ready."]})})]})},he=()=>{const{lessonId:a}=F(),S=M(),x=W(r=>r.isAuthenticated),{currentQuiz:t,quizResult:C,currentPath:v,isLoadingQuiz:u,isSubmittingQuiz:m,error:d,fetchQuiz:h,submitQuiz:c,clearError:q,clearQuizResult:i}=H(),[y,_]=N.useState(0),[$,E]=N.useState({}),[A,g]=N.useState(!1),[b]=N.useState(Date.now()),[f,l]=N.useState(0);N.useEffect(()=>{x||S(`/login?redirect=/academy/quiz/${a}`)},[x,a,S]),N.useEffect(()=>{a&&x&&(h(a),i())},[a,x,h,i]),N.useEffect(()=>{const r=setInterval(()=>{l(Math.floor((Date.now()-b)/1e3))},1e3);return()=>clearInterval(r)},[b]),N.useEffect(()=>{d&&(te.error(d),q())},[d,q]);const n=r=>{const w=Math.floor(r/60),p=r%60;return`${w}:${p.toString().padStart(2,"0")}`},s=N.useCallback((r,w)=>{E(p=>({...p,[r]:w}))},[]),o=r=>{r>=0&&t&&r<t.questions.length&&_(r)},j=N.useCallback(()=>t?t.questions.every(r=>$[r.id]!==void 0&&$[r.id]!==null):!1,[t,$]),z=async()=>{if(!a||!t)return;const r=t.questions.map(p=>({question_id:p.id,answer:$[p.id]}));await c(a,r,f)&&g(!0)},O=()=>{E({}),_(0),g(!1),i()},P=()=>v?v.slug:"beginner",G=()=>{if(!v||!t)return null;const r=v.modules.flatMap(k=>k.lessons),w=t.lesson_id,p=r.findIndex(k=>k.id===w);return p<r.length-1?r[p+1].id:null};if(u||!t)return e.jsx("div",{className:"min-h-screen bg-gray-900 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-12 h-12 border-4 border-cyan-500 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),e.jsx("p",{className:"text-gray-400",children:"Loading quiz..."})]})});if(A&&C)return e.jsxs("div",{className:"min-h-screen bg-gray-900",children:[e.jsx("header",{className:"bg-gray-800 border-b border-gray-700",children:e.jsxs("div",{className:"max-w-4xl mx-auto px-4 py-4 flex items-center",children:[e.jsx(I,{to:"/",className:"flex items-center space-x-2",children:e.jsx("span",{className:"text-xl font-bold text-cyan-400",children:"HeroForge"})}),e.jsx("span",{className:"text-gray-500 mx-2",children:"•"}),e.jsx("span",{className:"text-gray-400 text-sm",children:"Quiz Results"})]})}),e.jsx("main",{className:"max-w-4xl mx-auto px-4 py-8",children:e.jsx(ce,{result:C,lessonTitle:t.lesson_title,passThreshold:t.pass_threshold,pathSlug:P(),nextLessonId:G(),onRetry:O,canRetry:!0})})]});const Q=t.questions[y],L=Object.keys($).length,D=L/t.questions.length*100;return e.jsxs("div",{className:"min-h-screen bg-gray-900",children:[e.jsxs("header",{className:"bg-gray-800 border-b border-gray-700 sticky top-0 z-50",children:[e.jsxs("div",{className:"max-w-4xl mx-auto px-4 py-3 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("button",{onClick:()=>S(`/academy/path/${P()}`),className:"mr-4 text-gray-400 hover:text-white transition-colors",children:e.jsx(se,{className:"w-5 h-5"})}),e.jsx(I,{to:"/",className:"flex items-center space-x-2",children:e.jsx("span",{className:"text-xl font-bold text-cyan-400",children:"HeroForge"})}),e.jsx("span",{className:"text-gray-500 mx-2",children:"•"}),e.jsx("span",{className:"text-gray-400 text-sm",children:"Quiz"})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{className:"flex items-center text-gray-400",children:[e.jsx(B,{className:"w-4 h-4 mr-1"}),e.jsx("span",{className:"font-mono",children:n(f)})]}),e.jsxs("div",{className:"flex items-center text-gray-400",children:[e.jsx(R,{className:"w-4 h-4 mr-1"}),e.jsxs("span",{children:[L,"/",t.questions.length]})]})]})]}),e.jsx("div",{className:"w-full h-1 bg-gray-700",children:e.jsx("div",{className:"h-full bg-cyan-500 transition-all duration-300",style:{width:`${D}%`}})})]}),e.jsxs("main",{className:"max-w-4xl mx-auto px-4 py-8",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h1",{className:"text-2xl font-bold text-white mb-2",children:t.lesson_title}),e.jsxs("p",{className:"text-gray-400",children:["Answer all questions and score at least ",t.pass_threshold,"% to pass"]})]}),e.jsx("div",{className:"flex items-center justify-center gap-2 mb-8 flex-wrap",children:t.questions.map((r,w)=>{const p=$[r.id]!==void 0,k=w===y;return e.jsx("button",{onClick:()=>o(w),className:`w-8 h-8 rounded-full text-sm font-medium transition-all ${k?"bg-cyan-500 text-white scale-110":p?"bg-green-600 text-white":"bg-gray-700 text-gray-400 hover:bg-gray-600"}`,children:w+1},r.id)})}),e.jsx(le,{questionNumber:y+1,totalQuestions:t.questions.length,questionType:Q.question_type,questionText:Q.question_text,options:Q.options,points:Q.points,selectedAnswer:$[Q.id]??null,onAnswer:r=>s(Q.id,r)}),e.jsxs("div",{className:"flex justify-between items-center mt-6",children:[e.jsxs("button",{onClick:()=>o(y-1),disabled:y===0,className:`flex items-center px-4 py-2 rounded-lg transition-colors ${y===0?"bg-gray-800 text-gray-600 cursor-not-allowed":"bg-gray-700 text-white hover:bg-gray-600"}`,children:[e.jsx(re,{className:"w-5 h-5 mr-1"}),"Previous"]}),e.jsx("div",{className:"text-center",children:!j()&&e.jsxs("span",{className:"text-sm text-yellow-400 flex items-center",children:[e.jsx(ae,{className:"w-4 h-4 mr-1"}),t.questions.length-L," questions remaining"]})}),y<t.questions.length-1?e.jsxs("button",{onClick:()=>o(y+1),className:"flex items-center px-4 py-2 bg-cyan-600 hover:bg-cyan-700 text-white rounded-lg transition-colors",children:["Next",e.jsx(ne,{className:"w-5 h-5 ml-1"})]}):e.jsx("button",{onClick:z,disabled:!j()||m,className:`flex items-center px-6 py-2 rounded-lg transition-colors ${j()&&!m?"bg-green-600 hover:bg-green-700 text-white":"bg-gray-700 text-gray-400 cursor-not-allowed"}`,children:m?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"Submitting..."]}):e.jsxs(e.Fragment,{children:[e.jsx(R,{className:"w-5 h-5 mr-2"}),"Submit Quiz"]})})]}),y===t.questions.length-1&&!j()&&e.jsx("div",{className:"mt-4 p-4 bg-yellow-900/20 border border-yellow-700 rounded-lg text-center",children:e.jsx("p",{className:"text-yellow-400 text-sm",children:"Please answer all questions before submitting the quiz."})})]}),e.jsx("footer",{className:"bg-gray-800 border-t border-gray-700 mt-16",children:e.jsx("div",{className:"max-w-4xl mx-auto px-4 py-6",children:e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center",children:[e.jsx("p",{className:"text-gray-400 text-sm",children:"© 2026 Genial Architect Cybersecurity Research Associates. All rights reserved."}),e.jsxs("div",{className:"flex space-x-6 mt-4 md:mt-0",children:[e.jsx(I,{to:"/legal/terms",className:"text-gray-400 hover:text-white text-sm",children:"Terms"}),e.jsx(I,{to:"/legal/privacy",className:"text-gray-400 hover:text-white text-sm",children:"Privacy"})]})]})})})]})};export{he as default};
