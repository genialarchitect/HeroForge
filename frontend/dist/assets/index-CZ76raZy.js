const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/AdminPage-B3avn0ot.js","assets/vendor-state-DdX3IZQk.js","assets/vendor-react-Da1CiaFS.js","assets/vendor-ui-M-o_--rZ.js","assets/vendor-charts-PE5xD9Ly.js","assets/SettingsPage-CNu-u_bZ.js","assets/ScanComparison-e_uerNX1.js","assets/SalesPage-DWglCC6e.js","assets/AssetsPage-CUam4NuI.js","assets/WebAppScanPage-BthmHoyO.js","assets/DnsToolsPage-D0f7fNx2.js","assets/CompliancePage-CvWSxEYi.js","assets/RemediationPage-ClPk_v7y.js","assets/WorkflowHistory-BWtXErnx.js","assets/ManualAssessmentPage-DbmrvIBg.js","assets/AssessmentDetailPage-BHskkJGw.js","assets/MethodologyPage-digtrkjC.js","assets/ExecutiveDashboardPage-CniQYNXC.js","assets/ApiSecurityPage-B3fO0u5o.js","assets/AttackPathsPage-BIJ7hKxY.js","assets/ScanComparisonPage-DtnOdPUT.js","assets/WorkflowsPage-BttjZPbJ.js","assets/ContainerSecurityPage-Br2_fUcm.js","assets/IacSecurityPage-C1GZyDZl.js","assets/PluginsPage-DhdcRHaD.js","assets/AgentsPage-B75mTuE4.js","assets/MeshAgentsPage-B9cyyt2S.js","assets/EvidencePage-BsBIXJ8h.js","assets/SiemPage-BPPBXMmC.js","assets/AttackSimulationPage-CFd4rJ8R.js","assets/ExploitationPage-qhoNqncH.js","assets/NucleiPage-DzV70r4C.js","assets/ReportsPage-D7PkX4PT.js","assets/AssetDiscoveryPage-C_n5iQB_.js","assets/PrivescPage-Bq47iaUw.js","assets/BloodHoundPage-cvLs-oAn.js","assets/PhishingPage-6ZSFeun7.js","assets/C2Page-wcZE7vfH.js","assets/WirelessPage-yQh_wve6.js","assets/CrmDashboard-Ye32dzNg.js","assets/CustomerList-CSfI2153.js","assets/CustomerDetail-sgu9zMM_.js","assets/EngagementsPage-CVPKCeky.js","assets/ContractsPage-B8N_ioa5.js","assets/TimeTrackingPage-C9_i8QJv.js","assets/PortalLogin-BeCfthvL.js","assets/PortalForgotPassword-B3EYrHi6.js","assets/PortalResetPassword-pvWUeJ-h.js","assets/PortalDashboard-DEspuYb6.js","assets/PortalLayout-BN_f_H04.js","assets/PortalEngagementList-DVCvf-Hh.js","assets/PortalEngagementDetail-CwVa_Ut9.js","assets/PortalVulnerabilityList-CYHS5gRB.js","assets/PortalVulnerabilityDetail-p9gy9w7e.js","assets/PortalReportList-BBzwrKlB.js","assets/PortalProfile-DuT09uTQ.js"])))=>i.map(i=>d[i]);
var Wu=Object.defineProperty;var Bu=(e,r,s)=>r in e?Wu(e,r,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[r]=s;var Lt=(e,r,s)=>Bu(e,typeof r!="symbol"?r+"":r,s);import{c as oc,j as n,u as Vu,Q as Gu,a as Yu}from"./vendor-state-DdX3IZQk.js";import{b as ra,g as lc,r as E,u as xi,d as cc,e as dc,L as uc,R as yi,a as wt,f as Xu,B as Ku,h as Ju,i as ae,N as Ds}from"./vendor-react-Da1CiaFS.js";import{B as X,L as sa,C as hc,S as we,K as lr,U as fc,a as Xt,b as ut,d as mc,M as pc,e as gc,f as $s,P as Qu,g as Zu,h as xc,i as zr,j as Qi,k as Lr,T as br,l as eh,m as yc,G as or,Z as ks,n as th,o as jt,R as Wa,p as rh,N as Tr,F as sh,A as xt,q as Vr,r as Zi,W as Bs,s as nh,t as ah,u as ih,v as bc,w as vc,D as wc,x as oh,y as lh,z as Je,E as bi,H as ch,I as jc,J as Ms,O as zs,X as bt,Q as Dr,V as Sa,Y as vt,_ as cr,$ as Ba,a0 as _c,a1 as dh,a2 as uh,a3 as hh,a4 as vi,a5 as fh,a6 as Nc,a7 as na,a8 as mh,a9 as wi,aa as Ne,ab as Va,ac as Vs,ad as Tt,ae as Ye,af as Sc,ag as Ga,ah as ji,ai as ph,aj as gh,ak as kc,al as Fr,am as xh,an as yh,ao as aa,ap as Cs,aq as rt,ar as bh,as as vh,at as wh,au as jh,av as eo,aw as _h,ax as Nh,ay as Sh,az as Cn,aA as kh,aB as Ch,aC as $r,aD as Ln,aE as Ph,aF as Eh,aG as Rh,aH as Oh,aI as to,aJ as ro,aK as Ah,aL as so,aM as no,aN as Th,aO as Dh}from"./vendor-ui-M-o_--rZ.js";import{i as $h,a as ao,b as Mh,c as io,d as zh,e as Lh,f as Fh,o as Ih,s as Hh,m as oo,g as lo,P as L,R as Be,B as ia,X as mt,Y as lt,T as Ve,h as oa,C as Gs,j as _i,k as Ni,l as Uh,n as qh,p as Wh,q as Bh,r as Vh,L as Ps,t as Et,u as Ls,v as nr,A as Cc,w as ir,x as ur}from"./vendor-charts-PE5xD9Ly.js";(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))a(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&a(l)}).observe(document,{childList:!0,subtree:!0});function s(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function a(i){if(i.ep)return;i.ep=!0;const o=s(i);fetch(i.href,o)}})();var cn={},co;function Gh(){if(co)return cn;co=1;var e=ra();return cn.createRoot=e.createRoot,cn.hydrateRoot=e.hydrateRoot,cn}var Yh=Gh();const Xh=lc(Yh),Kh="modulepreload",Jh=function(e){return"/"+e},uo={},de=function(r,s,a){let i=Promise.resolve();if(s&&s.length>0){let l=function(u){return Promise.all(u.map(f=>Promise.resolve(f).then(h=>({status:"fulfilled",value:h}),h=>({status:"rejected",reason:h}))))};document.getElementsByTagName("link");const c=document.querySelector("meta[property=csp-nonce]"),d=(c==null?void 0:c.nonce)||(c==null?void 0:c.getAttribute("nonce"));i=l(s.map(u=>{if(u=Jh(u),u in uo)return;uo[u]=!0;const f=u.endsWith(".css"),h=f?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${u}"]${h}`))return;const g=document.createElement("link");if(g.rel=f?"stylesheet":Kh,f||(g.as="script"),g.crossOrigin="",g.href=u,d&&g.setAttribute("nonce",d),document.head.appendChild(g),f)return new Promise((v,j)=>{g.addEventListener("load",v),g.addEventListener("error",()=>j(new Error(`Unable to preload CSS for ${u}`)))})}))}function o(l){const c=new Event("vite:preloadError",{cancelable:!0});if(c.payload=l,window.dispatchEvent(c),!c.defaultPrevented)throw l}return i.then(l=>{for(const c of l||[])c.status==="rejected"&&o(c.reason);return r().catch(o)})},Qh={};function Zh(e,r){let s;try{s=e()}catch{return}return{getItem:i=>{var o;const l=d=>d===null?null:JSON.parse(d,void 0),c=(o=s.getItem(i))!=null?o:null;return c instanceof Promise?c.then(l):l(c)},setItem:(i,o)=>s.setItem(i,JSON.stringify(o,void 0)),removeItem:i=>s.removeItem(i)}}const Fs=e=>r=>{try{const s=e(r);return s instanceof Promise?s:{then(a){return Fs(a)(s)},catch(a){return this}}}catch(s){return{then(a){return this},catch(a){return Fs(a)(s)}}}},ef=(e,r)=>(s,a,i)=>{let o={getStorage:()=>localStorage,serialize:JSON.stringify,deserialize:JSON.parse,partialize:b=>b,version:0,merge:(b,p)=>({...p,...b}),...r},l=!1;const c=new Set,d=new Set;let u;try{u=o.getStorage()}catch{}if(!u)return e((...b)=>{console.warn(`[zustand persist middleware] Unable to update item '${o.name}', the given storage is currently unavailable.`),s(...b)},a,i);const f=Fs(o.serialize),h=()=>{const b=o.partialize({...a()});let p;const m=f({state:b,version:o.version}).then(y=>u.setItem(o.name,y)).catch(y=>{p=y});if(p)throw p;return m},g=i.setState;i.setState=(b,p)=>{g(b,p),h()};const v=e((...b)=>{s(...b),h()},a,i);let j;const _=()=>{var b;if(!u)return;l=!1,c.forEach(m=>m(a()));const p=((b=o.onRehydrateStorage)==null?void 0:b.call(o,a()))||void 0;return Fs(u.getItem.bind(u))(o.name).then(m=>{if(m)return o.deserialize(m)}).then(m=>{if(m)if(typeof m.version=="number"&&m.version!==o.version){if(o.migrate)return o.migrate(m.state,m.version);console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return m.state}).then(m=>{var y;return j=o.merge(m,(y=a())!=null?y:v),s(j,!0),h()}).then(()=>{p==null||p(j,void 0),l=!0,d.forEach(m=>m(j))}).catch(m=>{p==null||p(void 0,m)})};return i.persist={setOptions:b=>{o={...o,...b},b.getStorage&&(u=b.getStorage())},clearStorage:()=>{u==null||u.removeItem(o.name)},getOptions:()=>o,rehydrate:()=>_(),hasHydrated:()=>l,onHydrate:b=>(c.add(b),()=>{c.delete(b)}),onFinishHydration:b=>(d.add(b),()=>{d.delete(b)})},_(),j||v},tf=(e,r)=>(s,a,i)=>{let o={storage:Zh(()=>localStorage),partialize:_=>_,version:0,merge:(_,b)=>({...b,..._}),...r},l=!1;const c=new Set,d=new Set;let u=o.storage;if(!u)return e((..._)=>{console.warn(`[zustand persist middleware] Unable to update item '${o.name}', the given storage is currently unavailable.`),s(..._)},a,i);const f=()=>{const _=o.partialize({...a()});return u.setItem(o.name,{state:_,version:o.version})},h=i.setState;i.setState=(_,b)=>{h(_,b),f()};const g=e((..._)=>{s(..._),f()},a,i);i.getInitialState=()=>g;let v;const j=()=>{var _,b;if(!u)return;l=!1,c.forEach(m=>{var y;return m((y=a())!=null?y:g)});const p=((b=o.onRehydrateStorage)==null?void 0:b.call(o,(_=a())!=null?_:g))||void 0;return Fs(u.getItem.bind(u))(o.name).then(m=>{if(m)if(typeof m.version=="number"&&m.version!==o.version){if(o.migrate)return[!0,o.migrate(m.state,m.version)];console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,m.state];return[!1,void 0]}).then(m=>{var y;const[x,w]=m;if(v=o.merge(w,(y=a())!=null?y:g),s(v,!0),x)return f()}).then(()=>{p==null||p(v,void 0),v=a(),l=!0,d.forEach(m=>m(v))}).catch(m=>{p==null||p(void 0,m)})};return i.persist={setOptions:_=>{o={...o,..._},_.storage&&(u=_.storage)},clearStorage:()=>{u==null||u.removeItem(o.name)},getOptions:()=>o,rehydrate:()=>j(),hasHydrated:()=>l,onHydrate:_=>(c.add(_),()=>{c.delete(_)}),onFinishHydration:_=>(d.add(_),()=>{d.delete(_)})},o.skipHydration||j(),v||g},rf=(e,r)=>"getStorage"in r||"serialize"in r||"deserialize"in r?((Qh?"production":void 0)!=="production"&&console.warn("[DEPRECATED] `getStorage`, `serialize` and `deserialize` options are deprecated. Use `storage` option instead."),ef(e,r)):tf(e,r),sf=rf,Ir=oc()(sf((e,r)=>({user:null,token:null,isAuthenticated:!1,isLoading:!1,setUser:s=>e({user:s,isAuthenticated:!!s}),setToken:s=>{e({token:s}),s?localStorage.setItem("token",s):localStorage.removeItem("token")},login:(s,a)=>{e({user:s,token:a,isAuthenticated:!0,isLoading:!1}),localStorage.setItem("token",a)},logout:()=>{e({user:null,token:null,isAuthenticated:!1,isLoading:!1}),localStorage.removeItem("token")},setLoading:s=>e({isLoading:s}),isAdmin:()=>{var s,a;return((a=(s=r().user)==null?void 0:s.roles)==null?void 0:a.includes("admin"))??!1},hasRole:s=>{var a,i;return((i=(a=r().user)==null?void 0:a.roles)==null?void 0:i.includes(s))??!1},canManageUsers:()=>{var s,a;return((a=(s=r().user)==null?void 0:s.roles)==null?void 0:a.includes("admin"))??!1},canManageScans:()=>{var s,a;return((a=(s=r().user)==null?void 0:s.roles)==null?void 0:a.some(i=>["admin","auditor"].includes(i)))??!1},canViewAuditLogs:()=>{var s,a;return((a=(s=r().user)==null?void 0:s.roles)==null?void 0:a.some(i=>["admin","auditor"].includes(i)))??!1},canManageSettings:()=>{var s,a;return((a=(s=r().user)==null?void 0:s.roles)==null?void 0:a.includes("admin"))??!1}}),{name:"auth-storage",partialize:e=>({token:e.token,user:e.user})}));function Pc(e,r){return function(){return e.apply(r,arguments)}}const{toString:nf}=Object.prototype,{getPrototypeOf:Si}=Object,{iterator:la,toStringTag:Ec}=Symbol,ca=(e=>r=>{const s=nf.call(r);return e[s]||(e[s]=s.slice(8,-1).toLowerCase())})(Object.create(null)),_t=e=>(e=e.toLowerCase(),r=>ca(r)===e),da=e=>r=>typeof r===e,{isArray:Gr}=Array,Hr=da("undefined");function Ys(e){return e!==null&&!Hr(e)&&e.constructor!==null&&!Hr(e.constructor)&&Qe(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const Rc=_t("ArrayBuffer");function af(e){let r;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?r=ArrayBuffer.isView(e):r=e&&e.buffer&&Rc(e.buffer),r}const of=da("string"),Qe=da("function"),Oc=da("number"),Xs=e=>e!==null&&typeof e=="object",lf=e=>e===!0||e===!1,Pn=e=>{if(ca(e)!=="object")return!1;const r=Si(e);return(r===null||r===Object.prototype||Object.getPrototypeOf(r)===null)&&!(Ec in e)&&!(la in e)},cf=e=>{if(!Xs(e)||Ys(e))return!1;try{return Object.keys(e).length===0&&Object.getPrototypeOf(e)===Object.prototype}catch{return!1}},df=_t("Date"),uf=_t("File"),hf=_t("Blob"),ff=_t("FileList"),mf=e=>Xs(e)&&Qe(e.pipe),pf=e=>{let r;return e&&(typeof FormData=="function"&&e instanceof FormData||Qe(e.append)&&((r=ca(e))==="formdata"||r==="object"&&Qe(e.toString)&&e.toString()==="[object FormData]"))},gf=_t("URLSearchParams"),[xf,yf,bf,vf]=["ReadableStream","Request","Response","Headers"].map(_t),wf=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Ks(e,r,{allOwnKeys:s=!1}={}){if(e===null||typeof e>"u")return;let a,i;if(typeof e!="object"&&(e=[e]),Gr(e))for(a=0,i=e.length;a<i;a++)r.call(null,e[a],a,e);else{if(Ys(e))return;const o=s?Object.getOwnPropertyNames(e):Object.keys(e),l=o.length;let c;for(a=0;a<l;a++)c=o[a],r.call(null,e[c],c,e)}}function Ac(e,r){if(Ys(e))return null;r=r.toLowerCase();const s=Object.keys(e);let a=s.length,i;for(;a-- >0;)if(i=s[a],r===i.toLowerCase())return i;return null}const yr=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,Tc=e=>!Hr(e)&&e!==yr;function Ya(){const{caseless:e,skipUndefined:r}=Tc(this)&&this||{},s={},a=(i,o)=>{const l=e&&Ac(s,o)||o;Pn(s[l])&&Pn(i)?s[l]=Ya(s[l],i):Pn(i)?s[l]=Ya({},i):Gr(i)?s[l]=i.slice():(!r||!Hr(i))&&(s[l]=i)};for(let i=0,o=arguments.length;i<o;i++)arguments[i]&&Ks(arguments[i],a);return s}const jf=(e,r,s,{allOwnKeys:a}={})=>(Ks(r,(i,o)=>{s&&Qe(i)?e[o]=Pc(i,s):e[o]=i},{allOwnKeys:a}),e),_f=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),Nf=(e,r,s,a)=>{e.prototype=Object.create(r.prototype,a),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:r.prototype}),s&&Object.assign(e.prototype,s)},Sf=(e,r,s,a)=>{let i,o,l;const c={};if(r=r||{},e==null)return r;do{for(i=Object.getOwnPropertyNames(e),o=i.length;o-- >0;)l=i[o],(!a||a(l,e,r))&&!c[l]&&(r[l]=e[l],c[l]=!0);e=s!==!1&&Si(e)}while(e&&(!s||s(e,r))&&e!==Object.prototype);return r},kf=(e,r,s)=>{e=String(e),(s===void 0||s>e.length)&&(s=e.length),s-=r.length;const a=e.indexOf(r,s);return a!==-1&&a===s},Cf=e=>{if(!e)return null;if(Gr(e))return e;let r=e.length;if(!Oc(r))return null;const s=new Array(r);for(;r-- >0;)s[r]=e[r];return s},Pf=(e=>r=>e&&r instanceof e)(typeof Uint8Array<"u"&&Si(Uint8Array)),Ef=(e,r)=>{const a=(e&&e[la]).call(e);let i;for(;(i=a.next())&&!i.done;){const o=i.value;r.call(e,o[0],o[1])}},Rf=(e,r)=>{let s;const a=[];for(;(s=e.exec(r))!==null;)a.push(s);return a},Of=_t("HTMLFormElement"),Af=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(s,a,i){return a.toUpperCase()+i}),ho=(({hasOwnProperty:e})=>(r,s)=>e.call(r,s))(Object.prototype),Tf=_t("RegExp"),Dc=(e,r)=>{const s=Object.getOwnPropertyDescriptors(e),a={};Ks(s,(i,o)=>{let l;(l=r(i,o,e))!==!1&&(a[o]=l||i)}),Object.defineProperties(e,a)},Df=e=>{Dc(e,(r,s)=>{if(Qe(e)&&["arguments","caller","callee"].indexOf(s)!==-1)return!1;const a=e[s];if(Qe(a)){if(r.enumerable=!1,"writable"in r){r.writable=!1;return}r.set||(r.set=()=>{throw Error("Can not rewrite read-only method '"+s+"'")})}})},$f=(e,r)=>{const s={},a=i=>{i.forEach(o=>{s[o]=!0})};return Gr(e)?a(e):a(String(e).split(r)),s},Mf=()=>{},zf=(e,r)=>e!=null&&Number.isFinite(e=+e)?e:r;function Lf(e){return!!(e&&Qe(e.append)&&e[Ec]==="FormData"&&e[la])}const Ff=e=>{const r=new Array(10),s=(a,i)=>{if(Xs(a)){if(r.indexOf(a)>=0)return;if(Ys(a))return a;if(!("toJSON"in a)){r[i]=a;const o=Gr(a)?[]:{};return Ks(a,(l,c)=>{const d=s(l,i+1);!Hr(d)&&(o[c]=d)}),r[i]=void 0,o}}return a};return s(e,0)},If=_t("AsyncFunction"),Hf=e=>e&&(Xs(e)||Qe(e))&&Qe(e.then)&&Qe(e.catch),$c=((e,r)=>e?setImmediate:r?((s,a)=>(yr.addEventListener("message",({source:i,data:o})=>{i===yr&&o===s&&a.length&&a.shift()()},!1),i=>{a.push(i),yr.postMessage(s,"*")}))(`axios@${Math.random()}`,[]):s=>setTimeout(s))(typeof setImmediate=="function",Qe(yr.postMessage)),Uf=typeof queueMicrotask<"u"?queueMicrotask.bind(yr):typeof process<"u"&&process.nextTick||$c,qf=e=>e!=null&&Qe(e[la]),W={isArray:Gr,isArrayBuffer:Rc,isBuffer:Ys,isFormData:pf,isArrayBufferView:af,isString:of,isNumber:Oc,isBoolean:lf,isObject:Xs,isPlainObject:Pn,isEmptyObject:cf,isReadableStream:xf,isRequest:yf,isResponse:bf,isHeaders:vf,isUndefined:Hr,isDate:df,isFile:uf,isBlob:hf,isRegExp:Tf,isFunction:Qe,isStream:mf,isURLSearchParams:gf,isTypedArray:Pf,isFileList:ff,forEach:Ks,merge:Ya,extend:jf,trim:wf,stripBOM:_f,inherits:Nf,toFlatObject:Sf,kindOf:ca,kindOfTest:_t,endsWith:kf,toArray:Cf,forEachEntry:Ef,matchAll:Rf,isHTMLForm:Of,hasOwnProperty:ho,hasOwnProp:ho,reduceDescriptors:Dc,freezeMethods:Df,toObjectSet:$f,toCamelCase:Af,noop:Mf,toFiniteNumber:zf,findKey:Ac,global:yr,isContextDefined:Tc,isSpecCompliantForm:Lf,toJSONObject:Ff,isAsyncFn:If,isThenable:Hf,setImmediate:$c,asap:Uf,isIterable:qf};function me(e,r,s,a,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",r&&(this.code=r),s&&(this.config=s),a&&(this.request=a),i&&(this.response=i,this.status=i.status?i.status:null)}W.inherits(me,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:W.toJSONObject(this.config),code:this.code,status:this.status}}});const Mc=me.prototype,zc={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{zc[e]={value:e}});Object.defineProperties(me,zc);Object.defineProperty(Mc,"isAxiosError",{value:!0});me.from=(e,r,s,a,i,o)=>{const l=Object.create(Mc);W.toFlatObject(e,l,function(f){return f!==Error.prototype},u=>u!=="isAxiosError");const c=e&&e.message?e.message:"Error",d=r==null&&e?e.code:r;return me.call(l,c,d,s,a,i),e&&l.cause==null&&Object.defineProperty(l,"cause",{value:e,configurable:!0}),l.name=e&&e.name||"Error",o&&Object.assign(l,o),l};const Wf=null;function Xa(e){return W.isPlainObject(e)||W.isArray(e)}function Lc(e){return W.endsWith(e,"[]")?e.slice(0,-2):e}function fo(e,r,s){return e?e.concat(r).map(function(i,o){return i=Lc(i),!s&&o?"["+i+"]":i}).join(s?".":""):r}function Bf(e){return W.isArray(e)&&!e.some(Xa)}const Vf=W.toFlatObject(W,{},null,function(r){return/^is[A-Z]/.test(r)});function ua(e,r,s){if(!W.isObject(e))throw new TypeError("target must be an object");r=r||new FormData,s=W.toFlatObject(s,{metaTokens:!0,dots:!1,indexes:!1},!1,function(_,b){return!W.isUndefined(b[_])});const a=s.metaTokens,i=s.visitor||f,o=s.dots,l=s.indexes,d=(s.Blob||typeof Blob<"u"&&Blob)&&W.isSpecCompliantForm(r);if(!W.isFunction(i))throw new TypeError("visitor must be a function");function u(j){if(j===null)return"";if(W.isDate(j))return j.toISOString();if(W.isBoolean(j))return j.toString();if(!d&&W.isBlob(j))throw new me("Blob is not supported. Use a Buffer instead.");return W.isArrayBuffer(j)||W.isTypedArray(j)?d&&typeof Blob=="function"?new Blob([j]):Buffer.from(j):j}function f(j,_,b){let p=j;if(j&&!b&&typeof j=="object"){if(W.endsWith(_,"{}"))_=a?_:_.slice(0,-2),j=JSON.stringify(j);else if(W.isArray(j)&&Bf(j)||(W.isFileList(j)||W.endsWith(_,"[]"))&&(p=W.toArray(j)))return _=Lc(_),p.forEach(function(y,x){!(W.isUndefined(y)||y===null)&&r.append(l===!0?fo([_],x,o):l===null?_:_+"[]",u(y))}),!1}return Xa(j)?!0:(r.append(fo(b,_,o),u(j)),!1)}const h=[],g=Object.assign(Vf,{defaultVisitor:f,convertValue:u,isVisitable:Xa});function v(j,_){if(!W.isUndefined(j)){if(h.indexOf(j)!==-1)throw Error("Circular reference detected in "+_.join("."));h.push(j),W.forEach(j,function(p,m){(!(W.isUndefined(p)||p===null)&&i.call(r,p,W.isString(m)?m.trim():m,_,g))===!0&&v(p,_?_.concat(m):[m])}),h.pop()}}if(!W.isObject(e))throw new TypeError("data must be an object");return v(e),r}function mo(e){const r={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(a){return r[a]})}function ki(e,r){this._pairs=[],e&&ua(e,this,r)}const Fc=ki.prototype;Fc.append=function(r,s){this._pairs.push([r,s])};Fc.toString=function(r){const s=r?function(a){return r.call(this,a,mo)}:mo;return this._pairs.map(function(i){return s(i[0])+"="+s(i[1])},"").join("&")};function Gf(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function Ic(e,r,s){if(!r)return e;const a=s&&s.encode||Gf;W.isFunction(s)&&(s={serialize:s});const i=s&&s.serialize;let o;if(i?o=i(r,s):o=W.isURLSearchParams(r)?r.toString():new ki(r,s).toString(a),o){const l=e.indexOf("#");l!==-1&&(e=e.slice(0,l)),e+=(e.indexOf("?")===-1?"?":"&")+o}return e}class po{constructor(){this.handlers=[]}use(r,s,a){return this.handlers.push({fulfilled:r,rejected:s,synchronous:a?a.synchronous:!1,runWhen:a?a.runWhen:null}),this.handlers.length-1}eject(r){this.handlers[r]&&(this.handlers[r]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(r){W.forEach(this.handlers,function(a){a!==null&&r(a)})}}const Hc={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Yf=typeof URLSearchParams<"u"?URLSearchParams:ki,Xf=typeof FormData<"u"?FormData:null,Kf=typeof Blob<"u"?Blob:null,Jf={isBrowser:!0,classes:{URLSearchParams:Yf,FormData:Xf,Blob:Kf},protocols:["http","https","file","blob","url","data"]},Ci=typeof window<"u"&&typeof document<"u",Ka=typeof navigator=="object"&&navigator||void 0,Qf=Ci&&(!Ka||["ReactNative","NativeScript","NS"].indexOf(Ka.product)<0),Zf=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",em=Ci&&window.location.href||"http://localhost",tm=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Ci,hasStandardBrowserEnv:Qf,hasStandardBrowserWebWorkerEnv:Zf,navigator:Ka,origin:em},Symbol.toStringTag,{value:"Module"})),qe={...tm,...Jf};function rm(e,r){return ua(e,new qe.classes.URLSearchParams,{visitor:function(s,a,i,o){return qe.isNode&&W.isBuffer(s)?(this.append(a,s.toString("base64")),!1):o.defaultVisitor.apply(this,arguments)},...r})}function sm(e){return W.matchAll(/\w+|\[(\w*)]/g,e).map(r=>r[0]==="[]"?"":r[1]||r[0])}function nm(e){const r={},s=Object.keys(e);let a;const i=s.length;let o;for(a=0;a<i;a++)o=s[a],r[o]=e[o];return r}function Uc(e){function r(s,a,i,o){let l=s[o++];if(l==="__proto__")return!0;const c=Number.isFinite(+l),d=o>=s.length;return l=!l&&W.isArray(i)?i.length:l,d?(W.hasOwnProp(i,l)?i[l]=[i[l],a]:i[l]=a,!c):((!i[l]||!W.isObject(i[l]))&&(i[l]=[]),r(s,a,i[l],o)&&W.isArray(i[l])&&(i[l]=nm(i[l])),!c)}if(W.isFormData(e)&&W.isFunction(e.entries)){const s={};return W.forEachEntry(e,(a,i)=>{r(sm(a),i,s,0)}),s}return null}function am(e,r,s){if(W.isString(e))try{return(r||JSON.parse)(e),W.trim(e)}catch(a){if(a.name!=="SyntaxError")throw a}return(s||JSON.stringify)(e)}const Js={transitional:Hc,adapter:["xhr","http","fetch"],transformRequest:[function(r,s){const a=s.getContentType()||"",i=a.indexOf("application/json")>-1,o=W.isObject(r);if(o&&W.isHTMLForm(r)&&(r=new FormData(r)),W.isFormData(r))return i?JSON.stringify(Uc(r)):r;if(W.isArrayBuffer(r)||W.isBuffer(r)||W.isStream(r)||W.isFile(r)||W.isBlob(r)||W.isReadableStream(r))return r;if(W.isArrayBufferView(r))return r.buffer;if(W.isURLSearchParams(r))return s.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),r.toString();let c;if(o){if(a.indexOf("application/x-www-form-urlencoded")>-1)return rm(r,this.formSerializer).toString();if((c=W.isFileList(r))||a.indexOf("multipart/form-data")>-1){const d=this.env&&this.env.FormData;return ua(c?{"files[]":r}:r,d&&new d,this.formSerializer)}}return o||i?(s.setContentType("application/json",!1),am(r)):r}],transformResponse:[function(r){const s=this.transitional||Js.transitional,a=s&&s.forcedJSONParsing,i=this.responseType==="json";if(W.isResponse(r)||W.isReadableStream(r))return r;if(r&&W.isString(r)&&(a&&!this.responseType||i)){const l=!(s&&s.silentJSONParsing)&&i;try{return JSON.parse(r,this.parseReviver)}catch(c){if(l)throw c.name==="SyntaxError"?me.from(c,me.ERR_BAD_RESPONSE,this,null,this.response):c}}return r}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:qe.classes.FormData,Blob:qe.classes.Blob},validateStatus:function(r){return r>=200&&r<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};W.forEach(["delete","get","head","post","put","patch"],e=>{Js.headers[e]={}});const im=W.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),om=e=>{const r={};let s,a,i;return e&&e.split(`
`).forEach(function(l){i=l.indexOf(":"),s=l.substring(0,i).trim().toLowerCase(),a=l.substring(i+1).trim(),!(!s||r[s]&&im[s])&&(s==="set-cookie"?r[s]?r[s].push(a):r[s]=[a]:r[s]=r[s]?r[s]+", "+a:a)}),r},go=Symbol("internals");function Qr(e){return e&&String(e).trim().toLowerCase()}function En(e){return e===!1||e==null?e:W.isArray(e)?e.map(En):String(e)}function lm(e){const r=Object.create(null),s=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let a;for(;a=s.exec(e);)r[a[1]]=a[2];return r}const cm=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function ka(e,r,s,a,i){if(W.isFunction(a))return a.call(this,r,s);if(i&&(r=s),!!W.isString(r)){if(W.isString(a))return r.indexOf(a)!==-1;if(W.isRegExp(a))return a.test(r)}}function dm(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(r,s,a)=>s.toUpperCase()+a)}function um(e,r){const s=W.toCamelCase(" "+r);["get","set","has"].forEach(a=>{Object.defineProperty(e,a+s,{value:function(i,o,l){return this[a].call(this,r,i,o,l)},configurable:!0})})}let Ze=class{constructor(r){r&&this.set(r)}set(r,s,a){const i=this;function o(c,d,u){const f=Qr(d);if(!f)throw new Error("header name must be a non-empty string");const h=W.findKey(i,f);(!h||i[h]===void 0||u===!0||u===void 0&&i[h]!==!1)&&(i[h||d]=En(c))}const l=(c,d)=>W.forEach(c,(u,f)=>o(u,f,d));if(W.isPlainObject(r)||r instanceof this.constructor)l(r,s);else if(W.isString(r)&&(r=r.trim())&&!cm(r))l(om(r),s);else if(W.isObject(r)&&W.isIterable(r)){let c={},d,u;for(const f of r){if(!W.isArray(f))throw TypeError("Object iterator must return a key-value pair");c[u=f[0]]=(d=c[u])?W.isArray(d)?[...d,f[1]]:[d,f[1]]:f[1]}l(c,s)}else r!=null&&o(s,r,a);return this}get(r,s){if(r=Qr(r),r){const a=W.findKey(this,r);if(a){const i=this[a];if(!s)return i;if(s===!0)return lm(i);if(W.isFunction(s))return s.call(this,i,a);if(W.isRegExp(s))return s.exec(i);throw new TypeError("parser must be boolean|regexp|function")}}}has(r,s){if(r=Qr(r),r){const a=W.findKey(this,r);return!!(a&&this[a]!==void 0&&(!s||ka(this,this[a],a,s)))}return!1}delete(r,s){const a=this;let i=!1;function o(l){if(l=Qr(l),l){const c=W.findKey(a,l);c&&(!s||ka(a,a[c],c,s))&&(delete a[c],i=!0)}}return W.isArray(r)?r.forEach(o):o(r),i}clear(r){const s=Object.keys(this);let a=s.length,i=!1;for(;a--;){const o=s[a];(!r||ka(this,this[o],o,r,!0))&&(delete this[o],i=!0)}return i}normalize(r){const s=this,a={};return W.forEach(this,(i,o)=>{const l=W.findKey(a,o);if(l){s[l]=En(i),delete s[o];return}const c=r?dm(o):String(o).trim();c!==o&&delete s[o],s[c]=En(i),a[c]=!0}),this}concat(...r){return this.constructor.concat(this,...r)}toJSON(r){const s=Object.create(null);return W.forEach(this,(a,i)=>{a!=null&&a!==!1&&(s[i]=r&&W.isArray(a)?a.join(", "):a)}),s}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([r,s])=>r+": "+s).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(r){return r instanceof this?r:new this(r)}static concat(r,...s){const a=new this(r);return s.forEach(i=>a.set(i)),a}static accessor(r){const a=(this[go]=this[go]={accessors:{}}).accessors,i=this.prototype;function o(l){const c=Qr(l);a[c]||(um(i,l),a[c]=!0)}return W.isArray(r)?r.forEach(o):o(r),this}};Ze.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);W.reduceDescriptors(Ze.prototype,({value:e},r)=>{let s=r[0].toUpperCase()+r.slice(1);return{get:()=>e,set(a){this[s]=a}}});W.freezeMethods(Ze);function Ca(e,r){const s=this||Js,a=r||s,i=Ze.from(a.headers);let o=a.data;return W.forEach(e,function(c){o=c.call(s,o,i.normalize(),r?r.status:void 0)}),i.normalize(),o}function qc(e){return!!(e&&e.__CANCEL__)}function Yr(e,r,s){me.call(this,e??"canceled",me.ERR_CANCELED,r,s),this.name="CanceledError"}W.inherits(Yr,me,{__CANCEL__:!0});function Wc(e,r,s){const a=s.config.validateStatus;!s.status||!a||a(s.status)?e(s):r(new me("Request failed with status code "+s.status,[me.ERR_BAD_REQUEST,me.ERR_BAD_RESPONSE][Math.floor(s.status/100)-4],s.config,s.request,s))}function hm(e){const r=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return r&&r[1]||""}function fm(e,r){e=e||10;const s=new Array(e),a=new Array(e);let i=0,o=0,l;return r=r!==void 0?r:1e3,function(d){const u=Date.now(),f=a[o];l||(l=u),s[i]=d,a[i]=u;let h=o,g=0;for(;h!==i;)g+=s[h++],h=h%e;if(i=(i+1)%e,i===o&&(o=(o+1)%e),u-l<r)return;const v=f&&u-f;return v?Math.round(g*1e3/v):void 0}}function mm(e,r){let s=0,a=1e3/r,i,o;const l=(u,f=Date.now())=>{s=f,i=null,o&&(clearTimeout(o),o=null),e(...u)};return[(...u)=>{const f=Date.now(),h=f-s;h>=a?l(u,f):(i=u,o||(o=setTimeout(()=>{o=null,l(i)},a-h)))},()=>i&&l(i)]}const Fn=(e,r,s=3)=>{let a=0;const i=fm(50,250);return mm(o=>{const l=o.loaded,c=o.lengthComputable?o.total:void 0,d=l-a,u=i(d),f=l<=c;a=l;const h={loaded:l,total:c,progress:c?l/c:void 0,bytes:d,rate:u||void 0,estimated:u&&c&&f?(c-l)/u:void 0,event:o,lengthComputable:c!=null,[r?"download":"upload"]:!0};e(h)},s)},xo=(e,r)=>{const s=e!=null;return[a=>r[0]({lengthComputable:s,total:e,loaded:a}),r[1]]},yo=e=>(...r)=>W.asap(()=>e(...r)),pm=qe.hasStandardBrowserEnv?((e,r)=>s=>(s=new URL(s,qe.origin),e.protocol===s.protocol&&e.host===s.host&&(r||e.port===s.port)))(new URL(qe.origin),qe.navigator&&/(msie|trident)/i.test(qe.navigator.userAgent)):()=>!0,gm=qe.hasStandardBrowserEnv?{write(e,r,s,a,i,o,l){if(typeof document>"u")return;const c=[`${e}=${encodeURIComponent(r)}`];W.isNumber(s)&&c.push(`expires=${new Date(s).toUTCString()}`),W.isString(a)&&c.push(`path=${a}`),W.isString(i)&&c.push(`domain=${i}`),o===!0&&c.push("secure"),W.isString(l)&&c.push(`SameSite=${l}`),document.cookie=c.join("; ")},read(e){if(typeof document>"u")return null;const r=document.cookie.match(new RegExp("(?:^|; )"+e+"=([^;]*)"));return r?decodeURIComponent(r[1]):null},remove(e){this.write(e,"",Date.now()-864e5,"/")}}:{write(){},read(){return null},remove(){}};function xm(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function ym(e,r){return r?e.replace(/\/?\/$/,"")+"/"+r.replace(/^\/+/,""):e}function Bc(e,r,s){let a=!xm(r);return e&&(a||s==!1)?ym(e,r):r}const bo=e=>e instanceof Ze?{...e}:e;function jr(e,r){r=r||{};const s={};function a(u,f,h,g){return W.isPlainObject(u)&&W.isPlainObject(f)?W.merge.call({caseless:g},u,f):W.isPlainObject(f)?W.merge({},f):W.isArray(f)?f.slice():f}function i(u,f,h,g){if(W.isUndefined(f)){if(!W.isUndefined(u))return a(void 0,u,h,g)}else return a(u,f,h,g)}function o(u,f){if(!W.isUndefined(f))return a(void 0,f)}function l(u,f){if(W.isUndefined(f)){if(!W.isUndefined(u))return a(void 0,u)}else return a(void 0,f)}function c(u,f,h){if(h in r)return a(u,f);if(h in e)return a(void 0,u)}const d={url:o,method:o,data:o,baseURL:l,transformRequest:l,transformResponse:l,paramsSerializer:l,timeout:l,timeoutMessage:l,withCredentials:l,withXSRFToken:l,adapter:l,responseType:l,xsrfCookieName:l,xsrfHeaderName:l,onUploadProgress:l,onDownloadProgress:l,decompress:l,maxContentLength:l,maxBodyLength:l,beforeRedirect:l,transport:l,httpAgent:l,httpsAgent:l,cancelToken:l,socketPath:l,responseEncoding:l,validateStatus:c,headers:(u,f,h)=>i(bo(u),bo(f),h,!0)};return W.forEach(Object.keys({...e,...r}),function(f){const h=d[f]||i,g=h(e[f],r[f],f);W.isUndefined(g)&&h!==c||(s[f]=g)}),s}const Vc=e=>{const r=jr({},e);let{data:s,withXSRFToken:a,xsrfHeaderName:i,xsrfCookieName:o,headers:l,auth:c}=r;if(r.headers=l=Ze.from(l),r.url=Ic(Bc(r.baseURL,r.url,r.allowAbsoluteUrls),e.params,e.paramsSerializer),c&&l.set("Authorization","Basic "+btoa((c.username||"")+":"+(c.password?unescape(encodeURIComponent(c.password)):""))),W.isFormData(s)){if(qe.hasStandardBrowserEnv||qe.hasStandardBrowserWebWorkerEnv)l.setContentType(void 0);else if(W.isFunction(s.getHeaders)){const d=s.getHeaders(),u=["content-type","content-length"];Object.entries(d).forEach(([f,h])=>{u.includes(f.toLowerCase())&&l.set(f,h)})}}if(qe.hasStandardBrowserEnv&&(a&&W.isFunction(a)&&(a=a(r)),a||a!==!1&&pm(r.url))){const d=i&&o&&gm.read(o);d&&l.set(i,d)}return r},bm=typeof XMLHttpRequest<"u",vm=bm&&function(e){return new Promise(function(s,a){const i=Vc(e);let o=i.data;const l=Ze.from(i.headers).normalize();let{responseType:c,onUploadProgress:d,onDownloadProgress:u}=i,f,h,g,v,j;function _(){v&&v(),j&&j(),i.cancelToken&&i.cancelToken.unsubscribe(f),i.signal&&i.signal.removeEventListener("abort",f)}let b=new XMLHttpRequest;b.open(i.method.toUpperCase(),i.url,!0),b.timeout=i.timeout;function p(){if(!b)return;const y=Ze.from("getAllResponseHeaders"in b&&b.getAllResponseHeaders()),w={data:!c||c==="text"||c==="json"?b.responseText:b.response,status:b.status,statusText:b.statusText,headers:y,config:e,request:b};Wc(function(k){s(k),_()},function(k){a(k),_()},w),b=null}"onloadend"in b?b.onloadend=p:b.onreadystatechange=function(){!b||b.readyState!==4||b.status===0&&!(b.responseURL&&b.responseURL.indexOf("file:")===0)||setTimeout(p)},b.onabort=function(){b&&(a(new me("Request aborted",me.ECONNABORTED,e,b)),b=null)},b.onerror=function(x){const w=x&&x.message?x.message:"Network Error",S=new me(w,me.ERR_NETWORK,e,b);S.event=x||null,a(S),b=null},b.ontimeout=function(){let x=i.timeout?"timeout of "+i.timeout+"ms exceeded":"timeout exceeded";const w=i.transitional||Hc;i.timeoutErrorMessage&&(x=i.timeoutErrorMessage),a(new me(x,w.clarifyTimeoutError?me.ETIMEDOUT:me.ECONNABORTED,e,b)),b=null},o===void 0&&l.setContentType(null),"setRequestHeader"in b&&W.forEach(l.toJSON(),function(x,w){b.setRequestHeader(w,x)}),W.isUndefined(i.withCredentials)||(b.withCredentials=!!i.withCredentials),c&&c!=="json"&&(b.responseType=i.responseType),u&&([g,j]=Fn(u,!0),b.addEventListener("progress",g)),d&&b.upload&&([h,v]=Fn(d),b.upload.addEventListener("progress",h),b.upload.addEventListener("loadend",v)),(i.cancelToken||i.signal)&&(f=y=>{b&&(a(!y||y.type?new Yr(null,e,b):y),b.abort(),b=null)},i.cancelToken&&i.cancelToken.subscribe(f),i.signal&&(i.signal.aborted?f():i.signal.addEventListener("abort",f)));const m=hm(i.url);if(m&&qe.protocols.indexOf(m)===-1){a(new me("Unsupported protocol "+m+":",me.ERR_BAD_REQUEST,e));return}b.send(o||null)})},wm=(e,r)=>{const{length:s}=e=e?e.filter(Boolean):[];if(r||s){let a=new AbortController,i;const o=function(u){if(!i){i=!0,c();const f=u instanceof Error?u:this.reason;a.abort(f instanceof me?f:new Yr(f instanceof Error?f.message:f))}};let l=r&&setTimeout(()=>{l=null,o(new me(`timeout ${r} of ms exceeded`,me.ETIMEDOUT))},r);const c=()=>{e&&(l&&clearTimeout(l),l=null,e.forEach(u=>{u.unsubscribe?u.unsubscribe(o):u.removeEventListener("abort",o)}),e=null)};e.forEach(u=>u.addEventListener("abort",o));const{signal:d}=a;return d.unsubscribe=()=>W.asap(c),d}},jm=function*(e,r){let s=e.byteLength;if(s<r){yield e;return}let a=0,i;for(;a<s;)i=a+r,yield e.slice(a,i),a=i},_m=async function*(e,r){for await(const s of Nm(e))yield*jm(s,r)},Nm=async function*(e){if(e[Symbol.asyncIterator]){yield*e;return}const r=e.getReader();try{for(;;){const{done:s,value:a}=await r.read();if(s)break;yield a}}finally{await r.cancel()}},vo=(e,r,s,a)=>{const i=_m(e,r);let o=0,l,c=d=>{l||(l=!0,a&&a(d))};return new ReadableStream({async pull(d){try{const{done:u,value:f}=await i.next();if(u){c(),d.close();return}let h=f.byteLength;if(s){let g=o+=h;s(g)}d.enqueue(new Uint8Array(f))}catch(u){throw c(u),u}},cancel(d){return c(d),i.return()}},{highWaterMark:2})},wo=64*1024,{isFunction:dn}=W,Sm=(({Request:e,Response:r})=>({Request:e,Response:r}))(W.global),{ReadableStream:jo,TextEncoder:_o}=W.global,No=(e,...r)=>{try{return!!e(...r)}catch{return!1}},km=e=>{e=W.merge.call({skipUndefined:!0},Sm,e);const{fetch:r,Request:s,Response:a}=e,i=r?dn(r):typeof fetch=="function",o=dn(s),l=dn(a);if(!i)return!1;const c=i&&dn(jo),d=i&&(typeof _o=="function"?(j=>_=>j.encode(_))(new _o):async j=>new Uint8Array(await new s(j).arrayBuffer())),u=o&&c&&No(()=>{let j=!1;const _=new s(qe.origin,{body:new jo,method:"POST",get duplex(){return j=!0,"half"}}).headers.has("Content-Type");return j&&!_}),f=l&&c&&No(()=>W.isReadableStream(new a("").body)),h={stream:f&&(j=>j.body)};i&&["text","arrayBuffer","blob","formData","stream"].forEach(j=>{!h[j]&&(h[j]=(_,b)=>{let p=_&&_[j];if(p)return p.call(_);throw new me(`Response type '${j}' is not supported`,me.ERR_NOT_SUPPORT,b)})});const g=async j=>{if(j==null)return 0;if(W.isBlob(j))return j.size;if(W.isSpecCompliantForm(j))return(await new s(qe.origin,{method:"POST",body:j}).arrayBuffer()).byteLength;if(W.isArrayBufferView(j)||W.isArrayBuffer(j))return j.byteLength;if(W.isURLSearchParams(j)&&(j=j+""),W.isString(j))return(await d(j)).byteLength},v=async(j,_)=>{const b=W.toFiniteNumber(j.getContentLength());return b??g(_)};return async j=>{let{url:_,method:b,data:p,signal:m,cancelToken:y,timeout:x,onDownloadProgress:w,onUploadProgress:S,responseType:k,headers:C,withCredentials:R="same-origin",fetchOptions:O}=Vc(j),P=r||fetch;k=k?(k+"").toLowerCase():"text";let T=wm([m,y&&y.toAbortSignal()],x),M=null;const A=T&&T.unsubscribe&&(()=>{T.unsubscribe()});let $;try{if(S&&u&&b!=="get"&&b!=="head"&&($=await v(C,p))!==0){let Z=new s(_,{method:"POST",body:p,duplex:"half"}),K;if(W.isFormData(p)&&(K=Z.headers.get("content-type"))&&C.setContentType(K),Z.body){const[ue,he]=xo($,Fn(yo(S)));p=vo(Z.body,wo,ue,he)}}W.isString(R)||(R=R?"include":"omit");const D=o&&"credentials"in s.prototype,U={...O,signal:T,method:b.toUpperCase(),headers:C.normalize().toJSON(),body:p,duplex:"half",credentials:D?R:void 0};M=o&&new s(_,U);let G=await(o?P(M,O):P(_,U));const q=f&&(k==="stream"||k==="response");if(f&&(w||q&&A)){const Z={};["status","statusText","headers"].forEach(xe=>{Z[xe]=G[xe]});const K=W.toFiniteNumber(G.headers.get("content-length")),[ue,he]=w&&xo(K,Fn(yo(w),!0))||[];G=new a(vo(G.body,wo,ue,()=>{he&&he(),A&&A()}),Z)}k=k||"text";let Y=await h[W.findKey(h,k)||"text"](G,j);return!q&&A&&A(),await new Promise((Z,K)=>{Wc(Z,K,{data:Y,headers:Ze.from(G.headers),status:G.status,statusText:G.statusText,config:j,request:M})})}catch(D){throw A&&A(),D&&D.name==="TypeError"&&/Load failed|fetch/i.test(D.message)?Object.assign(new me("Network Error",me.ERR_NETWORK,j,M),{cause:D.cause||D}):me.from(D,D&&D.code,j,M)}}},Cm=new Map,Gc=e=>{let r=e&&e.env||{};const{fetch:s,Request:a,Response:i}=r,o=[a,i,s];let l=o.length,c=l,d,u,f=Cm;for(;c--;)d=o[c],u=f.get(d),u===void 0&&f.set(d,u=c?new Map:km(r)),f=u;return u};Gc();const Pi={http:Wf,xhr:vm,fetch:{get:Gc}};W.forEach(Pi,(e,r)=>{if(e){try{Object.defineProperty(e,"name",{value:r})}catch{}Object.defineProperty(e,"adapterName",{value:r})}});const So=e=>`- ${e}`,Pm=e=>W.isFunction(e)||e===null||e===!1;function Em(e,r){e=W.isArray(e)?e:[e];const{length:s}=e;let a,i;const o={};for(let l=0;l<s;l++){a=e[l];let c;if(i=a,!Pm(a)&&(i=Pi[(c=String(a)).toLowerCase()],i===void 0))throw new me(`Unknown adapter '${c}'`);if(i&&(W.isFunction(i)||(i=i.get(r))))break;o[c||"#"+l]=i}if(!i){const l=Object.entries(o).map(([d,u])=>`adapter ${d} `+(u===!1?"is not supported by the environment":"is not available in the build"));let c=s?l.length>1?`since :
`+l.map(So).join(`
`):" "+So(l[0]):"as no adapter specified";throw new me("There is no suitable adapter to dispatch the request "+c,"ERR_NOT_SUPPORT")}return i}const Yc={getAdapter:Em,adapters:Pi};function Pa(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new Yr(null,e)}function ko(e){return Pa(e),e.headers=Ze.from(e.headers),e.data=Ca.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),Yc.getAdapter(e.adapter||Js.adapter,e)(e).then(function(a){return Pa(e),a.data=Ca.call(e,e.transformResponse,a),a.headers=Ze.from(a.headers),a},function(a){return qc(a)||(Pa(e),a&&a.response&&(a.response.data=Ca.call(e,e.transformResponse,a.response),a.response.headers=Ze.from(a.response.headers))),Promise.reject(a)})}const Xc="1.13.2",ha={};["object","boolean","number","function","string","symbol"].forEach((e,r)=>{ha[e]=function(a){return typeof a===e||"a"+(r<1?"n ":" ")+e}});const Co={};ha.transitional=function(r,s,a){function i(o,l){return"[Axios v"+Xc+"] Transitional option '"+o+"'"+l+(a?". "+a:"")}return(o,l,c)=>{if(r===!1)throw new me(i(l," has been removed"+(s?" in "+s:"")),me.ERR_DEPRECATED);return s&&!Co[l]&&(Co[l]=!0,console.warn(i(l," has been deprecated since v"+s+" and will be removed in the near future"))),r?r(o,l,c):!0}};ha.spelling=function(r){return(s,a)=>(console.warn(`${a} is likely a misspelling of ${r}`),!0)};function Rm(e,r,s){if(typeof e!="object")throw new me("options must be an object",me.ERR_BAD_OPTION_VALUE);const a=Object.keys(e);let i=a.length;for(;i-- >0;){const o=a[i],l=r[o];if(l){const c=e[o],d=c===void 0||l(c,o,e);if(d!==!0)throw new me("option "+o+" must be "+d,me.ERR_BAD_OPTION_VALUE);continue}if(s!==!0)throw new me("Unknown option "+o,me.ERR_BAD_OPTION)}}const Rn={assertOptions:Rm,validators:ha},St=Rn.validators;let vr=class{constructor(r){this.defaults=r||{},this.interceptors={request:new po,response:new po}}async request(r,s){try{return await this._request(r,s)}catch(a){if(a instanceof Error){let i={};Error.captureStackTrace?Error.captureStackTrace(i):i=new Error;const o=i.stack?i.stack.replace(/^.+\n/,""):"";try{a.stack?o&&!String(a.stack).endsWith(o.replace(/^.+\n.+\n/,""))&&(a.stack+=`
`+o):a.stack=o}catch{}}throw a}}_request(r,s){typeof r=="string"?(s=s||{},s.url=r):s=r||{},s=jr(this.defaults,s);const{transitional:a,paramsSerializer:i,headers:o}=s;a!==void 0&&Rn.assertOptions(a,{silentJSONParsing:St.transitional(St.boolean),forcedJSONParsing:St.transitional(St.boolean),clarifyTimeoutError:St.transitional(St.boolean)},!1),i!=null&&(W.isFunction(i)?s.paramsSerializer={serialize:i}:Rn.assertOptions(i,{encode:St.function,serialize:St.function},!0)),s.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?s.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:s.allowAbsoluteUrls=!0),Rn.assertOptions(s,{baseUrl:St.spelling("baseURL"),withXsrfToken:St.spelling("withXSRFToken")},!0),s.method=(s.method||this.defaults.method||"get").toLowerCase();let l=o&&W.merge(o.common,o[s.method]);o&&W.forEach(["delete","get","head","post","put","patch","common"],j=>{delete o[j]}),s.headers=Ze.concat(l,o);const c=[];let d=!0;this.interceptors.request.forEach(function(_){typeof _.runWhen=="function"&&_.runWhen(s)===!1||(d=d&&_.synchronous,c.unshift(_.fulfilled,_.rejected))});const u=[];this.interceptors.response.forEach(function(_){u.push(_.fulfilled,_.rejected)});let f,h=0,g;if(!d){const j=[ko.bind(this),void 0];for(j.unshift(...c),j.push(...u),g=j.length,f=Promise.resolve(s);h<g;)f=f.then(j[h++],j[h++]);return f}g=c.length;let v=s;for(;h<g;){const j=c[h++],_=c[h++];try{v=j(v)}catch(b){_.call(this,b);break}}try{f=ko.call(this,v)}catch(j){return Promise.reject(j)}for(h=0,g=u.length;h<g;)f=f.then(u[h++],u[h++]);return f}getUri(r){r=jr(this.defaults,r);const s=Bc(r.baseURL,r.url,r.allowAbsoluteUrls);return Ic(s,r.params,r.paramsSerializer)}};W.forEach(["delete","get","head","options"],function(r){vr.prototype[r]=function(s,a){return this.request(jr(a||{},{method:r,url:s,data:(a||{}).data}))}});W.forEach(["post","put","patch"],function(r){function s(a){return function(o,l,c){return this.request(jr(c||{},{method:r,headers:a?{"Content-Type":"multipart/form-data"}:{},url:o,data:l}))}}vr.prototype[r]=s(),vr.prototype[r+"Form"]=s(!0)});let Om=class Kc{constructor(r){if(typeof r!="function")throw new TypeError("executor must be a function.");let s;this.promise=new Promise(function(o){s=o});const a=this;this.promise.then(i=>{if(!a._listeners)return;let o=a._listeners.length;for(;o-- >0;)a._listeners[o](i);a._listeners=null}),this.promise.then=i=>{let o;const l=new Promise(c=>{a.subscribe(c),o=c}).then(i);return l.cancel=function(){a.unsubscribe(o)},l},r(function(o,l,c){a.reason||(a.reason=new Yr(o,l,c),s(a.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(r){if(this.reason){r(this.reason);return}this._listeners?this._listeners.push(r):this._listeners=[r]}unsubscribe(r){if(!this._listeners)return;const s=this._listeners.indexOf(r);s!==-1&&this._listeners.splice(s,1)}toAbortSignal(){const r=new AbortController,s=a=>{r.abort(a)};return this.subscribe(s),r.signal.unsubscribe=()=>this.unsubscribe(s),r.signal}static source(){let r;return{token:new Kc(function(i){r=i}),cancel:r}}};function Am(e){return function(s){return e.apply(null,s)}}function Tm(e){return W.isObject(e)&&e.isAxiosError===!0}const Ja={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511,WebServerIsDown:521,ConnectionTimedOut:522,OriginIsUnreachable:523,TimeoutOccurred:524,SslHandshakeFailed:525,InvalidSslCertificate:526};Object.entries(Ja).forEach(([e,r])=>{Ja[r]=e});function Jc(e){const r=new vr(e),s=Pc(vr.prototype.request,r);return W.extend(s,vr.prototype,r,{allOwnKeys:!0}),W.extend(s,r,null,{allOwnKeys:!0}),s.create=function(i){return Jc(jr(e,i))},s}const Te=Jc(Js);Te.Axios=vr;Te.CanceledError=Yr;Te.CancelToken=Om;Te.isCancel=qc;Te.VERSION=Xc;Te.toFormData=ua;Te.AxiosError=me;Te.Cancel=Te.CanceledError;Te.all=function(r){return Promise.all(r)};Te.spread=Am;Te.isAxiosError=Tm;Te.mergeConfig=jr;Te.AxiosHeaders=Ze;Te.formToJSON=e=>Uc(W.isHTMLForm(e)?new FormData(e):e);Te.getAdapter=Yc.getAdapter;Te.HttpStatusCode=Ja;Te.default=Te;const{Axios:k1,AxiosError:C1,CanceledError:P1,isCancel:E1,CancelToken:R1,VERSION:O1,all:A1,Cancel:T1,isAxiosError:D1,spread:$1,toFormData:M1,AxiosHeaders:z1,HttpStatusCode:L1,formToJSON:F1,getAdapter:I1,mergeConfig:H1}=Te,De=Te.create({baseURL:"/api/portal"}),Ar="portal_token",On="portal_user";De.interceptors.request.use(e=>{const r=localStorage.getItem(Ar);return r&&(e.headers.Authorization=`Bearer ${r}`),e});De.interceptors.response.use(e=>e,e=>{var r;return((r=e.response)==null?void 0:r.status)===401&&(localStorage.removeItem(Ar),localStorage.removeItem(On),window.location.pathname.startsWith("/portal")&&!window.location.pathname.includes("/login")&&(window.location.href="/portal/login")),Promise.reject(e)});const Dm={login:async e=>{const r=await De.post("/auth/login",e);return localStorage.setItem(Ar,r.data.token),localStorage.setItem(On,JSON.stringify(r.data.user)),r.data},logout:()=>{localStorage.removeItem(Ar),localStorage.removeItem(On)},getCurrentUser:()=>De.get("/auth/me"),changePassword:e=>De.post("/auth/change-password",e),forgotPassword:e=>De.post("/auth/forgot-password",{email:e}),resetPassword:(e,r)=>De.post("/auth/reset-password",{token:e,new_password:r}),getToken:()=>localStorage.getItem(Ar),getStoredUser:()=>{const e=localStorage.getItem(On);if(e)try{return JSON.parse(e)}catch{return null}return null},isAuthenticated:()=>!!localStorage.getItem(Ar)},U1={getProfile:()=>De.get("/profile"),updateProfile:e=>De.put("/profile",e)},q1={getDashboard:()=>De.get("/dashboard")},W1={getAll:()=>De.get("/engagements"),getById:e=>De.get(`/engagements/${e}`),getMilestones:e=>De.get(`/engagements/${e}/milestones`),updateMilestone:(e,r,s)=>De.put(`/engagements/${e}/milestones/${r}`,s)},B1={getAll:e=>{const r=new URLSearchParams;return e!=null&&e.severity&&r.append("severity",e.severity),e!=null&&e.status&&r.append("status",e.status),e!=null&&e.engagement_id&&r.append("engagement_id",e.engagement_id),e!=null&&e.limit&&r.append("limit",e.limit.toString()),e!=null&&e.offset&&r.append("offset",e.offset.toString()),De.get(`/vulnerabilities?${r.toString()}`)},getById:e=>De.get(`/vulnerabilities/${e}`),updateStatus:(e,r,s)=>De.put(`/vulnerabilities/${e}/status`,{status:r,comment:s}),getComments:e=>De.get(`/vulnerabilities/${e}/comments`),addComment:(e,r)=>De.post(`/vulnerabilities/${e}/comments`,{comment:r})},V1={getAll:()=>De.get("/reports"),getById:e=>De.get(`/reports/${e}`),download:e=>De.get(`/reports/${e}/download`,{responseType:"blob"})},Qc=E.createContext(void 0),Zc="heroforge-theme";function $m(){return typeof window<"u"&&window.matchMedia?window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light":"dark"}function Mm(){if(typeof window<"u"){const e=localStorage.getItem(Zc);if(e==="light"||e==="dark"||e==="system")return e}return"system"}function Ea(e){return e==="system"?$m():e}const zm=({children:e,defaultTheme:r="system"})=>{const[s,a]=E.useState(()=>Mm()||r),[i,o]=E.useState(()=>Ea(s)),l=E.useCallback(u=>{const f=document.documentElement;u==="dark"?(f.classList.add("dark"),f.classList.remove("light")):(f.classList.add("light"),f.classList.remove("dark"));const h=document.querySelector('meta[name="theme-color"]');h&&h.setAttribute("content",u==="dark"?"#0f172a":"#ffffff")},[]),c=E.useCallback(u=>{a(u),localStorage.setItem(Zc,u)},[]);E.useEffect(()=>{const u=Ea(s);o(u),l(u)},[s,l]),E.useEffect(()=>{if(s!=="system")return;const u=window.matchMedia("(prefers-color-scheme: dark)"),f=h=>{const g=h.matches?"dark":"light";o(g),l(g)};return u.addEventListener("change",f),()=>u.removeEventListener("change",f)},[s,l]),E.useEffect(()=>{const u=Ea(s);l(u)},[]);const d={theme:s,setTheme:c,resolvedTheme:i};return n.jsx(Qc.Provider,{value:d,children:e})};function ed(){const e=E.useContext(Qc);if(e===void 0)throw new Error("useTheme must be used within a ThemeProvider");return e}const N=Te.create({baseURL:"/api"});N.interceptors.request.use(e=>{const r=localStorage.getItem("token");return r&&(e.headers.Authorization=`Bearer ${r}`),e});const In={register:e=>N.post("/auth/register",e),login:e=>N.post("/auth/login",e),me:()=>N.get("/user/me"),updateProfile:e=>N.put("/user/profile",e),changePassword:e=>N.put("/user/password",e)},Lm={setup:()=>N.post("/user/mfa/setup"),verifySetup:e=>N.post("/user/mfa/verify-setup",e),disable:e=>N.delete("/user/mfa",{data:e}),regenerateRecoveryCodes:e=>N.post("/user/mfa/recovery-codes",e),verify:e=>N.post("/auth/mfa/verify",e)},Ot={create:e=>N.post("/scans",e),getAll:()=>N.get("/scans"),getById:e=>N.get(`/scans/${e}`),getResults:e=>N.get(`/scans/${e}/results`),delete:e=>N.delete(`/scans/${e}`),getPresets:()=>N.get("/scan-presets"),bulkDelete:e=>N.post("/scans/bulk-delete",{scan_ids:e}),bulkExport:(e,r,s)=>N.post("/scans/bulk-export",{scan_ids:e,format:r,...s},{responseType:"blob"}),duplicate:(e,r)=>N.post(`/scans/${e}/duplicate`,r||{}),getAllWithTags:()=>N.get("/scans/with-tags"),getSslReport:e=>N.get(`/scans/${e}/ssl-report`)},pt={getAll:()=>N.get("/scans/tags"),create:e=>N.post("/scans/tags",e),delete:e=>N.delete(`/scans/tags/${e}`),getSuggestions:()=>N.get("/scans/tags/suggestions"),getTagsForScan:e=>N.get(`/scans/${e}/tags`),addTagsToScan:(e,r)=>N.post(`/scans/${e}/tags`,r),removeTagFromScan:(e,r)=>N.delete(`/scans/${e}/tags/${r}`)},G1={getUsers:()=>N.get("/admin/users"),getUser:e=>N.get(`/admin/users/${e}`),updateUser:(e,r)=>N.patch(`/admin/users/${e}`,r),deleteUser:e=>N.delete(`/admin/users/${e}`),assignRole:(e,r)=>N.post(`/admin/users/${e}/roles`,{role_id:r}),removeRole:(e,r)=>N.delete(`/admin/users/${e}/roles/${r}`),unlockUser:e=>N.post(`/admin/users/${e}/unlock`),getRoles:()=>N.get("/admin/roles"),getAllScans:()=>N.get("/admin/scans"),deleteScan:e=>N.delete(`/admin/scans/${e}`),getAuditLogs:(e={})=>{const r=new URLSearchParams;return e.user_id&&r.append("user_id",e.user_id),e.action&&r.append("action",e.action),e.target_type&&r.append("target_type",e.target_type),e.start_date&&r.append("start_date",e.start_date),e.end_date&&r.append("end_date",e.end_date),e.limit!==void 0&&r.append("limit",e.limit.toString()),e.offset!==void 0&&r.append("offset",e.offset.toString()),N.get(`/admin/audit-logs?${r.toString()}`)},getAuditActionTypes:()=>N.get("/admin/audit-logs/action-types"),getAuditUsers:()=>N.get("/admin/audit-logs/users"),exportAuditLogs:async(e={})=>{const r=new URLSearchParams;return e.user_id&&r.append("user_id",e.user_id),e.action&&r.append("action",e.action),e.target_type&&r.append("target_type",e.target_type),e.start_date&&r.append("start_date",e.start_date),e.end_date&&r.append("end_date",e.end_date),await N.get(`/admin/audit-logs/export?${r.toString()}`,{responseType:"blob"})},getSettings:()=>N.get("/admin/settings"),updateSetting:(e,r)=>N.patch(`/admin/settings/${e}`,{value:r}),getRateLimitDashboard:()=>N.get("/admin/rate-limits")},Es={create:e=>N.post("/reports",e),getAll:e=>{const r=e?`?scan_id=${e}`:"";return N.get(`/reports${r}`)},getById:e=>N.get(`/reports/${e}`),download:async e=>await N.get(`/reports/${e}/download`,{responseType:"blob"}),delete:e=>N.delete(`/reports/${e}`),getTemplates:()=>N.get("/reports/templates")},Fm={getAll:()=>N.get("/target-groups"),getById:e=>N.get(`/target-groups/${e}`),create:e=>N.post("/target-groups",e),update:(e,r)=>N.put(`/target-groups/${e}`,r),delete:e=>N.delete(`/target-groups/${e}`)},Y1={getAll:()=>N.get("/scheduled-scans"),getById:e=>N.get(`/scheduled-scans/${e}`),create:e=>N.post("/scheduled-scans",e),update:(e,r)=>N.put(`/scheduled-scans/${e}`,r),delete:e=>N.delete(`/scheduled-scans/${e}`)},X1={getAll:()=>N.get("/scheduled-reports"),getById:e=>N.get(`/scheduled-reports/${e}`),getPresets:()=>N.get("/scheduled-reports/presets"),create:e=>N.post("/scheduled-reports",e),update:(e,r)=>N.put(`/scheduled-reports/${e}`,r),delete:e=>N.delete(`/scheduled-reports/${e}`),runNow:e=>N.post(`/scheduled-reports/${e}/run-now`)},K1={getSettings:()=>N.get("/notifications/settings"),updateSettings:e=>N.put("/notifications/settings",e),testSlack:()=>N.post("/notifications/test-slack"),testTeams:()=>N.post("/notifications/test-teams"),testEmail:()=>N.post("/notifications/test-email"),checkSmtpStatus:()=>N.get("/notifications/smtp-status")},J1={getAll:()=>N.get("/api-keys"),create:e=>N.post("/api-keys",e),update:(e,r)=>N.patch(`/api-keys/${e}`,r),delete:e=>N.delete(`/api-keys/${e}`)},Q1={compare:(e,r)=>N.post("/scans/compare",{scan_id_1:e,scan_id_2:r})},Rs={getAll:()=>N.get("/templates"),getSystem:()=>N.get("/templates/system"),getCategories:()=>N.get("/templates/categories"),getDefault:()=>N.get("/templates/default"),clearDefault:()=>N.delete("/templates/default"),getById:e=>N.get(`/templates/${e}`),create:e=>N.post("/templates",e),update:(e,r)=>N.put(`/templates/${e}`,r),delete:e=>N.delete(`/templates/${e}`),clone:(e,r)=>N.post(`/templates/${e}/clone`,{new_name:r}),setDefault:e=>N.post(`/templates/${e}/set-default`),createScan:(e,r,s)=>N.post(`/templates/${e}/scan`,{name:r,targets:s}),export:e=>N.get(`/templates/${e}/export`,{responseType:"blob"}),import:e=>N.post("/templates/import",{template:e})},Z1={list:()=>N.get("/users")},Rr={getSummary:(e=30)=>N.get(`/analytics/summary?days=${e}`),getHosts:(e=30)=>N.get(`/analytics/hosts?days=${e}`),getVulnerabilities:(e=30)=>N.get(`/analytics/vulnerabilities?days=${e}`),getServices:(e=10)=>N.get(`/analytics/services?limit=${e}`),getFrequency:(e=30)=>N.get(`/analytics/frequency?days=${e}`),getVulnerabilityTrends:(e=30)=>N.get(`/analytics/vulnerability-trends?days=${e}`),getSeverityTrends:(e=30)=>N.get(`/analytics/severity-trends?days=${e}`),getRemediationRate:(e=30)=>N.get(`/analytics/remediation-rate?days=${e}`),getTopVulnerabilities:(e=10)=>N.get(`/analytics/top-vulnerabilities?limit=${e}`),getVulnerabilityTrendsDashboard:(e=30)=>N.get(`/analytics/vulnerability-trends-dashboard?days=${e}`)},Po={list:e=>{const r=new URLSearchParams;return e.scan_id&&r.append("scan_id",e.scan_id),e.status&&r.append("status",e.status),e.severity&&r.append("severity",e.severity),N.get(`/vulnerabilities?${r.toString()}`)},get:e=>N.get(`/vulnerabilities/${e}`),update:(e,r)=>N.put(`/vulnerabilities/${e}`,r),addComment:(e,r)=>N.post(`/vulnerabilities/${e}/comments`,{comment:r}),getComments:e=>N.get(`/vulnerabilities/${e}/comments`),updateComment:(e,r,s)=>N.put(`/vulnerabilities/${e}/comments/${r}`,{comment:s}),deleteComment:(e,r)=>N.delete(`/vulnerabilities/${e}/comments/${r}`),bulkUpdate:e=>N.post("/vulnerabilities/bulk-update",e),bulkExport:(e,r)=>N.post("/vulnerabilities/bulk-export",{vulnerability_ids:e,format:r},{responseType:"blob"}),getStats:e=>{const r=e?`?scan_id=${e}`:"";return N.get(`/vulnerabilities/stats${r}`)},getTimeline:e=>N.get(`/vulnerabilities/${e}/timeline`),markForVerification:(e,r)=>N.post(`/vulnerabilities/${e}/verify`,r),bulkAssign:e=>N.post("/vulnerabilities/bulk-assign",e),getMyAssignments:e=>{const r=new URLSearchParams;return e!=null&&e.status&&r.append("status",e.status),(e==null?void 0:e.overdue)!==void 0&&r.append("overdue",e.overdue.toString()),e!=null&&e.user_id&&r.append("user_id",e.user_id),N.get(`/vulnerabilities/assigned?${r.toString()}`)},getAssignmentStats:()=>N.get("/vulnerabilities/assignment-stats"),listWithAssignments:e=>{const r=new URLSearchParams;return e!=null&&e.scan_id&&r.append("scan_id",e.scan_id),e!=null&&e.status&&r.append("status",e.status),e!=null&&e.severity&&r.append("severity",e.severity),e!=null&&e.assigned_to&&r.append("assigned_to",e.assigned_to),(e==null?void 0:e.overdue)!==void 0&&r.append("overdue",e.overdue.toString()),N.get(`/vulnerabilities/with-assignments?${r.toString()}`)},assign:(e,r)=>N.post(`/vulnerabilities/${e}/assign`,r),unassign:e=>N.delete(`/vulnerabilities/${e}/assign`),updateAssignment:(e,r)=>N.put(`/vulnerabilities/${e}/assignment`,r),bulkUpdateStatus:(e,r)=>N.post("/vulnerabilities/bulk/status",{vulnerability_ids:e,status:r}),bulkUpdateSeverity:(e,r)=>N.post("/vulnerabilities/bulk/severity",{vulnerability_ids:e,severity:r}),bulkDelete:e=>N.post("/vulnerabilities/bulk/delete",{vulnerability_ids:e}),bulkAddTags:(e,r)=>N.post("/vulnerabilities/bulk/tags",{vulnerability_ids:e,tags:r}),requestRetest:(e,r={})=>N.post(`/vulnerabilities/${e}/request-retest`,r),bulkRequestRetest:e=>N.post("/vulnerabilities/bulk-retest",e),completeRetest:(e,r)=>N.post(`/vulnerabilities/${e}/complete-retest`,r),getPendingRetests:e=>{const r=e?`?scan_id=${e}`:"";return N.get(`/vulnerabilities/pending-retest${r}`)},getRetestHistory:e=>N.get(`/vulnerabilities/${e}/retest-history`)},un={getFrameworks:()=>N.get("/compliance/frameworks"),getFramework:e=>N.get(`/compliance/frameworks/${e}`),getFrameworkControls:e=>N.get(`/compliance/frameworks/${e}/controls`),analyzeScan:(e,r)=>N.post(`/scans/${e}/compliance`,r),getScanCompliance:e=>N.get(`/scans/${e}/compliance`),generateReport:(e,r)=>N.post(`/scans/${e}/compliance/report`,r),downloadReport:e=>N.get(`/compliance/reports/${e}/download`,{responseType:"blob"})},e2={getSettings:()=>N.get("/integrations/jira/settings"),updateSettings:e=>N.post("/integrations/jira/settings",e),testConnection:()=>N.post("/integrations/jira/test"),listProjects:()=>N.get("/integrations/jira/projects"),listIssueTypes:()=>N.get("/integrations/jira/issue-types"),createTicket:(e,r)=>N.post(`/vulnerabilities/${e}/create-ticket`,r||{})},t2={performRecon:e=>N.post("/dns/recon",{domain:e.domain,include_subdomains:e.includeSubdomains,custom_wordlist:e.customWordlist,timeout_secs:e.timeoutSecs}),listResults:()=>N.get("/dns/recon"),getResult:e=>N.get(`/dns/recon/${e}`),deleteResult:e=>N.delete(`/dns/recon/${e}`),getWordlist:()=>N.get("/dns/wordlist")},Im={getSettings:()=>N.get("/integrations/siem/settings"),createSettings:e=>N.post("/integrations/siem/settings",e),updateSettings:(e,r)=>N.put(`/integrations/siem/settings/${e}`,r),deleteSettings:e=>N.delete(`/integrations/siem/settings/${e}`),testConnection:e=>N.post(`/integrations/siem/settings/${e}/test`),exportScan:e=>N.post(`/integrations/siem/export/${e}`)},r2={getSettings:()=>N.get("/integrations/servicenow/settings"),updateSettings:e=>N.post("/integrations/servicenow/settings",e),testConnection:()=>N.post("/integrations/servicenow/test"),getAssignmentGroups:()=>N.get("/integrations/servicenow/assignment-groups"),getCategories:()=>N.get("/integrations/servicenow/categories"),getTicketStatus:e=>N.get(`/integrations/servicenow/tickets/${e}/status`),getTicketsForVulnerability:e=>N.get(`/vulnerabilities/${e}/servicenow/tickets`),createIncident:(e,r)=>N.post(`/vulnerabilities/${e}/servicenow/incident`,r||{ticket_type:"incident"}),createChange:(e,r)=>N.post(`/vulnerabilities/${e}/servicenow/change`,r||{ticket_type:"change"})},s2={startScan:e=>N.post("/webapp/scan",e),getScan:e=>N.get(`/webapp/scan/${e}`)},n2={getAll:e=>{const r=e?`?framework_id=${e}`:"";return N.get(`/compliance/rubrics${r}`)},getById:e=>N.get(`/compliance/rubrics/${e}`),create:e=>N.post("/compliance/rubrics",e),update:(e,r)=>N.put(`/compliance/rubrics/${e}`,r),delete:e=>N.delete(`/compliance/rubrics/${e}`),getByFramework:e=>N.get(`/compliance/frameworks/${e}/rubrics`)},a2={getAll:(e,r)=>{const s=new URLSearchParams;e&&s.append("framework_id",e),r&&s.append("status",r);const a=s.toString();return N.get(`/compliance/assessments${a?`?${a}`:""}`)},getById:e=>N.get(`/compliance/assessments/${e}`),create:e=>N.post("/compliance/assessments",e),update:(e,r)=>N.put(`/compliance/assessments/${e}`,r),delete:e=>N.delete(`/compliance/assessments/${e}`),submit:e=>N.post(`/compliance/assessments/${e}/submit`),approve:e=>N.post(`/compliance/assessments/${e}/approve`),reject:(e,r)=>N.post(`/compliance/assessments/${e}/reject`,{notes:r})},i2={getAll:e=>N.get(`/compliance/assessments/${e}/evidence`),upload:(e,r)=>N.post(`/compliance/assessments/${e}/evidence`,r,{headers:{"Content-Type":"multipart/form-data"}}),addLink:(e,r,s,a)=>N.post(`/compliance/assessments/${e}/evidence/link`,{title:r,url:s,description:a}),delete:e=>N.delete(`/compliance/evidence/${e}`),download:async e=>(await N.get(`/compliance/evidence/${e}/download`,{responseType:"blob"})).data},o2={getAll:()=>N.get("/compliance/campaigns"),getById:e=>N.get(`/compliance/campaigns/${e}`),create:e=>N.post("/compliance/campaigns",e),update:(e,r)=>N.put(`/compliance/campaigns/${e}`,r),delete:e=>N.delete(`/compliance/campaigns/${e}`),getProgress:e=>N.get(`/compliance/campaigns/${e}/progress`)},Hm={getConfigs:()=>N.get("/vpn/configs"),uploadConfig:e=>N.post("/vpn/configs",e),updateConfig:(e,r)=>N.put(`/vpn/configs/${e}`,r),deleteConfig:e=>N.delete(`/vpn/configs/${e}`),testConfig:e=>N.post(`/vpn/configs/${e}/test`),getStatus:()=>N.get("/vpn/status"),connect:e=>N.post("/vpn/connect",e),disconnect:()=>N.post("/vpn/disconnect")},Eo={getDashboard:()=>N.get("/crm/dashboard"),customers:{getAll:e=>{const r=e?`?status=${e}`:"";return N.get(`/crm/customers${r}`)},getById:e=>N.get(`/crm/customers/${e}`),getSummary:e=>N.get(`/crm/customers/${e}/summary`),create:e=>N.post("/crm/customers",e),update:(e,r)=>N.put(`/crm/customers/${e}`,r),delete:e=>N.delete(`/crm/customers/${e}`)},contacts:{getByCustomer:e=>N.get(`/crm/customers/${e}/contacts`),getById:e=>N.get(`/crm/contacts/${e}`),create:(e,r)=>N.post(`/crm/customers/${e}/contacts`,r),update:(e,r)=>N.put(`/crm/contacts/${e}`,r),delete:e=>N.delete(`/crm/contacts/${e}`)},engagements:{getAll:e=>{const r=e?`?status=${e}`:"";return N.get(`/crm/engagements${r}`)},getByCustomer:(e,r)=>{const s=r?`?status=${r}`:"";return N.get(`/crm/customers/${e}/engagements${s}`)},getById:e=>N.get(`/crm/engagements/${e}`),create:(e,r)=>N.post(`/crm/customers/${e}/engagements`,r),update:(e,r)=>N.put(`/crm/engagements/${e}`,r),delete:e=>N.delete(`/crm/engagements/${e}`)},milestones:{getByEngagement:e=>N.get(`/crm/engagements/${e}/milestones`),create:(e,r)=>N.post(`/crm/engagements/${e}/milestones`,r),update:(e,r)=>N.put(`/crm/milestones/${e}`,r),delete:e=>N.delete(`/crm/milestones/${e}`)},contracts:{getAll:e=>{const r=e?`?status=${e}`:"";return N.get(`/crm/contracts${r}`)},getByCustomer:e=>N.get(`/crm/customers/${e}/contracts`),getById:e=>N.get(`/crm/contracts/${e}`),create:(e,r)=>N.post(`/crm/customers/${e}/contracts`,r),update:(e,r)=>N.put(`/crm/contracts/${e}`,r),delete:e=>N.delete(`/crm/contracts/${e}`)},sla:{getTemplates:()=>N.get("/crm/sla-templates"),createTemplate:e=>N.post("/crm/sla-templates",e),getByCustomer:e=>N.get(`/crm/customers/${e}/sla`),setForCustomer:(e,r)=>N.post(`/crm/customers/${e}/sla`,r),delete:e=>N.delete(`/crm/sla/${e}`)},timeEntries:{getAll:(e,r)=>{const s=new URLSearchParams;e&&s.append("start_date",e),r&&s.append("end_date",r);const a=s.toString();return N.get(`/crm/time${a?`?${a}`:""}`)},getByEngagement:e=>N.get(`/crm/engagements/${e}/time`),create:(e,r)=>N.post(`/crm/engagements/${e}/time`,r),delete:e=>N.delete(`/crm/time/${e}`)},communications:{getByCustomer:(e,r)=>{const s=r?`?limit=${r}`:"";return N.get(`/crm/customers/${e}/communications${s}`)},create:(e,r)=>N.post(`/crm/customers/${e}/communications`,r),delete:e=>N.delete(`/crm/communications/${e}`)},portalUsers:{getByCustomer:e=>N.get(`/crm/customers/${e}/portal-users`),getById:(e,r)=>N.get(`/crm/customers/${e}/portal-users/${r}`),create:(e,r)=>N.post(`/crm/customers/${e}/portal-users`,r),update:(e,r,s)=>N.put(`/crm/customers/${e}/portal-users/${r}`,s),delete:(e,r)=>N.delete(`/crm/customers/${e}/portal-users/${r}`),activate:(e,r)=>N.post(`/crm/customers/${e}/portal-users/${r}/activate`),deactivate:(e,r)=>N.post(`/crm/customers/${e}/portal-users/${r}/deactivate`),resetPassword:(e,r,s)=>N.post(`/crm/customers/${e}/portal-users/${r}/reset-password`,s)}},l2={list:e=>{const r=new URLSearchParams;e!=null&&e.category&&r.append("category",e.category),e!=null&&e.severity&&r.append("severity",e.severity),e!=null&&e.search&&r.append("search",e.search),(e==null?void 0:e.include_system)!==void 0&&r.append("include_system",e.include_system.toString());const s=r.toString();return N.get(`/finding-templates${s?`?${s}`:""}`)},getById:e=>N.get(`/finding-templates/${e}`),create:e=>N.post("/finding-templates",e),update:(e,r)=>N.put(`/finding-templates/${e}`,r),delete:e=>N.delete(`/finding-templates/${e}`),clone:(e,r)=>N.post(`/finding-templates/${e}/clone`,r||{}),getCategories:()=>N.get("/finding-templates/categories")},c2={listTemplates:()=>N.get("/methodology/templates"),getTemplate:e=>N.get(`/methodology/templates/${e}`),listChecklists:()=>N.get("/methodology/checklists"),createChecklist:e=>N.post("/methodology/checklists",e),getChecklist:e=>N.get(`/methodology/checklists/${e}`),updateChecklist:(e,r)=>N.put(`/methodology/checklists/${e}`,r),deleteChecklist:e=>N.delete(`/methodology/checklists/${e}`),getProgress:e=>N.get(`/methodology/checklists/${e}/progress`),getItem:(e,r)=>N.get(`/methodology/checklists/${e}/items/${r}`),updateItem:(e,r,s)=>N.put(`/methodology/checklists/${e}/items/${r}`,s)},d2={getCustomerTrends:(e,r=6)=>N.get(`/analytics/customer/${e}/trends`,{params:{months:r}}),getCustomerSummary:e=>N.get(`/analytics/customer/${e}/summary`),getRemediationVelocity:(e=90)=>N.get("/analytics/remediation-velocity",{params:{days:e}}),getRiskTrends:(e=6)=>N.get("/analytics/risk-trends",{params:{months:e}}),getMethodologyCoverage:()=>N.get("/analytics/methodology-coverage"),getExecutiveDashboard:(e,r=6)=>N.get("/analytics/executive-dashboard",{params:{customer_id:e,months:r}})},Um={getStatus:()=>N.get("/threat-intel/status"),lookupIp:e=>N.get(`/threat-intel/lookup/${e}`),lookupCve:e=>N.get(`/threat-intel/cve/${e}`),getAlerts:e=>N.get("/threat-intel/alerts",{params:e}),acknowledgeAlert:e=>N.post(`/threat-intel/alerts/${e}/acknowledge`),enrichScan:(e,r)=>N.post(`/threat-intel/enrich/${e}`,r||{}),getEnrichment:e=>N.get(`/threat-intel/scan/${e}/enrichment`)},u2={analyze:(e,r)=>N.post(`/attack-paths/analyze/${e}`,r||{}),getByScan:e=>N.get(`/attack-paths/${e}`),getCritical:e=>N.get(`/attack-paths/${e}/critical`),getPath:e=>N.get(`/attack-paths/path/${e}`)},h2={startScan:e=>N.post("/api-security/scans",e),listScans:()=>N.get("/api-security/scans"),getScan:e=>N.get(`/api-security/scans/${e}`),deleteScan:e=>N.delete(`/api-security/scans/${e}`),getFindings:e=>N.get(`/api-security/scans/${e}/findings`),getEndpoints:e=>N.get(`/api-security/scans/${e}/endpoints`),discoverEndpoints:e=>N.post("/api-security/discover",e),getStats:()=>N.get("/api-security/stats")},f2={getTags:()=>N.get("/assets/tags"),createTag:e=>N.post("/assets/tags",e),getTag:e=>N.get(`/assets/tags/${e}`),updateTag:(e,r)=>N.put(`/assets/tags/${e}`,r),deleteTag:e=>N.delete(`/assets/tags/${e}`),getAssets:e=>N.get("/assets",{params:e}),getAssetsWithTags:e=>N.get("/assets/with-tags",{params:e}),getAssetsByTags:e=>N.get("/assets/by-tags",{params:e}),getAsset:e=>N.get(`/assets/${e}`),addTagsToAsset:(e,r)=>N.post(`/assets/${e}/tags`,r),removeTagFromAsset:(e,r)=>N.delete(`/assets/${e}/tags/${r}`),updateAsset:(e,r)=>N.patch(`/assets/${e}`,r),deleteAsset:e=>N.delete(`/assets/${e}`),getAssetHistory:e=>N.get(`/assets/${e}/history`),getAssetFull:e=>N.get(`/assets/${e}/full`)},m2={getGroups:()=>N.get("/asset-groups"),createGroup:e=>N.post("/asset-groups",e),getGroup:e=>N.get(`/asset-groups/${e}`),updateGroup:(e,r)=>N.put(`/asset-groups/${e}`,r),deleteGroup:e=>N.delete(`/asset-groups/${e}`),addAssetsToGroup:(e,r)=>N.post(`/asset-groups/${e}/members`,r),removeAssetFromGroup:(e,r)=>N.delete(`/asset-groups/${e}/members/${r}`),getAssetsByGroup:e=>N.get("/asset-groups/assets",{params:e}),bulkAddAssetsToGroup:(e,r)=>N.post(`/asset-groups/${e}/bulk-add`,r)},qm={getAll:()=>N.get("/exclusions"),getGlobal:()=>N.get("/exclusions/global"),get:e=>N.get(`/exclusions/${e}`),create:e=>N.post("/exclusions",e),update:(e,r)=>N.put(`/exclusions/${e}`,r),delete:e=>N.delete(`/exclusions/${e}`),validate:e=>N.post("/exclusions/validate",e),bulkImport:e=>N.post("/exclusions/bulk-import",e)},Zr={list:e=>N.get("/secrets",{params:e}),getByScan:e=>N.get(`/scans/${e}/secrets`),getStats:e=>N.get("/secrets/stats",{params:e?{scan_id:e}:void 0}),get:e=>N.get(`/secrets/${e}`),update:(e,r)=>N.patch(`/secrets/${e}`,r),bulkUpdateStatus:(e,r)=>N.post("/secrets/bulk-status",{ids:e,status:r})},p2={list:()=>N.get("/webhooks"),get:e=>N.get(`/webhooks/${e}`),create:e=>N.post("/webhooks",e),update:(e,r)=>N.put(`/webhooks/${e}`,r),delete:e=>N.delete(`/webhooks/${e}`),getEventTypes:()=>N.get("/webhooks/event-types"),generateSecret:()=>N.post("/webhooks/generate-secret"),test:e=>N.post(`/webhooks/${e}/test`),getDeliveries:(e,r)=>N.get(`/webhooks/${e}/deliveries`,{params:{limit:r}}),getStats:e=>N.get(`/webhooks/${e}/stats`)},Hn={prioritize:(e,r)=>N.post(`/ai/prioritize/${e}`,r||{}),getScores:e=>N.get(`/ai/scores/${e}`),getVulnerabilityScore:e=>N.get(`/ai/scores/vulnerability/${e}`),getConfig:()=>N.get("/ai/config"),updateConfig:e=>N.put("/ai/config",e),submitFeedback:e=>N.post("/ai/feedback",e)},Ro={register:e=>N.post("/agents/register",e),list:()=>N.get("/agents"),get:e=>N.get(`/agents/${e}`),update:(e,r)=>N.put(`/agents/${e}`,r),delete:e=>N.delete(`/agents/${e}`),getStats:()=>N.get("/agents/stats"),regenerateToken:e=>N.post(`/agents/${e}/regenerate-token`),getHeartbeats:(e,r)=>N.get(`/agents/${e}/heartbeats`,{params:{limit:r}}),groups:{list:()=>N.get("/agents/groups"),get:e=>N.get(`/agents/groups/${e}`),create:e=>N.post("/agents/groups",e),update:(e,r)=>N.put(`/agents/groups/${e}`,r),delete:e=>N.delete(`/agents/groups/${e}`),assignAgents:(e,r)=>N.put(`/agents/groups/${e}/agents`,r),removeAgent:(e,r)=>N.delete(`/agents/groups/${e}/agents/${r}`)},tasks:{list:e=>N.get("/agents/tasks",{params:e}),getForAgent:e=>N.get(`/agents/${e}/tasks`)},mesh:{getPeers:()=>N.get("/agents/mesh/peers"),getClusters:()=>N.get("/agents/mesh/clusters"),createCluster:e=>N.post("/agents/mesh/clusters",e),getCluster:e=>N.get(`/agents/mesh/clusters/${e}`),updateCluster:(e,r)=>N.put(`/agents/mesh/clusters/${e}`,r),deleteCluster:e=>N.delete(`/agents/mesh/clusters/${e}`),addAgentToCluster:(e,r)=>N.post(`/agents/mesh/clusters/${e}/agents/${r}`),removeAgentFromCluster:(e,r)=>N.delete(`/agents/mesh/clusters/${e}/agents/${r}`),getAgentConfig:e=>N.get(`/agents/${e}/mesh`),updateAgentConfig:(e,r)=>N.put(`/agents/${e}/mesh`,r)}},Oo={getProvidersForLogin:()=>N.get("/sso/providers"),initiateLogin:e=>N.get(`/sso/login/${e}`),admin:{listProviders:()=>N.get("/sso/admin/providers"),getProvider:e=>N.get(`/sso/admin/providers/${e}`),createProvider:e=>N.post("/sso/admin/providers",e),updateProvider:(e,r)=>N.put(`/sso/admin/providers/${e}`,r),deleteProvider:e=>N.delete(`/sso/admin/providers/${e}`),getPresets:()=>N.get("/sso/admin/presets"),getMetadata:e=>N.get(`/sso/admin/providers/${e}/metadata`),downloadMetadataXml:e=>N.get(`/sso/admin/providers/${e}/metadata.xml`,{responseType:"blob"}),updateMappings:(e,r)=>N.put(`/sso/admin/providers/${e}/mappings`,r),testProvider:e=>N.post(`/sso/admin/providers/${e}/test`),parseMetadata:e=>N.post("/sso/admin/parse-metadata",{metadata_xml:e})},logout:e=>N.post("/sso/logout",{logout_from_idp:e})},g2={tokens:{list:()=>N.get("/cicd/tokens"),create:e=>N.post("/cicd/tokens",e),delete:e=>N.delete(`/cicd/tokens/${e}`)},qualityGates:{list:()=>N.get("/cicd/quality-gates"),getDefault:()=>N.get("/cicd/quality-gates/default"),get:e=>N.get(`/cicd/quality-gates/${e}`),create:e=>N.post("/cicd/quality-gates",e),update:(e,r)=>N.put(`/cicd/quality-gates/${e}`,r),delete:e=>N.delete(`/cicd/quality-gates/${e}`)},runs:{list:e=>N.get("/cicd/runs",{params:{limit:e}}),get:e=>N.get(`/cicd/runs/${e}`),trigger:e=>N.post("/cicd/scan",e),getStatus:e=>N.get(`/cicd/runs/${e}/status`),getQualityGateResult:e=>N.get(`/cicd/runs/${e}/quality-gate`)},reports:{getSarif:e=>N.get(`/cicd/scans/${e}/sarif`,{responseType:"blob"}),getJunit:e=>N.get(`/cicd/scans/${e}/junit`,{responseType:"blob"}),getGitLabSecurity:e=>N.get(`/cicd/scans/${e}/gitlab-security`,{responseType:"blob"}),getGitLabQuality:e=>N.get(`/cicd/scans/${e}/gitlab-quality`,{responseType:"blob"})},examples:{get:e=>N.get(`/cicd/examples/${e}`),list:()=>N.get("/cicd/examples")}},x2={listScans:e=>N.get("/container/scans",{params:e}),getScan:e=>N.get(`/container/scans/${e}`),createScan:e=>N.post("/container/scans",e),deleteScan:e=>N.delete(`/container/scans/${e}`),getFindings:(e,r)=>N.get(`/container/scans/${e}/findings`,{params:r}),getImages:e=>N.get(`/container/scans/${e}/images`),getResources:e=>N.get(`/container/scans/${e}/resources`),updateFindingStatus:(e,r)=>N.patch(`/container/findings/${e}/status`,r),analyzeDockerfile:e=>N.post("/container/analyze-dockerfile",e),analyzeManifest:e=>N.post("/container/analyze-manifest",e),getScanTypes:()=>N.get("/container/scan-types")},y2={templates:{list:()=>N.get("/workflows/templates"),get:e=>N.get(`/workflows/templates/${e}`),create:e=>N.post("/workflows/templates",e),update:(e,r)=>N.put(`/workflows/templates/${e}`,r),delete:e=>N.delete(`/workflows/templates/${e}`)},instances:{list:e=>{const r=new URLSearchParams;e!=null&&e.status&&r.append("status",e.status),e!=null&&e.vulnerability_id&&r.append("vulnerability_id",e.vulnerability_id);const s=r.toString();return N.get(`/workflows/instances${s?`?${s}`:""}`)},get:e=>N.get(`/workflows/instances/${e}`),start:(e,r)=>N.post(`/vulnerabilities/${e}/workflow`,r),update:(e,r)=>N.put(`/workflows/instances/${e}`,r),cancel:(e,r)=>N.post(`/workflows/instances/${e}/cancel`,{comment:r}),hold:(e,r)=>N.post(`/workflows/instances/${e}/hold`,{notes:r}),resume:e=>N.post(`/workflows/instances/${e}/resume`)},stages:{approve:(e,r)=>N.post(`/workflows/instances/${e}/approve`,r||{}),advance:(e,r)=>N.post(`/workflows/instances/${e}/advance`,{comment:r}),reject:(e,r)=>N.post(`/workflows/instances/${e}/reject`,r)},getPendingApprovals:()=>N.get("/workflows/pending-approvals"),getStats:()=>N.get("/workflows/stats"),getForVulnerability:e=>N.get(`/vulnerabilities/${e}/workflow`)},b2={createScan:e=>N.post("/iac/scan",e,{headers:{"Content-Type":"multipart/form-data"}}),listScans:e=>N.get("/iac/scans",{params:e}),getScan:e=>N.get(`/iac/scans/${e}`),deleteScan:e=>N.delete(`/iac/scans/${e}`),getFindings:e=>N.get(`/iac/scans/${e}/findings`),getFiles:e=>N.get(`/iac/scans/${e}/files`),getFile:e=>N.get(`/iac/files/${e}`),getFileFindings:e=>N.get(`/iac/files/${e}/findings`),updateFindingStatus:(e,r)=>N.patch(`/iac/findings/${e}/status`,r),analyzeFile:e=>N.post("/iac/analyze",e),listRules:()=>N.get("/iac/rules"),createRule:e=>N.post("/iac/rules",e),updateRule:(e,r)=>N.put(`/iac/rules/${e}`,r),deleteRule:e=>N.delete(`/iac/rules/${e}`),getPlatforms:()=>N.get("/iac/platforms")},v2={listTechniques:()=>N.get("/bas/techniques"),listTactics:()=>N.get("/bas/tactics"),listScenarios:()=>N.get("/bas/scenarios"),createScenario:e=>N.post("/bas/scenarios",e),getScenario:e=>N.get(`/bas/scenarios/${e}`),deleteScenario:e=>N.delete(`/bas/scenarios/${e}`),listSimulations:()=>N.get("/bas/simulations"),startSimulation:e=>N.post("/bas/simulations",e),getSimulation:e=>N.get(`/bas/simulations/${e}`),getUnacknowledgedGaps:()=>N.get("/bas/gaps/unacknowledged"),acknowledgeGap:(e,r)=>N.post(`/bas/gaps/${e}/acknowledge`,r),getStats:()=>N.get("/bas/stats")},w2={listLogSources:e=>N.get("/siem/sources",{params:e}),createLogSource:e=>N.post("/siem/sources",e),getLogSource:e=>N.get(`/siem/sources/${e}`),updateLogSource:(e,r)=>N.put(`/siem/sources/${e}`,r),deleteLogSource:e=>N.delete(`/siem/sources/${e}`),queryLogs:e=>N.get("/siem/logs",{params:e}),getLogEntry:e=>N.get(`/siem/logs/${e}`),listRules:e=>N.get("/siem/rules",{params:e}),createRule:e=>N.post("/siem/rules",e),updateRule:(e,r)=>N.put(`/siem/rules/${e}`,r),deleteRule:e=>N.delete(`/siem/rules/${e}`),listAlerts:e=>N.get("/siem/alerts",{params:e}),updateAlertStatus:(e,r)=>N.put(`/siem/alerts/${e}/status`,r),resolveAlert:(e,r)=>N.post(`/siem/alerts/${e}/resolve`,r),getStats:()=>N.get("/siem/stats")},j2={getStatus:()=>N.get("/exploitation/status"),listCampaigns:()=>N.get("/exploitation/campaigns"),createCampaign:e=>N.post("/exploitation/campaigns",e),getCampaign:e=>N.get(`/exploitation/campaigns/${e}`),startCampaign:(e,r)=>N.post(`/exploitation/campaigns/${e}/start`,{authorized:r}),stopCampaign:e=>N.post(`/exploitation/campaigns/${e}/stop`),deleteCampaign:e=>N.delete(`/exploitation/campaigns/${e}`),getCampaignResults:e=>N.get(`/exploitation/campaigns/${e}/results`),exportResults:(e,r)=>N.post(`/exploitation/campaigns/${e}/export`,{format:r}),generateShell:e=>N.post("/exploitation/shells/generate",e),listShellTemplates:()=>N.get("/exploitation/shells/templates"),listPayloads:()=>N.get("/exploitation/shells"),listModules:()=>N.get("/exploitation/modules")},_2={startScan:e=>N.post("/privesc",e),listScans:(e,r)=>N.get("/privesc/scans",{params:{limit:e,offset:r}}),getScan:e=>N.get(`/privesc/scans/${e}`),getFindings:e=>N.get(`/privesc/scans/${e}/findings`),cancelScan:e=>N.post(`/privesc/scans/${e}/cancel`),deleteScan:e=>N.delete(`/privesc/scans/${e}`),getGtfobins:e=>N.get(`/privesc/gtfobins/${encodeURIComponent(e)}`),getLolbas:e=>N.get(`/privesc/lolbas/${encodeURIComponent(e)}`)},N2={uploadData:e=>{const r=new FormData;return r.append("file",e),N.post("/bloodhound/upload",r,{headers:{"Content-Type":"multipart/form-data"}})},listImports:(e,r)=>N.get("/bloodhound/imports",{params:{limit:e,offset:r}}),getImport:e=>N.get(`/bloodhound/imports/${e}`),deleteImport:e=>N.delete(`/bloodhound/imports/${e}`),getAttackPaths:e=>N.get(`/bloodhound/imports/${e}/paths`),getKerberoastable:e=>N.get(`/bloodhound/imports/${e}/kerberoastable`),getAsrepRoastable:e=>N.get(`/bloodhound/imports/${e}/asrep-roastable`)},Ei=()=>{const{user:e,token:r,isAuthenticated:s,isLoading:a,login:i,logout:o,setLoading:l,setUser:c}=Ir();E.useEffect(()=>{(async()=>{if(localStorage.getItem("token")&&!e){l(!0);try{const g=await In.me();c(g.data)}catch(g){console.error("Failed to verify token:",g),o()}finally{l(!1)}}})()},[]);const d=E.useCallback(async(f,h)=>{var g,v;l(!0);try{const j=await In.login({username:f,password:h}),{token:_,user:b}=j.data;return i(b,_),X.success("Login successful!"),!0}catch(j){const b=((v=(g=j.response)==null?void 0:g.data)==null?void 0:v.error)||"Login failed. Please check your credentials.";return X.error(b),!1}finally{l(!1)}},[i,l]),u=E.useCallback(()=>{o(),X.info("Logged out successfully")},[o]);return{user:e,token:r,isAuthenticated:s,isLoading:a,login:d,logout:u}},Re=({variant:e="primary",size:r="md",loading:s=!1,loadingText:a,disabled:i,className:o="",children:l,"aria-label":c,...d})=>{const u="inline-flex items-center justify-center font-medium rounded-lg transition-colors focus-ring disabled:opacity-50 disabled:cursor-not-allowed",f={primary:"bg-primary text-white hover:bg-primary-dark active:bg-blue-700",secondary:"bg-light-surface dark:bg-dark-surface text-slate-700 dark:text-slate-100 hover:bg-light-hover dark:hover:bg-dark-hover border border-light-border dark:border-dark-border",danger:"bg-red-600 text-white hover:bg-red-700 active:bg-red-800",ghost:"text-slate-600 dark:text-slate-300 hover:bg-light-hover dark:hover:bg-dark-surface hover:text-slate-900 dark:hover:text-slate-100",outline:"bg-transparent text-slate-600 dark:text-slate-300 border border-light-border dark:border-dark-border hover:bg-light-hover dark:hover:bg-dark-surface hover:text-slate-900 dark:hover:text-slate-100"},h={sm:"px-3 py-1.5 text-sm",md:"px-4 py-2 text-base",lg:"px-6 py-3 text-lg"};return n.jsxs("button",{className:`${u} ${f[e]} ${h[r]} ${o}`,disabled:i||s,"aria-busy":s,"aria-disabled":i||s,"aria-label":s&&a?a:c,...d,children:[s&&n.jsx(sa,{className:"mr-2 h-4 w-4 animate-spin","aria-hidden":"true"}),n.jsx("span",{"aria-live":s?"polite":void 0,children:s&&a?a:l})]})},Wm=({content:e,children:r,position:s="top",delay:a=200,maxWidth:i=250})=>{const[o,l]=E.useState(!1),[c,d]=E.useState({x:0,y:0}),u=E.useRef(null),f=E.useRef(null),h=E.useRef(),g=()=>{h.current=setTimeout(()=>{l(!0)},a)},v=()=>{h.current&&clearTimeout(h.current),l(!1)};E.useEffect(()=>{if(o&&u.current&&f.current){const _=u.current.getBoundingClientRect(),b=f.current.getBoundingClientRect(),p=8;let m=0,y=0;switch(s){case"top":m=_.left+_.width/2-b.width/2,y=_.top-b.height-p;break;case"bottom":m=_.left+_.width/2-b.width/2,y=_.bottom+p;break;case"left":m=_.left-b.width-p,y=_.top+_.height/2-b.height/2;break;case"right":m=_.right+p,y=_.top+_.height/2-b.height/2;break}const x=10;m=Math.max(x,Math.min(m,window.innerWidth-b.width-x)),y=Math.max(x,Math.min(y,window.innerHeight-b.height-x)),d({x:m,y})}},[o,s]),E.useEffect(()=>()=>{h.current&&clearTimeout(h.current)},[]);const j={top:"after:top-full after:left-1/2 after:-translate-x-1/2",bottom:"after:bottom-full after:left-1/2 after:-translate-x-1/2",left:"after:left-full after:top-1/2 after:-translate-y-1/2",right:"after:right-full after:top-1/2 after:-translate-y-1/2"};return n.jsxs(n.Fragment,{children:[n.jsx("div",{ref:u,onMouseEnter:g,onMouseLeave:v,onFocus:g,onBlur:v,className:"inline-flex",children:r}),o&&n.jsx("div",{ref:f,role:"tooltip",className:`
            fixed z-[200] px-3 py-2 text-sm
            text-slate-700 dark:text-slate-100
            bg-light-surface dark:bg-dark-surface
            border border-light-border dark:border-dark-border
            rounded-lg shadow-xl
            animate-fade-in pointer-events-none
            ${j[s]}
          `,style:{left:c.x,top:c.y,maxWidth:i},children:e})]})},Ue=({label:e,error:r,icon:s,helpText:a,hint:i,className:o="",id:l,...c})=>{const d=E.useId(),u=l||d,f=`${u}-error`,h=`${u}-hint`,g=[r?f:null,i?h:null].filter(Boolean).join(" ")||void 0;return n.jsxs("div",{className:"w-full",children:[e&&n.jsxs("div",{className:"flex items-center gap-1.5 mb-1",children:[n.jsxs("label",{htmlFor:u,className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:[e,c.required&&n.jsx("span",{className:"text-red-500 dark:text-red-400 ml-0.5","aria-hidden":"true",children:"*"})]}),a&&n.jsx(Wm,{content:a,position:"top",children:n.jsx("button",{type:"button",className:"text-slate-400 dark:text-slate-500 hover:text-slate-600 dark:hover:text-slate-300 transition-colors","aria-label":`Help for ${e}`,children:n.jsx(hc,{className:"h-3.5 w-3.5"})})})]}),i&&n.jsx("p",{id:h,className:"text-xs text-slate-500 mb-1.5",children:i}),n.jsxs("div",{className:"relative",children:[s&&n.jsx("div",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-slate-500 dark:text-slate-400 pointer-events-none","aria-hidden":"true",children:s}),n.jsx("input",{id:u,className:`
            w-full px-3 py-2 rounded-lg transition-colors focus-ring
            bg-light-surface dark:bg-dark-surface
            text-slate-900 dark:text-slate-100
            placeholder-slate-400 dark:placeholder-slate-500
            ${s?"pl-10":""}
            ${r?"border border-red-500":"border border-light-border dark:border-dark-border hover:border-slate-400 dark:hover:border-dark-hover focus:border-primary"}
            ${o}
          `,"aria-invalid":r?"true":void 0,"aria-describedby":g,...c})]}),r&&n.jsx("p",{id:f,className:"mt-1 text-sm text-red-500",role:"alert",children:r})]})},hn={okta:n.jsx("svg",{viewBox:"0 0 24 24",className:"w-5 h-5",fill:"currentColor",children:n.jsx("path",{d:"M12 0C5.389 0 0 5.389 0 12s5.389 12 12 12 12-5.389 12-12S18.611 0 12 0zm0 18c-3.314 0-6-2.686-6-6s2.686-6 6-6 6 2.686 6 6-2.686 6-6 6z"})}),azure_ad:n.jsx("svg",{viewBox:"0 0 24 24",className:"w-5 h-5",fill:"currentColor",children:n.jsx("path",{d:"M0 0h11.377v11.372H0V0zm12.623 0H24v11.372H12.623V0zM0 12.623h11.377V24H0V12.623zm12.623 0H24V24H12.623V12.623z"})}),google:n.jsxs("svg",{viewBox:"0 0 24 24",className:"w-5 h-5",children:[n.jsx("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),n.jsx("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),n.jsx("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),n.jsx("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),onelogin:n.jsx("svg",{viewBox:"0 0 24 24",className:"w-5 h-5",fill:"currentColor",children:n.jsx("circle",{cx:"12",cy:"12",r:"10"})}),ping:n.jsx("svg",{viewBox:"0 0 24 24",className:"w-5 h-5",fill:"currentColor",children:n.jsx("path",{d:"M12 2L2 7l10 5 10-5-10-5zM2 17l10 5 10-5M2 12l10 5 10-5"})}),auth0:n.jsx("svg",{viewBox:"0 0 24 24",className:"w-5 h-5",fill:"currentColor",children:n.jsx("path",{d:"M21.98 7.448L19.62 0H4.347L2.02 7.448c-1.352 4.312.03 9.206 3.815 12.015L12.007 24l6.157-4.552c3.755-2.81 5.182-7.688 3.815-12.015l-6.16 4.58 2.343 7.45-6.157-4.597-6.158 4.58 2.358-7.433-6.188-4.55 7.63-.045L12.008 0l2.356 7.404 7.615.044z"})}),keycloak:n.jsx("svg",{viewBox:"0 0 24 24",className:"w-5 h-5",fill:"currentColor",children:n.jsx("path",{d:"M12 0L3 4.5v15L12 24l9-4.5v-15L12 0zm0 3.75l6 3v10.5l-6 3-6-3V6.75l6-3z"})}),jumpcloud:n.jsx("svg",{viewBox:"0 0 24 24",className:"w-5 h-5",fill:"currentColor",children:n.jsx("path",{d:"M12 2a10 10 0 100 20 10 10 0 000-20zm0 5a5 5 0 110 10 5 5 0 010-10z"})})},Bm=e=>{if(e.icon){if(e.icon.startsWith("http")||e.icon.startsWith("/"))return n.jsx("img",{src:e.icon,alt:e.display_name,className:"w-5 h-5 object-contain"});if(hn[e.icon])return hn[e.icon]}const s={okta:"okta",azure_ad:"azure_ad",google:"google",onelogin:"onelogin",ping:"ping",auth0:"auth0",keycloak:"keycloak",jumpcloud:"jumpcloud"}[e.provider_type];return s&&hn[s]?hn[s]:n.jsx("svg",{viewBox:"0 0 24 24",className:"w-5 h-5",fill:"currentColor",children:n.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"})})},Vm=e=>{switch(e){case"okta":return"bg-[#007dc1] hover:bg-[#006ba1] text-white";case"azure_ad":return"bg-[#0078d4] hover:bg-[#006cbe] text-white";case"google":return"bg-white hover:bg-gray-50 text-gray-700 border border-gray-300 dark:bg-gray-800 dark:hover:bg-gray-700 dark:text-gray-200 dark:border-gray-600";case"onelogin":return"bg-[#2c3e50] hover:bg-[#1a252f] text-white";case"ping":return"bg-[#00843d] hover:bg-[#006b31] text-white";case"auth0":return"bg-[#eb5424] hover:bg-[#d94c1f] text-white";case"keycloak":return"bg-[#4d4d4d] hover:bg-[#3d3d3d] text-white";case"jumpcloud":return"bg-[#1e90ff] hover:bg-[#1a7dd9] text-white";case"saml":return"bg-indigo-600 hover:bg-indigo-700 text-white";case"oidc":return"bg-purple-600 hover:bg-purple-700 text-white";default:return"bg-gray-600 hover:bg-gray-700 text-white"}},Gm=({provider:e,onClick:r,loading:s=!1,disabled:a=!1})=>{const i=()=>{!s&&!a&&r(e)};return n.jsxs("button",{type:"button",onClick:i,disabled:s||a,className:`
        w-full flex items-center justify-center gap-3 px-4 py-3 rounded-lg
        font-medium transition-all duration-200
        ${Vm(e.provider_type)}
        ${s||a?"opacity-50 cursor-not-allowed":"cursor-pointer"}
        focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary
        dark:focus:ring-offset-dark-bg
      `,children:[s?n.jsxs("svg",{className:"animate-spin h-5 w-5",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[n.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),n.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}):Bm(e),n.jsx("span",{children:s?"Redirecting...":`Continue with ${e.display_name}`})]})},Ym=()=>{const[e,r]=E.useState(""),[s,a]=E.useState(""),[i,o]=E.useState(!1),[l,c]=E.useState(""),[d,u]=E.useState(""),[f,h]=E.useState(!1),{isLoading:g}=Ei(),[v,j]=E.useState(!1),[_,b]=E.useState([]),[p,m]=E.useState(!1),[y,x]=E.useState(null),w=xi(),[S]=cc(),{login:k}=Ir();E.useEffect(()=>{(async()=>{try{const A=await Oo.getProvidersForLogin();b(A.data)}catch(A){console.debug("SSO providers not available:",A)}})()},[]),E.useEffect(()=>{const M=S.get("token"),A=S.get("sso_error");if(A){X.error(decodeURIComponent(A)),window.history.replaceState({},document.title,window.location.pathname);return}M&&C(M)},[S]);const C=async M=>{var A,$;try{m(!0),localStorage.setItem("token",M);const U=(await In.me()).data;k(U,M),X.success("SSO login successful!"),window.history.replaceState({},document.title,window.location.pathname),w("/dashboard")}catch(D){localStorage.removeItem("token");const U=D;X.error((($=(A=U.response)==null?void 0:A.data)==null?void 0:$.error)||"SSO login failed. Please try again."),window.history.replaceState({},document.title,window.location.pathname)}finally{m(!1)}},R=async M=>{var A,$;try{x(M.id);const D=await Oo.initiateLogin(M.id);window.location.href=D.data.redirect_url}catch(D){const U=D;X.error((($=(A=U.response)==null?void 0:A.data)==null?void 0:$.error)||`Failed to initiate ${M.display_name} login`),x(null)}},O=async M=>{var A,$;if(M.preventDefault(),!(!e||!s)){j(!0);try{const U=(await In.login({username:e,password:s})).data;U.mfa_required&&U.mfa_token?(o(!0),c(U.mfa_token),X.info("Please enter your two-factor authentication code")):(k(U.user,U.token),X.success("Login successful!"),w("/dashboard"))}catch(D){const G=(($=(A=D.response)==null?void 0:A.data)==null?void 0:$.error)||"Login failed. Please check your credentials.";X.error(G)}finally{j(!1)}}},P=async M=>{var A,$;if(M.preventDefault(),!d||(f?d.length===0:d.length!==6)){X.error(f?"Please enter a recovery code":"Please enter a valid 6-digit code");return}j(!0);try{const D=await Lm.verify({mfa_token:l,...f?{recovery_code:d}:{totp_code:d}}),{token:U,user:G}=D.data;k(G,U),X.success("Login successful!"),w("/dashboard")}catch(D){const U=D;X.error((($=(A=U.response)==null?void 0:A.data)==null?void 0:$.error)||"Invalid authentication code")}finally{j(!1)}},T=()=>{o(!1),c(""),u(""),h(!1)};return i?n.jsxs("div",{className:"space-y-4 w-full max-w-md",children:[n.jsxs("div",{className:"text-center mb-6",children:[n.jsx("div",{className:"inline-flex items-center justify-center w-12 h-12 bg-primary/20 rounded-lg mb-3",children:n.jsx(we,{className:"h-6 w-6 text-primary"})}),n.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-white mb-1",children:"Two-Factor Authentication"}),n.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:f?"Enter one of your recovery codes":"Enter the 6-digit code from your authenticator app"})]}),n.jsxs("form",{onSubmit:P,className:"space-y-4",children:[n.jsx(Ue,{type:"text",placeholder:f?"Recovery Code":"000000",value:d,onChange:M=>{u(f?M.target.value:M.target.value.replace(/\D/g,"").slice(0,6))},icon:f?n.jsx(lr,{className:"h-5 w-5"}):n.jsx(we,{className:"h-5 w-5"}),className:f?"":"text-center tracking-widest font-mono",maxLength:f?void 0:6,required:!0,autoFocus:!0,autoComplete:"one-time-code"}),n.jsx("div",{className:"flex items-center justify-center",children:n.jsx("button",{type:"button",onClick:()=>{h(!f),u("")},className:"text-sm text-primary hover:text-primary-dark transition-colors",children:f?"Use authenticator code instead":"Use recovery code instead"})}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx(Re,{type:"button",variant:"secondary",size:"lg",onClick:T,className:"flex-1",children:"Back"}),n.jsx(Re,{type:"submit",variant:"primary",size:"lg",loading:v,disabled:v,className:"flex-1",children:"Verify"})]})]})]}):p?n.jsxs("div",{className:"space-y-4 w-full max-w-md text-center",children:[n.jsx("div",{className:"inline-flex items-center justify-center w-12 h-12 bg-primary/20 rounded-lg mb-3",children:n.jsxs("svg",{className:"animate-spin h-6 w-6 text-primary",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[n.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),n.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]})}),n.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-white",children:"Completing SSO Login"}),n.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Please wait while we verify your credentials..."})]}):n.jsxs("div",{className:"space-y-6 w-full max-w-md",children:[_.length>0&&n.jsx("div",{className:"space-y-3",children:_.map(M=>n.jsx(Gm,{provider:M,onClick:R,loading:y===M.id,disabled:y!==null&&y!==M.id},M.id))}),_.length>0&&n.jsxs("div",{className:"relative",children:[n.jsx("div",{className:"absolute inset-0 flex items-center",children:n.jsx("div",{className:"w-full border-t border-gray-300 dark:border-gray-600"})}),n.jsx("div",{className:"relative flex justify-center text-sm",children:n.jsx("span",{className:"px-3 bg-light-surface dark:bg-dark-surface text-slate-500 dark:text-slate-400",children:"or sign in with credentials"})})]}),n.jsxs("form",{onSubmit:O,className:"space-y-4",children:[n.jsx(Ue,{type:"text",placeholder:"Username",value:e,onChange:M=>r(M.target.value),icon:n.jsx(fc,{className:"h-5 w-5"}),required:!0,autoComplete:"username"}),n.jsx(Ue,{type:"password",placeholder:"Password",value:s,onChange:M=>a(M.target.value),icon:n.jsx(Xt,{className:"h-5 w-5"}),required:!0,autoComplete:"current-password"}),n.jsx(Re,{type:"submit",variant:"primary",size:"lg",loading:v||g,disabled:v||g||y!==null,className:"w-full",children:"Sign In"})]})]})},Xm=()=>{const{isAuthenticated:e}=Ei(),r=xi();return E.useEffect(()=>{e&&r("/dashboard")},[e,r]),n.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-slate-100 via-slate-50 to-white dark:from-dark-bg dark:via-slate-900 dark:to-slate-800 p-4",children:n.jsxs("div",{className:"w-full max-w-md",children:[n.jsxs("div",{className:"text-center mb-8 animate-fadeIn",children:[n.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-primary rounded-lg mb-4",children:n.jsx(we,{className:"h-10 w-10 text-white"})}),n.jsx("h1",{className:"text-4xl font-bold text-slate-900 dark:text-white mb-2",children:"HeroForge"}),n.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-lg",children:"Network Triage & Reconnaissance"})]}),n.jsxs("div",{className:"bg-light-surface dark:bg-dark-surface border border-light-border dark:border-dark-border rounded-lg shadow-2xl p-8 animate-fadeIn",children:[n.jsx("h2",{className:"text-2xl font-semibold text-slate-900 dark:text-white mb-6 text-center",children:"Sign In"}),n.jsx(Ym,{})]}),n.jsx("div",{className:"text-center mt-6 text-slate-500 text-sm",children:n.jsx("p",{children:"Authorized personnel only"})})]})})},Ra=[{value:"light",label:"Light",icon:n.jsx(mc,{className:"h-4 w-4"})},{value:"dark",label:"Dark",icon:n.jsx(pc,{className:"h-4 w-4"})},{value:"system",label:"System",icon:n.jsx(gc,{className:"h-4 w-4"})}],Km=({className:e=""})=>{const{theme:r,setTheme:s,resolvedTheme:a}=ed(),[i,o]=E.useState(!1),l=E.useRef(null),c=Ra.find(f=>f.value===r)||Ra[2];E.useEffect(()=>{const f=h=>{l.current&&!l.current.contains(h.target)&&o(!1)};return document.addEventListener("mousedown",f),()=>document.removeEventListener("mousedown",f)},[]),E.useEffect(()=>{const f=h=>{h.key==="Escape"&&o(!1)};if(i)return document.addEventListener("keydown",f),()=>document.removeEventListener("keydown",f)},[i]);const d=f=>{s(f),o(!1)},u=()=>r==="system"?a==="dark"?n.jsx(pc,{className:"h-4 w-4"}):n.jsx(mc,{className:"h-4 w-4"}):c.icon;return n.jsxs("div",{className:`relative ${e}`,ref:l,children:[n.jsxs("button",{type:"button",onClick:()=>o(!i),className:`flex items-center gap-2 px-3 py-2 text-sm rounded-lg transition-colors
          text-slate-400 hover:text-slate-100 dark:text-slate-400 dark:hover:text-slate-100
          hover:bg-slate-700 dark:hover:bg-dark-hover
          bg-transparent`,"aria-haspopup":"listbox","aria-expanded":i,"aria-label":"Select theme",children:[n.jsxs("span",{className:"flex items-center gap-2",children:[u(),n.jsx("span",{className:"hidden sm:inline",children:c.label})]}),n.jsx(ut,{className:`h-3 w-3 transition-transform ${i?"rotate-180":""}`})]}),i&&n.jsx("div",{className:`absolute right-0 mt-2 w-36 rounded-lg shadow-lg z-50
            bg-white dark:bg-dark-surface
            border border-slate-200 dark:border-dark-border
            animate-fade-in`,role:"listbox","aria-label":"Theme options",children:n.jsx("div",{className:"py-1",children:Ra.map(f=>n.jsxs("button",{type:"button",role:"option","aria-selected":r===f.value,onClick:()=>d(f.value),className:`w-full flex items-center gap-3 px-4 py-2 text-sm transition-colors
                  ${r===f.value?"bg-primary/10 text-primary dark:text-primary-light":"text-slate-700 dark:text-slate-300 hover:bg-slate-100 dark:hover:bg-dark-hover"}`,children:[f.icon,n.jsx("span",{children:f.label}),r===f.value&&n.jsx("span",{className:"ml-auto text-primary dark:text-primary-light",children:n.jsx("svg",{className:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor",children:n.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})})]},f.value))})})]})},kr=({label:e,icon:r,items:s,isActive:a})=>{const[i,o]=E.useState(!1),l=E.useRef(null),c=dc();E.useEffect(()=>{const u=f=>{l.current&&!l.current.contains(f.target)&&o(!1)};return document.addEventListener("mousedown",u),()=>document.removeEventListener("mousedown",u)},[]);const d=u=>u.matchPaths?u.matchPaths.some(f=>c.pathname.startsWith(f)):c.pathname===u.to||c.pathname.startsWith(u.to);return n.jsxs("div",{className:"relative",ref:l,children:[n.jsxs("button",{onClick:()=>o(!i),className:`flex items-center gap-1.5 px-3 py-2 rounded-lg text-sm transition-colors ${a?"bg-primary/10 text-primary font-medium":"text-slate-600 dark:text-slate-400 hover:text-slate-900 dark:hover:text-white hover:bg-light-hover dark:hover:bg-dark-hover"}`,children:[r,e,n.jsx(ut,{className:`h-3 w-3 transition-transform ${i?"rotate-180":""}`})]}),i&&n.jsx("div",{className:"absolute left-0 mt-1 w-48 bg-light-surface dark:bg-dark-surface border border-light-border dark:border-dark-border rounded-lg shadow-lg py-1 z-50",children:s.map(u=>n.jsxs(uc,{to:u.to,onClick:()=>o(!1),className:`flex items-center gap-2 px-3 py-2 text-sm transition-colors ${d(u)?"bg-primary/10 text-primary font-medium":"text-slate-600 dark:text-slate-400 hover:text-slate-900 dark:hover:text-white hover:bg-light-hover dark:hover:bg-dark-hover"}`,children:[u.icon,u.label]},u.to))})]})},Jm=()=>{const{user:e,logout:r}=Ei(),s=Ir(b=>b.isAdmin),a=dc(),i=[{to:"/dashboard",icon:n.jsx(yc,{className:"h-4 w-4"}),label:"Scans"},{to:"/discovery",icon:n.jsx(or,{className:"h-4 w-4"}),label:"Asset Discovery"},{to:"/nuclei",icon:n.jsx(ks,{className:"h-4 w-4"}),label:"Nuclei"},{to:"/compare",icon:n.jsx(th,{className:"h-4 w-4"}),label:"Compare"},{to:"/assets",icon:n.jsx(jt,{className:"h-4 w-4"}),label:"Assets"},{to:"/agents",icon:n.jsx(Wa,{className:"h-4 w-4"}),label:"Agents"},{to:"/agents/mesh",icon:n.jsx(rh,{className:"h-4 w-4"}),label:"Mesh Network"},{to:"/webapp-scan",icon:n.jsx(zr,{className:"h-4 w-4"}),label:"Web Scan"},{to:"/dns-tools",icon:n.jsx(Tr,{className:"h-4 w-4"}),label:"DNS Tools"},{to:"/api-security",icon:n.jsx(sh,{className:"h-4 w-4"}),label:"API Security"}],o=[{to:"/siem",icon:n.jsx(xt,{className:"h-4 w-4"}),label:"SIEM"},{to:"/privesc",icon:n.jsx(Vr,{className:"h-4 w-4"}),label:"Privesc Scanner"},{to:"/bloodhound",icon:n.jsx(Zi,{className:"h-4 w-4"}),label:"BloodHound"},{to:"/phishing",icon:n.jsx(br,{className:"h-4 w-4"}),label:"Phishing"},{to:"/c2",icon:n.jsx(Wa,{className:"h-4 w-4"}),label:"C2 Management"},{to:"/wireless",icon:n.jsx(Bs,{className:"h-4 w-4"}),label:"Wireless Security"},{to:"/attack-paths",icon:n.jsx(Tr,{className:"h-4 w-4"}),label:"Attack Paths"},{to:"/attack-simulation",icon:n.jsx(nh,{className:"h-4 w-4"}),label:"Attack Simulation"},{to:"/container-security",icon:n.jsx(ah,{className:"h-4 w-4"}),label:"Containers"},{to:"/iac-security",icon:n.jsx(ih,{className:"h-4 w-4"}),label:"IaC Security"}],l=[{to:"/exploitation",icon:n.jsx(br,{className:"h-4 w-4"}),label:"Dashboard"},{to:"/exploitation/password-spray",icon:n.jsx(lr,{className:"h-4 w-4"}),label:"Password Spray"},{to:"/exploitation/kerberos",icon:n.jsx(we,{className:"h-4 w-4"}),label:"Kerberoasting"},{to:"/exploitation/asrep-roast",icon:n.jsx(bc,{className:"h-4 w-4"}),label:"AS-REP Roast"},{to:"/exploitation/smb-relay",icon:n.jsx(Tr,{className:"h-4 w-4"}),label:"SMB Relay"},{to:"/exploitation/shells",icon:n.jsx(vc,{className:"h-4 w-4"}),label:"Shell Generator"},{to:"/exploitation/credential-dump",icon:n.jsx(wc,{className:"h-4 w-4"}),label:"Credential Dump"},{to:"/exploitation/priv-esc",icon:n.jsx(oh,{className:"h-4 w-4"}),label:"Privilege Escalation"},{to:"/exploitation/persistence",icon:n.jsx(Xt,{className:"h-4 w-4"}),label:"Persistence"},{to:"/exploitation/lateral-movement",icon:n.jsx(lh,{className:"h-4 w-4"}),label:"Lateral Movement"}],c=[{to:"/compliance",icon:n.jsx(Qi,{className:"h-4 w-4"}),label:"Compliance"},{to:"/evidence",icon:n.jsx(Je,{className:"h-4 w-4"}),label:"Evidence"},{to:"/manual-assessments",icon:n.jsx(bi,{className:"h-4 w-4"}),label:"Assessments"},{to:"/methodology",icon:n.jsx(ch,{className:"h-4 w-4"}),label:"Methodology"}],d=[{to:"/executive-dashboard",icon:n.jsx(Lr,{className:"h-4 w-4"}),label:"Executive Dashboard"},{to:"/reports",icon:n.jsx(Je,{className:"h-4 w-4"}),label:"Reports"},{to:"/workflows",icon:n.jsx(Zi,{className:"h-4 w-4"}),label:"Workflows"},{to:"/remediation",icon:n.jsx(jc,{className:"h-4 w-4"}),label:"Remediation"}],u=[{to:"/settings",icon:n.jsx($s,{className:"h-4 w-4"}),label:"Settings"},{to:"/plugins",icon:n.jsx(Qu,{className:"h-4 w-4"}),label:"Plugins"},...s()?[{to:"/admin",icon:n.jsx(Zu,{className:"h-4 w-4"}),label:"Admin"}]:[]],f=i.some(b=>a.pathname===b.to||a.pathname.startsWith(b.to)),h=o.some(b=>a.pathname===b.to||a.pathname.startsWith(b.to)),g=l.some(b=>a.pathname===b.to||a.pathname.startsWith(b.to)),v=c.some(b=>a.pathname===b.to||a.pathname.startsWith(b.to)),j=d.some(b=>a.pathname===b.to||a.pathname.startsWith(b.to)),_=u.some(b=>a.pathname===b.to||a.pathname.startsWith(b.to));return n.jsx("header",{className:"bg-light-surface dark:bg-dark-surface border-b border-light-border dark:border-dark-border shadow-lg",children:n.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:n.jsxs("div",{className:"flex items-center justify-between h-16",children:[n.jsxs("div",{className:"flex items-center space-x-6",children:[n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx("div",{className:"flex items-center justify-center w-10 h-10 bg-primary rounded-lg",children:n.jsx(we,{className:"h-6 w-6 text-white"})}),n.jsxs("div",{children:[n.jsx("h1",{className:"text-xl font-bold text-slate-900 dark:text-white",children:"HeroForge"}),n.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:"Network Triage Dashboard"})]})]}),e&&n.jsxs("nav",{className:"flex items-center space-x-1",children:[n.jsxs(uc,{to:"/crm",className:`flex items-center gap-2 px-3 py-2 rounded-lg text-sm transition-colors ${a.pathname.startsWith("/crm")?"bg-primary/10 text-primary font-medium":"text-slate-600 dark:text-slate-400 hover:text-slate-900 dark:hover:text-white hover:bg-light-hover dark:hover:bg-dark-hover"}`,children:[n.jsx(xc,{className:"h-4 w-4"}),"CRM"]}),n.jsx(kr,{label:"Scanning",icon:n.jsx(zr,{className:"h-4 w-4"}),items:i,isActive:f}),n.jsx(kr,{label:"Compliance",icon:n.jsx(Qi,{className:"h-4 w-4"}),items:c,isActive:v}),n.jsx(kr,{label:"Reports",icon:n.jsx(Lr,{className:"h-4 w-4"}),items:d,isActive:j}),n.jsx(kr,{label:"Security",icon:n.jsx(we,{className:"h-4 w-4"}),items:o,isActive:h}),n.jsx(kr,{label:"Exploitation",icon:n.jsx(br,{className:"h-4 w-4"}),items:l,isActive:g}),n.jsx(kr,{label:"System",icon:n.jsx($s,{className:"h-4 w-4"}),items:u,isActive:_})]})]}),n.jsxs("div",{className:"flex items-center space-x-4",children:[e&&n.jsxs("div",{className:"flex items-center space-x-3 text-sm",children:[n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(fc,{className:"h-5 w-5 text-slate-600 dark:text-slate-400"}),n.jsx("span",{className:"text-slate-700 dark:text-slate-300",children:e.username})]}),e.roles&&e.roles.length>0&&n.jsx("div",{className:"flex gap-1",children:e.roles.map(b=>n.jsx("span",{className:"inline-flex items-center px-2 py-1 text-xs font-medium rounded border bg-slate-500/20 text-slate-700 dark:text-slate-300 border-slate-500/30 capitalize",children:b},b))})]}),n.jsx(Km,{}),n.jsxs(Re,{variant:"ghost",size:"sm",onClick:r,className:"text-slate-600 dark:text-slate-400 hover:text-slate-900 dark:hover:text-white",children:[n.jsx(eh,{className:"h-4 w-4 mr-2"}),"Logout"]})]})]})})})},Qm=({children:e})=>n.jsxs("div",{className:"min-h-screen bg-light-bg dark:bg-dark-bg transition-colors",children:[n.jsx(Jm,{}),n.jsx("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:e})]}),Or=({id:e,label:r,checked:s,onChange:a,className:i="",disabled:o=!1})=>n.jsxs("label",{className:`inline-flex items-center ${o?"opacity-50 cursor-not-allowed":"cursor-pointer"} ${i}`,children:[n.jsxs("div",{className:"relative",children:[n.jsx("input",{id:e,type:"checkbox",checked:s,onChange:l=>a(l.target.checked),disabled:o,className:"sr-only"}),n.jsx("div",{className:`
            w-5 h-5 border-2 rounded transition-all
            ${s?"bg-primary border-primary":"bg-light-surface dark:bg-dark-surface border-light-border dark:border-dark-border hover:border-primary"}
          `,children:s&&n.jsx(Ms,{className:"h-full w-full text-white p-0.5"})})]}),r&&n.jsx("span",{className:"ml-2 text-sm text-slate-700 dark:text-slate-300",children:r})]}),le=({children:e,variant:r="default",className:s="",onClick:a})=>{const i="bg-dark-surface border border-dark-border rounded-lg p-4 shadow-lg",o={default:"",interactive:"cursor-pointer hover:border-primary hover:shadow-xl transition-all duration-200"};return n.jsx("div",{className:`${i} ${o[r]} ${s}`,onClick:a,children:e})},Zm=({selectedTagIds:e,onChange:r,existingTags:s,onTagsChange:a})=>{const[i,o]=E.useState(!1),[l,c]=E.useState(""),[d,u]=E.useState([]),[f,h]=E.useState(!1),[g,v]=E.useState(""),[j,_]=E.useState("#06b6d4"),[b,p]=E.useState(!1),m=E.useRef(null),y=["#06b6d4","#8b5cf6","#f59e0b","#10b981","#ef4444","#ec4899","#3b82f6","#84cc16"];E.useEffect(()=>{x()},[]),E.useEffect(()=>{const P=T=>{m.current&&!m.current.contains(T.target)&&(o(!1),h(!1))};return document.addEventListener("mousedown",P),()=>document.removeEventListener("mousedown",P)},[]);const x=async()=>{try{const P=await pt.getSuggestions();u(P.data)}catch(P){console.error("Failed to load tag suggestions:",P)}},w=s.filter(P=>e.includes(P.id)),S=s.filter(P=>!e.includes(P.id)&&P.name.toLowerCase().includes(l.toLowerCase())),k=d.reduce((P,T)=>(P[T.category]||(P[T.category]=[]),!s.some(A=>A.name.toLowerCase()===T.name.toLowerCase())&&T.name.toLowerCase().includes(l.toLowerCase())&&P[T.category].push(T),P),{}),C=P=>{e.includes(P)?r(e.filter(T=>T!==P)):r([...e,P])},R=async P=>{p(!0);try{const M=(await pt.create({name:P.name,color:P.color})).data;a&&a([...s,M]),r([...e,M.id]),c("")}catch(T){console.error("Failed to create tag:",T)}finally{p(!1)}},O=async()=>{if(g.trim()){p(!0);try{const T=(await pt.create({name:g.trim(),color:j})).data;a&&a([...s,T]),r([...e,T.id]),v(""),h(!1)}catch(P){console.error("Failed to create tag:",P)}finally{p(!1)}}};return n.jsxs("div",{className:"relative",ref:m,children:[n.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(zs,{className:"h-4 w-4 text-primary"}),"Tags (Optional)"]})}),n.jsxs("div",{className:"min-h-[42px] px-3 py-2 bg-dark-surface border border-dark-border rounded-lg cursor-pointer flex flex-wrap gap-2 items-center",onClick:()=>o(!i),children:[w.length>0?n.jsx(n.Fragment,{children:w.map(P=>n.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 rounded text-sm",style:{backgroundColor:P.color+"20",color:P.color},children:[P.name,n.jsx("button",{type:"button",onClick:T=>{T.stopPropagation(),C(P.id)},className:"hover:opacity-70",children:n.jsx(bt,{className:"h-3 w-3"})})]},P.id))}):n.jsx("span",{className:"text-slate-500",children:"Click to add tags..."}),n.jsx(ut,{className:`h-4 w-4 text-slate-400 ml-auto transition-transform ${i?"rotate-180":""}`})]}),i&&n.jsxs("div",{className:"absolute z-50 mt-1 w-full bg-dark-bg border border-dark-border rounded-lg shadow-xl max-h-80 overflow-y-auto",children:[n.jsx("div",{className:"p-2 border-b border-dark-border",children:n.jsx("input",{type:"text",placeholder:"Search or create tags...",value:l,onChange:P=>c(P.target.value),className:"w-full px-3 py-1.5 bg-dark-surface border border-dark-border rounded text-sm text-white focus:outline-none focus:border-primary",autoFocus:!0})}),n.jsxs("div",{className:"p-2 space-y-3",children:[S.length>0&&n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-slate-500 uppercase tracking-wider mb-2",children:"Your Tags"}),n.jsx("div",{className:"flex flex-wrap gap-1.5",children:S.map(P=>n.jsxs("button",{type:"button",onClick:()=>C(P.id),className:"inline-flex items-center gap-1 px-2 py-1 rounded text-sm transition-opacity hover:opacity-80",style:{backgroundColor:P.color+"20",color:P.color},children:[n.jsx(Dr,{className:"h-3 w-3"}),P.name]},P.id))})]}),Object.entries(k).map(([P,T])=>T.length>0&&n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-slate-500 uppercase tracking-wider mb-2",children:P}),n.jsx("div",{className:"flex flex-wrap gap-1.5",children:T.map(M=>n.jsxs("button",{type:"button",onClick:()=>R(M),disabled:b,className:"inline-flex items-center gap-1 px-2 py-1 rounded text-sm transition-opacity hover:opacity-80 disabled:opacity-50",style:{backgroundColor:M.color+"15",color:M.color,border:`1px dashed ${M.color}40`},children:[n.jsx(Dr,{className:"h-3 w-3"}),M.name]},M.name))})]},P)),f?n.jsxs("div",{className:"space-y-2 p-2 bg-dark-surface rounded-lg",children:[n.jsx("input",{type:"text",placeholder:"Tag name",value:g,onChange:P=>v(P.target.value),className:"w-full px-3 py-1.5 bg-dark-bg border border-dark-border rounded text-sm text-white focus:outline-none focus:border-primary",autoFocus:!0}),n.jsx("div",{className:"flex gap-1",children:y.map(P=>n.jsx("button",{type:"button",onClick:()=>_(P),className:`w-6 h-6 rounded-full border-2 ${j===P?"border-white":"border-transparent"}`,style:{backgroundColor:P}},P))}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx("button",{type:"button",onClick:O,disabled:!g.trim()||b,className:"flex-1 px-3 py-1.5 bg-primary text-white rounded text-sm hover:bg-primary/80 disabled:opacity-50",children:"Create"}),n.jsx("button",{type:"button",onClick:()=>{h(!1),v("")},className:"px-3 py-1.5 bg-dark-bg border border-dark-border text-slate-400 rounded text-sm hover:text-white",children:"Cancel"})]})]}):n.jsxs("button",{type:"button",onClick:()=>{h(!0),l&&v(l)},className:"w-full px-3 py-2 text-sm text-slate-400 border border-dashed border-dark-border rounded hover:border-primary hover:text-primary transition-colors flex items-center justify-center gap-2",children:[n.jsx(Dr,{className:"h-4 w-4"}),"Create new tag",l?`: "${l}"`:""]})]})]})]})},fn={quick:{label:"Quick",icon:ks,color:"text-yellow-400",description:"Fast, lightweight scans"},standard:{label:"Standard",icon:$s,color:"text-blue-400",description:"Balanced scanning approach"},comprehensive:{label:"Comprehensive",icon:we,color:"text-green-400",description:"Thorough security assessment"},web:{label:"Web",icon:or,color:"text-purple-400",description:"Web application focused"},stealth:{label:"Stealth",icon:_c,color:"text-orange-400",description:"Low-profile reconnaissance"},custom:{label:"Custom",icon:Je,color:"text-slate-400",description:"User-defined templates"}},ep=({onSelect:e,selectedTemplateId:r,className:s=""})=>{const[a,i]=E.useState([]),[o,l]=E.useState([]),[c,d]=E.useState(null),[u,f]=E.useState(!0),[h,g]=E.useState(!1),[v,j]=E.useState(null),[_,b]=E.useState("all");E.useEffect(()=>{p()},[]);const p=async()=>{try{f(!0);const[P,T,M]=await Promise.all([Rs.getAll(),Rs.getSystem(),Rs.getDefault().catch(()=>({data:null}))]);i(P.data),l(T.data),d(M.data)}catch(P){console.error("Failed to load templates:",P),X.error("Failed to load scan templates")}finally{f(!1)}},m=[...o,...a],y=_==="all"?m:m.filter(P=>P.category===_),x=m.find(P=>P.id===r),w=P=>{e(P),g(!1),j(null),X.success(`Applied "${P.name}" template`)},S=()=>{e(null),g(!1),j(null)},k=P=>{var T;return((T=fn[P])==null?void 0:T.icon)||Je},C=P=>{var T;return((T=fn[P])==null?void 0:T.color)||"text-slate-400"},R=P=>{if(!P)return null;if(P<60)return`~${P}m`;const T=Math.floor(P/60),M=P%60;return M>0?`~${T}h ${M}m`:`~${T}h`},O=P=>{const T=[];return P.enable_os_detection&&T.push("OS Detection"),P.enable_service_detection&&T.push("Service Detection"),P.enable_vuln_scan&&T.push("Vulnerability Scan"),P.enable_enumeration&&T.push(`Enumeration (${P.enum_depth||"light"})`),n.jsxs("div",{className:"space-y-2 text-sm",children:[n.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[n.jsxs("div",{className:"text-slate-400",children:[n.jsx("span",{className:"text-slate-500",children:"Ports:"})," ",P.port_range[0],"-",P.port_range[1]]}),n.jsxs("div",{className:"text-slate-400",children:[n.jsx("span",{className:"text-slate-500",children:"Threads:"})," ",P.threads]}),P.scan_type&&n.jsxs("div",{className:"text-slate-400",children:[n.jsx("span",{className:"text-slate-500",children:"Type:"})," ",P.scan_type.replace("_"," ")]}),P.udp_port_range&&n.jsxs("div",{className:"text-slate-400",children:[n.jsx("span",{className:"text-slate-500",children:"UDP:"})," ",P.udp_port_range[0],"-",P.udp_port_range[1]]})]}),T.length>0&&n.jsx("div",{className:"flex flex-wrap gap-1.5 pt-1",children:T.map(M=>n.jsx("span",{className:"px-2 py-0.5 text-xs bg-dark-surface rounded-full text-slate-400 border border-dark-border",children:M},M))})]})};return u?n.jsx("div",{className:`bg-dark-card border border-dark-border rounded-lg p-4 ${s}`,children:n.jsxs("div",{className:"animate-pulse flex items-center space-x-3",children:[n.jsx("div",{className:"h-8 w-8 bg-dark-surface rounded-lg"}),n.jsxs("div",{className:"flex-1",children:[n.jsx("div",{className:"h-4 bg-dark-surface rounded w-1/3 mb-2"}),n.jsx("div",{className:"h-3 bg-dark-surface rounded w-1/2"})]})]})}):n.jsxs("div",{className:`space-y-3 ${s}`,children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(jc,{className:"h-5 w-5 text-primary"}),n.jsx("span",{className:"text-sm font-medium text-slate-300",children:"Scan Template"})]}),c&&!r&&n.jsxs("button",{type:"button",onClick:()=>w(c),className:"text-xs text-yellow-400 hover:text-yellow-300 flex items-center gap-1",children:[n.jsx(Sa,{className:"h-3 w-3"}),"Use Default"]})]}),n.jsx("button",{type:"button",onClick:()=>g(!h),className:`w-full p-3 rounded-lg border transition-all text-left ${h?"bg-primary/10 border-primary":"bg-dark-card border-dark-border hover:border-slate-500"}`,children:x?n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center space-x-3",children:[yi.createElement(k(x.category),{className:`h-5 w-5 ${C(x.category)}`}),n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{className:"font-medium text-white",children:x.name}),x.is_system&&n.jsx(Xt,{className:"h-3 w-3 text-slate-500"}),x.is_default&&n.jsx(Sa,{className:"h-3 w-3 text-yellow-400 fill-yellow-400"})]}),x.description&&n.jsx("p",{className:"text-xs text-slate-500 mt-0.5 line-clamp-1",children:x.description})]})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[x.estimated_duration_mins&&n.jsxs("span",{className:"text-xs text-slate-500 flex items-center gap-1",children:[n.jsx(vt,{className:"h-3 w-3"}),R(x.estimated_duration_mins)]}),h?n.jsx(cr,{className:"h-4 w-4 text-slate-400"}):n.jsx(ut,{className:"h-4 w-4 text-slate-400"})]})]}):n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx(Ba,{className:"h-5 w-5 text-slate-500"}),n.jsxs("div",{children:[n.jsx("span",{className:"text-slate-400",children:"Start from scratch"}),n.jsx("p",{className:"text-xs text-slate-500 mt-0.5",children:"Or select a template to pre-configure scan settings"})]})]}),h?n.jsx(cr,{className:"h-4 w-4 text-slate-400"}):n.jsx(ut,{className:"h-4 w-4 text-slate-400"})]})}),h&&n.jsxs("div",{className:"bg-dark-card border border-dark-border rounded-lg overflow-hidden animate-fadeIn",children:[n.jsxs("div",{className:"flex items-center gap-1 p-2 border-b border-dark-border bg-dark-surface overflow-x-auto",children:[n.jsx("button",{type:"button",onClick:()=>b("all"),className:`px-3 py-1.5 text-xs rounded-md whitespace-nowrap transition-colors ${_==="all"?"bg-primary text-white":"text-slate-400 hover:text-white hover:bg-dark-border"}`,children:"All"}),Object.keys(fn).map(P=>{const T=fn[P],M=m.filter($=>$.category===P).length;if(M===0)return null;const A=T.icon;return n.jsxs("button",{type:"button",onClick:()=>b(P),className:`px-3 py-1.5 text-xs rounded-md whitespace-nowrap transition-colors flex items-center gap-1.5 ${_===P?"bg-primary text-white":"text-slate-400 hover:text-white hover:bg-dark-border"}`,children:[n.jsx(A,{className:"h-3 w-3"}),T.label,n.jsxs("span",{className:"text-slate-500",children:["(",M,")"]})]},P)})]}),n.jsxs("div",{className:"max-h-80 overflow-y-auto",children:[n.jsxs("button",{type:"button",onClick:S,className:`w-full p-3 border-b border-dark-border text-left transition-colors hover:bg-dark-surface flex items-center gap-3 ${r?"":"bg-dark-surface"}`,children:[n.jsx("div",{className:"p-2 rounded-lg bg-dark-surface border border-dark-border",children:n.jsx(Ba,{className:"h-5 w-5 text-slate-400"})}),n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{className:"font-medium text-white",children:"Start from scratch"}),!r&&n.jsx(Ms,{className:"h-4 w-4 text-green-400"})]}),n.jsx("p",{className:"text-xs text-slate-500 mt-0.5",children:"Configure all scan settings manually"})]})]}),y.map(P=>{const T=k(P.category),M=r===P.id,A=(v==null?void 0:v.id)===P.id;return n.jsxs("div",{className:`border-b border-dark-border transition-colors ${M?"bg-primary/10":"hover:bg-dark-surface"}`,children:[n.jsxs("button",{type:"button",onClick:()=>w(P),onMouseEnter:()=>j(P),onMouseLeave:()=>j(null),className:"w-full p-3 text-left flex items-start gap-3",children:[n.jsx("div",{className:`p-2 rounded-lg border ${M?"bg-primary/20 border-primary":"bg-dark-surface border-dark-border"}`,children:n.jsx(T,{className:`h-5 w-5 ${C(P.category)}`})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{className:"font-medium text-white",children:P.name}),P.is_system&&n.jsx("span",{title:"System Template",children:n.jsx(Xt,{className:"h-3 w-3 text-slate-500"})}),P.is_default&&n.jsx("span",{title:"Default Template",children:n.jsx(Sa,{className:"h-3 w-3 text-yellow-400 fill-yellow-400"})}),M&&n.jsx(Ms,{className:"h-4 w-4 text-green-400"})]}),P.description&&n.jsx("p",{className:"text-xs text-slate-500 mt-0.5 line-clamp-1",children:P.description}),n.jsxs("div",{className:"flex items-center gap-3 mt-1.5 text-xs text-slate-500",children:[P.estimated_duration_mins&&n.jsxs("span",{className:"flex items-center gap-1",children:[n.jsx(vt,{className:"h-3 w-3"}),R(P.estimated_duration_mins)]}),P.use_count>0&&n.jsxs("span",{children:["Used ",P.use_count," time",P.use_count!==1?"s":""]})]})]})]}),A&&n.jsx("div",{className:"px-3 pb-3 animate-fadeIn",children:n.jsxs("div",{className:"p-3 bg-dark-surface rounded-lg border border-dark-border",children:[n.jsx("div",{className:"text-xs font-medium text-slate-400 mb-2",children:"Configuration Preview"}),O(P.config)]})})]},P.id)}),y.length===0&&n.jsxs("div",{className:"p-8 text-center text-slate-500",children:[n.jsx(Je,{className:"h-8 w-8 mx-auto mb-2 opacity-50"}),n.jsx("p",{children:"No templates in this category"})]})]}),n.jsxs("div",{className:"p-2 border-t border-dark-border bg-dark-surface flex items-center justify-between",children:[n.jsxs("span",{className:"text-xs text-slate-500",children:[m.length," template",m.length!==1?"s":""," available"]}),n.jsxs("button",{type:"button",onClick:()=>g(!1),className:"text-xs text-slate-400 hover:text-white flex items-center gap-1",children:[n.jsx(bt,{className:"h-3 w-3"}),"Close"]})]})]})]})},yt=oc(e=>({scans:[],activeScan:null,results:new Map,liveUpdates:new Map,setScans:r=>e({scans:r}),addScan:r=>e(s=>({scans:[r,...s.scans]})),setActiveScan:r=>e({activeScan:r}),updateScanStatus:(r,s)=>e(a=>{var o;const i=s;return{scans:a.scans.map(l=>l.id===r?{...l,status:i}:l),activeScan:((o=a.activeScan)==null?void 0:o.id)===r?{...a.activeScan,status:i}:a.activeScan}}),setResults:(r,s)=>e(a=>{const i=new Map(a.results);return i.set(r,s),{results:i}}),addHostToResults:(r,s)=>e(a=>{const i=new Map(a.results),o=i.get(r)||[],l=o.findIndex(c=>c.target.ip===s.target.ip);return l>=0?o[l]=s:o.push(s),i.set(r,o),{results:i}}),updateHostInResults:(r,s,a)=>e(i=>{const o=new Map(i.results),c=(o.get(r)||[]).map(d=>d.target.ip===s?{...d,...a}:d);return o.set(r,c),{results:o}}),addLiveUpdate:(r,s)=>e(a=>{const i=new Map(a.liveUpdates),o=i.get(r)||[];return o.push(s),i.set(r,o),{liveUpdates:i}}),clearLiveUpdates:r=>e(s=>{const a=new Map(s.liveUpdates);return a.delete(r),{liveUpdates:a}})})),tp=[{id:"tcp_connect",label:"TCP Connect",description:"Standard TCP scan (most reliable)"},{id:"udp",label:"UDP Only",description:"UDP port scanning (requires root)"},{id:"comprehensive",label:"Comprehensive",description:"TCP + UDP scanning (thorough)"},{id:"syn",label:"SYN Stealth",description:"Half-open TCP scan (requires root)"}],rp=[{id:"http",label:"HTTP",category:"Web"},{id:"https",label:"HTTPS",category:"Web"},{id:"dns",label:"DNS",category:"Network"},{id:"smb",label:"SMB",category:"Network"},{id:"ftp",label:"FTP",category:"Network"},{id:"ssh",label:"SSH",category:"Network"},{id:"smtp",label:"SMTP",category:"Network"},{id:"ldap",label:"LDAP",category:"Network"},{id:"rdp",label:"RDP",category:"Remote"},{id:"vnc",label:"VNC",category:"Remote"},{id:"telnet",label:"Telnet",category:"Remote"},{id:"snmp",label:"SNMP",category:"Network"},{id:"mysql",label:"MySQL",category:"Database"},{id:"postgresql",label:"PostgreSQL",category:"Database"},{id:"mongodb",label:"MongoDB",category:"Database"},{id:"redis",label:"Redis",category:"Database"},{id:"elasticsearch",label:"Elasticsearch",category:"Database"}],sp=()=>{const[e]=cc(),[r,s]=E.useState(""),[a,i]=E.useState(""),[o,l]=E.useState(1),[c,d]=E.useState(1e3),[u,f]=E.useState(100),[h,g]=E.useState("tcp_connect"),[v,j]=E.useState(53),[_,b]=E.useState(500),[p,m]=E.useState(2),[y,x]=E.useState(!0),[w,S]=E.useState(!0),[k,C]=E.useState(!1),[R,O]=E.useState(!1),[P,T]=E.useState("light"),[M,A]=E.useState([]),[$,D]=E.useState(!1),[U,G]=E.useState([]),[q,Y]=E.useState(!1),[Z,K]=E.useState(""),[ue,he]=E.useState(""),[xe,ge]=E.useState([]),[be,J]=E.useState(null),[B,ee]=E.useState(null),[se,te]=E.useState([]),[ye,Pe]=E.useState(""),[ze,z]=E.useState([]),[F,H]=E.useState(""),[V,re]=E.useState([]),[ie,ce]=E.useState(""),[pe,Ce]=E.useState([]),[Me,Fe]=E.useState([]),[We,Mt]=E.useState([]),[at,hr]=E.useState([]),[Nr,Na]=E.useState(!1),[Ke,Nu]=E.useState([]),[Sr,Su]=E.useState([]),[Qt,rn]=E.useState("local"),[sn,nn]=E.useState(""),[an,on]=E.useState(""),{addScan:ku}=yt(),Kr=h==="udp"||h==="comprehensive";E.useEffect(()=>{Cu(),Pu(),Eu(),Ru(),Ou(),Au(),Tu()},[]),E.useEffect(()=>{const I=e.get("customer");I&&ze.length>0&&ze.find(Ie=>Ie.id===I)&&H(I)},[e,ze]),E.useEffect(()=>{F?Du(F):(re([]),ce(""))},[F]);const Cu=async()=>{try{const I=await Fm.getAll();G(I.data)}catch(I){console.error("Failed to load target groups:",I)}},Pu=async()=>{try{const I=await Ot.getPresets();ge(I.data)}catch(I){console.error("Failed to load scan presets:",I)}},Eu=async()=>{try{const I=await Hm.getConfigs();te(I.data);const oe=I.data.find(Ie=>Ie.is_default);oe&&Pe(oe.id)}catch(I){console.error("Failed to load VPN configs:",I)}},Ru=async()=>{try{const I=await Eo.customers.getAll("active");z(I.data)}catch(I){console.error("Failed to load customers:",I)}},Ou=async()=>{try{const I=await pt.getAll();Ce(I.data)}catch(I){console.error("Failed to load tags:",I)}},Au=async()=>{try{const I=await qm.getAll();Mt(I.data)}catch(I){console.error("Failed to load exclusions:",I)}},Tu=async()=>{try{const[I,oe]=await Promise.all([Ro.list(),Ro.groups.list()]),Ie=I.data.filter(zt=>zt.status==="online");Nu(Ie),Su(oe.data)}catch(I){console.error("Failed to load agents:",I)}},Du=async I=>{try{const Ie=(await Eo.engagements.getByCustomer(I)).data.filter(zt=>zt.status==="planning"||zt.status==="in_progress");re(Ie)}catch(oe){console.error("Failed to load engagements:",oe),re([])}},$u=I=>{const oe=JSON.parse(I.targets||"[]");i(oe.join(", "))},Mu=I=>{J(I.id),I.id==="webapp"?(l(80),d(8443)):(l(I.port_range[0]),d(I.port_range[1])),f(I.threads),g(I.scan_type),x(I.enable_os_detection),S(I.enable_service_detection),C(I.enable_vuln_scan),O(I.enable_enumeration),I.enum_depth&&T(I.enum_depth),I.udp_port_range&&(j(I.udp_port_range[0]),b(I.udp_port_range[1])),I.udp_retries&&m(I.udp_retries),I.enum_services?A(I.enum_services):A([]),X.success(`Applied "${I.name}" preset`)},zu=I=>{if(!I){ee(null),J(null),l(1),d(1e3),f(100),g("tcp_connect"),j(53),b(500),m(2),x(!0),S(!0),C(!1),O(!1),T("light"),A([]);return}ee(I.id),J(null);const oe=I.config;l(oe.port_range[0]),d(oe.port_range[1]),f(oe.threads),oe.scan_type&&g(oe.scan_type),x(oe.enable_os_detection),S(oe.enable_service_detection),C(oe.enable_vuln_scan),O(oe.enable_enumeration),oe.enum_depth&&T(oe.enum_depth),oe.enum_services&&oe.enum_services.length>0?A(oe.enum_services):A([]),oe.udp_port_range&&(j(oe.udp_port_range[0]),b(oe.udp_port_range[1])),oe.udp_retries!==void 0&&oe.udp_retries!==null&&m(oe.udp_retries),Rs.createScan(I.id,"",[]).catch(()=>{})},Lu=I=>{switch(I){case"Zap":return ks;case"Radar":return fh;case"Globe":return or;case"EyeOff":return _c;default:return ks}},Fu=I=>{const oe=I.trim(),Ie=/^(\d{1,3}\.){3}\d{1,3}$/,zt=/^(\d{1,3}\.){3}\d{1,3}\/\d{1,2}$/,Jr=/^(\d{1,3}\.){3}\d{1,3}-(\d{1,3}\.){3}\d{1,3}$/,ln=/^[a-zA-Z0-9]([a-zA-Z0-9-]*[a-zA-Z0-9])?(\.[a-zA-Z0-9]([a-zA-Z0-9-]*[a-zA-Z0-9])?)*$/;return Ie.test(oe)||zt.test(oe)||Jr.test(oe)||ln.test(oe)},Ji=I=>I.split(/[,\n]/).map(oe=>oe.trim()).filter(oe=>oe.length>0),Iu=I=>{const oe=Ji(I);return oe.length===0?!1:oe.every(Fu)},Hu=async I=>{var Ie,zt;if(I.preventDefault(),!r.trim()){X.error("Please enter a scan name");return}if(!a.trim()){X.error("Please enter a target");return}if(!Iu(a)){X.error("Invalid target format. Use IP (192.168.1.1), CIDR (192.168.1.0/24), range, or hostname. Separate multiple targets with commas.");return}if(o<1||c>65535||o>c){X.error("Invalid port range");return}const oe=Ji(a);D(!0);try{const Jr=await Ot.create({name:r.trim(),targets:oe,port_range:[o,c],threads:u,scan_type:h,udp_port_range:Kr?[v,_]:void 0,udp_retries:Kr?p:void 0,enable_os_detection:y,enable_service_detection:w,enable_vuln_scan:k,enable_enumeration:R,enum_depth:R?P:void 0,enum_services:R&&M.length>0?M:void 0,vpn_config_id:ye||void 0,customer_id:F||void 0,engagement_id:ie||void 0,tag_ids:Me.length>0?Me:void 0,exclusion_ids:at.length>0?at:void 0,skip_global_exclusions:Nr||void 0,execution_mode:Qt,agent_id:Qt==="agent"&&sn?sn:void 0,agent_group_id:Qt==="agent_group"&&an?an:void 0});if(ku(Jr.data),X.success("Scan started successfully!"),q&&Z.trim())try{await Rs.create({name:Z.trim(),description:ue.trim()||void 0,config:{port_range:[o,c],threads:u,scan_type:h,udp_port_range:Kr?[v,_]:void 0,udp_retries:Kr?p:void 0,enable_os_detection:y,enable_service_detection:w,enable_vuln_scan:k,enable_enumeration:R,enum_depth:R?P:void 0,enum_services:R&&M.length>0?M:void 0}}),X.success("Template saved!")}catch(ln){console.error("Failed to save template:",ln),X.warning("Scan started but template save failed")}s(""),i(""),l(1),d(1e3),f(100),g("tcp_connect"),j(53),b(500),m(2),O(!1),T("light"),A([]),Y(!1),K(""),he(""),H(""),ce(""),Fe([]),ee(null),J(null),rn("local"),nn(""),on("")}catch(Jr){const qu=((zt=(Ie=Jr.response)==null?void 0:Ie.data)==null?void 0:zt.error)||"Failed to start scan";X.error(qu)}finally{D(!1)}},Uu=I=>{A(oe=>oe.includes(I)?oe.filter(Ie=>Ie!==I):[...oe,I])};return n.jsxs(le,{children:[n.jsx("h3",{className:"text-xl font-semibold text-white mb-4",children:"Create New Scan"}),n.jsxs("form",{onSubmit:Hu,className:"space-y-4",children:[n.jsx("div",{className:"pb-4 border-b border-dark-border",children:n.jsx(ep,{onSelect:zu,selectedTemplateId:B})}),xe.length>0&&!B&&n.jsxs("div",{className:"space-y-3 pb-4 border-b border-dark-border",children:[n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(ks,{className:"h-5 w-5 text-yellow-400"}),n.jsx("p",{className:"text-sm font-medium text-slate-300",children:"Quick Presets"})]}),n.jsx("div",{className:"grid grid-cols-2 gap-2",children:xe.map(I=>{const oe=Lu(I.icon);return n.jsxs("button",{type:"button",onClick:()=>Mu(I),className:`px-3 py-3 text-sm rounded-lg border transition-all text-left ${be===I.id?"bg-gradient-to-br from-yellow-600/20 to-orange-600/20 border-yellow-500 text-white shadow-lg":"bg-dark-surface border-dark-border text-slate-400 hover:border-slate-500 hover:bg-dark-surface/50"}`,children:[n.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[n.jsx(oe,{className:`h-4 w-4 ${be===I.id?"text-yellow-400":"text-slate-500"}`}),n.jsx("div",{className:"font-medium",children:I.name})]}),n.jsx("div",{className:"text-xs opacity-70 line-clamp-2",children:I.description})]},I.id)})}),n.jsx("p",{className:"text-xs text-slate-500 italic",children:"Select a preset to auto-configure scan settings, or customize manually below."})]}),n.jsx(Ue,{label:"Scan Name",type:"text",placeholder:"Production Network Scan",value:r,onChange:I=>s(I.target.value),required:!0}),n.jsx(Zm,{selectedTagIds:Me,onChange:Fe,existingTags:pe,onTagsChange:Ce}),n.jsxs("div",{className:"space-y-3 pb-4 border-b border-dark-border",children:[n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(xc,{className:"h-5 w-5 text-indigo-400"}),n.jsx("p",{className:"text-sm font-medium text-slate-300",children:"Customer Association (Optional)"})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-slate-400 mb-2",children:"Customer"}),n.jsxs("select",{value:F,onChange:I=>{H(I.target.value),ce("")},className:"w-full px-3 py-2 bg-dark-surface border border-dark-border rounded-lg text-white focus:ring-2 focus:ring-indigo-500 focus:border-transparent",children:[n.jsx("option",{value:"",children:"No customer"}),ze.map(I=>n.jsx("option",{value:I.id,children:I.name},I.id))]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-slate-400 mb-2",children:"Engagement"}),n.jsxs("select",{value:ie,onChange:I=>ce(I.target.value),disabled:!F||V.length===0,className:"w-full px-3 py-2 bg-dark-surface border border-dark-border rounded-lg text-white focus:ring-2 focus:ring-indigo-500 focus:border-transparent disabled:opacity-50 disabled:cursor-not-allowed",children:[n.jsx("option",{value:"",children:F?V.length===0?"No active engagements":"No engagement":"Select customer first"}),V.map(I=>n.jsxs("option",{value:I.id,children:[I.name," (",I.engagement_type.replace("_"," "),")"]},I.id))]})]})]}),n.jsx("p",{className:"text-xs text-slate-500",children:"Link this scan to a customer and engagement for tracking and reporting."})]}),We.length>0&&n.jsxs("div",{className:"space-y-3 pb-4 border-b border-dark-border",children:[n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(dh,{className:"h-5 w-5 text-orange-400"}),n.jsx("p",{className:"text-sm font-medium text-slate-300",children:"Exclusions (Optional)"})]}),We.filter(I=>I.is_global).length>0&&n.jsxs("div",{className:"flex items-center justify-between p-3 bg-green-500/10 border border-green-500/20 rounded-lg",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(or,{className:"h-4 w-4 text-green-400"}),n.jsxs("span",{className:"text-sm text-green-400",children:[We.filter(I=>I.is_global).length," global exclusion(s) will be applied"]})]}),n.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[n.jsx("input",{type:"checkbox",checked:Nr,onChange:I=>Na(I.target.checked),className:"w-4 h-4 rounded bg-dark-bg border-dark-border text-orange-500 focus:ring-orange-500 focus:ring-offset-dark-bg"}),n.jsx("span",{className:"text-xs text-slate-400",children:"Skip global exclusions"})]})]}),We.filter(I=>!I.is_global).length>0&&n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-slate-400 mb-2",children:"Additional exclusions for this scan"}),n.jsx("div",{className:"space-y-2 max-h-40 overflow-y-auto",children:We.filter(I=>!I.is_global).map(I=>n.jsxs("label",{className:"flex items-center gap-3 p-2 bg-dark-surface rounded-lg cursor-pointer hover:bg-dark-border/30 transition-colors",children:[n.jsx("input",{type:"checkbox",checked:at.includes(I.id),onChange:oe=>{oe.target.checked?hr([...at,I.id]):hr(at.filter(Ie=>Ie!==I.id))},className:"w-4 h-4 rounded bg-dark-bg border-dark-border text-primary focus:ring-primary focus:ring-offset-dark-bg"}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{className:"text-sm font-medium text-white",children:I.name}),n.jsx("span",{className:"text-xs px-1.5 py-0.5 rounded bg-orange-500/20 text-orange-400",children:I.exclusion_type.replace("_"," ")})]}),n.jsx("code",{className:"text-xs text-slate-400 font-mono",children:I.value})]})]},I.id))})]}),n.jsx("p",{className:"text-xs text-slate-500",children:"Exclusions prevent scanning specific hosts or ports. Configure them in Settings."})]}),n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center justify-between mb-1",children:[n.jsx("label",{className:"block text-sm font-medium text-slate-300",children:"Target"}),U.length>0&&n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(uh,{className:"h-3 w-3 text-slate-500"}),n.jsx("span",{className:"text-xs text-slate-500",children:"Use group:"}),U.slice(0,3).map(I=>n.jsx("button",{type:"button",onClick:()=>$u(I),className:"px-2 py-0.5 text-xs rounded border border-dark-border text-slate-400 hover:text-white hover:border-primary transition-colors",style:{borderLeftColor:I.color,borderLeftWidth:3},children:I.name},I.id)),U.length>3&&n.jsxs("span",{className:"text-xs text-slate-500",children:["+",U.length-3]})]})]}),n.jsx(Ue,{type:"text",placeholder:"192.168.1.0/24, 10.0.0.1-10.0.0.100, or hostname",value:a,onChange:I=>i(I.target.value),icon:n.jsx(br,{className:"h-5 w-5"}),required:!0})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsx(Ue,{label:"Start Port",type:"number",min:1,max:65535,value:o,onChange:I=>{l(Number(I.target.value)),J(null),ee(null)}}),n.jsx(Ue,{label:"End Port",type:"number",min:1,max:65535,value:c,onChange:I=>{d(Number(I.target.value)),J(null),ee(null)}})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:["Threads: ",u]}),n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx(hh,{className:"h-5 w-5 text-slate-400"}),n.jsx("input",{type:"range",min:1,max:100,value:u,onChange:I=>{f(Number(I.target.value)),J(null),ee(null)},className:"w-full h-2 bg-dark-surface rounded-lg appearance-none cursor-pointer slider"})]})]}),n.jsxs("div",{className:"space-y-3 border-t border-dark-border pt-4",children:[n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(Wa,{className:"h-5 w-5 text-primary"}),n.jsx("p",{className:"text-sm font-medium text-slate-300",children:"Scan Type"})]}),n.jsx("div",{className:"grid grid-cols-2 gap-2",children:tp.map(I=>n.jsxs("button",{type:"button",onClick:()=>{g(I.id),J(null),ee(null)},className:`px-3 py-2 text-sm rounded-lg border transition-colors text-left ${h===I.id?"bg-primary/20 border-primary text-white":"bg-dark-surface border-dark-border text-slate-400 hover:border-slate-500"}`,children:[n.jsx("div",{className:"font-medium",children:I.label}),n.jsx("div",{className:"text-xs opacity-70",children:I.description})]},I.id))}),Kr&&n.jsxs("div",{className:"ml-4 space-y-3 animate-fadeIn",children:[n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(Bs,{className:"h-4 w-4 text-cyan-400"}),n.jsx("p",{className:"text-sm font-medium text-slate-400",children:"UDP Options"})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsx(Ue,{label:"UDP Start Port",type:"number",min:1,max:65535,value:v,onChange:I=>j(Number(I.target.value))}),n.jsx(Ue,{label:"UDP End Port",type:"number",min:1,max:65535,value:_,onChange:I=>b(Number(I.target.value))})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-medium text-slate-400 mb-2",children:["UDP Retries: ",p]}),n.jsx("input",{type:"range",min:1,max:5,value:p,onChange:I=>m(Number(I.target.value)),className:"w-full h-2 bg-dark-surface rounded-lg appearance-none cursor-pointer slider"})]})]})]}),se.length>0&&n.jsxs("div",{className:"space-y-3 border-t border-dark-border pt-4",children:[n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(we,{className:"h-5 w-5 text-green-400"}),n.jsx("p",{className:"text-sm font-medium text-slate-300",children:"VPN Connection"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-slate-400 mb-2",children:"Route scan through VPN (optional)"}),n.jsxs("select",{value:ye,onChange:I=>Pe(I.target.value),className:"w-full px-3 py-2 bg-dark-surface border border-dark-border rounded-lg text-white focus:ring-2 focus:ring-green-500 focus:border-transparent",children:[n.jsx("option",{value:"",children:"No VPN - Direct connection"}),se.map(I=>n.jsxs("option",{value:I.id,children:[I.name," (",I.vpn_type.toUpperCase(),")",I.is_default?" (Default)":""]},I.id))]}),n.jsx("p",{className:"mt-1 text-xs text-slate-500",children:"VPN connects before scan and disconnects when complete. Configure VPNs in Settings."})]})]}),(Ke.length>0||Sr.length>0)&&n.jsxs("div",{className:"space-y-3 border-t border-dark-border pt-4",children:[n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(jt,{className:"h-5 w-5 text-purple-400"}),n.jsx("p",{className:"text-sm font-medium text-slate-300",children:"Scan Execution"})]}),n.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[n.jsxs("button",{type:"button",onClick:()=>{rn("local"),nn(""),on("")},className:`px-3 py-2 text-sm rounded-lg border transition-colors text-left ${Qt==="local"?"bg-purple-600/20 border-purple-500 text-white":"bg-dark-surface border-dark-border text-slate-400 hover:border-slate-500"}`,children:[n.jsx("div",{className:"font-medium",children:"Local"}),n.jsx("div",{className:"text-xs opacity-70",children:"Run on this server"})]}),n.jsxs("button",{type:"button",onClick:()=>{rn("agent"),on("")},disabled:Ke.length===0,className:`px-3 py-2 text-sm rounded-lg border transition-colors text-left ${Qt==="agent"?"bg-purple-600/20 border-purple-500 text-white":"bg-dark-surface border-dark-border text-slate-400 hover:border-slate-500"} ${Ke.length===0?"opacity-50 cursor-not-allowed":""}`,children:[n.jsx("div",{className:"font-medium",children:"Agent"}),n.jsxs("div",{className:"text-xs opacity-70",children:[Ke.length," online"]})]}),n.jsxs("button",{type:"button",onClick:()=>{rn("agent_group"),nn("")},disabled:Sr.length===0,className:`px-3 py-2 text-sm rounded-lg border transition-colors text-left ${Qt==="agent_group"?"bg-purple-600/20 border-purple-500 text-white":"bg-dark-surface border-dark-border text-slate-400 hover:border-slate-500"} ${Sr.length===0?"opacity-50 cursor-not-allowed":""}`,children:[n.jsx("div",{className:"font-medium",children:"Group"}),n.jsxs("div",{className:"text-xs opacity-70",children:[Sr.length," groups"]})]})]}),Qt==="agent"&&Ke.length>0&&n.jsxs("div",{className:"ml-4 animate-fadeIn",children:[n.jsx("label",{className:"block text-sm font-medium text-slate-400 mb-2",children:"Select Agent"}),n.jsxs("select",{value:sn,onChange:I=>nn(I.target.value),className:"w-full px-3 py-2 bg-dark-surface border border-dark-border rounded-lg text-white focus:ring-2 focus:ring-purple-500 focus:border-transparent",children:[n.jsx("option",{value:"",children:"Select an agent..."}),Ke.map(I=>n.jsxs("option",{value:I.id,children:[I.name,I.network_zones?` (${JSON.parse(I.network_zones).join(", ")})`:""]},I.id))]}),sn&&n.jsx("p",{className:"mt-1 text-xs text-slate-500",children:"Scan will be executed by the selected agent in its network zone."})]}),Qt==="agent_group"&&Sr.length>0&&n.jsxs("div",{className:"ml-4 animate-fadeIn",children:[n.jsx("label",{className:"block text-sm font-medium text-slate-400 mb-2",children:"Select Agent Group"}),n.jsxs("select",{value:an,onChange:I=>on(I.target.value),className:"w-full px-3 py-2 bg-dark-surface border border-dark-border rounded-lg text-white focus:ring-2 focus:ring-purple-500 focus:border-transparent",children:[n.jsx("option",{value:"",children:"Select a group..."}),Sr.map(I=>n.jsxs("option",{value:I.id,children:[I.name,I.network_ranges?` (${JSON.parse(I.network_ranges).join(", ")})`:""]},I.id))]}),an&&n.jsx("p",{className:"mt-1 text-xs text-slate-500",children:"Scan tasks will be distributed across agents in this group based on network zones."})]}),n.jsx("p",{className:"text-xs text-slate-500",children:"Configure agents in Settings > Agents for distributed scanning across network zones."})]}),n.jsxs("div",{className:"space-y-2 border-t border-dark-border pt-4",children:[n.jsx("p",{className:"text-sm font-medium text-slate-300 mb-2",children:"Scan Options"}),n.jsx(Or,{label:"Enable OS Detection",checked:y,onChange:x}),n.jsx(Or,{label:"Enable Service Detection",checked:w,onChange:S}),n.jsx(Or,{label:"Enable Vulnerability Scanning",checked:k,onChange:C})]}),n.jsxs("div",{className:"space-y-3 border-t border-dark-border pt-4",children:[n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(zr,{className:"h-5 w-5 text-cyan-400"}),n.jsx("p",{className:"text-sm font-medium text-slate-300",children:"Service Enumeration"})]}),n.jsx(Or,{label:"Enable Deep Service Enumeration",checked:R,onChange:O}),R&&n.jsxs("div",{className:"ml-4 space-y-4 animate-fadeIn",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-slate-400 mb-2",children:"Enumeration Depth"}),n.jsxs("select",{value:P,onChange:I=>T(I.target.value),className:"w-full px-3 py-2 bg-dark-surface border border-dark-border rounded-lg text-white focus:ring-2 focus:ring-cyan-500 focus:border-transparent",children:[n.jsx("option",{value:"passive",children:"Passive - Banner analysis only"}),n.jsx("option",{value:"light",children:"Light - Common checks (default)"}),n.jsx("option",{value:"aggressive",children:"Aggressive - Full enumeration"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-slate-400 mb-2",children:"Services to Enumerate (leave empty for all detected)"}),n.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-2",children:rp.map(I=>n.jsx("button",{type:"button",onClick:()=>Uu(I.id),className:`px-3 py-1.5 text-sm rounded-md border transition-colors ${M.includes(I.id)?"bg-cyan-600 border-cyan-500 text-white":"bg-dark-surface border-dark-border text-slate-400 hover:border-slate-500"}`,children:I.label},I.id))}),M.length>0&&n.jsxs("p",{className:"mt-2 text-xs text-slate-500",children:["Selected: ",M.join(", ")]})]})]})]}),n.jsxs("div",{className:"space-y-3 border-t border-dark-border pt-4",children:[n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(vi,{className:"h-5 w-5 text-purple-400"}),n.jsx("p",{className:"text-sm font-medium text-slate-300",children:"Save Configuration"})]}),n.jsx(Or,{label:"Save this scan configuration as a template",checked:q,onChange:Y}),q&&n.jsxs("div",{className:"ml-4 space-y-3 animate-fadeIn",children:[n.jsx(Ue,{label:"Template Name",type:"text",placeholder:"Production Network Scan Template",value:Z,onChange:I=>K(I.target.value)}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-slate-400 mb-1",children:"Template Description (Optional)"}),n.jsx("textarea",{value:ue,onChange:I=>he(I.target.value),className:"w-full bg-dark-surface border border-dark-border rounded-lg px-3 py-2 text-white focus:ring-2 focus:ring-purple-500 focus:border-transparent",rows:2,placeholder:"Quick template for scanning production servers"})]})]})]}),n.jsx(Re,{type:"submit",variant:"primary",size:"lg",loading:$,className:"w-full",children:"Start Scan"})]})]})},st=({children:e,variant:r="status",type:s="pending",className:a="",size:i="md"})=>{const l=`inline-flex items-center rounded-full font-medium ${{sm:"px-1.5 py-0.5 text-[10px]",md:"px-2.5 py-0.5 text-xs"}[i]}`,c={pending:"bg-status-pending/20 text-status-pending border border-status-pending/30",running:"bg-status-running/20 text-status-running border border-status-running/30",completed:"bg-status-completed/20 text-status-completed border border-status-completed/30",failed:"bg-status-failed/20 text-status-failed border border-status-failed/30"},d={critical:"bg-severity-critical/20 text-severity-critical border border-severity-critical/30",high:"bg-severity-high/20 text-severity-high border border-severity-high/30",medium:"bg-severity-medium/20 text-severity-medium border border-severity-medium/30",low:"bg-severity-low/20 text-severity-low border border-severity-low/30"},u={primary:"bg-blue-500/20 text-blue-400 border border-blue-500/30",success:"bg-green-500/20 text-green-400 border border-green-500/30",warning:"bg-yellow-500/20 text-yellow-400 border border-yellow-500/30",danger:"bg-red-500/20 text-red-400 border border-red-500/30",secondary:"bg-slate-500/20 text-slate-400 border border-slate-500/30",info:"bg-cyan-500/20 text-cyan-400 border border-cyan-500/30",default:"bg-slate-500/20 text-slate-400 border border-slate-500/30",green:"bg-green-500/20 text-green-400 border border-green-500/30",yellow:"bg-yellow-500/20 text-yellow-400 border border-yellow-500/30",red:"bg-red-500/20 text-red-400 border border-red-500/30",gray:"bg-slate-500/20 text-slate-400 border border-slate-500/30",blue:"bg-blue-500/20 text-blue-400 border border-blue-500/30"};if(r&&u[r])return n.jsx("span",{className:`${l} ${u[r]} ${a}`,children:e});const h=(r==="status"?c:d)[s]||c.pending;return n.jsx("span",{className:`${l} ${h} ${a}`,children:e})};function ke(e){const r=Object.prototype.toString.call(e);return e instanceof Date||typeof e=="object"&&r==="[object Date]"?new e.constructor(+e):typeof e=="number"||r==="[object Number]"||typeof e=="string"||r==="[object String]"?new Date(e):new Date(NaN)}function dr(e,r){return e instanceof Date?new e.constructor(r):new Date(r)}const td=6048e5,np=864e5,mn=43200,Ao=1440;let ap={};function Qs(){return ap}function Is(e,r){var c,d,u,f;const s=Qs(),a=(r==null?void 0:r.weekStartsOn)??((d=(c=r==null?void 0:r.locale)==null?void 0:c.options)==null?void 0:d.weekStartsOn)??s.weekStartsOn??((f=(u=s.locale)==null?void 0:u.options)==null?void 0:f.weekStartsOn)??0,i=ke(e),o=i.getDay(),l=(o<a?7:0)+o-a;return i.setDate(i.getDate()-l),i.setHours(0,0,0,0),i}function Un(e){return Is(e,{weekStartsOn:1})}function rd(e){const r=ke(e),s=r.getFullYear(),a=dr(e,0);a.setFullYear(s+1,0,4),a.setHours(0,0,0,0);const i=Un(a),o=dr(e,0);o.setFullYear(s,0,4),o.setHours(0,0,0,0);const l=Un(o);return r.getTime()>=i.getTime()?s+1:r.getTime()>=l.getTime()?s:s-1}function To(e){const r=ke(e);return r.setHours(0,0,0,0),r}function qn(e){const r=ke(e),s=new Date(Date.UTC(r.getFullYear(),r.getMonth(),r.getDate(),r.getHours(),r.getMinutes(),r.getSeconds(),r.getMilliseconds()));return s.setUTCFullYear(r.getFullYear()),+e-+s}function ip(e,r){const s=To(e),a=To(r),i=+s-qn(s),o=+a-qn(a);return Math.round((i-o)/np)}function op(e){const r=rd(e),s=dr(e,0);return s.setFullYear(r,0,4),s.setHours(0,0,0,0),Un(s)}function An(e,r){const s=ke(e),a=ke(r),i=s.getTime()-a.getTime();return i<0?-1:i>0?1:i}function lp(e){return dr(e,Date.now())}function cp(e){return e instanceof Date||typeof e=="object"&&Object.prototype.toString.call(e)==="[object Date]"}function dp(e){if(!cp(e)&&typeof e!="number")return!1;const r=ke(e);return!isNaN(Number(r))}function up(e,r){const s=ke(e),a=ke(r),i=s.getFullYear()-a.getFullYear(),o=s.getMonth()-a.getMonth();return i*12+o}function hp(e){return r=>{const a=(e?Math[e]:Math.trunc)(r);return a===0?0:a}}function fp(e,r){return+ke(e)-+ke(r)}function mp(e){const r=ke(e);return r.setHours(23,59,59,999),r}function pp(e){const r=ke(e),s=r.getMonth();return r.setFullYear(r.getFullYear(),s+1,0),r.setHours(23,59,59,999),r}function gp(e){const r=ke(e);return+mp(r)==+pp(r)}function xp(e,r){const s=ke(e),a=ke(r),i=An(s,a),o=Math.abs(up(s,a));let l;if(o<1)l=0;else{s.getMonth()===1&&s.getDate()>27&&s.setDate(30),s.setMonth(s.getMonth()-i*o);let c=An(s,a)===-i;gp(ke(e))&&o===1&&An(e,a)===1&&(c=!1),l=i*(o-Number(c))}return l===0?0:l}function yp(e,r,s){const a=fp(e,r)/1e3;return hp(s==null?void 0:s.roundingMethod)(a)}function bp(e){const r=ke(e),s=dr(e,0);return s.setFullYear(r.getFullYear(),0,1),s.setHours(0,0,0,0),s}const vp={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},wp=(e,r,s)=>{let a;const i=vp[e];return typeof i=="string"?a=i:r===1?a=i.one:a=i.other.replace("{{count}}",r.toString()),s!=null&&s.addSuffix?s.comparison&&s.comparison>0?"in "+a:a+" ago":a};function Oa(e){return(r={})=>{const s=r.width?String(r.width):e.defaultWidth;return e.formats[s]||e.formats[e.defaultWidth]}}const jp={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},_p={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},Np={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},Sp={date:Oa({formats:jp,defaultWidth:"full"}),time:Oa({formats:_p,defaultWidth:"full"}),dateTime:Oa({formats:Np,defaultWidth:"full"})},kp={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},Cp=(e,r,s,a)=>kp[e];function es(e){return(r,s)=>{const a=s!=null&&s.context?String(s.context):"standalone";let i;if(a==="formatting"&&e.formattingValues){const l=e.defaultFormattingWidth||e.defaultWidth,c=s!=null&&s.width?String(s.width):l;i=e.formattingValues[c]||e.formattingValues[l]}else{const l=e.defaultWidth,c=s!=null&&s.width?String(s.width):e.defaultWidth;i=e.values[c]||e.values[l]}const o=e.argumentCallback?e.argumentCallback(r):r;return i[o]}}const Pp={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},Ep={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},Rp={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},Op={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},Ap={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},Tp={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},Dp=(e,r)=>{const s=Number(e),a=s%100;if(a>20||a<10)switch(a%10){case 1:return s+"st";case 2:return s+"nd";case 3:return s+"rd"}return s+"th"},$p={ordinalNumber:Dp,era:es({values:Pp,defaultWidth:"wide"}),quarter:es({values:Ep,defaultWidth:"wide",argumentCallback:e=>e-1}),month:es({values:Rp,defaultWidth:"wide"}),day:es({values:Op,defaultWidth:"wide"}),dayPeriod:es({values:Ap,defaultWidth:"wide",formattingValues:Tp,defaultFormattingWidth:"wide"})};function ts(e){return(r,s={})=>{const a=s.width,i=a&&e.matchPatterns[a]||e.matchPatterns[e.defaultMatchWidth],o=r.match(i);if(!o)return null;const l=o[0],c=a&&e.parsePatterns[a]||e.parsePatterns[e.defaultParseWidth],d=Array.isArray(c)?zp(c,h=>h.test(l)):Mp(c,h=>h.test(l));let u;u=e.valueCallback?e.valueCallback(d):d,u=s.valueCallback?s.valueCallback(u):u;const f=r.slice(l.length);return{value:u,rest:f}}}function Mp(e,r){for(const s in e)if(Object.prototype.hasOwnProperty.call(e,s)&&r(e[s]))return s}function zp(e,r){for(let s=0;s<e.length;s++)if(r(e[s]))return s}function Lp(e){return(r,s={})=>{const a=r.match(e.matchPattern);if(!a)return null;const i=a[0],o=r.match(e.parsePattern);if(!o)return null;let l=e.valueCallback?e.valueCallback(o[0]):o[0];l=s.valueCallback?s.valueCallback(l):l;const c=r.slice(i.length);return{value:l,rest:c}}}const Fp=/^(\d+)(th|st|nd|rd)?/i,Ip=/\d+/i,Hp={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},Up={any:[/^b/i,/^(a|c)/i]},qp={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},Wp={any:[/1/i,/2/i,/3/i,/4/i]},Bp={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},Vp={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},Gp={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},Yp={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},Xp={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},Kp={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},Jp={ordinalNumber:Lp({matchPattern:Fp,parsePattern:Ip,valueCallback:e=>parseInt(e,10)}),era:ts({matchPatterns:Hp,defaultMatchWidth:"wide",parsePatterns:Up,defaultParseWidth:"any"}),quarter:ts({matchPatterns:qp,defaultMatchWidth:"wide",parsePatterns:Wp,defaultParseWidth:"any",valueCallback:e=>e+1}),month:ts({matchPatterns:Bp,defaultMatchWidth:"wide",parsePatterns:Vp,defaultParseWidth:"any"}),day:ts({matchPatterns:Gp,defaultMatchWidth:"wide",parsePatterns:Yp,defaultParseWidth:"any"}),dayPeriod:ts({matchPatterns:Xp,defaultMatchWidth:"any",parsePatterns:Kp,defaultParseWidth:"any"})},sd={code:"en-US",formatDistance:wp,formatLong:Sp,formatRelative:Cp,localize:$p,match:Jp,options:{weekStartsOn:0,firstWeekContainsDate:1}};function Qp(e){const r=ke(e);return ip(r,bp(r))+1}function Zp(e){const r=ke(e),s=+Un(r)-+op(r);return Math.round(s/td)+1}function nd(e,r){var f,h,g,v;const s=ke(e),a=s.getFullYear(),i=Qs(),o=(r==null?void 0:r.firstWeekContainsDate)??((h=(f=r==null?void 0:r.locale)==null?void 0:f.options)==null?void 0:h.firstWeekContainsDate)??i.firstWeekContainsDate??((v=(g=i.locale)==null?void 0:g.options)==null?void 0:v.firstWeekContainsDate)??1,l=dr(e,0);l.setFullYear(a+1,0,o),l.setHours(0,0,0,0);const c=Is(l,r),d=dr(e,0);d.setFullYear(a,0,o),d.setHours(0,0,0,0);const u=Is(d,r);return s.getTime()>=c.getTime()?a+1:s.getTime()>=u.getTime()?a:a-1}function eg(e,r){var c,d,u,f;const s=Qs(),a=(r==null?void 0:r.firstWeekContainsDate)??((d=(c=r==null?void 0:r.locale)==null?void 0:c.options)==null?void 0:d.firstWeekContainsDate)??s.firstWeekContainsDate??((f=(u=s.locale)==null?void 0:u.options)==null?void 0:f.firstWeekContainsDate)??1,i=nd(e,r),o=dr(e,0);return o.setFullYear(i,0,a),o.setHours(0,0,0,0),Is(o,r)}function tg(e,r){const s=ke(e),a=+Is(s,r)-+eg(s,r);return Math.round(a/td)+1}function _e(e,r){const s=e<0?"-":"",a=Math.abs(e).toString().padStart(r,"0");return s+a}const Zt={y(e,r){const s=e.getFullYear(),a=s>0?s:1-s;return _e(r==="yy"?a%100:a,r.length)},M(e,r){const s=e.getMonth();return r==="M"?String(s+1):_e(s+1,2)},d(e,r){return _e(e.getDate(),r.length)},a(e,r){const s=e.getHours()/12>=1?"pm":"am";switch(r){case"a":case"aa":return s.toUpperCase();case"aaa":return s;case"aaaaa":return s[0];case"aaaa":default:return s==="am"?"a.m.":"p.m."}},h(e,r){return _e(e.getHours()%12||12,r.length)},H(e,r){return _e(e.getHours(),r.length)},m(e,r){return _e(e.getMinutes(),r.length)},s(e,r){return _e(e.getSeconds(),r.length)},S(e,r){const s=r.length,a=e.getMilliseconds(),i=Math.trunc(a*Math.pow(10,s-3));return _e(i,r.length)}},Cr={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},Do={G:function(e,r,s){const a=e.getFullYear()>0?1:0;switch(r){case"G":case"GG":case"GGG":return s.era(a,{width:"abbreviated"});case"GGGGG":return s.era(a,{width:"narrow"});case"GGGG":default:return s.era(a,{width:"wide"})}},y:function(e,r,s){if(r==="yo"){const a=e.getFullYear(),i=a>0?a:1-a;return s.ordinalNumber(i,{unit:"year"})}return Zt.y(e,r)},Y:function(e,r,s,a){const i=nd(e,a),o=i>0?i:1-i;if(r==="YY"){const l=o%100;return _e(l,2)}return r==="Yo"?s.ordinalNumber(o,{unit:"year"}):_e(o,r.length)},R:function(e,r){const s=rd(e);return _e(s,r.length)},u:function(e,r){const s=e.getFullYear();return _e(s,r.length)},Q:function(e,r,s){const a=Math.ceil((e.getMonth()+1)/3);switch(r){case"Q":return String(a);case"QQ":return _e(a,2);case"Qo":return s.ordinalNumber(a,{unit:"quarter"});case"QQQ":return s.quarter(a,{width:"abbreviated",context:"formatting"});case"QQQQQ":return s.quarter(a,{width:"narrow",context:"formatting"});case"QQQQ":default:return s.quarter(a,{width:"wide",context:"formatting"})}},q:function(e,r,s){const a=Math.ceil((e.getMonth()+1)/3);switch(r){case"q":return String(a);case"qq":return _e(a,2);case"qo":return s.ordinalNumber(a,{unit:"quarter"});case"qqq":return s.quarter(a,{width:"abbreviated",context:"standalone"});case"qqqqq":return s.quarter(a,{width:"narrow",context:"standalone"});case"qqqq":default:return s.quarter(a,{width:"wide",context:"standalone"})}},M:function(e,r,s){const a=e.getMonth();switch(r){case"M":case"MM":return Zt.M(e,r);case"Mo":return s.ordinalNumber(a+1,{unit:"month"});case"MMM":return s.month(a,{width:"abbreviated",context:"formatting"});case"MMMMM":return s.month(a,{width:"narrow",context:"formatting"});case"MMMM":default:return s.month(a,{width:"wide",context:"formatting"})}},L:function(e,r,s){const a=e.getMonth();switch(r){case"L":return String(a+1);case"LL":return _e(a+1,2);case"Lo":return s.ordinalNumber(a+1,{unit:"month"});case"LLL":return s.month(a,{width:"abbreviated",context:"standalone"});case"LLLLL":return s.month(a,{width:"narrow",context:"standalone"});case"LLLL":default:return s.month(a,{width:"wide",context:"standalone"})}},w:function(e,r,s,a){const i=tg(e,a);return r==="wo"?s.ordinalNumber(i,{unit:"week"}):_e(i,r.length)},I:function(e,r,s){const a=Zp(e);return r==="Io"?s.ordinalNumber(a,{unit:"week"}):_e(a,r.length)},d:function(e,r,s){return r==="do"?s.ordinalNumber(e.getDate(),{unit:"date"}):Zt.d(e,r)},D:function(e,r,s){const a=Qp(e);return r==="Do"?s.ordinalNumber(a,{unit:"dayOfYear"}):_e(a,r.length)},E:function(e,r,s){const a=e.getDay();switch(r){case"E":case"EE":case"EEE":return s.day(a,{width:"abbreviated",context:"formatting"});case"EEEEE":return s.day(a,{width:"narrow",context:"formatting"});case"EEEEEE":return s.day(a,{width:"short",context:"formatting"});case"EEEE":default:return s.day(a,{width:"wide",context:"formatting"})}},e:function(e,r,s,a){const i=e.getDay(),o=(i-a.weekStartsOn+8)%7||7;switch(r){case"e":return String(o);case"ee":return _e(o,2);case"eo":return s.ordinalNumber(o,{unit:"day"});case"eee":return s.day(i,{width:"abbreviated",context:"formatting"});case"eeeee":return s.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return s.day(i,{width:"short",context:"formatting"});case"eeee":default:return s.day(i,{width:"wide",context:"formatting"})}},c:function(e,r,s,a){const i=e.getDay(),o=(i-a.weekStartsOn+8)%7||7;switch(r){case"c":return String(o);case"cc":return _e(o,r.length);case"co":return s.ordinalNumber(o,{unit:"day"});case"ccc":return s.day(i,{width:"abbreviated",context:"standalone"});case"ccccc":return s.day(i,{width:"narrow",context:"standalone"});case"cccccc":return s.day(i,{width:"short",context:"standalone"});case"cccc":default:return s.day(i,{width:"wide",context:"standalone"})}},i:function(e,r,s){const a=e.getDay(),i=a===0?7:a;switch(r){case"i":return String(i);case"ii":return _e(i,r.length);case"io":return s.ordinalNumber(i,{unit:"day"});case"iii":return s.day(a,{width:"abbreviated",context:"formatting"});case"iiiii":return s.day(a,{width:"narrow",context:"formatting"});case"iiiiii":return s.day(a,{width:"short",context:"formatting"});case"iiii":default:return s.day(a,{width:"wide",context:"formatting"})}},a:function(e,r,s){const i=e.getHours()/12>=1?"pm":"am";switch(r){case"a":case"aa":return s.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"aaa":return s.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return s.dayPeriod(i,{width:"narrow",context:"formatting"});case"aaaa":default:return s.dayPeriod(i,{width:"wide",context:"formatting"})}},b:function(e,r,s){const a=e.getHours();let i;switch(a===12?i=Cr.noon:a===0?i=Cr.midnight:i=a/12>=1?"pm":"am",r){case"b":case"bb":return s.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"bbb":return s.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return s.dayPeriod(i,{width:"narrow",context:"formatting"});case"bbbb":default:return s.dayPeriod(i,{width:"wide",context:"formatting"})}},B:function(e,r,s){const a=e.getHours();let i;switch(a>=17?i=Cr.evening:a>=12?i=Cr.afternoon:a>=4?i=Cr.morning:i=Cr.night,r){case"B":case"BB":case"BBB":return s.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"BBBBB":return s.dayPeriod(i,{width:"narrow",context:"formatting"});case"BBBB":default:return s.dayPeriod(i,{width:"wide",context:"formatting"})}},h:function(e,r,s){if(r==="ho"){let a=e.getHours()%12;return a===0&&(a=12),s.ordinalNumber(a,{unit:"hour"})}return Zt.h(e,r)},H:function(e,r,s){return r==="Ho"?s.ordinalNumber(e.getHours(),{unit:"hour"}):Zt.H(e,r)},K:function(e,r,s){const a=e.getHours()%12;return r==="Ko"?s.ordinalNumber(a,{unit:"hour"}):_e(a,r.length)},k:function(e,r,s){let a=e.getHours();return a===0&&(a=24),r==="ko"?s.ordinalNumber(a,{unit:"hour"}):_e(a,r.length)},m:function(e,r,s){return r==="mo"?s.ordinalNumber(e.getMinutes(),{unit:"minute"}):Zt.m(e,r)},s:function(e,r,s){return r==="so"?s.ordinalNumber(e.getSeconds(),{unit:"second"}):Zt.s(e,r)},S:function(e,r){return Zt.S(e,r)},X:function(e,r,s){const a=e.getTimezoneOffset();if(a===0)return"Z";switch(r){case"X":return Mo(a);case"XXXX":case"XX":return gr(a);case"XXXXX":case"XXX":default:return gr(a,":")}},x:function(e,r,s){const a=e.getTimezoneOffset();switch(r){case"x":return Mo(a);case"xxxx":case"xx":return gr(a);case"xxxxx":case"xxx":default:return gr(a,":")}},O:function(e,r,s){const a=e.getTimezoneOffset();switch(r){case"O":case"OO":case"OOO":return"GMT"+$o(a,":");case"OOOO":default:return"GMT"+gr(a,":")}},z:function(e,r,s){const a=e.getTimezoneOffset();switch(r){case"z":case"zz":case"zzz":return"GMT"+$o(a,":");case"zzzz":default:return"GMT"+gr(a,":")}},t:function(e,r,s){const a=Math.trunc(e.getTime()/1e3);return _e(a,r.length)},T:function(e,r,s){const a=e.getTime();return _e(a,r.length)}};function $o(e,r=""){const s=e>0?"-":"+",a=Math.abs(e),i=Math.trunc(a/60),o=a%60;return o===0?s+String(i):s+String(i)+r+_e(o,2)}function Mo(e,r){return e%60===0?(e>0?"-":"+")+_e(Math.abs(e)/60,2):gr(e,r)}function gr(e,r=""){const s=e>0?"-":"+",a=Math.abs(e),i=_e(Math.trunc(a/60),2),o=_e(a%60,2);return s+i+r+o}const zo=(e,r)=>{switch(e){case"P":return r.date({width:"short"});case"PP":return r.date({width:"medium"});case"PPP":return r.date({width:"long"});case"PPPP":default:return r.date({width:"full"})}},ad=(e,r)=>{switch(e){case"p":return r.time({width:"short"});case"pp":return r.time({width:"medium"});case"ppp":return r.time({width:"long"});case"pppp":default:return r.time({width:"full"})}},rg=(e,r)=>{const s=e.match(/(P+)(p+)?/)||[],a=s[1],i=s[2];if(!i)return zo(e,r);let o;switch(a){case"P":o=r.dateTime({width:"short"});break;case"PP":o=r.dateTime({width:"medium"});break;case"PPP":o=r.dateTime({width:"long"});break;case"PPPP":default:o=r.dateTime({width:"full"});break}return o.replace("{{date}}",zo(a,r)).replace("{{time}}",ad(i,r))},sg={p:ad,P:rg},ng=/^D+$/,ag=/^Y+$/,ig=["D","DD","YY","YYYY"];function og(e){return ng.test(e)}function lg(e){return ag.test(e)}function cg(e,r,s){const a=dg(e,r,s);if(console.warn(a),ig.includes(e))throw new RangeError(a)}function dg(e,r,s){const a=e[0]==="Y"?"years":"days of the month";return`Use \`${e.toLowerCase()}\` instead of \`${e}\` (in \`${r}\`) for formatting ${a} to the input \`${s}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const ug=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,hg=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,fg=/^'([^]*?)'?$/,mg=/''/g,pg=/[a-zA-Z]/;function ar(e,r,s){var f,h,g,v;const a=Qs(),i=a.locale??sd,o=a.firstWeekContainsDate??((h=(f=a.locale)==null?void 0:f.options)==null?void 0:h.firstWeekContainsDate)??1,l=a.weekStartsOn??((v=(g=a.locale)==null?void 0:g.options)==null?void 0:v.weekStartsOn)??0,c=ke(e);if(!dp(c))throw new RangeError("Invalid time value");let d=r.match(hg).map(j=>{const _=j[0];if(_==="p"||_==="P"){const b=sg[_];return b(j,i.formatLong)}return j}).join("").match(ug).map(j=>{if(j==="''")return{isToken:!1,value:"'"};const _=j[0];if(_==="'")return{isToken:!1,value:gg(j)};if(Do[_])return{isToken:!0,value:j};if(_.match(pg))throw new RangeError("Format string contains an unescaped latin alphabet character `"+_+"`");return{isToken:!1,value:j}});i.localize.preprocessor&&(d=i.localize.preprocessor(c,d));const u={firstWeekContainsDate:o,weekStartsOn:l,locale:i};return d.map(j=>{if(!j.isToken)return j.value;const _=j.value;(lg(_)||og(_))&&cg(_,r,String(e));const b=Do[_[0]];return b(c,_,i.localize,u)}).join("")}function gg(e){const r=e.match(fg);return r?r[1].replace(mg,"'"):e}function xg(e,r,s){const a=Qs(),i=(s==null?void 0:s.locale)??a.locale??sd,o=2520,l=An(e,r);if(isNaN(l))throw new RangeError("Invalid time value");const c=Object.assign({},s,{addSuffix:s==null?void 0:s.addSuffix,comparison:l});let d,u;l>0?(d=ke(r),u=ke(e)):(d=ke(e),u=ke(r));const f=yp(u,d),h=(qn(u)-qn(d))/1e3,g=Math.round((f-h)/60);let v;if(g<2)return s!=null&&s.includeSeconds?f<5?i.formatDistance("lessThanXSeconds",5,c):f<10?i.formatDistance("lessThanXSeconds",10,c):f<20?i.formatDistance("lessThanXSeconds",20,c):f<40?i.formatDistance("halfAMinute",0,c):f<60?i.formatDistance("lessThanXMinutes",1,c):i.formatDistance("xMinutes",1,c):g===0?i.formatDistance("lessThanXMinutes",1,c):i.formatDistance("xMinutes",g,c);if(g<45)return i.formatDistance("xMinutes",g,c);if(g<90)return i.formatDistance("aboutXHours",1,c);if(g<Ao){const j=Math.round(g/60);return i.formatDistance("aboutXHours",j,c)}else{if(g<o)return i.formatDistance("xDays",1,c);if(g<mn){const j=Math.round(g/Ao);return i.formatDistance("xDays",j,c)}else if(g<mn*2)return v=Math.round(g/mn),i.formatDistance("aboutXMonths",v,c)}if(v=xp(u,d),v<12){const j=Math.round(g/mn);return i.formatDistance("xMonths",j,c)}else{const j=v%12,_=Math.trunc(v/12);return j<3?i.formatDistance("aboutXYears",_,c):j<9?i.formatDistance("overXYears",_,c):i.formatDistance("almostXYears",_+1,c)}}function fa(e,r){return xg(e,lp(e),r)}const yg=({scan:e,isActive:r,onClick:s,tags:a,onTagClick:i})=>{const o=JSON.parse(e.targets),l=e.status,c=()=>({pending:"Pending",running:"Running",completed:"Completed",failed:"Failed"})[e.status]||e.status;return n.jsxs("div",{onClick:s,className:`
        p-4 border rounded-lg cursor-pointer transition-all duration-200
        ${r?"bg-primary/10 border-primary shadow-lg":"bg-dark-surface border-dark-border hover:border-primary/50 hover:shadow-md"}
      `,children:[n.jsxs("div",{className:"flex items-start justify-between mb-2",children:[n.jsx("h4",{className:"text-white font-semibold truncate flex-1",children:e.name}),n.jsxs(st,{variant:"status",type:l,children:[l==="running"&&n.jsx("span",{className:"inline-block w-2 h-2 bg-primary rounded-full animate-pulse-dot mr-1"}),c()]})]}),a&&a.length>0&&n.jsxs("div",{className:"flex flex-wrap gap-1 mb-2",children:[a.slice(0,3).map(d=>n.jsxs("button",{type:"button",onClick:u=>{u.stopPropagation(),i==null||i(d.id)},className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium hover:opacity-80 transition-opacity",style:{backgroundColor:d.color+"20",color:d.color},title:`Filter by ${d.name}`,children:[n.jsx(zs,{className:"h-3 w-3 mr-1"}),d.name]},d.id)),a.length>3&&n.jsxs("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs text-slate-400",children:["+",a.length-3," more"]})]}),n.jsxs("div",{className:"space-y-1 text-sm",children:[n.jsxs("div",{className:"flex items-center text-slate-400",children:[n.jsx(br,{className:"h-4 w-4 mr-2"}),n.jsx("span",{className:"font-mono text-xs",children:o[0]})]}),n.jsxs("div",{className:"flex items-center text-slate-500",children:[n.jsx(vt,{className:"h-4 w-4 mr-2"}),n.jsx("span",{children:ar(new Date(e.created_at),"MMM d, yyyy HH:mm")})]})]})]})},At=({size:e="md",className:r=""})=>{const s={sm:"h-4 w-4",md:"h-8 w-8",lg:"h-12 w-12"};return n.jsx(sa,{className:`${s[e]} animate-spin text-primary ${r}`})},bg=({selectedIds:e,onSelectionChange:r})=>{const{scans:s,activeScan:a,setScans:i,setActiveScan:o}=yt(),[l,c]=E.useState(!0),[d,u]=E.useState(""),[f,h]=E.useState("all"),[g,v]=E.useState("all"),[j,_]=E.useState([]),[b,p]=E.useState({}),[m,y]=E.useState(!1),[x,w]=E.useState(""),[S,k]=E.useState("#06b6d4"),[C,R]=E.useState(null);E.useEffect(()=>{O(),P()},[]);const O=async()=>{try{const Y=(await Ot.getAllWithTags()).data;i(Y.map(K=>({...K,tags:void 0})));const Z={};Y.forEach(K=>{Z[K.id]=K.tags||[]}),p(Z)}catch{try{const Y=await Ot.getAll();i(Y.data)}catch{X.error("Failed to load scans")}}finally{c(!1)}},P=async()=>{try{const q=await pt.getAll();_(q.data)}catch(q){console.error("Failed to load tags:",q)}},T=async()=>{if(x.trim())try{const q=await pt.create({name:x.trim(),color:S});_([...j,q.data]),w(""),X.success("Tag created successfully")}catch{X.error("Failed to create tag")}},M=async q=>{try{await pt.delete(q),_(j.filter(Y=>Y.id!==q)),g===q&&v("all"),X.success("Tag deleted")}catch{X.error("Failed to delete tag")}},A=async(q,Y)=>{q.stopPropagation(),R(Y);try{const K=(await Ot.duplicate(Y)).data;i([K,...s]),b[Y]&&p({...b,[K.id]:b[Y]}),X.success("Scan duplicated successfully")}catch{X.error("Failed to duplicate scan")}finally{R(null)}},$=s.filter(q=>{const Y=q.name.toLowerCase().includes(d.toLowerCase())||q.targets.toLowerCase().includes(d.toLowerCase()),Z=f==="all"||q.status===f,K=g==="all"||b[q.id]&&b[q.id].some(ue=>ue.id===g);return Y&&Z&&K}),D=q=>{r&&(q.target.checked?r(new Set($.map(Y=>Y.id))):r(new Set))},U=(q,Y)=>{if(!r||!e)return;const Z=new Set(e);Y?Z.add(q):Z.delete(q),r(Z)},G=["#06b6d4","#8b5cf6","#f59e0b","#10b981","#ef4444","#ec4899","#3b82f6","#84cc16"];return l?n.jsx(le,{children:n.jsx("div",{className:"flex items-center justify-center py-12",children:n.jsx(At,{})})}):n.jsx(le,{children:n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("h3",{className:"text-xl font-semibold text-white",children:"Scan History"}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsxs("button",{onClick:()=>y(!m),className:"text-sm text-slate-400 hover:text-primary flex items-center gap-1",title:"Manage tags",children:[n.jsx(zs,{className:"h-4 w-4"}),"Tags"]}),n.jsxs("span",{className:"text-sm text-slate-400",children:[s.length," scans",e&&e.size>0&&` (${e.size} selected)`]})]})]}),m&&n.jsxs("div",{className:"bg-dark-bg border border-dark-border rounded-lg p-3 space-y-3",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Ue,{type:"text",placeholder:"New tag name...",value:x,onChange:q=>w(q.target.value),className:"flex-1"}),n.jsx("div",{className:"flex gap-1",children:G.map(q=>n.jsx("button",{onClick:()=>k(q),className:`w-6 h-6 rounded-full border-2 ${S===q?"border-white":"border-transparent"}`,style:{backgroundColor:q},title:q},q))}),n.jsx("button",{onClick:T,disabled:!x.trim(),className:"px-3 py-1.5 bg-primary text-white rounded hover:bg-primary/80 disabled:opacity-50 disabled:cursor-not-allowed",children:n.jsx(Dr,{className:"h-4 w-4"})})]}),n.jsxs("div",{className:"flex flex-wrap gap-2",children:[j.map(q=>n.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded text-sm",style:{backgroundColor:q.color+"20",color:q.color},children:[q.name,n.jsx("button",{onClick:()=>M(q.id),className:"hover:opacity-70",children:n.jsx(bt,{className:"h-3 w-3"})})]},q.id)),j.length===0&&n.jsx("span",{className:"text-sm text-slate-500",children:"No tags yet"})]})]}),n.jsx(Ue,{type:"text",placeholder:"Search by name, target, or customer...",value:d,onChange:q=>u(q.target.value),icon:n.jsx(zr,{className:"h-5 w-5"})}),n.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-2",children:[n.jsxs("div",{className:"flex items-center gap-4 text-sm",children:[n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(Nc,{className:"h-4 w-4 text-slate-400"}),n.jsx("span",{className:"text-slate-400",children:"Status:"}),n.jsxs("select",{value:f,onChange:q=>h(q.target.value),className:"bg-dark-bg border border-dark-border text-slate-300 rounded px-2 py-1 focus:outline-none focus:border-primary",children:[n.jsx("option",{value:"all",children:"All"}),n.jsx("option",{value:"pending",children:"Pending"}),n.jsx("option",{value:"running",children:"Running"}),n.jsx("option",{value:"completed",children:"Completed"}),n.jsx("option",{value:"failed",children:"Failed"})]})]}),j.length>0&&n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(zs,{className:"h-4 w-4 text-slate-400"}),n.jsx("span",{className:"text-slate-400",children:"Tag:"}),n.jsxs("select",{value:g,onChange:q=>v(q.target.value),className:"bg-dark-bg border border-dark-border text-slate-300 rounded px-2 py-1 focus:outline-none focus:border-primary",children:[n.jsx("option",{value:"all",children:"All Tags"}),j.map(q=>n.jsx("option",{value:q.id,children:q.name},q.id))]})]})]}),r&&n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx("input",{type:"checkbox",id:"select-all",checked:(e==null?void 0:e.size)===$.length&&$.length>0,onChange:D,className:"rounded border-dark-border bg-dark-bg text-primary focus:ring-primary"}),n.jsx("label",{htmlFor:"select-all",className:"text-sm text-slate-400 cursor-pointer",children:"Select All"})]})]}),n.jsx("div",{className:"space-y-2 max-h-[600px] overflow-y-auto",children:$.length===0?n.jsx("div",{className:"text-center py-8 text-slate-500",children:d||f!=="all"||g!=="all"?"No scans match your filters":"No scans yet. Create your first scan above."}):$.map(q=>n.jsxs("div",{className:"flex items-center space-x-2",children:[r&&n.jsx("input",{type:"checkbox",checked:(e==null?void 0:e.has(q.id))||!1,onChange:Y=>U(q.id,Y.target.checked),className:"rounded border-dark-border bg-dark-bg text-primary focus:ring-primary flex-shrink-0"}),n.jsxs("div",{className:"flex-1 relative group",children:[n.jsx(yg,{scan:q,isActive:(a==null?void 0:a.id)===q.id,onClick:()=>o(q),tags:b[q.id],onTagClick:Y=>v(Y)}),n.jsx("button",{onClick:Y=>A(Y,q.id),disabled:C===q.id,className:"absolute top-2 right-12 p-1.5 bg-dark-bg/90 border border-dark-border rounded opacity-0 group-hover:opacity-100 transition-opacity hover:border-primary hover:text-primary disabled:opacity-50",title:"Duplicate scan",children:C===q.id?n.jsx(At,{className:"h-4 w-4"}):n.jsx(na,{className:"h-4 w-4"})})]})]},q.id))})]})})},rs=[{name:"host_discovery",label:"Host Discovery",progressStart:0,progressEnd:20},{name:"port_scanning",label:"Port Scanning",progressStart:20,progressEnd:40},{name:"service_detection",label:"Service Detection",progressStart:40,progressEnd:60},{name:"enumeration",label:"Enumeration",progressStart:60,progressEnd:75},{name:"os_fingerprinting",label:"OS Fingerprinting",progressStart:75,progressEnd:85},{name:"vulnerability_scanning",label:"Vulnerability Scanning",progressStart:85,progressEnd:100}],vg=({currentPhase:e,progress:r=0,isComplete:s=!1})=>{var c;const a=d=>d.toLowerCase().replace(/\s+/g,"_"),o=(()=>{if(s)return rs.length;if(!e)return-1;const d=a(e);return rs.findIndex(u=>u.name===d||a(u.label)===d)})(),l=d=>s||d<o?"completed":d===o?"active":"pending";return n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"relative",children:[n.jsx("div",{className:"absolute top-6 left-0 right-0 h-0.5 bg-dark-border"}),n.jsx("div",{className:"absolute top-6 left-0 h-0.5 bg-gradient-to-r from-primary to-primary-light transition-all duration-500",style:{width:`${s?100:o/rs.length*100}%`}}),n.jsx("div",{className:"relative grid grid-cols-6 gap-2",children:rs.map((d,u)=>{const f=l(u);return n.jsxs("div",{className:"flex flex-col items-center",children:[n.jsx("div",{className:`
                    relative z-10 flex items-center justify-center w-12 h-12 rounded-full border-2 transition-all duration-300
                    ${f==="completed"?"bg-green-500 border-green-500 shadow-lg shadow-green-500/50":f==="active"?"bg-primary border-primary shadow-lg shadow-primary/50 animate-pulse-glow":"bg-dark-surface border-dark-border"}
                  `,children:f==="completed"?n.jsx(Ms,{className:"h-6 w-6 text-white"}):f==="active"?n.jsx(sa,{className:"h-6 w-6 text-white animate-spin"}):n.jsx(mh,{className:"h-6 w-6 text-slate-600"})}),n.jsxs("div",{className:"mt-3 text-center",children:[n.jsx("p",{className:`text-xs font-medium transition-colors ${f==="completed"?"text-green-500":f==="active"?"text-primary":"text-slate-500"}`,children:d.label}),f==="active"&&n.jsx("p",{className:"text-xs text-slate-400 mt-1",children:"In Progress..."}),f==="completed"&&n.jsx("p",{className:"text-xs text-green-500/70 mt-1",children:"Complete"})]})]},d.name)})})]}),n.jsxs("div",{className:"space-y-2 pt-4 border-t border-dark-border",children:[n.jsxs("div",{className:"flex items-center justify-between text-sm",children:[n.jsx("span",{className:"text-slate-400",children:s?n.jsx("span",{className:"text-green-500 font-medium",children:"Scan Complete"}):e?n.jsxs(n.Fragment,{children:[n.jsx("span",{className:"text-primary font-medium",children:((c=rs[o])==null?void 0:c.label)||e})," in progress..."]}):n.jsx("span",{className:"text-slate-500",children:"Initializing..."})}),n.jsxs("span",{className:"text-white font-semibold tabular-nums",children:[Math.round(r),"%"]})]}),n.jsx("div",{className:"relative h-3 bg-dark-surface rounded-full overflow-hidden",children:n.jsx("div",{className:"absolute top-0 left-0 h-full bg-gradient-to-r from-primary via-primary-light to-primary transition-all duration-500 ease-out",style:{width:`${s?100:r}%`},children:n.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white to-transparent opacity-30 animate-shimmer"})})})]})]})},ss=({value:e,duration:r=500})=>{const[s,a]=E.useState(0);return E.useEffect(()=>{if(s===e)return;const i=s,o=e-i,l=Date.now(),c=()=>{const d=Date.now()-l,u=Math.min(d/r,1),f=1-Math.pow(1-u,3),h=Math.round(i+o*f);a(h),u<1&&requestAnimationFrame(c)};requestAnimationFrame(c)},[e,r]),n.jsx("span",{className:"tabular-nums",children:s.toLocaleString()})},wg=({hostsFound:e,portsOpen:r,servicesDetected:s,vulnerabilitiesFound:a,criticalVulns:i=0,highVulns:o=0,mediumVulns:l=0,lowVulns:c=0})=>{const d=[{label:"Hosts Found",value:e,icon:jt,color:"text-blue-400",bgColor:"bg-blue-500/10",borderColor:"border-blue-500/30"},{label:"Open Ports",value:r,icon:Bs,color:"text-green-400",bgColor:"bg-green-500/10",borderColor:"border-green-500/30"},{label:"Services Detected",value:s,icon:wi,color:"text-purple-400",bgColor:"bg-purple-500/10",borderColor:"border-purple-500/30"},{label:"Vulnerabilities",value:a,icon:Ne,color:a>0?"text-red-400":"text-slate-500",bgColor:a>0?"bg-red-500/10":"bg-slate-500/10",borderColor:a>0?"border-red-500/30":"border-slate-500/30"}],u=f=>{switch(f){case"critical":return"bg-severity-critical text-white";case"high":return"bg-severity-high text-white";case"medium":return"bg-severity-medium text-white";case"low":return"bg-severity-low text-white";default:return"bg-slate-600 text-white"}};return n.jsxs("div",{className:"space-y-4",children:[n.jsx("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4",children:d.map(f=>{const h=f.icon;return n.jsxs("div",{className:`relative overflow-hidden rounded-lg border ${f.borderColor} ${f.bgColor} p-4 transition-all duration-300 hover:scale-105`,children:[n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsx(h,{className:`h-5 w-5 ${f.color}`}),f.value>0&&n.jsx("div",{className:"absolute top-2 right-2 w-2 h-2 rounded-full bg-current animate-pulse-dot"})]}),n.jsxs("div",{className:"space-y-1",children:[n.jsx("p",{className:"text-2xl font-bold text-white",children:n.jsx(ss,{value:f.value})}),n.jsx("p",{className:"text-xs text-slate-400 font-medium",children:f.label})]}),n.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-white/5 to-transparent pointer-events-none"})]},f.label)})}),a>0&&n.jsxs("div",{className:"bg-dark-surface border border-dark-border rounded-lg p-4",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[n.jsx(we,{className:"h-4 w-4 text-red-400"}),n.jsx("h4",{className:"text-sm font-semibold text-white",children:"Vulnerability Breakdown"})]}),n.jsxs("div",{className:"flex flex-wrap gap-2",children:[i>0&&n.jsxs("div",{className:`px-3 py-1.5 rounded-lg text-xs font-medium ${u("critical")}`,children:[n.jsx("span",{className:"font-bold",children:n.jsx(ss,{value:i})})," Critical"]}),o>0&&n.jsxs("div",{className:`px-3 py-1.5 rounded-lg text-xs font-medium ${u("high")}`,children:[n.jsx("span",{className:"font-bold",children:n.jsx(ss,{value:o})})," High"]}),l>0&&n.jsxs("div",{className:`px-3 py-1.5 rounded-lg text-xs font-medium ${u("medium")}`,children:[n.jsx("span",{className:"font-bold",children:n.jsx(ss,{value:l})})," Medium"]}),c>0&&n.jsxs("div",{className:`px-3 py-1.5 rounded-lg text-xs font-medium ${u("low")}`,children:[n.jsx("span",{className:"font-bold",children:n.jsx(ss,{value:c})})," Low"]})]})]})]})};class jg{constructor(r,s){Lt(this,"ws",null);Lt(this,"scanId");Lt(this,"token");Lt(this,"reconnectAttempts",0);Lt(this,"maxReconnectAttempts",10);Lt(this,"reconnectDelay",1e3);Lt(this,"messageHandlers",[]);Lt(this,"statusHandlers",[]);this.scanId=r,this.token=s||localStorage.getItem("token")||""}connect(){if(!this.token){console.error("WebSocket connection failed: No authentication token available"),this.updateStatus("failed");return}const r=window.location.protocol==="https:"?"wss:":"ws:",s=window.location.hostname,a=window.location.port||(r==="wss:"?"443":"80"),i=`${r}//${s}:${a}/api/ws/scans/${this.scanId}?token=${encodeURIComponent(this.token)}`;this.updateStatus("connecting");try{this.ws=new WebSocket(i),this.ws.onopen=()=>{console.log(`WebSocket connected for scan: ${this.scanId}`),this.reconnectAttempts=0,this.reconnectDelay=1e3,this.updateStatus("connected")},this.ws.onmessage=o=>{try{const l=JSON.parse(o.data);this.messageHandlers.forEach(c=>c(l))}catch(l){console.error("Failed to parse WebSocket message:",l)}},this.ws.onerror=o=>{console.error("WebSocket error:",o)},this.ws.onclose=()=>{console.log("WebSocket disconnected"),this.updateStatus("disconnected"),this.attemptReconnect()}}catch(o){console.error("Failed to create WebSocket:",o),this.updateStatus("failed")}}attemptReconnect(){if(this.reconnectAttempts>=this.maxReconnectAttempts){console.log("Max reconnection attempts reached"),this.updateStatus("failed");return}this.reconnectAttempts++;const r=Math.min(this.reconnectDelay*Math.pow(2,this.reconnectAttempts-1),8e3);console.log(`Reconnecting in ${r}ms... (Attempt ${this.reconnectAttempts}/${this.maxReconnectAttempts})`),setTimeout(()=>{this.connect()},r)}onMessage(r){this.messageHandlers.push(r)}onStatusChange(r){this.statusHandlers.push(r)}updateStatus(r){this.statusHandlers.forEach(s=>s(r))}disconnect(){this.ws&&(this.ws.close(),this.ws=null),this.messageHandlers=[],this.statusHandlers=[]}reconnect(){this.disconnect(),this.reconnectAttempts=0,this.connect()}}const _g=e=>{const[r,s]=E.useState("disconnected"),[a,i]=E.useState(null),o=E.useRef(null),{updateScanStatus:l,addHostToResults:c,updateHostInResults:d,results:u}=yt();E.useEffect(()=>{if(!e)return;const g=new jg(e);return o.current=g,g.onStatusChange(v=>{s(v),i(v==="failed"?"Failed to connect to WebSocket":null)}),g.onMessage(v=>{f(e,v)}),g.connect(),()=>{g.disconnect(),o.current=null}},[e]);const f=(g,v)=>{switch(console.log("WebSocket message:",v),v.type){case"scanStarted":l(g,"running"),X.info("Scan started");break;case"phaseStarted":break;case"hostDiscovered":const j={target:{ip:v.ip,hostname:v.hostname||null},is_alive:!0,os_guess:null,ports:[],vulnerabilities:[],scan_duration:{secs:0,nanos:0}};c(g,j);break;case"portFound":const b=(u.get(g)||[]).find(w=>w.target.ip===v.ip);if(b){const w={port:v.port,protocol:v.protocol==="TCP"?"TCP":"UDP",state:v.state,service:null},S=[...b.ports,w];d(g,v.ip,{ports:S})}break;case"serviceDetected":const m=(u.get(g)||[]).find(w=>w.target.ip===v.ip);if(m){const w=m.ports.map(S=>S.port===v.port?{...S,service:{name:v.service_name,version:v.version||null,banner:null,cpe:null,ssl_info:null}}:S);d(g,v.ip,{ports:w})}break;case"vulnerabilityFound":const x=(u.get(g)||[]).find(w=>w.target.ip===v.ip);if(x){const w={cve_id:v.cve_id||null,title:v.title,severity:v.severity,description:"",affected_service:null},S=[...x.vulnerabilities,w];d(g,v.ip,{vulnerabilities:S}),v.severity==="Critical"?X.error(` CRITICAL vulnerability found on ${v.ip}: ${v.title}`,{autoClose:8e3}):v.severity==="High"&&X.warning(` HIGH severity vulnerability found on ${v.ip}: ${v.title}`,{autoClose:6e3})}break;case"scanCompleted":l(g,"completed"),X.success(`Scan completed! Found ${v.total_hosts} hosts`);break;case"error":l(g,"failed"),X.error(`Scan error: ${v.message}`);break;default:console.log("Unknown message type:",v.type)}};return{status:r,error:a,reconnect:()=>{o.current&&o.current.reconnect()}}},Ng=({scanId:e})=>{const{status:r,error:s,reconnect:a}=_g(e),{liveUpdates:i,scans:o}=yt(),[l,c]=E.useState(!0),d=E.useMemo(()=>o.find(x=>x.id===e),[o,e]),{currentPhase:u,progress:f,isComplete:h,metrics:g,currentActivity:v,estimatedTime:j}=E.useMemo(()=>{var Y,Z,K,ue,he,xe;if(!e)return{currentPhase:void 0,progress:0,isComplete:!1,metrics:{hostsFound:0,portsOpen:0,servicesDetected:0,vulnerabilitiesFound:0,criticalVulns:0,highVulns:0,mediumVulns:0,lowVulns:0},currentActivity:"",estimatedTime:null};const x=i.get(e)||[],w=(d==null?void 0:d.status)==="completed",S=x.filter(ge=>ge.type==="phaseStarted"),k=S.length>0?S[S.length-1]:null,C=x.filter(ge=>ge.type==="scanProgress"),R=C.length>0?C[C.length-1]:null,O=x.filter(ge=>ge.type==="hostDiscovered"),P=x.filter(ge=>ge.type==="portFound"),T=x.filter(ge=>ge.type==="serviceDetected"),M=x.filter(ge=>ge.type==="vulnerabilityFound"),A=M.filter(ge=>{var be;return((be=ge.data)==null?void 0:be.severity)==="Critical"}).length,$=M.filter(ge=>{var be;return((be=ge.data)==null?void 0:be.severity)==="High"}).length,D=M.filter(ge=>{var be;return((be=ge.data)==null?void 0:be.severity)==="Medium"}).length,U=M.filter(ge=>{var be;return((be=ge.data)==null?void 0:be.severity)==="Low"}).length,G=((Y=R==null?void 0:R.data)==null?void 0:Y.message)||((Z=k==null?void 0:k.data)==null?void 0:Z.phase)||"";let q=null;if(!w&&R&&((K=R.data)==null?void 0:K.progress)>0){const ge=R.data.progress,be=x.find(J=>J.type==="scanStarted");if(be){const J=new Date(be.timestamp).getTime(),ee=(Date.now()-J)/1e3,se=ee/ge*100;q=Math.max(0,se-ee)}}return{currentPhase:(ue=k==null?void 0:k.data)==null?void 0:ue.phase,progress:((he=R==null?void 0:R.data)==null?void 0:he.progress)||((xe=k==null?void 0:k.data)==null?void 0:xe.progress)||0,isComplete:w,metrics:{hostsFound:O.length,portsOpen:P.length,servicesDetected:T.length,vulnerabilitiesFound:M.length,criticalVulns:A,highVulns:$,mediumVulns:D,lowVulns:U},currentActivity:G,estimatedTime:q}},[e,i,d]),_=x=>x===null?"Calculating...":x<60?`~${Math.round(x)}s remaining`:x<3600?`~${Math.round(x/60)}m remaining`:`~${Math.round(x/3600)}h ${Math.round(x%3600/60)}m remaining`;if(!e)return n.jsx(le,{children:n.jsx("div",{className:"text-center py-8 text-slate-500",children:"Select a scan to view real-time progress"})});const b=()=>{switch(r){case"connected":return"text-green-500";case"connecting":return"text-yellow-500";case"disconnected":case"failed":return"text-red-500";default:return"text-slate-500"}},p=()=>r==="connected"?n.jsx(Bs,{className:"h-5 w-5"}):n.jsx(Va,{className:"h-5 w-5"}),m=()=>{switch(r){case"connected":return"Connected - Receiving live updates";case"connecting":return"Connecting to scan...";case"disconnected":return"Disconnected";case"failed":return"Connection failed";default:return"Unknown"}},y=(d==null?void 0:d.status)==="running"||(d==null?void 0:d.status)==="completed";return n.jsx(le,{children:n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsxs("h3",{className:"text-xl font-semibold text-white flex items-center",children:[n.jsx(xt,{className:"h-5 w-5 mr-2"}),"Real-Time Scan Progress"]}),n.jsxs(st,{variant:"status",type:r==="connected"?"running":"pending",children:[r==="connected"&&n.jsx("span",{className:"inline-block w-2 h-2 bg-green-500 rounded-full animate-pulse-dot mr-1"}),"Live"]})]}),n.jsx("button",{onClick:()=>c(!l),className:"p-2 hover:bg-dark-hover rounded-lg transition-colors",children:l?n.jsx(cr,{className:"h-5 w-5 text-slate-400"}):n.jsx(ut,{className:"h-5 w-5 text-slate-400"})})]}),n.jsxs("div",{className:`flex items-center space-x-2 ${b()}`,children:[p(),n.jsx("span",{className:"text-sm",children:m()})]}),s&&n.jsxs("div",{className:"bg-red-500/10 border border-red-500/30 rounded-lg p-3",children:[n.jsx("p",{className:"text-red-500 text-sm",children:s}),n.jsx("button",{onClick:a,className:"mt-2 text-xs text-red-400 hover:text-red-300 underline",children:"Try reconnecting"})]}),l&&n.jsxs(n.Fragment,{children:[y&&!h&&v&&n.jsxs("div",{className:"bg-dark-surface border border-dark-border rounded-lg p-3 space-y-2",children:[n.jsxs("div",{className:"flex items-start gap-2",children:[n.jsx(xt,{className:"h-4 w-4 text-primary mt-0.5 animate-pulse"}),n.jsx("div",{className:"flex-1 min-w-0",children:n.jsx("p",{className:"text-sm text-slate-300",children:v})})]}),j!==null&&n.jsxs("div",{className:"flex items-center gap-2 text-xs text-slate-400",children:[n.jsx(vt,{className:"h-3 w-3"}),n.jsx("span",{children:_(j)})]})]}),y&&n.jsx(wg,{hostsFound:g.hostsFound,portsOpen:g.portsOpen,servicesDetected:g.servicesDetected,vulnerabilitiesFound:g.vulnerabilitiesFound,criticalVulns:g.criticalVulns,highVulns:g.highVulns,mediumVulns:g.mediumVulns,lowVulns:g.lowVulns}),y&&n.jsx("div",{className:"border-t border-dark-border pt-4",children:n.jsx(vg,{currentPhase:u,progress:f,isComplete:h})}),r==="connected"&&!y&&n.jsxs("div",{className:"border-t border-dark-border pt-4 text-sm text-slate-400",children:[n.jsx("p",{children:"Listening for scan events:"}),n.jsxs("ul",{className:"mt-2 space-y-1 text-xs",children:[n.jsx("li",{children:" Host discoveries"}),n.jsx("li",{children:" Open ports"}),n.jsx("li",{children:" Service detections"}),n.jsx("li",{children:" Vulnerability findings"})]})]})]})]})})},Sg=({onScanSelect:e})=>{const{scans:r,liveUpdates:s,activeScan:a}=yt(),i=E.useMemo(()=>r.filter(u=>u.status==="running"),[r]),o=E.useMemo(()=>{const u=new Map;return i.forEach(f=>{var j;const g=(s.get(f.id)||[]).filter(_=>_.type==="scanProgress"||_.type==="phaseStarted"),v=g.length>0?g[g.length-1]:null;u.set(f.id,((j=v==null?void 0:v.data)==null?void 0:j.progress)||0)}),u},[i,s]),l=E.useMemo(()=>{let u=0,f=0,h=0;i.forEach(v=>{const j=s.get(v.id)||[];u+=o.get(v.id)||0,f+=j.filter(_=>_.type==="hostDiscovered").length,h+=j.filter(_=>_.type==="vulnerabilityFound").length});const g=i.length>0?u/i.length:0;return{totalScans:i.length,avgProgress:g,totalHosts:f,totalVulns:h}},[i,s,o]),c=u=>{switch(u){case"running":return n.jsx(sa,{className:"h-4 w-4 text-primary animate-spin"});case"completed":return n.jsx(Ye,{className:"h-4 w-4 text-green-500"});case"failed":return n.jsx(Tt,{className:"h-4 w-4 text-red-500"});default:return n.jsx(xt,{className:"h-4 w-4 text-slate-400"})}},d=u=>{if(!u.started_at)return"";const f=new Date(u.started_at).getTime(),h=u.completed_at?new Date(u.completed_at).getTime():Date.now(),g=Math.floor((h-f)/1e3);return g<60?`${g}s`:g<3600?`${Math.floor(g/60)}m`:`${Math.floor(g/3600)}h ${Math.floor(g%3600/60)}m`};return i.length===0?null:n.jsx(le,{children:n.jsxs("div",{className:"space-y-4",children:[n.jsx("div",{className:"flex items-center justify-between",children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(xt,{className:"h-5 w-5 text-primary"}),n.jsx("h3",{className:"text-lg font-semibold text-white",children:"Active Scans"}),n.jsxs(st,{variant:"status",type:"running",children:[l.totalScans," Running"]})]})}),n.jsxs("div",{className:"grid grid-cols-3 gap-3 pb-3 border-b border-dark-border",children:[n.jsxs("div",{className:"text-center",children:[n.jsxs("p",{className:"text-2xl font-bold text-primary",children:[Math.round(l.avgProgress),"%"]}),n.jsx("p",{className:"text-xs text-slate-400",children:"Avg Progress"})]}),n.jsxs("div",{className:"text-center",children:[n.jsx("p",{className:"text-2xl font-bold text-blue-400",children:l.totalHosts}),n.jsx("p",{className:"text-xs text-slate-400",children:"Total Hosts"})]}),n.jsxs("div",{className:"text-center",children:[n.jsx("p",{className:"text-2xl font-bold text-red-400",children:l.totalVulns}),n.jsx("p",{className:"text-xs text-slate-400",children:"Total Vulns"})]})]}),n.jsx("div",{className:"space-y-2 max-h-80 overflow-y-auto custom-scrollbar",children:i.map(u=>{const f=o.get(u.id)||0,h=(a==null?void 0:a.id)===u.id;return n.jsxs("div",{onClick:()=>e==null?void 0:e(u.id),className:`
                  group relative p-3 rounded-lg border transition-all cursor-pointer
                  ${h?"bg-primary/10 border-primary":"bg-dark-surface border-dark-border hover:border-primary/50 hover:bg-dark-hover"}
                `,children:[n.jsx("div",{className:"absolute inset-0 bg-primary/5 rounded-lg transition-all duration-300",style:{width:`${f}%`}}),n.jsxs("div",{className:"relative flex items-center justify-between gap-3",children:[n.jsxs("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[c(u.status),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("p",{className:"text-sm font-medium text-white truncate",children:u.name}),n.jsx("p",{className:"text-xs text-slate-400 truncate",children:u.targets})]})]}),n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsxs("div",{className:"text-right",children:[n.jsxs("p",{className:"text-sm font-semibold text-primary tabular-nums",children:[Math.round(f),"%"]}),n.jsx("p",{className:"text-xs text-slate-500",children:d(u)})]}),n.jsx(Vs,{className:`h-4 w-4 text-slate-400 transition-transform ${h?"text-primary":"group-hover:translate-x-1"}`})]})]}),n.jsx("div",{className:"relative mt-2 h-1 bg-dark-bg rounded-full overflow-hidden",children:n.jsx("div",{className:"absolute top-0 left-0 h-full bg-gradient-to-r from-primary to-primary-light transition-all duration-500",style:{width:`${f}%`}})})]},u.id)})})]})})},kg=({scanId:e,maxItems:r=50})=>{const{liveUpdates:s}=yt(),[a,i]=E.useState(!1),o=E.useRef(null),[l,c]=E.useState(!0),d=e?s.get(e)||[]:[],f=(a?d.filter(j=>{var _,b;return j.type==="vulnerabilityFound"&&(((_=j.data)==null?void 0:_.severity)==="Critical"||((b=j.data)==null?void 0:b.severity)==="High")}):d).slice(-r);E.useEffect(()=>{l&&o.current&&o.current.scrollIntoView({behavior:"smooth"})},[f.length,l]);const h=j=>{switch(j){case"hostDiscovered":return n.jsx(jt,{className:"h-4 w-4 text-blue-400"});case"portFound":return n.jsx(Bs,{className:"h-4 w-4 text-green-400"});case"serviceDetected":return n.jsx(wi,{className:"h-4 w-4 text-purple-400"});case"vulnerabilityFound":return n.jsx(Ne,{className:"h-4 w-4 text-red-400"});case"phaseStarted":return n.jsx(xt,{className:"h-4 w-4 text-primary"});case"scanStarted":case"scanCompleted":return n.jsx(we,{className:"h-4 w-4 text-green-400"});case"vpnConnecting":return n.jsx(or,{className:"h-4 w-4 text-yellow-400 animate-pulse"});case"vpnConnected":return n.jsx(or,{className:"h-4 w-4 text-green-400"});case"vpnDisconnecting":return n.jsx(Va,{className:"h-4 w-4 text-yellow-400"});case"vpnDisconnected":return n.jsx(Va,{className:"h-4 w-4 text-slate-400"});case"vpnError":return n.jsx(or,{className:"h-4 w-4 text-red-400"});default:return n.jsx(xt,{className:"h-4 w-4 text-slate-400"})}},g=j=>{var _,b,p,m,y,x,w,S,k,C,R,O,P,T,M,A,$,D,U,G,q,Y,Z,K;switch(j.type){case"hostDiscovered":return n.jsxs(n.Fragment,{children:["Discovered host ",n.jsx("code",{className:"text-primary font-mono",children:(_=j.data)==null?void 0:_.ip}),((b=j.data)==null?void 0:b.hostname)&&` (${j.data.hostname})`]});case"portFound":return n.jsxs(n.Fragment,{children:["Found open port"," ",n.jsxs("code",{className:"text-green-400 font-mono",children:[(p=j.data)==null?void 0:p.port,"/",(m=j.data)==null?void 0:m.protocol]})," ","on ",n.jsx("code",{className:"text-primary font-mono",children:(y=j.data)==null?void 0:y.ip})]});case"serviceDetected":return n.jsxs(n.Fragment,{children:["Detected service ",n.jsx("code",{className:"text-purple-400",children:(x=j.data)==null?void 0:x.service_name})," on"," ",n.jsx("code",{className:"text-primary font-mono",children:(w=j.data)==null?void 0:w.ip}),":",(S=j.data)==null?void 0:S.port]});case"vulnerabilityFound":return n.jsxs(n.Fragment,{children:["Found"," ",n.jsx(st,{variant:"severity",type:((C=(k=j.data)==null?void 0:k.severity)==null?void 0:C.toLowerCase())||"low",children:(R=j.data)==null?void 0:R.severity})," ","vulnerability on ",n.jsx("code",{className:"text-primary font-mono",children:(O=j.data)==null?void 0:O.ip}),":"," ",n.jsx("span",{className:"text-white",children:(P=j.data)==null?void 0:P.title})]});case"phaseStarted":return n.jsxs(n.Fragment,{children:["Started phase: ",n.jsx("span",{className:"text-primary font-medium",children:(T=j.data)==null?void 0:T.phase})]});case"scanStarted":return n.jsx("span",{className:"text-green-400 font-medium",children:"Scan started"});case"scanCompleted":return n.jsxs(n.Fragment,{children:[n.jsx("span",{className:"text-green-400 font-medium",children:"Scan completed"})," - Found"," ",((M=j.data)==null?void 0:M.total_hosts)||0," hosts in ",((A=j.data)==null?void 0:A.duration)||0,"s"]});case"error":return n.jsxs("span",{className:"text-red-400",children:["Error: ",($=j.data)==null?void 0:$.message]});case"vpnConnecting":return n.jsxs(n.Fragment,{children:[n.jsx("span",{className:"text-yellow-400",children:"Connecting to VPN:"})," ",n.jsx("span",{className:"text-white",children:(D=j.data)==null?void 0:D.config_name})]});case"vpnConnected":return n.jsxs(n.Fragment,{children:[n.jsx("span",{className:"text-green-400 font-medium",children:"VPN connected"})," - ",(U=j.data)==null?void 0:U.config_name,((G=j.data)==null?void 0:G.assigned_ip)&&n.jsxs(n.Fragment,{children:[" (IP: ",n.jsx("code",{className:"text-primary font-mono",children:j.data.assigned_ip}),")"]})]});case"vpnDisconnecting":return n.jsxs(n.Fragment,{children:[n.jsx("span",{className:"text-yellow-400",children:"Disconnecting from VPN:"})," ",n.jsx("span",{className:"text-white",children:(q=j.data)==null?void 0:q.config_name})]});case"vpnDisconnected":return n.jsxs(n.Fragment,{children:[n.jsx("span",{className:"text-slate-400",children:"VPN disconnected:"})," ",n.jsx("span",{className:"text-white",children:(Y=j.data)==null?void 0:Y.config_name})]});case"vpnError":return n.jsxs(n.Fragment,{children:[n.jsxs("span",{className:"text-red-400",children:["VPN Error (",(Z=j.data)==null?void 0:Z.config_name,"):"]})," ",(K=j.data)==null?void 0:K.message]});default:return n.jsx("span",{className:"text-slate-400",children:j.type})}},v=j=>{var _;if(j.type==="vulnerabilityFound")switch((_=j.data)==null?void 0:_.severity){case"Critical":return"border-l-severity-critical bg-severity-critical/5";case"High":return"border-l-severity-high bg-severity-high/5";case"Medium":return"border-l-severity-medium bg-severity-medium/5";default:return"border-l-severity-low bg-severity-low/5"}return j.type==="vpnConnecting"||j.type==="vpnDisconnecting"?"border-l-yellow-500 bg-yellow-500/5":j.type==="vpnConnected"?"border-l-green-500 bg-green-500/5":j.type==="vpnError"?"border-l-red-500 bg-red-500/5":"border-l-slate-600 bg-dark-bg"};return e?n.jsxs(le,{children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(xt,{className:"h-5 w-5 text-primary"}),n.jsx("h3",{className:"text-lg font-semibold text-white",children:"Live Activity Feed"}),n.jsxs("span",{className:"text-sm text-slate-400",children:["(",f.length," events)"]})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsxs("button",{onClick:()=>i(!a),className:`flex items-center gap-1 px-3 py-1.5 rounded-lg text-sm transition-colors ${a?"bg-red-500/20 text-red-400 border border-red-500/50":"bg-dark-surface text-slate-400 border border-dark-border hover:border-primary"}`,children:[n.jsx(Nc,{className:"h-3 w-3"}),a?"Critical/High Only":"All Events"]}),n.jsx("button",{onClick:()=>c(!l),className:`px-3 py-1.5 rounded-lg text-sm transition-colors ${l?"bg-primary text-white":"bg-dark-surface text-slate-400 border border-dark-border"}`,children:"Auto-scroll"})]})]}),n.jsxs("div",{className:"space-y-2 max-h-96 overflow-y-auto pr-2 custom-scrollbar",children:[f.length===0?n.jsx("div",{className:"text-center py-8 text-slate-500",children:a?"No critical/high severity findings yet":"Waiting for scan events..."}):f.map((j,_)=>n.jsx("div",{className:`border-l-4 rounded-r-lg p-3 transition-all hover:bg-dark-surface/50 ${v(j)}`,children:n.jsxs("div",{className:"flex items-start gap-3",children:[n.jsx("div",{className:"mt-0.5",children:h(j.type)}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("p",{className:"text-sm text-slate-300",children:g(j)}),n.jsx("p",{className:"text-xs text-slate-500 mt-1",children:ar(new Date(j.timestamp),"HH:mm:ss.SSS")})]})]})},_)),n.jsx("div",{ref:o})]})]}):n.jsx(le,{children:n.jsx("div",{className:"text-center py-8 text-slate-500",children:"Select a running scan to view live activity"})})},Cg={Critical:10,High:7,Medium:4,Low:1};function Aa(e){let r=0;const s=e.vulnerabilities.reduce((o,l)=>o+Cg[l.severity],0),a=e.ports.filter(o=>o.state==="Open").length,i=Math.min(a*2,30);return r=s+i,Math.min(Math.round(r),100)}function Pg(e){return e>=70?"Critical":e>=50?"High":e>=25?"Medium":"Low"}function id(e){const r={Critical:0,High:0,Medium:0,Low:0};return e.forEach(s=>{s.vulnerabilities.forEach(a=>{r[a.severity]++})}),r}function Eg(e){const r=new Map;return e.forEach(s=>{s.ports.filter(a=>a.state==="Open").forEach(a=>{var o;const i=r.get(a.port);i?i.count++:r.set(a.port,{count:1,service:((o=a.service)==null?void 0:o.name)||`Port ${a.port}`})})}),Array.from(r.entries()).map(([s,a])=>({port:s,...a})).sort((s,a)=>a.count-s.count).slice(0,10)}function Rg(e){const r=e.length,s=e.reduce((l,c)=>l+c.ports.filter(d=>d.state==="Open").length,0),a=id(e),i=Object.values(a).reduce((l,c)=>l+c,0),o=a.Critical;return{totalHosts:r,totalPorts:s,totalVulnerabilities:i,criticalVulnerabilities:o,vulnerabilities:a}}function od(e){switch(e.toLowerCase()){case"critical":return"critical";case"high":return"high";case"medium":return"medium";case"low":case"info":case"informational":return"low";default:return"low"}}const Og=({vulnerability:e,compact:r=!1})=>{const[s,a]=E.useState(!1),i=()=>{e.cve_id&&(navigator.clipboard.writeText(e.cve_id),X.success("CVE ID copied to clipboard"))},o=c=>`https://nvd.nist.gov/vuln/detail/${c}`,l=c=>{switch(c){case"Critical":return"border-severity-critical bg-severity-critical/10";case"High":return"border-severity-high bg-severity-high/10";case"Medium":return"border-severity-medium bg-severity-medium/10";case"Low":return"border-severity-low bg-severity-low/10";default:return"border-slate-600 bg-slate-600/10"}};return n.jsx("div",{className:`border-l-4 rounded-lg p-4 ${l(e.severity)}`,children:n.jsx("div",{className:"flex items-start justify-between gap-3",children:n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[n.jsx(we,{className:"h-4 w-4 text-red-400 flex-shrink-0"}),n.jsx("h4",{className:"text-white font-semibold text-sm truncate",children:e.title})]}),n.jsxs("div",{className:"flex items-center gap-2 mb-2 flex-wrap",children:[e.cve_id&&n.jsxs("div",{className:"flex items-center gap-1 bg-dark-surface px-2 py-1 rounded",children:[n.jsx("code",{className:"text-xs text-primary font-mono",children:e.cve_id}),n.jsx("button",{onClick:i,className:"text-slate-400 hover:text-white transition-colors",title:"Copy CVE ID",children:n.jsx(na,{className:"h-3 w-3"})}),n.jsx("a",{href:o(e.cve_id),target:"_blank",rel:"noopener noreferrer",className:"text-slate-400 hover:text-white transition-colors",title:"View on NVD",children:n.jsx(Sc,{className:"h-3 w-3"})})]}),n.jsx(st,{variant:"severity",type:od(e.severity),children:e.severity}),e.affected_service&&n.jsxs("span",{className:"text-xs text-slate-400",children:["Affects: ",n.jsx("span",{className:"text-slate-300 font-mono",children:e.affected_service})]})]}),!r&&e.description&&n.jsxs(n.Fragment,{children:[n.jsx("div",{className:`text-sm text-slate-300 mt-2 ${s?"":"line-clamp-2"}`,children:e.description}),e.description.length>100&&n.jsx("button",{onClick:()=>a(!s),className:"flex items-center gap-1 text-xs text-primary hover:text-primary-light transition-colors mt-2",children:s?n.jsxs(n.Fragment,{children:["Show less ",n.jsx(cr,{className:"h-3 w-3"})]}):n.jsxs(n.Fragment,{children:["Show more ",n.jsx(ut,{className:"h-3 w-3"})]})})]})]})})})},Ag=({banner:e,service:r})=>{const[s,a]=E.useState(!1),i=()=>{navigator.clipboard.writeText(e),X.success("Service banner copied to clipboard")},o=e.length>100,l=s||!o?e:e.substring(0,100)+"...";return n.jsxs("div",{className:"bg-dark-bg border border-dark-border rounded-lg p-3 mt-2",children:[n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(vc,{className:"h-4 w-4 text-green-400"}),n.jsxs("span",{className:"text-xs font-semibold text-slate-300",children:["Service Banner ",r&&`(${r})`]})]}),n.jsx("button",{onClick:i,className:"text-slate-400 hover:text-white transition-colors p-1 rounded hover:bg-dark-surface",title:"Copy banner",children:n.jsx(na,{className:"h-3 w-3"})})]}),n.jsx("pre",{className:"bg-slate-900 rounded p-2 overflow-x-auto",children:n.jsx("code",{className:"text-xs text-green-400 font-mono whitespace-pre-wrap break-all",children:l})}),o&&n.jsx("button",{onClick:()=>a(!s),className:"flex items-center gap-1 text-xs text-primary hover:text-primary-light transition-colors mt-2",children:s?n.jsxs(n.Fragment,{children:["Show less ",n.jsx(cr,{className:"h-3 w-3"})]}):n.jsxs(n.Fragment,{children:["Show full banner ",n.jsx(ut,{className:"h-3 w-3"})]})})]})};function Tg(e){switch(e){case"A+":return{bg:"bg-emerald-500",text:"text-white",border:"border-emerald-600",glow:"shadow-emerald-500/50"};case"A":return{bg:"bg-green-500",text:"text-white",border:"border-green-600",glow:"shadow-green-500/50"};case"A-":return{bg:"bg-green-400",text:"text-white",border:"border-green-500",glow:"shadow-green-400/50"};case"B+":return{bg:"bg-lime-500",text:"text-white",border:"border-lime-600",glow:"shadow-lime-500/50"};case"B":return{bg:"bg-yellow-500",text:"text-gray-900",border:"border-yellow-600",glow:"shadow-yellow-500/50"};case"B-":return{bg:"bg-yellow-400",text:"text-gray-900",border:"border-yellow-500",glow:"shadow-yellow-400/50"};case"C":return{bg:"bg-orange-500",text:"text-white",border:"border-orange-600",glow:"shadow-orange-500/50"};case"D":return{bg:"bg-red-400",text:"text-white",border:"border-red-500",glow:"shadow-red-400/50"};case"F":return{bg:"bg-red-600",text:"text-white",border:"border-red-700",glow:"shadow-red-600/50"};case"T":return{bg:"bg-purple-600",text:"text-white",border:"border-purple-700",glow:"shadow-purple-600/50"};case"M":return{bg:"bg-fuchsia-600",text:"text-white",border:"border-fuchsia-700",glow:"shadow-fuchsia-600/50"};default:return{bg:"bg-gray-500",text:"text-white",border:"border-gray-600"}}}function Lo(e){switch(e){case"A+":return"Excellent - Best possible SSL/TLS configuration with HSTS";case"A":return"Very Good - Strong SSL/TLS configuration";case"A-":return"Good - Minor improvements possible";case"B+":case"B":case"B-":return"Acceptable - Some security issues present";case"C":return"Weak - Significant security issues";case"D":return"Poor - Serious security vulnerabilities";case"F":return"Failed - Critical security issues";case"T":return"Trust Issue - Certificate not from a trusted CA (self-signed)";case"M":return"Mismatch - Certificate hostname does not match";default:return"Unknown - Grade could not be determined"}}function Dg(e){switch(e){case"T":return gh;case"M":return ph;default:return null}}function $g(e){return e>=90?"bg-emerald-500":e>=80?"bg-green-500":e>=70?"bg-lime-500":e>=60?"bg-yellow-500":e>=50?"bg-orange-500":"bg-red-500"}function Mg(e){switch(e){case"Critical":return{bg:"bg-red-600",text:"text-white"};case"High":return{bg:"bg-orange-500",text:"text-white"};case"Medium":return{bg:"bg-yellow-500",text:"text-gray-900"};case"Low":return{bg:"bg-blue-500",text:"text-white"};case"Informational":return{bg:"bg-gray-500",text:"text-white"};default:return{bg:"bg-gray-500",text:"text-white"}}}function pn({label:e,score:r,icon:s}){return n.jsxs("div",{className:"space-y-1",children:[n.jsxs("div",{className:"flex items-center justify-between text-sm",children:[n.jsxs("div",{className:"flex items-center gap-2 text-gray-300",children:[n.jsx(s,{className:"w-4 h-4"}),n.jsx("span",{children:e})]}),n.jsxs("span",{className:"font-mono text-gray-200",children:[r,"/100"]})]}),n.jsx("div",{className:"h-2 bg-gray-700 rounded-full overflow-hidden",children:n.jsx("div",{className:`h-full ${$g(r)} transition-all duration-300`,style:{width:`${r}%`}})})]})}function zg({vuln:e}){const r=Mg(e.severity);return n.jsx("div",{className:"bg-gray-800 rounded-lg p-3 border border-gray-700",children:n.jsxs("div",{className:"flex items-start gap-3",children:[n.jsx("span",{className:`px-2 py-0.5 text-xs font-medium rounded ${r.bg} ${r.text}`,children:e.severity}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{className:"font-medium text-gray-200",children:e.name}),e.cve&&n.jsx("span",{className:"text-xs text-cyan-400 font-mono",children:e.cve})]}),n.jsx("p",{className:"text-sm text-gray-400 mt-1",children:e.description})]})]})})}function Lg({grade:e,showDetails:r=!0,compact:s=!1,animate:a=!0}){const[i,o]=E.useState(!1),[l,c]=E.useState(!a),d=Tg(e.grade),u=Dg(e.grade),f=e.grade==="T"||e.grade==="M";return E.useEffect(()=>{if(a&&!l){const h=setTimeout(()=>c(!0),100);return()=>clearTimeout(h)}},[a,l]),s?n.jsx("div",{className:`inline-flex items-center justify-center w-8 h-8 rounded-lg font-bold text-sm
          ${d.bg} ${d.text} border ${d.border}
          ${l?"opacity-100 scale-100":"opacity-0 scale-75"}
          ${d.glow?`shadow-lg ${d.glow}`:""}
          transition-all duration-300 ease-out`,title:`SSL/TLS Grade: ${e.grade} - ${Lo(e.grade)} (Score: ${e.overall_score}/100)`,children:u?n.jsx(u,{className:"w-4 h-4"}):e.grade}):n.jsxs("div",{className:"bg-gray-800/50 rounded-lg border border-gray-700",children:[n.jsxs("div",{className:`flex items-center justify-between p-3 ${r?"cursor-pointer hover:bg-gray-800/80":""} transition-colors`,onClick:()=>r&&o(!i),children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:`flex items-center justify-center w-12 h-12 rounded-lg font-bold text-xl
              ${d.bg} ${d.text} border-2 ${d.border}
              ${l?"opacity-100 scale-100":"opacity-0 scale-75"}
              ${d.glow?`shadow-lg ${d.glow}`:""}
              transition-all duration-500 ease-out`,children:u?n.jsx(u,{className:"w-6 h-6"}):e.grade}),n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{className:"text-gray-200 font-medium",children:"SSL/TLS Grade"}),f&&n.jsx("span",{className:`text-xs px-2 py-0.5 rounded ${e.grade==="T"?"bg-purple-500/20 text-purple-400":"bg-fuchsia-500/20 text-fuchsia-400"}`,children:e.grade==="T"?"Trust Issue":"Hostname Mismatch"}),!f&&e.grade_capped&&n.jsx("span",{className:"text-xs bg-yellow-500/20 text-yellow-400 px-2 py-0.5 rounded",children:"Capped"})]}),n.jsx("div",{className:"text-sm text-gray-400",children:f?n.jsx("span",{children:Lo(e.grade)}):n.jsxs(n.Fragment,{children:["Overall Score: ",e.overall_score,"/100",e.vulnerabilities_found.length>0&&n.jsxs("span",{className:"ml-2 text-red-400",children:["(",e.vulnerabilities_found.length," issue",e.vulnerabilities_found.length!==1?"s":"",")"]})]})})]})]}),r&&n.jsx("button",{className:"text-gray-400 hover:text-gray-200 p-1 transition-colors",children:i?n.jsx(cr,{className:"w-5 h-5"}):n.jsx(ut,{className:"w-5 h-5"})})]}),r&&i&&n.jsxs("div",{className:"border-t border-gray-700 p-4 space-y-4",children:[e.grade_capped&&e.cap_reason&&n.jsxs("div",{className:"bg-yellow-500/10 border border-yellow-500/30 rounded-lg p-3 flex items-start gap-2",children:[n.jsx(Ne,{className:"w-5 h-5 text-yellow-500 flex-shrink-0 mt-0.5"}),n.jsxs("div",{children:[n.jsx("span",{className:"text-yellow-400 font-medium",children:"Grade Capped"}),n.jsx("p",{className:"text-sm text-yellow-300/80 mt-1",children:e.cap_reason})]})]}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs("h4",{className:"text-sm font-medium text-gray-300 flex items-center gap-2",children:[n.jsx(we,{className:"w-4 h-4"}),"Score Breakdown"]}),n.jsxs("div",{className:"grid gap-3",children:[n.jsx(pn,{label:"Protocol",score:e.protocol_score,icon:Xt}),n.jsx(pn,{label:"Cipher Suites",score:e.cipher_score,icon:lr}),n.jsx(pn,{label:"Certificate",score:e.certificate_score,icon:Ga}),n.jsx(pn,{label:"Key Exchange",score:e.key_exchange_score,icon:we})]})]}),e.vulnerabilities_found.length>0&&n.jsxs("div",{className:"space-y-3",children:[n.jsxs("h4",{className:"text-sm font-medium text-gray-300 flex items-center gap-2",children:[n.jsx(Ne,{className:"w-4 h-4 text-red-400"}),"Issues Found (",e.vulnerabilities_found.length,")"]}),n.jsx("div",{className:"space-y-2 max-h-64 overflow-y-auto",children:e.vulnerabilities_found.map((h,g)=>n.jsx(zg,{vuln:h},`${h.id}-${g}`))})]}),e.recommendations.length>0&&n.jsxs("div",{className:"space-y-3",children:[n.jsxs("h4",{className:"text-sm font-medium text-gray-300 flex items-center gap-2",children:[n.jsx(Ye,{className:"w-4 h-4 text-green-400"}),"Recommendations (",e.recommendations.length,")"]}),n.jsx("ul",{className:"space-y-2",children:e.recommendations.map((h,g)=>n.jsxs("li",{className:"flex items-start gap-2 text-sm text-gray-400",children:[n.jsx(ji,{className:"w-4 h-4 text-cyan-400 flex-shrink-0 mt-0.5"}),n.jsx("span",{children:h})]},g))})]}),e.vulnerabilities_found.length===0&&e.recommendations.length===0&&n.jsxs("div",{className:"bg-emerald-500/10 border border-emerald-500/30 rounded-lg p-3 flex items-center gap-2",children:[n.jsx(Ye,{className:"w-5 h-5 text-emerald-500"}),n.jsx("span",{className:"text-emerald-400",children:"Excellent! No security issues or recommendations found."})]})]})]})}function Fg(e){return e>=90?"text-emerald-400":e>=80?"text-green-400":e>=70?"text-lime-400":e>=60?"text-yellow-400":e>=50?"text-orange-400":"text-red-400"}function Ig(e){return e>=90?"bg-emerald-500":e>=80?"bg-green-500":e>=70?"bg-lime-500":e>=60?"bg-yellow-500":e>=50?"bg-orange-500":"bg-red-500"}function Hg(e){switch(e){case"A+":return{bg:"bg-emerald-500",text:"text-white",border:"border-emerald-600"};case"A":return{bg:"bg-green-500",text:"text-white",border:"border-green-600"};case"A-":return{bg:"bg-green-400",text:"text-white",border:"border-green-500"};case"B+":return{bg:"bg-lime-500",text:"text-white",border:"border-lime-600"};case"B":return{bg:"bg-yellow-500",text:"text-gray-900",border:"border-yellow-600"};case"B-":return{bg:"bg-yellow-400",text:"text-gray-900",border:"border-yellow-500"};case"C":return{bg:"bg-orange-500",text:"text-white",border:"border-orange-600"};case"D":return{bg:"bg-red-400",text:"text-white",border:"border-red-500"};case"F":return{bg:"bg-red-600",text:"text-white",border:"border-red-700"};case"T":return{bg:"bg-purple-600",text:"text-white",border:"border-purple-700"};case"M":return{bg:"bg-fuchsia-600",text:"text-white",border:"border-fuchsia-700"};default:return{bg:"bg-gray-500",text:"text-white",border:"border-gray-600"}}}function Ug(e){switch(e){case"Critical":return"bg-red-600 text-white";case"High":return"bg-orange-500 text-white";case"Medium":return"bg-yellow-500 text-gray-900";case"Low":return"bg-blue-500 text-white";case"Informational":return"bg-gray-500 text-white";default:return"bg-gray-500 text-white"}}function gn({label:e,score:r,icon:s,description:a}){return n.jsxs("div",{className:"bg-gray-800 rounded-lg p-4",children:[n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(s,{className:"w-5 h-5 text-gray-400"}),n.jsx("span",{className:"font-medium text-gray-200",children:e})]}),n.jsxs("span",{className:`font-bold text-lg ${Fg(r)}`,children:[r,"/100"]})]}),n.jsx("div",{className:"h-3 bg-gray-700 rounded-full overflow-hidden",children:n.jsx("div",{className:`h-full ${Ig(r)} transition-all duration-500`,style:{width:`${r}%`}})}),a&&n.jsx("p",{className:"text-xs text-gray-500 mt-2",children:a})]})}function qg({protocol:e,isWeak:r}){return n.jsxs("div",{className:`flex items-center gap-2 px-3 py-2 rounded-lg ${r?"bg-red-500/10 border border-red-500/30":"bg-green-500/10 border border-green-500/30"}`,children:[r?n.jsx(Tt,{className:"w-4 h-4 text-red-400"}):n.jsx(Ye,{className:"w-4 h-4 text-green-400"}),n.jsx("span",{className:r?"text-red-300":"text-green-300",children:e}),r&&n.jsx("span",{className:"text-xs text-red-400 ml-auto",children:"Weak"})]})}function Wg({cipher:e,isWeak:r}){return n.jsxs("div",{className:`flex items-center gap-2 px-3 py-1.5 rounded text-sm ${r?"bg-red-500/10 text-red-300":"bg-gray-700/50 text-gray-300"}`,children:[r&&n.jsx(Ne,{className:"w-3 h-3 text-red-400"}),n.jsx("span",{className:"font-mono text-xs truncate",children:e})]})}function Bg({sslInfo:e,hostname:r}){const s=e.ssl_grade;if(!s)return n.jsx("div",{className:"bg-gray-800/50 rounded-lg p-6 border border-gray-700",children:n.jsx("p",{className:"text-gray-400 text-center",children:"SSL grade information not available"})});const a=Hg(s.grade),i=s.grade==="T"||s.grade==="M";return n.jsxs("div",{className:"bg-gray-900 rounded-xl border border-gray-700 overflow-hidden",children:[n.jsx("div",{className:"bg-gradient-to-r from-gray-800 to-gray-900 p-6 border-b border-gray-700",children:n.jsxs("div",{className:"flex items-center gap-6",children:[n.jsx("div",{className:`flex items-center justify-center w-24 h-24 rounded-xl font-bold text-4xl shadow-xl ${a.bg} ${a.text} border-4 ${a.border}`,children:s.grade}),n.jsxs("div",{className:"flex-1",children:[n.jsxs("h2",{className:"text-xl font-bold text-white mb-2",children:["SSL/TLS Security Grade",r&&n.jsxs("span",{className:"text-gray-400 font-normal ml-2",children:["for ",r]})]}),i?n.jsxs("div",{className:`inline-flex items-center gap-2 px-3 py-1.5 rounded-lg ${s.grade==="T"?"bg-purple-500/20 text-purple-300":"bg-fuchsia-500/20 text-fuchsia-300"}`,children:[n.jsx(Ne,{className:"w-4 h-4"}),n.jsx("span",{children:s.grade==="T"?"Certificate not trusted (self-signed or untrusted CA)":"Certificate hostname mismatch"})]}):n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsxs("div",{className:"text-gray-400",children:[n.jsx("span",{className:"text-2xl font-bold text-white",children:s.overall_score}),n.jsx("span",{className:"text-gray-500",children:"/100"})]}),s.grade_capped&&s.cap_reason&&n.jsxs("div",{className:"flex items-center gap-2 text-yellow-400 text-sm",children:[n.jsx(Ne,{className:"w-4 h-4"}),n.jsx("span",{children:"Grade capped"})]})]})]})]})}),n.jsxs("div",{className:"p-6 space-y-6",children:[n.jsxs("div",{children:[n.jsxs("h3",{className:"text-lg font-semibold text-gray-200 mb-4 flex items-center gap-2",children:[n.jsx(we,{className:"w-5 h-5 text-cyan-400"}),"Score Breakdown"]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsx(gn,{label:"Protocol Support",score:s.protocol_score,icon:Xt,description:"TLS version support and configuration"}),n.jsx(gn,{label:"Cipher Strength",score:s.cipher_score,icon:lr,description:"Encryption algorithms and key sizes"}),n.jsx(gn,{label:"Certificate",score:s.certificate_score,icon:Ga,description:"Certificate validity and chain"}),n.jsx(gn,{label:"Key Exchange",score:s.key_exchange_score,icon:we,description:"Forward secrecy and key exchange methods"})]})]}),n.jsxs("div",{children:[n.jsxs("h3",{className:"text-lg font-semibold text-gray-200 mb-4 flex items-center gap-2",children:[n.jsx(Ga,{className:"w-5 h-5 text-cyan-400"}),"Certificate Details"]}),n.jsxs("div",{className:"bg-gray-800 rounded-lg p-4 space-y-3",children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("span",{className:"text-xs text-gray-500 uppercase tracking-wider",children:"Subject"}),n.jsx("p",{className:"text-gray-200 font-mono text-sm truncate",title:e.subject,children:e.subject})]}),n.jsxs("div",{children:[n.jsx("span",{className:"text-xs text-gray-500 uppercase tracking-wider",children:"Issuer"}),n.jsx("p",{className:"text-gray-200 font-mono text-sm truncate",title:e.issuer,children:e.issuer})]}),n.jsxs("div",{children:[n.jsx("span",{className:"text-xs text-gray-500 uppercase tracking-wider",children:"Valid From"}),n.jsx("p",{className:"text-gray-200",children:new Date(e.valid_from).toLocaleDateString()})]}),n.jsxs("div",{children:[n.jsx("span",{className:"text-xs text-gray-500 uppercase tracking-wider",children:"Valid Until"}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("p",{className:e.cert_expired?"text-red-400":"text-gray-200",children:new Date(e.valid_until).toLocaleDateString()}),e.days_until_expiry!==null&&n.jsx("span",{className:`text-xs px-2 py-0.5 rounded ${e.cert_expired?"bg-red-500/20 text-red-400":e.days_until_expiry<30?"bg-yellow-500/20 text-yellow-400":"bg-green-500/20 text-green-400"}`,children:e.cert_expired?`Expired ${Math.abs(e.days_until_expiry)} days ago`:`${e.days_until_expiry} days`})]})]})]}),n.jsxs("div",{className:"flex flex-wrap gap-2 pt-2 border-t border-gray-700",children:[e.self_signed&&n.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-purple-500/20 text-purple-400 text-xs rounded",children:[n.jsx(Ne,{className:"w-3 h-3"}),"Self-Signed"]}),e.hostname_mismatch&&n.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-fuchsia-500/20 text-fuchsia-400 text-xs rounded",children:[n.jsx(Tt,{className:"w-3 h-3"}),"Hostname Mismatch"]}),e.hsts_enabled?n.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-green-500/20 text-green-400 text-xs rounded",children:[n.jsx(Ye,{className:"w-3 h-3"}),"HSTS Enabled"]}):n.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-yellow-500/20 text-yellow-400 text-xs rounded",children:[n.jsx(Ne,{className:"w-3 h-3"}),"HSTS Not Enabled"]})]})]})]}),n.jsxs("div",{children:[n.jsxs("h3",{className:"text-lg font-semibold text-gray-200 mb-4 flex items-center gap-2",children:[n.jsx(Xt,{className:"w-5 h-5 text-cyan-400"}),"Protocol Support"]}),n.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-2",children:e.protocols.map(o=>n.jsx(qg,{protocol:o,isWeak:e.weak_protocols.includes(o)},o))})]}),e.cipher_suites.length>0&&n.jsxs("div",{children:[n.jsxs("h3",{className:"text-lg font-semibold text-gray-200 mb-4 flex items-center gap-2",children:[n.jsx(lr,{className:"w-5 h-5 text-cyan-400"}),"Cipher Suites",n.jsxs("span",{className:"text-sm font-normal text-gray-500",children:["(",e.cipher_suites.length,")"]})]}),n.jsx("div",{className:"bg-gray-800 rounded-lg p-4 max-h-48 overflow-y-auto",children:n.jsx("div",{className:"flex flex-wrap gap-2",children:e.cipher_suites.map(o=>n.jsx(Wg,{cipher:o,isWeak:e.weak_ciphers.includes(o)},o))})})]}),s.vulnerabilities_found.length>0&&n.jsxs("div",{children:[n.jsxs("h3",{className:"text-lg font-semibold text-gray-200 mb-4 flex items-center gap-2",children:[n.jsx(Ne,{className:"w-5 h-5 text-red-400"}),"Security Issues",n.jsxs("span",{className:"text-sm font-normal text-red-400",children:["(",s.vulnerabilities_found.length,")"]})]}),n.jsx("div",{className:"space-y-3",children:s.vulnerabilities_found.map((o,l)=>n.jsx("div",{className:"bg-gray-800 rounded-lg p-4 border border-gray-700",children:n.jsxs("div",{className:"flex items-start gap-3",children:[n.jsx("span",{className:`px-2 py-0.5 text-xs font-medium rounded flex-shrink-0 ${Ug(o.severity)}`,children:o.severity}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[n.jsx("span",{className:"font-medium text-gray-200",children:o.name}),o.cve&&n.jsxs("a",{href:`https://nvd.nist.gov/vuln/detail/${o.cve}`,target:"_blank",rel:"noopener noreferrer",className:"text-xs text-cyan-400 font-mono hover:underline flex items-center gap-1",children:[o.cve,n.jsx(Sc,{className:"w-3 h-3"})]})]}),n.jsx("p",{className:"text-sm text-gray-400 mt-1",children:o.description})]})]})},`${o.id}-${l}`))})]}),s.recommendations.length>0&&n.jsxs("div",{children:[n.jsxs("h3",{className:"text-lg font-semibold text-gray-200 mb-4 flex items-center gap-2",children:[n.jsx(Ye,{className:"w-5 h-5 text-green-400"}),"Recommendations"]}),n.jsx("div",{className:"bg-gray-800 rounded-lg p-4 space-y-2",children:s.recommendations.map((o,l)=>n.jsxs("div",{className:"flex items-start gap-3 text-sm",children:[n.jsx(ji,{className:"w-4 h-4 text-cyan-400 flex-shrink-0 mt-0.5"}),n.jsx("span",{className:"text-gray-300",children:o})]},l))})]}),e.chain_issues.length>0&&n.jsxs("div",{children:[n.jsxs("h3",{className:"text-lg font-semibold text-gray-200 mb-4 flex items-center gap-2",children:[n.jsx(jt,{className:"w-5 h-5 text-yellow-400"}),"Certificate Chain Issues"]}),n.jsx("div",{className:"bg-yellow-500/10 border border-yellow-500/30 rounded-lg p-4 space-y-2",children:e.chain_issues.map((o,l)=>n.jsxs("div",{className:"flex items-start gap-2 text-sm text-yellow-300",children:[n.jsx(Ne,{className:"w-4 h-4 flex-shrink-0 mt-0.5"}),n.jsx("span",{children:o})]},l))})]}),s.vulnerabilities_found.length===0&&s.recommendations.length===0&&e.chain_issues.length===0&&n.jsxs("div",{className:"bg-emerald-500/10 border border-emerald-500/30 rounded-lg p-6 flex items-center justify-center gap-3",children:[n.jsx(Ye,{className:"w-6 h-6 text-emerald-400"}),n.jsx("span",{className:"text-emerald-300 text-lg",children:"Excellent! SSL/TLS configuration meets best practices."})]})]})]})}const Vg=({sslInfo:e,port:r,hostname:s})=>{const[a,i]=E.useState(!1),l=e.cert_expired||e.hostname_mismatch?"critical":e.weak_protocols.length>0||e.weak_ciphers.length>0||e.self_signed?"warning":!e.hsts_enabled&&r===443?"info":"good",c=()=>e.cert_expired?"text-red-400":e.days_until_expiry?e.days_until_expiry<30?"text-yellow-400":e.days_until_expiry<90?"text-blue-400":"text-green-400":"text-slate-400";return a?n.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/80",children:n.jsxs("div",{className:"relative w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:[n.jsx("button",{onClick:()=>i(!1),className:"absolute top-4 right-4 z-10 p-2 bg-gray-800 hover:bg-gray-700 rounded-lg text-gray-400 hover:text-white transition-colors",children:n.jsx(Tt,{className:"w-6 h-6"})}),n.jsx(Bg,{sslInfo:e,hostname:s})]})}):n.jsxs("div",{className:"mt-3 space-y-3 border-t border-dark-border pt-3",children:[e.ssl_grade&&n.jsxs("div",{className:"relative",children:[n.jsx(Lg,{grade:e.ssl_grade,showDetails:!0,animate:!0}),n.jsx("button",{onClick:()=>i(!0),className:"absolute top-3 right-12 p-1.5 text-gray-400 hover:text-cyan-400 hover:bg-gray-700/50 rounded transition-colors",title:"View detailed SSL/TLS breakdown",children:n.jsx(kc,{className:"w-4 h-4"})})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Xt,{className:"h-4 w-4 text-primary"}),n.jsx("span",{className:"text-sm font-semibold text-white",children:"SSL/TLS Certificate"}),!e.ssl_grade&&n.jsxs(n.Fragment,{children:[l==="critical"&&n.jsx(st,{variant:"severity",type:"critical",children:"Critical Issues"}),l==="warning"&&n.jsx(st,{variant:"severity",type:"high",children:"Security Issues"}),l==="good"&&n.jsx(st,{variant:"severity",type:"low",children:"Secure"})]})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-3 text-xs",children:[n.jsxs("div",{className:"bg-dark-bg rounded p-2",children:[n.jsxs("div",{className:"flex items-center gap-1 mb-1",children:[e.cert_valid&&!e.cert_expired?n.jsx(Ye,{className:"h-3 w-3 text-green-500"}):n.jsx(Tt,{className:"h-3 w-3 text-red-500"}),n.jsx("span",{className:"font-medium text-slate-300",children:"Certificate Status"})]}),n.jsx("div",{className:e.cert_expired?"text-red-400":"text-green-400",children:e.cert_expired?"Expired":"Valid"})]}),n.jsxs("div",{className:"bg-dark-bg rounded p-2",children:[n.jsxs("div",{className:"flex items-center gap-1 mb-1",children:[n.jsx(vt,{className:"h-3 w-3 text-slate-400"}),n.jsx("span",{className:"font-medium text-slate-300",children:"Expires In"})]}),n.jsx("div",{className:c(),children:e.days_until_expiry!==null?e.cert_expired?`${Math.abs(e.days_until_expiry)} days ago`:`${e.days_until_expiry} days`:"Unknown"})]}),n.jsxs("div",{className:"bg-dark-bg rounded p-2 col-span-2",children:[n.jsxs("div",{className:"flex items-center gap-1 mb-1",children:[n.jsx(jt,{className:"h-3 w-3 text-slate-400"}),n.jsx("span",{className:"font-medium text-slate-300",children:"Subject"})]}),n.jsx("div",{className:"text-slate-400 truncate",title:e.subject,children:e.subject})]}),n.jsxs("div",{className:"bg-dark-bg rounded p-2 col-span-2",children:[n.jsxs("div",{className:"flex items-center gap-1 mb-1",children:[n.jsx(we,{className:"h-3 w-3 text-slate-400"}),n.jsx("span",{className:"font-medium text-slate-300",children:"Issuer"})]}),n.jsx("div",{className:"text-slate-400 truncate",title:e.issuer,children:e.issuer})]}),n.jsxs("div",{className:"bg-dark-bg rounded p-2",children:[n.jsx("span",{className:"font-medium text-slate-300",children:"Valid From"}),n.jsx("div",{className:"text-slate-400 text-[10px] mt-1",children:new Date(e.valid_from).toLocaleDateString()})]}),n.jsxs("div",{className:"bg-dark-bg rounded p-2",children:[n.jsx("span",{className:"font-medium text-slate-300",children:"Valid Until"}),n.jsx("div",{className:"text-slate-400 text-[10px] mt-1",children:new Date(e.valid_until).toLocaleDateString()})]})]}),(e.self_signed||e.hostname_mismatch||e.weak_protocols.length>0||e.weak_ciphers.length>0||!e.hsts_enabled||e.chain_issues.length>0)&&n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex items-center gap-1 text-sm font-medium text-yellow-400",children:[n.jsx(Ne,{className:"h-4 w-4"}),"Security Findings"]}),e.self_signed&&n.jsxs("div",{className:"bg-yellow-500/10 border border-yellow-500/20 rounded p-2 text-xs",children:[n.jsx("div",{className:"text-yellow-400 font-medium",children:"Self-Signed Certificate"}),n.jsx("div",{className:"text-slate-400 mt-1",children:"Certificate is not from a trusted Certificate Authority"})]}),e.hostname_mismatch&&n.jsxs("div",{className:"bg-red-500/10 border border-red-500/20 rounded p-2 text-xs",children:[n.jsx("div",{className:"text-red-400 font-medium",children:"Hostname Mismatch"}),n.jsx("div",{className:"text-slate-400 mt-1",children:"Certificate does not match the hostname"})]}),e.weak_protocols.length>0&&n.jsxs("div",{className:"bg-red-500/10 border border-red-500/20 rounded p-2 text-xs",children:[n.jsx("div",{className:"text-red-400 font-medium",children:"Weak Protocols"}),n.jsx("div",{className:"text-slate-400 mt-1",children:e.weak_protocols.join(", ")})]}),e.weak_ciphers.length>0&&n.jsxs("div",{className:"bg-yellow-500/10 border border-yellow-500/20 rounded p-2 text-xs",children:[n.jsx("div",{className:"text-yellow-400 font-medium",children:"Weak Ciphers"}),n.jsx("div",{className:"text-slate-400 mt-1 max-h-16 overflow-y-auto",children:e.weak_ciphers.join(", ")})]}),!e.hsts_enabled&&r===443&&n.jsxs("div",{className:"bg-blue-500/10 border border-blue-500/20 rounded p-2 text-xs",children:[n.jsx("div",{className:"text-blue-400 font-medium",children:"HSTS Not Enabled"}),n.jsx("div",{className:"text-slate-400 mt-1",children:"HTTP Strict Transport Security header not detected"})]}),e.chain_issues.length>0&&n.jsxs("div",{className:"bg-yellow-500/10 border border-yellow-500/20 rounded p-2 text-xs",children:[n.jsx("div",{className:"text-yellow-400 font-medium",children:"Certificate Chain Issues"}),n.jsx("div",{className:"text-slate-400 mt-1",children:e.chain_issues.join(", ")})]})]}),e.protocols.length>0&&n.jsxs("div",{className:"bg-dark-bg rounded p-2",children:[n.jsx("div",{className:"text-xs font-medium text-slate-300 mb-1",children:"Supported Protocols"}),n.jsx("div",{className:"flex flex-wrap gap-1",children:e.protocols.map(d=>n.jsx("span",{className:`px-2 py-0.5 rounded text-[10px] ${e.weak_protocols.includes(d)?"bg-red-500/20 text-red-400":"bg-green-500/20 text-green-400"}`,children:d},d))})]}),e.hsts_enabled&&n.jsxs("div",{className:"bg-dark-bg rounded p-2",children:[n.jsx("div",{className:"text-xs font-medium text-slate-300 mb-1",children:"HSTS"}),n.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[n.jsx(Ye,{className:"h-3 w-3 text-green-500"}),n.jsx("span",{className:"text-green-400",children:"Enabled"}),e.hsts_max_age&&n.jsxs("span",{className:"text-slate-400",children:["(max-age: ",e.hsts_max_age.toLocaleString(),"s)"]})]})]})]})},Gg=({hosts:e,scanName:r="scan",scanId:s,disabled:a=!1})=>{const[i,o]=E.useState(!1),[l,c]=E.useState(!1),d=()=>{const j={scan:r,exportedAt:new Date().toISOString(),totalHosts:e.length,hosts:e.map(_=>({ip:_.target.ip,hostname:_.target.hostname,isAlive:_.is_alive,osGuess:_.os_guess,ports:_.ports.map(b=>({port:b.port,protocol:b.protocol,state:b.state,service:b.service})),vulnerabilities:_.vulnerabilities}))};g(JSON.stringify(j,null,2),`${r}_${ar(new Date,"yyyy-MM-dd_HHmmss")}.json`,"application/json"),X.success("Exported as JSON")},u=()=>{let j=`IP,Hostname,Alive,OS,Ports,Vulnerabilities,Critical,High,Medium,Low
`;e.forEach(_=>{var m;const b=_.ports.filter(y=>y.state==="Open").map(y=>y.port).join(";"),p={Critical:_.vulnerabilities.filter(y=>y.severity==="Critical").length,High:_.vulnerabilities.filter(y=>y.severity==="High").length,Medium:_.vulnerabilities.filter(y=>y.severity==="Medium").length,Low:_.vulnerabilities.filter(y=>y.severity==="Low").length};j+=`"${_.target.ip}",`,j+=`"${_.target.hostname||""}",`,j+=`${_.is_alive},`,j+=`"${((m=_.os_guess)==null?void 0:m.os_family)||""}",`,j+=`"${b}",`,j+=`${_.vulnerabilities.length},`,j+=`${p.Critical},`,j+=`${p.High},`,j+=`${p.Medium},`,j+=`${p.Low}
`}),g(j,`${r}_${ar(new Date,"yyyy-MM-dd_HHmmss")}.csv`,"text/csv"),X.success("Exported as CSV")},f=()=>{const j=`<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>HeroForge Scan Report - ${r}</title>
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
      background: #0f172a;
      color: #e2e8f0;
      padding: 2rem;
    }
    .container { max-width: 1200px; margin: 0 auto; }
    h1 { color: #3b82f6; margin-bottom: 0.5rem; }
    .meta { color: #94a3b8; margin-bottom: 2rem; }
    .summary {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 1rem;
      margin-bottom: 2rem;
    }
    .card {
      background: #1e293b;
      border: 1px solid #334155;
      border-radius: 8px;
      padding: 1.5rem;
    }
    .card h3 { color: #cbd5e1; font-size: 0.875rem; margin-bottom: 0.5rem; }
    .card .value { font-size: 2rem; font-weight: bold; }
    .host {
      background: #1e293b;
      border: 1px solid #334155;
      border-radius: 8px;
      padding: 1.5rem;
      margin-bottom: 1rem;
    }
    .host-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 1rem;
      padding-bottom: 1rem;
      border-bottom: 1px solid #334155;
    }
    .host-ip { font-family: monospace; font-size: 1.25rem; color: #3b82f6; }
    .badge {
      display: inline-block;
      padding: 0.25rem 0.75rem;
      border-radius: 4px;
      font-size: 0.75rem;
      font-weight: 600;
    }
    .badge-critical { background: rgba(239, 68, 68, 0.2); color: #ef4444; }
    .badge-high { background: rgba(249, 115, 22, 0.2); color: #f97316; }
    .badge-medium { background: rgba(234, 179, 8, 0.2); color: #eab308; }
    .badge-low { background: rgba(59, 130, 246, 0.2); color: #3b82f6; }
    .section { margin-top: 1rem; }
    .section h4 { color: #cbd5e1; margin-bottom: 0.5rem; font-size: 0.875rem; }
    .ports { display: grid; grid-template-columns: repeat(auto-fill, minmax(150px, 1fr)); gap: 0.5rem; }
    .port {
      background: #0f172a;
      padding: 0.5rem;
      border-radius: 4px;
      font-family: monospace;
      font-size: 0.875rem;
    }
    .vuln {
      background: rgba(239, 68, 68, 0.1);
      border-left: 4px solid #ef4444;
      padding: 1rem;
      margin-bottom: 0.5rem;
      border-radius: 4px;
    }
    .vuln-title { color: #fff; font-weight: 600; margin-bottom: 0.25rem; }
    .vuln-cve { color: #3b82f6; font-family: monospace; font-size: 0.875rem; }
    @media print {
      body { background: white; color: black; }
      .card, .host { border-color: #ccc; }
    }
  </style>
</head>
<body>
  <div class="container">
    <h1> HeroForge Scan Report</h1>
    <p class="meta">
      Scan: ${r} |
      Generated: ${ar(new Date,"PPpp")} |
      Hosts: ${e.length}
    </p>

    <div class="summary">
      <div class="card">
        <h3>Total Hosts</h3>
        <div class="value" style="color: #3b82f6;">${e.length}</div>
      </div>
      <div class="card">
        <h3>Open Ports</h3>
        <div class="value" style="color: #22c55e;">
          ${e.reduce((_,b)=>_+b.ports.filter(p=>p.state==="Open").length,0)}
        </div>
      </div>
      <div class="card">
        <h3>Total Vulnerabilities</h3>
        <div class="value" style="color: #eab308;">
          ${e.reduce((_,b)=>_+b.vulnerabilities.length,0)}
        </div>
      </div>
      <div class="card">
        <h3>Critical Findings</h3>
        <div class="value" style="color: #ef4444;">
          ${e.reduce((_,b)=>_+b.vulnerabilities.filter(p=>p.severity==="Critical").length,0)}
        </div>
      </div>
    </div>

    <h2 style="color: #cbd5e1; margin-bottom: 1rem;">Discovered Hosts</h2>
    ${e.map(_=>`
      <div class="host">
        <div class="host-header">
          <div>
            <div class="host-ip">${_.target.ip}</div>
            ${_.target.hostname?`<div style="color: #94a3b8; font-size: 0.875rem;">${_.target.hostname}</div>`:""}
          </div>
          <div>
            ${_.vulnerabilities.length>0?`<span class="badge badge-critical">${_.vulnerabilities.length} vulnerabilities</span>`:""}
          </div>
        </div>

        ${_.os_guess?`
          <div class="section">
            <h4>OS Detection</h4>
            <p style="color: #94a3b8; font-size: 0.875rem;">
              ${_.os_guess.os_family} ${_.os_guess.os_version||""} (${_.os_guess.confidence}% confidence)
            </p>
          </div>
        `:""}

        ${_.ports.filter(b=>b.state==="Open").length>0?`
          <div class="section">
            <h4>Open Ports (${_.ports.filter(b=>b.state==="Open").length})</h4>
            <div class="ports">
              ${_.ports.filter(b=>b.state==="Open").map(b=>`
                <div class="port">
                  <strong>${b.port}/${b.protocol}</strong><br>
                  ${b.service?`<span style="color: #94a3b8;">${b.service.name} ${b.service.version||""}</span>`:""}
                </div>
              `).join("")}
            </div>
          </div>
        `:""}

        ${_.vulnerabilities.length>0?`
          <div class="section">
            <h4>Vulnerabilities (${_.vulnerabilities.length})</h4>
            ${_.vulnerabilities.map(b=>`
              <div class="vuln">
                <div class="vuln-title">${b.title}</div>
                ${b.cve_id?`<div class="vuln-cve">${b.cve_id}</div>`:""}
                <span class="badge badge-${b.severity.toLowerCase()}">${b.severity}</span>
              </div>
            `).join("")}
          </div>
        `:""}
      </div>
    `).join("")}

    <footer style="margin-top: 2rem; padding-top: 2rem; border-top: 1px solid #334155; text-align: center; color: #64748b;">
      <p>Generated by HeroForge - Network Reconnaissance Tool</p>
      <p style="font-size: 0.875rem;">For authorized security testing only</p>
    </footer>
  </div>
</body>
</html>`;g(j,`${r}_${ar(new Date,"yyyy-MM-dd_HHmmss")}.html`,"text/html"),X.success("Exported as HTML report")},h=async()=>{if(!s){X.error("Scan ID required for Markdown export");return}c(!0);try{const j=localStorage.getItem("token"),_=await Te.get(`/api/scans/${s}/export/markdown`,{headers:{Authorization:`Bearer ${j}`},responseType:"blob"}),b=_.headers["content-disposition"];let p=`${r}_${ar(new Date,"yyyy-MM-dd_HHmmss")}.md`;if(b){const x=b.match(/filename="?([^";\n]+)"?/);x&&(p=x[1])}const m=window.URL.createObjectURL(new Blob([_.data])),y=document.createElement("a");y.href=m,y.setAttribute("download",p),document.body.appendChild(y),y.click(),y.remove(),window.URL.revokeObjectURL(m),X.success("Exported as Markdown")}catch(j){console.error("Markdown export failed:",j),X.error("Failed to export as Markdown")}finally{c(!1)}},g=(j,_,b)=>{const p=new Blob([j],{type:b}),m=URL.createObjectURL(p),y=document.createElement("a");y.href=m,y.download=_,document.body.appendChild(y),y.click(),document.body.removeChild(y),URL.revokeObjectURL(m)},v=j=>{if(o(!1),e.length===0){X.error("No results to export");return}switch(j){case"json":d();break;case"csv":u();break;case"html":f();break;case"markdown":h();break}};return n.jsxs("div",{className:"relative",children:[n.jsxs(Re,{onClick:()=>o(!i),disabled:a||e.length===0,variant:"secondary",children:[n.jsx(Fr,{className:"h-4 w-4 mr-2"}),"Export Results"]}),i&&n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"fixed inset-0 z-10",onClick:()=>o(!1)}),n.jsx("div",{className:"absolute right-0 mt-2 w-56 bg-dark-surface border border-dark-border rounded-lg shadow-xl z-20 overflow-hidden",children:n.jsxs("div",{className:"p-2",children:[n.jsxs("button",{onClick:()=>v("json"),className:"w-full flex items-center gap-3 px-3 py-2 text-sm text-slate-300 hover:bg-dark-hover rounded transition-colors",children:[n.jsx(xh,{className:"h-4 w-4 text-blue-400"}),n.jsxs("div",{className:"text-left",children:[n.jsx("div",{className:"font-medium",children:"JSON"}),n.jsx("div",{className:"text-xs text-slate-500",children:"Full data export"})]})]}),n.jsxs("button",{onClick:()=>v("csv"),className:"w-full flex items-center gap-3 px-3 py-2 text-sm text-slate-300 hover:bg-dark-hover rounded transition-colors",children:[n.jsx(Je,{className:"h-4 w-4 text-green-400"}),n.jsxs("div",{className:"text-left",children:[n.jsx("div",{className:"font-medium",children:"CSV"}),n.jsx("div",{className:"text-xs text-slate-500",children:"Spreadsheet format"})]})]}),n.jsxs("button",{onClick:()=>v("html"),className:"w-full flex items-center gap-3 px-3 py-2 text-sm text-slate-300 hover:bg-dark-hover rounded transition-colors",children:[n.jsx(wi,{className:"h-4 w-4 text-purple-400"}),n.jsxs("div",{className:"text-left",children:[n.jsx("div",{className:"font-medium",children:"HTML"}),n.jsx("div",{className:"text-xs text-slate-500",children:"Printable report"})]})]}),n.jsxs("button",{onClick:()=>v("markdown"),disabled:!s||l,className:"w-full flex items-center gap-3 px-3 py-2 text-sm text-slate-300 hover:bg-dark-hover rounded transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[n.jsx(yh,{className:"h-4 w-4 text-cyan-400"}),n.jsxs("div",{className:"text-left",children:[n.jsx("div",{className:"font-medium",children:"Markdown"}),n.jsx("div",{className:"text-xs text-slate-500",children:"GitHub-flavored MD"})]})]})]})})]})]})},Yg={tableOfContents:"Table of Contents",executiveSummary:"Executive Summary",riskOverview:"Risk Overview",hostInventory:"Host Inventory",portAnalysis:"Port Analysis",vulnerabilityFindings:"Vulnerability Findings",serviceEnumeration:"Service Enumeration",remediationRecommendations:"Remediation Recommendations",appendix:"Appendix"},Xg=({scanId:e,scanName:r,onClose:s,onReportCreated:a})=>{const[i,o]=E.useState([]),[l,c]=E.useState(!0),[d,u]=E.useState(!1),[f,h]=E.useState(!1),[g,v]=E.useState(`${r} Report`),[j,_]=E.useState(""),[b,p]=E.useState("pdf"),[m,y]=E.useState("technical"),[x,w]=E.useState([]),[S,k]=E.useState({include_charts:!0,company_name:"",assessor_name:"",classification:"Confidential"});E.useEffect(()=>{C()},[]),E.useEffect(()=>{const T=i.find(M=>M.id===m);T&&w(T.default_sections)},[m,i]);const C=async()=>{try{const T=await Es.getTemplates();o(T.data);const M=T.data.find(A=>A.id==="technical");M&&w(M.default_sections)}catch{X.error("Failed to load report templates")}finally{c(!1)}},R=T=>{w(M=>M.includes(T)?M.filter(A=>A!==T):[...M,T])},O=async()=>{var T,M;if(!g.trim()){X.error("Please enter a report name");return}if(x.length===0){X.error("Please select at least one section");return}u(!0);try{const A={scan_id:e,name:g.trim(),description:j.trim()||void 0,format:b,template_id:m,sections:x,options:S};await Es.create(A),X.success("Report generation started"),a==null||a(),s()}catch(A){const D=((M=(T=A.response)==null?void 0:T.data)==null?void 0:M.error)||"Failed to create report";X.error(D)}finally{u(!1)}},P=i.find(T=>T.id===m);return l?n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:n.jsx(le,{className:"w-full max-w-2xl mx-4",children:n.jsx("div",{className:"flex items-center justify-center py-12",children:n.jsx(At,{})})})}):n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4 overflow-y-auto",children:n.jsxs(le,{className:"w-full max-w-2xl my-8",children:[n.jsxs("div",{className:"flex items-center justify-between mb-6",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(Je,{className:"h-6 w-6 text-primary"}),n.jsx("h2",{className:"text-xl font-semibold text-white",children:"Generate Report"})]}),n.jsx("button",{onClick:s,className:"p-2 hover:bg-dark-surface rounded-lg transition-colors",children:n.jsx(bt,{className:"h-5 w-5 text-slate-400"})})]}),n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Report Name"}),n.jsx(Ue,{type:"text",value:g,onChange:T=>v(T.target.value),placeholder:"Enter report name"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Description (optional)"}),n.jsx("textarea",{value:j,onChange:T=>_(T.target.value),placeholder:"Brief description of the report",className:"w-full bg-dark-surface border border-dark-border rounded-lg px-4 py-3 text-white placeholder-slate-500 focus:ring-2 focus:ring-primary focus:border-transparent resize-none",rows:2})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Report Template"}),n.jsx("div",{className:"grid grid-cols-3 gap-3",children:i.map(T=>n.jsxs("button",{onClick:()=>y(T.id),className:`p-4 rounded-lg border text-left transition-all ${m===T.id?"border-primary bg-primary/10":"border-dark-border hover:border-primary/50"}`,children:[n.jsx("p",{className:"font-medium text-white",children:T.name}),n.jsx("p",{className:"text-xs text-slate-400 mt-1",children:T.description})]},T.id))})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Output Format"}),n.jsx("div",{className:"flex gap-3",children:P==null?void 0:P.supports_formats.map(T=>n.jsxs("button",{onClick:()=>p(T),className:`px-6 py-3 rounded-lg border font-medium transition-all flex items-center gap-2 ${b===T?"border-primary bg-primary/10 text-primary":"border-dark-border text-slate-400 hover:border-primary/50"}`,children:[n.jsx(Fr,{className:"h-4 w-4"}),T.toUpperCase()]},T))})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Included Sections"}),n.jsx("div",{className:"grid grid-cols-2 gap-2",children:Object.entries(Yg).map(([T,M])=>n.jsxs("label",{className:`flex items-center gap-3 p-3 rounded-lg border cursor-pointer transition-all ${x.includes(M)?"border-primary bg-primary/10":"border-dark-border hover:border-primary/50"}`,children:[n.jsx("input",{type:"checkbox",checked:x.includes(M),onChange:()=>R(M),className:"w-4 h-4 rounded border-dark-border text-primary focus:ring-primary"}),n.jsx("span",{className:"text-sm text-white",children:M})]},T))})]}),n.jsxs("button",{onClick:()=>h(!f),className:"flex items-center gap-2 text-sm text-slate-400 hover:text-white transition-colors",children:[n.jsx($s,{className:"h-4 w-4"}),f?"Hide":"Show"," Advanced Options"]}),f&&n.jsxs("div",{className:"space-y-4 p-4 bg-dark-surface rounded-lg border border-dark-border",children:[n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Company Name"}),n.jsx(Ue,{type:"text",value:S.company_name||"",onChange:T=>k({...S,company_name:T.target.value}),placeholder:"Your Company"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Assessor Name"}),n.jsx(Ue,{type:"text",value:S.assessor_name||"",onChange:T=>k({...S,assessor_name:T.target.value}),placeholder:"Security Analyst"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Classification"}),n.jsxs("select",{value:S.classification||"",onChange:T=>k({...S,classification:T.target.value}),className:"w-full bg-dark-bg border border-dark-border rounded-lg px-4 py-3 text-white focus:ring-2 focus:ring-primary focus:border-transparent",children:[n.jsx("option",{value:"",children:"None"}),n.jsx("option",{value:"Public",children:"Public"}),n.jsx("option",{value:"Internal",children:"Internal"}),n.jsx("option",{value:"Confidential",children:"Confidential"}),n.jsx("option",{value:"Restricted",children:"Restricted"})]})]}),n.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[n.jsx("input",{type:"checkbox",checked:S.include_charts,onChange:T=>k({...S,include_charts:T.target.checked}),className:"w-4 h-4 rounded border-dark-border text-primary focus:ring-primary"}),n.jsx("span",{className:"text-sm text-white",children:"Include visual charts"})]})]}),n.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-dark-border",children:[n.jsx(Re,{variant:"ghost",onClick:s,children:"Cancel"}),n.jsx(Re,{onClick:O,disabled:d,children:d?n.jsxs(n.Fragment,{children:[n.jsx(At,{size:"sm",className:"mr-2"}),"Generating..."]}):n.jsxs(n.Fragment,{children:[n.jsx(Je,{className:"h-4 w-4 mr-2"}),"Generate Report"]})})]})]})]})})},Kg=({isOpen:e,onClose:r,onConfirm:s,title:a,message:i,confirmLabel:o="Confirm",cancelLabel:l="Cancel",variant:c="danger",itemCount:d,loading:u=!1})=>{const f=E.useRef(null),h=E.useRef(null);if(E.useEffect(()=>{var _;if(e){h.current=document.activeElement,(_=f.current)==null||_.focus();const b=p=>{var m;if(p.key==="Escape"&&r(),p.key==="Tab"){const y=(m=f.current)==null?void 0:m.querySelectorAll('button:not([disabled]), [tabindex]:not([tabindex="-1"])');if(y&&y.length>0){const x=y[0],w=y[y.length-1];p.shiftKey&&document.activeElement===x?(p.preventDefault(),w.focus()):!p.shiftKey&&document.activeElement===w&&(p.preventDefault(),x.focus())}}};return document.addEventListener("keydown",b),document.body.style.overflow="hidden",()=>{document.removeEventListener("keydown",b),document.body.style.overflow="",h.current instanceof HTMLElement&&h.current.focus()}}},[e,r]),!e)return null;const g={danger:n.jsx(aa,{className:"h-6 w-6 text-red-400"}),warning:n.jsx(Ne,{className:"h-6 w-6 text-yellow-400"}),info:n.jsx(ji,{className:"h-6 w-6 text-blue-400"})},v={danger:"danger",warning:"primary",info:"primary"},j={danger:"bg-red-500/10",warning:"bg-yellow-500/10",info:"bg-blue-500/10"};return n.jsx("div",{className:"fixed inset-0 bg-black/60 flex items-center justify-center z-[100]",onClick:_=>{_.target===_.currentTarget&&r()},role:"presentation",children:n.jsxs("div",{ref:f,role:"alertdialog","aria-modal":"true","aria-labelledby":"dialog-title","aria-describedby":"dialog-description",tabIndex:-1,className:"bg-dark-card border border-dark-border rounded-xl p-6 max-w-md w-full mx-4 shadow-2xl animate-scale-in focus:outline-none",children:[n.jsxs("div",{className:"flex items-start gap-4",children:[n.jsx("div",{className:`p-3 rounded-full ${j[c]}`,children:g[c]}),n.jsxs("div",{className:"flex-1",children:[n.jsx("h3",{id:"dialog-title",className:"text-lg font-semibold text-white",children:a}),n.jsx("p",{id:"dialog-description",className:"text-slate-400 mt-2",children:i}),d!==void 0&&d>0&&n.jsxs("p",{className:"text-sm text-slate-500 mt-2",children:["This will affect ",n.jsx("span",{className:"font-medium text-slate-300",children:d})," item",d!==1?"s":"","."]}),c==="danger"&&n.jsxs("p",{className:"text-sm text-red-400/80 mt-2 flex items-center gap-1",children:[n.jsx(Ne,{className:"h-3.5 w-3.5"}),"This action cannot be undone."]})]}),n.jsx("button",{onClick:r,disabled:u,className:"text-slate-500 hover:text-slate-300 transition-colors p-1 rounded hover:bg-dark-hover disabled:opacity-50","aria-label":"Close dialog",children:n.jsx(bt,{className:"h-5 w-5"})})]}),n.jsxs("div",{className:"flex justify-end gap-3 mt-6 pt-4 border-t border-dark-border",children:[n.jsx(Re,{variant:"secondary",onClick:r,disabled:u,children:l}),n.jsx(Re,{variant:v[c],onClick:s,loading:u,children:o})]})]})})},Jg=({scanId:e,onGenerateNew:r})=>{const[s,a]=E.useState([]),[i,o]=E.useState(!0),[l,c]=E.useState(null),[d,u]=E.useState(null),[f,h]=E.useState(null);E.useEffect(()=>{g();const m=setInterval(()=>{s.filter(x=>x.status==="pending"||x.status==="generating").length>0&&g()},5e3);return()=>clearInterval(m)},[e]);const g=async()=>{try{const m=await Es.getAll(e);a(m.data)}catch{X.error("Failed to load reports")}finally{o(!1)}},v=async m=>{if(m.status!=="completed"){X.warning("Report is not ready for download");return}c(m.id);try{const y=await Es.download(m.id),x=new Blob([y.data],{type:y.headers["content-type"]}),w=window.URL.createObjectURL(x),S=document.createElement("a");S.href=w,S.download=`${m.name.replace(/\s+/g,"_")}.${m.format}`,document.body.appendChild(S),S.click(),window.URL.revokeObjectURL(w),document.body.removeChild(S),X.success("Report downloaded")}catch{X.error("Failed to download report")}finally{c(null)}},j=async()=>{if(f){u(f.id);try{await Es.delete(f.id),a(m=>m.filter(y=>y.id!==f.id)),X.success(`Report "${f.name}" deleted`),h(null)}catch{X.error("Failed to delete report")}finally{u(null)}}},_=m=>{switch(m){case"completed":return n.jsx(Ye,{className:"h-4 w-4 text-green-500"});case"failed":return n.jsx(Tt,{className:"h-4 w-4 text-red-500"});case"generating":return n.jsx(rt,{className:"h-4 w-4 text-blue-500 animate-spin"});default:return n.jsx(vt,{className:"h-4 w-4 text-slate-400"})}},b=m=>{switch(m){case"completed":return"completed";case"generating":return"running";case"failed":return"failed";default:return"pending"}},p=m=>m?m<1024?`${m} B`:m<1024*1024?`${(m/1024).toFixed(1)} KB`:`${(m/(1024*1024)).toFixed(1)} MB`:"-";return i?n.jsx(le,{children:n.jsx("div",{className:"flex items-center justify-center py-12",children:n.jsx(At,{})})}):s.length===0?n.jsx(le,{children:n.jsxs("div",{className:"text-center py-12",children:[n.jsx(Je,{className:"h-12 w-12 mx-auto mb-4 text-slate-500"}),n.jsx("h3",{className:"text-lg font-medium text-white mb-2",children:"No Reports Yet"}),n.jsx("p",{className:"text-slate-400 mb-4",children:"Generate a professional report from your scan results."}),r&&n.jsxs(Re,{onClick:r,children:[n.jsx(Je,{className:"h-4 w-4 mr-2"}),"Generate Report"]})]})}):n.jsxs(le,{children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsxs("h3",{className:"text-lg font-semibold text-white flex items-center gap-2",children:[n.jsx(Je,{className:"h-5 w-5 text-primary"}),"Reports"]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("button",{onClick:g,className:"p-2 hover:bg-dark-surface rounded-lg transition-colors",title:"Refresh",children:n.jsx(Cs,{className:"h-4 w-4 text-slate-400"})}),r&&n.jsxs(Re,{size:"sm",onClick:r,children:[n.jsx(Je,{className:"h-4 w-4 mr-1"}),"New Report"]})]})]}),n.jsx("div",{className:"space-y-3",children:s.map(m=>n.jsxs("div",{className:"flex items-center justify-between p-4 bg-dark-surface rounded-lg border border-dark-border hover:border-primary/30 transition-colors",children:[n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsx("div",{className:"p-2 bg-dark-bg rounded-lg",children:_(m.status)}),n.jsxs("div",{children:[n.jsx("p",{className:"font-medium text-white",children:m.name}),n.jsxs("div",{className:"flex items-center gap-3 text-sm text-slate-400 mt-1",children:[n.jsx("span",{className:"uppercase font-mono",children:m.format}),n.jsx("span",{children:"|"}),n.jsx("span",{children:m.template_id}),n.jsx("span",{children:"|"}),n.jsx("span",{children:ar(new Date(m.created_at),"MMM d, yyyy HH:mm")}),m.file_size&&n.jsxs(n.Fragment,{children:[n.jsx("span",{children:"|"}),n.jsx("span",{children:p(m.file_size)})]})]}),m.error_message&&n.jsx("p",{className:"text-sm text-red-400 mt-1",children:m.error_message})]})]}),n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(st,{variant:"status",type:b(m.status),children:m.status}),n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx("button",{onClick:()=>v(m),disabled:m.status!=="completed"||l===m.id,className:`p-2 rounded-lg transition-colors ${m.status==="completed"?"hover:bg-dark-bg text-slate-400 hover:text-white":"text-slate-600 cursor-not-allowed"}`,title:"Download",children:l===m.id?n.jsx(rt,{className:"h-4 w-4 animate-spin"}):n.jsx(Fr,{className:"h-4 w-4"})}),n.jsx("button",{onClick:()=>h(m),disabled:d===m.id,className:"p-2 rounded-lg text-slate-400 hover:text-red-400 hover:bg-dark-bg transition-colors",title:"Delete","aria-label":`Delete report ${m.name}`,children:d===m.id?n.jsx(rt,{className:"h-4 w-4 animate-spin"}):n.jsx(aa,{className:"h-4 w-4"})})]})]})]},m.id))}),n.jsx(Kg,{isOpen:!!f,onClose:()=>h(null),onConfirm:j,title:"Delete Report",message:`Are you sure you want to delete the report "${f==null?void 0:f.name}"?`,confirmLabel:"Delete Report",variant:"danger",loading:!!d})]})},Qg=({scanId:e,scanName:r,onClose:s})=>{const[a,i]=E.useState([]),[o,l]=E.useState(new Set),[c,d]=E.useState(!1),[u,f]=E.useState(!1),[h,g]=E.useState(null),[v,j]=E.useState(null),[_,b]=E.useState(!1),[p,m]=E.useState("pdf");E.useEffect(()=>{y()},[]);const y=async()=>{d(!0);try{const R=await un.getFrameworks();i(R.data.frameworks),l(new Set(["pci_dss","nist_800_53","owasp_top10"]))}catch{X.error("Failed to load compliance frameworks")}finally{d(!1)}},x=async()=>{var R,O;if(o.size===0){X.warning("Please select at least one framework");return}f(!0);try{const P=await un.analyzeScan(e,{frameworks:Array.from(o)});g(P.data),X.success("Compliance analysis completed")}catch(P){const T=P;X.error(((O=(R=T.response)==null?void 0:R.data)==null?void 0:O.error)||"Analysis failed")}finally{f(!1)}},w=R=>{const O=new Set(o);O.has(R)?O.delete(R):O.add(R),l(O)},S=R=>R>=80?"text-green-400":R>=60?"text-yellow-400":R>=40?"text-orange-400":"text-red-400",k=R=>R>=80?"completed":R>=60?"running":"failed",C=async()=>{var R,O;if(h){b(!0);try{const P=h.summary.frameworks.map(U=>String(U.framework).toLowerCase().replace(/_/g,"_")),T=await un.generateReport(e,{frameworks:P,format:p,include_evidence:!0}),M=await un.downloadReport(T.data.report_id),A=new Blob([M.data],{type:p==="pdf"?"application/pdf":p==="html"?"text/html":"application/json"}),$=window.URL.createObjectURL(A),D=document.createElement("a");D.href=$,D.download=`compliance_report_${e}.${p}`,document.body.appendChild(D),D.click(),document.body.removeChild(D),window.URL.revokeObjectURL($),X.success(`${p.toUpperCase()} report generated and downloaded successfully`)}catch(P){const T=P;X.error(((O=(R=T.response)==null?void 0:R.data)==null?void 0:O.error)||"Failed to generate report")}finally{b(!1)}}};return c?n.jsx("div",{className:"fixed inset-0 bg-black/60 z-50 flex items-center justify-center",children:n.jsx(le,{className:"w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:n.jsx("div",{className:"flex items-center justify-center py-12",children:n.jsx(At,{})})})}):n.jsx("div",{className:"fixed inset-0 bg-black/60 z-50 flex items-center justify-center p-4",children:n.jsxs(le,{className:"w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:[n.jsxs("div",{className:"flex items-center justify-between mb-6",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(we,{className:"h-6 w-6 text-primary"}),n.jsxs("div",{children:[n.jsx("h2",{className:"text-xl font-bold text-white",children:"Compliance Analysis"}),n.jsxs("p",{className:"text-sm text-slate-400",children:["Scan: ",r]})]})]}),n.jsx("button",{onClick:s,className:"text-slate-400 hover:text-white transition-colors",children:n.jsx(Tt,{className:"h-6 w-6"})})]}),h?n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"mb-6 p-4 bg-dark-bg rounded-lg border border-dark-border",children:n.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-center",children:[n.jsxs("div",{children:[n.jsxs("p",{className:`text-3xl font-bold ${S(h.summary.overall_score)}`,children:[h.summary.overall_score.toFixed(0),"%"]}),n.jsx("p",{className:"text-sm text-slate-400",children:"Overall Score"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-3xl font-bold text-white",children:h.summary.total_findings}),n.jsx("p",{className:"text-sm text-slate-400",children:"Total Findings"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-3xl font-bold text-red-400",children:h.summary.critical_findings+h.summary.high_findings}),n.jsx("p",{className:"text-sm text-slate-400",children:"Critical/High"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-3xl font-bold text-yellow-400",children:h.summary.medium_findings+h.summary.low_findings}),n.jsx("p",{className:"text-sm text-slate-400",children:"Medium/Low"})]})]})}),n.jsxs("div",{className:"space-y-4",children:[n.jsx("h3",{className:"text-lg font-semibold text-white",children:"Framework Results"}),h.summary.frameworks.map(R=>n.jsxs("div",{className:"border border-dark-border rounded-lg overflow-hidden",children:[n.jsxs("div",{onClick:()=>j(v===R.framework?null:R.framework),className:"flex items-center justify-between p-4 bg-dark-surface cursor-pointer hover:bg-dark-hover transition-colors",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[v===R.framework?n.jsx(ut,{className:"h-5 w-5 text-slate-400"}):n.jsx(Vs,{className:"h-5 w-5 text-slate-400"}),n.jsx("span",{className:"font-medium text-white",children:R.framework})]}),n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[n.jsx(bh,{className:"h-4 w-4 text-green-400"}),n.jsx("span",{className:"text-green-400",children:R.compliant})]}),n.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[n.jsx(Tt,{className:"h-4 w-4 text-red-400"}),n.jsx("span",{className:"text-red-400",children:R.non_compliant})]}),n.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[n.jsx(Ne,{className:"h-4 w-4 text-yellow-400"}),n.jsx("span",{className:"text-yellow-400",children:R.partially_compliant})]}),n.jsxs(st,{variant:"status",type:k(R.compliance_score),children:[R.compliance_score.toFixed(0),"%"]})]})]}),v===R.framework&&n.jsxs("div",{className:"p-4 bg-dark-bg border-t border-dark-border",children:[n.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4 mb-4 text-sm",children:[n.jsxs("div",{className:"p-3 bg-dark-surface rounded-lg",children:[n.jsx("p",{className:"text-slate-400",children:"Total Controls"}),n.jsx("p",{className:"text-xl font-bold text-white",children:R.total_controls})]}),n.jsxs("div",{className:"p-3 bg-dark-surface rounded-lg",children:[n.jsx("p",{className:"text-slate-400",children:"Compliant"}),n.jsx("p",{className:"text-xl font-bold text-green-400",children:R.compliant})]}),n.jsxs("div",{className:"p-3 bg-dark-surface rounded-lg",children:[n.jsx("p",{className:"text-slate-400",children:"Non-Compliant"}),n.jsx("p",{className:"text-xl font-bold text-red-400",children:R.non_compliant})]}),n.jsxs("div",{className:"p-3 bg-dark-surface rounded-lg",children:[n.jsx("p",{className:"text-slate-400",children:"Partially Compliant"}),n.jsx("p",{className:"text-xl font-bold text-yellow-400",children:R.partially_compliant})]}),n.jsxs("div",{className:"p-3 bg-dark-surface rounded-lg",children:[n.jsx("p",{className:"text-slate-400",children:"Not Applicable"}),n.jsx("p",{className:"text-xl font-bold text-slate-400",children:R.not_applicable})]}),n.jsxs("div",{className:"p-3 bg-dark-surface rounded-lg",children:[n.jsx("p",{className:"text-slate-400",children:"Not Assessed"}),n.jsx("p",{className:"text-xl font-bold text-slate-500",children:R.not_assessed})]})]}),R.by_category&&R.by_category.length>0&&n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium text-slate-300 mb-2",children:"By Category"}),n.jsx("div",{className:"space-y-2",children:R.by_category.map(O=>n.jsxs("div",{className:"flex items-center justify-between p-2 bg-dark-surface rounded",children:[n.jsx("span",{className:"text-sm text-white",children:O.category}),n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsxs("span",{className:"text-xs text-slate-400",children:[O.compliant,"/",O.total," compliant"]}),n.jsx("div",{className:"w-24 bg-dark-border rounded-full h-2",children:n.jsx("div",{className:`h-2 rounded-full ${O.percentage>=80?"bg-green-500":O.percentage>=60?"bg-yellow-500":"bg-red-500"}`,style:{width:`${O.percentage}%`}})}),n.jsxs("span",{className:"text-xs text-slate-300 w-12 text-right",children:[O.percentage.toFixed(0),"%"]})]})]},O.category))})]})]})]},R.framework))]}),n.jsxs("div",{className:"mt-6 pt-4 border-t border-dark-border",children:[n.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Generate Compliance Report"}),n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsx("div",{className:"flex gap-2",children:["pdf","html","json"].map(R=>n.jsx("button",{onClick:()=>m(R),className:`px-4 py-2 rounded-lg font-medium transition-colors ${p===R?"bg-primary text-white":"bg-dark-surface text-slate-400 hover:bg-dark-hover"}`,children:R.toUpperCase()},R))}),n.jsx(Re,{onClick:C,disabled:_,className:"ml-auto",children:_?n.jsxs(n.Fragment,{children:[n.jsx(Cs,{className:"h-4 w-4 animate-spin mr-2"}),"Generating..."]}):n.jsxs(n.Fragment,{children:[n.jsx(vh,{className:"h-4 w-4 mr-2"}),"Generate Report"]})})]})]}),n.jsxs("div",{className:"flex justify-end gap-3 mt-6 pt-4 border-t border-dark-border",children:[n.jsxs(Re,{variant:"secondary",onClick:()=>g(null),children:[n.jsx(Cs,{className:"h-4 w-4 mr-2"}),"Run New Analysis"]}),n.jsx(Re,{onClick:s,children:"Close"})]})]}):n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"mb-6",children:[n.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Select Compliance Frameworks"}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:a.map(R=>n.jsx("div",{onClick:()=>w(R.id),className:`p-4 rounded-lg border cursor-pointer transition-all ${o.has(R.id)?"border-primary bg-primary/10":"border-dark-border hover:border-primary/50"}`,children:n.jsxs("div",{className:"flex items-start gap-3",children:[n.jsx(Or,{checked:o.has(R.id),onChange:()=>w(R.id)}),n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("p",{className:"font-medium text-white",children:R.name}),n.jsxs(st,{variant:"status",type:"running",children:["v",R.version]})]}),n.jsx("p",{className:"text-sm text-slate-400 mt-1",children:R.description}),n.jsxs("div",{className:"flex items-center gap-4 mt-2 text-xs text-slate-500",children:[n.jsxs("span",{children:[R.control_count," controls"]}),n.jsxs("span",{children:[R.automated_percentage.toFixed(0),"% automated"]})]})]})]})},R.id))})]}),n.jsxs("div",{className:"flex justify-end gap-3",children:[n.jsx(Re,{variant:"secondary",onClick:s,children:"Cancel"}),n.jsx(Re,{onClick:x,disabled:u||o.size===0,children:u?n.jsxs(n.Fragment,{children:[n.jsx(Cs,{className:"h-4 w-4 animate-spin mr-2"}),"Analyzing..."]}):n.jsxs(n.Fragment,{children:[n.jsx(bi,{className:"h-4 w-4 mr-2"}),"Run Analysis"]})})]})]})]})})};function Zg(e,r){var s=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(s!=null){var a,i,o,l,c=[],d=!0,u=!1;try{if(o=(s=s.call(e)).next,r===0){if(Object(s)!==s)return;d=!1}else for(;!(d=(a=o.call(s)).done)&&(c.push(a.value),c.length!==r);d=!0);}catch(f){u=!0,i=f}finally{try{if(!d&&s.return!=null&&(l=s.return(),Object(l)!==l))return}finally{if(u)throw i}}return c}}function ex(e,r,s){return r=lx(r),r in e?Object.defineProperty(e,r,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[r]=s,e}function Fo(e,r){return sx(e)||Zg(e,r)||ld(e,r)||ix()}function tx(e){return rx(e)||nx(e)||ld(e)||ax()}function rx(e){if(Array.isArray(e))return Qa(e)}function sx(e){if(Array.isArray(e))return e}function nx(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function ld(e,r){if(e){if(typeof e=="string")return Qa(e,r);var s=Object.prototype.toString.call(e).slice(8,-1);if(s==="Object"&&e.constructor&&(s=e.constructor.name),s==="Map"||s==="Set")return Array.from(e);if(s==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s))return Qa(e,r)}}function Qa(e,r){(r==null||r>e.length)&&(r=e.length);for(var s=0,a=new Array(r);s<r;s++)a[s]=e[s];return a}function ax(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ix(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ox(e,r){if(typeof e!="object"||e===null)return e;var s=e[Symbol.toPrimitive];if(s!==void 0){var a=s.call(e,r);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(e)}function lx(e){var r=ox(e,"string");return typeof r=="symbol"?r:String(r)}var cx=function(r,s){var a=new Set(s);return Object.assign.apply(Object,[{}].concat(tx(Object.entries(r).filter(function(i){var o=Fo(i,1),l=o[0];return!a.has(l)}).map(function(i){var o=Fo(i,2),l=o[0],c=o[1];return ex({},l,c)}))))};function Za(e,r){(r==null||r>e.length)&&(r=e.length);for(var s=0,a=Array(r);s<r;s++)a[s]=e[s];return a}function dx(e){if(Array.isArray(e))return e}function ux(e){if(Array.isArray(e))return Za(e)}function hx(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function fx(e,r){var s=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(s!=null){var a,i,o,l,c=[],d=!0,u=!1;try{if(o=(s=s.call(e)).next,r!==0)for(;!(d=(a=o.call(s)).done)&&(c.push(a.value),c.length!==r);d=!0);}catch(f){u=!0,i=f}finally{try{if(!d&&s.return!=null&&(l=s.return(),Object(l)!==l))return}finally{if(u)throw i}}return c}}function mx(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function px(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function gx(e,r){return dx(e)||fx(e,r)||cd(e,r)||mx()}function Io(e){return ux(e)||hx(e)||cd(e)||px()}function cd(e,r){if(e){if(typeof e=="string")return Za(e,r);var s={}.toString.call(e).slice(8,-1);return s==="Object"&&e.constructor&&(s=e.constructor.name),s==="Map"||s==="Set"?Array.from(e):s==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s)?Za(e,r):void 0}}function xx(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=r.wrapperElementType,a=s===void 0?"div":s,i=r.nodeMapper,o=i===void 0?function(f){return f}:i,l=r.methodNames,c=l===void 0?[]:l,d=r.initPropNames,u=d===void 0?[]:d;return E.forwardRef(function(f,h){var g=E.useRef(),v=E.useMemo(function(){var b=Object.fromEntries(u.filter(function(p){return f.hasOwnProperty(p)}).map(function(p){return[p,f[p]]}));return e(b)},[]);Ho(function(){v(o(g.current))},E.useLayoutEffect),Ho(function(){return v._destructor instanceof Function?v._destructor:void 0});var j=E.useCallback(function(b){for(var p=arguments.length,m=new Array(p>1?p-1:0),y=1;y<p;y++)m[y-1]=arguments[y];return v[b]instanceof Function?v[b].apply(v,m):void 0},[v]),_=E.useRef({});return Object.keys(cx(f,[].concat(Io(c),Io(u)))).filter(function(b){return _.current[b]!==f[b]}).forEach(function(b){return j(b,f[b])}),_.current=f,E.useImperativeHandle(h,function(){return Object.fromEntries(c.map(function(b){return[b,function(){for(var p=arguments.length,m=new Array(p),y=0;y<p;y++)m[y]=arguments[y];return j.apply(void 0,[b].concat(m))}]}))},[j]),yi.createElement(a,{ref:g})})}function Ho(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:E.useEffect,s=E.useRef(),a=E.useRef(!1),i=E.useRef(!1),o=E.useState(0),l=gx(o,2);l[0];var c=l[1];a.current&&(i.current=!0),r(function(){return a.current||(s.current=e(),a.current=!0),c(function(d){return d+1}),function(){i.current&&s.current&&s.current()}},[])}var ei="http://www.w3.org/1999/xhtml";const Uo={svg:"http://www.w3.org/2000/svg",xhtml:ei,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function ma(e){var r=e+="",s=r.indexOf(":");return s>=0&&(r=e.slice(0,s))!=="xmlns"&&(e=e.slice(s+1)),Uo.hasOwnProperty(r)?{space:Uo[r],local:e}:e}function yx(e){return function(){var r=this.ownerDocument,s=this.namespaceURI;return s===ei&&r.documentElement.namespaceURI===ei?r.createElement(e):r.createElementNS(s,e)}}function bx(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function dd(e){var r=ma(e);return(r.local?bx:yx)(r)}function vx(){}function Ri(e){return e==null?vx:function(){return this.querySelector(e)}}function wx(e){typeof e!="function"&&(e=Ri(e));for(var r=this._groups,s=r.length,a=new Array(s),i=0;i<s;++i)for(var o=r[i],l=o.length,c=a[i]=new Array(l),d,u,f=0;f<l;++f)(d=o[f])&&(u=e.call(d,d.__data__,f,o))&&("__data__"in d&&(u.__data__=d.__data__),c[f]=u);return new nt(a,this._parents)}function jx(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function _x(){return[]}function ud(e){return e==null?_x:function(){return this.querySelectorAll(e)}}function Nx(e){return function(){return jx(e.apply(this,arguments))}}function Sx(e){typeof e=="function"?e=Nx(e):e=ud(e);for(var r=this._groups,s=r.length,a=[],i=[],o=0;o<s;++o)for(var l=r[o],c=l.length,d,u=0;u<c;++u)(d=l[u])&&(a.push(e.call(d,d.__data__,u,l)),i.push(d));return new nt(a,i)}function hd(e){return function(){return this.matches(e)}}function fd(e){return function(r){return r.matches(e)}}var kx=Array.prototype.find;function Cx(e){return function(){return kx.call(this.children,e)}}function Px(){return this.firstElementChild}function Ex(e){return this.select(e==null?Px:Cx(typeof e=="function"?e:fd(e)))}var Rx=Array.prototype.filter;function Ox(){return Array.from(this.children)}function Ax(e){return function(){return Rx.call(this.children,e)}}function Tx(e){return this.selectAll(e==null?Ox:Ax(typeof e=="function"?e:fd(e)))}function Dx(e){typeof e!="function"&&(e=hd(e));for(var r=this._groups,s=r.length,a=new Array(s),i=0;i<s;++i)for(var o=r[i],l=o.length,c=a[i]=[],d,u=0;u<l;++u)(d=o[u])&&e.call(d,d.__data__,u,o)&&c.push(d);return new nt(a,this._parents)}function md(e){return new Array(e.length)}function $x(){return new nt(this._enter||this._groups.map(md),this._parents)}function Wn(e,r){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=r}Wn.prototype={constructor:Wn,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,r){return this._parent.insertBefore(e,r)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function Mx(e){return function(){return e}}function zx(e,r,s,a,i,o){for(var l=0,c,d=r.length,u=o.length;l<u;++l)(c=r[l])?(c.__data__=o[l],a[l]=c):s[l]=new Wn(e,o[l]);for(;l<d;++l)(c=r[l])&&(i[l]=c)}function Lx(e,r,s,a,i,o,l){var c,d,u=new Map,f=r.length,h=o.length,g=new Array(f),v;for(c=0;c<f;++c)(d=r[c])&&(g[c]=v=l.call(d,d.__data__,c,r)+"",u.has(v)?i[c]=d:u.set(v,d));for(c=0;c<h;++c)v=l.call(e,o[c],c,o)+"",(d=u.get(v))?(a[c]=d,d.__data__=o[c],u.delete(v)):s[c]=new Wn(e,o[c]);for(c=0;c<f;++c)(d=r[c])&&u.get(g[c])===d&&(i[c]=d)}function Fx(e){return e.__data__}function Ix(e,r){if(!arguments.length)return Array.from(this,Fx);var s=r?Lx:zx,a=this._parents,i=this._groups;typeof e!="function"&&(e=Mx(e));for(var o=i.length,l=new Array(o),c=new Array(o),d=new Array(o),u=0;u<o;++u){var f=a[u],h=i[u],g=h.length,v=Hx(e.call(f,f&&f.__data__,u,a)),j=v.length,_=c[u]=new Array(j),b=l[u]=new Array(j),p=d[u]=new Array(g);s(f,h,_,b,p,v,r);for(var m=0,y=0,x,w;m<j;++m)if(x=_[m]){for(m>=y&&(y=m+1);!(w=b[y])&&++y<j;);x._next=w||null}}return l=new nt(l,a),l._enter=c,l._exit=d,l}function Hx(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function Ux(){return new nt(this._exit||this._groups.map(md),this._parents)}function qx(e,r,s){var a=this.enter(),i=this,o=this.exit();return typeof e=="function"?(a=e(a),a&&(a=a.selection())):a=a.append(e+""),r!=null&&(i=r(i),i&&(i=i.selection())),s==null?o.remove():s(o),a&&i?a.merge(i).order():i}function Wx(e){for(var r=e.selection?e.selection():e,s=this._groups,a=r._groups,i=s.length,o=a.length,l=Math.min(i,o),c=new Array(i),d=0;d<l;++d)for(var u=s[d],f=a[d],h=u.length,g=c[d]=new Array(h),v,j=0;j<h;++j)(v=u[j]||f[j])&&(g[j]=v);for(;d<i;++d)c[d]=s[d];return new nt(c,this._parents)}function Bx(){for(var e=this._groups,r=-1,s=e.length;++r<s;)for(var a=e[r],i=a.length-1,o=a[i],l;--i>=0;)(l=a[i])&&(o&&l.compareDocumentPosition(o)^4&&o.parentNode.insertBefore(l,o),o=l);return this}function Vx(e){e||(e=Gx);function r(h,g){return h&&g?e(h.__data__,g.__data__):!h-!g}for(var s=this._groups,a=s.length,i=new Array(a),o=0;o<a;++o){for(var l=s[o],c=l.length,d=i[o]=new Array(c),u,f=0;f<c;++f)(u=l[f])&&(d[f]=u);d.sort(r)}return new nt(i,this._parents).order()}function Gx(e,r){return e<r?-1:e>r?1:e>=r?0:NaN}function Yx(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function Xx(){return Array.from(this)}function Kx(){for(var e=this._groups,r=0,s=e.length;r<s;++r)for(var a=e[r],i=0,o=a.length;i<o;++i){var l=a[i];if(l)return l}return null}function Jx(){let e=0;for(const r of this)++e;return e}function Qx(){return!this.node()}function Zx(e){for(var r=this._groups,s=0,a=r.length;s<a;++s)for(var i=r[s],o=0,l=i.length,c;o<l;++o)(c=i[o])&&e.call(c,c.__data__,o,i);return this}function e0(e){return function(){this.removeAttribute(e)}}function t0(e){return function(){this.removeAttributeNS(e.space,e.local)}}function r0(e,r){return function(){this.setAttribute(e,r)}}function s0(e,r){return function(){this.setAttributeNS(e.space,e.local,r)}}function n0(e,r){return function(){var s=r.apply(this,arguments);s==null?this.removeAttribute(e):this.setAttribute(e,s)}}function a0(e,r){return function(){var s=r.apply(this,arguments);s==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,s)}}function i0(e,r){var s=ma(e);if(arguments.length<2){var a=this.node();return s.local?a.getAttributeNS(s.space,s.local):a.getAttribute(s)}return this.each((r==null?s.local?t0:e0:typeof r=="function"?s.local?a0:n0:s.local?s0:r0)(s,r))}function pd(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function o0(e){return function(){this.style.removeProperty(e)}}function l0(e,r,s){return function(){this.style.setProperty(e,r,s)}}function c0(e,r,s){return function(){var a=r.apply(this,arguments);a==null?this.style.removeProperty(e):this.style.setProperty(e,a,s)}}function d0(e,r,s){return arguments.length>1?this.each((r==null?o0:typeof r=="function"?c0:l0)(e,r,s??"")):Ur(this.node(),e)}function Ur(e,r){return e.style.getPropertyValue(r)||pd(e).getComputedStyle(e,null).getPropertyValue(r)}function u0(e){return function(){delete this[e]}}function h0(e,r){return function(){this[e]=r}}function f0(e,r){return function(){var s=r.apply(this,arguments);s==null?delete this[e]:this[e]=s}}function m0(e,r){return arguments.length>1?this.each((r==null?u0:typeof r=="function"?f0:h0)(e,r)):this.node()[e]}function gd(e){return e.trim().split(/^|\s+/)}function Oi(e){return e.classList||new xd(e)}function xd(e){this._node=e,this._names=gd(e.getAttribute("class")||"")}xd.prototype={add:function(e){var r=this._names.indexOf(e);r<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var r=this._names.indexOf(e);r>=0&&(this._names.splice(r,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function yd(e,r){for(var s=Oi(e),a=-1,i=r.length;++a<i;)s.add(r[a])}function bd(e,r){for(var s=Oi(e),a=-1,i=r.length;++a<i;)s.remove(r[a])}function p0(e){return function(){yd(this,e)}}function g0(e){return function(){bd(this,e)}}function x0(e,r){return function(){(r.apply(this,arguments)?yd:bd)(this,e)}}function y0(e,r){var s=gd(e+"");if(arguments.length<2){for(var a=Oi(this.node()),i=-1,o=s.length;++i<o;)if(!a.contains(s[i]))return!1;return!0}return this.each((typeof r=="function"?x0:r?p0:g0)(s,r))}function b0(){this.textContent=""}function v0(e){return function(){this.textContent=e}}function w0(e){return function(){var r=e.apply(this,arguments);this.textContent=r??""}}function j0(e){return arguments.length?this.each(e==null?b0:(typeof e=="function"?w0:v0)(e)):this.node().textContent}function _0(){this.innerHTML=""}function N0(e){return function(){this.innerHTML=e}}function S0(e){return function(){var r=e.apply(this,arguments);this.innerHTML=r??""}}function k0(e){return arguments.length?this.each(e==null?_0:(typeof e=="function"?S0:N0)(e)):this.node().innerHTML}function C0(){this.nextSibling&&this.parentNode.appendChild(this)}function P0(){return this.each(C0)}function E0(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function R0(){return this.each(E0)}function O0(e){var r=typeof e=="function"?e:dd(e);return this.select(function(){return this.appendChild(r.apply(this,arguments))})}function A0(){return null}function T0(e,r){var s=typeof e=="function"?e:dd(e),a=r==null?A0:typeof r=="function"?r:Ri(r);return this.select(function(){return this.insertBefore(s.apply(this,arguments),a.apply(this,arguments)||null)})}function D0(){var e=this.parentNode;e&&e.removeChild(this)}function $0(){return this.each(D0)}function M0(){var e=this.cloneNode(!1),r=this.parentNode;return r?r.insertBefore(e,this.nextSibling):e}function z0(){var e=this.cloneNode(!0),r=this.parentNode;return r?r.insertBefore(e,this.nextSibling):e}function L0(e){return this.select(e?z0:M0)}function F0(e){return arguments.length?this.property("__data__",e):this.node().__data__}function I0(e){return function(r){e.call(this,r,this.__data__)}}function H0(e){return e.trim().split(/^|\s+/).map(function(r){var s="",a=r.indexOf(".");return a>=0&&(s=r.slice(a+1),r=r.slice(0,a)),{type:r,name:s}})}function U0(e){return function(){var r=this.__on;if(r){for(var s=0,a=-1,i=r.length,o;s<i;++s)o=r[s],(!e.type||o.type===e.type)&&o.name===e.name?this.removeEventListener(o.type,o.listener,o.options):r[++a]=o;++a?r.length=a:delete this.__on}}}function q0(e,r,s){return function(){var a=this.__on,i,o=I0(r);if(a){for(var l=0,c=a.length;l<c;++l)if((i=a[l]).type===e.type&&i.name===e.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=o,i.options=s),i.value=r;return}}this.addEventListener(e.type,o,s),i={type:e.type,name:e.name,value:r,listener:o,options:s},a?a.push(i):this.__on=[i]}}function W0(e,r,s){var a=H0(e+""),i,o=a.length,l;if(arguments.length<2){var c=this.node().__on;if(c){for(var d=0,u=c.length,f;d<u;++d)for(i=0,f=c[d];i<o;++i)if((l=a[i]).type===f.type&&l.name===f.name)return f.value}return}for(c=r?q0:U0,i=0;i<o;++i)this.each(c(a[i],r,s));return this}function vd(e,r,s){var a=pd(e),i=a.CustomEvent;typeof i=="function"?i=new i(r,s):(i=a.document.createEvent("Event"),s?(i.initEvent(r,s.bubbles,s.cancelable),i.detail=s.detail):i.initEvent(r,!1,!1)),e.dispatchEvent(i)}function B0(e,r){return function(){return vd(this,e,r)}}function V0(e,r){return function(){return vd(this,e,r.apply(this,arguments))}}function G0(e,r){return this.each((typeof r=="function"?V0:B0)(e,r))}function*Y0(){for(var e=this._groups,r=0,s=e.length;r<s;++r)for(var a=e[r],i=0,o=a.length,l;i<o;++i)(l=a[i])&&(yield l)}var wd=[null];function nt(e,r){this._groups=e,this._parents=r}function Zs(){return new nt([[document.documentElement]],wd)}function X0(){return this}nt.prototype=Zs.prototype={constructor:nt,select:wx,selectAll:Sx,selectChild:Ex,selectChildren:Tx,filter:Dx,data:Ix,enter:$x,exit:Ux,join:qx,merge:Wx,selection:X0,order:Bx,sort:Vx,call:Yx,nodes:Xx,node:Kx,size:Jx,empty:Qx,each:Zx,attr:i0,style:d0,property:m0,classed:y0,text:j0,html:k0,raise:P0,lower:R0,append:O0,insert:T0,remove:$0,clone:L0,datum:F0,on:W0,dispatch:G0,[Symbol.iterator]:Y0};function ct(e){return typeof e=="string"?new nt([[document.querySelector(e)]],[document.documentElement]):new nt([[e]],wd)}function K0(e){let r;for(;r=e.sourceEvent;)e=r;return e}function Pt(e,r){if(e=K0(e),r===void 0&&(r=e.currentTarget),r){var s=r.ownerSVGElement||r;if(s.createSVGPoint){var a=s.createSVGPoint();return a.x=e.clientX,a.y=e.clientY,a=a.matrixTransform(r.getScreenCTM().inverse()),[a.x,a.y]}if(r.getBoundingClientRect){var i=r.getBoundingClientRect();return[e.clientX-i.left-r.clientLeft,e.clientY-i.top-r.clientTop]}}return[e.pageX,e.pageY]}var J0={value:()=>{}};function en(){for(var e=0,r=arguments.length,s={},a;e<r;++e){if(!(a=arguments[e]+"")||a in s||/[\s.]/.test(a))throw new Error("illegal type: "+a);s[a]=[]}return new Tn(s)}function Tn(e){this._=e}function Q0(e,r){return e.trim().split(/^|\s+/).map(function(s){var a="",i=s.indexOf(".");if(i>=0&&(a=s.slice(i+1),s=s.slice(0,i)),s&&!r.hasOwnProperty(s))throw new Error("unknown type: "+s);return{type:s,name:a}})}Tn.prototype=en.prototype={constructor:Tn,on:function(e,r){var s=this._,a=Q0(e+"",s),i,o=-1,l=a.length;if(arguments.length<2){for(;++o<l;)if((i=(e=a[o]).type)&&(i=Z0(s[i],e.name)))return i;return}if(r!=null&&typeof r!="function")throw new Error("invalid callback: "+r);for(;++o<l;)if(i=(e=a[o]).type)s[i]=qo(s[i],e.name,r);else if(r==null)for(i in s)s[i]=qo(s[i],e.name,null);return this},copy:function(){var e={},r=this._;for(var s in r)e[s]=r[s].slice();return new Tn(e)},call:function(e,r){if((i=arguments.length-2)>0)for(var s=new Array(i),a=0,i,o;a<i;++a)s[a]=arguments[a+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(o=this._[e],a=0,i=o.length;a<i;++a)o[a].value.apply(r,s)},apply:function(e,r,s){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var a=this._[e],i=0,o=a.length;i<o;++i)a[i].value.apply(r,s)}};function Z0(e,r){for(var s=0,a=e.length,i;s<a;++s)if((i=e[s]).name===r)return i.value}function qo(e,r,s){for(var a=0,i=e.length;a<i;++a)if(e[a].name===r){e[a]=J0,e=e.slice(0,a).concat(e.slice(a+1));break}return s!=null&&e.push({name:r,value:s}),e}const ey={passive:!1},Hs={capture:!0,passive:!1};function Ta(e){e.stopImmediatePropagation()}function Mr(e){e.preventDefault(),e.stopImmediatePropagation()}function jd(e){var r=e.document.documentElement,s=ct(e).on("dragstart.drag",Mr,Hs);"onselectstart"in r?s.on("selectstart.drag",Mr,Hs):(r.__noselect=r.style.MozUserSelect,r.style.MozUserSelect="none")}function _d(e,r){var s=e.document.documentElement,a=ct(e).on("dragstart.drag",null);r&&(a.on("click.drag",Mr,Hs),setTimeout(function(){a.on("click.drag",null)},0)),"onselectstart"in s?a.on("selectstart.drag",null):(s.style.MozUserSelect=s.__noselect,delete s.__noselect)}const xn=e=>()=>e;function ti(e,{sourceEvent:r,subject:s,target:a,identifier:i,active:o,x:l,y:c,dx:d,dy:u,dispatch:f}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:r,enumerable:!0,configurable:!0},subject:{value:s,enumerable:!0,configurable:!0},target:{value:a,enumerable:!0,configurable:!0},identifier:{value:i,enumerable:!0,configurable:!0},active:{value:o,enumerable:!0,configurable:!0},x:{value:l,enumerable:!0,configurable:!0},y:{value:c,enumerable:!0,configurable:!0},dx:{value:d,enumerable:!0,configurable:!0},dy:{value:u,enumerable:!0,configurable:!0},_:{value:f}})}ti.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};function ty(e){return!e.ctrlKey&&!e.button}function ry(){return this.parentNode}function sy(e,r){return r??{x:e.x,y:e.y}}function ny(){return navigator.maxTouchPoints||"ontouchstart"in this}function ay(){var e=ty,r=ry,s=sy,a=ny,i={},o=en("start","drag","end"),l=0,c,d,u,f,h=0;function g(x){x.on("mousedown.drag",v).filter(a).on("touchstart.drag",b).on("touchmove.drag",p,ey).on("touchend.drag touchcancel.drag",m).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function v(x,w){if(!(f||!e.call(this,x,w))){var S=y(this,r.call(this,x,w),x,w,"mouse");S&&(ct(x.view).on("mousemove.drag",j,Hs).on("mouseup.drag",_,Hs),jd(x.view),Ta(x),u=!1,c=x.clientX,d=x.clientY,S("start",x))}}function j(x){if(Mr(x),!u){var w=x.clientX-c,S=x.clientY-d;u=w*w+S*S>h}i.mouse("drag",x)}function _(x){ct(x.view).on("mousemove.drag mouseup.drag",null),_d(x.view,u),Mr(x),i.mouse("end",x)}function b(x,w){if(e.call(this,x,w)){var S=x.changedTouches,k=r.call(this,x,w),C=S.length,R,O;for(R=0;R<C;++R)(O=y(this,k,x,w,S[R].identifier,S[R]))&&(Ta(x),O("start",x,S[R]))}}function p(x){var w=x.changedTouches,S=w.length,k,C;for(k=0;k<S;++k)(C=i[w[k].identifier])&&(Mr(x),C("drag",x,w[k]))}function m(x){var w=x.changedTouches,S=w.length,k,C;for(f&&clearTimeout(f),f=setTimeout(function(){f=null},500),k=0;k<S;++k)(C=i[w[k].identifier])&&(Ta(x),C("end",x,w[k]))}function y(x,w,S,k,C,R){var O=o.copy(),P=Pt(R||S,w),T,M,A;if((A=s.call(x,new ti("beforestart",{sourceEvent:S,target:g,identifier:C,active:l,x:P[0],y:P[1],dx:0,dy:0,dispatch:O}),k))!=null)return T=A.x-P[0]||0,M=A.y-P[1]||0,function $(D,U,G){var q=P,Y;switch(D){case"start":i[C]=$,Y=l++;break;case"end":delete i[C],--l;case"drag":P=Pt(G||U,w),Y=l;break}O.call(D,x,new ti(D,{sourceEvent:U,subject:A,target:g,identifier:C,active:Y,x:P[0]+T,y:P[1]+M,dx:P[0]-q[0],dy:P[1]-q[1],dispatch:O}),k)}}return g.filter=function(x){return arguments.length?(e=typeof x=="function"?x:xn(!!x),g):e},g.container=function(x){return arguments.length?(r=typeof x=="function"?x:xn(x),g):r},g.subject=function(x){return arguments.length?(s=typeof x=="function"?x:xn(x),g):s},g.touchable=function(x){return arguments.length?(a=typeof x=="function"?x:xn(!!x),g):a},g.on=function(){var x=o.on.apply(o,arguments);return x===o?g:x},g.clickDistance=function(x){return arguments.length?(h=(x=+x)*x,g):Math.sqrt(h)},g}var qr=0,ws=0,ns=0,Nd=1e3,Bn,js,Vn=0,_r=0,pa=0,Us=typeof performance=="object"&&performance.now?performance:Date,Sd=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function Ai(){return _r||(Sd(iy),_r=Us.now()+pa)}function iy(){_r=0}function Gn(){this._call=this._time=this._next=null}Gn.prototype=Ti.prototype={constructor:Gn,restart:function(e,r,s){if(typeof e!="function")throw new TypeError("callback is not a function");s=(s==null?Ai():+s)+(r==null?0:+r),!this._next&&js!==this&&(js?js._next=this:Bn=this,js=this),this._call=e,this._time=s,ri()},stop:function(){this._call&&(this._call=null,this._time=1/0,ri())}};function Ti(e,r,s){var a=new Gn;return a.restart(e,r,s),a}function oy(){Ai(),++qr;for(var e=Bn,r;e;)(r=_r-e._time)>=0&&e._call.call(void 0,r),e=e._next;--qr}function Wo(){_r=(Vn=Us.now())+pa,qr=ws=0;try{oy()}finally{qr=0,cy(),_r=0}}function ly(){var e=Us.now(),r=e-Vn;r>Nd&&(pa-=r,Vn=e)}function cy(){for(var e,r=Bn,s,a=1/0;r;)r._call?(a>r._time&&(a=r._time),e=r,r=r._next):(s=r._next,r._next=null,r=e?e._next=s:Bn=s);js=e,ri(a)}function ri(e){if(!qr){ws&&(ws=clearTimeout(ws));var r=e-_r;r>24?(e<1/0&&(ws=setTimeout(Wo,e-Us.now()-pa)),ns&&(ns=clearInterval(ns))):(ns||(Vn=Us.now(),ns=setInterval(ly,Nd)),qr=1,Sd(Wo))}}function Bo(e,r,s){var a=new Gn;return r=r==null?0:+r,a.restart(i=>{a.stop(),e(i+r)},r,s),a}var dy=en("start","end","cancel","interrupt"),uy=[],kd=0,Vo=1,si=2,Dn=3,Go=4,ni=5,$n=6;function ga(e,r,s,a,i,o){var l=e.__transition;if(!l)e.__transition={};else if(s in l)return;hy(e,s,{name:r,index:a,group:i,on:dy,tween:uy,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:kd})}function Di(e,r){var s=Nt(e,r);if(s.state>kd)throw new Error("too late; already scheduled");return s}function $t(e,r){var s=Nt(e,r);if(s.state>Dn)throw new Error("too late; already running");return s}function Nt(e,r){var s=e.__transition;if(!s||!(s=s[r]))throw new Error("transition not found");return s}function hy(e,r,s){var a=e.__transition,i;a[r]=s,s.timer=Ti(o,0,s.time);function o(u){s.state=Vo,s.timer.restart(l,s.delay,s.time),s.delay<=u&&l(u-s.delay)}function l(u){var f,h,g,v;if(s.state!==Vo)return d();for(f in a)if(v=a[f],v.name===s.name){if(v.state===Dn)return Bo(l);v.state===Go?(v.state=$n,v.timer.stop(),v.on.call("interrupt",e,e.__data__,v.index,v.group),delete a[f]):+f<r&&(v.state=$n,v.timer.stop(),v.on.call("cancel",e,e.__data__,v.index,v.group),delete a[f])}if(Bo(function(){s.state===Dn&&(s.state=Go,s.timer.restart(c,s.delay,s.time),c(u))}),s.state=si,s.on.call("start",e,e.__data__,s.index,s.group),s.state===si){for(s.state=Dn,i=new Array(g=s.tween.length),f=0,h=-1;f<g;++f)(v=s.tween[f].value.call(e,e.__data__,s.index,s.group))&&(i[++h]=v);i.length=h+1}}function c(u){for(var f=u<s.duration?s.ease.call(null,u/s.duration):(s.timer.restart(d),s.state=ni,1),h=-1,g=i.length;++h<g;)i[h].call(e,f);s.state===ni&&(s.on.call("end",e,e.__data__,s.index,s.group),d())}function d(){s.state=$n,s.timer.stop(),delete a[r];for(var u in a)return;delete e.__transition}}function Mn(e,r){var s=e.__transition,a,i,o=!0,l;if(s){r=r==null?null:r+"";for(l in s){if((a=s[l]).name!==r){o=!1;continue}i=a.state>si&&a.state<ni,a.state=$n,a.timer.stop(),a.on.call(i?"interrupt":"cancel",e,e.__data__,a.index,a.group),delete s[l]}o&&delete e.__transition}}function fy(e){return this.each(function(){Mn(this,e)})}function my(e,r){var s,a;return function(){var i=$t(this,e),o=i.tween;if(o!==s){a=s=o;for(var l=0,c=a.length;l<c;++l)if(a[l].name===r){a=a.slice(),a.splice(l,1);break}}i.tween=a}}function py(e,r,s){var a,i;if(typeof s!="function")throw new Error;return function(){var o=$t(this,e),l=o.tween;if(l!==a){i=(a=l).slice();for(var c={name:r,value:s},d=0,u=i.length;d<u;++d)if(i[d].name===r){i[d]=c;break}d===u&&i.push(c)}o.tween=i}}function gy(e,r){var s=this._id;if(e+="",arguments.length<2){for(var a=Nt(this.node(),s).tween,i=0,o=a.length,l;i<o;++i)if((l=a[i]).name===e)return l.value;return null}return this.each((r==null?my:py)(s,e,r))}function $i(e,r,s){var a=e._id;return e.each(function(){var i=$t(this,a);(i.value||(i.value={}))[r]=s.apply(this,arguments)}),function(i){return Nt(i,a).value[r]}}function Cd(e,r){var s;return(typeof r=="number"?$h:r instanceof io?ao:(s=io(r))?(r=s,ao):Mh)(e,r)}function xy(e){return function(){this.removeAttribute(e)}}function yy(e){return function(){this.removeAttributeNS(e.space,e.local)}}function by(e,r,s){var a,i=s+"",o;return function(){var l=this.getAttribute(e);return l===i?null:l===a?o:o=r(a=l,s)}}function vy(e,r,s){var a,i=s+"",o;return function(){var l=this.getAttributeNS(e.space,e.local);return l===i?null:l===a?o:o=r(a=l,s)}}function wy(e,r,s){var a,i,o;return function(){var l,c=s(this),d;return c==null?void this.removeAttribute(e):(l=this.getAttribute(e),d=c+"",l===d?null:l===a&&d===i?o:(i=d,o=r(a=l,c)))}}function jy(e,r,s){var a,i,o;return function(){var l,c=s(this),d;return c==null?void this.removeAttributeNS(e.space,e.local):(l=this.getAttributeNS(e.space,e.local),d=c+"",l===d?null:l===a&&d===i?o:(i=d,o=r(a=l,c)))}}function _y(e,r){var s=ma(e),a=s==="transform"?zh:Cd;return this.attrTween(e,typeof r=="function"?(s.local?jy:wy)(s,a,$i(this,"attr."+e,r)):r==null?(s.local?yy:xy)(s):(s.local?vy:by)(s,a,r))}function Ny(e,r){return function(s){this.setAttribute(e,r.call(this,s))}}function Sy(e,r){return function(s){this.setAttributeNS(e.space,e.local,r.call(this,s))}}function ky(e,r){var s,a;function i(){var o=r.apply(this,arguments);return o!==a&&(s=(a=o)&&Sy(e,o)),s}return i._value=r,i}function Cy(e,r){var s,a;function i(){var o=r.apply(this,arguments);return o!==a&&(s=(a=o)&&Ny(e,o)),s}return i._value=r,i}function Py(e,r){var s="attr."+e;if(arguments.length<2)return(s=this.tween(s))&&s._value;if(r==null)return this.tween(s,null);if(typeof r!="function")throw new Error;var a=ma(e);return this.tween(s,(a.local?ky:Cy)(a,r))}function Ey(e,r){return function(){Di(this,e).delay=+r.apply(this,arguments)}}function Ry(e,r){return r=+r,function(){Di(this,e).delay=r}}function Oy(e){var r=this._id;return arguments.length?this.each((typeof e=="function"?Ey:Ry)(r,e)):Nt(this.node(),r).delay}function Ay(e,r){return function(){$t(this,e).duration=+r.apply(this,arguments)}}function Ty(e,r){return r=+r,function(){$t(this,e).duration=r}}function Dy(e){var r=this._id;return arguments.length?this.each((typeof e=="function"?Ay:Ty)(r,e)):Nt(this.node(),r).duration}function $y(e,r){if(typeof r!="function")throw new Error;return function(){$t(this,e).ease=r}}function My(e){var r=this._id;return arguments.length?this.each($y(r,e)):Nt(this.node(),r).ease}function zy(e,r){return function(){var s=r.apply(this,arguments);if(typeof s!="function")throw new Error;$t(this,e).ease=s}}function Ly(e){if(typeof e!="function")throw new Error;return this.each(zy(this._id,e))}function Fy(e){typeof e!="function"&&(e=hd(e));for(var r=this._groups,s=r.length,a=new Array(s),i=0;i<s;++i)for(var o=r[i],l=o.length,c=a[i]=[],d,u=0;u<l;++u)(d=o[u])&&e.call(d,d.__data__,u,o)&&c.push(d);return new Kt(a,this._parents,this._name,this._id)}function Iy(e){if(e._id!==this._id)throw new Error;for(var r=this._groups,s=e._groups,a=r.length,i=s.length,o=Math.min(a,i),l=new Array(a),c=0;c<o;++c)for(var d=r[c],u=s[c],f=d.length,h=l[c]=new Array(f),g,v=0;v<f;++v)(g=d[v]||u[v])&&(h[v]=g);for(;c<a;++c)l[c]=r[c];return new Kt(l,this._parents,this._name,this._id)}function Hy(e){return(e+"").trim().split(/^|\s+/).every(function(r){var s=r.indexOf(".");return s>=0&&(r=r.slice(0,s)),!r||r==="start"})}function Uy(e,r,s){var a,i,o=Hy(r)?Di:$t;return function(){var l=o(this,e),c=l.on;c!==a&&(i=(a=c).copy()).on(r,s),l.on=i}}function qy(e,r){var s=this._id;return arguments.length<2?Nt(this.node(),s).on.on(e):this.each(Uy(s,e,r))}function Wy(e){return function(){var r=this.parentNode;for(var s in this.__transition)if(+s!==e)return;r&&r.removeChild(this)}}function By(){return this.on("end.remove",Wy(this._id))}function Vy(e){var r=this._name,s=this._id;typeof e!="function"&&(e=Ri(e));for(var a=this._groups,i=a.length,o=new Array(i),l=0;l<i;++l)for(var c=a[l],d=c.length,u=o[l]=new Array(d),f,h,g=0;g<d;++g)(f=c[g])&&(h=e.call(f,f.__data__,g,c))&&("__data__"in f&&(h.__data__=f.__data__),u[g]=h,ga(u[g],r,s,g,u,Nt(f,s)));return new Kt(o,this._parents,r,s)}function Gy(e){var r=this._name,s=this._id;typeof e!="function"&&(e=ud(e));for(var a=this._groups,i=a.length,o=[],l=[],c=0;c<i;++c)for(var d=a[c],u=d.length,f,h=0;h<u;++h)if(f=d[h]){for(var g=e.call(f,f.__data__,h,d),v,j=Nt(f,s),_=0,b=g.length;_<b;++_)(v=g[_])&&ga(v,r,s,_,g,j);o.push(g),l.push(f)}return new Kt(o,l,r,s)}var Yy=Zs.prototype.constructor;function Xy(){return new Yy(this._groups,this._parents)}function Ky(e,r){var s,a,i;return function(){var o=Ur(this,e),l=(this.style.removeProperty(e),Ur(this,e));return o===l?null:o===s&&l===a?i:i=r(s=o,a=l)}}function Pd(e){return function(){this.style.removeProperty(e)}}function Jy(e,r,s){var a,i=s+"",o;return function(){var l=Ur(this,e);return l===i?null:l===a?o:o=r(a=l,s)}}function Qy(e,r,s){var a,i,o;return function(){var l=Ur(this,e),c=s(this),d=c+"";return c==null&&(d=c=(this.style.removeProperty(e),Ur(this,e))),l===d?null:l===a&&d===i?o:(i=d,o=r(a=l,c))}}function Zy(e,r){var s,a,i,o="style."+r,l="end."+o,c;return function(){var d=$t(this,e),u=d.on,f=d.value[o]==null?c||(c=Pd(r)):void 0;(u!==s||i!==f)&&(a=(s=u).copy()).on(l,i=f),d.on=a}}function eb(e,r,s){var a=(e+="")=="transform"?Lh:Cd;return r==null?this.styleTween(e,Ky(e,a)).on("end.style."+e,Pd(e)):typeof r=="function"?this.styleTween(e,Qy(e,a,$i(this,"style."+e,r))).each(Zy(this._id,e)):this.styleTween(e,Jy(e,a,r),s).on("end.style."+e,null)}function tb(e,r,s){return function(a){this.style.setProperty(e,r.call(this,a),s)}}function rb(e,r,s){var a,i;function o(){var l=r.apply(this,arguments);return l!==i&&(a=(i=l)&&tb(e,l,s)),a}return o._value=r,o}function sb(e,r,s){var a="style."+(e+="");if(arguments.length<2)return(a=this.tween(a))&&a._value;if(r==null)return this.tween(a,null);if(typeof r!="function")throw new Error;return this.tween(a,rb(e,r,s??""))}function nb(e){return function(){this.textContent=e}}function ab(e){return function(){var r=e(this);this.textContent=r??""}}function ib(e){return this.tween("text",typeof e=="function"?ab($i(this,"text",e)):nb(e==null?"":e+""))}function ob(e){return function(r){this.textContent=e.call(this,r)}}function lb(e){var r,s;function a(){var i=e.apply(this,arguments);return i!==s&&(r=(s=i)&&ob(i)),r}return a._value=e,a}function cb(e){var r="text";if(arguments.length<1)return(r=this.tween(r))&&r._value;if(e==null)return this.tween(r,null);if(typeof e!="function")throw new Error;return this.tween(r,lb(e))}function db(){for(var e=this._name,r=this._id,s=Ed(),a=this._groups,i=a.length,o=0;o<i;++o)for(var l=a[o],c=l.length,d,u=0;u<c;++u)if(d=l[u]){var f=Nt(d,r);ga(d,e,s,u,l,{time:f.time+f.delay+f.duration,delay:0,duration:f.duration,ease:f.ease})}return new Kt(a,this._parents,e,s)}function ub(){var e,r,s=this,a=s._id,i=s.size();return new Promise(function(o,l){var c={value:l},d={value:function(){--i===0&&o()}};s.each(function(){var u=$t(this,a),f=u.on;f!==e&&(r=(e=f).copy(),r._.cancel.push(c),r._.interrupt.push(c),r._.end.push(d)),u.on=r}),i===0&&o()})}var hb=0;function Kt(e,r,s,a){this._groups=e,this._parents=r,this._name=s,this._id=a}function Ed(){return++hb}var Ft=Zs.prototype;Kt.prototype={constructor:Kt,select:Vy,selectAll:Gy,selectChild:Ft.selectChild,selectChildren:Ft.selectChildren,filter:Fy,merge:Iy,selection:Xy,transition:db,call:Ft.call,nodes:Ft.nodes,node:Ft.node,size:Ft.size,empty:Ft.empty,each:Ft.each,on:qy,attr:_y,attrTween:Py,style:eb,styleTween:sb,text:ib,textTween:cb,remove:By,tween:gy,delay:Oy,duration:Dy,ease:My,easeVarying:Ly,end:ub,[Symbol.iterator]:Ft[Symbol.iterator]};function fb(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var mb={time:null,delay:0,duration:250,ease:fb};function pb(e,r){for(var s;!(s=e.__transition)||!(s=s[r]);)if(!(e=e.parentNode))throw new Error(`transition ${r} not found`);return s}function gb(e){var r,s;e instanceof Kt?(r=e._id,e=e._name):(r=Ed(),(s=mb).time=Ai(),e=e==null?null:e+"");for(var a=this._groups,i=a.length,o=0;o<i;++o)for(var l=a[o],c=l.length,d,u=0;u<c;++u)(d=l[u])&&ga(d,e,r,u,l,s||pb(d,r));return new Kt(a,this._parents,e,r)}Zs.prototype.interrupt=fy;Zs.prototype.transition=gb;const yn=e=>()=>e;function xb(e,{sourceEvent:r,target:s,transform:a,dispatch:i}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:r,enumerable:!0,configurable:!0},target:{value:s,enumerable:!0,configurable:!0},transform:{value:a,enumerable:!0,configurable:!0},_:{value:i}})}function Vt(e,r,s){this.k=e,this.x=r,this.y=s}Vt.prototype={constructor:Vt,scale:function(e){return e===1?this:new Vt(this.k*e,this.x,this.y)},translate:function(e,r){return e===0&r===0?this:new Vt(this.k,this.x+this.k*e,this.y+this.k*r)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var Mi=new Vt(1,0,0);Ct.prototype=Vt.prototype;function Ct(e){for(;!e.__zoom;)if(!(e=e.parentNode))return Mi;return e.__zoom}function Da(e){e.stopImmediatePropagation()}function as(e){e.preventDefault(),e.stopImmediatePropagation()}function yb(e){return(!e.ctrlKey||e.type==="wheel")&&!e.button}function bb(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function Yo(){return this.__zoom||Mi}function vb(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function wb(){return navigator.maxTouchPoints||"ontouchstart"in this}function jb(e,r,s){var a=e.invertX(r[0][0])-s[0][0],i=e.invertX(r[1][0])-s[1][0],o=e.invertY(r[0][1])-s[0][1],l=e.invertY(r[1][1])-s[1][1];return e.translate(i>a?(a+i)/2:Math.min(0,a)||Math.max(0,i),l>o?(o+l)/2:Math.min(0,o)||Math.max(0,l))}function _b(){var e=yb,r=bb,s=jb,a=vb,i=wb,o=[0,1/0],l=[[-1/0,-1/0],[1/0,1/0]],c=250,d=Fh,u=en("start","zoom","end"),f,h,g,v=500,j=150,_=0,b=10;function p(A){A.property("__zoom",Yo).on("wheel.zoom",C,{passive:!1}).on("mousedown.zoom",R).on("dblclick.zoom",O).filter(i).on("touchstart.zoom",P).on("touchmove.zoom",T).on("touchend.zoom touchcancel.zoom",M).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}p.transform=function(A,$,D,U){var G=A.selection?A.selection():A;G.property("__zoom",Yo),A!==G?w(A,$,D,U):G.interrupt().each(function(){S(this,arguments).event(U).start().zoom(null,typeof $=="function"?$.apply(this,arguments):$).end()})},p.scaleBy=function(A,$,D,U){p.scaleTo(A,function(){var G=this.__zoom.k,q=typeof $=="function"?$.apply(this,arguments):$;return G*q},D,U)},p.scaleTo=function(A,$,D,U){p.transform(A,function(){var G=r.apply(this,arguments),q=this.__zoom,Y=D==null?x(G):typeof D=="function"?D.apply(this,arguments):D,Z=q.invert(Y),K=typeof $=="function"?$.apply(this,arguments):$;return s(y(m(q,K),Y,Z),G,l)},D,U)},p.translateBy=function(A,$,D,U){p.transform(A,function(){return s(this.__zoom.translate(typeof $=="function"?$.apply(this,arguments):$,typeof D=="function"?D.apply(this,arguments):D),r.apply(this,arguments),l)},null,U)},p.translateTo=function(A,$,D,U,G){p.transform(A,function(){var q=r.apply(this,arguments),Y=this.__zoom,Z=U==null?x(q):typeof U=="function"?U.apply(this,arguments):U;return s(Mi.translate(Z[0],Z[1]).scale(Y.k).translate(typeof $=="function"?-$.apply(this,arguments):-$,typeof D=="function"?-D.apply(this,arguments):-D),q,l)},U,G)};function m(A,$){return $=Math.max(o[0],Math.min(o[1],$)),$===A.k?A:new Vt($,A.x,A.y)}function y(A,$,D){var U=$[0]-D[0]*A.k,G=$[1]-D[1]*A.k;return U===A.x&&G===A.y?A:new Vt(A.k,U,G)}function x(A){return[(+A[0][0]+ +A[1][0])/2,(+A[0][1]+ +A[1][1])/2]}function w(A,$,D,U){A.on("start.zoom",function(){S(this,arguments).event(U).start()}).on("interrupt.zoom end.zoom",function(){S(this,arguments).event(U).end()}).tween("zoom",function(){var G=this,q=arguments,Y=S(G,q).event(U),Z=r.apply(G,q),K=D==null?x(Z):typeof D=="function"?D.apply(G,q):D,ue=Math.max(Z[1][0]-Z[0][0],Z[1][1]-Z[0][1]),he=G.__zoom,xe=typeof $=="function"?$.apply(G,q):$,ge=d(he.invert(K).concat(ue/he.k),xe.invert(K).concat(ue/xe.k));return function(be){if(be===1)be=xe;else{var J=ge(be),B=ue/J[2];be=new Vt(B,K[0]-J[0]*B,K[1]-J[1]*B)}Y.zoom(null,be)}})}function S(A,$,D){return!D&&A.__zooming||new k(A,$)}function k(A,$){this.that=A,this.args=$,this.active=0,this.sourceEvent=null,this.extent=r.apply(A,$),this.taps=0}k.prototype={event:function(A){return A&&(this.sourceEvent=A),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(A,$){return this.mouse&&A!=="mouse"&&(this.mouse[1]=$.invert(this.mouse[0])),this.touch0&&A!=="touch"&&(this.touch0[1]=$.invert(this.touch0[0])),this.touch1&&A!=="touch"&&(this.touch1[1]=$.invert(this.touch1[0])),this.that.__zoom=$,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(A){var $=ct(this.that).datum();u.call(A,this.that,new xb(A,{sourceEvent:this.sourceEvent,target:p,transform:this.that.__zoom,dispatch:u}),$)}};function C(A,...$){if(!e.apply(this,arguments))return;var D=S(this,$).event(A),U=this.__zoom,G=Math.max(o[0],Math.min(o[1],U.k*Math.pow(2,a.apply(this,arguments)))),q=Pt(A);if(D.wheel)(D.mouse[0][0]!==q[0]||D.mouse[0][1]!==q[1])&&(D.mouse[1]=U.invert(D.mouse[0]=q)),clearTimeout(D.wheel);else{if(U.k===G)return;D.mouse=[q,U.invert(q)],Mn(this),D.start()}as(A),D.wheel=setTimeout(Y,j),D.zoom("mouse",s(y(m(U,G),D.mouse[0],D.mouse[1]),D.extent,l));function Y(){D.wheel=null,D.end()}}function R(A,...$){if(g||!e.apply(this,arguments))return;var D=A.currentTarget,U=S(this,$,!0).event(A),G=ct(A.view).on("mousemove.zoom",K,!0).on("mouseup.zoom",ue,!0),q=Pt(A,D),Y=A.clientX,Z=A.clientY;jd(A.view),Da(A),U.mouse=[q,this.__zoom.invert(q)],Mn(this),U.start();function K(he){if(as(he),!U.moved){var xe=he.clientX-Y,ge=he.clientY-Z;U.moved=xe*xe+ge*ge>_}U.event(he).zoom("mouse",s(y(U.that.__zoom,U.mouse[0]=Pt(he,D),U.mouse[1]),U.extent,l))}function ue(he){G.on("mousemove.zoom mouseup.zoom",null),_d(he.view,U.moved),as(he),U.event(he).end()}}function O(A,...$){if(e.apply(this,arguments)){var D=this.__zoom,U=Pt(A.changedTouches?A.changedTouches[0]:A,this),G=D.invert(U),q=D.k*(A.shiftKey?.5:2),Y=s(y(m(D,q),U,G),r.apply(this,$),l);as(A),c>0?ct(this).transition().duration(c).call(w,Y,U,A):ct(this).call(p.transform,Y,U,A)}}function P(A,...$){if(e.apply(this,arguments)){var D=A.touches,U=D.length,G=S(this,$,A.changedTouches.length===U).event(A),q,Y,Z,K;for(Da(A),Y=0;Y<U;++Y)Z=D[Y],K=Pt(Z,this),K=[K,this.__zoom.invert(K),Z.identifier],G.touch0?!G.touch1&&G.touch0[2]!==K[2]&&(G.touch1=K,G.taps=0):(G.touch0=K,q=!0,G.taps=1+!!f);f&&(f=clearTimeout(f)),q&&(G.taps<2&&(h=K[0],f=setTimeout(function(){f=null},v)),Mn(this),G.start())}}function T(A,...$){if(this.__zooming){var D=S(this,$).event(A),U=A.changedTouches,G=U.length,q,Y,Z,K;for(as(A),q=0;q<G;++q)Y=U[q],Z=Pt(Y,this),D.touch0&&D.touch0[2]===Y.identifier?D.touch0[0]=Z:D.touch1&&D.touch1[2]===Y.identifier&&(D.touch1[0]=Z);if(Y=D.that.__zoom,D.touch1){var ue=D.touch0[0],he=D.touch0[1],xe=D.touch1[0],ge=D.touch1[1],be=(be=xe[0]-ue[0])*be+(be=xe[1]-ue[1])*be,J=(J=ge[0]-he[0])*J+(J=ge[1]-he[1])*J;Y=m(Y,Math.sqrt(be/J)),Z=[(ue[0]+xe[0])/2,(ue[1]+xe[1])/2],K=[(he[0]+ge[0])/2,(he[1]+ge[1])/2]}else if(D.touch0)Z=D.touch0[0],K=D.touch0[1];else return;D.zoom("touch",s(y(Y,Z,K),D.extent,l))}}function M(A,...$){if(this.__zooming){var D=S(this,$).event(A),U=A.changedTouches,G=U.length,q,Y;for(Da(A),g&&clearTimeout(g),g=setTimeout(function(){g=null},v),q=0;q<G;++q)Y=U[q],D.touch0&&D.touch0[2]===Y.identifier?delete D.touch0:D.touch1&&D.touch1[2]===Y.identifier&&delete D.touch1;if(D.touch1&&!D.touch0&&(D.touch0=D.touch1,delete D.touch1),D.touch0)D.touch0[1]=this.__zoom.invert(D.touch0[0]);else if(D.end(),D.taps===2&&(Y=Pt(Y,this),Math.hypot(h[0]-Y[0],h[1]-Y[1])<b)){var Z=ct(this).on("dblclick.zoom");Z&&Z.apply(this,arguments)}}}return p.wheelDelta=function(A){return arguments.length?(a=typeof A=="function"?A:yn(+A),p):a},p.filter=function(A){return arguments.length?(e=typeof A=="function"?A:yn(!!A),p):e},p.touchable=function(A){return arguments.length?(i=typeof A=="function"?A:yn(!!A),p):i},p.extent=function(A){return arguments.length?(r=typeof A=="function"?A:yn([[+A[0][0],+A[0][1]],[+A[1][0],+A[1][1]]]),p):r},p.scaleExtent=function(A){return arguments.length?(o[0]=+A[0],o[1]=+A[1],p):[o[0],o[1]]},p.translateExtent=function(A){return arguments.length?(l[0][0]=+A[0][0],l[1][0]=+A[1][0],l[0][1]=+A[0][1],l[1][1]=+A[1][1],p):[[l[0][0],l[0][1]],[l[1][0],l[1][1]]]},p.constrain=function(A){return arguments.length?(s=A,p):s},p.duration=function(A){return arguments.length?(c=+A,p):c},p.interpolate=function(A){return arguments.length?(d=A,p):d},p.on=function(){var A=u.on.apply(u,arguments);return A===u?p:A},p.clickDistance=function(A){return arguments.length?(_=(A=+A)*A,p):Math.sqrt(_)},p.tapDistance=function(A){return arguments.length?(b=+A,p):b},p}var Nb=typeof global=="object"&&global&&global.Object===Object&&global,Sb=typeof self=="object"&&self&&self.Object===Object&&self,Rd=Nb||Sb||Function("return this")(),Yn=Rd.Symbol,Od=Object.prototype,kb=Od.hasOwnProperty,Cb=Od.toString,is=Yn?Yn.toStringTag:void 0;function Pb(e){var r=kb.call(e,is),s=e[is];try{e[is]=void 0;var a=!0}catch{}var i=Cb.call(e);return a&&(r?e[is]=s:delete e[is]),i}var Eb=Object.prototype,Rb=Eb.toString;function Ob(e){return Rb.call(e)}var Ab="[object Null]",Tb="[object Undefined]",Xo=Yn?Yn.toStringTag:void 0;function Db(e){return e==null?e===void 0?Tb:Ab:Xo&&Xo in Object(e)?Pb(e):Ob(e)}function $b(e){return e!=null&&typeof e=="object"}var Mb="[object Symbol]";function zb(e){return typeof e=="symbol"||$b(e)&&Db(e)==Mb}var Lb=/\s/;function Fb(e){for(var r=e.length;r--&&Lb.test(e.charAt(r)););return r}var Ib=/^\s+/;function Hb(e){return e&&e.slice(0,Fb(e)+1).replace(Ib,"")}function Xn(e){var r=typeof e;return e!=null&&(r=="object"||r=="function")}var Ko=NaN,Ub=/^[-+]0x[0-9a-f]+$/i,qb=/^0b[01]+$/i,Wb=/^0o[0-7]+$/i,Bb=parseInt;function Jo(e){if(typeof e=="number")return e;if(zb(e))return Ko;if(Xn(e)){var r=typeof e.valueOf=="function"?e.valueOf():e;e=Xn(r)?r+"":r}if(typeof e!="string")return e===0?e:+e;e=Hb(e);var s=qb.test(e);return s||Wb.test(e)?Bb(e.slice(2),s?2:8):Ub.test(e)?Ko:+e}var $a=function(){return Rd.Date.now()},Vb="Expected a function",Gb=Math.max,Yb=Math.min;function Ad(e,r,s){var a,i,o,l,c,d,u=0,f=!1,h=!1,g=!0;if(typeof e!="function")throw new TypeError(Vb);r=Jo(r)||0,Xn(s)&&(f=!!s.leading,h="maxWait"in s,o=h?Gb(Jo(s.maxWait)||0,r):o,g="trailing"in s?!!s.trailing:g);function v(S){var k=a,C=i;return a=i=void 0,u=S,l=e.apply(C,k),l}function j(S){return u=S,c=setTimeout(p,r),f?v(S):l}function _(S){var k=S-d,C=S-u,R=r-k;return h?Yb(R,o-C):R}function b(S){var k=S-d,C=S-u;return d===void 0||k>=r||k<0||h&&C>=o}function p(){var S=$a();if(b(S))return m(S);c=setTimeout(p,_(S))}function m(S){return c=void 0,g&&a?v(S):(a=i=void 0,l)}function y(){c!==void 0&&clearTimeout(c),u=0,a=d=i=c=void 0}function x(){return c===void 0?l:m($a())}function w(){var S=$a(),k=b(S);if(a=arguments,i=this,d=S,k){if(c===void 0)return j(d);if(h)return clearTimeout(c),c=setTimeout(p,r),v(d)}return c===void 0&&(c=setTimeout(p,r)),l}return w.cancel=y,w.flush=x,w}var Xb="Expected a function";function Kb(e,r,s){var a=!0,i=!0;if(typeof e!="function")throw new TypeError(Xb);return Xn(s)&&(a="leading"in s?!!s.leading:a,i="trailing"in s?!!s.trailing:i),Ad(e,r,{leading:a,maxWait:r,trailing:i})}var wr=Object.freeze({Linear:Object.freeze({None:function(e){return e},In:function(e){return e},Out:function(e){return e},InOut:function(e){return e}}),Quadratic:Object.freeze({In:function(e){return e*e},Out:function(e){return e*(2-e)},InOut:function(e){return(e*=2)<1?.5*e*e:-.5*(--e*(e-2)-1)}}),Cubic:Object.freeze({In:function(e){return e*e*e},Out:function(e){return--e*e*e+1},InOut:function(e){return(e*=2)<1?.5*e*e*e:.5*((e-=2)*e*e+2)}}),Quartic:Object.freeze({In:function(e){return e*e*e*e},Out:function(e){return 1- --e*e*e*e},InOut:function(e){return(e*=2)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2)}}),Quintic:Object.freeze({In:function(e){return e*e*e*e*e},Out:function(e){return--e*e*e*e*e+1},InOut:function(e){return(e*=2)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2)}}),Sinusoidal:Object.freeze({In:function(e){return 1-Math.sin((1-e)*Math.PI/2)},Out:function(e){return Math.sin(e*Math.PI/2)},InOut:function(e){return .5*(1-Math.sin(Math.PI*(.5-e)))}}),Exponential:Object.freeze({In:function(e){return e===0?0:Math.pow(1024,e-1)},Out:function(e){return e===1?1:1-Math.pow(2,-10*e)},InOut:function(e){return e===0?0:e===1?1:(e*=2)<1?.5*Math.pow(1024,e-1):.5*(-Math.pow(2,-10*(e-1))+2)}}),Circular:Object.freeze({In:function(e){return 1-Math.sqrt(1-e*e)},Out:function(e){return Math.sqrt(1- --e*e)},InOut:function(e){return(e*=2)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1)}}),Elastic:Object.freeze({In:function(e){return e===0?0:e===1?1:-Math.pow(2,10*(e-1))*Math.sin((e-1.1)*5*Math.PI)},Out:function(e){return e===0?0:e===1?1:Math.pow(2,-10*e)*Math.sin((e-.1)*5*Math.PI)+1},InOut:function(e){return e===0?0:e===1?1:(e*=2,e<1?-.5*Math.pow(2,10*(e-1))*Math.sin((e-1.1)*5*Math.PI):.5*Math.pow(2,-10*(e-1))*Math.sin((e-1.1)*5*Math.PI)+1)}}),Back:Object.freeze({In:function(e){var r=1.70158;return e===1?1:e*e*((r+1)*e-r)},Out:function(e){var r=1.70158;return e===0?0:--e*e*((r+1)*e+r)+1},InOut:function(e){var r=2.5949095;return(e*=2)<1?.5*(e*e*((r+1)*e-r)):.5*((e-=2)*e*((r+1)*e+r)+2)}}),Bounce:Object.freeze({In:function(e){return 1-wr.Bounce.Out(1-e)},Out:function(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375},InOut:function(e){return e<.5?wr.Bounce.In(e*2)*.5:wr.Bounce.Out(e*2-1)*.5+.5}}),generatePow:function(e){return e===void 0&&(e=4),e=e<Number.EPSILON?Number.EPSILON:e,e=e>1e4?1e4:e,{In:function(r){return Math.pow(r,e)},Out:function(r){return 1-Math.pow(1-r,e)},InOut:function(r){return r<.5?Math.pow(r*2,e)/2:(1-Math.pow(2-r*2,e))/2+.5}}}}),_s=function(){return performance.now()},Td=(function(){function e(){for(var r=[],s=0;s<arguments.length;s++)r[s]=arguments[s];this._tweens={},this._tweensAddedDuringUpdate={},this.add.apply(this,r)}return e.prototype.getAll=function(){var r=this;return Object.keys(this._tweens).map(function(s){return r._tweens[s]})},e.prototype.removeAll=function(){this._tweens={}},e.prototype.add=function(){for(var r,s=[],a=0;a<arguments.length;a++)s[a]=arguments[a];for(var i=0,o=s;i<o.length;i++){var l=o[i];(r=l._group)===null||r===void 0||r.remove(l),l._group=this,this._tweens[l.getId()]=l,this._tweensAddedDuringUpdate[l.getId()]=l}},e.prototype.remove=function(){for(var r=[],s=0;s<arguments.length;s++)r[s]=arguments[s];for(var a=0,i=r;a<i.length;a++){var o=i[a];o._group=void 0,delete this._tweens[o.getId()],delete this._tweensAddedDuringUpdate[o.getId()]}},e.prototype.allStopped=function(){return this.getAll().every(function(r){return!r.isPlaying()})},e.prototype.update=function(r,s){r===void 0&&(r=_s()),s===void 0&&(s=!0);var a=Object.keys(this._tweens);if(a.length!==0)for(;a.length>0;){this._tweensAddedDuringUpdate={};for(var i=0;i<a.length;i++){var o=this._tweens[a[i]],l=!s;o&&o.update(r,l)===!1&&!s&&this.remove(o)}a=Object.keys(this._tweensAddedDuringUpdate)}},e})(),ai={Linear:function(e,r){var s=e.length-1,a=s*r,i=Math.floor(a),o=ai.Utils.Linear;return r<0?o(e[0],e[1],a):r>1?o(e[s],e[s-1],s-a):o(e[i],e[i+1>s?s:i+1],a-i)},Utils:{Linear:function(e,r,s){return(r-e)*s+e}}},Dd=(function(){function e(){}return e.nextId=function(){return e._nextId++},e._nextId=0,e})(),ii=new Td,Qo=(function(){function e(r,s){this._isPaused=!1,this._pauseStart=0,this._valuesStart={},this._valuesEnd={},this._valuesStartRepeat={},this._duration=1e3,this._isDynamic=!1,this._initialRepeat=0,this._repeat=0,this._yoyo=!1,this._isPlaying=!1,this._reversed=!1,this._delayTime=0,this._startTime=0,this._easingFunction=wr.Linear.None,this._interpolationFunction=ai.Linear,this._chainedTweens=[],this._onStartCallbackFired=!1,this._onEveryStartCallbackFired=!1,this._id=Dd.nextId(),this._isChainStopped=!1,this._propertiesAreSetUp=!1,this._goToEnd=!1,this._object=r,typeof s=="object"?(this._group=s,s.add(this)):s===!0&&(this._group=ii,ii.add(this))}return e.prototype.getId=function(){return this._id},e.prototype.isPlaying=function(){return this._isPlaying},e.prototype.isPaused=function(){return this._isPaused},e.prototype.getDuration=function(){return this._duration},e.prototype.to=function(r,s){if(s===void 0&&(s=1e3),this._isPlaying)throw new Error("Can not call Tween.to() while Tween is already started or paused. Stop the Tween first.");return this._valuesEnd=r,this._propertiesAreSetUp=!1,this._duration=s<0?0:s,this},e.prototype.duration=function(r){return r===void 0&&(r=1e3),this._duration=r<0?0:r,this},e.prototype.dynamic=function(r){return r===void 0&&(r=!1),this._isDynamic=r,this},e.prototype.start=function(r,s){if(r===void 0&&(r=_s()),s===void 0&&(s=!1),this._isPlaying)return this;if(this._repeat=this._initialRepeat,this._reversed){this._reversed=!1;for(var a in this._valuesStartRepeat)this._swapEndStartRepeatValues(a),this._valuesStart[a]=this._valuesStartRepeat[a]}if(this._isPlaying=!0,this._isPaused=!1,this._onStartCallbackFired=!1,this._onEveryStartCallbackFired=!1,this._isChainStopped=!1,this._startTime=r,this._startTime+=this._delayTime,!this._propertiesAreSetUp||s){if(this._propertiesAreSetUp=!0,!this._isDynamic){var i={};for(var o in this._valuesEnd)i[o]=this._valuesEnd[o];this._valuesEnd=i}this._setupProperties(this._object,this._valuesStart,this._valuesEnd,this._valuesStartRepeat,s)}return this},e.prototype.startFromCurrentValues=function(r){return this.start(r,!0)},e.prototype._setupProperties=function(r,s,a,i,o){for(var l in a){var c=r[l],d=Array.isArray(c),u=d?"array":typeof c,f=!d&&Array.isArray(a[l]);if(!(u==="undefined"||u==="function")){if(f){var h=a[l];if(h.length===0)continue;for(var g=[c],v=0,j=h.length;v<j;v+=1){var _=this._handleRelativeValue(c,h[v]);if(isNaN(_)){f=!1,console.warn("Found invalid interpolation list. Skipping.");break}g.push(_)}f&&(a[l]=g)}if((u==="object"||d)&&c&&!f){s[l]=d?[]:{};var b=c;for(var p in b)s[l][p]=b[p];i[l]=d?[]:{};var h=a[l];if(!this._isDynamic){var m={};for(var p in h)m[p]=h[p];a[l]=h=m}this._setupProperties(b,s[l],h,i[l],o)}else(typeof s[l]>"u"||o)&&(s[l]=c),d||(s[l]*=1),f?i[l]=a[l].slice().reverse():i[l]=s[l]||0}}},e.prototype.stop=function(){return this._isChainStopped||(this._isChainStopped=!0,this.stopChainedTweens()),this._isPlaying?(this._isPlaying=!1,this._isPaused=!1,this._onStopCallback&&this._onStopCallback(this._object),this):this},e.prototype.end=function(){return this._goToEnd=!0,this.update(this._startTime+this._duration),this},e.prototype.pause=function(r){return r===void 0&&(r=_s()),this._isPaused||!this._isPlaying?this:(this._isPaused=!0,this._pauseStart=r,this)},e.prototype.resume=function(r){return r===void 0&&(r=_s()),!this._isPaused||!this._isPlaying?this:(this._isPaused=!1,this._startTime+=r-this._pauseStart,this._pauseStart=0,this)},e.prototype.stopChainedTweens=function(){for(var r=0,s=this._chainedTweens.length;r<s;r++)this._chainedTweens[r].stop();return this},e.prototype.group=function(r){return r?(r.add(this),this):(console.warn("tween.group() without args has been removed, use group.add(tween) instead."),this)},e.prototype.remove=function(){var r;return(r=this._group)===null||r===void 0||r.remove(this),this},e.prototype.delay=function(r){return r===void 0&&(r=0),this._delayTime=r,this},e.prototype.repeat=function(r){return r===void 0&&(r=0),this._initialRepeat=r,this._repeat=r,this},e.prototype.repeatDelay=function(r){return this._repeatDelayTime=r,this},e.prototype.yoyo=function(r){return r===void 0&&(r=!1),this._yoyo=r,this},e.prototype.easing=function(r){return r===void 0&&(r=wr.Linear.None),this._easingFunction=r,this},e.prototype.interpolation=function(r){return r===void 0&&(r=ai.Linear),this._interpolationFunction=r,this},e.prototype.chain=function(){for(var r=[],s=0;s<arguments.length;s++)r[s]=arguments[s];return this._chainedTweens=r,this},e.prototype.onStart=function(r){return this._onStartCallback=r,this},e.prototype.onEveryStart=function(r){return this._onEveryStartCallback=r,this},e.prototype.onUpdate=function(r){return this._onUpdateCallback=r,this},e.prototype.onRepeat=function(r){return this._onRepeatCallback=r,this},e.prototype.onComplete=function(r){return this._onCompleteCallback=r,this},e.prototype.onStop=function(r){return this._onStopCallback=r,this},e.prototype.update=function(r,s){var a=this,i;if(r===void 0&&(r=_s()),s===void 0&&(s=e.autoStartOnUpdate),this._isPaused)return!0;var o;if(!this._goToEnd&&!this._isPlaying)if(s)this.start(r,!0);else return!1;if(this._goToEnd=!1,r<this._startTime)return!0;this._onStartCallbackFired===!1&&(this._onStartCallback&&this._onStartCallback(this._object),this._onStartCallbackFired=!0),this._onEveryStartCallbackFired===!1&&(this._onEveryStartCallback&&this._onEveryStartCallback(this._object),this._onEveryStartCallbackFired=!0);var l=r-this._startTime,c=this._duration+((i=this._repeatDelayTime)!==null&&i!==void 0?i:this._delayTime),d=this._duration+this._repeat*c,u=function(){if(a._duration===0||l>d)return 1;var _=Math.trunc(l/c),b=l-_*c,p=Math.min(b/a._duration,1);return p===0&&l===a._duration?1:p},f=u(),h=this._easingFunction(f);if(this._updateProperties(this._object,this._valuesStart,this._valuesEnd,h),this._onUpdateCallback&&this._onUpdateCallback(this._object,f),this._duration===0||l>=this._duration)if(this._repeat>0){var g=Math.min(Math.trunc((l-this._duration)/c)+1,this._repeat);isFinite(this._repeat)&&(this._repeat-=g);for(o in this._valuesStartRepeat)!this._yoyo&&typeof this._valuesEnd[o]=="string"&&(this._valuesStartRepeat[o]=this._valuesStartRepeat[o]+parseFloat(this._valuesEnd[o])),this._yoyo&&this._swapEndStartRepeatValues(o),this._valuesStart[o]=this._valuesStartRepeat[o];return this._yoyo&&(this._reversed=!this._reversed),this._startTime+=c*g,this._onRepeatCallback&&this._onRepeatCallback(this._object),this._onEveryStartCallbackFired=!1,!0}else{this._onCompleteCallback&&this._onCompleteCallback(this._object);for(var v=0,j=this._chainedTweens.length;v<j;v++)this._chainedTweens[v].start(this._startTime+this._duration,!1);return this._isPlaying=!1,!1}return!0},e.prototype._updateProperties=function(r,s,a,i){for(var o in a)if(s[o]!==void 0){var l=s[o]||0,c=a[o],d=Array.isArray(r[o]),u=Array.isArray(c),f=!d&&u;f?r[o]=this._interpolationFunction(c,i):typeof c=="object"&&c?this._updateProperties(r[o],l,c,i):(c=this._handleRelativeValue(l,c),typeof c=="number"&&(r[o]=l+(c-l)*i))}},e.prototype._handleRelativeValue=function(r,s){return typeof s!="string"?s:s.charAt(0)==="+"||s.charAt(0)==="-"?r+parseFloat(s):parseFloat(s)},e.prototype._swapEndStartRepeatValues=function(r){var s=this._valuesStartRepeat[r],a=this._valuesEnd[r];typeof a=="string"?this._valuesStartRepeat[r]=this._valuesStartRepeat[r]+parseFloat(a):this._valuesStartRepeat[r]=this._valuesEnd[r],this._valuesEnd[r]=s},e.autoStartOnUpdate=!1,e})();Dd.nextId;var Dt=ii;Dt.getAll.bind(Dt);Dt.removeAll.bind(Dt);Dt.add.bind(Dt);Dt.remove.bind(Dt);Dt.update.bind(Dt);function Zo(e,r){(r==null||r>e.length)&&(r=e.length);for(var s=0,a=Array(r);s<r;s++)a[s]=e[s];return a}function Jb(e){if(Array.isArray(e))return e}function Qb(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function Zb(e,r,s){return Object.defineProperty(e,"prototype",{writable:!1}),e}function ev(e,r){var s=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(s!=null){var a,i,o,l,c=[],d=!0,u=!1;try{if(o=(s=s.call(e)).next,r!==0)for(;!(d=(a=o.call(s)).done)&&(c.push(a.value),c.length!==r);d=!0);}catch(f){u=!0,i=f}finally{try{if(!d&&s.return!=null&&(l=s.return(),Object(l)!==l))return}finally{if(u)throw i}}return c}}function tv(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function rv(e,r){return Jb(e)||ev(e,r)||sv(e,r)||tv()}function sv(e,r){if(e){if(typeof e=="string")return Zo(e,r);var s={}.toString.call(e).slice(8,-1);return s==="Object"&&e.constructor&&(s=e.constructor.name),s==="Map"||s==="Set"?Array.from(e):s==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s)?Zo(e,r):void 0}}var nv=Zb(function e(r,s){var a=s.default,i=a===void 0?null:a,o=s.triggerUpdate,l=o===void 0?!0:o,c=s.onChange,d=c===void 0?function(u,f){}:c;Qb(this,e),this.name=r,this.defaultVal=i,this.triggerUpdate=l,this.onChange=d});function zi(e){var r=e.stateInit,s=r===void 0?function(){return{}}:r,a=e.props,i=a===void 0?{}:a,o=e.methods,l=o===void 0?{}:o,c=e.aliases,d=c===void 0?{}:c,u=e.init,f=u===void 0?function(){}:u,h=e.update,g=h===void 0?function(){}:h,v=Object.keys(i).map(function(j){return new nv(j,i[j])});return function j(){for(var _=arguments.length,b=new Array(_),p=0;p<_;p++)b[p]=arguments[p];var m=!!(this instanceof j&&this.constructor),y=m?b.shift():void 0,x=b[0],w=x===void 0?{}:x,S=Object.assign({},s instanceof Function?s(w):s,{initialised:!1}),k={};function C(P){return R(P,w),O(),C}var R=function(T,M){f.call(C,T,S,M),S.initialised=!0},O=Ad(function(){S.initialised&&(g.call(C,S,k),k={})},1);return v.forEach(function(P){C[P.name]=T(P);function T(M){var A=M.name,$=M.triggerUpdate,D=$===void 0?!1:$,U=M.onChange,G=U===void 0?function(Z,K){}:U,q=M.defaultVal,Y=q===void 0?null:q;return function(Z){var K=S[A];if(!arguments.length)return K;var ue=Z===void 0?Y:Z;return S[A]=ue,G.call(C,ue,S,K),!k.hasOwnProperty(A)&&(k[A]=K),D&&O(),C}}}),Object.keys(l).forEach(function(P){C[P]=function(){for(var T,M=arguments.length,A=new Array(M),$=0;$<M;$++)A[$]=arguments[$];return(T=l[P]).call.apply(T,[C,S].concat(A))}}),Object.entries(d).forEach(function(P){var T=rv(P,2),M=T[0],A=T[1];return C[M]=C[A]}),C.resetProps=function(){return v.forEach(function(P){C[P.name](P.defaultVal)}),C},C.resetProps(),S._rerender=O,m&&y&&C(y),C}}var je=(function(e){return typeof e=="function"?e:typeof e=="string"?function(r){return r[e]}:function(r){return e}});function Kn(e){"@babel/helpers - typeof";return Kn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},Kn(e)}var av=/^\s+/,iv=/\s+$/;function ne(e,r){if(e=e||"",r=r||{},e instanceof ne)return e;if(!(this instanceof ne))return new ne(e,r);var s=ov(e);this._originalInput=e,this._r=s.r,this._g=s.g,this._b=s.b,this._a=s.a,this._roundA=Math.round(100*this._a)/100,this._format=r.format||s.format,this._gradientType=r.gradientType,this._r<1&&(this._r=Math.round(this._r)),this._g<1&&(this._g=Math.round(this._g)),this._b<1&&(this._b=Math.round(this._b)),this._ok=s.ok}ne.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var r=this.toRgb();return(r.r*299+r.g*587+r.b*114)/1e3},getLuminance:function(){var r=this.toRgb(),s,a,i,o,l,c;return s=r.r/255,a=r.g/255,i=r.b/255,s<=.03928?o=s/12.92:o=Math.pow((s+.055)/1.055,2.4),a<=.03928?l=a/12.92:l=Math.pow((a+.055)/1.055,2.4),i<=.03928?c=i/12.92:c=Math.pow((i+.055)/1.055,2.4),.2126*o+.7152*l+.0722*c},setAlpha:function(r){return this._a=$d(r),this._roundA=Math.round(100*this._a)/100,this},toHsv:function(){var r=tl(this._r,this._g,this._b);return{h:r.h*360,s:r.s,v:r.v,a:this._a}},toHsvString:function(){var r=tl(this._r,this._g,this._b),s=Math.round(r.h*360),a=Math.round(r.s*100),i=Math.round(r.v*100);return this._a==1?"hsv("+s+", "+a+"%, "+i+"%)":"hsva("+s+", "+a+"%, "+i+"%, "+this._roundA+")"},toHsl:function(){var r=el(this._r,this._g,this._b);return{h:r.h*360,s:r.s,l:r.l,a:this._a}},toHslString:function(){var r=el(this._r,this._g,this._b),s=Math.round(r.h*360),a=Math.round(r.s*100),i=Math.round(r.l*100);return this._a==1?"hsl("+s+", "+a+"%, "+i+"%)":"hsla("+s+", "+a+"%, "+i+"%, "+this._roundA+")"},toHex:function(r){return rl(this._r,this._g,this._b,r)},toHexString:function(r){return"#"+this.toHex(r)},toHex8:function(r){return uv(this._r,this._g,this._b,this._a,r)},toHex8String:function(r){return"#"+this.toHex8(r)},toRgb:function(){return{r:Math.round(this._r),g:Math.round(this._g),b:Math.round(this._b),a:this._a}},toRgbString:function(){return this._a==1?"rgb("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+")":"rgba("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:Math.round(Oe(this._r,255)*100)+"%",g:Math.round(Oe(this._g,255)*100)+"%",b:Math.round(Oe(this._b,255)*100)+"%",a:this._a}},toPercentageRgbString:function(){return this._a==1?"rgb("+Math.round(Oe(this._r,255)*100)+"%, "+Math.round(Oe(this._g,255)*100)+"%, "+Math.round(Oe(this._b,255)*100)+"%)":"rgba("+Math.round(Oe(this._r,255)*100)+"%, "+Math.round(Oe(this._g,255)*100)+"%, "+Math.round(Oe(this._b,255)*100)+"%, "+this._roundA+")"},toName:function(){return this._a===0?"transparent":this._a<1?!1:_v[rl(this._r,this._g,this._b,!0)]||!1},toFilter:function(r){var s="#"+sl(this._r,this._g,this._b,this._a),a=s,i=this._gradientType?"GradientType = 1, ":"";if(r){var o=ne(r);a="#"+sl(o._r,o._g,o._b,o._a)}return"progid:DXImageTransform.Microsoft.gradient("+i+"startColorstr="+s+",endColorstr="+a+")"},toString:function(r){var s=!!r;r=r||this._format;var a=!1,i=this._a<1&&this._a>=0,o=!s&&i&&(r==="hex"||r==="hex6"||r==="hex3"||r==="hex4"||r==="hex8"||r==="name");return o?r==="name"&&this._a===0?this.toName():this.toRgbString():(r==="rgb"&&(a=this.toRgbString()),r==="prgb"&&(a=this.toPercentageRgbString()),(r==="hex"||r==="hex6")&&(a=this.toHexString()),r==="hex3"&&(a=this.toHexString(!0)),r==="hex4"&&(a=this.toHex8String(!0)),r==="hex8"&&(a=this.toHex8String()),r==="name"&&(a=this.toName()),r==="hsl"&&(a=this.toHslString()),r==="hsv"&&(a=this.toHsvString()),a||this.toHexString())},clone:function(){return ne(this.toString())},_applyModification:function(r,s){var a=r.apply(null,[this].concat([].slice.call(s)));return this._r=a._r,this._g=a._g,this._b=a._b,this.setAlpha(a._a),this},lighten:function(){return this._applyModification(pv,arguments)},brighten:function(){return this._applyModification(gv,arguments)},darken:function(){return this._applyModification(xv,arguments)},desaturate:function(){return this._applyModification(hv,arguments)},saturate:function(){return this._applyModification(fv,arguments)},greyscale:function(){return this._applyModification(mv,arguments)},spin:function(){return this._applyModification(yv,arguments)},_applyCombination:function(r,s){return r.apply(null,[this].concat([].slice.call(s)))},analogous:function(){return this._applyCombination(wv,arguments)},complement:function(){return this._applyCombination(bv,arguments)},monochromatic:function(){return this._applyCombination(jv,arguments)},splitcomplement:function(){return this._applyCombination(vv,arguments)},triad:function(){return this._applyCombination(nl,[3])},tetrad:function(){return this._applyCombination(nl,[4])}};ne.fromRatio=function(e,r){if(Kn(e)=="object"){var s={};for(var a in e)e.hasOwnProperty(a)&&(a==="a"?s[a]=e[a]:s[a]=Ns(e[a]));e=s}return ne(e,r)};function ov(e){var r={r:0,g:0,b:0},s=1,a=null,i=null,o=null,l=!1,c=!1;return typeof e=="string"&&(e=Cv(e)),Kn(e)=="object"&&(It(e.r)&&It(e.g)&&It(e.b)?(r=lv(e.r,e.g,e.b),l=!0,c=String(e.r).substr(-1)==="%"?"prgb":"rgb"):It(e.h)&&It(e.s)&&It(e.v)?(a=Ns(e.s),i=Ns(e.v),r=dv(e.h,a,i),l=!0,c="hsv"):It(e.h)&&It(e.s)&&It(e.l)&&(a=Ns(e.s),o=Ns(e.l),r=cv(e.h,a,o),l=!0,c="hsl"),e.hasOwnProperty("a")&&(s=e.a)),s=$d(s),{ok:l,format:e.format||c,r:Math.min(255,Math.max(r.r,0)),g:Math.min(255,Math.max(r.g,0)),b:Math.min(255,Math.max(r.b,0)),a:s}}function lv(e,r,s){return{r:Oe(e,255)*255,g:Oe(r,255)*255,b:Oe(s,255)*255}}function el(e,r,s){e=Oe(e,255),r=Oe(r,255),s=Oe(s,255);var a=Math.max(e,r,s),i=Math.min(e,r,s),o,l,c=(a+i)/2;if(a==i)o=l=0;else{var d=a-i;switch(l=c>.5?d/(2-a-i):d/(a+i),a){case e:o=(r-s)/d+(r<s?6:0);break;case r:o=(s-e)/d+2;break;case s:o=(e-r)/d+4;break}o/=6}return{h:o,s:l,l:c}}function cv(e,r,s){var a,i,o;e=Oe(e,360),r=Oe(r,100),s=Oe(s,100);function l(u,f,h){return h<0&&(h+=1),h>1&&(h-=1),h<1/6?u+(f-u)*6*h:h<1/2?f:h<2/3?u+(f-u)*(2/3-h)*6:u}if(r===0)a=i=o=s;else{var c=s<.5?s*(1+r):s+r-s*r,d=2*s-c;a=l(d,c,e+1/3),i=l(d,c,e),o=l(d,c,e-1/3)}return{r:a*255,g:i*255,b:o*255}}function tl(e,r,s){e=Oe(e,255),r=Oe(r,255),s=Oe(s,255);var a=Math.max(e,r,s),i=Math.min(e,r,s),o,l,c=a,d=a-i;if(l=a===0?0:d/a,a==i)o=0;else{switch(a){case e:o=(r-s)/d+(r<s?6:0);break;case r:o=(s-e)/d+2;break;case s:o=(e-r)/d+4;break}o/=6}return{h:o,s:l,v:c}}function dv(e,r,s){e=Oe(e,360)*6,r=Oe(r,100),s=Oe(s,100);var a=Math.floor(e),i=e-a,o=s*(1-r),l=s*(1-i*r),c=s*(1-(1-i)*r),d=a%6,u=[s,l,o,o,c,s][d],f=[c,s,s,l,o,o][d],h=[o,o,c,s,s,l][d];return{r:u*255,g:f*255,b:h*255}}function rl(e,r,s,a){var i=[gt(Math.round(e).toString(16)),gt(Math.round(r).toString(16)),gt(Math.round(s).toString(16))];return a&&i[0].charAt(0)==i[0].charAt(1)&&i[1].charAt(0)==i[1].charAt(1)&&i[2].charAt(0)==i[2].charAt(1)?i[0].charAt(0)+i[1].charAt(0)+i[2].charAt(0):i.join("")}function uv(e,r,s,a,i){var o=[gt(Math.round(e).toString(16)),gt(Math.round(r).toString(16)),gt(Math.round(s).toString(16)),gt(Md(a))];return i&&o[0].charAt(0)==o[0].charAt(1)&&o[1].charAt(0)==o[1].charAt(1)&&o[2].charAt(0)==o[2].charAt(1)&&o[3].charAt(0)==o[3].charAt(1)?o[0].charAt(0)+o[1].charAt(0)+o[2].charAt(0)+o[3].charAt(0):o.join("")}function sl(e,r,s,a){var i=[gt(Md(a)),gt(Math.round(e).toString(16)),gt(Math.round(r).toString(16)),gt(Math.round(s).toString(16))];return i.join("")}ne.equals=function(e,r){return!e||!r?!1:ne(e).toRgbString()==ne(r).toRgbString()};ne.random=function(){return ne.fromRatio({r:Math.random(),g:Math.random(),b:Math.random()})};function hv(e,r){r=r===0?0:r||10;var s=ne(e).toHsl();return s.s-=r/100,s.s=xa(s.s),ne(s)}function fv(e,r){r=r===0?0:r||10;var s=ne(e).toHsl();return s.s+=r/100,s.s=xa(s.s),ne(s)}function mv(e){return ne(e).desaturate(100)}function pv(e,r){r=r===0?0:r||10;var s=ne(e).toHsl();return s.l+=r/100,s.l=xa(s.l),ne(s)}function gv(e,r){r=r===0?0:r||10;var s=ne(e).toRgb();return s.r=Math.max(0,Math.min(255,s.r-Math.round(255*-(r/100)))),s.g=Math.max(0,Math.min(255,s.g-Math.round(255*-(r/100)))),s.b=Math.max(0,Math.min(255,s.b-Math.round(255*-(r/100)))),ne(s)}function xv(e,r){r=r===0?0:r||10;var s=ne(e).toHsl();return s.l-=r/100,s.l=xa(s.l),ne(s)}function yv(e,r){var s=ne(e).toHsl(),a=(s.h+r)%360;return s.h=a<0?360+a:a,ne(s)}function bv(e){var r=ne(e).toHsl();return r.h=(r.h+180)%360,ne(r)}function nl(e,r){if(isNaN(r)||r<=0)throw new Error("Argument to polyad must be a positive number");for(var s=ne(e).toHsl(),a=[ne(e)],i=360/r,o=1;o<r;o++)a.push(ne({h:(s.h+o*i)%360,s:s.s,l:s.l}));return a}function vv(e){var r=ne(e).toHsl(),s=r.h;return[ne(e),ne({h:(s+72)%360,s:r.s,l:r.l}),ne({h:(s+216)%360,s:r.s,l:r.l})]}function wv(e,r,s){r=r||6,s=s||30;var a=ne(e).toHsl(),i=360/s,o=[ne(e)];for(a.h=(a.h-(i*r>>1)+720)%360;--r;)a.h=(a.h+i)%360,o.push(ne(a));return o}function jv(e,r){r=r||6;for(var s=ne(e).toHsv(),a=s.h,i=s.s,o=s.v,l=[],c=1/r;r--;)l.push(ne({h:a,s:i,v:o})),o=(o+c)%1;return l}ne.mix=function(e,r,s){s=s===0?0:s||50;var a=ne(e).toRgb(),i=ne(r).toRgb(),o=s/100,l={r:(i.r-a.r)*o+a.r,g:(i.g-a.g)*o+a.g,b:(i.b-a.b)*o+a.b,a:(i.a-a.a)*o+a.a};return ne(l)};ne.readability=function(e,r){var s=ne(e),a=ne(r);return(Math.max(s.getLuminance(),a.getLuminance())+.05)/(Math.min(s.getLuminance(),a.getLuminance())+.05)};ne.isReadable=function(e,r,s){var a=ne.readability(e,r),i,o;switch(o=!1,i=Pv(s),i.level+i.size){case"AAsmall":case"AAAlarge":o=a>=4.5;break;case"AAlarge":o=a>=3;break;case"AAAsmall":o=a>=7;break}return o};ne.mostReadable=function(e,r,s){var a=null,i=0,o,l,c,d;s=s||{},l=s.includeFallbackColors,c=s.level,d=s.size;for(var u=0;u<r.length;u++)o=ne.readability(e,r[u]),o>i&&(i=o,a=ne(r[u]));return ne.isReadable(e,a,{level:c,size:d})||!l?a:(s.includeFallbackColors=!1,ne.mostReadable(e,["#fff","#000"],s))};var oi=ne.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},_v=ne.hexNames=Nv(oi);function Nv(e){var r={};for(var s in e)e.hasOwnProperty(s)&&(r[e[s]]=s);return r}function $d(e){return e=parseFloat(e),(isNaN(e)||e<0||e>1)&&(e=1),e}function Oe(e,r){Sv(e)&&(e="100%");var s=kv(e);return e=Math.min(r,Math.max(0,parseFloat(e))),s&&(e=parseInt(e*r,10)/100),Math.abs(e-r)<1e-6?1:e%r/parseFloat(r)}function xa(e){return Math.min(1,Math.max(0,e))}function tt(e){return parseInt(e,16)}function Sv(e){return typeof e=="string"&&e.indexOf(".")!=-1&&parseFloat(e)===1}function kv(e){return typeof e=="string"&&e.indexOf("%")!=-1}function gt(e){return e.length==1?"0"+e:""+e}function Ns(e){return e<=1&&(e=e*100+"%"),e}function Md(e){return Math.round(parseFloat(e)*255).toString(16)}function al(e){return tt(e)/255}var ft=(function(){var e="[-\\+]?\\d+%?",r="[-\\+]?\\d*\\.\\d+%?",s="(?:"+r+")|(?:"+e+")",a="[\\s|\\(]+("+s+")[,|\\s]+("+s+")[,|\\s]+("+s+")\\s*\\)?",i="[\\s|\\(]+("+s+")[,|\\s]+("+s+")[,|\\s]+("+s+")[,|\\s]+("+s+")\\s*\\)?";return{CSS_UNIT:new RegExp(s),rgb:new RegExp("rgb"+a),rgba:new RegExp("rgba"+i),hsl:new RegExp("hsl"+a),hsla:new RegExp("hsla"+i),hsv:new RegExp("hsv"+a),hsva:new RegExp("hsva"+i),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/}})();function It(e){return!!ft.CSS_UNIT.exec(e)}function Cv(e){e=e.replace(av,"").replace(iv,"").toLowerCase();var r=!1;if(oi[e])e=oi[e],r=!0;else if(e=="transparent")return{r:0,g:0,b:0,a:0,format:"name"};var s;return(s=ft.rgb.exec(e))?{r:s[1],g:s[2],b:s[3]}:(s=ft.rgba.exec(e))?{r:s[1],g:s[2],b:s[3],a:s[4]}:(s=ft.hsl.exec(e))?{h:s[1],s:s[2],l:s[3]}:(s=ft.hsla.exec(e))?{h:s[1],s:s[2],l:s[3],a:s[4]}:(s=ft.hsv.exec(e))?{h:s[1],s:s[2],v:s[3]}:(s=ft.hsva.exec(e))?{h:s[1],s:s[2],v:s[3],a:s[4]}:(s=ft.hex8.exec(e))?{r:tt(s[1]),g:tt(s[2]),b:tt(s[3]),a:al(s[4]),format:r?"name":"hex8"}:(s=ft.hex6.exec(e))?{r:tt(s[1]),g:tt(s[2]),b:tt(s[3]),format:r?"name":"hex"}:(s=ft.hex4.exec(e))?{r:tt(s[1]+""+s[1]),g:tt(s[2]+""+s[2]),b:tt(s[3]+""+s[3]),a:al(s[4]+""+s[4]),format:r?"name":"hex8"}:(s=ft.hex3.exec(e))?{r:tt(s[1]+""+s[1]),g:tt(s[2]+""+s[2]),b:tt(s[3]+""+s[3]),format:r?"name":"hex"}:!1}function Pv(e){var r,s;return e=e||{level:"AA",size:"small"},r=(e.level||"AA").toUpperCase(),s=(e.size||"small").toLowerCase(),r!=="AA"&&r!=="AAA"&&(r="AA"),s!=="small"&&s!=="large"&&(s="small"),{level:r,size:s}}function li(e,r){(r==null||r>e.length)&&(r=e.length);for(var s=0,a=Array(r);s<r;s++)a[s]=e[s];return a}function Ev(e){if(Array.isArray(e))return li(e)}function zd(e,r,s){if(typeof e=="function"?e===r:e.has(r))return arguments.length<3?r:s;throw new TypeError("Private element is not present on this object")}function Rv(e,r){if(r.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Ov(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function it(e,r){return e.get(zd(e,r))}function il(e,r,s){Rv(e,r),r.set(e,s)}function ol(e,r,s){return e.set(zd(e,r),s),s}function Av(e,r){for(var s=0;s<r.length;s++){var a=r[s];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,Lv(a.key),a)}}function Tv(e,r,s){return r&&Av(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function Dv(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function $v(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Mv(e){return Ev(e)||Dv(e)||Fv(e)||$v()}function zv(e,r){if(typeof e!="object"||!e)return e;var s=e[Symbol.toPrimitive];if(s!==void 0){var a=s.call(e,r);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function Lv(e){var r=zv(e,"string");return typeof r=="symbol"?r:r+""}function Fv(e,r){if(e){if(typeof e=="string")return li(e,r);var s={}.toString.call(e).slice(8,-1);return s==="Object"&&e.constructor&&(s=e.constructor.name),s==="Map"||s==="Set"?Array.from(e):s==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s)?li(e,r):void 0}}var Iv=123,Hv=function(r){return"#".concat(Math.min(r,Math.pow(2,24)).toString(16).padStart(6,"0"))},Ld=function(r,s,a){return(r<<16)+(s<<8)+a},Uv=function(r){var s=ne(r).toRgb(),a=s.r,i=s.g,o=s.b;return Ld(a,i,o)},ll=function(r,s){return r*Iv%Math.pow(2,s)},fr=new WeakMap,Ht=new WeakMap,qv=(function(){function e(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:6;Ov(this,e),il(this,fr,void 0),il(this,Ht,void 0),ol(Ht,this,r),this.reset()}return Tv(e,[{key:"reset",value:function(){ol(fr,this,["__reserved for background__"])}},{key:"register",value:function(s){if(it(fr,this).length>=Math.pow(2,24-it(Ht,this)))return null;var a=it(fr,this).length,i=ll(a,it(Ht,this)),o=Hv(a+(i<<24-it(Ht,this)));return it(fr,this).push(s),o}},{key:"lookup",value:function(s){if(!s)return null;var a=typeof s=="string"?Uv(s):Ld.apply(void 0,Mv(s));if(!a)return null;var i=a&Math.pow(2,24-it(Ht,this))-1,o=a>>24-it(Ht,this)&Math.pow(2,it(Ht,this))-1;return ll(i,it(Ht,this))!==o||i>=it(fr,this).length?null:it(fr,this)[i]}}])})(),tn,Ae,Fd,Id,xr,cl,Hd,Ud,qd,Li,ci,di,qs={},Wd=[],Wv=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,ya=Array.isArray;function Rt(e,r){for(var s in r)e[s]=r[s];return e}function Fi(e){e&&e.parentNode&&e.parentNode.removeChild(e)}function Bv(e,r,s){var a,i,o,l={};for(o in r)o=="key"?a=r[o]:o=="ref"?i=r[o]:l[o]=r[o];if(arguments.length>2&&(l.children=arguments.length>3?tn.call(arguments,2):s),typeof e=="function"&&e.defaultProps!=null)for(o in e.defaultProps)l[o]===void 0&&(l[o]=e.defaultProps[o]);return Os(e,l,a,i,null)}function Os(e,r,s,a,i){var o={type:e,props:r,key:s,ref:a,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:i??++Fd,__i:-1,__u:0};return i==null&&Ae.vnode!=null&&Ae.vnode(o),o}function ba(e){return e.children}function zn(e,r){this.props=e,this.context=r}function Wr(e,r){if(r==null)return e.__?Wr(e.__,e.__i+1):null;for(var s;r<e.__k.length;r++)if((s=e.__k[r])!=null&&s.__e!=null)return s.__e;return typeof e.type=="function"?Wr(e):null}function Bd(e){var r,s;if((e=e.__)!=null&&e.__c!=null){for(e.__e=e.__c.base=null,r=0;r<e.__k.length;r++)if((s=e.__k[r])!=null&&s.__e!=null){e.__e=e.__c.base=s.__e;break}return Bd(e)}}function dl(e){(!e.__d&&(e.__d=!0)&&xr.push(e)&&!Jn.__r++||cl!=Ae.debounceRendering)&&((cl=Ae.debounceRendering)||Hd)(Jn)}function Jn(){for(var e,r,s,a,i,o,l,c=1;xr.length;)xr.length>c&&xr.sort(Ud),e=xr.shift(),c=xr.length,e.__d&&(s=void 0,a=void 0,i=(a=(r=e).__v).__e,o=[],l=[],r.__P&&((s=Rt({},a)).__v=a.__v+1,Ae.vnode&&Ae.vnode(s),Ii(r.__P,s,a,r.__n,r.__P.namespaceURI,32&a.__u?[i]:null,o,i??Wr(a),!!(32&a.__u),l),s.__v=a.__v,s.__.__k[s.__i]=s,Yd(o,s,l),a.__e=a.__=null,s.__e!=i&&Bd(s)));Jn.__r=0}function Vd(e,r,s,a,i,o,l,c,d,u,f){var h,g,v,j,_,b,p,m=a&&a.__k||Wd,y=r.length;for(d=Vv(s,r,m,d,y),h=0;h<y;h++)(v=s.__k[h])!=null&&(g=v.__i==-1?qs:m[v.__i]||qs,v.__i=h,b=Ii(e,v,g,i,o,l,c,d,u,f),j=v.__e,v.ref&&g.ref!=v.ref&&(g.ref&&Hi(g.ref,null,v),f.push(v.ref,v.__c||j,v)),_==null&&j!=null&&(_=j),(p=!!(4&v.__u))||g.__k===v.__k?d=Gd(v,d,e,p):typeof v.type=="function"&&b!==void 0?d=b:j&&(d=j.nextSibling),v.__u&=-7);return s.__e=_,d}function Vv(e,r,s,a,i){var o,l,c,d,u,f=s.length,h=f,g=0;for(e.__k=new Array(i),o=0;o<i;o++)(l=r[o])!=null&&typeof l!="boolean"&&typeof l!="function"?(typeof l=="string"||typeof l=="number"||typeof l=="bigint"||l.constructor==String?l=e.__k[o]=Os(null,l,null,null,null):ya(l)?l=e.__k[o]=Os(ba,{children:l},null,null,null):l.constructor==null&&l.__b>0?l=e.__k[o]=Os(l.type,l.props,l.key,l.ref?l.ref:null,l.__v):e.__k[o]=l,d=o+g,l.__=e,l.__b=e.__b+1,(u=l.__i=Gv(l,s,d,h))!=-1&&(h--,(c=s[u])&&(c.__u|=2)),c==null||c.__v==null?(u==-1&&(i>f?g--:i<f&&g++),typeof l.type!="function"&&(l.__u|=4)):u!=d&&(u==d-1?g--:u==d+1?g++:(u>d?g--:g++,l.__u|=4))):e.__k[o]=null;if(h)for(o=0;o<f;o++)(c=s[o])!=null&&(2&c.__u)==0&&(c.__e==a&&(a=Wr(c)),Kd(c,c));return a}function Gd(e,r,s,a){var i,o;if(typeof e.type=="function"){for(i=e.__k,o=0;i&&o<i.length;o++)i[o]&&(i[o].__=e,r=Gd(i[o],r,s,a));return r}e.__e!=r&&(a&&(r&&e.type&&!r.parentNode&&(r=Wr(e)),s.insertBefore(e.__e,r||null)),r=e.__e);do r=r&&r.nextSibling;while(r!=null&&r.nodeType==8);return r}function Gv(e,r,s,a){var i,o,l,c=e.key,d=e.type,u=r[s],f=u!=null&&(2&u.__u)==0;if(u===null&&c==null||f&&c==u.key&&d==u.type)return s;if(a>(f?1:0)){for(i=s-1,o=s+1;i>=0||o<r.length;)if((u=r[l=i>=0?i--:o++])!=null&&(2&u.__u)==0&&c==u.key&&d==u.type)return l}return-1}function ul(e,r,s){r[0]=="-"?e.setProperty(r,s??""):e[r]=s==null?"":typeof s!="number"||Wv.test(r)?s:s+"px"}function bn(e,r,s,a,i){var o,l;e:if(r=="style")if(typeof s=="string")e.style.cssText=s;else{if(typeof a=="string"&&(e.style.cssText=a=""),a)for(r in a)s&&r in s||ul(e.style,r,"");if(s)for(r in s)a&&s[r]==a[r]||ul(e.style,r,s[r])}else if(r[0]=="o"&&r[1]=="n")o=r!=(r=r.replace(qd,"$1")),l=r.toLowerCase(),r=l in e||r=="onFocusOut"||r=="onFocusIn"?l.slice(2):r.slice(2),e.l||(e.l={}),e.l[r+o]=s,s?a?s.u=a.u:(s.u=Li,e.addEventListener(r,o?di:ci,o)):e.removeEventListener(r,o?di:ci,o);else{if(i=="http://www.w3.org/2000/svg")r=r.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(r!="width"&&r!="height"&&r!="href"&&r!="list"&&r!="form"&&r!="tabIndex"&&r!="download"&&r!="rowSpan"&&r!="colSpan"&&r!="role"&&r!="popover"&&r in e)try{e[r]=s??"";break e}catch{}typeof s=="function"||(s==null||s===!1&&r[4]!="-"?e.removeAttribute(r):e.setAttribute(r,r=="popover"&&s==1?"":s))}}function hl(e){return function(r){if(this.l){var s=this.l[r.type+e];if(r.t==null)r.t=Li++;else if(r.t<s.u)return;return s(Ae.event?Ae.event(r):r)}}}function Ii(e,r,s,a,i,o,l,c,d,u){var f,h,g,v,j,_,b,p,m,y,x,w,S,k,C,R,O,P=r.type;if(r.constructor!=null)return null;128&s.__u&&(d=!!(32&s.__u),o=[c=r.__e=s.__e]),(f=Ae.__b)&&f(r);e:if(typeof P=="function")try{if(p=r.props,m="prototype"in P&&P.prototype.render,y=(f=P.contextType)&&a[f.__c],x=f?y?y.props.value:f.__:a,s.__c?b=(h=r.__c=s.__c).__=h.__E:(m?r.__c=h=new P(p,x):(r.__c=h=new zn(p,x),h.constructor=P,h.render=Xv),y&&y.sub(h),h.state||(h.state={}),h.__n=a,g=h.__d=!0,h.__h=[],h._sb=[]),m&&h.__s==null&&(h.__s=h.state),m&&P.getDerivedStateFromProps!=null&&(h.__s==h.state&&(h.__s=Rt({},h.__s)),Rt(h.__s,P.getDerivedStateFromProps(p,h.__s))),v=h.props,j=h.state,h.__v=r,g)m&&P.getDerivedStateFromProps==null&&h.componentWillMount!=null&&h.componentWillMount(),m&&h.componentDidMount!=null&&h.__h.push(h.componentDidMount);else{if(m&&P.getDerivedStateFromProps==null&&p!==v&&h.componentWillReceiveProps!=null&&h.componentWillReceiveProps(p,x),r.__v==s.__v||!h.__e&&h.shouldComponentUpdate!=null&&h.shouldComponentUpdate(p,h.__s,x)===!1){for(r.__v!=s.__v&&(h.props=p,h.state=h.__s,h.__d=!1),r.__e=s.__e,r.__k=s.__k,r.__k.some(function(T){T&&(T.__=r)}),w=0;w<h._sb.length;w++)h.__h.push(h._sb[w]);h._sb=[],h.__h.length&&l.push(h);break e}h.componentWillUpdate!=null&&h.componentWillUpdate(p,h.__s,x),m&&h.componentDidUpdate!=null&&h.__h.push(function(){h.componentDidUpdate(v,j,_)})}if(h.context=x,h.props=p,h.__P=e,h.__e=!1,S=Ae.__r,k=0,m){for(h.state=h.__s,h.__d=!1,S&&S(r),f=h.render(h.props,h.state,h.context),C=0;C<h._sb.length;C++)h.__h.push(h._sb[C]);h._sb=[]}else do h.__d=!1,S&&S(r),f=h.render(h.props,h.state,h.context),h.state=h.__s;while(h.__d&&++k<25);h.state=h.__s,h.getChildContext!=null&&(a=Rt(Rt({},a),h.getChildContext())),m&&!g&&h.getSnapshotBeforeUpdate!=null&&(_=h.getSnapshotBeforeUpdate(v,j)),R=f,f!=null&&f.type===ba&&f.key==null&&(R=Xd(f.props.children)),c=Vd(e,ya(R)?R:[R],r,s,a,i,o,l,c,d,u),h.base=r.__e,r.__u&=-161,h.__h.length&&l.push(h),b&&(h.__E=h.__=null)}catch(T){if(r.__v=null,d||o!=null)if(T.then){for(r.__u|=d?160:128;c&&c.nodeType==8&&c.nextSibling;)c=c.nextSibling;o[o.indexOf(c)]=null,r.__e=c}else{for(O=o.length;O--;)Fi(o[O]);ui(r)}else r.__e=s.__e,r.__k=s.__k,T.then||ui(r);Ae.__e(T,r,s)}else o==null&&r.__v==s.__v?(r.__k=s.__k,r.__e=s.__e):c=r.__e=Yv(s.__e,r,s,a,i,o,l,d,u);return(f=Ae.diffed)&&f(r),128&r.__u?void 0:c}function ui(e){e&&e.__c&&(e.__c.__e=!0),e&&e.__k&&e.__k.forEach(ui)}function Yd(e,r,s){for(var a=0;a<s.length;a++)Hi(s[a],s[++a],s[++a]);Ae.__c&&Ae.__c(r,e),e.some(function(i){try{e=i.__h,i.__h=[],e.some(function(o){o.call(i)})}catch(o){Ae.__e(o,i.__v)}})}function Xd(e){return typeof e!="object"||e==null||e.__b&&e.__b>0?e:ya(e)?e.map(Xd):Rt({},e)}function Yv(e,r,s,a,i,o,l,c,d){var u,f,h,g,v,j,_,b=s.props||qs,p=r.props,m=r.type;if(m=="svg"?i="http://www.w3.org/2000/svg":m=="math"?i="http://www.w3.org/1998/Math/MathML":i||(i="http://www.w3.org/1999/xhtml"),o!=null){for(u=0;u<o.length;u++)if((v=o[u])&&"setAttribute"in v==!!m&&(m?v.localName==m:v.nodeType==3)){e=v,o[u]=null;break}}if(e==null){if(m==null)return document.createTextNode(p);e=document.createElementNS(i,m,p.is&&p),c&&(Ae.__m&&Ae.__m(r,o),c=!1),o=null}if(m==null)b===p||c&&e.data==p||(e.data=p);else{if(o=o&&tn.call(e.childNodes),!c&&o!=null)for(b={},u=0;u<e.attributes.length;u++)b[(v=e.attributes[u]).name]=v.value;for(u in b)if(v=b[u],u!="children"){if(u=="dangerouslySetInnerHTML")h=v;else if(!(u in p)){if(u=="value"&&"defaultValue"in p||u=="checked"&&"defaultChecked"in p)continue;bn(e,u,null,v,i)}}for(u in p)v=p[u],u=="children"?g=v:u=="dangerouslySetInnerHTML"?f=v:u=="value"?j=v:u=="checked"?_=v:c&&typeof v!="function"||b[u]===v||bn(e,u,v,b[u],i);if(f)c||h&&(f.__html==h.__html||f.__html==e.innerHTML)||(e.innerHTML=f.__html),r.__k=[];else if(h&&(e.innerHTML=""),Vd(r.type=="template"?e.content:e,ya(g)?g:[g],r,s,a,m=="foreignObject"?"http://www.w3.org/1999/xhtml":i,o,l,o?o[0]:s.__k&&Wr(s,0),c,d),o!=null)for(u=o.length;u--;)Fi(o[u]);c||(u="value",m=="progress"&&j==null?e.removeAttribute("value"):j!=null&&(j!==e[u]||m=="progress"&&!j||m=="option"&&j!=b[u])&&bn(e,u,j,b[u],i),u="checked",_!=null&&_!=e[u]&&bn(e,u,_,b[u],i))}return e}function Hi(e,r,s){try{if(typeof e=="function"){var a=typeof e.__u=="function";a&&e.__u(),a&&r==null||(e.__u=e(r))}else e.current=r}catch(i){Ae.__e(i,s)}}function Kd(e,r,s){var a,i;if(Ae.unmount&&Ae.unmount(e),(a=e.ref)&&(a.current&&a.current!=e.__e||Hi(a,null,r)),(a=e.__c)!=null){if(a.componentWillUnmount)try{a.componentWillUnmount()}catch(o){Ae.__e(o,r)}a.base=a.__P=null}if(a=e.__k)for(i=0;i<a.length;i++)a[i]&&Kd(a[i],r,s||typeof e.type!="function");s||Fi(e.__e),e.__c=e.__=e.__e=void 0}function Xv(e,r,s){return this.constructor(e,s)}function Kv(e,r,s){var a,i,o,l;r==document&&(r=document.documentElement),Ae.__&&Ae.__(e,r),i=(a=!1)?null:r.__k,o=[],l=[],Ii(r,e=r.__k=Bv(ba,null,[e]),i||qs,qs,r.namespaceURI,i?null:r.firstChild?tn.call(r.childNodes):null,o,i?i.__e:r.firstChild,a,l),Yd(o,e,l)}function Jd(e,r,s){var a,i,o,l,c=Rt({},e.props);for(o in e.type&&e.type.defaultProps&&(l=e.type.defaultProps),r)o=="key"?a=r[o]:o=="ref"?i=r[o]:c[o]=r[o]===void 0&&l!=null?l[o]:r[o];return arguments.length>2&&(c.children=arguments.length>3?tn.call(arguments,2):s),Os(e.type,c,a||e.key,i||e.ref,null)}tn=Wd.slice,Ae={__e:function(e,r,s,a){for(var i,o,l;r=r.__;)if((i=r.__c)&&!i.__)try{if((o=i.constructor)&&o.getDerivedStateFromError!=null&&(i.setState(o.getDerivedStateFromError(e)),l=i.__d),i.componentDidCatch!=null&&(i.componentDidCatch(e,a||{}),l=i.__d),l)return i.__E=i}catch(c){e=c}throw e}},Fd=0,Id=function(e){return e!=null&&e.constructor==null},zn.prototype.setState=function(e,r){var s;s=this.__s!=null&&this.__s!=this.state?this.__s:this.__s=Rt({},this.state),typeof e=="function"&&(e=e(Rt({},s),this.props)),e&&Rt(s,e),e!=null&&this.__v&&(r&&this._sb.push(r),dl(this))},zn.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),dl(this))},zn.prototype.render=ba,xr=[],Hd=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,Ud=function(e,r){return e.__v.__b-r.__v.__b},Jn.__r=0,qd=/(PointerCapture)$|Capture$/i,Li=0,ci=hl(!1),di=hl(!0);function fl(e,r){(r==null||r>e.length)&&(r=e.length);for(var s=0,a=Array(r);s<r;s++)a[s]=e[s];return a}function Jv(e){if(Array.isArray(e))return e}function Qv(e,r,s){return(r=nw(r))in e?Object.defineProperty(e,r,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[r]=s,e}function Zv(e,r){var s=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(s!=null){var a,i,o,l,c=[],d=!0,u=!1;try{if(o=(s=s.call(e)).next,r!==0)for(;!(d=(a=o.call(s)).done)&&(c.push(a.value),c.length!==r);d=!0);}catch(f){u=!0,i=f}finally{try{if(!d&&s.return!=null&&(l=s.return(),Object(l)!==l))return}finally{if(u)throw i}}return c}}function ew(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ml(e,r){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);r&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),s.push.apply(s,a)}return s}function tw(e){for(var r=1;r<arguments.length;r++){var s=arguments[r]!=null?arguments[r]:{};r%2?ml(Object(s),!0).forEach(function(a){Qv(e,a,s[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):ml(Object(s)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(s,a))})}return e}function rw(e,r){return Jv(e)||Zv(e,r)||aw(e,r)||ew()}function sw(e,r){if(typeof e!="object"||!e)return e;var s=e[Symbol.toPrimitive];if(s!==void 0){var a=s.call(e,r);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(e)}function nw(e){var r=sw(e,"string");return typeof r=="symbol"?r:r+""}function Qn(e){"@babel/helpers - typeof";return Qn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},Qn(e)}function aw(e,r){if(e){if(typeof e=="string")return fl(e,r);var s={}.toString.call(e).slice(8,-1);return s==="Object"&&e.constructor&&(s=e.constructor.name),s==="Map"||s==="Set"?Array.from(e):s==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s)?fl(e,r):void 0}}var hi=function(r){if(Qn(r)!=="object")return r;var s=Jd(r);if(s.props){var a;s.props=tw({},s.props),s!=null&&(a=s.props)!==null&&a!==void 0&&a.children&&(s.props.children=Array.isArray(s.props.children)?s.props.children.map(hi):hi(s.props.children))}return s},iw=function(r){return Id(Jd(r))},ow=function(r,s){delete s.__k,Kv(hi(r),s)};function lw(e,r){r===void 0&&(r={});var s=r.insertAt;if(!(typeof document>"u")){var a=document.head||document.getElementsByTagName("head")[0],i=document.createElement("style");i.type="text/css",s==="top"&&a.firstChild?a.insertBefore(i,a.firstChild):a.appendChild(i),i.styleSheet?i.styleSheet.cssText=e:i.appendChild(document.createTextNode(e))}}var cw=`.float-tooltip-kap {
  position: absolute;
  width: max-content; /* prevent shrinking near right edge */
  max-width: max(50%, 150px);
  padding: 3px 5px;
  border-radius: 3px;
  font: 12px sans-serif;
  color: #eee;
  background: rgba(0,0,0,0.6);
  pointer-events: none;
}
`;lw(cw);var dw=zi({props:{content:{default:!1},offsetX:{triggerUpdate:!1},offsetY:{triggerUpdate:!1}},init:function(r,s){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},i=a.style,o=i===void 0?{}:i,l=!!r&&Qn(r)==="object"&&!!r.node&&typeof r.node=="function",c=ct(l?r.node():r);c.style("position")==="static"&&c.style("position","relative"),s.tooltipEl=c.append("div").attr("class","float-tooltip-kap"),Object.entries(o).forEach(function(u){var f=rw(u,2),h=f[0],g=f[1];return s.tooltipEl.style(h,g)}),s.tooltipEl.style("left","-10000px").style("display","none");var d="tooltip-".concat(Math.round(Math.random()*1e12));s.mouseInside=!1,c.on("mousemove.".concat(d),function(u){s.mouseInside=!0;var f=Pt(u),h=c.node(),g=h.offsetWidth,v=h.offsetHeight,j=[s.offsetX===null||s.offsetX===void 0?"-".concat(f[0]/g*100,"%"):typeof s.offsetX=="number"?"calc(-50% + ".concat(s.offsetX,"px)"):s.offsetX,s.offsetY===null||s.offsetY===void 0?v>130&&v-f[1]<100?"calc(-100% - 6px)":"21px":typeof s.offsetY=="number"?s.offsetY<0?"calc(-100% - ".concat(Math.abs(s.offsetY),"px)"):"".concat(s.offsetY,"px"):s.offsetY];s.tooltipEl.style("left",f[0]+"px").style("top",f[1]+"px").style("transform","translate(".concat(j.join(","),")")),s.content&&s.tooltipEl.style("display","inline")}),c.on("mouseover.".concat(d),function(){s.mouseInside=!0,s.content&&s.tooltipEl.style("display","inline")}),c.on("mouseout.".concat(d),function(){s.mouseInside=!1,s.tooltipEl.style("display","none")})},update:function(r){r.tooltipEl.style("display",r.content&&r.mouseInside?"inline":"none"),r.content?r.content instanceof HTMLElement?(r.tooltipEl.text(""),r.tooltipEl.append(function(){return r.content})):typeof r.content=="string"?r.tooltipEl.html(r.content):iw(r.content)?(r.tooltipEl.text(""),ow(r.content,r.tooltipEl.node())):(r.tooltipEl.style("display","none"),console.warn("Tooltip content is invalid, skipping.",r.content,r.content.toString())):r.tooltipEl.text("")}});function uw(e,r,s){var a,i=1;e==null&&(e=0),r==null&&(r=0),s==null&&(s=0);function o(){var l,c=a.length,d,u=0,f=0,h=0;for(l=0;l<c;++l)d=a[l],u+=d.x||0,f+=d.y||0,h+=d.z||0;for(u=(u/c-e)*i,f=(f/c-r)*i,h=(h/c-s)*i,l=0;l<c;++l)d=a[l],u&&(d.x-=u),f&&(d.y-=f),h&&(d.z-=h)}return o.initialize=function(l){a=l},o.x=function(l){return arguments.length?(e=+l,o):e},o.y=function(l){return arguments.length?(r=+l,o):r},o.z=function(l){return arguments.length?(s=+l,o):s},o.strength=function(l){return arguments.length?(i=+l,o):i},o}function hw(e){const r=+this._x.call(null,e);return Qd(this.cover(r),r,e)}function Qd(e,r,s){if(isNaN(r))return e;var a,i=e._root,o={data:s},l=e._x0,c=e._x1,d,u,f,h,g;if(!i)return e._root=o,e;for(;i.length;)if((f=r>=(d=(l+c)/2))?l=d:c=d,a=i,!(i=i[h=+f]))return a[h]=o,e;if(u=+e._x.call(null,i.data),r===u)return o.next=i,a?a[h]=o:e._root=o,e;do a=a?a[h]=new Array(2):e._root=new Array(2),(f=r>=(d=(l+c)/2))?l=d:c=d;while((h=+f)==(g=+(u>=d)));return a[g]=i,a[h]=o,e}function fw(e){Array.isArray(e)||(e=Array.from(e));const r=e.length,s=new Float64Array(r);let a=1/0,i=-1/0;for(let o=0,l;o<r;++o)isNaN(l=+this._x.call(null,e[o]))||(s[o]=l,l<a&&(a=l),l>i&&(i=l));if(a>i)return this;this.cover(a).cover(i);for(let o=0;o<r;++o)Qd(this,s[o],e[o]);return this}function mw(e){if(isNaN(e=+e))return this;var r=this._x0,s=this._x1;if(isNaN(r))s=(r=Math.floor(e))+1;else{for(var a=s-r||1,i=this._root,o,l;r>e||e>=s;)switch(l=+(e<r),o=new Array(2),o[l]=i,i=o,a*=2,l){case 0:s=r+a;break;case 1:r=s-a;break}this._root&&this._root.length&&(this._root=i)}return this._x0=r,this._x1=s,this}function pw(){var e=[];return this.visit(function(r){if(!r.length)do e.push(r.data);while(r=r.next)}),e}function gw(e){return arguments.length?this.cover(+e[0][0]).cover(+e[1][0]):isNaN(this._x0)?void 0:[[this._x0],[this._x1]]}function Yt(e,r,s){this.node=e,this.x0=r,this.x1=s}function xw(e,r){var s,a=this._x0,i,o,l=this._x1,c=[],d=this._root,u,f;for(d&&c.push(new Yt(d,a,l)),r==null?r=1/0:(a=e-r,l=e+r);u=c.pop();)if(!(!(d=u.node)||(i=u.x0)>l||(o=u.x1)<a))if(d.length){var h=(i+o)/2;c.push(new Yt(d[1],h,o),new Yt(d[0],i,h)),(f=+(e>=h))&&(u=c[c.length-1],c[c.length-1]=c[c.length-1-f],c[c.length-1-f]=u)}else{var g=Math.abs(e-+this._x.call(null,d.data));g<r&&(r=g,a=e-g,l=e+g,s=d.data)}return s}function yw(e){if(isNaN(d=+this._x.call(null,e)))return this;var r,s=this._root,a,i,o,l=this._x0,c=this._x1,d,u,f,h,g;if(!s)return this;if(s.length)for(;;){if((f=d>=(u=(l+c)/2))?l=u:c=u,r=s,!(s=s[h=+f]))return this;if(!s.length)break;r[h+1&1]&&(a=r,g=h)}for(;s.data!==e;)if(i=s,!(s=s.next))return this;return(o=s.next)&&delete s.next,i?(o?i.next=o:delete i.next,this):r?(o?r[h]=o:delete r[h],(s=r[0]||r[1])&&s===(r[1]||r[0])&&!s.length&&(a?a[g]=s:this._root=s),this):(this._root=o,this)}function bw(e){for(var r=0,s=e.length;r<s;++r)this.remove(e[r]);return this}function vw(){return this._root}function ww(){var e=0;return this.visit(function(r){if(!r.length)do++e;while(r=r.next)}),e}function jw(e){var r=[],s,a=this._root,i,o,l;for(a&&r.push(new Yt(a,this._x0,this._x1));s=r.pop();)if(!e(a=s.node,o=s.x0,l=s.x1)&&a.length){var c=(o+l)/2;(i=a[1])&&r.push(new Yt(i,c,l)),(i=a[0])&&r.push(new Yt(i,o,c))}return this}function _w(e){var r=[],s=[],a;for(this._root&&r.push(new Yt(this._root,this._x0,this._x1));a=r.pop();){var i=a.node;if(i.length){var o,l=a.x0,c=a.x1,d=(l+c)/2;(o=i[0])&&r.push(new Yt(o,l,d)),(o=i[1])&&r.push(new Yt(o,d,c))}s.push(a)}for(;a=s.pop();)e(a.node,a.x0,a.x1);return this}function Nw(e){return e[0]}function Sw(e){return arguments.length?(this._x=e,this):this._x}function Zd(e,r){var s=new Ui(r??Nw,NaN,NaN);return e==null?s:s.addAll(e)}function Ui(e,r,s){this._x=e,this._x0=r,this._x1=s,this._root=void 0}function pl(e){for(var r={data:e.data},s=r;e=e.next;)s=s.next={data:e.data};return r}var et=Zd.prototype=Ui.prototype;et.copy=function(){var e=new Ui(this._x,this._x0,this._x1),r=this._root,s,a;if(!r)return e;if(!r.length)return e._root=pl(r),e;for(s=[{source:r,target:e._root=new Array(2)}];r=s.pop();)for(var i=0;i<2;++i)(a=r.source[i])&&(a.length?s.push({source:a,target:r.target[i]=new Array(2)}):r.target[i]=pl(a));return e};et.add=hw;et.addAll=fw;et.cover=mw;et.data=pw;et.extent=gw;et.find=xw;et.remove=yw;et.removeAll=bw;et.root=vw;et.size=ww;et.visit=jw;et.visitAfter=_w;et.x=Sw;function kw(e){const r=+this._x.call(null,e),s=+this._y.call(null,e);return eu(this.cover(r,s),r,s,e)}function eu(e,r,s,a){if(isNaN(r)||isNaN(s))return e;var i,o=e._root,l={data:a},c=e._x0,d=e._y0,u=e._x1,f=e._y1,h,g,v,j,_,b,p,m;if(!o)return e._root=l,e;for(;o.length;)if((_=r>=(h=(c+u)/2))?c=h:u=h,(b=s>=(g=(d+f)/2))?d=g:f=g,i=o,!(o=o[p=b<<1|_]))return i[p]=l,e;if(v=+e._x.call(null,o.data),j=+e._y.call(null,o.data),r===v&&s===j)return l.next=o,i?i[p]=l:e._root=l,e;do i=i?i[p]=new Array(4):e._root=new Array(4),(_=r>=(h=(c+u)/2))?c=h:u=h,(b=s>=(g=(d+f)/2))?d=g:f=g;while((p=b<<1|_)===(m=(j>=g)<<1|v>=h));return i[m]=o,i[p]=l,e}function Cw(e){var r,s,a=e.length,i,o,l=new Array(a),c=new Array(a),d=1/0,u=1/0,f=-1/0,h=-1/0;for(s=0;s<a;++s)isNaN(i=+this._x.call(null,r=e[s]))||isNaN(o=+this._y.call(null,r))||(l[s]=i,c[s]=o,i<d&&(d=i),i>f&&(f=i),o<u&&(u=o),o>h&&(h=o));if(d>f||u>h)return this;for(this.cover(d,u).cover(f,h),s=0;s<a;++s)eu(this,l[s],c[s],e[s]);return this}function Pw(e,r){if(isNaN(e=+e)||isNaN(r=+r))return this;var s=this._x0,a=this._y0,i=this._x1,o=this._y1;if(isNaN(s))i=(s=Math.floor(e))+1,o=(a=Math.floor(r))+1;else{for(var l=i-s||1,c=this._root,d,u;s>e||e>=i||a>r||r>=o;)switch(u=(r<a)<<1|e<s,d=new Array(4),d[u]=c,c=d,l*=2,u){case 0:i=s+l,o=a+l;break;case 1:s=i-l,o=a+l;break;case 2:i=s+l,a=o-l;break;case 3:s=i-l,a=o-l;break}this._root&&this._root.length&&(this._root=c)}return this._x0=s,this._y0=a,this._x1=i,this._y1=o,this}function Ew(){var e=[];return this.visit(function(r){if(!r.length)do e.push(r.data);while(r=r.next)}),e}function Rw(e){return arguments.length?this.cover(+e[0][0],+e[0][1]).cover(+e[1][0],+e[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function Ge(e,r,s,a,i){this.node=e,this.x0=r,this.y0=s,this.x1=a,this.y1=i}function Ow(e,r,s){var a,i=this._x0,o=this._y0,l,c,d,u,f=this._x1,h=this._y1,g=[],v=this._root,j,_;for(v&&g.push(new Ge(v,i,o,f,h)),s==null?s=1/0:(i=e-s,o=r-s,f=e+s,h=r+s,s*=s);j=g.pop();)if(!(!(v=j.node)||(l=j.x0)>f||(c=j.y0)>h||(d=j.x1)<i||(u=j.y1)<o))if(v.length){var b=(l+d)/2,p=(c+u)/2;g.push(new Ge(v[3],b,p,d,u),new Ge(v[2],l,p,b,u),new Ge(v[1],b,c,d,p),new Ge(v[0],l,c,b,p)),(_=(r>=p)<<1|e>=b)&&(j=g[g.length-1],g[g.length-1]=g[g.length-1-_],g[g.length-1-_]=j)}else{var m=e-+this._x.call(null,v.data),y=r-+this._y.call(null,v.data),x=m*m+y*y;if(x<s){var w=Math.sqrt(s=x);i=e-w,o=r-w,f=e+w,h=r+w,a=v.data}}return a}function Aw(e){if(isNaN(f=+this._x.call(null,e))||isNaN(h=+this._y.call(null,e)))return this;var r,s=this._root,a,i,o,l=this._x0,c=this._y0,d=this._x1,u=this._y1,f,h,g,v,j,_,b,p;if(!s)return this;if(s.length)for(;;){if((j=f>=(g=(l+d)/2))?l=g:d=g,(_=h>=(v=(c+u)/2))?c=v:u=v,r=s,!(s=s[b=_<<1|j]))return this;if(!s.length)break;(r[b+1&3]||r[b+2&3]||r[b+3&3])&&(a=r,p=b)}for(;s.data!==e;)if(i=s,!(s=s.next))return this;return(o=s.next)&&delete s.next,i?(o?i.next=o:delete i.next,this):r?(o?r[b]=o:delete r[b],(s=r[0]||r[1]||r[2]||r[3])&&s===(r[3]||r[2]||r[1]||r[0])&&!s.length&&(a?a[p]=s:this._root=s),this):(this._root=o,this)}function Tw(e){for(var r=0,s=e.length;r<s;++r)this.remove(e[r]);return this}function Dw(){return this._root}function $w(){var e=0;return this.visit(function(r){if(!r.length)do++e;while(r=r.next)}),e}function Mw(e){var r=[],s,a=this._root,i,o,l,c,d;for(a&&r.push(new Ge(a,this._x0,this._y0,this._x1,this._y1));s=r.pop();)if(!e(a=s.node,o=s.x0,l=s.y0,c=s.x1,d=s.y1)&&a.length){var u=(o+c)/2,f=(l+d)/2;(i=a[3])&&r.push(new Ge(i,u,f,c,d)),(i=a[2])&&r.push(new Ge(i,o,f,u,d)),(i=a[1])&&r.push(new Ge(i,u,l,c,f)),(i=a[0])&&r.push(new Ge(i,o,l,u,f))}return this}function zw(e){var r=[],s=[],a;for(this._root&&r.push(new Ge(this._root,this._x0,this._y0,this._x1,this._y1));a=r.pop();){var i=a.node;if(i.length){var o,l=a.x0,c=a.y0,d=a.x1,u=a.y1,f=(l+d)/2,h=(c+u)/2;(o=i[0])&&r.push(new Ge(o,l,c,f,h)),(o=i[1])&&r.push(new Ge(o,f,c,d,h)),(o=i[2])&&r.push(new Ge(o,l,h,f,u)),(o=i[3])&&r.push(new Ge(o,f,h,d,u))}s.push(a)}for(;a=s.pop();)e(a.node,a.x0,a.y0,a.x1,a.y1);return this}function Lw(e){return e[0]}function Fw(e){return arguments.length?(this._x=e,this):this._x}function Iw(e){return e[1]}function Hw(e){return arguments.length?(this._y=e,this):this._y}function tu(e,r,s){var a=new qi(r??Lw,s??Iw,NaN,NaN,NaN,NaN);return e==null?a:a.addAll(e)}function qi(e,r,s,a,i,o){this._x=e,this._y=r,this._x0=s,this._y0=a,this._x1=i,this._y1=o,this._root=void 0}function gl(e){for(var r={data:e.data},s=r;e=e.next;)s=s.next={data:e.data};return r}var Xe=tu.prototype=qi.prototype;Xe.copy=function(){var e=new qi(this._x,this._y,this._x0,this._y0,this._x1,this._y1),r=this._root,s,a;if(!r)return e;if(!r.length)return e._root=gl(r),e;for(s=[{source:r,target:e._root=new Array(4)}];r=s.pop();)for(var i=0;i<4;++i)(a=r.source[i])&&(a.length?s.push({source:a,target:r.target[i]=new Array(4)}):r.target[i]=gl(a));return e};Xe.add=kw;Xe.addAll=Cw;Xe.cover=Pw;Xe.data=Ew;Xe.extent=Rw;Xe.find=Ow;Xe.remove=Aw;Xe.removeAll=Tw;Xe.root=Dw;Xe.size=$w;Xe.visit=Mw;Xe.visitAfter=zw;Xe.x=Fw;Xe.y=Hw;function Uw(e){const r=+this._x.call(null,e),s=+this._y.call(null,e),a=+this._z.call(null,e);return ru(this.cover(r,s,a),r,s,a,e)}function ru(e,r,s,a,i){if(isNaN(r)||isNaN(s)||isNaN(a))return e;var o,l=e._root,c={data:i},d=e._x0,u=e._y0,f=e._z0,h=e._x1,g=e._y1,v=e._z1,j,_,b,p,m,y,x,w,S,k,C;if(!l)return e._root=c,e;for(;l.length;)if((x=r>=(j=(d+h)/2))?d=j:h=j,(w=s>=(_=(u+g)/2))?u=_:g=_,(S=a>=(b=(f+v)/2))?f=b:v=b,o=l,!(l=l[k=S<<2|w<<1|x]))return o[k]=c,e;if(p=+e._x.call(null,l.data),m=+e._y.call(null,l.data),y=+e._z.call(null,l.data),r===p&&s===m&&a===y)return c.next=l,o?o[k]=c:e._root=c,e;do o=o?o[k]=new Array(8):e._root=new Array(8),(x=r>=(j=(d+h)/2))?d=j:h=j,(w=s>=(_=(u+g)/2))?u=_:g=_,(S=a>=(b=(f+v)/2))?f=b:v=b;while((k=S<<2|w<<1|x)===(C=(y>=b)<<2|(m>=_)<<1|p>=j));return o[C]=l,o[k]=c,e}function qw(e){Array.isArray(e)||(e=Array.from(e));const r=e.length,s=new Float64Array(r),a=new Float64Array(r),i=new Float64Array(r);let o=1/0,l=1/0,c=1/0,d=-1/0,u=-1/0,f=-1/0;for(let h=0,g,v,j,_;h<r;++h)isNaN(v=+this._x.call(null,g=e[h]))||isNaN(j=+this._y.call(null,g))||isNaN(_=+this._z.call(null,g))||(s[h]=v,a[h]=j,i[h]=_,v<o&&(o=v),v>d&&(d=v),j<l&&(l=j),j>u&&(u=j),_<c&&(c=_),_>f&&(f=_));if(o>d||l>u||c>f)return this;this.cover(o,l,c).cover(d,u,f);for(let h=0;h<r;++h)ru(this,s[h],a[h],i[h],e[h]);return this}function Ww(e,r,s){if(isNaN(e=+e)||isNaN(r=+r)||isNaN(s=+s))return this;var a=this._x0,i=this._y0,o=this._z0,l=this._x1,c=this._y1,d=this._z1;if(isNaN(a))l=(a=Math.floor(e))+1,c=(i=Math.floor(r))+1,d=(o=Math.floor(s))+1;else{for(var u=l-a||1,f=this._root,h,g;a>e||e>=l||i>r||r>=c||o>s||s>=d;)switch(g=(s<o)<<2|(r<i)<<1|e<a,h=new Array(8),h[g]=f,f=h,u*=2,g){case 0:l=a+u,c=i+u,d=o+u;break;case 1:a=l-u,c=i+u,d=o+u;break;case 2:l=a+u,i=c-u,d=o+u;break;case 3:a=l-u,i=c-u,d=o+u;break;case 4:l=a+u,c=i+u,o=d-u;break;case 5:a=l-u,c=i+u,o=d-u;break;case 6:l=a+u,i=c-u,o=d-u;break;case 7:a=l-u,i=c-u,o=d-u;break}this._root&&this._root.length&&(this._root=f)}return this._x0=a,this._y0=i,this._z0=o,this._x1=l,this._y1=c,this._z1=d,this}function Bw(){var e=[];return this.visit(function(r){if(!r.length)do e.push(r.data);while(r=r.next)}),e}function Vw(e){return arguments.length?this.cover(+e[0][0],+e[0][1],+e[0][2]).cover(+e[1][0],+e[1][1],+e[1][2]):isNaN(this._x0)?void 0:[[this._x0,this._y0,this._z0],[this._x1,this._y1,this._z1]]}function Se(e,r,s,a,i,o,l){this.node=e,this.x0=r,this.y0=s,this.z0=a,this.x1=i,this.y1=o,this.z1=l}function Gw(e,r,s,a){var i,o=this._x0,l=this._y0,c=this._z0,d,u,f,h,g,v,j=this._x1,_=this._y1,b=this._z1,p=[],m=this._root,y,x;for(m&&p.push(new Se(m,o,l,c,j,_,b)),a==null?a=1/0:(o=e-a,l=r-a,c=s-a,j=e+a,_=r+a,b=s+a,a*=a);y=p.pop();)if(!(!(m=y.node)||(d=y.x0)>j||(u=y.y0)>_||(f=y.z0)>b||(h=y.x1)<o||(g=y.y1)<l||(v=y.z1)<c))if(m.length){var w=(d+h)/2,S=(u+g)/2,k=(f+v)/2;p.push(new Se(m[7],w,S,k,h,g,v),new Se(m[6],d,S,k,w,g,v),new Se(m[5],w,u,k,h,S,v),new Se(m[4],d,u,k,w,S,v),new Se(m[3],w,S,f,h,g,k),new Se(m[2],d,S,f,w,g,k),new Se(m[1],w,u,f,h,S,k),new Se(m[0],d,u,f,w,S,k)),(x=(s>=k)<<2|(r>=S)<<1|e>=w)&&(y=p[p.length-1],p[p.length-1]=p[p.length-1-x],p[p.length-1-x]=y)}else{var C=e-+this._x.call(null,m.data),R=r-+this._y.call(null,m.data),O=s-+this._z.call(null,m.data),P=C*C+R*R+O*O;if(P<a){var T=Math.sqrt(a=P);o=e-T,l=r-T,c=s-T,j=e+T,_=r+T,b=s+T,i=m.data}}return i}const Yw=(e,r,s,a,i,o)=>Math.sqrt((e-a)**2+(r-i)**2+(s-o)**2);function Xw(e,r,s,a){const i=[],o=e-a,l=r-a,c=s-a,d=e+a,u=r+a,f=s+a;return this.visit((h,g,v,j,_,b,p)=>{if(!h.length)do{const m=h.data;Yw(e,r,s,this._x(m),this._y(m),this._z(m))<=a&&i.push(m)}while(h=h.next);return g>d||v>u||j>f||_<o||b<l||p<c}),i}function Kw(e){if(isNaN(g=+this._x.call(null,e))||isNaN(v=+this._y.call(null,e))||isNaN(j=+this._z.call(null,e)))return this;var r,s=this._root,a,i,o,l=this._x0,c=this._y0,d=this._z0,u=this._x1,f=this._y1,h=this._z1,g,v,j,_,b,p,m,y,x,w,S;if(!s)return this;if(s.length)for(;;){if((m=g>=(_=(l+u)/2))?l=_:u=_,(y=v>=(b=(c+f)/2))?c=b:f=b,(x=j>=(p=(d+h)/2))?d=p:h=p,r=s,!(s=s[w=x<<2|y<<1|m]))return this;if(!s.length)break;(r[w+1&7]||r[w+2&7]||r[w+3&7]||r[w+4&7]||r[w+5&7]||r[w+6&7]||r[w+7&7])&&(a=r,S=w)}for(;s.data!==e;)if(i=s,!(s=s.next))return this;return(o=s.next)&&delete s.next,i?(o?i.next=o:delete i.next,this):r?(o?r[w]=o:delete r[w],(s=r[0]||r[1]||r[2]||r[3]||r[4]||r[5]||r[6]||r[7])&&s===(r[7]||r[6]||r[5]||r[4]||r[3]||r[2]||r[1]||r[0])&&!s.length&&(a?a[S]=s:this._root=s),this):(this._root=o,this)}function Jw(e){for(var r=0,s=e.length;r<s;++r)this.remove(e[r]);return this}function Qw(){return this._root}function Zw(){var e=0;return this.visit(function(r){if(!r.length)do++e;while(r=r.next)}),e}function ej(e){var r=[],s,a=this._root,i,o,l,c,d,u,f;for(a&&r.push(new Se(a,this._x0,this._y0,this._z0,this._x1,this._y1,this._z1));s=r.pop();)if(!e(a=s.node,o=s.x0,l=s.y0,c=s.z0,d=s.x1,u=s.y1,f=s.z1)&&a.length){var h=(o+d)/2,g=(l+u)/2,v=(c+f)/2;(i=a[7])&&r.push(new Se(i,h,g,v,d,u,f)),(i=a[6])&&r.push(new Se(i,o,g,v,h,u,f)),(i=a[5])&&r.push(new Se(i,h,l,v,d,g,f)),(i=a[4])&&r.push(new Se(i,o,l,v,h,g,f)),(i=a[3])&&r.push(new Se(i,h,g,c,d,u,v)),(i=a[2])&&r.push(new Se(i,o,g,c,h,u,v)),(i=a[1])&&r.push(new Se(i,h,l,c,d,g,v)),(i=a[0])&&r.push(new Se(i,o,l,c,h,g,v))}return this}function tj(e){var r=[],s=[],a;for(this._root&&r.push(new Se(this._root,this._x0,this._y0,this._z0,this._x1,this._y1,this._z1));a=r.pop();){var i=a.node;if(i.length){var o,l=a.x0,c=a.y0,d=a.z0,u=a.x1,f=a.y1,h=a.z1,g=(l+u)/2,v=(c+f)/2,j=(d+h)/2;(o=i[0])&&r.push(new Se(o,l,c,d,g,v,j)),(o=i[1])&&r.push(new Se(o,g,c,d,u,v,j)),(o=i[2])&&r.push(new Se(o,l,v,d,g,f,j)),(o=i[3])&&r.push(new Se(o,g,v,d,u,f,j)),(o=i[4])&&r.push(new Se(o,l,c,j,g,v,h)),(o=i[5])&&r.push(new Se(o,g,c,j,u,v,h)),(o=i[6])&&r.push(new Se(o,l,v,j,g,f,h)),(o=i[7])&&r.push(new Se(o,g,v,j,u,f,h))}s.push(a)}for(;a=s.pop();)e(a.node,a.x0,a.y0,a.z0,a.x1,a.y1,a.z1);return this}function rj(e){return e[0]}function sj(e){return arguments.length?(this._x=e,this):this._x}function nj(e){return e[1]}function aj(e){return arguments.length?(this._y=e,this):this._y}function ij(e){return e[2]}function oj(e){return arguments.length?(this._z=e,this):this._z}function su(e,r,s,a){var i=new Wi(r??rj,s??nj,a??ij,NaN,NaN,NaN,NaN,NaN,NaN);return e==null?i:i.addAll(e)}function Wi(e,r,s,a,i,o,l,c,d){this._x=e,this._y=r,this._z=s,this._x0=a,this._y0=i,this._z0=o,this._x1=l,this._y1=c,this._z1=d,this._root=void 0}function xl(e){for(var r={data:e.data},s=r;e=e.next;)s=s.next={data:e.data};return r}var Le=su.prototype=Wi.prototype;Le.copy=function(){var e=new Wi(this._x,this._y,this._z,this._x0,this._y0,this._z0,this._x1,this._y1,this._z1),r=this._root,s,a;if(!r)return e;if(!r.length)return e._root=xl(r),e;for(s=[{source:r,target:e._root=new Array(8)}];r=s.pop();)for(var i=0;i<8;++i)(a=r.source[i])&&(a.length?s.push({source:a,target:r.target[i]=new Array(8)}):r.target[i]=xl(a));return e};Le.add=Uw;Le.addAll=qw;Le.cover=Ww;Le.data=Bw;Le.extent=Vw;Le.find=Gw;Le.findAllWithinRadius=Xw;Le.remove=Kw;Le.removeAll=Jw;Le.root=Qw;Le.size=Zw;Le.visit=ej;Le.visitAfter=tj;Le.x=sj;Le.y=aj;Le.z=oj;function Gt(e){return function(){return e}}function Bt(e){return(e()-.5)*1e-6}function lj(e){return e.index}function yl(e,r){var s=e.get(r);if(!s)throw new Error("node not found: "+r);return s}function cj(e){var r=lj,s=g,a,i=Gt(30),o,l,c,d,u,f,h=1;e==null&&(e=[]);function g(p){return 1/Math.min(d[p.source.index],d[p.target.index])}function v(p){for(var m=0,y=e.length;m<h;++m)for(var x=0,w,S,k,C=0,R=0,O=0,P,T;x<y;++x)w=e[x],S=w.source,k=w.target,C=k.x+k.vx-S.x-S.vx||Bt(f),c>1&&(R=k.y+k.vy-S.y-S.vy||Bt(f)),c>2&&(O=k.z+k.vz-S.z-S.vz||Bt(f)),P=Math.sqrt(C*C+R*R+O*O),P=(P-o[x])/P*p*a[x],C*=P,R*=P,O*=P,k.vx-=C*(T=u[x]),c>1&&(k.vy-=R*T),c>2&&(k.vz-=O*T),S.vx+=C*(T=1-T),c>1&&(S.vy+=R*T),c>2&&(S.vz+=O*T)}function j(){if(l){var p,m=l.length,y=e.length,x=new Map(l.map((S,k)=>[r(S,k,l),S])),w;for(p=0,d=new Array(m);p<y;++p)w=e[p],w.index=p,typeof w.source!="object"&&(w.source=yl(x,w.source)),typeof w.target!="object"&&(w.target=yl(x,w.target)),d[w.source.index]=(d[w.source.index]||0)+1,d[w.target.index]=(d[w.target.index]||0)+1;for(p=0,u=new Array(y);p<y;++p)w=e[p],u[p]=d[w.source.index]/(d[w.source.index]+d[w.target.index]);a=new Array(y),_(),o=new Array(y),b()}}function _(){if(l)for(var p=0,m=e.length;p<m;++p)a[p]=+s(e[p],p,e)}function b(){if(l)for(var p=0,m=e.length;p<m;++p)o[p]=+i(e[p],p,e)}return v.initialize=function(p,...m){l=p,f=m.find(y=>typeof y=="function")||Math.random,c=m.find(y=>[1,2,3].includes(y))||2,j()},v.links=function(p){return arguments.length?(e=p,j(),v):e},v.id=function(p){return arguments.length?(r=p,v):r},v.iterations=function(p){return arguments.length?(h=+p,v):h},v.strength=function(p){return arguments.length?(s=typeof p=="function"?p:Gt(+p),_(),v):s},v.distance=function(p){return arguments.length?(i=typeof p=="function"?p:Gt(+p),b(),v):i},v}const dj=1664525,uj=1013904223,bl=4294967296;function hj(){let e=1;return()=>(e=(dj*e+uj)%bl)/bl}var vl=3;function Ma(e){return e.x}function wl(e){return e.y}function fj(e){return e.z}var mj=10,pj=Math.PI*(3-Math.sqrt(5)),gj=Math.PI*20/(9+Math.sqrt(221));function xj(e,r){r=r||2;var s=Math.min(vl,Math.max(1,Math.round(r))),a,i=1,o=.001,l=1-Math.pow(o,1/300),c=0,d=.6,u=new Map,f=Ti(v),h=en("tick","end"),g=hj();e==null&&(e=[]);function v(){j(),h.call("tick",a),i<o&&(f.stop(),h.call("end",a))}function j(p){var m,y=e.length,x;p===void 0&&(p=1);for(var w=0;w<p;++w)for(i+=(c-i)*l,u.forEach(function(S){S(i)}),m=0;m<y;++m)x=e[m],x.fx==null?x.x+=x.vx*=d:(x.x=x.fx,x.vx=0),s>1&&(x.fy==null?x.y+=x.vy*=d:(x.y=x.fy,x.vy=0)),s>2&&(x.fz==null?x.z+=x.vz*=d:(x.z=x.fz,x.vz=0));return a}function _(){for(var p=0,m=e.length,y;p<m;++p){if(y=e[p],y.index=p,y.fx!=null&&(y.x=y.fx),y.fy!=null&&(y.y=y.fy),y.fz!=null&&(y.z=y.fz),isNaN(y.x)||s>1&&isNaN(y.y)||s>2&&isNaN(y.z)){var x=mj*(s>2?Math.cbrt(.5+p):s>1?Math.sqrt(.5+p):p),w=p*pj,S=p*gj;s===1?y.x=x:s===2?(y.x=x*Math.cos(w),y.y=x*Math.sin(w)):(y.x=x*Math.sin(w)*Math.cos(S),y.y=x*Math.cos(w),y.z=x*Math.sin(w)*Math.sin(S))}(isNaN(y.vx)||s>1&&isNaN(y.vy)||s>2&&isNaN(y.vz))&&(y.vx=0,s>1&&(y.vy=0),s>2&&(y.vz=0))}}function b(p){return p.initialize&&p.initialize(e,g,s),p}return _(),a={tick:j,restart:function(){return f.restart(v),a},stop:function(){return f.stop(),a},numDimensions:function(p){return arguments.length?(s=Math.min(vl,Math.max(1,Math.round(p))),u.forEach(b),a):s},nodes:function(p){return arguments.length?(e=p,_(),u.forEach(b),a):e},alpha:function(p){return arguments.length?(i=+p,a):i},alphaMin:function(p){return arguments.length?(o=+p,a):o},alphaDecay:function(p){return arguments.length?(l=+p,a):+l},alphaTarget:function(p){return arguments.length?(c=+p,a):c},velocityDecay:function(p){return arguments.length?(d=1-p,a):1-d},randomSource:function(p){return arguments.length?(g=p,u.forEach(b),a):g},force:function(p,m){return arguments.length>1?(m==null?u.delete(p):u.set(p,b(m)),a):u.get(p)},find:function(){var p=Array.prototype.slice.call(arguments),m=p.shift()||0,y=(s>1?p.shift():null)||0,x=(s>2?p.shift():null)||0,w=p.shift()||1/0,S=0,k=e.length,C,R,O,P,T,M;for(w*=w,S=0;S<k;++S)T=e[S],C=m-T.x,R=y-(T.y||0),O=x-(T.z||0),P=C*C+R*R+O*O,P<w&&(M=T,w=P);return M},on:function(p,m){return arguments.length>1?(h.on(p,m),a):h.on(p)}}}function yj(){var e,r,s,a,i,o=Gt(-30),l,c=1,d=1/0,u=.81;function f(j){var _,b=e.length,p=(r===1?Zd(e,Ma):r===2?tu(e,Ma,wl):r===3?su(e,Ma,wl,fj):null).visitAfter(g);for(i=j,_=0;_<b;++_)s=e[_],p.visit(v)}function h(){if(e){var j,_=e.length,b;for(l=new Array(_),j=0;j<_;++j)b=e[j],l[b.index]=+o(b,j,e)}}function g(j){var _=0,b,p,m=0,y,x,w,S,k=j.length;if(k){for(y=x=w=S=0;S<k;++S)(b=j[S])&&(p=Math.abs(b.value))&&(_+=b.value,m+=p,y+=p*(b.x||0),x+=p*(b.y||0),w+=p*(b.z||0));_*=Math.sqrt(4/k),j.x=y/m,r>1&&(j.y=x/m),r>2&&(j.z=w/m)}else{b=j,b.x=b.data.x,r>1&&(b.y=b.data.y),r>2&&(b.z=b.data.z);do _+=l[b.data.index];while(b=b.next)}j.value=_}function v(j,_,b,p,m){if(!j.value)return!0;var y=[b,p,m][r-1],x=j.x-s.x,w=r>1?j.y-s.y:0,S=r>2?j.z-s.z:0,k=y-_,C=x*x+w*w+S*S;if(k*k/u<C)return C<d&&(x===0&&(x=Bt(a),C+=x*x),r>1&&w===0&&(w=Bt(a),C+=w*w),r>2&&S===0&&(S=Bt(a),C+=S*S),C<c&&(C=Math.sqrt(c*C)),s.vx+=x*j.value*i/C,r>1&&(s.vy+=w*j.value*i/C),r>2&&(s.vz+=S*j.value*i/C)),!0;if(j.length||C>=d)return;(j.data!==s||j.next)&&(x===0&&(x=Bt(a),C+=x*x),r>1&&w===0&&(w=Bt(a),C+=w*w),r>2&&S===0&&(S=Bt(a),C+=S*S),C<c&&(C=Math.sqrt(c*C)));do j.data!==s&&(k=l[j.data.index]*i/C,s.vx+=x*k,r>1&&(s.vy+=w*k),r>2&&(s.vz+=S*k));while(j=j.next)}return f.initialize=function(j,..._){e=j,a=_.find(b=>typeof b=="function")||Math.random,r=_.find(b=>[1,2,3].includes(b))||2,h()},f.strength=function(j){return arguments.length?(o=typeof j=="function"?j:Gt(+j),h(),f):o},f.distanceMin=function(j){return arguments.length?(c=j*j,f):Math.sqrt(c)},f.distanceMax=function(j){return arguments.length?(d=j*j,f):Math.sqrt(d)},f.theta=function(j){return arguments.length?(u=j*j,f):Math.sqrt(u)},f}function bj(e,r,s,a){var i,o,l=Gt(.1),c,d;typeof e!="function"&&(e=Gt(+e)),r==null&&(r=0),s==null&&(s=0),a==null&&(a=0);function u(h){for(var g=0,v=i.length;g<v;++g){var j=i[g],_=j.x-r||1e-6,b=(j.y||0)-s||1e-6,p=(j.z||0)-a||1e-6,m=Math.sqrt(_*_+b*b+p*p),y=(d[g]-m)*c[g]*h/m;j.vx+=_*y,o>1&&(j.vy+=b*y),o>2&&(j.vz+=p*y)}}function f(){if(i){var h,g=i.length;for(c=new Array(g),d=new Array(g),h=0;h<g;++h)d[h]=+e(i[h],h,i),c[h]=isNaN(d[h])?0:+l(i[h],h,i)}}return u.initialize=function(h,...g){i=h,o=g.find(v=>[1,2,3].includes(v))||2,f()},u.strength=function(h){return arguments.length?(l=typeof h=="function"?h:Gt(+h),f(),u):l},u.radius=function(h){return arguments.length?(e=typeof h=="function"?h:Gt(+h),f(),u):e},u.x=function(h){return arguments.length?(r=+h,u):r},u.y=function(h){return arguments.length?(s=+h,u):s},u.z=function(h){return arguments.length?(a=+h,u):a},u}const{abs:os,cos:Ut,sin:Pr,acos:vj,atan2:ls,sqrt:er,pow:ot}=Math;function cs(e){return e<0?-ot(-e,1/3):ot(e,1/3)}const nu=Math.PI,vn=2*nu,tr=nu/2,wj=1e-6,za=Number.MAX_SAFE_INTEGER||9007199254740991,La=Number.MIN_SAFE_INTEGER||-9007199254740991,jj={x:0,y:0,z:0},Q={Tvalues:[-.06405689286260563,.06405689286260563,-.1911188674736163,.1911188674736163,-.3150426796961634,.3150426796961634,-.4337935076260451,.4337935076260451,-.5454214713888396,.5454214713888396,-.6480936519369755,.6480936519369755,-.7401241915785544,.7401241915785544,-.820001985973903,.820001985973903,-.8864155270044011,.8864155270044011,-.9382745520027328,.9382745520027328,-.9747285559713095,.9747285559713095,-.9951872199970213,.9951872199970213],Cvalues:[.12793819534675216,.12793819534675216,.1258374563468283,.1258374563468283,.12167047292780339,.12167047292780339,.1155056680537256,.1155056680537256,.10744427011596563,.10744427011596563,.09761865210411388,.09761865210411388,.08619016153195327,.08619016153195327,.0733464814110803,.0733464814110803,.05929858491543678,.05929858491543678,.04427743881741981,.04427743881741981,.028531388628933663,.028531388628933663,.0123412297999872,.0123412297999872],arcfn:function(e,r){const s=r(e);let a=s.x*s.x+s.y*s.y;return typeof s.z<"u"&&(a+=s.z*s.z),er(a)},compute:function(e,r,s){if(e===0)return r[0].t=0,r[0];const a=r.length-1;if(e===1)return r[a].t=1,r[a];const i=1-e;let o=r;if(a===0)return r[0].t=e,r[0];if(a===1){const c={x:i*o[0].x+e*o[1].x,y:i*o[0].y+e*o[1].y,t:e};return s&&(c.z=i*o[0].z+e*o[1].z),c}if(a<4){let c=i*i,d=e*e,u,f,h,g=0;a===2?(o=[o[0],o[1],o[2],jj],u=c,f=i*e*2,h=d):a===3&&(u=c*i,f=c*e*3,h=i*d*3,g=e*d);const v={x:u*o[0].x+f*o[1].x+h*o[2].x+g*o[3].x,y:u*o[0].y+f*o[1].y+h*o[2].y+g*o[3].y,t:e};return s&&(v.z=u*o[0].z+f*o[1].z+h*o[2].z+g*o[3].z),v}const l=JSON.parse(JSON.stringify(r));for(;l.length>1;){for(let c=0;c<l.length-1;c++)l[c]={x:l[c].x+(l[c+1].x-l[c].x)*e,y:l[c].y+(l[c+1].y-l[c].y)*e},typeof l[c].z<"u"&&(l[c].z=l[c].z+(l[c+1].z-l[c].z)*e);l.splice(l.length-1,1)}return l[0].t=e,l[0]},computeWithRatios:function(e,r,s,a){const i=1-e,o=s,l=r;let c=o[0],d=o[1],u=o[2],f=o[3],h;if(c*=i,d*=e,l.length===2)return h=c+d,{x:(c*l[0].x+d*l[1].x)/h,y:(c*l[0].y+d*l[1].y)/h,z:a?(c*l[0].z+d*l[1].z)/h:!1,t:e};if(c*=i,d*=2*i,u*=e*e,l.length===3)return h=c+d+u,{x:(c*l[0].x+d*l[1].x+u*l[2].x)/h,y:(c*l[0].y+d*l[1].y+u*l[2].y)/h,z:a?(c*l[0].z+d*l[1].z+u*l[2].z)/h:!1,t:e};if(c*=i,d*=1.5*i,u*=3*i,f*=e*e*e,l.length===4)return h=c+d+u+f,{x:(c*l[0].x+d*l[1].x+u*l[2].x+f*l[3].x)/h,y:(c*l[0].y+d*l[1].y+u*l[2].y+f*l[3].y)/h,z:a?(c*l[0].z+d*l[1].z+u*l[2].z+f*l[3].z)/h:!1,t:e}},derive:function(e,r){const s=[];for(let a=e,i=a.length,o=i-1;i>1;i--,o--){const l=[];for(let c=0,d;c<o;c++)d={x:o*(a[c+1].x-a[c].x),y:o*(a[c+1].y-a[c].y)},r&&(d.z=o*(a[c+1].z-a[c].z)),l.push(d);s.push(l),a=l}return s},between:function(e,r,s){return r<=e&&e<=s||Q.approximately(e,r)||Q.approximately(e,s)},approximately:function(e,r,s){return os(e-r)<=(s||wj)},length:function(e){const s=Q.Tvalues.length;let a=0;for(let i=0,o;i<s;i++)o=.5*Q.Tvalues[i]+.5,a+=Q.Cvalues[i]*Q.arcfn(o,e);return .5*a},map:function(e,r,s,a,i){const o=s-r,l=i-a,c=e-r,d=c/o;return a+l*d},lerp:function(e,r,s){const a={x:r.x+e*(s.x-r.x),y:r.y+e*(s.y-r.y)};return r.z!==void 0&&s.z!==void 0&&(a.z=r.z+e*(s.z-r.z)),a},pointToString:function(e){let r=e.x+"/"+e.y;return typeof e.z<"u"&&(r+="/"+e.z),r},pointsToString:function(e){return"["+e.map(Q.pointToString).join(", ")+"]"},copy:function(e){return JSON.parse(JSON.stringify(e))},angle:function(e,r,s){const a=r.x-e.x,i=r.y-e.y,o=s.x-e.x,l=s.y-e.y,c=a*l-i*o,d=a*o+i*l;return ls(c,d)},round:function(e,r){const s=""+e,a=s.indexOf(".");return parseFloat(s.substring(0,a+1+r))},dist:function(e,r){const s=e.x-r.x,a=e.y-r.y;return er(s*s+a*a)},closest:function(e,r){let s=ot(2,63),a,i;return e.forEach(function(o,l){i=Q.dist(r,o),i<s&&(s=i,a=l)}),{mdist:s,mpos:a}},abcratio:function(e,r){if(r!==2&&r!==3)return!1;if(typeof e>"u")e=.5;else if(e===0||e===1)return e;const s=ot(e,r)+ot(1-e,r),a=s-1;return os(a/s)},projectionratio:function(e,r){if(r!==2&&r!==3)return!1;if(typeof e>"u")e=.5;else if(e===0||e===1)return e;const s=ot(1-e,r),a=ot(e,r)+s;return s/a},lli8:function(e,r,s,a,i,o,l,c){const d=(e*a-r*s)*(i-l)-(e-s)*(i*c-o*l),u=(e*a-r*s)*(o-c)-(r-a)*(i*c-o*l),f=(e-s)*(o-c)-(r-a)*(i-l);return f==0?!1:{x:d/f,y:u/f}},lli4:function(e,r,s,a){const i=e.x,o=e.y,l=r.x,c=r.y,d=s.x,u=s.y,f=a.x,h=a.y;return Q.lli8(i,o,l,c,d,u,f,h)},lli:function(e,r){return Q.lli4(e,e.c,r,r.c)},makeline:function(e,r){return new Ee(e.x,e.y,(e.x+r.x)/2,(e.y+r.y)/2,r.x,r.y)},findbbox:function(e){let r=za,s=za,a=La,i=La;return e.forEach(function(o){const l=o.bbox();r>l.x.min&&(r=l.x.min),s>l.y.min&&(s=l.y.min),a<l.x.max&&(a=l.x.max),i<l.y.max&&(i=l.y.max)}),{x:{min:r,mid:(r+a)/2,max:a,size:a-r},y:{min:s,mid:(s+i)/2,max:i,size:i-s}}},shapeintersections:function(e,r,s,a,i){if(!Q.bboxoverlap(r,a))return[];const o=[],l=[e.startcap,e.forward,e.back,e.endcap],c=[s.startcap,s.forward,s.back,s.endcap];return l.forEach(function(d){d.virtual||c.forEach(function(u){if(u.virtual)return;const f=d.intersects(u,i);f.length>0&&(f.c1=d,f.c2=u,f.s1=e,f.s2=s,o.push(f))})}),o},makeshape:function(e,r,s){const a=r.points.length,i=e.points.length,o=Q.makeline(r.points[a-1],e.points[0]),l=Q.makeline(e.points[i-1],r.points[0]),c={startcap:o,forward:e,back:r,endcap:l,bbox:Q.findbbox([o,e,r,l])};return c.intersections=function(d){return Q.shapeintersections(c,c.bbox,d,d.bbox,s)},c},getminmax:function(e,r,s){if(!s)return{min:0,max:0};let a=za,i=La,o,l;s.indexOf(0)===-1&&(s=[0].concat(s)),s.indexOf(1)===-1&&s.push(1);for(let c=0,d=s.length;c<d;c++)o=s[c],l=e.get(o),l[r]<a&&(a=l[r]),l[r]>i&&(i=l[r]);return{min:a,mid:(a+i)/2,max:i,size:i-a}},align:function(e,r){const s=r.p1.x,a=r.p1.y,i=-ls(r.p2.y-a,r.p2.x-s),o=function(l){return{x:(l.x-s)*Ut(i)-(l.y-a)*Pr(i),y:(l.x-s)*Pr(i)+(l.y-a)*Ut(i)}};return e.map(o)},roots:function(e,r){r=r||{p1:{x:0,y:0},p2:{x:1,y:0}};const s=e.length-1,a=Q.align(e,r),i=function(k){return 0<=k&&k<=1};if(s===2){const k=a[0].y,C=a[1].y,R=a[2].y,O=k-2*C+R;if(O!==0){const P=-er(C*C-k*R),T=-k+C,M=-(P+T)/O,A=-(-P+T)/O;return[M,A].filter(i)}else if(C!==R&&O===0)return[(2*C-R)/(2*C-2*R)].filter(i);return[]}const o=a[0].y,l=a[1].y,c=a[2].y,d=a[3].y;let u=-o+3*l-3*c+d,f=3*o-6*l+3*c,h=-3*o+3*l,g=o;if(Q.approximately(u,0)){if(Q.approximately(f,0))return Q.approximately(h,0)?[]:[-g/h].filter(i);const k=er(h*h-4*f*g),C=2*f;return[(k-h)/C,(-h-k)/C].filter(i)}f/=u,h/=u,g/=u;const v=(3*h-f*f)/3,j=v/3,_=(2*f*f*f-9*f*h+27*g)/27,b=_/2,p=b*b+j*j*j;let m,y,x,w,S;if(p<0){const k=-v/3,C=k*k*k,R=er(C),O=-_/(2*R),P=O<-1?-1:O>1?1:O,T=vj(P),M=cs(R),A=2*M;return x=A*Ut(T/3)-f/3,w=A*Ut((T+vn)/3)-f/3,S=A*Ut((T+2*vn)/3)-f/3,[x,w,S].filter(i)}else{if(p===0)return m=b<0?cs(-b):-cs(b),x=2*m-f/3,w=-m-f/3,[x,w].filter(i);{const k=er(p);return m=cs(-b+k),y=cs(b+k),[m-y-f/3].filter(i)}}},droots:function(e){if(e.length===3){const r=e[0],s=e[1],a=e[2],i=r-2*s+a;if(i!==0){const o=-er(s*s-r*a),l=-r+s,c=-(o+l)/i,d=-(-o+l)/i;return[c,d]}else if(s!==a&&i===0)return[(2*s-a)/(2*(s-a))];return[]}if(e.length===2){const r=e[0],s=e[1];return r!==s?[r/(r-s)]:[]}return[]},curvature:function(e,r,s,a,i){let o,l,c,d,u=0,f=0;const h=Q.compute(e,r),g=Q.compute(e,s),v=h.x*h.x+h.y*h.y;if(a?(o=er(ot(h.y*g.z-g.y*h.z,2)+ot(h.z*g.x-g.z*h.x,2)+ot(h.x*g.y-g.x*h.y,2)),l=ot(v+h.z*h.z,3/2)):(o=h.x*g.y-h.y*g.x,l=ot(v,3/2)),o===0||l===0)return{k:0,r:0};if(u=o/l,f=l/o,!i){const j=Q.curvature(e-.001,r,s,a,!0).k,_=Q.curvature(e+.001,r,s,a,!0).k;d=(_-u+(u-j))/2,c=(os(_-u)+os(u-j))/2}return{k:u,r:f,dk:d,adk:c}},inflections:function(e){if(e.length<4)return[];const r=Q.align(e,{p1:e[0],p2:e.slice(-1)[0]}),s=r[2].x*r[1].y,a=r[3].x*r[1].y,i=r[1].x*r[2].y,o=r[3].x*r[2].y,l=18*(-3*s+2*a+3*i-o),c=18*(3*s-a-3*i),d=18*(i-s);if(Q.approximately(l,0)){if(!Q.approximately(c,0)){let g=-d/c;if(0<=g&&g<=1)return[g]}return[]}const u=2*l;if(Q.approximately(u,0))return[];const f=c*c-4*l*d;if(f<0)return[];const h=Math.sqrt(f);return[(h-c)/u,-(c+h)/u].filter(function(g){return 0<=g&&g<=1})},bboxoverlap:function(e,r){const s=["x","y"],a=s.length;for(let i=0,o,l,c,d;i<a;i++)if(o=s[i],l=e[o].mid,c=r[o].mid,d=(e[o].size+r[o].size)/2,os(l-c)>=d)return!1;return!0},expandbox:function(e,r){r.x.min<e.x.min&&(e.x.min=r.x.min),r.y.min<e.y.min&&(e.y.min=r.y.min),r.z&&r.z.min<e.z.min&&(e.z.min=r.z.min),r.x.max>e.x.max&&(e.x.max=r.x.max),r.y.max>e.y.max&&(e.y.max=r.y.max),r.z&&r.z.max>e.z.max&&(e.z.max=r.z.max),e.x.mid=(e.x.min+e.x.max)/2,e.y.mid=(e.y.min+e.y.max)/2,e.z&&(e.z.mid=(e.z.min+e.z.max)/2),e.x.size=e.x.max-e.x.min,e.y.size=e.y.max-e.y.min,e.z&&(e.z.size=e.z.max-e.z.min)},pairiteration:function(e,r,s){const a=e.bbox(),i=r.bbox(),o=1e5,l=s||.5;if(a.x.size+a.y.size<l&&i.x.size+i.y.size<l)return[(o*(e._t1+e._t2)/2|0)/o+"/"+(o*(r._t1+r._t2)/2|0)/o];let c=e.split(.5),d=r.split(.5),u=[{left:c.left,right:d.left},{left:c.left,right:d.right},{left:c.right,right:d.right},{left:c.right,right:d.left}];u=u.filter(function(h){return Q.bboxoverlap(h.left.bbox(),h.right.bbox())});let f=[];return u.length===0||(u.forEach(function(h){f=f.concat(Q.pairiteration(h.left,h.right,l))}),f=f.filter(function(h,g){return f.indexOf(h)===g})),f},getccenter:function(e,r,s){const a=r.x-e.x,i=r.y-e.y,o=s.x-r.x,l=s.y-r.y,c=a*Ut(tr)-i*Pr(tr),d=a*Pr(tr)+i*Ut(tr),u=o*Ut(tr)-l*Pr(tr),f=o*Pr(tr)+l*Ut(tr),h=(e.x+r.x)/2,g=(e.y+r.y)/2,v=(r.x+s.x)/2,j=(r.y+s.y)/2,_=h+c,b=g+d,p=v+u,m=j+f,y=Q.lli8(h,g,_,b,v,j,p,m),x=Q.dist(y,e);let w=ls(e.y-y.y,e.x-y.x),S=ls(r.y-y.y,r.x-y.x),k=ls(s.y-y.y,s.x-y.x),C;return w<k?((w>S||S>k)&&(w+=vn),w>k&&(C=k,k=w,w=C)):k<S&&S<w?(C=k,k=w,w=C):k+=vn,y.s=w,y.e=k,y.r=x,y},numberSort:function(e,r){return e-r}};class As{constructor(r){this.curves=[],this._3d=!1,r&&(this.curves=r,this._3d=this.curves[0]._3d)}valueOf(){return this.toString()}toString(){return"["+this.curves.map(function(r){return Q.pointsToString(r.points)}).join(", ")+"]"}addCurve(r){this.curves.push(r),this._3d=this._3d||r._3d}length(){return this.curves.map(function(r){return r.length()}).reduce(function(r,s){return r+s})}curve(r){return this.curves[r]}bbox(){const r=this.curves;for(var s=r[0].bbox(),a=1;a<r.length;a++)Q.expandbox(s,r[a].bbox());return s}offset(r){const s=[];return this.curves.forEach(function(a){s.push(...a.offset(r))}),new As(s)}}const{abs:ds,min:jl,max:_l,cos:_j,sin:Nj,acos:Sj,sqrt:us}=Math,kj=Math.PI;class Ee{constructor(r){let s=r&&r.forEach?r:Array.from(arguments).slice(),a=!1;if(typeof s[0]=="object"){a=s.length;const v=[];s.forEach(function(j){["x","y","z"].forEach(function(_){typeof j[_]<"u"&&v.push(j[_])})}),s=v}let i=!1;const o=s.length;if(a){if(a>4){if(arguments.length!==1)throw new Error("Only new Bezier(point[]) is accepted for 4th and higher order curves");i=!0}}else if(o!==6&&o!==8&&o!==9&&o!==12&&arguments.length!==1)throw new Error("Only new Bezier(point[]) is accepted for 4th and higher order curves");const l=this._3d=!i&&(o===9||o===12)||r&&r[0]&&typeof r[0].z<"u",c=this.points=[];for(let v=0,j=l?3:2;v<o;v+=j){var d={x:s[v],y:s[v+1]};l&&(d.z=s[v+2]),c.push(d)}const u=this.order=c.length-1,f=this.dims=["x","y"];l&&f.push("z"),this.dimlen=f.length;const h=Q.align(c,{p1:c[0],p2:c[u]}),g=Q.dist(c[0],c[u]);this._linear=h.reduce((v,j)=>v+ds(j.y),0)<g/50,this._lut=[],this._t1=0,this._t2=1,this.update()}static quadraticFromPoints(r,s,a,i){if(typeof i>"u"&&(i=.5),i===0)return new Ee(s,s,a);if(i===1)return new Ee(r,s,s);const o=Ee.getABC(2,r,s,a,i);return new Ee(r,o.A,a)}static cubicFromPoints(r,s,a,i,o){typeof i>"u"&&(i=.5);const l=Ee.getABC(3,r,s,a,i);typeof o>"u"&&(o=Q.dist(s,l.C));const c=o*(1-i)/i,d=Q.dist(r,a),u=(a.x-r.x)/d,f=(a.y-r.y)/d,h=o*u,g=o*f,v=c*u,j=c*f,_={x:s.x-h,y:s.y-g},b={x:s.x+v,y:s.y+j},p=l.A,m={x:p.x+(_.x-p.x)/(1-i),y:p.y+(_.y-p.y)/(1-i)},y={x:p.x+(b.x-p.x)/i,y:p.y+(b.y-p.y)/i},x={x:r.x+(m.x-r.x)/i,y:r.y+(m.y-r.y)/i},w={x:a.x+(y.x-a.x)/(1-i),y:a.y+(y.y-a.y)/(1-i)};return new Ee(r,x,w,a)}static getUtils(){return Q}getUtils(){return Ee.getUtils()}static get PolyBezier(){return As}valueOf(){return this.toString()}toString(){return Q.pointsToString(this.points)}toSVG(){if(this._3d)return!1;const r=this.points,s=r[0].x,a=r[0].y,i=["M",s,a,this.order===2?"Q":"C"];for(let o=1,l=r.length;o<l;o++)i.push(r[o].x),i.push(r[o].y);return i.join(" ")}setRatios(r){if(r.length!==this.points.length)throw new Error("incorrect number of ratio values");this.ratios=r,this._lut=[]}verify(){const r=this.coordDigest();r!==this._print&&(this._print=r,this.update())}coordDigest(){return this.points.map(function(r,s){return""+s+r.x+r.y+(r.z?r.z:0)}).join("")}update(){this._lut=[],this.dpoints=Q.derive(this.points,this._3d),this.computedirection()}computedirection(){const r=this.points,s=Q.angle(r[0],r[this.order],r[1]);this.clockwise=s>0}length(){return Q.length(this.derivative.bind(this))}static getABC(r=2,s,a,i,o=.5){const l=Q.projectionratio(o,r),c=1-l,d={x:l*s.x+c*i.x,y:l*s.y+c*i.y},u=Q.abcratio(o,r);return{A:{x:a.x+(a.x-d.x)/u,y:a.y+(a.y-d.y)/u},B:a,C:d,S:s,E:i}}getABC(r,s){s=s||this.get(r);let a=this.points[0],i=this.points[this.order];return Ee.getABC(this.order,a,s,i,r)}getLUT(r){if(this.verify(),r=r||100,this._lut.length===r+1)return this._lut;this._lut=[],r++,this._lut=[];for(let s=0,a,i;s<r;s++)i=s/(r-1),a=this.compute(i),a.t=i,this._lut.push(a);return this._lut}on(r,s){s=s||5;const a=this.getLUT(),i=[];for(let o=0,l,c=0;o<a.length;o++)l=a[o],Q.dist(l,r)<s&&(i.push(l),c+=o/a.length);return i.length?t/=i.length:!1}project(r){const s=this.getLUT(),a=s.length-1,i=Q.closest(s,r),o=i.mpos,l=(o-1)/a,c=(o+1)/a,d=.1/a;let u=i.mdist,f=l,h=f,g;u+=1;for(let v;f<c+d;f+=d)g=this.compute(f),v=Q.dist(r,g),v<u&&(u=v,h=f);return h=h<0?0:h>1?1:h,g=this.compute(h),g.t=h,g.d=u,g}get(r){return this.compute(r)}point(r){return this.points[r]}compute(r){return this.ratios?Q.computeWithRatios(r,this.points,this.ratios,this._3d):Q.compute(r,this.points,this._3d,this.ratios)}raise(){const r=this.points,s=[r[0]],a=r.length;for(let i=1,o,l;i<a;i++)o=r[i],l=r[i-1],s[i]={x:(a-i)/a*o.x+i/a*l.x,y:(a-i)/a*o.y+i/a*l.y};return s[a]=r[a-1],new Ee(s)}derivative(r){return Q.compute(r,this.dpoints[0],this._3d)}dderivative(r){return Q.compute(r,this.dpoints[1],this._3d)}align(){let r=this.points;return new Ee(Q.align(r,{p1:r[0],p2:r[r.length-1]}))}curvature(r){return Q.curvature(r,this.dpoints[0],this.dpoints[1],this._3d)}inflections(){return Q.inflections(this.points)}normal(r){return this._3d?this.__normal3(r):this.__normal2(r)}__normal2(r){const s=this.derivative(r),a=us(s.x*s.x+s.y*s.y);return{t:r,x:-s.y/a,y:s.x/a}}__normal3(r){const s=this.derivative(r),a=this.derivative(r+.01),i=us(s.x*s.x+s.y*s.y+s.z*s.z),o=us(a.x*a.x+a.y*a.y+a.z*a.z);s.x/=i,s.y/=i,s.z/=i,a.x/=o,a.y/=o,a.z/=o;const l={x:a.y*s.z-a.z*s.y,y:a.z*s.x-a.x*s.z,z:a.x*s.y-a.y*s.x},c=us(l.x*l.x+l.y*l.y+l.z*l.z);l.x/=c,l.y/=c,l.z/=c;const d=[l.x*l.x,l.x*l.y-l.z,l.x*l.z+l.y,l.x*l.y+l.z,l.y*l.y,l.y*l.z-l.x,l.x*l.z-l.y,l.y*l.z+l.x,l.z*l.z];return{t:r,x:d[0]*s.x+d[1]*s.y+d[2]*s.z,y:d[3]*s.x+d[4]*s.y+d[5]*s.z,z:d[6]*s.x+d[7]*s.y+d[8]*s.z}}hull(r){let s=this.points,a=[],i=[],o=0;for(i[o++]=s[0],i[o++]=s[1],i[o++]=s[2],this.order===3&&(i[o++]=s[3]);s.length>1;){a=[];for(let l=0,c,d=s.length-1;l<d;l++)c=Q.lerp(r,s[l],s[l+1]),i[o++]=c,a.push(c);s=a}return i}split(r,s){if(r===0&&s)return this.split(s).left;if(s===1)return this.split(r).right;const a=this.hull(r),i={left:this.order===2?new Ee([a[0],a[3],a[5]]):new Ee([a[0],a[4],a[7],a[9]]),right:this.order===2?new Ee([a[5],a[4],a[2]]):new Ee([a[9],a[8],a[6],a[3]]),span:a};return i.left._t1=Q.map(0,0,1,this._t1,this._t2),i.left._t2=Q.map(r,0,1,this._t1,this._t2),i.right._t1=Q.map(r,0,1,this._t1,this._t2),i.right._t2=Q.map(1,0,1,this._t1,this._t2),s?(s=Q.map(s,r,1,0,1),i.right.split(s).left):i}extrema(){const r={};let s=[];return this.dims.forEach((function(a){let i=function(l){return l[a]},o=this.dpoints[0].map(i);r[a]=Q.droots(o),this.order===3&&(o=this.dpoints[1].map(i),r[a]=r[a].concat(Q.droots(o))),r[a]=r[a].filter(function(l){return l>=0&&l<=1}),s=s.concat(r[a].sort(Q.numberSort))}).bind(this)),r.values=s.sort(Q.numberSort).filter(function(a,i){return s.indexOf(a)===i}),r}bbox(){const r=this.extrema(),s={};return this.dims.forEach((function(a){s[a]=Q.getminmax(this,a,r[a])}).bind(this)),s}overlaps(r){const s=this.bbox(),a=r.bbox();return Q.bboxoverlap(s,a)}offset(r,s){if(typeof s<"u"){const a=this.get(r),i=this.normal(r),o={c:a,n:i,x:a.x+i.x*s,y:a.y+i.y*s};return this._3d&&(o.z=a.z+i.z*s),o}if(this._linear){const a=this.normal(0),i=this.points.map(function(o){const l={x:o.x+r*a.x,y:o.y+r*a.y};return o.z&&a.z&&(l.z=o.z+r*a.z),l});return[new Ee(i)]}return this.reduce().map(function(a){return a._linear?a.offset(r)[0]:a.scale(r)})}simple(){if(this.order===3){const i=Q.angle(this.points[0],this.points[3],this.points[1]),o=Q.angle(this.points[0],this.points[3],this.points[2]);if(i>0&&o<0||i<0&&o>0)return!1}const r=this.normal(0),s=this.normal(1);let a=r.x*s.x+r.y*s.y;return this._3d&&(a+=r.z*s.z),ds(Sj(a))<kj/3}reduce(){let r,s=0,a=0,i=.01,o,l=[],c=[],d=this.extrema().values;for(d.indexOf(0)===-1&&(d=[0].concat(d)),d.indexOf(1)===-1&&d.push(1),s=d[0],r=1;r<d.length;r++)a=d[r],o=this.split(s,a),o._t1=s,o._t2=a,l.push(o),s=a;return l.forEach(function(u){for(s=0,a=0;a<=1;)for(a=s+i;a<=1+i;a+=i)if(o=u.split(s,a),!o.simple()){if(a-=i,ds(s-a)<i)return[];o=u.split(s,a),o._t1=Q.map(s,0,1,u._t1,u._t2),o._t2=Q.map(a,0,1,u._t1,u._t2),c.push(o),s=a;break}s<1&&(o=u.split(s,1),o._t1=Q.map(s,0,1,u._t1,u._t2),o._t2=u._t2,c.push(o))}),c}translate(r,s,a){a=typeof a=="number"?a:s;const i=this.order;let o=this.points.map((l,c)=>(1-c/i)*s+c/i*a);return new Ee(this.points.map((l,c)=>({x:l.x+r.x*o[c],y:l.y+r.y*o[c]})))}scale(r){const s=this.order;let a=!1;if(typeof r=="function"&&(a=r),a&&s===2)return this.raise().scale(a);const i=this.clockwise,o=this.points;if(this._linear)return this.translate(this.normal(0),a?a(0):r,a?a(1):r);const l=a?a(0):r,c=a?a(1):r,d=[this.offset(0,10),this.offset(1,10)],u=[],f=Q.lli4(d[0],d[0].c,d[1],d[1].c);if(!f)throw new Error("cannot scale this curve. Try reducing it first.");return[0,1].forEach(function(h){const g=u[h*s]=Q.copy(o[h*s]);g.x+=(h?c:l)*d[h].n.x,g.y+=(h?c:l)*d[h].n.y}),a?([0,1].forEach(function(h){if(!(s===2&&h)){var g=o[h+1],v={x:g.x-f.x,y:g.y-f.y},j=a?a((h+1)/s):r;a&&!i&&(j=-j);var _=us(v.x*v.x+v.y*v.y);v.x/=_,v.y/=_,u[h+1]={x:g.x+j*v.x,y:g.y+j*v.y}}}),new Ee(u)):([0,1].forEach(h=>{if(s===2&&h)return;const g=u[h*s],v=this.derivative(h),j={x:g.x+v.x,y:g.y+v.y};u[h+1]=Q.lli4(g,j,f,o[h+1])}),new Ee(u))}outline(r,s,a,i){if(s=s===void 0?r:s,this._linear){const w=this.normal(0),S=this.points[0],k=this.points[this.points.length-1];let C,R,O;a===void 0&&(a=r,i=s),C={x:S.x+w.x*r,y:S.y+w.y*r},O={x:k.x+w.x*a,y:k.y+w.y*a},R={x:(C.x+O.x)/2,y:(C.y+O.y)/2};const P=[C,R,O];C={x:S.x-w.x*s,y:S.y-w.y*s},O={x:k.x-w.x*i,y:k.y-w.y*i},R={x:(C.x+O.x)/2,y:(C.y+O.y)/2};const T=[O,R,C],M=Q.makeline(T[2],P[0]),A=Q.makeline(P[2],T[0]),$=[M,new Ee(P),A,new Ee(T)];return new As($)}const o=this.reduce(),l=o.length,c=[];let d=[],u,f=0,h=this.length();const g=typeof a<"u"&&typeof i<"u";function v(w,S,k,C,R){return function(O){const P=C/k,T=(C+R)/k,M=S-w;return Q.map(O,0,1,w+P*M,w+T*M)}}o.forEach(function(w){const S=w.length();g?(c.push(w.scale(v(r,a,h,f,S))),d.push(w.scale(v(-s,-i,h,f,S)))):(c.push(w.scale(r)),d.push(w.scale(-s))),f+=S}),d=d.map(function(w){return u=w.points,u[3]?w.points=[u[3],u[2],u[1],u[0]]:w.points=[u[2],u[1],u[0]],w}).reverse();const j=c[0].points[0],_=c[l-1].points[c[l-1].points.length-1],b=d[l-1].points[d[l-1].points.length-1],p=d[0].points[0],m=Q.makeline(b,j),y=Q.makeline(_,p),x=[m].concat(c).concat([y]).concat(d);return new As(x)}outlineshapes(r,s,a){s=s||r;const i=this.outline(r,s).curves,o=[];for(let l=1,c=i.length;l<c/2;l++){const d=Q.makeshape(i[l],i[c-l],a);d.startcap.virtual=l>1,d.endcap.virtual=l<c/2-1,o.push(d)}return o}intersects(r,s){return r?r.p1&&r.p2?this.lineIntersects(r):(r instanceof Ee&&(r=r.reduce()),this.curveintersects(this.reduce(),r,s)):this.selfintersects(s)}lineIntersects(r){const s=jl(r.p1.x,r.p2.x),a=jl(r.p1.y,r.p2.y),i=_l(r.p1.x,r.p2.x),o=_l(r.p1.y,r.p2.y);return Q.roots(this.points,r).filter(l=>{var c=this.get(l);return Q.between(c.x,s,i)&&Q.between(c.y,a,o)})}selfintersects(r){const s=this.reduce(),a=s.length-2,i=[];for(let o=0,l,c,d;o<a;o++)c=s.slice(o,o+1),d=s.slice(o+2),l=this.curveintersects(c,d,r),i.push(...l);return i}curveintersects(r,s,a){const i=[];r.forEach(function(l){s.forEach(function(c){l.overlaps(c)&&i.push({left:l,right:c})})});let o=[];return i.forEach(function(l){const c=Q.pairiteration(l.left,l.right,a);c.length>0&&(o=o.concat(c))}),o}arcs(r){return r=r||.5,this._iterate(r,[])}_error(r,s,a,i){const o=(i-a)/4,l=this.get(a+o),c=this.get(i-o),d=Q.dist(r,s),u=Q.dist(r,l),f=Q.dist(r,c);return ds(u-d)+ds(f-d)}_iterate(r,s){let a=0,i=1,o;do{o=0,i=1;let l=this.get(a),c,d,u,f,h=!1,g=!1,v,j=i,_=1;do if(g=h,f=u,j=(a+i)/2,c=this.get(j),d=this.get(i),u=Q.getccenter(l,c,d),u.interval={start:a,end:i},h=this._error(u,l,a,i)<=r,v=g&&!h,v||(_=i),h){if(i>=1){if(u.interval.end=_=1,f=u,i>1){let p={x:u.x+u.r*_j(u.e),y:u.y+u.r*Nj(u.e)};u.e+=Q.angle({x:u.x,y:u.y},p,this.get(1))}break}i=i+(i-a)/2}else i=j;while(!v&&o++<100);if(o>=100)break;f=f||u,s.push(f),a=_}while(i<1);return s}}function fi(e,r){(r==null||r>e.length)&&(r=e.length);for(var s=0,a=Array(r);s<r;s++)a[s]=e[s];return a}function Cj(e){if(Array.isArray(e))return e}function Pj(e){if(Array.isArray(e))return fi(e)}function Ej(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Rj(e,r){var s=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(s!=null){var a,i,o,l,c=[],d=!0,u=!1;try{if(o=(s=s.call(e)).next,r!==0)for(;!(d=(a=o.call(s)).done)&&(c.push(a.value),c.length!==r);d=!0);}catch(f){u=!0,i=f}finally{try{if(!d&&s.return!=null&&(l=s.return(),Object(l)!==l))return}finally{if(u)throw i}}return c}}function Oj(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Aj(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Tj(e,r){if(e==null)return{};var s,a,i=Dj(e,r);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)s=o[a],r.includes(s)||{}.propertyIsEnumerable.call(e,s)&&(i[s]=e[s])}return i}function Dj(e,r){if(e==null)return{};var s={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(r.includes(a))continue;s[a]=e[a]}return s}function $j(e,r){return Cj(e)||Rj(e,r)||au(e,r)||Oj()}function Mj(e){return Pj(e)||Ej(e)||au(e)||Aj()}function zj(e,r){if(typeof e!="object"||!e)return e;var s=e[Symbol.toPrimitive];if(s!==void 0){var a=s.call(e,r);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function Lj(e){var r=zj(e,"string");return typeof r=="symbol"?r:r+""}function au(e,r){if(e){if(typeof e=="string")return fi(e,r);var s={}.toString.call(e).slice(8,-1);return s==="Object"&&e.constructor&&(s=e.constructor.name),s==="Map"||s==="Set"?Array.from(e):s==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s)?fi(e,r):void 0}}var Fj=(function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1,i=(r instanceof Array?r.length?r:[void 0]:[r]).map(function(c){return{keyAccessor:c,isProp:!(c instanceof Function)}}),o=e.reduce(function(c,d){var u=c,f=d;return i.forEach(function(h,g){var v=h.keyAccessor,j=h.isProp,_;if(j){var b=f,p=b[v],m=Tj(b,[v].map(Lj));_=p,f=m}else _=v(f,g);g+1<i.length?(u.hasOwnProperty(_)||(u[_]={}),u=u[_]):s?(u.hasOwnProperty(_)||(u[_]=[]),u[_].push(f)):u[_]=f}),c},{});s instanceof Function&&(function c(d){var u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;u===i.length?Object.keys(d).forEach(function(f){return d[f]=s(d[f])}):Object.values(d).forEach(function(f){return c(f,u+1)})})(o);var l=o;return a&&(l=[],(function c(d){var u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];u.length===i.length?l.push({keys:u,vals:d}):Object.entries(d).forEach(function(f){var h=$j(f,2),g=h[0],v=h[1];return c(v,[].concat(Mj(u),[g]))})})(o),r instanceof Array&&r.length===0&&l.length===1&&(l[0].keys=[])),l});function Ij(e){for(var r=e.length/6|0,s=new Array(r),a=0;a<r;)s[a]="#"+e.slice(a*6,++a*6);return s}const Hj=Ij("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928");function Uj(e,r){r===void 0&&(r={});var s=r.insertAt;if(!(typeof document>"u")){var a=document.head||document.getElementsByTagName("head")[0],i=document.createElement("style");i.type="text/css",s==="top"&&a.firstChild?a.insertBefore(i,a.firstChild):a.appendChild(i),i.styleSheet?i.styleSheet.cssText=e:i.appendChild(document.createTextNode(e))}}var qj=`.force-graph-container canvas {
  display: block;
  user-select: none;
  outline: none;
  -webkit-tap-highlight-color: transparent;
}

.force-graph-container .clickable {
  cursor: pointer;
}

.force-graph-container .grabbable {
  cursor: move;
  cursor: grab;
  cursor: -moz-grab;
  cursor: -webkit-grab;
}

.force-graph-container .grabbable:active {
  cursor: grabbing;
  cursor: -moz-grabbing;
  cursor: -webkit-grabbing;
}
`;Uj(qj);function mi(e,r){(r==null||r>e.length)&&(r=e.length);for(var s=0,a=Array(r);s<r;s++)a[s]=e[s];return a}function Wj(e){if(Array.isArray(e))return e}function Bj(e){if(Array.isArray(e))return mi(e)}function Nl(e,r,s){if(iu())return Reflect.construct.apply(null,arguments);var a=[null];a.push.apply(a,r);var i=new(e.bind.apply(e,a));return i}function Ws(e,r,s){return(r=Jj(r))in e?Object.defineProperty(e,r,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[r]=s,e}function iu(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(iu=function(){return!!e})()}function Vj(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Gj(e,r){var s=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(s!=null){var a,i,o,l,c=[],d=!0,u=!1;try{if(o=(s=s.call(e)).next,r!==0)for(;!(d=(a=o.call(s)).done)&&(c.push(a.value),c.length!==r);d=!0);}catch(f){u=!0,i=f}finally{try{if(!d&&s.return!=null&&(l=s.return(),Object(l)!==l))return}finally{if(u)throw i}}return c}}function Yj(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Xj(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Sl(e,r){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);r&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),s.push.apply(s,a)}return s}function Er(e){for(var r=1;r<arguments.length;r++){var s=arguments[r]!=null?arguments[r]:{};r%2?Sl(Object(s),!0).forEach(function(a){Ws(e,a,s[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Sl(Object(s)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(s,a))})}return e}function Ts(e,r){return Wj(e)||Gj(e,r)||ou(e,r)||Yj()}function dt(e){return Bj(e)||Vj(e)||ou(e)||Xj()}function Kj(e,r){if(typeof e!="object"||!e)return e;var s=e[Symbol.toPrimitive];if(s!==void 0){var a=s.call(e,r);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(e)}function Jj(e){var r=Kj(e,"string");return typeof r=="symbol"?r:r+""}function pi(e){"@babel/helpers - typeof";return pi=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},pi(e)}function ou(e,r){if(e){if(typeof e=="string")return mi(e,r);var s={}.toString.call(e).slice(8,-1);return s==="Object"&&e.constructor&&(s=e.constructor.name),s==="Map"||s==="Set"?Array.from(e):s==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s)?mi(e,r):void 0}}var Qj=Ih(Hj);function kl(e,r,s){!r||typeof s!="string"||e.filter(function(a){return!a[s]}).forEach(function(a){a[s]=Qj(r(a))})}function Zj(e,r){var s=e.nodes,a=e.links,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},o=i.nodeFilter,l=o===void 0?function(){return!0}:o,c=i.onLoopError,d=c===void 0?function(v){throw"Invalid DAG structure! Found cycle in node path: ".concat(v.join(" -> "),".")}:c,u={};s.forEach(function(v){return u[r(v)]={data:v,out:[],depth:-1,skip:!l(v)}}),a.forEach(function(v){var j=v.source,_=v.target,b=x(j),p=x(_);if(!u.hasOwnProperty(b))throw"Missing source node with id: ".concat(b);if(!u.hasOwnProperty(p))throw"Missing target node with id: ".concat(p);var m=u[b],y=u[p];m.out.push(y);function x(w){return pi(w)==="object"?r(w):w}});var f=[];g(Object.values(u));var h=Object.assign.apply(Object,[{}].concat(dt(Object.entries(u).filter(function(v){var j=Ts(v,2),_=j[1];return!_.skip}).map(function(v){var j=Ts(v,2),_=j[0],b=j[1];return Ws({},_,b.depth)}))));return h;function g(v){for(var j=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],_=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,b=function(){var x=v[p];if(j.indexOf(x)!==-1){var w=[].concat(dt(j.slice(j.indexOf(x))),[x]).map(function(S){return r(S.data)});return f.some(function(S){return S.length===w.length&&S.every(function(k,C){return k===w[C]})})||(f.push(w),d(w)),1}_>x.depth&&(x.depth=_,g(x.out,[].concat(dt(j),[x]),_+(x.skip?0:1)))},p=0,m=v.length;p<m;p++)b()}}var e_=2,He=function(r,s){return s.onNeedsRedraw&&s.onNeedsRedraw()},Cl=function(r,s){if(!s.isShadow){var a=je(s.linkDirectionalParticles);s.graphData.links.forEach(function(i){var o=Math.round(Math.abs(a(i)));o?i.__photons=dt(Array(o)).map(function(){return{}}):delete i.__photons})}},Zn=zi({props:{graphData:{default:{nodes:[],links:[]},onChange:function(r,s){s.engineRunning=!1,Cl(r,s)}},dagMode:{onChange:function(r,s){!r&&(s.graphData.nodes||[]).forEach(function(a){return a.fx=a.fy=void 0})}},dagLevelDistance:{},dagNodeFilter:{default:function(r){return!0}},onDagError:{triggerUpdate:!1},nodeRelSize:{default:4,triggerUpdate:!1,onChange:He},nodeId:{default:"id"},nodeVal:{default:"val",triggerUpdate:!1,onChange:He},nodeColor:{default:"color",triggerUpdate:!1,onChange:He},nodeAutoColorBy:{},nodeCanvasObject:{triggerUpdate:!1,onChange:He},nodeCanvasObjectMode:{default:function(){return"replace"},triggerUpdate:!1,onChange:He},nodeVisibility:{default:!0,triggerUpdate:!1,onChange:He},linkSource:{default:"source"},linkTarget:{default:"target"},linkVisibility:{default:!0,triggerUpdate:!1,onChange:He},linkColor:{default:"color",triggerUpdate:!1,onChange:He},linkAutoColorBy:{},linkLineDash:{triggerUpdate:!1,onChange:He},linkWidth:{default:1,triggerUpdate:!1,onChange:He},linkCurvature:{default:0,triggerUpdate:!1,onChange:He},linkCanvasObject:{triggerUpdate:!1,onChange:He},linkCanvasObjectMode:{default:function(){return"replace"},triggerUpdate:!1,onChange:He},linkDirectionalArrowLength:{default:0,triggerUpdate:!1,onChange:He},linkDirectionalArrowColor:{triggerUpdate:!1,onChange:He},linkDirectionalArrowRelPos:{default:.5,triggerUpdate:!1,onChange:He},linkDirectionalParticles:{default:0,triggerUpdate:!1,onChange:Cl},linkDirectionalParticleSpeed:{default:.01,triggerUpdate:!1},linkDirectionalParticleOffset:{default:0,triggerUpdate:!1},linkDirectionalParticleWidth:{default:4,triggerUpdate:!1},linkDirectionalParticleColor:{triggerUpdate:!1},linkDirectionalParticleCanvasObject:{triggerUpdate:!1},globalScale:{default:1,triggerUpdate:!1},d3AlphaMin:{default:0,triggerUpdate:!1},d3AlphaDecay:{default:.0228,triggerUpdate:!1,onChange:function(r,s){s.forceLayout.alphaDecay(r)}},d3AlphaTarget:{default:0,triggerUpdate:!1,onChange:function(r,s){s.forceLayout.alphaTarget(r)}},d3VelocityDecay:{default:.4,triggerUpdate:!1,onChange:function(r,s){s.forceLayout.velocityDecay(r)}},warmupTicks:{default:0,triggerUpdate:!1},cooldownTicks:{default:1/0,triggerUpdate:!1},cooldownTime:{default:15e3,triggerUpdate:!1},onUpdate:{default:function(){},triggerUpdate:!1},onFinishUpdate:{default:function(){},triggerUpdate:!1},onEngineTick:{default:function(){},triggerUpdate:!1},onEngineStop:{default:function(){},triggerUpdate:!1},onNeedsRedraw:{triggerUpdate:!1},isShadow:{default:!1,triggerUpdate:!1}},methods:{d3Force:function(r,s,a){return a===void 0?r.forceLayout.force(s):(r.forceLayout.force(s,a),this)},d3ReheatSimulation:function(r){return r.forceLayout.alpha(1),this.resetCountdown(),this},resetCountdown:function(r){return r.cntTicks=0,r.startTickTime=new Date,r.engineRunning=!0,this},isEngineRunning:function(r){return!!r.engineRunning},tickFrame:function(r){return!r.isShadow&&s(),i(),!r.isShadow&&o(),!r.isShadow&&l(),a(),this;function s(){r.engineRunning&&(++r.cntTicks>r.cooldownTicks||new Date-r.startTickTime>r.cooldownTime||r.d3AlphaMin>0&&r.forceLayout.alpha()<r.d3AlphaMin?(r.engineRunning=!1,r.onEngineStop()):(r.forceLayout.tick(),r.onEngineTick()))}function a(){var c=je(r.nodeVisibility),d=je(r.nodeVal),u=je(r.nodeColor),f=je(r.nodeCanvasObjectMode),h=r.ctx,g=r.isShadow/r.globalScale,v=r.graphData.nodes.filter(c);h.save(),v.forEach(function(j){var _=f(j);if(r.nodeCanvasObject&&(_==="before"||_==="replace")&&(r.nodeCanvasObject(j,h,r.globalScale),_==="replace")){h.restore();return}var b=Math.sqrt(Math.max(0,d(j)||1))*r.nodeRelSize+g;h.beginPath(),h.arc(j.x,j.y,b,0,2*Math.PI,!1),h.fillStyle=u(j)||"rgba(31, 120, 180, 0.92)",h.fill(),r.nodeCanvasObject&&_==="after"&&r.nodeCanvasObject(j,r.ctx,r.globalScale)}),h.restore()}function i(){var c=je(r.linkVisibility),d=je(r.linkColor),u=je(r.linkWidth),f=je(r.linkLineDash),h=je(r.linkCurvature),g=je(r.linkCanvasObjectMode),v=r.ctx,j=r.isShadow*2,_=r.graphData.links.filter(c);_.forEach(S);var b=[],p=[],m=_;if(r.linkCanvasObject){var y=[],x=[];_.forEach(function(k){return({before:b,after:p,replace:y}[g(k)]||x).push(k)}),m=[].concat(dt(b),p,x),b=b.concat(y)}v.save(),b.forEach(function(k){return r.linkCanvasObject(k,v,r.globalScale)}),v.restore();var w=Fj(m,[d,u,f]);v.save(),Object.entries(w).forEach(function(k){var C=Ts(k,2),R=C[0],O=C[1],P=!R||R==="undefined"?"rgba(0,0,0,0.15)":R;Object.entries(O).forEach(function(T){var M=Ts(T,2),A=M[0],$=M[1],D=(A||1)/r.globalScale+j;Object.entries($).forEach(function(U){var G=Ts(U,2);G[0];var q=G[1],Y=f(q[0]);v.beginPath(),q.forEach(function(Z){var K=Z.source,ue=Z.target;if(!(!K||!ue||!K.hasOwnProperty("x")||!ue.hasOwnProperty("x"))){v.moveTo(K.x,K.y);var he=Z.__controlPoints;he?v[he.length===2?"quadraticCurveTo":"bezierCurveTo"].apply(v,dt(he).concat([ue.x,ue.y])):v.lineTo(ue.x,ue.y)}}),v.strokeStyle=P,v.lineWidth=D,v.setLineDash(Y||[]),v.stroke()})})}),v.restore(),v.save(),p.forEach(function(k){return r.linkCanvasObject(k,v,r.globalScale)}),v.restore();function S(k){var C=h(k);if(!C){k.__controlPoints=null;return}var R=k.source,O=k.target;if(!(!R||!O||!R.hasOwnProperty("x")||!O.hasOwnProperty("x"))){var P=Math.sqrt(Math.pow(O.x-R.x,2)+Math.pow(O.y-R.y,2));if(P>0){var T=Math.atan2(O.y-R.y,O.x-R.x),M=P*C,A={x:(R.x+O.x)/2+M*Math.cos(T-Math.PI/2),y:(R.y+O.y)/2+M*Math.sin(T-Math.PI/2)};k.__controlPoints=[A.x,A.y]}else{var $=C*70;k.__controlPoints=[O.x,O.y-$,O.x+$,O.y]}}}}function o(){var c=1.6,d=.2,u=je(r.linkDirectionalArrowLength),f=je(r.linkDirectionalArrowRelPos),h=je(r.linkVisibility),g=je(r.linkDirectionalArrowColor||r.linkColor),v=je(r.nodeVal),j=r.ctx;j.save(),r.graphData.links.filter(h).forEach(function(_){var b=u(_);if(!(!b||b<0)){var p=_.source,m=_.target;if(!(!p||!m||!p.hasOwnProperty("x")||!m.hasOwnProperty("x"))){var y=Math.sqrt(Math.max(0,v(p)||1))*r.nodeRelSize,x=Math.sqrt(Math.max(0,v(m)||1))*r.nodeRelSize,w=Math.min(1,Math.max(0,f(_))),S=g(_)||"rgba(0,0,0,0.28)",k=b/c/2,C=_.__controlPoints&&Nl(Ee,[p.x,p.y].concat(dt(_.__controlPoints),[m.x,m.y])),R=C?function(D){return C.get(D)}:function(D){return{x:p.x+(m.x-p.x)*D||0,y:p.y+(m.y-p.y)*D||0}},O=C?C.length():Math.sqrt(Math.pow(m.x-p.x,2)+Math.pow(m.y-p.y,2)),P=y+b+(O-y-x-b)*w,T=R(P/O),M=R((P-b)/O),A=R((P-b*(1-d))/O),$=Math.atan2(T.y-M.y,T.x-M.x)-Math.PI/2;j.beginPath(),j.moveTo(T.x,T.y),j.lineTo(M.x+k*Math.cos($),M.y+k*Math.sin($)),j.lineTo(A.x,A.y),j.lineTo(M.x-k*Math.cos($),M.y-k*Math.sin($)),j.fillStyle=S,j.fill()}}}),j.restore()}function l(){var c=je(r.linkDirectionalParticles),d=je(r.linkDirectionalParticleSpeed),u=je(r.linkDirectionalParticleOffset),f=je(r.linkDirectionalParticleWidth),h=je(r.linkVisibility),g=je(r.linkDirectionalParticleColor||r.linkColor),v=r.ctx;v.save(),r.graphData.links.filter(h).forEach(function(j){var _=c(j);if(!(!j.hasOwnProperty("__photons")||!j.__photons.length)){var b=j.source,p=j.target;if(!(!b||!p||!b.hasOwnProperty("x")||!p.hasOwnProperty("x"))){var m=d(j),y=Math.abs(u(j)),x=j.__photons||[],w=Math.max(0,f(j)/2)/Math.sqrt(r.globalScale),S=g(j)||"rgba(0,0,0,0.28)";v.fillStyle=S;var k=j.__controlPoints?Nl(Ee,[b.x,b.y].concat(dt(j.__controlPoints),[p.x,p.y])):null,C=0,R=!1;x.forEach(function(O){var P=!!O.__singleHop;if(O.hasOwnProperty("__progressRatio")||(O.__progressRatio=P?0:(C+y)/_),!P&&C++,O.__progressRatio+=m,O.__progressRatio>=1)if(!P)O.__progressRatio=O.__progressRatio%1;else{R=!0;return}var T=O.__progressRatio,M=k?k.get(T):{x:b.x+(p.x-b.x)*T||0,y:b.y+(p.y-b.y)*T||0};r.linkDirectionalParticleCanvasObject?r.linkDirectionalParticleCanvasObject(M.x,M.y,j,v,r.globalScale):(v.beginPath(),v.arc(M.x,M.y,w,0,2*Math.PI,!1),v.fill())}),R&&(j.__photons=j.__photons.filter(function(O){return!O.__singleHop||O.__progressRatio<=1}))}}}),v.restore()}},emitParticle:function(r,s){return s&&(!s.__photons&&(s.__photons=[]),s.__photons.push({__singleHop:!0})),this}},stateInit:function(){return{forceLayout:xj().force("link",cj()).force("charge",yj()).force("center",uw()).force("dagRadial",null).stop(),engineRunning:!1}},init:function(r,s){s.ctx=r},update:function(r,s){r.engineRunning=!1,r.onUpdate(),r.nodeAutoColorBy!==null&&kl(r.graphData.nodes,je(r.nodeAutoColorBy),r.nodeColor),r.linkAutoColorBy!==null&&kl(r.graphData.links,je(r.linkAutoColorBy),r.linkColor),r.graphData.links.forEach(function(g){g.source=g[r.linkSource],g.target=g[r.linkTarget]}),r.forceLayout.stop().alpha(1).nodes(r.graphData.nodes);var a=r.forceLayout.force("link");a&&a.id(function(g){return g[r.nodeId]}).links(r.graphData.links);var i=r.dagMode&&Zj(r.graphData,function(g){return g[r.nodeId]},{nodeFilter:r.dagNodeFilter,onLoopError:r.onDagError||void 0}),o=Math.max.apply(Math,dt(Object.values(i||[]))),l=r.dagLevelDistance||r.graphData.nodes.length/(o||1)*e_*(["radialin","radialout"].indexOf(r.dagMode)!==-1?.7:1);if(["lr","rl","td","bu"].includes(s.dagMode)){var c=["lr","rl"].includes(s.dagMode)?"fx":"fy";r.graphData.nodes.filter(r.dagNodeFilter).forEach(function(g){return delete g[c]})}if(["lr","rl","td","bu"].includes(r.dagMode)){var d=["rl","bu"].includes(r.dagMode),u=function(v){return(i[v[r.nodeId]]-o/2)*l*(d?-1:1)},f=["lr","rl"].includes(r.dagMode)?"fx":"fy";r.graphData.nodes.filter(r.dagNodeFilter).forEach(function(g){return g[f]=u(g)})}r.forceLayout.force("dagRadial",["radialin","radialout"].indexOf(r.dagMode)!==-1?bj(function(g){var v=i[g[r.nodeId]]||-1;return(r.dagMode==="radialin"?o-v:v)*l}).strength(function(g){return r.dagNodeFilter(g)?1:0}):null);for(var h=0;h<r.warmupTicks&&!(r.d3AlphaMin>0&&r.forceLayout.alpha()<r.d3AlphaMin);h++)r.forceLayout.tick();this.resetCountdown(),r.onFinishUpdate()}});function lu(e,r){var s=e instanceof Array?e:[e],a=new r;return a._destructor&&a._destructor(),{linkProp:function(o){return{default:a[o](),onChange:function(c,d){s.forEach(function(u){return d[u][o](c)})},triggerUpdate:!1}},linkMethod:function(o){return function(l){for(var c=arguments.length,d=new Array(c>1?c-1:0),u=1;u<c;u++)d[u-1]=arguments[u];var f=[];return s.forEach(function(h){var g=l[h],v=g[o].apply(g,d);v!==g&&f.push(v)}),f.length?f[0]:this}}}}var t_=800,r_=4,s_=5,cu=lu("forceGraph",Zn),n_=lu(["forceGraph","shadowGraph"],Zn),a_=Object.assign.apply(Object,dt(["nodeColor","nodeAutoColorBy","nodeCanvasObject","nodeCanvasObjectMode","linkColor","linkAutoColorBy","linkLineDash","linkWidth","linkCanvasObject","linkCanvasObjectMode","linkDirectionalArrowLength","linkDirectionalArrowColor","linkDirectionalArrowRelPos","linkDirectionalParticles","linkDirectionalParticleSpeed","linkDirectionalParticleOffset","linkDirectionalParticleWidth","linkDirectionalParticleColor","linkDirectionalParticleCanvasObject","dagMode","dagLevelDistance","dagNodeFilter","onDagError","d3AlphaMin","d3AlphaDecay","d3VelocityDecay","warmupTicks","cooldownTicks","cooldownTime","onEngineTick","onEngineStop"].map(function(e){return Ws({},e,cu.linkProp(e))})).concat(dt(["nodeRelSize","nodeId","nodeVal","nodeVisibility","linkSource","linkTarget","linkVisibility","linkCurvature"].map(function(e){return Ws({},e,n_.linkProp(e))})))),i_=Object.assign.apply(Object,dt(["d3Force","d3ReheatSimulation","emitParticle"].map(function(e){return Ws({},e,cu.linkMethod(e))})));function Fa(e){if(e.canvas){var r=e.canvas.width,s=e.canvas.height;r===300&&s===150&&(r=s=0);var a=window.devicePixelRatio;r/=a,s/=a,[e.canvas,e.shadowCanvas].forEach(function(o){o.style.width="".concat(e.width,"px"),o.style.height="".concat(e.height,"px"),o.width=e.width*a,o.height=e.height*a,!r&&!s&&o.getContext("2d").scale(a,a)});var i=Ct(e.canvas).k;e.zoom.translateBy(e.zoom.__baseElem,(e.width-r)/2/i,(e.height-s)/2/i),e.needsRedraw=!0}}function du(e){var r=window.devicePixelRatio;e.setTransform(r,0,0,r,0,0)}function Pl(e,r,s){e.save(),du(e),e.clearRect(0,0,r,s),e.restore()}var o_=zi({props:Er({width:{default:window.innerWidth,onChange:function(r,s){return Fa(s)},triggerUpdate:!1},height:{default:window.innerHeight,onChange:function(r,s){return Fa(s)},triggerUpdate:!1},graphData:{default:{nodes:[],links:[]},onChange:function(r,s){[r.nodes,r.links].every(function(i){return(i||[]).every(function(o){return!o.hasOwnProperty("__indexColor")})})&&s.colorTracker.reset(),[{type:"Node",objs:r.nodes},{type:"Link",objs:r.links}].forEach(a),s.forceGraph.graphData(r),s.shadowGraph.graphData(r);function a(i){var o=i.type,l=i.objs;l.filter(function(c){if(!c.hasOwnProperty("__indexColor"))return!0;var d=s.colorTracker.lookup(c.__indexColor);return!d||!d.hasOwnProperty("d")||d.d!==c}).forEach(function(c){c.__indexColor=s.colorTracker.register({type:o,d:c})})}},triggerUpdate:!1},backgroundColor:{onChange:function(r,s){s.canvas&&r&&(s.canvas.style.background=r)},triggerUpdate:!1},nodeLabel:{default:"name",triggerUpdate:!1},nodePointerAreaPaint:{onChange:function(r,s){s.shadowGraph.nodeCanvasObject(r?function(a,i,o){return r(a,a.__indexColor,i,o)}:null),s.flushShadowCanvas&&s.flushShadowCanvas()},triggerUpdate:!1},linkPointerAreaPaint:{onChange:function(r,s){s.shadowGraph.linkCanvasObject(r?function(a,i,o){return r(a,a.__indexColor,i,o)}:null),s.flushShadowCanvas&&s.flushShadowCanvas()},triggerUpdate:!1},linkLabel:{default:"name",triggerUpdate:!1},linkHoverPrecision:{default:4,triggerUpdate:!1},minZoom:{default:.01,onChange:function(r,s){s.zoom.scaleExtent([r,s.zoom.scaleExtent()[1]])},triggerUpdate:!1},maxZoom:{default:1e3,onChange:function(r,s){s.zoom.scaleExtent([s.zoom.scaleExtent()[0],r])},triggerUpdate:!1},enableNodeDrag:{default:!0,triggerUpdate:!1},enableZoomInteraction:{default:!0,triggerUpdate:!1},enablePanInteraction:{default:!0,triggerUpdate:!1},enableZoomPanInteraction:{default:!0,triggerUpdate:!1},enablePointerInteraction:{default:!0,onChange:function(r,s){s.hoverObj=null},triggerUpdate:!1},autoPauseRedraw:{default:!0,triggerUpdate:!1},onNodeDrag:{default:function(){},triggerUpdate:!1},onNodeDragEnd:{default:function(){},triggerUpdate:!1},onNodeClick:{triggerUpdate:!1},onNodeRightClick:{triggerUpdate:!1},onNodeHover:{triggerUpdate:!1},onLinkClick:{triggerUpdate:!1},onLinkRightClick:{triggerUpdate:!1},onLinkHover:{triggerUpdate:!1},onBackgroundClick:{triggerUpdate:!1},onBackgroundRightClick:{triggerUpdate:!1},showPointerCursor:{default:!0,triggerUpdate:!1},onZoom:{triggerUpdate:!1},onZoomEnd:{triggerUpdate:!1},onRenderFramePre:{triggerUpdate:!1},onRenderFramePost:{triggerUpdate:!1}},a_),aliases:{stopAnimation:"pauseAnimation"},methods:Er({graph2ScreenCoords:function(r,s,a){var i=Ct(r.canvas);return{x:s*i.k+i.x,y:a*i.k+i.y}},screen2GraphCoords:function(r,s,a){var i=Ct(r.canvas);return{x:(s-i.x)/i.k,y:(a-i.y)/i.k}},centerAt:function(r,s,a,i){if(!r.canvas)return null;if(s!==void 0||a!==void 0){var o=Object.assign({},s!==void 0?{x:s}:{},a!==void 0?{y:a}:{});return i?r.tweenGroup.add(new Qo(l()).to(o,i).easing(wr.Quadratic.Out).onUpdate(c).start()):c(o),this}return l();function l(){var d=Ct(r.canvas);return{x:(r.width/2-d.x)/d.k,y:(r.height/2-d.y)/d.k}}function c(d){var u=d.x,f=d.y;r.zoom.translateTo(r.zoom.__baseElem,u===void 0?l().x:u,f===void 0?l().y:f),r.needsRedraw=!0}},zoom:function(r,s,a){if(!r.canvas)return null;if(s!==void 0)return a?r.tweenGroup.add(new Qo({k:i()}).to({k:s},a).easing(wr.Quadratic.Out).onUpdate(function(l){var c=l.k;return o(c)}).start()):o(s),this;return i();function i(){return Ct(r.canvas).k}function o(l){r.zoom.scaleTo(r.zoom.__baseElem,l),r.needsRedraw=!0}},zoomToFit:function(r){for(var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:10,i=arguments.length,o=new Array(i>3?i-3:0),l=3;l<i;l++)o[l-3]=arguments[l];var c=this.getGraphBbox.apply(this,o);if(c){var d={x:(c.x[0]+c.x[1])/2,y:(c.y[0]+c.y[1])/2},u=Math.max(1e-12,Math.min(1e12,(r.width-a*2)/(c.x[1]-c.x[0]),(r.height-a*2)/(c.y[1]-c.y[0])));this.centerAt(d.x,d.y,s),this.zoom(u,s)}return this},getGraphBbox:function(r){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:function(){return!0},a=je(r.nodeVal),i=function(c){return Math.sqrt(Math.max(0,a(c)||1))*r.nodeRelSize},o=r.graphData.nodes.filter(s).map(function(l){return{x:l.x,y:l.y,r:i(l)}});return o.length?{x:[oo(o,function(l){return l.x-l.r}),lo(o,function(l){return l.x+l.r})],y:[oo(o,function(l){return l.y-l.r}),lo(o,function(l){return l.y+l.r})]}:null},pauseAnimation:function(r){return r.animationFrameRequestId&&(cancelAnimationFrame(r.animationFrameRequestId),r.animationFrameRequestId=null),this},resumeAnimation:function(r){return r.animationFrameRequestId||this._animationCycle(),this},_destructor:function(){this.pauseAnimation(),this.graphData({nodes:[],links:[]})}},i_),stateInit:function(){return{lastSetZoom:1,zoom:_b(),forceGraph:new Zn,shadowGraph:new Zn().cooldownTicks(0).nodeColor("__indexColor").linkColor("__indexColor").isShadow(!0),colorTracker:new qv,tweenGroup:new Td}},init:function(r,s){var a=this;r.innerHTML="";var i=document.createElement("div");i.classList.add("force-graph-container"),i.style.position="relative",r.appendChild(i),s.canvas=document.createElement("canvas"),s.backgroundColor&&(s.canvas.style.background=s.backgroundColor),i.appendChild(s.canvas),s.shadowCanvas=document.createElement("canvas");var o=s.canvas.getContext("2d"),l=s.shadowCanvas.getContext("2d",{willReadFrequently:!0}),c={x:-1e12,y:-1e12},d=function(){var h=null,g=window.devicePixelRatio,v=c.x>0&&c.y>0?l.getImageData(c.x*g,c.y*g,1,1):null;return v&&(h=s.colorTracker.lookup(v.data)),h};ct(s.canvas).call(ay().subject(function(){if(!s.enableNodeDrag)return null;var f=d();return f&&f.type==="Node"?f.d:null}).on("start",function(f){var h=f.subject;h.__initialDragPos={x:h.x,y:h.y,fx:h.fx,fy:h.fy},f.active||(h.fx=h.x,h.fy=h.y),s.canvas.classList.add("grabbable")}).on("drag",function(f){var h=f.subject,g=h.__initialDragPos,v=f,j=Ct(s.canvas).k,_={x:g.x+(v.x-g.x)/j-h.x,y:g.y+(v.y-g.y)/j-h.y};["x","y"].forEach(function(b){return h["f".concat(b)]=h[b]=g[b]+(v[b]-g[b])/j}),!(!h.__dragged&&s_>=Math.sqrt(Hh(["x","y"].map(function(b){return Math.pow(f[b]-g[b],2)}))))&&(s.forceGraph.d3AlphaTarget(.3).resetCountdown(),s.isPointerDragging=!0,h.__dragged=!0,s.onNodeDrag(h,_))}).on("end",function(f){var h=f.subject,g=h.__initialDragPos,v={x:h.x-g.x,y:h.y-g.y};g.fx===void 0&&(h.fx=void 0),g.fy===void 0&&(h.fy=void 0),delete h.__initialDragPos,s.forceGraph.d3AlphaTarget()&&s.forceGraph.d3AlphaTarget(0).resetCountdown(),s.canvas.classList.remove("grabbable"),s.isPointerDragging=!1,h.__dragged&&(delete h.__dragged,s.onNodeDragEnd(h,v))})),s.zoom(s.zoom.__baseElem=ct(s.canvas)),s.zoom.__baseElem.on("dblclick.zoom",null),s.zoom.filter(function(f){return!f.button&&s.enableZoomPanInteraction&&(f.type!=="wheel"||je(s.enableZoomInteraction)(f))&&(f.type==="wheel"||je(s.enablePanInteraction)(f))}).on("zoom",function(f){var h=f.transform;[o,l].forEach(function(g){du(g),g.translate(h.x,h.y),g.scale(h.k,h.k)}),s.isPointerDragging=!0,s.onZoom&&s.onZoom(Er(Er({},h),a.centerAt())),s.needsRedraw=!0}).on("end",function(f){s.isPointerDragging=!1,s.onZoomEnd&&s.onZoomEnd(Er(Er({},f.transform),a.centerAt()))}),Fa(s),s.forceGraph.onNeedsRedraw(function(){return s.needsRedraw=!0}).onFinishUpdate(function(){Ct(s.canvas).k===s.lastSetZoom&&s.graphData.nodes.length&&(s.zoom.scaleTo(s.zoom.__baseElem,s.lastSetZoom=r_/Math.cbrt(s.graphData.nodes.length)),s.needsRedraw=!0)}),s.tooltip=new dw(i),["pointermove","pointerdown"].forEach(function(f){return i.addEventListener(f,function(h){f==="pointerdown"&&(s.isPointerPressed=!0,s.pointerDownEvent=h),!s.isPointerDragging&&h.type==="pointermove"&&s.onBackgroundClick&&(h.pressure>0||s.isPointerPressed)&&(h.pointerType==="mouse"||h.movementX===void 0||[h.movementX,h.movementY].some(function(j){return Math.abs(j)>1}))&&(s.isPointerDragging=!0);var g=v(i);c.x=h.pageX-g.left,c.y=h.pageY-g.top;function v(j){var _=j.getBoundingClientRect(),b=window.pageXOffset||document.documentElement.scrollLeft,p=window.pageYOffset||document.documentElement.scrollTop;return{top:_.top+p,left:_.left+b}}},{passive:!0})}),i.addEventListener("pointerup",function(f){if(s.isPointerPressed){if(s.isPointerPressed=!1,s.isPointerDragging){s.isPointerDragging=!1;return}var h=[f,s.pointerDownEvent];requestAnimationFrame(function(){if(f.button===0)if(s.hoverObj){var g=s["on".concat(s.hoverObj.type,"Click")];g&&g.apply(void 0,[s.hoverObj.d].concat(h))}else s.onBackgroundClick&&s.onBackgroundClick.apply(s,h);if(f.button===2)if(s.hoverObj){var v=s["on".concat(s.hoverObj.type,"RightClick")];v&&v.apply(void 0,[s.hoverObj.d].concat(h))}else s.onBackgroundRightClick&&s.onBackgroundRightClick.apply(s,h)})}},{passive:!0}),i.addEventListener("contextmenu",function(f){return!s.onBackgroundRightClick&&!s.onNodeRightClick&&!s.onLinkRightClick?!0:(f.preventDefault(),!1)}),s.forceGraph(o),s.shadowGraph(l);var u=Kb(function(){Pl(l,s.width,s.height),s.shadowGraph.linkWidth(function(h){return je(s.linkWidth)(h)+s.linkHoverPrecision});var f=Ct(s.canvas);s.shadowGraph.globalScale(f.k).tickFrame()},t_);s.flushShadowCanvas=u.flush,(this._animationCycle=function f(){var h=!s.autoPauseRedraw||!!s.needsRedraw||s.forceGraph.isEngineRunning()||s.graphData.links.some(function(y){return y.__photons&&y.__photons.length});if(s.needsRedraw=!1,s.enablePointerInteraction){var g=s.isPointerDragging?null:d();if(g!==s.hoverObj){var v=s.hoverObj,j=v?v.type:null,_=g?g.type:null;if(j&&j!==_){var b=s["on".concat(j,"Hover")];b&&b(null,v.d)}if(_){var p=s["on".concat(_,"Hover")];p&&p(g.d,j===_?v.d:null)}s.tooltip.content(g&&je(s["".concat(g.type.toLowerCase(),"Label")])(g.d)||null),s.canvas.classList[(g&&s["on".concat(_,"Click")]||!g&&s.onBackgroundClick)&&je(s.showPointerCursor)(g==null?void 0:g.d)?"add":"remove"]("clickable"),s.hoverObj=g}h&&u()}if(h){Pl(o,s.width,s.height);var m=Ct(s.canvas).k;s.onRenderFramePre&&s.onRenderFramePre(o,m),s.forceGraph.globalScale(m).tickFrame(),s.onRenderFramePost&&s.onRenderFramePost(o,m)}s.tweenGroup.update(),s.animationFrameRequestId=requestAnimationFrame(f)})()},update:function(r){}});const va={width:L.number,height:L.number,graphData:L.shape({nodes:L.arrayOf(L.object).isRequired,links:L.arrayOf(L.object).isRequired}),backgroundColor:L.string,nodeRelSize:L.number,nodeId:L.string,nodeLabel:L.oneOfType([L.string,L.func]),nodeVal:L.oneOfType([L.number,L.string,L.func]),nodeVisibility:L.oneOfType([L.bool,L.string,L.func]),nodeColor:L.oneOfType([L.string,L.func]),nodeAutoColorBy:L.oneOfType([L.string,L.func]),onNodeHover:L.func,onNodeClick:L.func,linkSource:L.string,linkTarget:L.string,linkLabel:L.oneOfType([L.string,L.func]),linkVisibility:L.oneOfType([L.bool,L.string,L.func]),linkColor:L.oneOfType([L.string,L.func]),linkAutoColorBy:L.oneOfType([L.string,L.func]),linkWidth:L.oneOfType([L.number,L.string,L.func]),linkCurvature:L.oneOfType([L.number,L.string,L.func]),linkDirectionalArrowLength:L.oneOfType([L.number,L.string,L.func]),linkDirectionalArrowColor:L.oneOfType([L.string,L.func]),linkDirectionalArrowRelPos:L.oneOfType([L.number,L.string,L.func]),linkDirectionalParticles:L.oneOfType([L.number,L.string,L.func]),linkDirectionalParticleSpeed:L.oneOfType([L.number,L.string,L.func]),linkDirectionalParticleOffset:L.oneOfType([L.number,L.string,L.func]),linkDirectionalParticleWidth:L.oneOfType([L.number,L.string,L.func]),linkDirectionalParticleColor:L.oneOfType([L.string,L.func]),onLinkHover:L.func,onLinkClick:L.func,dagMode:L.oneOf(["td","bu","lr","rl","zin","zout","radialin","radialout"]),dagLevelDistance:L.number,dagNodeFilter:L.func,onDagError:L.func,d3AlphaMin:L.number,d3AlphaDecay:L.number,d3VelocityDecay:L.number,warmupTicks:L.number,cooldownTicks:L.number,cooldownTime:L.number,onEngineTick:L.func,onEngineStop:L.func,getGraphBbox:L.func},uu={zoomToFit:L.func,onNodeRightClick:L.func,onNodeDrag:L.func,onNodeDragEnd:L.func,onLinkRightClick:L.func,linkHoverPrecision:L.number,onBackgroundClick:L.func,onBackgroundRightClick:L.func,showPointerCursor:L.oneOfType([L.bool,L.func]),enablePointerInteraction:L.bool,enableNodeDrag:L.bool},Bi={showNavInfo:L.bool,nodeOpacity:L.number,nodeResolution:L.number,nodeThreeObject:L.oneOfType([L.object,L.string,L.func]),nodeThreeObjectExtend:L.oneOfType([L.bool,L.string,L.func]),nodePositionUpdate:L.func,linkOpacity:L.number,linkResolution:L.number,linkCurveRotation:L.oneOfType([L.number,L.string,L.func]),linkMaterial:L.oneOfType([L.object,L.string,L.func]),linkThreeObject:L.oneOfType([L.object,L.string,L.func]),linkThreeObjectExtend:L.oneOfType([L.bool,L.string,L.func]),linkPositionUpdate:L.func,linkDirectionalArrowResolution:L.number,linkDirectionalParticleResolution:L.number,linkDirectionalParticleThreeObject:L.oneOfType([L.object,L.string,L.func]),forceEngine:L.oneOf(["d3","ngraph"]),ngraphPhysics:L.object,numDimensions:L.oneOf([1,2,3])},l_=Object.assign({},va,uu,{linkLineDash:L.oneOfType([L.arrayOf(L.number),L.string,L.func]),nodeCanvasObjectMode:L.oneOfType([L.string,L.func]),nodeCanvasObject:L.func,nodePointerAreaPaint:L.func,linkCanvasObjectMode:L.oneOfType([L.string,L.func]),linkCanvasObject:L.func,linkPointerAreaPaint:L.func,linkDirectionalParticleCanvasObject:L.func,autoPauseRedraw:L.bool,minZoom:L.number,maxZoom:L.number,enableZoomInteraction:L.oneOfType([L.bool,L.func]),enablePanInteraction:L.oneOfType([L.bool,L.func]),onZoom:L.func,onZoomEnd:L.func,onRenderFramePre:L.func,onRenderFramePost:L.func});Object.assign({},va,uu,Bi,{enableNavigationControls:L.bool,controlType:L.oneOf(["trackball","orbit","fly"]),rendererConfig:L.object,extraRenderers:L.arrayOf(L.shape({render:L.func.isRequired}))});Object.assign({},va,Bi,{nodeDesc:L.oneOfType([L.string,L.func]),linkDesc:L.oneOfType([L.string,L.func])});Object.assign({},va,Bi,{markerAttrs:L.object,yOffset:L.number,glScale:L.number});const Vi=xx(o_,{methodNames:["emitParticle","d3Force","d3ReheatSimulation","stopAnimation","pauseAnimation","resumeAnimation","centerAt","zoom","zoomToFit","getGraphBbox","screen2GraphCoords","graph2ScreenCoords"]});Vi.displayName="ForceGraph2D";Vi.propTypes=l_;const c_=({scanId:e})=>{const[r,s]=E.useState(null),[a,i]=E.useState(!0),[o,l]=E.useState(null),[c,d]=E.useState(null),[u,f]=E.useState(""),[h,g]=E.useState(!1),v=E.useRef(),j=E.useRef(null);E.useEffect(()=>{(async()=>{try{i(!0);const P=localStorage.getItem("token"),T=await fetch(`/api/scans/${e}/topology`,{headers:{Authorization:`Bearer ${P}`}});if(!T.ok)throw new Error("Failed to fetch topology data");const M=await T.json();s(M)}catch(P){l(P instanceof Error?P.message:"Unknown error")}finally{i(!1)}})()},[e]);const _=O=>O.critical_vulns>0||O.risk_score>=75?"#ef4444":O.high_vulns>0||O.risk_score>=50?"#f97316":O.risk_score>=25?"#eab308":"#22c55e",b=O=>{const T=Math.min(O.open_ports_count/10,3),M=Math.min(O.vuln_count/5,3),A=O.is_gateway?3:0;return 5+T+M+A},p=O=>{switch(O){case"server":return n.jsx(jt,{className:"w-4 h-4"});case"workstation":return n.jsx(gc,{className:"w-4 h-4"});case"network":return n.jsx(Tr,{className:"w-4 h-4"});case"gateway":return n.jsx(eo,{className:"w-4 h-4"});default:return n.jsx(hc,{className:"w-4 h-4"})}},m=O=>{switch(O.relationship_type){case"gateway":return"#3b82f6";case"shared_service":return"#8b5cf6";case"same_subnet":return"#6b7280";default:return"#6b7280"}},y=E.useCallback(O=>{d(O)},[]),x=()=>{if(v.current){const O=v.current.zoom();v.current.zoom(O*1.3,400)}},w=()=>{if(v.current){const O=v.current.zoom();v.current.zoom(O/1.3,400)}},S=()=>{if(!r||!u)return;const O=r.nodes.find(P=>{var T;return P.ip.includes(u)||((T=P.hostname)==null?void 0:T.toLowerCase().includes(u.toLowerCase()))});if(O&&v.current){const P=O;v.current.centerAt(P.x,P.y,1e3),v.current.zoom(3,1e3),d(O)}},k=()=>{g(!h)};if(a)return n.jsx(le,{className:"p-8",children:n.jsxs("div",{className:"flex items-center justify-center",children:[n.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600"}),n.jsx("span",{className:"ml-4 text-gray-600 dark:text-gray-400",children:"Loading network topology..."})]})});if(o)return n.jsx(le,{className:"p-8",children:n.jsx("div",{className:"text-center text-red-600 dark:text-red-400",children:n.jsxs("p",{children:["Failed to load topology: ",o]})})});if(!r||r.nodes.length===0)return n.jsx(le,{className:"p-8",children:n.jsxs("div",{className:"text-center text-gray-600 dark:text-gray-400",children:[n.jsx(Tr,{className:"w-16 h-16 mx-auto mb-4 opacity-50"}),n.jsx("p",{children:"No topology data available for this scan."})]})});const C={nodes:r.nodes.map(O=>({...O,color:_(O),size:b(O)})),links:r.edges.map(O=>({...O,color:m(O)}))},R=h?"fixed inset-0 z-50 bg-gray-900":"relative";return n.jsx("div",{ref:j,className:R,children:n.jsxs(le,{className:h?"h-full rounded-none":"h-[600px]",children:[n.jsxs("div",{className:"absolute top-4 left-4 z-10 flex flex-col gap-2",children:[n.jsxs("div",{className:"flex gap-2 bg-white dark:bg-gray-800 rounded-lg shadow-lg p-2",children:[n.jsx("input",{type:"text",placeholder:"Search IP or hostname...",value:u,onChange:O=>f(O.target.value),onKeyPress:O=>O.key==="Enter"&&S(),className:"px-3 py-2 bg-gray-50 dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 dark:text-white"}),n.jsx("button",{onClick:S,className:"px-3 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700 transition-colors",children:n.jsx(zr,{className:"w-4 h-4"})})]}),n.jsxs("div",{className:"flex gap-2 bg-white dark:bg-gray-800 rounded-lg shadow-lg p-2",children:[n.jsx("button",{onClick:x,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded transition-colors",title:"Zoom In",children:n.jsx(wh,{className:"w-5 h-5 text-gray-700 dark:text-gray-300"})}),n.jsx("button",{onClick:w,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded transition-colors",title:"Zoom Out",children:n.jsx(jh,{className:"w-5 h-5 text-gray-700 dark:text-gray-300"})}),n.jsx("button",{onClick:k,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded transition-colors",title:h?"Exit Fullscreen":"Fullscreen",children:h?n.jsx(bt,{className:"w-5 h-5 text-gray-700 dark:text-gray-300"}):n.jsx(kc,{className:"w-5 h-5 text-gray-700 dark:text-gray-300"})})]})]}),n.jsxs("div",{className:"absolute top-4 right-4 z-10 bg-white dark:bg-gray-800 rounded-lg shadow-lg p-4 max-w-xs",children:[n.jsx("h3",{className:"text-sm font-semibold mb-2 text-gray-900 dark:text-white",children:"Legend"}),n.jsxs("div",{className:"space-y-2 text-xs",children:[n.jsx("div",{className:"font-medium text-gray-700 dark:text-gray-300",children:"Risk Level"}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("div",{className:"w-4 h-4 rounded-full bg-green-500"}),n.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Low (0-25)"})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("div",{className:"w-4 h-4 rounded-full bg-yellow-500"}),n.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Medium (25-50)"})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("div",{className:"w-4 h-4 rounded-full bg-orange-500"}),n.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"High (50-75)"})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("div",{className:"w-4 h-4 rounded-full bg-red-500"}),n.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Critical (75+)"})]}),n.jsxs("div",{className:"mt-3 pt-2 border-t border-gray-200 dark:border-gray-700",children:[n.jsx("div",{className:"font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Connections"}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("div",{className:"w-8 h-0.5 bg-blue-500"}),n.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Gateway"})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("div",{className:"w-8 h-0.5 bg-purple-500"}),n.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Shared Service"})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("div",{className:"w-8 h-0.5 bg-gray-500"}),n.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Same Subnet"})]})]})]})]}),c&&n.jsxs("div",{className:"absolute bottom-4 left-4 z-10 bg-white dark:bg-gray-800 rounded-lg shadow-lg p-4 max-w-sm",children:[n.jsxs("div",{className:"flex items-start justify-between mb-2",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[p(c.node_type),n.jsx("h3",{className:"text-sm font-semibold text-gray-900 dark:text-white",children:c.hostname||c.ip})]}),n.jsx("button",{onClick:()=>d(null),className:"text-gray-500 hover:text-gray-700 dark:hover:text-gray-300",children:n.jsx(bt,{className:"w-4 h-4"})})]}),n.jsxs("div",{className:"space-y-1 text-xs text-gray-600 dark:text-gray-400",children:[n.jsxs("div",{children:[n.jsx("strong",{children:"IP:"})," ",c.ip]}),c.os&&n.jsxs("div",{children:[n.jsx("strong",{children:"OS:"})," ",c.os]}),n.jsxs("div",{children:[n.jsx("strong",{children:"Subnet:"})," ",c.subnet]}),n.jsxs("div",{children:[n.jsx("strong",{children:"Open Ports:"})," ",c.open_ports_count]}),c.vuln_count>0&&n.jsxs("div",{className:"mt-2 pt-2 border-t border-gray-200 dark:border-gray-700",children:[n.jsxs("div",{children:[n.jsx("strong",{children:"Vulnerabilities:"})," ",c.vuln_count]}),c.critical_vulns>0&&n.jsxs("div",{className:"text-red-600 dark:text-red-400",children:["Critical: ",c.critical_vulns]}),c.high_vulns>0&&n.jsxs("div",{className:"text-orange-600 dark:text-orange-400",children:["High: ",c.high_vulns]}),n.jsxs("div",{children:[n.jsx("strong",{children:"Risk Score:"})," ",c.risk_score.toFixed(1)]})]}),c.is_gateway&&n.jsx("div",{className:"mt-2 pt-2 border-t border-gray-200 dark:border-gray-700",children:n.jsxs("span",{className:"inline-flex items-center px-2 py-1 bg-blue-100 dark:bg-blue-900 text-blue-800 dark:text-blue-200 rounded text-xs font-medium",children:[n.jsx(eo,{className:"w-3 h-3 mr-1"}),"Gateway"]})})]})]}),n.jsxs("div",{className:"absolute bottom-4 right-4 z-10 bg-white dark:bg-gray-800 rounded-lg shadow-lg p-4 max-w-xs",children:[n.jsxs("h3",{className:"text-sm font-semibold mb-2 text-gray-900 dark:text-white",children:["Subnets (",r.subnets.length,")"]}),n.jsx("div",{className:"space-y-1 text-xs max-h-32 overflow-y-auto",children:r.subnets.map(O=>n.jsxs("div",{className:"flex justify-between text-gray-600 dark:text-gray-400",children:[n.jsx("span",{className:"font-mono",children:O.subnet}),n.jsxs("span",{className:"text-gray-500 dark:text-gray-500",children:[O.host_count," ",O.host_count===1?"host":"hosts"]})]},O.subnet))})]}),n.jsx(Vi,{ref:v,graphData:C,nodeLabel:O=>{const P=O;return`${P.hostname||P.ip}
${P.os||""}
Risk: ${P.risk_score.toFixed(1)}`},nodeColor:O=>O.color||"#22c55e",nodeVal:O=>O.size||5,linkColor:O=>O.color||"#64748b",linkWidth:O=>(O.strength||1)*2,linkDirectionalParticles:O=>O.relationship_type==="gateway"?2:0,linkDirectionalParticleSpeed:.005,onNodeClick:y,nodeCanvasObject:(O,P,T)=>{const M=O,A=M.hostname||M.ip,$=12/T;P.font=`${$}px Sans-Serif`,P.beginPath(),P.arc(M.x||0,M.y||0,M.size||5,0,2*Math.PI,!1),P.fillStyle=M.color||"#22c55e",P.fill(),M.is_gateway&&(P.strokeStyle="#3b82f6",P.lineWidth=2/T,P.stroke()),T>1.5&&(P.textAlign="center",P.textBaseline="middle",P.fillStyle="rgba(255, 255, 255, 0.9)",P.fillText(A,M.x||0,(M.y||0)+(M.size||5)+$+2))},enableNodeDrag:!0,enableZoomInteraction:!0,enablePanInteraction:!0,cooldownTicks:100,onEngineStop:()=>{var O;return(O=v.current)==null?void 0:O.zoomToFit(400)}})]})})},d_=({scanId:e})=>{const[r,s]=E.useState([]),[a,i]=E.useState(null),[o,l]=E.useState(!0),[c,d]=E.useState(""),[u,f]=E.useState(""),[h,g]=E.useState(""),[v,j]=E.useState(new Set),[_,b]=E.useState(null),[p,m]=E.useState(!1),y=E.useCallback(async()=>{try{l(!0);let D=(await Zr.getByScan(e)).data;c&&(D=D.filter(U=>U.status===c)),u&&(D=D.filter(U=>U.severity===u)),h&&(D=D.filter(U=>U.secret_type===h)),s(D)}catch($){console.error("Failed to load secret findings:",$),X.error("Failed to load secret findings")}finally{l(!1)}},[e,c,u,h]),x=E.useCallback(async()=>{try{const $=await Zr.getStats(e);i($.data)}catch($){console.error("Failed to load secret finding stats:",$)}},[e]);E.useEffect(()=>{y(),x()},[y,x]);const w=($,D)=>{const U=new Set(v);D?U.add($):U.delete($),j(U)},S=async($,D)=>{try{m(!0),await Zr.update($,{status:D}),X.success(`Status updated to ${D}`),y(),x()}catch(U){console.error("Failed to update status:",U),X.error("Failed to update status")}finally{m(!1)}},k=async $=>{if(v.size!==0)try{m(!0);const D=await Zr.bulkUpdateStatus(Array.from(v),$);X.success(D.data.message),j(new Set),y(),x()}catch(D){console.error("Failed to bulk update status:",D),X.error("Failed to update findings")}finally{m(!1)}},C=async($,D)=>{try{m(!0),await Zr.update($,{false_positive:D,status:D?"false_positive":"open"}),X.success(D?"Marked as false positive":"Unmarked false positive"),y(),x()}catch(U){console.error("Failed to update false positive status:",U),X.error("Failed to update")}finally{m(!1)}},R=$=>{const D="px-2 py-1 text-xs font-semibold rounded-full";switch($.toLowerCase()){case"critical":return`${D} bg-red-500/20 text-red-400`;case"high":return`${D} bg-orange-500/20 text-orange-400`;case"medium":return`${D} bg-yellow-500/20 text-yellow-400`;case"low":return`${D} bg-blue-500/20 text-blue-400`;default:return`${D} bg-gray-500/20 text-gray-400`}},O=$=>{const D="px-2 py-1 text-xs font-semibold rounded-full";switch($){case"open":return`${D} bg-red-500/20 text-red-400`;case"investigating":return`${D} bg-yellow-500/20 text-yellow-400`;case"resolved":return`${D} bg-green-500/20 text-green-400`;case"false_positive":return`${D} bg-gray-500/20 text-gray-400`;default:return`${D} bg-gray-500/20 text-gray-400`}},P=$=>{const D=$.toLowerCase();return D.includes("key")||D.includes("api")?n.jsx(lr,{className:"h-4 w-4"}):D.includes("password")||D.includes("secret")?n.jsx(Xt,{className:"h-4 w-4"}):D.includes("token")?n.jsx(we,{className:"h-4 w-4"}):n.jsx(Je,{className:"h-4 w-4"})},T=$=>$.replace(/_/g," ").replace(/\b\w/g,D=>D.toUpperCase()),M=$=>{const D=Math.round($*100);return D>=90?n.jsxs("span",{className:"text-xs text-green-400 bg-green-500/10 px-2 py-0.5 rounded",children:[D,"% confident"]}):D>=70?n.jsxs("span",{className:"text-xs text-yellow-400 bg-yellow-500/10 px-2 py-0.5 rounded",children:[D,"% confident"]}):n.jsxs("span",{className:"text-xs text-gray-400 bg-gray-500/10 px-2 py-0.5 rounded",children:[D,"% confident"]})},A=[...new Set(r.map($=>$.secret_type))];return o?n.jsx("div",{className:"flex justify-center items-center py-12",children:n.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-cyan-500"})}):r.length===0&&!(a!=null&&a.total_findings)?n.jsxs("div",{className:"text-center py-12 text-gray-400",children:[n.jsx(we,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),n.jsx("p",{children:"No exposed secrets detected in this scan."})]}):n.jsxs("div",{className:"space-y-4",children:[a&&a.total_findings>0&&n.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4",children:[n.jsxs("div",{className:"bg-gray-800 p-4 rounded-lg border border-gray-700",children:[n.jsx("div",{className:"text-sm text-gray-400",children:"Total Secrets"}),n.jsx("div",{className:"text-2xl font-bold text-white",children:a.total_findings})]}),n.jsxs("div",{className:"bg-gray-800 p-4 rounded-lg border border-gray-700",children:[n.jsx("div",{className:"text-sm text-gray-400",children:"Critical"}),n.jsx("div",{className:"text-2xl font-bold text-red-500",children:a.critical_count})]}),n.jsxs("div",{className:"bg-gray-800 p-4 rounded-lg border border-gray-700",children:[n.jsx("div",{className:"text-sm text-gray-400",children:"High"}),n.jsx("div",{className:"text-2xl font-bold text-orange-400",children:a.high_count})]}),n.jsxs("div",{className:"bg-gray-800 p-4 rounded-lg border border-gray-700",children:[n.jsx("div",{className:"text-sm text-gray-400",children:"Open"}),n.jsx("div",{className:"text-2xl font-bold text-red-400",children:a.open_count})]}),n.jsxs("div",{className:"bg-gray-800 p-4 rounded-lg border border-gray-700",children:[n.jsx("div",{className:"text-sm text-gray-400",children:"Resolved"}),n.jsx("div",{className:"text-2xl font-bold text-green-400",children:a.resolved_count})]})]}),a&&a.by_type.length>0&&n.jsxs("div",{className:"bg-gray-800 p-4 rounded-lg border border-gray-700",children:[n.jsx("h4",{className:"text-sm font-medium text-gray-300 mb-3",children:"Secrets by Type"}),n.jsx("div",{className:"flex flex-wrap gap-2",children:a.by_type.map($=>n.jsxs("div",{className:"flex items-center gap-2 bg-gray-700/50 px-3 py-1.5 rounded-full text-sm",children:[P($.secret_type),n.jsx("span",{className:"text-gray-300",children:T($.secret_type)}),n.jsx("span",{className:"bg-gray-600 px-2 py-0.5 rounded-full text-xs text-white",children:$.count})]},$.secret_type))})]}),n.jsx("div",{className:"bg-gray-800 p-4 rounded-lg border border-gray-700",children:n.jsxs("div",{className:"flex flex-wrap gap-4 items-center",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Status"}),n.jsxs("select",{value:c,onChange:$=>d($.target.value),className:"block w-full rounded-md border-gray-600 bg-gray-700 text-white shadow-sm focus:border-cyan-500 focus:ring-cyan-500",children:[n.jsx("option",{value:"",children:"All"}),n.jsx("option",{value:"open",children:"Open"}),n.jsx("option",{value:"investigating",children:"Investigating"}),n.jsx("option",{value:"resolved",children:"Resolved"}),n.jsx("option",{value:"false_positive",children:"False Positive"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Severity"}),n.jsxs("select",{value:u,onChange:$=>f($.target.value),className:"block w-full rounded-md border-gray-600 bg-gray-700 text-white shadow-sm focus:border-cyan-500 focus:ring-cyan-500",children:[n.jsx("option",{value:"",children:"All"}),n.jsx("option",{value:"critical",children:"Critical"}),n.jsx("option",{value:"high",children:"High"}),n.jsx("option",{value:"medium",children:"Medium"}),n.jsx("option",{value:"low",children:"Low"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Type"}),n.jsxs("select",{value:h,onChange:$=>g($.target.value),className:"block w-full rounded-md border-gray-600 bg-gray-700 text-white shadow-sm focus:border-cyan-500 focus:ring-cyan-500",children:[n.jsx("option",{value:"",children:"All Types"}),A.map($=>n.jsx("option",{value:$,children:T($)},$))]})]}),v.size>0&&n.jsxs("div",{className:"ml-auto flex items-center gap-2",children:[n.jsxs("span",{className:"text-sm text-gray-400",children:[v.size," selected"]}),n.jsx("button",{onClick:()=>k("resolved"),disabled:p,className:"px-3 py-1.5 text-sm bg-green-600 hover:bg-green-500 text-white rounded-md disabled:opacity-50",children:"Mark Resolved"}),n.jsx("button",{onClick:()=>k("false_positive"),disabled:p,className:"px-3 py-1.5 text-sm bg-gray-600 hover:bg-gray-500 text-white rounded-md disabled:opacity-50",children:"False Positive"})]})]})}),n.jsx("div",{className:"space-y-2",children:r.map($=>n.jsxs("div",{className:`bg-gray-800 border rounded-lg overflow-hidden transition-all ${$.false_positive?"border-gray-600 opacity-60":$.status==="resolved"?"border-green-700":"border-gray-700"}`,children:[n.jsxs("div",{className:"p-4 flex items-center gap-4",children:[n.jsx("input",{type:"checkbox",checked:v.has($.id),onChange:D=>w($.id,D.target.checked),className:"rounded border-gray-600 bg-gray-700 text-cyan-500 focus:ring-cyan-500"}),n.jsx("div",{className:"flex items-center gap-2 text-gray-400",children:P($.secret_type)}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[n.jsx("span",{className:"font-medium text-white",children:T($.secret_type)}),n.jsx("span",{className:R($.severity),children:$.severity.toUpperCase()}),n.jsx("span",{className:O($.status),children:$.status.replace("_"," ").toUpperCase()}),M($.confidence)]}),n.jsxs("div",{className:"text-sm text-gray-400",children:[n.jsx("span",{className:"font-mono",children:$.host_ip}),$.port&&n.jsxs("span",{children:[":",$.port]}),n.jsx("span",{className:"mx-2",children:"|"}),n.jsxs("span",{children:[$.source_type,": ",$.source_location]}),$.line_number&&n.jsxs("span",{className:"text-gray-500",children:[" (line ",$.line_number,")"]})]})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[!$.false_positive&&$.status!=="resolved"&&n.jsxs(n.Fragment,{children:[n.jsx("button",{onClick:()=>S($.id,"resolved"),disabled:p,className:"p-1.5 text-green-400 hover:bg-green-500/20 rounded transition-colors",title:"Mark Resolved",children:n.jsx(Ms,{className:"h-4 w-4"})}),n.jsx("button",{onClick:()=>C($.id,!0),disabled:p,className:"p-1.5 text-gray-400 hover:bg-gray-500/20 rounded transition-colors",title:"Mark False Positive",children:n.jsx(bt,{className:"h-4 w-4"})})]}),$.false_positive&&n.jsx("button",{onClick:()=>C($.id,!1),disabled:p,className:"p-1.5 text-yellow-400 hover:bg-yellow-500/20 rounded transition-colors",title:"Unmark False Positive",children:n.jsx(bc,{className:"h-4 w-4"})}),n.jsx("button",{onClick:()=>b(_===$.id?null:$.id),className:"p-1.5 text-gray-400 hover:bg-gray-500/20 rounded transition-colors",children:_===$.id?n.jsx(cr,{className:"h-4 w-4"}):n.jsx(ut,{className:"h-4 w-4"})})]})]}),_===$.id&&n.jsxs("div",{className:"border-t border-gray-700 p-4 bg-gray-850",children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("h4",{className:"text-sm font-medium text-gray-400 mb-2",children:"Redacted Value"}),n.jsx("div",{className:"bg-gray-900 p-3 rounded font-mono text-sm text-cyan-400 break-all",children:$.redacted_value})]}),$.context&&n.jsxs("div",{children:[n.jsx("h4",{className:"text-sm font-medium text-gray-400 mb-2",children:"Context"}),n.jsx("div",{className:"bg-gray-900 p-3 rounded font-mono text-sm text-gray-300 whitespace-pre-wrap break-all max-h-32 overflow-y-auto",children:$.context})]})]}),n.jsxs("div",{className:"mt-4 grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[n.jsxs("div",{children:[n.jsx("span",{className:"text-gray-500",children:"Source Type:"}),n.jsx("span",{className:"ml-2 text-gray-300",children:$.source_type})]}),n.jsxs("div",{children:[n.jsx("span",{className:"text-gray-500",children:"Location:"}),n.jsx("span",{className:"ml-2 text-gray-300 font-mono",children:$.source_location})]}),n.jsxs("div",{children:[n.jsx("span",{className:"text-gray-500",children:"Detected:"}),n.jsx("span",{className:"ml-2 text-gray-300",children:new Date($.created_at).toLocaleString()})]}),$.resolved_at&&n.jsxs("div",{children:[n.jsx("span",{className:"text-gray-500",children:"Resolved:"}),n.jsx("span",{className:"ml-2 text-gray-300",children:new Date($.resolved_at).toLocaleString()})]})]}),$.notes&&n.jsxs("div",{className:"mt-4",children:[n.jsxs("h4",{className:"text-sm font-medium text-gray-400 mb-2 flex items-center gap-2",children:[n.jsx(_h,{className:"h-4 w-4"}),"Notes"]}),n.jsx("div",{className:"bg-gray-900 p-3 rounded text-sm text-gray-300",children:$.notes})]}),n.jsxs("div",{className:"mt-4 p-3 bg-yellow-500/10 border border-yellow-500/20 rounded",children:[n.jsxs("h4",{className:"text-sm font-medium text-yellow-400 mb-2 flex items-center gap-2",children:[n.jsx(Ne,{className:"h-4 w-4"}),"Remediation Guidance"]}),n.jsxs("ul",{className:"text-sm text-gray-300 space-y-1 list-disc list-inside",children:[n.jsx("li",{children:"Immediately rotate or revoke the exposed credential"}),n.jsx("li",{children:"Check audit logs for any unauthorized access using this credential"}),n.jsx("li",{children:"Review how the secret was exposed and fix the root cause"}),n.jsx("li",{children:"Implement secrets management best practices (e.g., HashiCorp Vault, AWS Secrets Manager)"}),n.jsx("li",{children:"Add pre-commit hooks to prevent secrets from being committed"})]})]})]})]},$.id))}),r.length===0&&n.jsx("div",{className:"text-center py-8 text-gray-400",children:"No findings match your current filters."})]})},u_=({score:e,category:r,confidence:s,priority:a,estimatedHours:i,compact:o=!1})=>{const l=u=>{switch(u.toLowerCase()){case"critical":return"text-red-400 bg-red-500/20 border-red-500/50";case"high":return"text-orange-400 bg-orange-500/20 border-orange-500/50";case"medium":return"text-yellow-400 bg-yellow-500/20 border-yellow-500/50";case"low":return"text-green-400 bg-green-500/20 border-green-500/50";default:return"text-gray-400 bg-gray-500/20 border-gray-500/50"}},c=u=>u>=80?"text-red-400":u>=60?"text-orange-400":u>=40?"text-yellow-400":"text-green-400",d=u=>u/100*180-90;return o?n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx("div",{className:`text-2xl font-bold ${c(e)}`,children:e.toFixed(0)}),n.jsx("div",{className:`px-2 py-1 rounded-md text-xs font-medium border ${l(r)}`,children:r.toUpperCase()}),n.jsxs("div",{className:"text-gray-500 text-sm",children:["#",a]})]}):n.jsxs("div",{className:"bg-gray-800 rounded-lg border border-gray-700 p-4",children:[n.jsx("div",{className:"flex items-center justify-center mb-4",children:n.jsxs("div",{className:"relative w-32 h-16 overflow-hidden",children:[n.jsx("div",{className:"absolute inset-0 flex items-end justify-center",children:n.jsx("div",{className:"w-32 h-16 border-t-8 border-l-8 border-r-8 border-gray-700 rounded-t-full"})}),n.jsx("div",{className:"absolute inset-0 flex items-end justify-center origin-bottom",style:{transform:`rotate(${d(e)}deg)`},children:n.jsx("div",{className:`w-1 h-14 ${c(e)} bg-current rounded-t-full`})}),n.jsx("div",{className:"absolute inset-x-0 bottom-0 text-center",children:n.jsx("span",{className:`text-2xl font-bold ${c(e)}`,children:e.toFixed(0)})})]})}),n.jsx("div",{className:"flex justify-center mb-4",children:n.jsxs("span",{className:`px-3 py-1 rounded-full text-sm font-medium border ${l(r)}`,children:[r.toUpperCase()," RISK"]})}),n.jsxs("div",{className:"grid grid-cols-3 gap-2 text-center",children:[n.jsxs("div",{className:"bg-gray-900/50 rounded p-2",children:[n.jsx(Vr,{className:"w-4 h-4 mx-auto mb-1 text-cyan-400"}),n.jsx("div",{className:"text-xs text-gray-400",children:"Priority"}),n.jsxs("div",{className:"text-sm font-medium text-white",children:["#",a]})]}),n.jsxs("div",{className:"bg-gray-900/50 rounded p-2",children:[n.jsx(we,{className:"w-4 h-4 mx-auto mb-1 text-cyan-400"}),n.jsx("div",{className:"text-xs text-gray-400",children:"Confidence"}),n.jsxs("div",{className:"text-sm font-medium text-white",children:[s.toFixed(0),"%"]})]}),i!==void 0&&n.jsxs("div",{className:"bg-gray-900/50 rounded p-2",children:[n.jsx(vt,{className:"w-4 h-4 mx-auto mb-1 text-cyan-400"}),n.jsx("div",{className:"text-xs text-gray-400",children:"Effort"}),n.jsxs("div",{className:"text-sm font-medium text-white",children:[i,"h"]})]})]})]})},h_=({scores:e,onSelectVulnerability:r,selectedId:s})=>{const[a,i]=E.useState(null),[o,l]=E.useState("all"),c=g=>{switch(g.toLowerCase()){case"critical":return"border-red-500 bg-red-500/10";case"high":return"border-orange-500 bg-orange-500/10";case"medium":return"border-yellow-500 bg-yellow-500/10";case"low":return"border-green-500 bg-green-500/10";default:return"border-gray-500 bg-gray-500/10"}},d=g=>{switch(g.toLowerCase()){case"critical":return"bg-red-500/20 text-red-400 border-red-500/50";case"high":return"bg-orange-500/20 text-orange-400 border-orange-500/50";case"medium":return"bg-yellow-500/20 text-yellow-400 border-yellow-500/50";case"low":return"bg-green-500/20 text-green-400 border-green-500/50";default:return"bg-gray-500/20 text-gray-400 border-gray-500/50"}},u=o==="all"?e:e.filter(g=>g.risk_category.toLowerCase()===o),f=["all","critical","high","medium","low"],h={all:e.length,critical:e.filter(g=>g.risk_category.toLowerCase()==="critical").length,high:e.filter(g=>g.risk_category.toLowerCase()==="high").length,medium:e.filter(g=>g.risk_category.toLowerCase()==="medium").length,low:e.filter(g=>g.risk_category.toLowerCase()==="low").length};return n.jsxs("div",{className:"space-y-4",children:[n.jsx("div",{className:"flex space-x-2 overflow-x-auto pb-2",children:f.map(g=>n.jsxs("button",{onClick:()=>l(g),className:`px-3 py-1.5 rounded-lg text-sm font-medium transition-colors whitespace-nowrap ${o===g?g==="all"?"bg-cyan-500/20 text-cyan-400 border border-cyan-500/50":d(g):"bg-gray-800 text-gray-400 border border-gray-700 hover:border-gray-600"}`,children:[g.charAt(0).toUpperCase()+g.slice(1),n.jsxs("span",{className:"ml-1.5 text-xs opacity-75",children:["(",h[g],")"]})]},g))}),n.jsx("div",{className:"space-y-2",children:u.length===0?n.jsx("div",{className:"text-center py-8 text-gray-400",children:"No vulnerabilities in this category"}):u.map(g=>n.jsxs("div",{className:`border-l-4 rounded-lg transition-all ${c(g.risk_category)} ${s===g.vulnerability_id?"ring-2 ring-cyan-500":""}`,children:[n.jsxs("div",{className:"flex items-center justify-between p-3 cursor-pointer hover:bg-gray-800/50",onClick:()=>{r&&r(g.vulnerability_id),i(a===g.vulnerability_id?null:g.vulnerability_id)},children:[n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsxs("div",{className:"flex items-center justify-center w-8 h-8 rounded-full bg-gray-800 text-white font-bold text-sm",children:["#",g.remediation_priority]}),n.jsx(u_,{score:g.effective_risk_score,category:g.risk_category,confidence:g.confidence,priority:g.remediation_priority,compact:!0})]}),n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsxs("div",{className:"flex items-center text-gray-400 text-sm",children:[n.jsx(vt,{className:"w-4 h-4 mr-1"}),g.estimated_effort.estimated_hours,"h"]}),n.jsxs("div",{className:"flex items-center text-gray-400 text-sm",children:[n.jsx(br,{className:"w-4 h-4 mr-1"}),g.confidence.toFixed(0),"%"]}),a===g.vulnerability_id?n.jsx(cr,{className:"w-5 h-5 text-gray-400"}):n.jsx(ut,{className:"w-5 h-5 text-gray-400"})]})]}),a===g.vulnerability_id&&n.jsx("div",{className:"px-4 pb-4 border-t border-gray-700/50",children:n.jsxs("div",{className:"pt-3 space-y-3",children:[n.jsxs("div",{children:[n.jsx("h4",{className:"text-sm font-medium text-gray-300 mb-2",children:"Contributing Factors"}),n.jsx("div",{className:"grid grid-cols-2 gap-2",children:g.factor_scores.slice(0,4).map((v,j)=>n.jsxs("div",{className:"flex items-center justify-between bg-gray-900/50 rounded p-2",children:[n.jsx("span",{className:"text-xs text-gray-400",children:v.factor_name}),n.jsx("span",{className:"text-xs font-medium text-white",children:v.normalized_value.toFixed(0)})]},j))})]}),n.jsxs("div",{className:"flex items-center space-x-4 text-sm",children:[n.jsxs("span",{className:`px-2 py-1 rounded text-xs ${g.estimated_effort.effort_level==="low"?"bg-green-500/20 text-green-400":g.estimated_effort.effort_level==="medium"?"bg-yellow-500/20 text-yellow-400":g.estimated_effort.effort_level==="high"?"bg-orange-500/20 text-orange-400":"bg-red-500/20 text-red-400"}`,children:[g.estimated_effort.effort_level.replace("_"," ").toUpperCase()," EFFORT"]}),n.jsxs("span",{className:`px-2 py-1 rounded text-xs ${g.estimated_effort.impact_level==="low"?"bg-green-500/20 text-green-400":g.estimated_effort.impact_level==="medium"?"bg-yellow-500/20 text-yellow-400":g.estimated_effort.impact_level==="high"?"bg-orange-500/20 text-orange-400":"bg-red-500/20 text-red-400"}`,children:[g.estimated_effort.impact_level.toUpperCase()," IMPACT"]}),g.estimated_effort.requires_downtime&&n.jsx("span",{className:"px-2 py-1 rounded text-xs bg-red-500/20 text-red-400",children:"DOWNTIME REQUIRED"})]}),n.jsxs("div",{className:"text-xs text-gray-500",children:["Calculated: ",new Date(g.calculated_at).toLocaleString()]})]})})]},g.vulnerability_id))})]})},f_=({score:e})=>{const r=e.factor_scores.map(i=>({name:i.factor_name.replace(" ",`
`),value:i.normalized_value,contribution:i.contribution,weight:i.weight})),s=i=>i>=80?"#ef4444":i>=60?"#f97316":i>=40?"#eab308":"#22c55e",a=({active:i,payload:o})=>{if(i&&o&&o.length){const l=o[0].payload;return n.jsxs("div",{className:"bg-gray-800 border border-gray-700 rounded-lg p-3 shadow-lg",children:[n.jsx("p",{className:"font-medium text-white",children:l.name.replace(`
`," ")}),n.jsxs("p",{className:"text-sm text-gray-400",children:["Score: ",n.jsx("span",{className:"text-white",children:l.value.toFixed(1)})]}),n.jsxs("p",{className:"text-sm text-gray-400",children:["Weight: ",n.jsxs("span",{className:"text-white",children:[(l.weight*100).toFixed(0),"%"]})]}),n.jsxs("p",{className:"text-sm text-gray-400",children:["Contribution: ",n.jsx("span",{className:"text-cyan-400",children:l.contribution.toFixed(1)})]})]})}return null};return n.jsxs("div",{className:"bg-gray-800 rounded-lg border border-gray-700 p-4",children:[n.jsx("h3",{className:"text-lg font-medium text-white mb-4",children:"Score Breakdown"}),n.jsx("div",{className:"h-64 mb-4",children:n.jsx(Be,{width:"100%",height:"100%",children:n.jsxs(ia,{data:r,layout:"vertical",margin:{top:5,right:20,left:100,bottom:5},children:[n.jsx(mt,{type:"number",domain:[0,100],tick:{fill:"#9ca3af",fontSize:12},axisLine:{stroke:"#4b5563"},tickLine:{stroke:"#4b5563"}}),n.jsx(lt,{type:"category",dataKey:"name",tick:{fill:"#9ca3af",fontSize:11},axisLine:{stroke:"#4b5563"},tickLine:{stroke:"#4b5563"},width:95}),n.jsx(Ve,{content:n.jsx(a,{})}),n.jsx(oa,{dataKey:"value",radius:[0,4,4,0],children:r.map((i,o)=>n.jsx(Gs,{fill:s(i.value)},`cell-${o}`))})]})})}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full text-sm",children:[n.jsx("thead",{children:n.jsxs("tr",{className:"border-b border-gray-700",children:[n.jsx("th",{className:"text-left py-2 text-gray-400 font-medium",children:"Factor"}),n.jsx("th",{className:"text-right py-2 text-gray-400 font-medium",children:"Score"}),n.jsx("th",{className:"text-right py-2 text-gray-400 font-medium",children:"Weight"}),n.jsx("th",{className:"text-right py-2 text-gray-400 font-medium",children:"Contribution"})]})}),n.jsxs("tbody",{children:[e.factor_scores.map((i,o)=>n.jsxs("tr",{className:"border-b border-gray-700/50",children:[n.jsx("td",{className:"py-2 text-white",children:i.factor_name}),n.jsx("td",{className:"py-2 text-right text-gray-300",children:i.normalized_value.toFixed(1)}),n.jsxs("td",{className:"py-2 text-right text-gray-400",children:[(i.weight*100).toFixed(0),"%"]}),n.jsx("td",{className:"py-2 text-right text-cyan-400 font-medium",children:i.contribution.toFixed(1)})]},o)),n.jsxs("tr",{className:"font-medium",children:[n.jsx("td",{className:"py-2 text-white",children:"Total"}),n.jsx("td",{className:"py-2 text-right text-white",children:e.effective_risk_score.toFixed(1)}),n.jsx("td",{className:"py-2 text-right text-gray-400",children:"100%"}),n.jsx("td",{className:"py-2 text-right text-cyan-400",children:e.factor_scores.reduce((i,o)=>i+o.contribution,0).toFixed(1)})]})]})]})}),n.jsxs("div",{className:"mt-4 p-3 bg-gray-900/50 rounded-lg",children:[n.jsx("h4",{className:"text-sm font-medium text-gray-300 mb-2",children:"Remediation Effort"}),n.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[n.jsxs("div",{children:[n.jsx("span",{className:"text-gray-400",children:"Estimated Hours:"}),n.jsxs("span",{className:"ml-2 text-white font-medium",children:[e.estimated_effort.estimated_hours,"h"]})]}),n.jsxs("div",{children:[n.jsx("span",{className:"text-gray-400",children:"Effort Level:"}),n.jsx("span",{className:"ml-2 text-white font-medium capitalize",children:e.estimated_effort.effort_level.replace("_"," ")})]}),n.jsxs("div",{children:[n.jsx("span",{className:"text-gray-400",children:"Impact Level:"}),n.jsx("span",{className:"ml-2 text-white font-medium capitalize",children:e.estimated_effort.impact_level})]}),n.jsxs("div",{className:"flex items-center space-x-4",children:[e.estimated_effort.requires_downtime&&n.jsx("span",{className:"text-red-400 text-xs",children:"Requires Downtime"}),e.estimated_effort.requires_testing&&n.jsx("span",{className:"text-yellow-400 text-xs",children:"Requires Testing"})]})]})]})]})},m_=({onConfigUpdate:e})=>{const[r,s]=E.useState(null),[a,i]=E.useState(!0),[o,l]=E.useState(!1),[c,d]=E.useState({cvss_weight:.25,exploit_weight:.2,asset_criticality_weight:.15,network_exposure_weight:.15,attack_path_weight:.1,compliance_weight:.08,business_context_weight:.07}),u={cvss_weight:.25,exploit_weight:.2,asset_criticality_weight:.15,network_exposure_weight:.15,attack_path_weight:.1,compliance_weight:.08,business_context_weight:.07};E.useEffect(()=>{f()},[]);const f=async()=>{try{i(!0);const p=await Hn.getConfig();s(p.data),d(p.data.weights)}catch(p){console.error("Failed to load AI config:",p),X.error("Failed to load AI configuration")}finally{i(!1)}},h=(p,m)=>{d(y=>({...y,[p]:m}))},g=async()=>{try{l(!0),await Hn.updateConfig({weights:c}),X.success("AI configuration updated"),e&&e()}catch(p){console.error("Failed to save AI config:",p),X.error("Failed to save configuration")}finally{l(!1)}},v=()=>{d(u),X.info("Weights reset to defaults")},j=()=>Object.values(c).reduce((p,m)=>p+m,0),_={cvss_weight:"CVSS Score",exploit_weight:"Exploit Availability",asset_criticality_weight:"Asset Criticality",network_exposure_weight:"Network Exposure",attack_path_weight:"Attack Path Risk",compliance_weight:"Compliance Impact",business_context_weight:"Business Context"},b={cvss_weight:"Base vulnerability severity from CVE database",exploit_weight:"Whether exploits exist in the wild",asset_criticality_weight:"Importance of the affected asset",network_exposure_weight:"Internet-facing vs internal exposure",attack_path_weight:"Position in potential attack chains",compliance_weight:"Impact on regulatory compliance",business_context_weight:"Overall business risk context"};return a?n.jsx("div",{className:"flex items-center justify-center p-8",children:n.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-cyan-500"})}):n.jsxs("div",{className:"bg-gray-800 rounded-lg border border-gray-700 p-6",children:[n.jsxs("div",{className:"flex items-center justify-between mb-6",children:[n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(Nh,{className:"w-5 h-5 text-cyan-400"}),n.jsx("h3",{className:"text-lg font-medium text-white",children:"AI Scoring Configuration"})]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsxs(Re,{variant:"secondary",size:"sm",onClick:v,children:[n.jsx(Sh,{className:"w-4 h-4 mr-1"}),"Reset"]}),n.jsxs(Re,{variant:"primary",size:"sm",onClick:g,loading:o,children:[n.jsx(vi,{className:"w-4 h-4 mr-1"}),"Save"]})]})]}),n.jsxs("div",{className:"mb-6 p-3 bg-gray-900/50 rounded-lg",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("span",{className:"text-sm text-gray-400",children:"Total Weight"}),n.jsxs("span",{className:`text-lg font-bold ${Math.abs(j()-1)<.01?"text-green-400":"text-yellow-400"}`,children:[(j()*100).toFixed(0),"%"]})]}),Math.abs(j()-1)>=.01&&n.jsx("p",{className:"text-xs text-yellow-400 mt-1",children:"Weights should sum to 100% for optimal scoring"})]}),n.jsx("div",{className:"space-y-4",children:Object.keys(c).map(p=>n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium text-white",children:_[p]}),n.jsx("p",{className:"text-xs text-gray-400",children:b[p]})]}),n.jsxs("span",{className:"text-sm font-mono text-cyan-400",children:[(c[p]*100).toFixed(0),"%"]})]}),n.jsx("input",{type:"range",min:"0",max:"50",step:"1",value:c[p]*100,onChange:m=>h(p,parseInt(m.target.value)/100),className:`w-full h-2 bg-gray-700 rounded-lg appearance-none cursor-pointer
                         [&::-webkit-slider-thumb]:appearance-none
                         [&::-webkit-slider-thumb]:w-4
                         [&::-webkit-slider-thumb]:h-4
                         [&::-webkit-slider-thumb]:rounded-full
                         [&::-webkit-slider-thumb]:bg-cyan-500
                         [&::-webkit-slider-thumb]:cursor-pointer
                         [&::-webkit-slider-thumb]:transition-transform
                         [&::-webkit-slider-thumb]:hover:scale-110`})]},p))}),r&&n.jsx("div",{className:"mt-6 pt-4 border-t border-gray-700",children:n.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[n.jsxs("div",{children:[n.jsx("span",{className:"text-gray-400",children:"Configuration Name:"}),n.jsx("span",{className:"ml-2 text-white",children:r.name})]}),n.jsxs("div",{children:[n.jsx("span",{className:"text-gray-400",children:"Last Updated:"}),n.jsx("span",{className:"ml-2 text-white",children:new Date(r.updated_at).toLocaleString()})]})]})})]})},p_=({scanId:e,onSelectVulnerability:r})=>{const[s,a]=E.useState(null),[i,o]=E.useState(!1),[l,c]=E.useState(!1),[d,u]=E.useState(null),[f,h]=E.useState(!1),[g,v]=E.useState("list"),j=E.useCallback(async()=>{var y;try{o(!0);const x=await Hn.getScores(e);a(x.data)}catch(x){((y=x.response)==null?void 0:y.status)!==404&&console.error("Failed to load AI scores:",x)}finally{o(!1)}},[e]);E.useEffect(()=>{j()},[j]);const _=async(y=!1)=>{try{c(!0);const x=await Hn.prioritize(e,{force_recalculate:y});a(x.data),X.success("AI prioritization calculated successfully")}catch(x){console.error("Failed to calculate prioritization:",x),X.error("Failed to calculate AI prioritization")}finally{c(!1)}},b=y=>{const x=s==null?void 0:s.scores.find(w=>w.vulnerability_id===y);u(x||null),r&&r(y)},p=y=>[{name:"Critical",value:y.critical_count,color:"#ef4444"},{name:"High",value:y.high_count,color:"#f97316"},{name:"Medium",value:y.medium_count,color:"#eab308"},{name:"Low",value:y.low_count,color:"#22c55e"}].filter(x=>x.value>0),m=y=>{var w;return y.length===0?[]:(((w=y[0])==null?void 0:w.factor_scores.map(S=>S.factor_name))||[]).map(S=>{const k=y.reduce((C,R)=>{const O=R.factor_scores.find(P=>P.factor_name===S);return C+((O==null?void 0:O.normalized_value)||0)},0)/y.length;return{factor:S.replace(" ",`
`),value:k,fullMark:100}})};return i?n.jsx("div",{className:"flex items-center justify-center p-8",children:n.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-cyan-500"})}):n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx(Cn,{className:"w-6 h-6 text-cyan-400"}),n.jsx("h2",{className:"text-xl font-semibold text-white",children:"AI Vulnerability Prioritization"})]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[s&&n.jsxs(Re,{variant:"secondary",size:"sm",onClick:()=>_(!0),loading:l,children:[n.jsx(Cs,{className:"w-4 h-4 mr-1"}),"Recalculate"]}),n.jsxs(Re,{variant:f?"primary":"secondary",size:"sm",onClick:()=>h(!f),children:[n.jsx($s,{className:"w-4 h-4 mr-1"}),"Configure"]})]})]}),f&&n.jsx(m_,{onConfigUpdate:()=>_(!0)}),!s&&!i&&n.jsxs("div",{className:"bg-gray-800 rounded-lg border border-gray-700 p-8 text-center",children:[n.jsx(Cn,{className:"w-12 h-12 text-gray-600 mx-auto mb-4"}),n.jsx("h3",{className:"text-lg font-medium text-white mb-2",children:"No AI Prioritization Data"}),n.jsx("p",{className:"text-gray-400 mb-6",children:"Calculate AI-based risk scores to prioritize vulnerabilities for remediation."}),n.jsxs(Re,{variant:"primary",onClick:()=>_(!1),loading:l,children:[n.jsx(Cn,{className:"w-4 h-4 mr-2"}),"Calculate AI Prioritization"]})]}),s&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[n.jsxs("div",{className:"bg-gray-800 rounded-lg border border-gray-700 p-4",children:[n.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[n.jsx(Ne,{className:"w-5 h-5 text-red-400"}),n.jsx("span",{className:"text-sm text-gray-400",children:"Critical"})]}),n.jsx("div",{className:"text-2xl font-bold text-red-400",children:s.summary.critical_count})]}),n.jsxs("div",{className:"bg-gray-800 rounded-lg border border-gray-700 p-4",children:[n.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[n.jsx(Vr,{className:"w-5 h-5 text-cyan-400"}),n.jsx("span",{className:"text-sm text-gray-400",children:"Avg Risk Score"})]}),n.jsx("div",{className:"text-2xl font-bold text-white",children:s.summary.average_risk_score.toFixed(1)})]}),n.jsxs("div",{className:"bg-gray-800 rounded-lg border border-gray-700 p-4",children:[n.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[n.jsx(br,{className:"w-5 h-5 text-orange-400"}),n.jsx("span",{className:"text-sm text-gray-400",children:"Highest Score"})]}),n.jsx("div",{className:"text-2xl font-bold text-orange-400",children:s.summary.highest_risk_score.toFixed(1)})]}),n.jsxs("div",{className:"bg-gray-800 rounded-lg border border-gray-700 p-4",children:[n.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[n.jsx(Lr,{className:"w-5 h-5 text-green-400"}),n.jsx("span",{className:"text-sm text-gray-400",children:"Total Analyzed"})]}),n.jsx("div",{className:"text-2xl font-bold text-white",children:s.summary.total_vulnerabilities})]})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{className:"bg-gray-800 rounded-lg border border-gray-700 p-4",children:[n.jsx("h3",{className:"text-sm font-medium text-gray-300 mb-4",children:"Risk Distribution"}),n.jsx("div",{className:"h-48",children:n.jsx(Be,{width:"100%",height:"100%",children:n.jsxs(_i,{children:[n.jsx(Ni,{data:p(s.summary),cx:"50%",cy:"50%",innerRadius:40,outerRadius:70,paddingAngle:2,dataKey:"value",children:p(s.summary).map((y,x)=>n.jsx(Gs,{fill:y.color},`cell-${x}`))}),n.jsx(Ve,{contentStyle:{backgroundColor:"#1f2937",border:"1px solid #374151",borderRadius:"8px"},itemStyle:{color:"#fff"}})]})})}),n.jsx("div",{className:"flex justify-center space-x-4 mt-2",children:p(s.summary).map(y=>n.jsxs("div",{className:"flex items-center space-x-1",children:[n.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:y.color}}),n.jsxs("span",{className:"text-xs text-gray-400",children:[y.name," (",y.value,")"]})]},y.name))})]}),n.jsxs("div",{className:"bg-gray-800 rounded-lg border border-gray-700 p-4",children:[n.jsx("h3",{className:"text-sm font-medium text-gray-300 mb-4",children:"Average Factor Scores"}),n.jsx("div",{className:"h-48",children:n.jsx(Be,{width:"100%",height:"100%",children:n.jsxs(Uh,{data:m(s.scores),children:[n.jsx(qh,{stroke:"#374151"}),n.jsx(Wh,{dataKey:"factor",tick:{fill:"#9ca3af",fontSize:10}}),n.jsx(Bh,{angle:30,domain:[0,100],tick:{fill:"#9ca3af",fontSize:10}}),n.jsx(Vh,{name:"Score",dataKey:"value",stroke:"#06b6d4",fill:"#06b6d4",fillOpacity:.3}),n.jsx(Ve,{contentStyle:{backgroundColor:"#1f2937",border:"1px solid #374151",borderRadius:"8px"},itemStyle:{color:"#fff"}})]})})})]})]}),n.jsxs("div",{className:"flex space-x-2 border-b border-gray-700",children:[n.jsx("button",{onClick:()=>v("list"),className:`px-4 py-2 text-sm font-medium border-b-2 transition-colors ${g==="list"?"border-cyan-500 text-cyan-400":"border-transparent text-gray-400 hover:text-white"}`,children:"Prioritized List"}),n.jsx("button",{onClick:()=>v("matrix"),className:`px-4 py-2 text-sm font-medium border-b-2 transition-colors ${g==="matrix"?"border-cyan-500 text-cyan-400":"border-transparent text-gray-400 hover:text-white"}`,children:"Impact vs Likelihood"})]}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[n.jsxs("div",{className:"lg:col-span-2",children:[g==="list"&&n.jsx(h_,{scores:s.scores,onSelectVulnerability:b,selectedId:d==null?void 0:d.vulnerability_id}),g==="matrix"&&n.jsx(g_,{scores:s.scores})]}),n.jsx("div",{className:"lg:col-span-1",children:d?n.jsx(f_,{score:d}):n.jsxs("div",{className:"bg-gray-800 rounded-lg border border-gray-700 p-6 text-center",children:[n.jsx(Vs,{className:"w-8 h-8 text-gray-600 mx-auto mb-2"}),n.jsx("p",{className:"text-gray-400 text-sm",children:"Select a vulnerability to view detailed score breakdown"})]})})]}),n.jsxs("div",{className:"text-xs text-gray-500 text-right",children:["Last calculated: ",new Date(s.calculated_at).toLocaleString()]})]})]})},g_=({scores:e})=>{const r=a=>{const i=a.factor_scores.find(d=>d.factor_name==="CVSS Score"),o=a.factor_scores.find(d=>d.factor_name==="Exploit Availability"),l=(i==null?void 0:i.normalized_value)||50,c=(o==null?void 0:o.normalized_value)||50;return{impact:l,likelihood:c}},s=a=>{switch(a.toLowerCase()){case"critical":return"#ef4444";case"high":return"#f97316";case"medium":return"#eab308";case"low":return"#22c55e";default:return"#6b7280"}};return n.jsxs("div",{className:"bg-gray-800 rounded-lg border border-gray-700 p-4",children:[n.jsx("h3",{className:"text-sm font-medium text-gray-300 mb-4",children:"Impact vs Likelihood Matrix"}),n.jsxs("div",{className:"relative w-full h-80 border border-gray-700 rounded-lg bg-gray-900/50",children:[n.jsx("div",{className:"absolute inset-0 grid grid-cols-5 grid-rows-5",children:Array.from({length:25}).map((a,i)=>{const o=Math.floor(i/5),l=i%5;let c="bg-gray-800/20";const d=(l+(4-o))/8;return d>.7?c="bg-red-500/10":d>.5?c="bg-orange-500/10":d>.3?c="bg-yellow-500/10":c="bg-green-500/10",n.jsx("div",{className:`border-r border-b border-gray-700/50 ${c}`},i)})}),n.jsx("div",{className:"absolute -bottom-6 inset-x-0 text-center text-xs text-gray-400",children:"Likelihood (Exploit Availability) "}),n.jsx("div",{className:"absolute -left-6 inset-y-0 flex items-center text-xs text-gray-400",style:{writingMode:"vertical-rl",transform:"rotate(180deg)"},children:"Impact (CVSS Score) "}),e.map(a=>{const{impact:i,likelihood:o}=r(a),l=o/100*100,c=i/100*100;return n.jsx("div",{className:"absolute w-3 h-3 rounded-full transform -translate-x-1/2 translate-y-1/2 cursor-pointer hover:scale-150 transition-transform",style:{left:`${l}%`,bottom:`${c}%`,backgroundColor:s(a.risk_category)},title:`Priority #${a.remediation_priority} - Score: ${a.effective_risk_score.toFixed(1)}`},a.vulnerability_id)})]}),n.jsx("div",{className:"flex justify-center space-x-4 mt-6",children:["critical","high","medium","low"].map(a=>n.jsxs("div",{className:"flex items-center space-x-1",children:[n.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:s(a)}}),n.jsx("span",{className:"text-xs text-gray-400 capitalize",children:a})]},a))})]})},x_=()=>{const{activeScan:e,results:r}=yt(),[s,a]=E.useState(!1),[i,o]=E.useState(null),[l,c]=E.useState(""),[d,u]=E.useState("risk"),[f,h]=E.useState("all"),[g,v]=E.useState(!1),[j,_]=E.useState(!1),[b,p]=E.useState(!1),[m,y]=E.useState(0),[x,w]=E.useState("results"),[S,k]=E.useState(!1),[C,R]=E.useState([]),[O,P]=E.useState([]),[T,M]=E.useState(!1),[A,$]=E.useState(!1),D=e?r.get(e.id)||[]:[];E.useEffect(()=>{e&&e.status==="completed"&&D.length===0&&ue(),e&&(U(),G())},[e]);const U=async()=>{if(e)try{const B=await pt.getTagsForScan(e.id);R(B.data)}catch(B){console.error("Failed to load scan tags:",B)}},G=async()=>{try{const B=await pt.getAll();P(B.data)}catch(B){console.error("Failed to load all tags:",B)}},q=async B=>{if(e)try{const ee=await pt.addTagsToScan(e.id,{tag_ids:[B]});R(ee.data),M(!1),X.success("Tag added")}catch{X.error("Failed to add tag")}},Y=async B=>{if(e)try{await pt.removeTagFromScan(e.id,B),R(C.filter(ee=>ee.id!==B)),X.success("Tag removed")}catch{X.error("Failed to remove tag")}},Z=async()=>{if(e){$(!0);try{const B=await Ot.duplicate(e.id);X.success(`Scan duplicated as "${B.data.name}"`),yt.getState().setActiveScan(B.data)}catch{X.error("Failed to duplicate scan")}finally{$(!1)}}},K=O.filter(B=>!C.some(ee=>ee.id===B.id)),ue=async()=>{if(e){a(!0);try{const B=await Ot.getResults(e.id);yt.getState().setResults(e.id,B.data)}catch{X.error("Failed to load scan results")}finally{a(!1)}}},he=async()=>{var B,ee,se;if(e){k(!0);try{const te=await Im.exportScan(e.id);te.data.success?X.success(`Exported ${te.data.events_count} events to ${te.data.exported_to} SIEM integration(s)`):X.warning("Export completed with issues. Check SIEM settings."),te.data.errors&&te.data.errors.length>0&&te.data.errors.forEach(ye=>{X.error(`SIEM export error: ${ye}`)})}catch(te){const ye=te;((B=ye.response)==null?void 0:B.status)===404?X.error("No SIEM integrations configured. Go to Settings > SIEM Integration to set up."):X.error(((se=(ee=ye.response)==null?void 0:ee.data)==null?void 0:se.error)||"Failed to export to SIEM")}finally{k(!1)}}},xe=E.useMemo(()=>{let B=[...D];switch(l&&(B=B.filter(ee=>{var se;return ee.target.ip.includes(l)||((se=ee.target.hostname)==null?void 0:se.toLowerCase().includes(l.toLowerCase()))})),f){case"with-vulns":B=B.filter(ee=>ee.vulnerabilities.length>0);break;case"critical":B=B.filter(ee=>ee.vulnerabilities.some(se=>se.severity==="Critical"));break;case"high":B=B.filter(ee=>ee.vulnerabilities.some(se=>se.severity==="Critical"||se.severity==="High"));break}return B.sort((ee,se)=>{switch(d){case"risk":return Aa(se)-Aa(ee);case"vulns":return se.vulnerabilities.length-ee.vulnerabilities.length;case"ports":return se.ports.filter(te=>te.state==="Open").length-ee.ports.filter(te=>te.state==="Open").length;case"ip":default:return ee.target.ip.localeCompare(se.target.ip)}}),B},[D,l,d,f]);if(!e)return n.jsx(le,{children:n.jsx("div",{className:"text-center py-12 text-slate-500",children:"Select a scan from the list to view results"})});if(s)return n.jsx(le,{children:n.jsx("div",{className:"flex items-center justify-center py-12",children:n.jsx(At,{})})});if(D.length===0)return n.jsx(le,{children:n.jsx("div",{className:"text-center py-12 text-slate-500",children:e.status==="running"?"Scan in progress... Results will appear here as hosts are discovered":e.status==="pending"?"Scan is pending...":e.status==="failed"?`Scan failed: ${e.error_message||"Unknown error"}`:"No results available"})});const ge=D.filter(B=>B.is_alive).length,be=D.reduce((B,ee)=>B+ee.ports.filter(se=>se.state==="Open").length,0),J=D.reduce((B,ee)=>B+ee.vulnerabilities.length,0);return n.jsxs("div",{className:"space-y-4",children:[n.jsxs(le,{children:[n.jsxs("div",{className:"flex justify-between items-start mb-4",children:[n.jsx("h3",{className:"text-lg font-semibold text-white",children:e==null?void 0:e.name}),n.jsxs("button",{onClick:Z,disabled:A,className:"flex items-center gap-1 px-3 py-1.5 text-sm border border-dark-border rounded hover:border-primary hover:text-primary transition-colors disabled:opacity-50",title:"Duplicate this scan",children:[A?n.jsx(At,{className:"h-4 w-4"}):n.jsx(na,{className:"h-4 w-4"}),"Duplicate"]})]}),n.jsxs("div",{className:"flex items-center gap-2 mb-4 flex-wrap",children:[n.jsx(zs,{className:"h-4 w-4 text-slate-400"}),C.map(B=>n.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded text-sm",style:{backgroundColor:B.color+"20",color:B.color},children:[B.name,n.jsx("button",{onClick:()=>Y(B.id),className:"hover:opacity-70",title:"Remove tag",children:n.jsx(bt,{className:"h-3 w-3"})})]},B.id)),n.jsxs("div",{className:"relative",children:[n.jsxs("button",{onClick:()=>M(!T),className:"inline-flex items-center gap-1 px-2 py-1 rounded text-sm border border-dashed border-dark-border text-slate-400 hover:border-primary hover:text-primary",children:[n.jsx(Dr,{className:"h-3 w-3"}),"Add Tag"]}),T&&K.length>0&&n.jsx("div",{className:"absolute top-full left-0 mt-1 z-10 bg-dark-surface border border-dark-border rounded-lg shadow-lg min-w-[150px] max-h-[200px] overflow-y-auto",children:K.map(B=>n.jsxs("button",{onClick:()=>q(B.id),className:"w-full text-left px-3 py-2 hover:bg-dark-hover flex items-center gap-2",children:[n.jsx("span",{className:"w-3 h-3 rounded-full",style:{backgroundColor:B.color}}),n.jsx("span",{className:"text-sm text-slate-300",children:B.name})]},B.id))}),T&&K.length===0&&n.jsx("div",{className:"absolute top-full left-0 mt-1 z-10 bg-dark-surface border border-dark-border rounded-lg shadow-lg p-3",children:n.jsx("span",{className:"text-sm text-slate-500",children:"No more tags available"})})]})]}),n.jsxs("div",{className:"grid grid-cols-3 gap-4 text-center",children:[n.jsxs("div",{children:[n.jsx(jt,{className:"h-8 w-8 mx-auto mb-2 text-primary"}),n.jsx("p",{className:"text-2xl font-bold text-white",children:ge}),n.jsx("p",{className:"text-sm text-slate-400",children:"Alive Hosts"})]}),n.jsxs("div",{children:[n.jsx(we,{className:"h-8 w-8 mx-auto mb-2 text-green-500"}),n.jsx("p",{className:"text-2xl font-bold text-white",children:be}),n.jsx("p",{className:"text-sm text-slate-400",children:"Open Ports"})]}),n.jsxs("div",{children:[n.jsx(Ne,{className:"h-8 w-8 mx-auto mb-2 text-red-500"}),n.jsx("p",{className:"text-2xl font-bold text-white",children:J}),n.jsx("p",{className:"text-sm text-slate-400",children:"Vulnerabilities"})]})]})]}),n.jsx(le,{children:n.jsxs("div",{className:"flex gap-2 border-b border-dark-border pb-2",children:[n.jsxs("button",{onClick:()=>w("results"),className:`flex items-center gap-2 px-4 py-2 rounded-t-lg text-sm font-medium transition-colors ${x==="results"?"bg-dark-surface text-primary border-b-2 border-primary":"text-slate-400 hover:text-white hover:bg-dark-hover"}`,children:[n.jsx(kh,{className:"h-4 w-4"}),"Results"]}),n.jsxs("button",{onClick:()=>w("topology"),className:`flex items-center gap-2 px-4 py-2 rounded-t-lg text-sm font-medium transition-colors ${x==="topology"?"bg-dark-surface text-primary border-b-2 border-primary":"text-slate-400 hover:text-white hover:bg-dark-hover"}`,children:[n.jsx(Tr,{className:"h-4 w-4"}),"Topology"]}),n.jsxs("button",{onClick:()=>w("secrets"),className:`flex items-center gap-2 px-4 py-2 rounded-t-lg text-sm font-medium transition-colors ${x==="secrets"?"bg-dark-surface text-primary border-b-2 border-primary":"text-slate-400 hover:text-white hover:bg-dark-hover"}`,children:[n.jsx(lr,{className:"h-4 w-4"}),"Secrets"]}),n.jsxs("button",{onClick:()=>w("ai-priority"),className:`flex items-center gap-2 px-4 py-2 rounded-t-lg text-sm font-medium transition-colors ${x==="ai-priority"?"bg-dark-surface text-primary border-b-2 border-primary":"text-slate-400 hover:text-white hover:bg-dark-hover"}`,children:[n.jsx(Cn,{className:"h-4 w-4"}),"AI Priority"]})]})}),x==="topology"&&e&&n.jsx(c_,{scanId:e.id}),x==="secrets"&&e&&n.jsxs(le,{children:[n.jsxs("h3",{className:"text-xl font-semibold text-white mb-4 flex items-center gap-2",children:[n.jsx(lr,{className:"h-5 w-5 text-yellow-400"}),"Exposed Secrets"]}),n.jsx(d_,{scanId:e.id})]}),x==="ai-priority"&&e&&n.jsx(le,{children:n.jsx(p_,{scanId:e.id})}),x==="results"&&n.jsxs(n.Fragment,{children:[n.jsx(le,{children:n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"flex-1",children:n.jsx(Ue,{type:"text",placeholder:"Search by IP or hostname...",value:l,onChange:B=>c(B.target.value),icon:n.jsx(zr,{className:"h-4 w-4"})})}),n.jsx(Gg,{hosts:xe,scanName:e==null?void 0:e.name,scanId:e==null?void 0:e.id,disabled:xe.length===0}),n.jsxs("button",{onClick:()=>p(!0),disabled:(e==null?void 0:e.status)!=="completed",className:"px-4 py-2 rounded-lg border border-green-500 text-green-500 hover:bg-green-500/10 transition-colors flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",children:[n.jsx(bi,{className:"h-4 w-4"}),"Compliance"]}),n.jsxs("button",{onClick:he,disabled:(e==null?void 0:e.status)!=="completed"||S,className:"px-4 py-2 rounded-lg border border-purple-500 text-purple-500 hover:bg-purple-500/10 transition-colors flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",title:"Export scan results to configured SIEM integrations",children:[S?n.jsx(At,{}):n.jsx(wc,{className:"h-4 w-4"}),S?"Exporting...":"SIEM"]}),n.jsxs("button",{onClick:()=>_(!0),disabled:(e==null?void 0:e.status)!=="completed",className:"px-4 py-2 rounded-lg border border-primary text-primary hover:bg-primary/10 transition-colors flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",children:[n.jsx(Je,{className:"h-4 w-4"}),"Report"]}),n.jsxs("button",{onClick:()=>v(!g),className:`px-4 py-2 rounded-lg border transition-colors flex items-center gap-2 ${g?"bg-primary border-primary text-white":"border-dark-border text-slate-400 hover:border-primary hover:text-white"}`,children:[n.jsx(Ch,{className:"h-4 w-4"}),"Filters"]})]}),g&&n.jsxs("div",{className:"grid grid-cols-2 gap-4 pt-3 border-t border-dark-border",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Sort by"}),n.jsxs("select",{value:d,onChange:B=>u(B.target.value),className:"w-full bg-dark-surface border border-dark-border rounded-lg px-3 py-2 text-white focus:ring-2 focus:ring-primary focus:border-transparent",children:[n.jsx("option",{value:"risk",children:"Risk Score (High to Low)"}),n.jsx("option",{value:"vulns",children:"Vulnerability Count"}),n.jsx("option",{value:"ports",children:"Port Count"}),n.jsx("option",{value:"ip",children:"IP Address"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Filter by"}),n.jsxs("select",{value:f,onChange:B=>h(B.target.value),className:"w-full bg-dark-surface border border-dark-border rounded-lg px-3 py-2 text-white focus:ring-2 focus:ring-primary focus:border-transparent",children:[n.jsx("option",{value:"all",children:"All Hosts"}),n.jsx("option",{value:"with-vulns",children:"With Vulnerabilities"}),n.jsx("option",{value:"high",children:"High/Critical Severity"}),n.jsx("option",{value:"critical",children:"Critical Only"})]})]})]}),n.jsxs("div",{className:"text-sm text-slate-400",children:["Showing ",xe.length," of ",D.length," hosts"]})]})}),n.jsxs(le,{children:[n.jsx("h3",{className:"text-xl font-semibold text-white mb-4",children:"Discovered Hosts"}),n.jsxs("div",{className:"space-y-3",children:[xe.map(B=>{const ee=Aa(B),se=Pg(ee);return n.jsxs("div",{className:`bg-dark-bg border rounded-lg p-4 cursor-pointer hover:border-primary/50 transition-all ${se==="Critical"?"border-severity-critical":se==="High"?"border-severity-high":"border-dark-border"}`,onClick:()=>o(i===B.target.ip?null:B.target.ip),children:[n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-white font-mono font-semibold",children:B.target.ip}),B.target.hostname&&n.jsx("p",{className:"text-sm text-slate-400",children:B.target.hostname})]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsxs(st,{variant:"severity",type:od(se),children:["Risk: ",ee]}),n.jsx(st,{variant:"status",type:B.is_alive?"completed":"failed",children:B.is_alive?"Alive":"Down"}),B.ports.filter(te=>te.state==="Open").length>0&&n.jsxs("span",{className:"text-sm text-slate-400",children:[B.ports.filter(te=>te.state==="Open").length," ports"]}),B.vulnerabilities.length>0&&n.jsxs("span",{className:"text-sm text-red-400",children:[B.vulnerabilities.length," vulns"]})]})]}),i===B.target.ip&&n.jsxs("div",{className:"mt-4 border-t border-dark-border pt-4 space-y-4",children:[B.os_guess&&n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium text-slate-300 mb-1",children:"OS Detection"}),n.jsxs("p",{className:"text-sm text-slate-400",children:[B.os_guess.os_family," ",B.os_guess.os_version," (",B.os_guess.confidence,"% confidence)"]})]}),B.ports.filter(te=>te.state==="Open").length>0&&n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium text-slate-300 mb-2",children:"Open Ports"}),n.jsx("div",{className:"space-y-2",children:B.ports.filter(te=>te.state==="Open").map(te=>{var ye,Pe;return n.jsx("div",{children:n.jsxs("div",{className:"bg-dark-surface rounded p-3 text-sm",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("span",{className:"text-white font-mono font-semibold",children:[te.port,"/",te.protocol]}),te.service&&n.jsxs("span",{className:"text-slate-400",children:[te.service.name," ",te.service.version&&n.jsxs("span",{className:"text-slate-500",children:["v",te.service.version]})]})]}),((ye=te.service)==null?void 0:ye.banner)&&n.jsx(Ag,{banner:te.service.banner,port:te.port,service:te.service.name}),((Pe=te.service)==null?void 0:Pe.ssl_info)&&n.jsx(Vg,{sslInfo:te.service.ssl_info,port:te.port})]})},te.port)})})]}),B.vulnerabilities.length>0&&n.jsxs("div",{children:[n.jsxs("p",{className:"text-sm font-medium text-slate-300 mb-3",children:["Vulnerabilities (",B.vulnerabilities.length,")"]}),n.jsx("div",{className:"space-y-3",children:B.vulnerabilities.map((te,ye)=>n.jsx(Og,{vulnerability:te},ye))})]})]})]},B.target.ip)}),xe.length===0&&n.jsx("div",{className:"text-center py-8 text-slate-400",children:"No hosts match the current filters"})]})]}),(e==null?void 0:e.status)==="completed"&&n.jsx(Jg,{scanId:e.id,onGenerateNew:()=>_(!0)},m)]}),j&&e&&n.jsx(Xg,{scanId:e.id,scanName:e.name,onClose:()=>_(!1),onReportCreated:()=>y(B=>B+1)}),b&&e&&n.jsx(Qg,{scanId:e.id,scanName:e.name,onClose:()=>p(!1)})]})},wn=({title:e,value:r,icon:s,color:a,subtitle:i})=>n.jsx(le,{className:"p-6",children:n.jsxs("div",{className:"flex items-start justify-between",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"text-slate-400 text-sm font-medium mb-1",children:e}),n.jsx("p",{className:`text-3xl font-bold ${a} mb-1`,children:r}),i&&n.jsx("p",{className:"text-slate-500 text-xs",children:i})]}),n.jsx("div",{className:`${a.replace("text-","bg-")}/20 p-3 rounded-lg`,children:s})]})}),y_=()=>{const{scans:e,results:r}=yt(),s=E.useMemo(()=>{const a=e.filter(o=>o.status==="completed"),i=Array.from(r.values()).flat();return{...Rg(i),completedScans:a.length}},[e,r]);return n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-6",children:[n.jsx(wn,{title:"Completed Scans",value:s.completedScans,icon:n.jsx(xt,{className:"h-6 w-6 text-primary"}),color:"text-primary",subtitle:`${e.filter(a=>a.status==="running").length} running`}),n.jsx(wn,{title:"Hosts Discovered",value:s.totalHosts,icon:n.jsx(jt,{className:"h-6 w-6 text-blue-400"}),color:"text-blue-400",subtitle:`${s.totalPorts} open ports`}),n.jsx(wn,{title:"Total Vulnerabilities",value:s.totalVulnerabilities,icon:n.jsx(Ne,{className:"h-6 w-6 text-yellow-400"}),color:"text-yellow-400",subtitle:"Across all scans"}),n.jsx(wn,{title:"Critical Findings",value:s.criticalVulnerabilities,icon:n.jsx(we,{className:"h-6 w-6 text-severity-critical"}),color:"text-severity-critical",subtitle:"Requires immediate attention"})]})},b_={Critical:"#ef4444",High:"#f97316",Medium:"#eab308",Low:"#3b82f6"},v_=({hosts:e})=>{const r=E.useMemo(()=>{const a=id(e);return Object.entries(a).filter(([i,o])=>o>0).map(([i,o])=>({name:i,value:o,color:b_[i]}))},[e]),s=r.reduce((a,i)=>a+i.value,0);return s===0?n.jsxs(le,{className:"p-6",children:[n.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Vulnerability Distribution"}),n.jsx("div",{className:"flex items-center justify-center h-64 text-slate-400",children:n.jsx("p",{children:"No vulnerabilities found"})})]}):n.jsxs(le,{className:"p-6",children:[n.jsxs("h3",{className:"text-lg font-semibold text-white mb-4",children:["Vulnerability Distribution",n.jsxs("span",{className:"text-sm font-normal text-slate-400 ml-2",children:["(",s," total)"]})]}),n.jsx(Be,{width:"100%",height:300,children:n.jsxs(_i,{children:[n.jsx(Ni,{data:r,cx:"50%",cy:"50%",labelLine:!1,label:({name:a,percent:i})=>`${a}: ${(i*100).toFixed(0)}%`,outerRadius:100,fill:"#8884d8",dataKey:"value",children:r.map((a,i)=>n.jsx(Gs,{fill:a.color},`cell-${i}`))}),n.jsx(Ve,{contentStyle:{backgroundColor:"#1e293b",border:"1px solid #334155",borderRadius:"8px",color:"#fff"},formatter:a=>[`${a} vulnerabilities`,"Count"]}),n.jsx(Ps,{verticalAlign:"bottom",height:36,formatter:(a,i)=>n.jsxs("span",{style:{color:"#cbd5e1"},children:[a,": ",i.payload.value]})})]})})]})},w_={21:"#f97316",22:"#22c55e",23:"#ef4444",25:"#3b82f6",53:"#8b5cf6",80:"#06b6d4",110:"#3b82f6",143:"#3b82f6",443:"#10b981",445:"#f59e0b",3306:"#ec4899",3389:"#ef4444",5432:"#3b82f6",8080:"#06b6d4"},j_="#64748b",__=({hosts:e})=>{const r=E.useMemo(()=>Eg(e).map(s=>({...s,displayName:`${s.port} (${s.service})`,color:w_[s.port]||j_})),[e]);return r.length===0?n.jsxs(le,{className:"p-6",children:[n.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Port Distribution"}),n.jsx("div",{className:"flex items-center justify-center h-64 text-slate-400",children:n.jsx("p",{children:"No open ports found"})})]}):n.jsxs(le,{className:"p-6",children:[n.jsxs("h3",{className:"text-lg font-semibold text-white mb-4",children:["Top Open Ports",n.jsx("span",{className:"text-sm font-normal text-slate-400 ml-2",children:"(Across all hosts)"})]}),n.jsx(Be,{width:"100%",height:300,children:n.jsxs(ia,{data:r,layout:"vertical",margin:{top:5,right:30,left:100,bottom:5},children:[n.jsx(Et,{strokeDasharray:"3 3",stroke:"#334155"}),n.jsx(mt,{type:"number",stroke:"#cbd5e1"}),n.jsx(lt,{dataKey:"displayName",type:"category",width:90,stroke:"#cbd5e1",tick:{fontSize:12}}),n.jsx(Ve,{contentStyle:{backgroundColor:"#1e293b",border:"1px solid #334155",borderRadius:"8px",color:"#fff"},formatter:(s,a,i)=>[`${s} hosts`,i.payload.service],labelFormatter:s=>{var a;return`Port ${(a=r.find(i=>i.displayName===s))==null?void 0:a.port}`}}),n.jsx(oa,{dataKey:"count",radius:[0,4,4,0],children:r.map((s,a)=>n.jsx(Gs,{fill:s.color},`cell-${a}`))})]})})]})},Ia=({title:e,value:r,subtitle:s,icon:a,color:i,trend:o})=>n.jsx(le,{className:"p-6",children:n.jsxs("div",{className:"flex items-start justify-between",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"text-slate-400 text-sm font-medium mb-1",children:e}),n.jsx("p",{className:`text-3xl font-bold ${i} mb-1`,children:r}),s&&n.jsx("p",{className:"text-slate-500 text-xs",children:s}),o&&n.jsxs("div",{className:`flex items-center gap-1 mt-2 text-xs ${o.isPositive?"text-green-400":"text-red-400"}`,children:[n.jsx(Vr,{className:`h-3 w-3 ${!o.isPositive&&"rotate-180"}`}),n.jsxs("span",{children:[o.isPositive?"+":"",o.value.toFixed(1),"%"]})]})]}),n.jsx("div",{className:`${i.replace("text-","bg-")}/20 p-3 rounded-lg`,children:a})]})}),N_=({height:e=300})=>n.jsx("div",{className:"animate-pulse",style:{height:e},children:n.jsx("div",{className:"h-full bg-slate-700/50 rounded-lg"})}),ht={critical:"#ef4444",high:"#f97316",medium:"#eab308",low:"#3b82f6"},S_=()=>{const[e,r]=E.useState(30),[s,a]=E.useState(!0),[i,o]=E.useState(null),[l,c]=E.useState(null);E.useEffect(()=>{d()},[e]);const d=async()=>{var y,x;a(!0),o(null);try{const w=await Rr.getVulnerabilityTrendsDashboard(e);c(w.data)}catch(w){const S=w;console.error("Failed to load vulnerability trends:",w),o(((x=(y=S.response)==null?void 0:y.data)==null?void 0:x.message)||"Failed to load vulnerability trends")}finally{a(!1)}},u=y=>{if(y.includes("-W")){const[w,S]=y.split("-W");return`W${S}`}return new Date(y).toLocaleDateString("en-US",{month:"short",day:"numeric"})},f=y=>{switch(y){case"improving":return n.jsx(Eh,{className:"h-5 w-5 text-green-400"});case"declining":return n.jsx(Vr,{className:"h-5 w-5 text-red-400"});default:return n.jsx(Ph,{className:"h-5 w-5 text-yellow-400"})}},h=y=>{switch(y){case"improving":return"text-green-400";case"declining":return"text-red-400";default:return"text-yellow-400"}},g=y=>{switch(y){case"improving":return"Improving";case"declining":return"Declining";default:return"Stable"}};if(s)return n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("div",{className:"h-8 w-64 bg-slate-700 rounded animate-pulse mb-2"}),n.jsx("div",{className:"h-4 w-48 bg-slate-700 rounded animate-pulse"})]}),n.jsx("div",{className:"h-10 w-72 bg-slate-700 rounded animate-pulse"})]}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[1,2,3,4].map(y=>n.jsx(le,{className:"p-6",children:n.jsxs("div",{className:"animate-pulse",children:[n.jsx("div",{className:"h-4 w-24 bg-slate-700 rounded mb-3"}),n.jsx("div",{className:"h-8 w-16 bg-slate-700 rounded mb-2"}),n.jsx("div",{className:"h-3 w-32 bg-slate-700 rounded"})]})},y))}),n.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[1,2,3,4].map(y=>n.jsxs(le,{className:"p-6",children:[n.jsx("div",{className:"h-6 w-48 bg-slate-700 rounded animate-pulse mb-4"}),n.jsx(N_,{})]},y))})]});if(i)return n.jsx(le,{className:"p-6",children:n.jsxs("div",{className:"text-center",children:[n.jsx(Ne,{className:"h-12 w-12 text-yellow-400 mx-auto mb-4"}),n.jsx("h3",{className:"text-lg font-semibold text-white mb-2",children:"Failed to Load Vulnerability Trends"}),n.jsx("p",{className:"text-slate-400 mb-4",children:i}),n.jsx("button",{onClick:d,className:"px-4 py-2 bg-cyan-600 text-white rounded-lg hover:bg-cyan-500 transition-colors",children:"Retry"})]})});if(!l)return null;const{summary:v,daily_counts:j,severity_trends:_,remediation_rates:b,top_recurring:p}=l,m=[{name:"Critical",value:v.critical_open,color:ht.critical},{name:"High",value:v.high_open,color:ht.high},{name:"Medium",value:v.current_open-v.critical_open-v.high_open,color:ht.medium}].filter(y=>y.value>0);return n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[n.jsxs("div",{children:[n.jsx("h2",{className:"text-2xl font-bold text-white mb-1",children:"Vulnerability Trends"}),n.jsx("p",{className:"text-slate-400",children:"Historical analysis and remediation metrics"})]}),n.jsx("div",{className:"flex items-center gap-2 bg-slate-800 border border-slate-700 rounded-lg p-1",children:[7,30,90,180].map(y=>n.jsxs("button",{onClick:()=>r(y),className:`flex items-center gap-2 px-3 py-2 rounded transition-colors ${e===y?"bg-cyan-600 text-white":"text-slate-400 hover:text-white hover:bg-slate-700"}`,children:[n.jsx($r,{className:"h-4 w-4"}),y,"d"]},y))})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[n.jsx(Ia,{title:"Current Open",value:v.current_open,subtitle:`${v.critical_open} critical, ${v.high_open} high`,icon:n.jsx(Ln,{className:"h-6 w-6 text-yellow-400"}),color:"text-yellow-400"}),n.jsx(Ia,{title:"Remediation Rate",value:`${v.remediation_rate.toFixed(1)}%`,subtitle:`${v.total_resolved} of ${v.total_found} resolved`,icon:n.jsx(Ye,{className:"h-6 w-6 text-green-400"}),color:"text-green-400"}),n.jsx(Ia,{title:"Avg. MTTR",value:`${v.avg_mttr_days.toFixed(1)}`,subtitle:"Days to remediate",icon:n.jsx(vt,{className:"h-6 w-6 text-blue-400"}),color:"text-blue-400"}),n.jsx(le,{className:"p-6",children:n.jsxs("div",{className:"flex items-start justify-between",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"text-slate-400 text-sm font-medium mb-1",children:"Trend"}),n.jsxs("div",{className:"flex items-center gap-2",children:[f(v.trend_direction),n.jsx("span",{className:`text-2xl font-bold ${h(v.trend_direction)}`,children:g(v.trend_direction)})]}),n.jsx("p",{className:"text-slate-500 text-xs mt-1",children:"Compared to previous period"})]}),n.jsx("div",{className:"bg-slate-700/50 p-3 rounded-lg",children:n.jsx(we,{className:"h-6 w-6 text-slate-400"})})]})})]}),(v.critical_open>0||v.high_open>0)&&n.jsxs(le,{className:"p-6",children:[n.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Critical Issues Requiring Attention"}),n.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[n.jsxs("div",{className:"bg-red-500/10 border border-red-500/20 p-4 rounded-lg",children:[n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsx("span",{className:"text-sm text-slate-400",children:"Critical"}),n.jsx(Tt,{className:"h-4 w-4 text-red-500"})]}),n.jsx("p",{className:"text-2xl font-bold text-red-500",children:v.critical_open})]}),n.jsxs("div",{className:"bg-orange-500/10 border border-orange-500/20 p-4 rounded-lg",children:[n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsx("span",{className:"text-sm text-slate-400",children:"High"}),n.jsx(Ne,{className:"h-4 w-4 text-orange-500"})]}),n.jsx("p",{className:"text-2xl font-bold text-orange-500",children:v.high_open})]}),n.jsxs("div",{className:"bg-slate-700/50 p-4 rounded-lg",children:[n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsx("span",{className:"text-sm text-slate-400",children:"Total Found"}),n.jsx(Ln,{className:"h-4 w-4 text-slate-400"})]}),n.jsx("p",{className:"text-2xl font-bold text-white",children:v.total_found})]}),n.jsxs("div",{className:"bg-green-500/10 border border-green-500/20 p-4 rounded-lg",children:[n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsx("span",{className:"text-sm text-slate-400",children:"Resolved"}),n.jsx(Ye,{className:"h-4 w-4 text-green-500"})]}),n.jsx("p",{className:"text-2xl font-bold text-green-500",children:v.total_resolved})]})]})]}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[n.jsxs(le,{className:"p-6",children:[n.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Vulnerabilities Over Time"}),j.length>0?n.jsx(Be,{width:"100%",height:300,children:n.jsxs(Ls,{data:j,children:[n.jsx(Et,{strokeDasharray:"3 3",stroke:"#334155"}),n.jsx(mt,{dataKey:"date",tickFormatter:u,stroke:"#94a3b8",style:{fontSize:"12px"}}),n.jsx(lt,{stroke:"#94a3b8",style:{fontSize:"12px"}}),n.jsx(Ve,{contentStyle:{backgroundColor:"#1e293b",border:"1px solid #334155",borderRadius:"8px",color:"#fff"},labelFormatter:u}),n.jsx(Ps,{verticalAlign:"bottom",height:36,iconType:"circle",wrapperStyle:{fontSize:"12px",color:"#cbd5e1"}}),n.jsx(nr,{type:"monotone",dataKey:"open",stroke:"#f97316",strokeWidth:2,dot:{fill:"#f97316",r:3},activeDot:{r:5},name:"Open"}),n.jsx(nr,{type:"monotone",dataKey:"new",stroke:"#ef4444",strokeWidth:2,dot:{fill:"#ef4444",r:3},activeDot:{r:5},name:"New"}),n.jsx(nr,{type:"monotone",dataKey:"resolved",stroke:"#22c55e",strokeWidth:2,dot:{fill:"#22c55e",r:3},activeDot:{r:5},name:"Resolved"})]})}):n.jsx("div",{className:"flex items-center justify-center h-64 text-slate-400",children:n.jsx("p",{children:"No data available"})})]}),n.jsxs(le,{className:"p-6",children:[n.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Severity Distribution Over Time"}),_.length>0?n.jsx(Be,{width:"100%",height:300,children:n.jsxs(Cc,{data:_,children:[n.jsx(Et,{strokeDasharray:"3 3",stroke:"#334155"}),n.jsx(mt,{dataKey:"date",tickFormatter:u,stroke:"#94a3b8",style:{fontSize:"12px"}}),n.jsx(lt,{stroke:"#94a3b8",style:{fontSize:"12px"}}),n.jsx(Ve,{contentStyle:{backgroundColor:"#1e293b",border:"1px solid #334155",borderRadius:"8px",color:"#fff"},labelFormatter:u}),n.jsx(Ps,{verticalAlign:"bottom",height:36,iconType:"circle",wrapperStyle:{fontSize:"12px",color:"#cbd5e1"}}),n.jsx(ir,{type:"monotone",dataKey:"critical",stackId:"1",stroke:ht.critical,fill:ht.critical,fillOpacity:.6,name:"Critical"}),n.jsx(ir,{type:"monotone",dataKey:"high",stackId:"1",stroke:ht.high,fill:ht.high,fillOpacity:.6,name:"High"}),n.jsx(ir,{type:"monotone",dataKey:"medium",stackId:"1",stroke:ht.medium,fill:ht.medium,fillOpacity:.6,name:"Medium"}),n.jsx(ir,{type:"monotone",dataKey:"low",stackId:"1",stroke:ht.low,fill:ht.low,fillOpacity:.6,name:"Low"})]})}):n.jsx("div",{className:"flex items-center justify-center h-64 text-slate-400",children:n.jsx("p",{children:"No data available"})})]}),n.jsxs(le,{className:"p-6",children:[n.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Remediation Rate Over Time"}),b.length>0?n.jsx(Be,{width:"100%",height:300,children:n.jsxs(Ls,{data:b,children:[n.jsx(Et,{strokeDasharray:"3 3",stroke:"#334155"}),n.jsx(mt,{dataKey:"date",tickFormatter:u,stroke:"#94a3b8",style:{fontSize:"12px"}}),n.jsx(lt,{yAxisId:"left",stroke:"#94a3b8",style:{fontSize:"12px"},domain:[0,100],tickFormatter:y=>`${y}%`}),n.jsx(lt,{yAxisId:"right",orientation:"right",stroke:"#94a3b8",style:{fontSize:"12px"},tickFormatter:y=>`${y}d`}),n.jsx(Ve,{contentStyle:{backgroundColor:"#1e293b",border:"1px solid #334155",borderRadius:"8px",color:"#fff"},labelFormatter:u,formatter:(y,x)=>x==="Remediation Rate"?[`${y.toFixed(1)}%`,x]:x==="MTTR (days)"?[`${y.toFixed(1)} days`,x]:[y,x]}),n.jsx(Ps,{verticalAlign:"bottom",height:36,iconType:"circle",wrapperStyle:{fontSize:"12px",color:"#cbd5e1"}}),n.jsx(nr,{yAxisId:"left",type:"monotone",dataKey:"remediation_rate",stroke:"#22c55e",strokeWidth:2,dot:{fill:"#22c55e",r:3},activeDot:{r:5},name:"Remediation Rate"}),n.jsx(nr,{yAxisId:"right",type:"monotone",dataKey:"mttr_days",stroke:"#06b6d4",strokeWidth:2,dot:{fill:"#06b6d4",r:3},activeDot:{r:5},name:"MTTR (days)"})]})}):n.jsx("div",{className:"flex items-center justify-center h-64 text-slate-400",children:n.jsx("p",{children:"No data available"})})]}),n.jsxs(le,{className:"p-6",children:[n.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Top Recurring Vulnerabilities"}),p.length>0?n.jsx(Be,{width:"100%",height:300,children:n.jsxs(ia,{data:p,layout:"vertical",children:[n.jsx(Et,{strokeDasharray:"3 3",stroke:"#334155"}),n.jsx(mt,{type:"number",stroke:"#94a3b8",style:{fontSize:"12px"}}),n.jsx(lt,{dataKey:"title",type:"category",stroke:"#94a3b8",style:{fontSize:"11px"},width:140,tickFormatter:y=>y.length>20?`${y.substring(0,20)}...`:y}),n.jsx(Ve,{contentStyle:{backgroundColor:"#1e293b",border:"1px solid #334155",borderRadius:"8px",color:"#fff"},content:({active:y,payload:x})=>{if(!y||!x||!x[0])return null;const w=x[0].payload;return n.jsxs("div",{className:"bg-slate-800 border border-slate-700 rounded-lg p-3 text-white text-sm",children:[n.jsx("div",{className:"font-medium mb-2",children:w.title}),n.jsxs("div",{className:"space-y-1 text-slate-300",children:[n.jsxs("div",{children:["Occurrences: ",w.count]}),n.jsxs("div",{children:["Severity: ",w.severity]}),n.jsxs("div",{children:["Affected Hosts: ",w.affected_hosts]}),w.avg_resolution_days!==null&&n.jsxs("div",{children:["Avg Resolution: ",w.avg_resolution_days.toFixed(1)," days"]})]})]})}}),n.jsx(oa,{dataKey:"count",fill:"#06b6d4",radius:[0,4,4,0],name:"Occurrences"})]})}):n.jsx("div",{className:"flex items-center justify-center h-64 text-slate-400",children:n.jsx("p",{children:"No recurring vulnerabilities found"})})]})]}),m.length>0&&n.jsxs(le,{className:"p-6",children:[n.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Current Open Vulnerabilities by Severity"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsx(Be,{width:"100%",height:250,children:n.jsxs(_i,{children:[n.jsx(Ni,{data:m,cx:"50%",cy:"50%",innerRadius:60,outerRadius:100,paddingAngle:2,dataKey:"value",nameKey:"name",label:({name:y,percent:x})=>`${y} ${(x*100).toFixed(0)}%`,labelLine:!1,children:m.map((y,x)=>n.jsx(Gs,{fill:y.color},`cell-${x}`))}),n.jsx(Ve,{contentStyle:{backgroundColor:"#1e293b",border:"1px solid #334155",borderRadius:"8px",color:"#fff"}})]})}),n.jsxs("div",{className:"flex flex-col justify-center space-y-4",children:[m.map(y=>n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"w-4 h-4 rounded",style:{backgroundColor:y.color}}),n.jsx("span",{className:"text-slate-300",children:y.name})]}),n.jsx("span",{className:"text-white font-semibold",children:y.value})]},y.name)),n.jsx("div",{className:"border-t border-slate-700 pt-4 mt-4",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("span",{className:"text-slate-300 font-medium",children:"Total Open"}),n.jsx("span",{className:"text-white font-bold text-lg",children:v.current_open})]})})]})]})]}),p.length>0&&n.jsxs(le,{className:"p-6",children:[n.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Recurring Vulnerability Details"}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full",children:[n.jsx("thead",{children:n.jsxs("tr",{className:"border-b border-slate-700",children:[n.jsx("th",{className:"text-left py-3 px-4 text-slate-400 font-medium",children:"Vulnerability"}),n.jsx("th",{className:"text-left py-3 px-4 text-slate-400 font-medium",children:"Severity"}),n.jsx("th",{className:"text-center py-3 px-4 text-slate-400 font-medium",children:"Occurrences"}),n.jsx("th",{className:"text-center py-3 px-4 text-slate-400 font-medium",children:"Affected Hosts"}),n.jsx("th",{className:"text-center py-3 px-4 text-slate-400 font-medium",children:"Avg. Resolution"})]})}),n.jsx("tbody",{children:p.map((y,x)=>n.jsxs("tr",{className:"border-b border-slate-700/50 hover:bg-slate-800/50",children:[n.jsxs("td",{className:"py-3 px-4",children:[n.jsx("span",{className:"text-white font-medium",children:y.title}),n.jsx("p",{className:"text-xs text-slate-500 mt-1",children:y.vulnerability_id})]}),n.jsx("td",{className:"py-3 px-4",children:n.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded text-xs font-medium ${y.severity==="critical"?"bg-red-500/20 text-red-400":y.severity==="high"?"bg-orange-500/20 text-orange-400":y.severity==="medium"?"bg-yellow-500/20 text-yellow-400":"bg-blue-500/20 text-blue-400"}`,children:y.severity})}),n.jsx("td",{className:"py-3 px-4 text-center text-white",children:y.count}),n.jsx("td",{className:"py-3 px-4 text-center text-white",children:y.affected_hosts}),n.jsx("td",{className:"py-3 px-4 text-center text-white",children:y.avg_resolution_days!==null?`${y.avg_resolution_days.toFixed(1)} days`:"-"})]},x))})]})})]})]})},jn=({title:e,value:r,subtitle:s,icon:a,color:i,trend:o})=>n.jsx(le,{className:"p-6",children:n.jsxs("div",{className:"flex items-start justify-between",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"text-slate-400 text-sm font-medium mb-1",children:e}),n.jsx("p",{className:`text-3xl font-bold ${i} mb-1`,children:r}),s&&n.jsx("p",{className:"text-slate-500 text-xs",children:s}),o&&n.jsxs("div",{className:`flex items-center gap-1 mt-2 text-xs ${o.isPositive?"text-green-400":"text-red-400"}`,children:[n.jsx(Vr,{className:`h-3 w-3 ${!o.isPositive&&"rotate-180"}`}),n.jsxs("span",{children:[o.isPositive?"+":"",o.value,"%"]})]})]}),n.jsx("div",{className:`${i.replace("text-","bg-")}/20 p-3 rounded-lg`,children:a})]})}),k_=()=>{const[e,r]=E.useState("overview"),[s,a]=E.useState(30),[i,o]=E.useState(!0),[l,c]=E.useState(null),[d,u]=E.useState(null),[f,h]=E.useState([]),[g,v]=E.useState([]),[j,_]=E.useState([]),[b,p]=E.useState([]);E.useEffect(()=>{e==="overview"&&m()},[s,e]);const m=async()=>{var w,S;o(!0),c(null);try{const[k,C,R,O,P]=await Promise.all([Rr.getSummary(s),Rr.getHosts(s),Rr.getVulnerabilities(s),Rr.getServices(10),Rr.getFrequency(s)]);u(k.data),h(C.data),v(R.data),_(O.data),p(P.data)}catch(k){const C=k;console.error("Failed to load analytics:",k),c(((S=(w=C.response)==null?void 0:w.data)==null?void 0:S.message)||"Failed to load analytics data")}finally{o(!1)}},y=w=>new Date(w).toLocaleDateString("en-US",{month:"short",day:"numeric"}),x=()=>n.jsxs("div",{className:"flex gap-2 border-b border-slate-700 pb-2 mb-6",children:[n.jsxs("button",{onClick:()=>r("overview"),className:`flex items-center gap-2 px-4 py-2 rounded-t-lg text-sm font-medium transition-colors ${e==="overview"?"bg-slate-800 text-cyan-400 border-b-2 border-cyan-400":"text-slate-400 hover:text-white hover:bg-slate-800/50"}`,children:[n.jsx(Lr,{className:"h-4 w-4"}),"Overview"]}),n.jsxs("button",{onClick:()=>r("vulnerability-trends"),className:`flex items-center gap-2 px-4 py-2 rounded-t-lg text-sm font-medium transition-colors ${e==="vulnerability-trends"?"bg-slate-800 text-cyan-400 border-b-2 border-cyan-400":"text-slate-400 hover:text-white hover:bg-slate-800/50"}`,children:[n.jsx(Ln,{className:"h-4 w-4"}),"Vulnerability Trends"]})]});return e==="vulnerability-trends"?n.jsxs("div",{className:"space-y-6",children:[n.jsx(x,{}),n.jsx(S_,{})]}):i?n.jsxs("div",{className:"space-y-6",children:[n.jsx(x,{}),n.jsx("div",{className:"flex items-center justify-center h-96",children:n.jsx(At,{size:"lg"})})]}):l?n.jsxs("div",{className:"space-y-6",children:[n.jsx(x,{}),n.jsx(le,{className:"p-6",children:n.jsxs("div",{className:"text-center",children:[n.jsx(Ne,{className:"h-12 w-12 text-yellow-400 mx-auto mb-4"}),n.jsx("h3",{className:"text-lg font-semibold text-white mb-2",children:"Failed to Load Analytics"}),n.jsx("p",{className:"text-slate-400 mb-4",children:l}),n.jsx("button",{onClick:m,className:"px-4 py-2 bg-cyan-600 text-white rounded-lg hover:bg-cyan-500 transition-colors",children:"Retry"})]})})]}):d?n.jsxs("div",{className:"space-y-6",children:[n.jsx(x,{}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h2",{className:"text-2xl font-bold text-white mb-1",children:"Analytics Dashboard"}),n.jsx("p",{className:"text-slate-400",children:"Insights and trends from your security scans"})]}),n.jsxs("div",{className:"flex items-center gap-2 bg-dark-surface border border-dark-border rounded-lg p-1",children:[n.jsxs("button",{onClick:()=>a(7),className:`flex items-center gap-2 px-3 py-2 rounded transition-colors ${s===7?"bg-primary text-white":"text-slate-400 hover:text-white"}`,children:[n.jsx($r,{className:"h-4 w-4"}),"7 Days"]}),n.jsxs("button",{onClick:()=>a(30),className:`flex items-center gap-2 px-3 py-2 rounded transition-colors ${s===30?"bg-primary text-white":"text-slate-400 hover:text-white"}`,children:[n.jsx($r,{className:"h-4 w-4"}),"30 Days"]}),n.jsxs("button",{onClick:()=>a(90),className:`flex items-center gap-2 px-3 py-2 rounded transition-colors ${s===90?"bg-primary text-white":"text-slate-400 hover:text-white"}`,children:[n.jsx($r,{className:"h-4 w-4"}),"90 Days"]})]})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[n.jsx(jn,{title:"Total Scans",value:d.total_scans,subtitle:`${d.scans_this_week} this week`,icon:n.jsx(xt,{className:"h-6 w-6 text-primary"}),color:"text-primary"}),n.jsx(jn,{title:"Hosts Discovered",value:d.total_hosts,subtitle:`${d.total_ports} open ports`,icon:n.jsx(jt,{className:"h-6 w-6 text-blue-400"}),color:"text-blue-400"}),n.jsx(jn,{title:"Total Vulnerabilities",value:d.total_vulnerabilities,subtitle:`${d.critical_vulns} critical`,icon:n.jsx(Ne,{className:"h-6 w-6 text-yellow-400"}),color:"text-yellow-400"}),n.jsx(jn,{title:"Critical Findings",value:d.critical_vulns,subtitle:"Requires immediate attention",icon:n.jsx(we,{className:"h-6 w-6 text-severity-critical"}),color:"text-severity-critical"})]}),n.jsxs(le,{className:"p-6",children:[n.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Vulnerability Severity Breakdown"}),n.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[n.jsxs("div",{className:"bg-dark-bg p-4 rounded-lg border border-dark-border",children:[n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsx("span",{className:"text-sm text-slate-400",children:"Critical"}),n.jsx(we,{className:"h-4 w-4 text-severity-critical"})]}),n.jsx("p",{className:"text-2xl font-bold text-severity-critical",children:d.critical_vulns})]}),n.jsxs("div",{className:"bg-dark-bg p-4 rounded-lg border border-dark-border",children:[n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsx("span",{className:"text-sm text-slate-400",children:"High"}),n.jsx(we,{className:"h-4 w-4 text-severity-high"})]}),n.jsx("p",{className:"text-2xl font-bold text-severity-high",children:d.high_vulns})]}),n.jsxs("div",{className:"bg-dark-bg p-4 rounded-lg border border-dark-border",children:[n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsx("span",{className:"text-sm text-slate-400",children:"Medium"}),n.jsx(we,{className:"h-4 w-4 text-severity-medium"})]}),n.jsx("p",{className:"text-2xl font-bold text-severity-medium",children:d.medium_vulns})]}),n.jsxs("div",{className:"bg-dark-bg p-4 rounded-lg border border-dark-border",children:[n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsx("span",{className:"text-sm text-slate-400",children:"Low"}),n.jsx(we,{className:"h-4 w-4 text-severity-low"})]}),n.jsx("p",{className:"text-2xl font-bold text-severity-low",children:d.low_vulns})]})]})]}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[n.jsxs(le,{className:"p-6",children:[n.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Hosts Discovered Over Time"}),f.length>0?n.jsx(Be,{width:"100%",height:300,children:n.jsxs(Ls,{data:f,children:[n.jsx(Et,{strokeDasharray:"3 3",stroke:"#334155"}),n.jsx(mt,{dataKey:"date",tickFormatter:y,stroke:"#94a3b8",style:{fontSize:"12px"}}),n.jsx(lt,{stroke:"#94a3b8",style:{fontSize:"12px"}}),n.jsx(Ve,{contentStyle:{backgroundColor:"#1e293b",border:"1px solid #334155",borderRadius:"8px",color:"#fff"},labelFormatter:y}),n.jsx(nr,{type:"monotone",dataKey:"value",stroke:"#3b82f6",strokeWidth:2,dot:{fill:"#3b82f6",r:4},activeDot:{r:6},name:"Hosts"})]})}):n.jsx("div",{className:"flex items-center justify-center h-64 text-slate-400",children:n.jsx("p",{children:"No data available"})})]}),n.jsxs(le,{className:"p-6",children:[n.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Scan Frequency"}),b.length>0?n.jsx(Be,{width:"100%",height:300,children:n.jsxs(Ls,{data:b,children:[n.jsx(Et,{strokeDasharray:"3 3",stroke:"#334155"}),n.jsx(mt,{dataKey:"date",tickFormatter:y,stroke:"#94a3b8",style:{fontSize:"12px"}}),n.jsx(lt,{stroke:"#94a3b8",style:{fontSize:"12px"}}),n.jsx(Ve,{contentStyle:{backgroundColor:"#1e293b",border:"1px solid #334155",borderRadius:"8px",color:"#fff"},labelFormatter:y}),n.jsx(nr,{type:"monotone",dataKey:"value",stroke:"#8b5cf6",strokeWidth:2,dot:{fill:"#8b5cf6",r:4},activeDot:{r:6},name:"Scans"})]})}):n.jsx("div",{className:"flex items-center justify-center h-64 text-slate-400",children:n.jsx("p",{children:"No data available"})})]}),n.jsxs(le,{className:"p-6",children:[n.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Vulnerability Trends by Severity"}),g.length>0?n.jsx(Be,{width:"100%",height:300,children:n.jsxs(Cc,{data:g,children:[n.jsx(Et,{strokeDasharray:"3 3",stroke:"#334155"}),n.jsx(mt,{dataKey:"date",tickFormatter:y,stroke:"#94a3b8",style:{fontSize:"12px"}}),n.jsx(lt,{stroke:"#94a3b8",style:{fontSize:"12px"}}),n.jsx(Ve,{contentStyle:{backgroundColor:"#1e293b",border:"1px solid #334155",borderRadius:"8px",color:"#fff"},labelFormatter:y}),n.jsx(Ps,{verticalAlign:"bottom",height:36,iconType:"circle",wrapperStyle:{fontSize:"12px",color:"#cbd5e1"}}),n.jsx(ir,{type:"monotone",dataKey:"critical",stackId:"1",stroke:"#ef4444",fill:"#ef4444",fillOpacity:.6,name:"Critical"}),n.jsx(ir,{type:"monotone",dataKey:"high",stackId:"1",stroke:"#f97316",fill:"#f97316",fillOpacity:.6,name:"High"}),n.jsx(ir,{type:"monotone",dataKey:"medium",stackId:"1",stroke:"#eab308",fill:"#eab308",fillOpacity:.6,name:"Medium"}),n.jsx(ir,{type:"monotone",dataKey:"low",stackId:"1",stroke:"#3b82f6",fill:"#3b82f6",fillOpacity:.6,name:"Low"})]})}):n.jsx("div",{className:"flex items-center justify-center h-64 text-slate-400",children:n.jsx("p",{children:"No data available"})})]}),n.jsxs(le,{className:"p-6",children:[n.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Top Services Discovered"}),j.length>0?n.jsx(Be,{width:"100%",height:300,children:n.jsxs(ia,{data:j,layout:"vertical",children:[n.jsx(Et,{strokeDasharray:"3 3",stroke:"#334155"}),n.jsx(mt,{type:"number",stroke:"#94a3b8",style:{fontSize:"12px"}}),n.jsx(lt,{dataKey:"service",type:"category",stroke:"#94a3b8",style:{fontSize:"12px"},width:100}),n.jsx(Ve,{contentStyle:{backgroundColor:"#1e293b",border:"1px solid #334155",borderRadius:"8px",color:"#fff"}}),n.jsx(oa,{dataKey:"count",fill:"#06b6d4",radius:[0,4,4,0],name:"Count"})]})}):n.jsx("div",{className:"flex items-center justify-center h-64 text-slate-400",children:n.jsx("p",{children:"No data available"})})]})]})]}):n.jsxs("div",{className:"space-y-6",children:[n.jsx(x,{}),n.jsx("div",{className:"flex items-center justify-center h-96 text-slate-400",children:"No data available"})]})};var Ha={exports:{}},hs={},Ss={exports:{}},C_=Ss.exports,El;function Gi(){return El||(El=1,(function(e,r){(function(s,a){a(r)})(C_,(function(s){function a(J){return function(ee,se,te,ye,Pe,ze,z){return J(ee,se,z)}}function i(J){return function(ee,se,te,ye){if(!ee||!se||typeof ee!="object"||typeof se!="object")return J(ee,se,te,ye);var Pe=ye.get(ee),ze=ye.get(se);if(Pe&&ze)return Pe===se&&ze===ee;ye.set(ee,se),ye.set(se,ee);var z=J(ee,se,te,ye);return ye.delete(ee),ye.delete(se),z}}function o(J,B){var ee={};for(var se in J)ee[se]=J[se];for(var se in B)ee[se]=B[se];return ee}function l(J){return J.constructor===Object||J.constructor==null}function c(J){return typeof J.then=="function"}function d(J,B){return J===B||J!==J&&B!==B}var u="[object Arguments]",f="[object Boolean]",h="[object Date]",g="[object RegExp]",v="[object Map]",j="[object Number]",_="[object Object]",b="[object Set]",p="[object String]",m=Object.prototype.toString;function y(J){var B=J.areArraysEqual,ee=J.areDatesEqual,se=J.areMapsEqual,te=J.areObjectsEqual,ye=J.areRegExpsEqual,Pe=J.areSetsEqual,ze=J.createIsNestedEqual,z=ze(F);function F(H,V,re){if(H===V)return!0;if(!H||!V||typeof H!="object"||typeof V!="object")return H!==H&&V!==V;if(l(H)&&l(V))return te(H,V,z,re);var ie=Array.isArray(H),ce=Array.isArray(V);if(ie||ce)return ie===ce&&B(H,V,z,re);var pe=m.call(H);return pe!==m.call(V)?!1:pe===h?ee(H,V,z,re):pe===g?ye(H,V,z,re):pe===v?se(H,V,z,re):pe===b?Pe(H,V,z,re):pe===_||pe===u?c(H)||c(V)?!1:te(H,V,z,re):pe===f||pe===j||pe===p?d(H.valueOf(),V.valueOf()):!1}return F}function x(J,B,ee,se){var te=J.length;if(B.length!==te)return!1;for(;te-- >0;)if(!ee(J[te],B[te],te,te,J,B,se))return!1;return!0}var w=i(x);function S(J,B){return d(J.valueOf(),B.valueOf())}function k(J,B,ee,se){var te=J.size===B.size;if(!te)return!1;if(!J.size)return!0;var ye={},Pe=0;return J.forEach(function(ze,z){if(te){var F=!1,H=0;B.forEach(function(V,re){!F&&!ye[H]&&(F=ee(z,re,Pe,H,J,B,se)&&ee(ze,V,z,re,J,B,se))&&(ye[H]=!0),H++}),Pe++,te=F}}),te}var C=i(k),R="_owner",O=Object.prototype.hasOwnProperty;function P(J,B,ee,se){var te=Object.keys(J),ye=te.length;if(Object.keys(B).length!==ye)return!1;for(var Pe;ye-- >0;){if(Pe=te[ye],Pe===R){var ze=!!J.$$typeof,z=!!B.$$typeof;if((ze||z)&&ze!==z)return!1}if(!O.call(B,Pe)||!ee(J[Pe],B[Pe],Pe,Pe,J,B,se))return!1}return!0}var T=i(P);function M(J,B){return J.source===B.source&&J.flags===B.flags}function A(J,B,ee,se){var te=J.size===B.size;if(!te)return!1;if(!J.size)return!0;var ye={};return J.forEach(function(Pe,ze){if(te){var z=!1,F=0;B.forEach(function(H,V){!z&&!ye[F]&&(z=ee(Pe,H,ze,V,J,B,se))&&(ye[F]=!0),F++}),te=z}}),te}var $=i(A),D=Object.freeze({areArraysEqual:x,areDatesEqual:S,areMapsEqual:k,areObjectsEqual:P,areRegExpsEqual:M,areSetsEqual:A,createIsNestedEqual:a}),U=Object.freeze({areArraysEqual:w,areDatesEqual:S,areMapsEqual:C,areObjectsEqual:T,areRegExpsEqual:M,areSetsEqual:$,createIsNestedEqual:a}),G=y(D);function q(J,B){return G(J,B,void 0)}var Y=y(o(D,{createIsNestedEqual:function(){return d}}));function Z(J,B){return Y(J,B,void 0)}var K=y(U);function ue(J,B){return K(J,B,new WeakMap)}var he=y(o(U,{createIsNestedEqual:function(){return d}}));function xe(J,B){return he(J,B,new WeakMap)}function ge(J){return y(o(D,J(D)))}function be(J){var B=y(o(U,J(U)));return(function(ee,se,te){return te===void 0&&(te=new WeakMap),B(ee,se,te)})}s.circularDeepEqual=ue,s.circularShallowEqual=xe,s.createCustomCircularEqual=be,s.createCustomEqual=ge,s.deepEqual=q,s.sameValueZeroEqual=d,s.shallowEqual=Z,Object.defineProperty(s,"__esModule",{value:!0})}))})(Ss,Ss.exports)),Ss.exports}var _n={exports:{}},Rl;function wa(){if(Rl)return _n.exports;Rl=1;function e(s){var a,i,o="";if(typeof s=="string"||typeof s=="number")o+=s;else if(typeof s=="object")if(Array.isArray(s)){var l=s.length;for(a=0;a<l;a++)s[a]&&(i=e(s[a]))&&(o&&(o+=" "),o+=i)}else for(i in s)s[i]&&(o&&(o+=" "),o+=i);return o}function r(){for(var s,a,i=0,o="",l=arguments.length;i<l;i++)(s=arguments[i])&&(a=e(s))&&(o&&(o+=" "),o+=a);return o}return _n.exports=r,_n.exports.clsx=r,_n.exports}var ve={},Ua,Ol;function P_(){return Ol||(Ol=1,Ua=function(r,s,a){return r===s?!0:r.className===s.className&&a(r.style,s.style)&&r.width===s.width&&r.autoSize===s.autoSize&&r.cols===s.cols&&r.draggableCancel===s.draggableCancel&&r.draggableHandle===s.draggableHandle&&a(r.verticalCompact,s.verticalCompact)&&a(r.compactType,s.compactType)&&a(r.layout,s.layout)&&a(r.margin,s.margin)&&a(r.containerPadding,s.containerPadding)&&r.rowHeight===s.rowHeight&&r.maxRows===s.maxRows&&r.isBounded===s.isBounded&&r.isDraggable===s.isDraggable&&r.isResizable===s.isResizable&&r.allowOverlap===s.allowOverlap&&r.preventCollision===s.preventCollision&&r.useCSSTransforms===s.useCSSTransforms&&r.transformScale===s.transformScale&&r.isDroppable===s.isDroppable&&a(r.resizeHandles,s.resizeHandles)&&a(r.resizeHandle,s.resizeHandle)&&r.onLayoutChange===s.onLayoutChange&&r.onDragStart===s.onDragStart&&r.onDrag===s.onDrag&&r.onDragStop===s.onDragStop&&r.onResizeStart===s.onResizeStart&&r.onResize===s.onResize&&r.onResizeStop===s.onResizeStop&&r.onDrop===s.onDrop&&a(r.droppingItem,s.droppingItem)&&a(r.innerRef,s.innerRef)}),Ua}var Al;function Xr(){if(Al)return ve;Al=1,Object.defineProperty(ve,"__esModule",{value:!0}),ve.bottom=d,ve.childrenEqual=v,ve.cloneLayout=u,ve.cloneLayoutItem=g,ve.collides=_,ve.compact=b,ve.compactItem=y,ve.compactType=ye,ve.correctBounds=x,ve.fastPositionEqual=j,ve.fastRGLPropsEqual=void 0,ve.getAllCollisions=k,ve.getFirstCollision=S,ve.getLayoutItem=w,ve.getStatics=C,ve.modifyLayout=f,ve.moveElement=R,ve.moveElementAwayFromCollision=O,ve.noop=void 0,ve.perc=P,ve.resizeItemInDirection=xe,ve.setTopLeft=be,ve.setTransform=ge,ve.sortLayoutItems=J,ve.sortLayoutItemsByColRow=ee,ve.sortLayoutItemsByRowCol=B,ve.synchronizeLayoutWithChildren=se,ve.validateLayout=te,ve.withLayoutItem=h;var e=Gi(),r=s(wt());function s(z){return z&&z.__esModule?z:{default:z}}function a(z,F){var H=Object.keys(z);if(Object.getOwnPropertySymbols){var V=Object.getOwnPropertySymbols(z);F&&(V=V.filter(function(re){return Object.getOwnPropertyDescriptor(z,re).enumerable})),H.push.apply(H,V)}return H}function i(z){for(var F=1;F<arguments.length;F++){var H=arguments[F]!=null?arguments[F]:{};F%2?a(Object(H),!0).forEach(function(V){o(z,V,H[V])}):Object.getOwnPropertyDescriptors?Object.defineProperties(z,Object.getOwnPropertyDescriptors(H)):a(Object(H)).forEach(function(V){Object.defineProperty(z,V,Object.getOwnPropertyDescriptor(H,V))})}return z}function o(z,F,H){return(F=l(F))in z?Object.defineProperty(z,F,{value:H,enumerable:!0,configurable:!0,writable:!0}):z[F]=H,z}function l(z){var F=c(z,"string");return typeof F=="symbol"?F:F+""}function c(z,F){if(typeof z!="object"||!z)return z;var H=z[Symbol.toPrimitive];if(H!==void 0){var V=H.call(z,F);if(typeof V!="object")return V;throw new TypeError("@@toPrimitive must return a primitive value.")}return(F==="string"?String:Number)(z)}function d(z){let F=0,H;for(let V=0,re=z.length;V<re;V++)H=z[V].y+z[V].h,H>F&&(F=H);return F}function u(z){const F=Array(z.length);for(let H=0,V=z.length;H<V;H++)F[H]=g(z[H]);return F}function f(z,F){const H=Array(z.length);for(let V=0,re=z.length;V<re;V++)F.i===z[V].i?H[V]=F:H[V]=z[V];return H}function h(z,F,H){let V=w(z,F);return V?(V=H(g(V)),z=f(z,V),[z,V]):[z,null]}function g(z){return{w:z.w,h:z.h,x:z.x,y:z.y,i:z.i,minW:z.minW,maxW:z.maxW,minH:z.minH,maxH:z.maxH,moved:!!z.moved,static:!!z.static,isDraggable:z.isDraggable,isResizable:z.isResizable,resizeHandles:z.resizeHandles,isBounded:z.isBounded}}function v(z,F){return(0,e.deepEqual)(r.default.Children.map(z,H=>H==null?void 0:H.key),r.default.Children.map(F,H=>H==null?void 0:H.key))&&(0,e.deepEqual)(r.default.Children.map(z,H=>H==null?void 0:H.props["data-grid"]),r.default.Children.map(F,H=>H==null?void 0:H.props["data-grid"]))}ve.fastRGLPropsEqual=P_();function j(z,F){return z.left===F.left&&z.top===F.top&&z.width===F.width&&z.height===F.height}function _(z,F){return!(z.i===F.i||z.x+z.w<=F.x||z.x>=F.x+F.w||z.y+z.h<=F.y||z.y>=F.y+F.h)}function b(z,F,H,V){const re=C(z);let ie=d(re);const ce=J(z,F),pe=Array(z.length);for(let Ce=0,Me=ce.length;Ce<Me;Ce++){let Fe=g(ce[Ce]);Fe.static||(Fe=y(re,Fe,F,H,ce,V,ie),ie=Math.max(ie,Fe.y+Fe.h),re.push(Fe)),pe[z.indexOf(ce[Ce])]=Fe,Fe.moved=!1}return pe}const p={x:"w",y:"h"};function m(z,F,H,V){const re=p[V];F[V]+=1;const ie=z.map(ce=>ce.i).indexOf(F.i);for(let ce=ie+1;ce<z.length;ce++){const pe=z[ce];if(!pe.static){if(pe.y>F.y+F.h)break;_(F,pe)&&m(z,pe,H+F[re],V)}}F[V]=H}function y(z,F,H,V,re,ie,ce){const pe=H==="vertical",Ce=H==="horizontal";if(pe)for(typeof ce=="number"?F.y=Math.min(ce,F.y):F.y=Math.min(d(z),F.y);F.y>0&&!S(z,F);)F.y--;else if(Ce)for(;F.x>0&&!S(z,F);)F.x--;let Me;for(;(Me=S(z,F))&&!(H===null&&ie);)if(Ce?m(re,F,Me.x+Me.w,"x"):m(re,F,Me.y+Me.h,"y"),Ce&&F.x+F.w>V)for(F.x=V-F.w,F.y++;F.x>0&&!S(z,F);)F.x--;return F.y=Math.max(F.y,0),F.x=Math.max(F.x,0),F}function x(z,F){const H=C(z);for(let V=0,re=z.length;V<re;V++){const ie=z[V];if(ie.x+ie.w>F.cols&&(ie.x=F.cols-ie.w),ie.x<0&&(ie.x=0,ie.w=F.cols),!ie.static)H.push(ie);else for(;S(H,ie);)ie.y++}return z}function w(z,F){for(let H=0,V=z.length;H<V;H++)if(z[H].i===F)return z[H]}function S(z,F){for(let H=0,V=z.length;H<V;H++)if(_(z[H],F))return z[H]}function k(z,F){return z.filter(H=>_(H,F))}function C(z){return z.filter(F=>F.static)}function R(z,F,H,V,re,ie,ce,pe,Ce){if(F.static&&F.isDraggable!==!0||F.y===V&&F.x===H)return z;"Moving element ".concat(F.i," to [").concat(String(H),",").concat(String(V),"] from [").concat(F.x,",").concat(F.y,"]");const Me=F.x,Fe=F.y;typeof H=="number"&&(F.x=H),typeof V=="number"&&(F.y=V),F.moved=!0;let We=J(z,ce);(ce==="vertical"&&typeof V=="number"?Fe>=V:ce==="horizontal"&&typeof H=="number"?Me>=H:!1)&&(We=We.reverse());const at=k(We,F),hr=at.length>0;if(hr&&Ce)return u(z);if(hr&&ie)return"Collision prevented on ".concat(F.i,", reverting."),F.x=Me,F.y=Fe,F.moved=!1,z;for(let Nr=0,Na=at.length;Nr<Na;Nr++){const Ke=at[Nr];"Resolving collision between ".concat(F.i," at [").concat(F.x,",").concat(F.y,"] and ").concat(Ke.i," at [").concat(Ke.x,",").concat(Ke.y,"]"),!Ke.moved&&(Ke.static?z=O(z,Ke,F,re,ce):z=O(z,F,Ke,re,ce))}return z}function O(z,F,H,V,re,ie){const ce=re==="horizontal",pe=re==="vertical",Ce=F.static;if(V){V=!1;const We={x:ce?Math.max(F.x-H.w,0):H.x,y:pe?Math.max(F.y-H.h,0):H.y,w:H.w,h:H.h,i:"-1"},Mt=S(z,We),at=Mt&&Mt.y+Mt.h>F.y,hr=Mt&&F.x+F.w>Mt.x;if(Mt){if(at&&pe)return R(z,H,void 0,H.y+1,V,Ce,re);if(at&&re==null)return F.y=H.y,H.y=H.y+H.h,z;if(hr&&ce)return R(z,F,H.x,void 0,V,Ce,re)}else return"Doing reverse collision on ".concat(H.i," up to [").concat(We.x,",").concat(We.y,"]."),R(z,H,ce?We.x:void 0,pe?We.y:void 0,V,Ce,re)}const Me=ce?H.x+1:void 0,Fe=pe?H.y+1:void 0;return Me==null&&Fe==null?z:R(z,H,ce?H.x+1:void 0,pe?H.y+1:void 0,V,Ce,re)}function P(z){return z*100+"%"}const T=(z,F,H,V)=>z+H>V?F:H,M=(z,F,H)=>z<0?F:H,A=z=>Math.max(0,z),$=z=>Math.max(0,z),D=(z,F,H)=>{let{left:V,height:re,width:ie}=F;const ce=z.top-(re-z.height);return{left:V,width:ie,height:M(ce,z.height,re),top:$(ce)}},U=(z,F,H)=>{let{top:V,left:re,height:ie,width:ce}=F;return{top:V,height:ie,width:T(z.left,z.width,ce,H),left:A(re)}},G=(z,F,H)=>{let{top:V,height:re,width:ie}=F;const ce=z.left-(ie-z.width);return{height:re,width:ce<0?z.width:T(z.left,z.width,ie,H),top:$(V),left:A(ce)}},q=(z,F,H)=>{let{top:V,left:re,height:ie,width:ce}=F;return{width:ce,left:re,height:M(V,z.height,ie),top:$(V)}},he={n:D,ne:function(){return D(arguments.length<=0?void 0:arguments[0],U(...arguments))},e:U,se:function(){return q(arguments.length<=0?void 0:arguments[0],U(...arguments))},s:q,sw:function(){return q(arguments.length<=0?void 0:arguments[0],G(...arguments))},w:G,nw:function(){return D(arguments.length<=0?void 0:arguments[0],G(...arguments))}};function xe(z,F,H,V){const re=he[z];return re?re(F,i(i({},F),H),V):H}function ge(z){let{top:F,left:H,width:V,height:re}=z;const ie="translate(".concat(H,"px,").concat(F,"px)");return{transform:ie,WebkitTransform:ie,MozTransform:ie,msTransform:ie,OTransform:ie,width:"".concat(V,"px"),height:"".concat(re,"px"),position:"absolute"}}function be(z){let{top:F,left:H,width:V,height:re}=z;return{top:"".concat(F,"px"),left:"".concat(H,"px"),width:"".concat(V,"px"),height:"".concat(re,"px"),position:"absolute"}}function J(z,F){return F==="horizontal"?ee(z):F==="vertical"?B(z):z}function B(z){return z.slice(0).sort(function(F,H){return F.y>H.y||F.y===H.y&&F.x>H.x?1:F.y===H.y&&F.x===H.x?0:-1})}function ee(z){return z.slice(0).sort(function(F,H){return F.x>H.x||F.x===H.x&&F.y>H.y?1:-1})}function se(z,F,H,V,re){z=z||[];const ie=[];r.default.Children.forEach(F,pe=>{if((pe==null?void 0:pe.key)==null)return;const Ce=w(z,String(pe.key)),Me=pe.props["data-grid"];Ce&&Me==null?ie.push(g(Ce)):Me?ie.push(g(i(i({},Me),{},{i:pe.key}))):ie.push(g({w:1,h:1,x:0,y:d(ie),i:String(pe.key)}))});const ce=x(ie,{cols:H});return re?ce:b(ce,V,H)}function te(z){let F=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"Layout";const H=["x","y","w","h"];if(!Array.isArray(z))throw new Error(F+" must be an array!");for(let V=0,re=z.length;V<re;V++){const ie=z[V];for(let ce=0;ce<H.length;ce++){const pe=H[ce],Ce=ie[pe];if(typeof Ce!="number"||Number.isNaN(Ce))throw new Error("ReactGridLayout: ".concat(F,"[").concat(V,"].").concat(pe," must be a number! Received: ").concat(Ce," (").concat(typeof Ce,")"))}if(typeof ie.i<"u"&&typeof ie.i!="string")throw new Error("ReactGridLayout: ".concat(F,"[").concat(V,"].i must be a string! Received: ").concat(ie.i," (").concat(typeof ie.i,")"))}}function ye(z){const{verticalCompact:F,compactType:H}=z||{};return F===!1?null:H}function Pe(){}const ze=()=>{};return ve.noop=ze,ve}var qt={},Tl;function Yi(){if(Tl)return qt;Tl=1,Object.defineProperty(qt,"__esModule",{value:!0}),qt.calcGridColWidth=e,qt.calcGridItemPosition=s,qt.calcGridItemWHPx=r,qt.calcWH=i,qt.calcXY=a,qt.clamp=o;function e(l){const{margin:c,containerPadding:d,containerWidth:u,cols:f}=l;return(u-c[0]*(f-1)-d[0]*2)/f}function r(l,c,d){return Number.isFinite(l)?Math.round(c*l+Math.max(0,l-1)*d):l}function s(l,c,d,u,f,h){const{margin:g,containerPadding:v,rowHeight:j}=l,_=e(l),b={};return h&&h.resizing?(b.width=Math.round(h.resizing.width),b.height=Math.round(h.resizing.height)):(b.width=r(u,_,g[0]),b.height=r(f,j,g[1])),h&&h.dragging?(b.top=Math.round(h.dragging.top),b.left=Math.round(h.dragging.left)):h&&h.resizing&&typeof h.resizing.top=="number"&&typeof h.resizing.left=="number"?(b.top=Math.round(h.resizing.top),b.left=Math.round(h.resizing.left)):(b.top=Math.round((j+g[1])*d+v[1]),b.left=Math.round((_+g[0])*c+v[0])),b}function a(l,c,d,u,f){const{margin:h,containerPadding:g,cols:v,rowHeight:j,maxRows:_}=l,b=e(l);let p=Math.round((d-g[0])/(b+h[0])),m=Math.round((c-g[1])/(j+h[1]));return p=o(p,0,v-u),m=o(m,0,_-f),{x:p,y:m}}function i(l,c,d,u,f,h){const{margin:g,maxRows:v,cols:j,rowHeight:_}=l,b=e(l);let p=Math.round((c+g[0])/(b+g[0])),m=Math.round((d+g[1])/(_+g[1])),y=o(p,0,j-u),x=o(m,0,v-f);return["sw","w","nw"].indexOf(h)!==-1&&(y=o(p,0,j)),["nw","n","ne"].indexOf(h)!==-1&&(x=o(m,0,v)),{w:y,h:x}}function o(l,c,d){return Math.max(Math.min(l,d),c)}return qt}var fs={},ms={exports:{}},qa={},$e={},rr={},Dl;function ja(){if(Dl)return rr;Dl=1,Object.defineProperty(rr,"__esModule",{value:!0}),rr.dontSetMe=i,rr.findInArray=e,rr.int=a,rr.isFunction=r,rr.isNum=s;function e(o,l){for(let c=0,d=o.length;c<d;c++)if(l.apply(l,[o[c],c,o]))return o[c]}function r(o){return typeof o=="function"||Object.prototype.toString.call(o)==="[object Function]"}function s(o){return typeof o=="number"&&!isNaN(o)}function a(o){return parseInt(o,10)}function i(o,l,c){if(o[l])return new Error(`Invalid prop ${l} passed to ${c} - do not set this, set it on the child.`)}return rr}var sr={},$l;function E_(){if($l)return sr;$l=1,Object.defineProperty(sr,"__esModule",{value:!0}),sr.browserPrefixToKey=s,sr.browserPrefixToStyle=a,sr.default=void 0,sr.getPrefix=r;const e=["Moz","Webkit","O","ms"];function r(){var c,d;let o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"transform";if(typeof window>"u")return"";const l=(d=(c=window.document)==null?void 0:c.documentElement)==null?void 0:d.style;if(!l||o in l)return"";for(let u=0;u<e.length;u++)if(s(o,e[u])in l)return e[u];return""}function s(o,l){return l?`${l}${i(o)}`:o}function a(o,l){return l?`-${l.toLowerCase()}-${o}`:o}function i(o){let l="",c=!0;for(let d=0;d<o.length;d++)c?(l+=o[d].toUpperCase(),c=!1):o[d]==="-"?c=!0:l+=o[d];return l}return sr.default=r(),sr}var Ml;function Xi(){if(Ml)return $e;Ml=1,Object.defineProperty($e,"__esModule",{value:!0}),$e.addClassName=w,$e.addEvent=l,$e.addUserSelectStyles=m,$e.createCSSTransform=v,$e.createSVGTransform=j,$e.getTouch=b,$e.getTouchIdentifier=p,$e.getTranslation=_,$e.innerHeight=f,$e.innerWidth=h,$e.matchesSelector=i,$e.matchesSelectorAndParentsTo=o,$e.offsetXYFromParent=g,$e.outerHeight=d,$e.outerWidth=u,$e.removeClassName=S,$e.removeEvent=c,$e.scheduleRemoveUserSelectStyles=y;var e=ja(),r=s(E_());function s(k,C){if(typeof WeakMap=="function")var R=new WeakMap,O=new WeakMap;return(s=function(P,T){if(!T&&P&&P.__esModule)return P;var M,A,$={__proto__:null,default:P};if(P===null||typeof P!="object"&&typeof P!="function")return $;if(M=T?O:R){if(M.has(P))return M.get(P);M.set(P,$)}for(const D in P)D!=="default"&&{}.hasOwnProperty.call(P,D)&&((A=(M=Object.defineProperty)&&Object.getOwnPropertyDescriptor(P,D))&&(A.get||A.set)?M($,D,A):$[D]=P[D]);return $})(k,C)}let a="";function i(k,C){return a||(a=(0,e.findInArray)(["matches","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector"],function(R){return(0,e.isFunction)(k[R])})),(0,e.isFunction)(k[a])?k[a](C):!1}function o(k,C,R){let O=k;do{if(i(O,C))return!0;if(O===R)return!1;O=O.parentNode}while(O);return!1}function l(k,C,R,O){if(!k)return;const P={capture:!0,...O};k.addEventListener?k.addEventListener(C,R,P):k.attachEvent?k.attachEvent("on"+C,R):k["on"+C]=R}function c(k,C,R,O){if(!k)return;const P={capture:!0,...O};k.removeEventListener?k.removeEventListener(C,R,P):k.detachEvent?k.detachEvent("on"+C,R):k["on"+C]=null}function d(k){let C=k.clientHeight;const R=k.ownerDocument.defaultView.getComputedStyle(k);return C+=(0,e.int)(R.borderTopWidth),C+=(0,e.int)(R.borderBottomWidth),C}function u(k){let C=k.clientWidth;const R=k.ownerDocument.defaultView.getComputedStyle(k);return C+=(0,e.int)(R.borderLeftWidth),C+=(0,e.int)(R.borderRightWidth),C}function f(k){let C=k.clientHeight;const R=k.ownerDocument.defaultView.getComputedStyle(k);return C-=(0,e.int)(R.paddingTop),C-=(0,e.int)(R.paddingBottom),C}function h(k){let C=k.clientWidth;const R=k.ownerDocument.defaultView.getComputedStyle(k);return C-=(0,e.int)(R.paddingLeft),C-=(0,e.int)(R.paddingRight),C}function g(k,C,R){const P=C===C.ownerDocument.body?{left:0,top:0}:C.getBoundingClientRect(),T=(k.clientX+C.scrollLeft-P.left)/R,M=(k.clientY+C.scrollTop-P.top)/R;return{x:T,y:M}}function v(k,C){const R=_(k,C,"px");return{[(0,r.browserPrefixToKey)("transform",r.default)]:R}}function j(k,C){return _(k,C,"")}function _(k,C,R){let{x:O,y:P}=k,T=`translate(${O}${R},${P}${R})`;if(C){const M=`${typeof C.x=="string"?C.x:C.x+R}`,A=`${typeof C.y=="string"?C.y:C.y+R}`;T=`translate(${M}, ${A})`+T}return T}function b(k,C){return k.targetTouches&&(0,e.findInArray)(k.targetTouches,R=>C===R.identifier)||k.changedTouches&&(0,e.findInArray)(k.changedTouches,R=>C===R.identifier)}function p(k){if(k.targetTouches&&k.targetTouches[0])return k.targetTouches[0].identifier;if(k.changedTouches&&k.changedTouches[0])return k.changedTouches[0].identifier}function m(k){if(!k)return;let C=k.getElementById("react-draggable-style-el");C||(C=k.createElement("style"),C.type="text/css",C.id="react-draggable-style-el",C.innerHTML=`.react-draggable-transparent-selection *::-moz-selection {all: inherit;}
`,C.innerHTML+=`.react-draggable-transparent-selection *::selection {all: inherit;}
`,k.getElementsByTagName("head")[0].appendChild(C)),k.body&&w(k.body,"react-draggable-transparent-selection")}function y(k){window.requestAnimationFrame?window.requestAnimationFrame(()=>{x(k)}):x(k)}function x(k){if(k)try{if(k.body&&S(k.body,"react-draggable-transparent-selection"),k.selection)k.selection.empty();else{const C=(k.defaultView||window).getSelection();C&&C.type!=="Caret"&&C.removeAllRanges()}}catch{}}function w(k,C){k.classList?k.classList.add(C):k.className.match(new RegExp(`(?:^|\\s)${C}(?!\\S)`))||(k.className+=` ${C}`)}function S(k,C){k.classList?k.classList.remove(C):k.className=k.className.replace(new RegExp(`(?:^|\\s)${C}(?!\\S)`,"g"),"")}return $e}var kt={},zl;function hu(){if(zl)return kt;zl=1,Object.defineProperty(kt,"__esModule",{value:!0}),kt.canDragX=i,kt.canDragY=o,kt.createCoreData=c,kt.createDraggableData=d,kt.getBoundPosition=s,kt.getControlPosition=l,kt.snapToGrid=a;var e=ja(),r=Xi();function s(h,g,v){if(!h.props.bounds)return[g,v];let{bounds:j}=h.props;j=typeof j=="string"?j:u(j);const _=f(h);if(typeof j=="string"){const{ownerDocument:b}=_,p=b.defaultView;let m;if(j==="parent"?m=_.parentNode:m=_.getRootNode().querySelector(j),!(m instanceof p.HTMLElement))throw new Error('Bounds selector "'+j+'" could not find an element.');const y=m,x=p.getComputedStyle(_),w=p.getComputedStyle(y);j={left:-_.offsetLeft+(0,e.int)(w.paddingLeft)+(0,e.int)(x.marginLeft),top:-_.offsetTop+(0,e.int)(w.paddingTop)+(0,e.int)(x.marginTop),right:(0,r.innerWidth)(y)-(0,r.outerWidth)(_)-_.offsetLeft+(0,e.int)(w.paddingRight)-(0,e.int)(x.marginRight),bottom:(0,r.innerHeight)(y)-(0,r.outerHeight)(_)-_.offsetTop+(0,e.int)(w.paddingBottom)-(0,e.int)(x.marginBottom)}}return(0,e.isNum)(j.right)&&(g=Math.min(g,j.right)),(0,e.isNum)(j.bottom)&&(v=Math.min(v,j.bottom)),(0,e.isNum)(j.left)&&(g=Math.max(g,j.left)),(0,e.isNum)(j.top)&&(v=Math.max(v,j.top)),[g,v]}function a(h,g,v){const j=Math.round(g/h[0])*h[0],_=Math.round(v/h[1])*h[1];return[j,_]}function i(h){return h.props.axis==="both"||h.props.axis==="x"}function o(h){return h.props.axis==="both"||h.props.axis==="y"}function l(h,g,v){const j=typeof g=="number"?(0,r.getTouch)(h,g):null;if(typeof g=="number"&&!j)return null;const _=f(v),b=v.props.offsetParent||_.offsetParent||_.ownerDocument.body;return(0,r.offsetXYFromParent)(j||h,b,v.props.scale)}function c(h,g,v){const j=!(0,e.isNum)(h.lastX),_=f(h);return j?{node:_,deltaX:0,deltaY:0,lastX:g,lastY:v,x:g,y:v}:{node:_,deltaX:g-h.lastX,deltaY:v-h.lastY,lastX:h.lastX,lastY:h.lastY,x:g,y:v}}function d(h,g){const v=h.props.scale;return{node:g.node,x:h.state.x+g.deltaX/v,y:h.state.y+g.deltaY/v,deltaX:g.deltaX/v,deltaY:g.deltaY/v,lastX:h.state.x,lastY:h.state.y}}function u(h){return{left:h.left,top:h.top,right:h.right,bottom:h.bottom}}function f(h){const g=h.findDOMNode();if(!g)throw new Error("<DraggableCore>: Unmounted during event!");return g}return kt}var ps={},Nn={},Ll;function fu(){if(Ll)return Nn;Ll=1,Object.defineProperty(Nn,"__esModule",{value:!0}),Nn.default=e;function e(){}return Nn}var Fl;function R_(){if(Fl)return ps;Fl=1,Object.defineProperty(ps,"__esModule",{value:!0}),ps.default=void 0;var e=d(wt()),r=c(ur()),s=c(ra()),a=Xi(),i=hu(),o=ja(),l=c(fu());function c(_){return _&&_.__esModule?_:{default:_}}function d(_,b){if(typeof WeakMap=="function")var p=new WeakMap,m=new WeakMap;return(d=function(y,x){if(!x&&y&&y.__esModule)return y;var w,S,k={__proto__:null,default:y};if(y===null||typeof y!="object"&&typeof y!="function")return k;if(w=x?m:p){if(w.has(y))return w.get(y);w.set(y,k)}for(const C in y)C!=="default"&&{}.hasOwnProperty.call(y,C)&&((S=(w=Object.defineProperty)&&Object.getOwnPropertyDescriptor(y,C))&&(S.get||S.set)?w(k,C,S):k[C]=y[C]);return k})(_,b)}function u(_,b,p){return(b=f(b))in _?Object.defineProperty(_,b,{value:p,enumerable:!0,configurable:!0,writable:!0}):_[b]=p,_}function f(_){var b=h(_,"string");return typeof b=="symbol"?b:b+""}function h(_,b){if(typeof _!="object"||!_)return _;var p=_[Symbol.toPrimitive];if(p!==void 0){var m=p.call(_,b);if(typeof m!="object")return m;throw new TypeError("@@toPrimitive must return a primitive value.")}return(b==="string"?String:Number)(_)}const g={touch:{start:"touchstart",move:"touchmove",stop:"touchend"},mouse:{start:"mousedown",move:"mousemove",stop:"mouseup"}};let v=g.mouse,j=class extends e.Component{constructor(){super(...arguments),u(this,"dragging",!1),u(this,"lastX",NaN),u(this,"lastY",NaN),u(this,"touchIdentifier",null),u(this,"mounted",!1),u(this,"handleDragStart",b=>{if(this.props.onMouseDown(b),!this.props.allowAnyClick&&typeof b.button=="number"&&b.button!==0)return!1;const p=this.findDOMNode();if(!p||!p.ownerDocument||!p.ownerDocument.body)throw new Error("<DraggableCore> not mounted on DragStart!");const{ownerDocument:m}=p;if(this.props.disabled||!(b.target instanceof m.defaultView.Node)||this.props.handle&&!(0,a.matchesSelectorAndParentsTo)(b.target,this.props.handle,p)||this.props.cancel&&(0,a.matchesSelectorAndParentsTo)(b.target,this.props.cancel,p))return;b.type==="touchstart"&&!this.props.allowMobileScroll&&b.preventDefault();const y=(0,a.getTouchIdentifier)(b);this.touchIdentifier=y;const x=(0,i.getControlPosition)(b,y,this);if(x==null)return;const{x:w,y:S}=x,k=(0,i.createCoreData)(this,w,S);(0,l.default)("DraggableCore: handleDragStart: %j",k),(0,l.default)("calling",this.props.onStart),!(this.props.onStart(b,k)===!1||this.mounted===!1)&&(this.props.enableUserSelectHack&&(0,a.addUserSelectStyles)(m),this.dragging=!0,this.lastX=w,this.lastY=S,(0,a.addEvent)(m,v.move,this.handleDrag),(0,a.addEvent)(m,v.stop,this.handleDragStop))}),u(this,"handleDrag",b=>{const p=(0,i.getControlPosition)(b,this.touchIdentifier,this);if(p==null)return;let{x:m,y}=p;if(Array.isArray(this.props.grid)){let S=m-this.lastX,k=y-this.lastY;if([S,k]=(0,i.snapToGrid)(this.props.grid,S,k),!S&&!k)return;m=this.lastX+S,y=this.lastY+k}const x=(0,i.createCoreData)(this,m,y);if((0,l.default)("DraggableCore: handleDrag: %j",x),this.props.onDrag(b,x)===!1||this.mounted===!1){try{this.handleDragStop(new MouseEvent("mouseup"))}catch{const k=document.createEvent("MouseEvents");k.initMouseEvent("mouseup",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),this.handleDragStop(k)}return}this.lastX=m,this.lastY=y}),u(this,"handleDragStop",b=>{if(!this.dragging)return;const p=(0,i.getControlPosition)(b,this.touchIdentifier,this);if(p==null)return;let{x:m,y}=p;if(Array.isArray(this.props.grid)){let k=m-this.lastX||0,C=y-this.lastY||0;[k,C]=(0,i.snapToGrid)(this.props.grid,k,C),m=this.lastX+k,y=this.lastY+C}const x=(0,i.createCoreData)(this,m,y);if(this.props.onStop(b,x)===!1||this.mounted===!1)return!1;const S=this.findDOMNode();S&&this.props.enableUserSelectHack&&(0,a.scheduleRemoveUserSelectStyles)(S.ownerDocument),(0,l.default)("DraggableCore: handleDragStop: %j",x),this.dragging=!1,this.lastX=NaN,this.lastY=NaN,S&&((0,l.default)("DraggableCore: Removing handlers"),(0,a.removeEvent)(S.ownerDocument,v.move,this.handleDrag),(0,a.removeEvent)(S.ownerDocument,v.stop,this.handleDragStop))}),u(this,"onMouseDown",b=>(v=g.mouse,this.handleDragStart(b))),u(this,"onMouseUp",b=>(v=g.mouse,this.handleDragStop(b))),u(this,"onTouchStart",b=>(v=g.touch,this.handleDragStart(b))),u(this,"onTouchEnd",b=>(v=g.touch,this.handleDragStop(b)))}componentDidMount(){this.mounted=!0;const b=this.findDOMNode();b&&(0,a.addEvent)(b,g.touch.start,this.onTouchStart,{passive:!1})}componentWillUnmount(){this.mounted=!1;const b=this.findDOMNode();if(b){const{ownerDocument:p}=b;(0,a.removeEvent)(p,g.mouse.move,this.handleDrag),(0,a.removeEvent)(p,g.touch.move,this.handleDrag),(0,a.removeEvent)(p,g.mouse.stop,this.handleDragStop),(0,a.removeEvent)(p,g.touch.stop,this.handleDragStop),(0,a.removeEvent)(b,g.touch.start,this.onTouchStart,{passive:!1}),this.props.enableUserSelectHack&&(0,a.scheduleRemoveUserSelectStyles)(p)}}findDOMNode(){var b,p,m;return(b=this.props)!=null&&b.nodeRef?(m=(p=this.props)==null?void 0:p.nodeRef)==null?void 0:m.current:s.default.findDOMNode(this)}render(){return e.cloneElement(e.Children.only(this.props.children),{onMouseDown:this.onMouseDown,onMouseUp:this.onMouseUp,onTouchEnd:this.onTouchEnd})}};return ps.default=j,u(j,"displayName","DraggableCore"),u(j,"propTypes",{allowAnyClick:r.default.bool,allowMobileScroll:r.default.bool,children:r.default.node.isRequired,disabled:r.default.bool,enableUserSelectHack:r.default.bool,offsetParent:function(_,b){if(_[b]&&_[b].nodeType!==1)throw new Error("Draggable's offsetParent must be a DOM Node.")},grid:r.default.arrayOf(r.default.number),handle:r.default.string,cancel:r.default.string,nodeRef:r.default.object,onStart:r.default.func,onDrag:r.default.func,onStop:r.default.func,onMouseDown:r.default.func,scale:r.default.number,className:o.dontSetMe,style:o.dontSetMe,transform:o.dontSetMe}),u(j,"defaultProps",{allowAnyClick:!1,allowMobileScroll:!1,disabled:!1,enableUserSelectHack:!0,onStart:function(){},onDrag:function(){},onStop:function(){},onMouseDown:function(){},scale:1}),ps}var Il;function O_(){return Il||(Il=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"DraggableCore",{enumerable:!0,get:function(){return d.default}}),e.default=void 0;var r=h(wt()),s=f(ur()),a=f(ra()),i=wa(),o=Xi(),l=hu(),c=ja(),d=f(R_()),u=f(fu());function f(p){return p&&p.__esModule?p:{default:p}}function h(p,m){if(typeof WeakMap=="function")var y=new WeakMap,x=new WeakMap;return(h=function(w,S){if(!S&&w&&w.__esModule)return w;var k,C,R={__proto__:null,default:w};if(w===null||typeof w!="object"&&typeof w!="function")return R;if(k=S?x:y){if(k.has(w))return k.get(w);k.set(w,R)}for(const O in w)O!=="default"&&{}.hasOwnProperty.call(w,O)&&((C=(k=Object.defineProperty)&&Object.getOwnPropertyDescriptor(w,O))&&(C.get||C.set)?k(R,O,C):R[O]=w[O]);return R})(p,m)}function g(){return g=Object.assign?Object.assign.bind():function(p){for(var m=1;m<arguments.length;m++){var y=arguments[m];for(var x in y)({}).hasOwnProperty.call(y,x)&&(p[x]=y[x])}return p},g.apply(null,arguments)}function v(p,m,y){return(m=j(m))in p?Object.defineProperty(p,m,{value:y,enumerable:!0,configurable:!0,writable:!0}):p[m]=y,p}function j(p){var m=_(p,"string");return typeof m=="symbol"?m:m+""}function _(p,m){if(typeof p!="object"||!p)return p;var y=p[Symbol.toPrimitive];if(y!==void 0){var x=y.call(p,m);if(typeof x!="object")return x;throw new TypeError("@@toPrimitive must return a primitive value.")}return(m==="string"?String:Number)(p)}class b extends r.Component{static getDerivedStateFromProps(m,y){let{position:x}=m,{prevPropsPosition:w}=y;return x&&(!w||x.x!==w.x||x.y!==w.y)?((0,u.default)("Draggable: getDerivedStateFromProps %j",{position:x,prevPropsPosition:w}),{x:x.x,y:x.y,prevPropsPosition:{...x}}):null}constructor(m){super(m),v(this,"onDragStart",(y,x)=>{if((0,u.default)("Draggable: onDragStart: %j",x),this.props.onStart(y,(0,l.createDraggableData)(this,x))===!1)return!1;this.setState({dragging:!0,dragged:!0})}),v(this,"onDrag",(y,x)=>{if(!this.state.dragging)return!1;(0,u.default)("Draggable: onDrag: %j",x);const w=(0,l.createDraggableData)(this,x),S={x:w.x,y:w.y,slackX:0,slackY:0};if(this.props.bounds){const{x:C,y:R}=S;S.x+=this.state.slackX,S.y+=this.state.slackY;const[O,P]=(0,l.getBoundPosition)(this,S.x,S.y);S.x=O,S.y=P,S.slackX=this.state.slackX+(C-S.x),S.slackY=this.state.slackY+(R-S.y),w.x=S.x,w.y=S.y,w.deltaX=S.x-this.state.x,w.deltaY=S.y-this.state.y}if(this.props.onDrag(y,w)===!1)return!1;this.setState(S)}),v(this,"onDragStop",(y,x)=>{if(!this.state.dragging||this.props.onStop(y,(0,l.createDraggableData)(this,x))===!1)return!1;(0,u.default)("Draggable: onDragStop: %j",x);const S={dragging:!1,slackX:0,slackY:0};if(!!this.props.position){const{x:C,y:R}=this.props.position;S.x=C,S.y=R}this.setState(S)}),this.state={dragging:!1,dragged:!1,x:m.position?m.position.x:m.defaultPosition.x,y:m.position?m.position.y:m.defaultPosition.y,prevPropsPosition:{...m.position},slackX:0,slackY:0,isElementSVG:!1},m.position&&!(m.onDrag||m.onStop)&&console.warn("A `position` was applied to this <Draggable>, without drag handlers. This will make this component effectively undraggable. Please attach `onDrag` or `onStop` handlers so you can adjust the `position` of this element.")}componentDidMount(){typeof window.SVGElement<"u"&&this.findDOMNode()instanceof window.SVGElement&&this.setState({isElementSVG:!0})}componentWillUnmount(){this.state.dragging&&this.setState({dragging:!1})}findDOMNode(){var m,y;return((y=(m=this.props)==null?void 0:m.nodeRef)==null?void 0:y.current)??a.default.findDOMNode(this)}render(){const{axis:m,bounds:y,children:x,defaultPosition:w,defaultClassName:S,defaultClassNameDragging:k,defaultClassNameDragged:C,position:R,positionOffset:O,scale:P,...T}=this.props;let M={},A=null;const D=!!!R||this.state.dragging,U=R||w,G={x:(0,l.canDragX)(this)&&D?this.state.x:U.x,y:(0,l.canDragY)(this)&&D?this.state.y:U.y};this.state.isElementSVG?A=(0,o.createSVGTransform)(G,O):M=(0,o.createCSSTransform)(G,O);const q=(0,i.clsx)(x.props.className||"",S,{[k]:this.state.dragging,[C]:this.state.dragged});return r.createElement(d.default,g({},T,{onStart:this.onDragStart,onDrag:this.onDrag,onStop:this.onDragStop}),r.cloneElement(r.Children.only(x),{className:q,style:{...x.props.style,...M},transform:A}))}}e.default=b,v(b,"displayName","Draggable"),v(b,"propTypes",{...d.default.propTypes,axis:s.default.oneOf(["both","x","y","none"]),bounds:s.default.oneOfType([s.default.shape({left:s.default.number,right:s.default.number,top:s.default.number,bottom:s.default.number}),s.default.string,s.default.oneOf([!1])]),defaultClassName:s.default.string,defaultClassNameDragging:s.default.string,defaultClassNameDragged:s.default.string,defaultPosition:s.default.shape({x:s.default.number,y:s.default.number}),positionOffset:s.default.shape({x:s.default.oneOfType([s.default.number,s.default.string]),y:s.default.oneOfType([s.default.number,s.default.string])}),position:s.default.shape({x:s.default.number,y:s.default.number}),className:c.dontSetMe,style:c.dontSetMe,transform:c.dontSetMe}),v(b,"defaultProps",{...d.default.defaultProps,axis:"both",bounds:!1,defaultClassName:"react-draggable",defaultClassNameDragging:"react-draggable-dragging",defaultClassNameDragged:"react-draggable-dragged",defaultPosition:{x:0,y:0},scale:1})})(qa)),qa}var Hl;function Ki(){if(Hl)return ms.exports;Hl=1;const{default:e,DraggableCore:r}=O_();return ms.exports=e,ms.exports.default=e,ms.exports.DraggableCore=r,ms.exports}var gs={exports:{}},xs={},Sn={},Ul;function A_(){if(Ul)return Sn;Ul=1,Sn.__esModule=!0,Sn.cloneElement=c;var e=r(wt());function r(d){return d&&d.__esModule?d:{default:d}}function s(d,u){var f=Object.keys(d);if(Object.getOwnPropertySymbols){var h=Object.getOwnPropertySymbols(d);u&&(h=h.filter(function(g){return Object.getOwnPropertyDescriptor(d,g).enumerable})),f.push.apply(f,h)}return f}function a(d){for(var u=1;u<arguments.length;u++){var f=arguments[u]!=null?arguments[u]:{};u%2?s(Object(f),!0).forEach(function(h){i(d,h,f[h])}):Object.getOwnPropertyDescriptors?Object.defineProperties(d,Object.getOwnPropertyDescriptors(f)):s(Object(f)).forEach(function(h){Object.defineProperty(d,h,Object.getOwnPropertyDescriptor(f,h))})}return d}function i(d,u,f){return u=o(u),u in d?Object.defineProperty(d,u,{value:f,enumerable:!0,configurable:!0,writable:!0}):d[u]=f,d}function o(d){var u=l(d,"string");return typeof u=="symbol"?u:String(u)}function l(d,u){if(typeof d!="object"||d===null)return d;var f=d[Symbol.toPrimitive];if(f!==void 0){var h=f.call(d,u);if(typeof h!="object")return h;throw new TypeError("@@toPrimitive must return a primitive value.")}return(u==="string"?String:Number)(d)}function c(d,u){return u.style&&d.props.style&&(u.style=a(a({},d.props.style),u.style)),u.className&&d.props.className&&(u.className=d.props.className+" "+u.className),e.default.cloneElement(d,u)}return Sn}var ys={},ql;function mu(){if(ql)return ys;ql=1,ys.__esModule=!0,ys.resizableProps=void 0;var e=r(ur());Ki();function r(a){return a&&a.__esModule?a:{default:a}}var s={axis:e.default.oneOf(["both","x","y","none"]),className:e.default.string,children:e.default.element.isRequired,draggableOpts:e.default.shape({allowAnyClick:e.default.bool,cancel:e.default.string,children:e.default.node,disabled:e.default.bool,enableUserSelectHack:e.default.bool,offsetParent:e.default.node,grid:e.default.arrayOf(e.default.number),handle:e.default.string,nodeRef:e.default.object,onStart:e.default.func,onDrag:e.default.func,onStop:e.default.func,onMouseDown:e.default.func,scale:e.default.number}),height:function(){for(var i=arguments.length,o=new Array(i),l=0;l<i;l++)o[l]=arguments[l];var c=o[0];if(c.axis==="both"||c.axis==="y"){var d;return(d=e.default.number).isRequired.apply(d,o)}return e.default.number.apply(e.default,o)},handle:e.default.oneOfType([e.default.node,e.default.func]),handleSize:e.default.arrayOf(e.default.number),lockAspectRatio:e.default.bool,maxConstraints:e.default.arrayOf(e.default.number),minConstraints:e.default.arrayOf(e.default.number),onResizeStop:e.default.func,onResizeStart:e.default.func,onResize:e.default.func,resizeHandles:e.default.arrayOf(e.default.oneOf(["s","w","e","n","sw","nw","se","ne"])),transformScale:e.default.number,width:function(){for(var i=arguments.length,o=new Array(i),l=0;l<i;l++)o[l]=arguments[l];var c=o[0];if(c.axis==="both"||c.axis==="x"){var d;return(d=e.default.number).isRequired.apply(d,o)}return e.default.number.apply(e.default,o)}};return ys.resizableProps=s,ys}var Wl;function pu(){if(Wl)return xs;Wl=1,xs.__esModule=!0,xs.default=void 0;var e=l(wt()),r=Ki(),s=A_(),a=mu(),i=["children","className","draggableOpts","width","height","handle","handleSize","lockAspectRatio","axis","minConstraints","maxConstraints","onResize","onResizeStop","onResizeStart","resizeHandles","transformScale"];function o(p){if(typeof WeakMap!="function")return null;var m=new WeakMap,y=new WeakMap;return(o=function(w){return w?y:m})(p)}function l(p,m){if(p&&p.__esModule)return p;if(p===null||typeof p!="object"&&typeof p!="function")return{default:p};var y=o(m);if(y&&y.has(p))return y.get(p);var x={},w=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var S in p)if(S!=="default"&&Object.prototype.hasOwnProperty.call(p,S)){var k=w?Object.getOwnPropertyDescriptor(p,S):null;k&&(k.get||k.set)?Object.defineProperty(x,S,k):x[S]=p[S]}return x.default=p,y&&y.set(p,x),x}function c(){return c=Object.assign?Object.assign.bind():function(p){for(var m=1;m<arguments.length;m++){var y=arguments[m];for(var x in y)Object.prototype.hasOwnProperty.call(y,x)&&(p[x]=y[x])}return p},c.apply(this,arguments)}function d(p,m){if(p==null)return{};var y={},x=Object.keys(p),w,S;for(S=0;S<x.length;S++)w=x[S],!(m.indexOf(w)>=0)&&(y[w]=p[w]);return y}function u(p,m){var y=Object.keys(p);if(Object.getOwnPropertySymbols){var x=Object.getOwnPropertySymbols(p);m&&(x=x.filter(function(w){return Object.getOwnPropertyDescriptor(p,w).enumerable})),y.push.apply(y,x)}return y}function f(p){for(var m=1;m<arguments.length;m++){var y=arguments[m]!=null?arguments[m]:{};m%2?u(Object(y),!0).forEach(function(x){h(p,x,y[x])}):Object.getOwnPropertyDescriptors?Object.defineProperties(p,Object.getOwnPropertyDescriptors(y)):u(Object(y)).forEach(function(x){Object.defineProperty(p,x,Object.getOwnPropertyDescriptor(y,x))})}return p}function h(p,m,y){return m=g(m),m in p?Object.defineProperty(p,m,{value:y,enumerable:!0,configurable:!0,writable:!0}):p[m]=y,p}function g(p){var m=v(p,"string");return typeof m=="symbol"?m:String(m)}function v(p,m){if(typeof p!="object"||p===null)return p;var y=p[Symbol.toPrimitive];if(y!==void 0){var x=y.call(p,m);if(typeof x!="object")return x;throw new TypeError("@@toPrimitive must return a primitive value.")}return(m==="string"?String:Number)(p)}function j(p,m){p.prototype=Object.create(m.prototype),p.prototype.constructor=p,_(p,m)}function _(p,m){return _=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(x,w){return x.__proto__=w,x},_(p,m)}var b=(function(p){j(m,p);function m(){for(var x,w=arguments.length,S=new Array(w),k=0;k<w;k++)S[k]=arguments[k];return x=p.call.apply(p,[this].concat(S))||this,x.handleRefs={},x.lastHandleRect=null,x.slack=null,x}var y=m.prototype;return y.componentWillUnmount=function(){this.resetData()},y.resetData=function(){this.lastHandleRect=this.slack=null},y.runConstraints=function(w,S){var k=this.props,C=k.minConstraints,R=k.maxConstraints,O=k.lockAspectRatio;if(!C&&!R&&!O)return[w,S];if(O){var P=this.props.width/this.props.height,T=w-this.props.width,M=S-this.props.height;Math.abs(T)>Math.abs(M*P)?S=w/P:w=S*P}var A=w,$=S,D=this.slack||[0,0],U=D[0],G=D[1];return w+=U,S+=G,C&&(w=Math.max(C[0],w),S=Math.max(C[1],S)),R&&(w=Math.min(R[0],w),S=Math.min(R[1],S)),this.slack=[U+(A-w),G+($-S)],[w,S]},y.resizeHandler=function(w,S){var k=this;return function(C,R){var O=R.node,P=R.deltaX,T=R.deltaY;w==="onResizeStart"&&k.resetData();var M=(k.props.axis==="both"||k.props.axis==="x")&&S!=="n"&&S!=="s",A=(k.props.axis==="both"||k.props.axis==="y")&&S!=="e"&&S!=="w";if(!(!M&&!A)){var $=S[0],D=S[S.length-1],U=O.getBoundingClientRect();if(k.lastHandleRect!=null){if(D==="w"){var G=U.left-k.lastHandleRect.left;P+=G}if($==="n"){var q=U.top-k.lastHandleRect.top;T+=q}}k.lastHandleRect=U,D==="w"&&(P=-P),$==="n"&&(T=-T);var Y=k.props.width+(M?P/k.props.transformScale:0),Z=k.props.height+(A?T/k.props.transformScale:0),K=k.runConstraints(Y,Z);Y=K[0],Z=K[1];var ue=Y!==k.props.width||Z!==k.props.height,he=typeof k.props[w]=="function"?k.props[w]:null,xe=w==="onResize"&&!ue;he&&!xe&&(C.persist==null||C.persist(),he(C,{node:O,size:{width:Y,height:Z},handle:S})),w==="onResizeStop"&&k.resetData()}}},y.renderResizeHandle=function(w,S){var k=this.props.handle;if(!k)return e.createElement("span",{className:"react-resizable-handle react-resizable-handle-"+w,ref:S});if(typeof k=="function")return k(w,S);var C=typeof k.type=="string",R=f({ref:S},C?{}:{handleAxis:w});return e.cloneElement(k,R)},y.render=function(){var w=this,S=this.props,k=S.children,C=S.className,R=S.draggableOpts;S.width,S.height,S.handle,S.handleSize,S.lockAspectRatio,S.axis,S.minConstraints,S.maxConstraints,S.onResize,S.onResizeStop,S.onResizeStart;var O=S.resizeHandles;S.transformScale;var P=d(S,i);return(0,s.cloneElement)(k,f(f({},P),{},{className:(C?C+" ":"")+"react-resizable",children:[].concat(k.props.children,O.map(function(T){var M,A=(M=w.handleRefs[T])!=null?M:w.handleRefs[T]=e.createRef();return e.createElement(r.DraggableCore,c({},R,{nodeRef:A,key:"resizableHandle-"+T,onStop:w.resizeHandler("onResizeStop",T),onStart:w.resizeHandler("onResizeStart",T),onDrag:w.resizeHandler("onResize",T)}),w.renderResizeHandle(T,A))}))}))},m})(e.Component);return xs.default=b,b.propTypes=a.resizableProps,b.defaultProps={axis:"both",handleSize:[20,20],lockAspectRatio:!1,minConstraints:[20,20],maxConstraints:[1/0,1/0],resizeHandles:["se"],transformScale:1},xs}var bs={},Bl;function T_(){if(Bl)return bs;Bl=1,bs.__esModule=!0,bs.default=void 0;var e=c(wt()),r=o(ur()),s=o(pu()),a=mu(),i=["handle","handleSize","onResize","onResizeStart","onResizeStop","draggableOpts","minConstraints","maxConstraints","lockAspectRatio","axis","width","height","resizeHandles","style","transformScale"];function o(m){return m&&m.__esModule?m:{default:m}}function l(m){if(typeof WeakMap!="function")return null;var y=new WeakMap,x=new WeakMap;return(l=function(S){return S?x:y})(m)}function c(m,y){if(m&&m.__esModule)return m;if(m===null||typeof m!="object"&&typeof m!="function")return{default:m};var x=l(y);if(x&&x.has(m))return x.get(m);var w={},S=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var k in m)if(k!=="default"&&Object.prototype.hasOwnProperty.call(m,k)){var C=S?Object.getOwnPropertyDescriptor(m,k):null;C&&(C.get||C.set)?Object.defineProperty(w,k,C):w[k]=m[k]}return w.default=m,x&&x.set(m,w),w}function d(){return d=Object.assign?Object.assign.bind():function(m){for(var y=1;y<arguments.length;y++){var x=arguments[y];for(var w in x)Object.prototype.hasOwnProperty.call(x,w)&&(m[w]=x[w])}return m},d.apply(this,arguments)}function u(m,y){var x=Object.keys(m);if(Object.getOwnPropertySymbols){var w=Object.getOwnPropertySymbols(m);y&&(w=w.filter(function(S){return Object.getOwnPropertyDescriptor(m,S).enumerable})),x.push.apply(x,w)}return x}function f(m){for(var y=1;y<arguments.length;y++){var x=arguments[y]!=null?arguments[y]:{};y%2?u(Object(x),!0).forEach(function(w){h(m,w,x[w])}):Object.getOwnPropertyDescriptors?Object.defineProperties(m,Object.getOwnPropertyDescriptors(x)):u(Object(x)).forEach(function(w){Object.defineProperty(m,w,Object.getOwnPropertyDescriptor(x,w))})}return m}function h(m,y,x){return y=g(y),y in m?Object.defineProperty(m,y,{value:x,enumerable:!0,configurable:!0,writable:!0}):m[y]=x,m}function g(m){var y=v(m,"string");return typeof y=="symbol"?y:String(y)}function v(m,y){if(typeof m!="object"||m===null)return m;var x=m[Symbol.toPrimitive];if(x!==void 0){var w=x.call(m,y);if(typeof w!="object")return w;throw new TypeError("@@toPrimitive must return a primitive value.")}return(y==="string"?String:Number)(m)}function j(m,y){if(m==null)return{};var x={},w=Object.keys(m),S,k;for(k=0;k<w.length;k++)S=w[k],!(y.indexOf(S)>=0)&&(x[S]=m[S]);return x}function _(m,y){m.prototype=Object.create(y.prototype),m.prototype.constructor=m,b(m,y)}function b(m,y){return b=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(w,S){return w.__proto__=S,w},b(m,y)}var p=(function(m){_(y,m);function y(){for(var w,S=arguments.length,k=new Array(S),C=0;C<S;C++)k[C]=arguments[C];return w=m.call.apply(m,[this].concat(k))||this,w.state={width:w.props.width,height:w.props.height,propsWidth:w.props.width,propsHeight:w.props.height},w.onResize=function(R,O){var P=O.size;w.props.onResize?(R.persist==null||R.persist(),w.setState(P,function(){return w.props.onResize&&w.props.onResize(R,O)})):w.setState(P)},w}y.getDerivedStateFromProps=function(S,k){return k.propsWidth!==S.width||k.propsHeight!==S.height?{width:S.width,height:S.height,propsWidth:S.width,propsHeight:S.height}:null};var x=y.prototype;return x.render=function(){var S=this.props,k=S.handle,C=S.handleSize;S.onResize;var R=S.onResizeStart,O=S.onResizeStop,P=S.draggableOpts,T=S.minConstraints,M=S.maxConstraints,A=S.lockAspectRatio,$=S.axis;S.width,S.height;var D=S.resizeHandles,U=S.style,G=S.transformScale,q=j(S,i);return e.createElement(s.default,{axis:$,draggableOpts:P,handle:k,handleSize:C,height:this.state.height,lockAspectRatio:A,maxConstraints:M,minConstraints:T,onResizeStart:R,onResize:this.onResize,onResizeStop:O,resizeHandles:D,transformScale:G,width:this.state.width},e.createElement("div",d({},q,{style:f(f({},U),{},{width:this.state.width+"px",height:this.state.height+"px"})})))},y})(e.Component);return bs.default=p,p.propTypes=f(f({},a.resizableProps),{},{children:r.default.element}),bs}var Vl;function D_(){return Vl||(Vl=1,gs.exports=function(){throw new Error("Don't instantiate Resizable directly! Use require('react-resizable').Resizable")},gs.exports.Resizable=pu().default,gs.exports.ResizableBox=T_().default),gs.exports}var Wt={},Gl;function gu(){if(Gl)return Wt;Gl=1,Object.defineProperty(Wt,"__esModule",{value:!0}),Wt.resizeHandleType=Wt.resizeHandleAxesType=Wt.default=void 0;var e=s(ur()),r=s(wt());function s(o){return o&&o.__esModule?o:{default:o}}const a=Wt.resizeHandleAxesType=e.default.arrayOf(e.default.oneOf(["s","w","e","n","sw","nw","se","ne"])),i=Wt.resizeHandleType=e.default.oneOfType([e.default.node,e.default.func]);return Wt.default={className:e.default.string,style:e.default.object,width:e.default.number,autoSize:e.default.bool,cols:e.default.number,draggableCancel:e.default.string,draggableHandle:e.default.string,verticalCompact:function(o){o.verticalCompact},compactType:e.default.oneOf(["vertical","horizontal"]),layout:function(o){var l=o.layout;l!==void 0&&Xr().validateLayout(l,"layout")},margin:e.default.arrayOf(e.default.number),containerPadding:e.default.arrayOf(e.default.number),rowHeight:e.default.number,maxRows:e.default.number,isBounded:e.default.bool,isDraggable:e.default.bool,isResizable:e.default.bool,allowOverlap:e.default.bool,preventCollision:e.default.bool,useCSSTransforms:e.default.bool,transformScale:e.default.number,isDroppable:e.default.bool,resizeHandles:a,resizeHandle:i,onLayoutChange:e.default.func,onDragStart:e.default.func,onDrag:e.default.func,onDragStop:e.default.func,onResizeStart:e.default.func,onResize:e.default.func,onResizeStop:e.default.func,onDrop:e.default.func,droppingItem:e.default.shape({i:e.default.string.isRequired,w:e.default.number.isRequired,h:e.default.number.isRequired}),children:function(o,l){const c=o[l],d={};r.default.Children.forEach(c,function(u){if((u==null?void 0:u.key)!=null){if(d[u.key])throw new Error('Duplicate child key "'+u.key+'" found! This will cause problems in ReactGridLayout.');d[u.key]=!0}})},innerRef:e.default.any},Wt}var Yl;function $_(){if(Yl)return fs;Yl=1,Object.defineProperty(fs,"__esModule",{value:!0}),fs.default=void 0;var e=u(wt()),r=ra(),s=u(ur()),a=Ki(),i=D_(),o=Xr(),l=Yi(),c=gu(),d=u(wa());function u(b){return b&&b.__esModule?b:{default:b}}function f(b,p){var m=Object.keys(b);if(Object.getOwnPropertySymbols){var y=Object.getOwnPropertySymbols(b);p&&(y=y.filter(function(x){return Object.getOwnPropertyDescriptor(b,x).enumerable})),m.push.apply(m,y)}return m}function h(b){for(var p=1;p<arguments.length;p++){var m=arguments[p]!=null?arguments[p]:{};p%2?f(Object(m),!0).forEach(function(y){g(b,y,m[y])}):Object.getOwnPropertyDescriptors?Object.defineProperties(b,Object.getOwnPropertyDescriptors(m)):f(Object(m)).forEach(function(y){Object.defineProperty(b,y,Object.getOwnPropertyDescriptor(m,y))})}return b}function g(b,p,m){return(p=v(p))in b?Object.defineProperty(b,p,{value:m,enumerable:!0,configurable:!0,writable:!0}):b[p]=m,b}function v(b){var p=j(b,"string");return typeof p=="symbol"?p:p+""}function j(b,p){if(typeof b!="object"||!b)return b;var m=b[Symbol.toPrimitive];if(m!==void 0){var y=m.call(b,p);if(typeof y!="object")return y;throw new TypeError("@@toPrimitive must return a primitive value.")}return(p==="string"?String:Number)(b)}let _=class extends e.default.Component{constructor(){super(...arguments),g(this,"state",{resizing:null,dragging:null,className:""}),g(this,"elementRef",e.default.createRef()),g(this,"onDragStart",(p,m)=>{let{node:y}=m;const{onDragStart:x,transformScale:w}=this.props;if(!x)return;const S={top:0,left:0},{offsetParent:k}=y;if(!k)return;const C=k.getBoundingClientRect(),R=y.getBoundingClientRect(),O=R.left/w,P=C.left/w,T=R.top/w,M=C.top/w;S.left=O-P+k.scrollLeft,S.top=T-M+k.scrollTop,this.setState({dragging:S});const{x:A,y:$}=(0,l.calcXY)(this.getPositionParams(),S.top,S.left,this.props.w,this.props.h);return x.call(this,this.props.i,A,$,{e:p,node:y,newPosition:S})}),g(this,"onDrag",(p,m,y)=>{let{node:x,deltaX:w,deltaY:S}=m;const{onDrag:k}=this.props;if(!k)return;if(!this.state.dragging)throw new Error("onDrag called before onDragStart.");let C=this.state.dragging.top+S,R=this.state.dragging.left+w;const{isBounded:O,i:P,w:T,h:M,containerWidth:A}=this.props,$=this.getPositionParams();if(O){const{offsetParent:q}=x;if(q){const{margin:Y,rowHeight:Z}=this.props,K=q.clientHeight-(0,l.calcGridItemWHPx)(M,Z,Y[1]);C=(0,l.clamp)(C,0,K);const ue=(0,l.calcGridColWidth)($),he=A-(0,l.calcGridItemWHPx)(T,ue,Y[0]);R=(0,l.clamp)(R,0,he)}}const D={top:C,left:R};y?this.setState({dragging:D}):(0,r.flushSync)(()=>{this.setState({dragging:D})});const{x:U,y:G}=(0,l.calcXY)($,C,R,T,M);return k.call(this,P,U,G,{e:p,node:x,newPosition:D})}),g(this,"onDragStop",(p,m)=>{let{node:y}=m;const{onDragStop:x}=this.props;if(!x)return;if(!this.state.dragging)throw new Error("onDragEnd called before onDragStart.");const{w,h:S,i:k}=this.props,{left:C,top:R}=this.state.dragging,O={top:R,left:C};this.setState({dragging:null});const{x:P,y:T}=(0,l.calcXY)(this.getPositionParams(),R,C,w,S);return x.call(this,k,P,T,{e:p,node:y,newPosition:O})}),g(this,"onResizeStop",(p,m,y)=>this.onResizeHandler(p,m,y,"onResizeStop")),g(this,"onResizeStart",(p,m,y)=>this.onResizeHandler(p,m,y,"onResizeStart")),g(this,"onResize",(p,m,y)=>this.onResizeHandler(p,m,y,"onResize"))}shouldComponentUpdate(p,m){if(this.props.children!==p.children||this.props.droppingPosition!==p.droppingPosition)return!0;const y=(0,l.calcGridItemPosition)(this.getPositionParams(this.props),this.props.x,this.props.y,this.props.w,this.props.h,this.state),x=(0,l.calcGridItemPosition)(this.getPositionParams(p),p.x,p.y,p.w,p.h,m);return!(0,o.fastPositionEqual)(y,x)||this.props.useCSSTransforms!==p.useCSSTransforms}componentDidMount(){this.moveDroppingItem({})}componentDidUpdate(p){this.moveDroppingItem(p)}moveDroppingItem(p){const{droppingPosition:m}=this.props;if(!m)return;const y=this.elementRef.current;if(!y)return;const x=p.droppingPosition||{left:0,top:0},{dragging:w}=this.state,S=w&&m.left!==x.left||m.top!==x.top;if(!w)this.onDragStart(m.e,{node:y,deltaX:m.left,deltaY:m.top});else if(S){const k=m.left-w.left,C=m.top-w.top;this.onDrag(m.e,{node:y,deltaX:k,deltaY:C},!0)}}getPositionParams(){let p=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.props;return{cols:p.cols,containerPadding:p.containerPadding,containerWidth:p.containerWidth,margin:p.margin,maxRows:p.maxRows,rowHeight:p.rowHeight}}createStyle(p){const{usePercentages:m,containerWidth:y,useCSSTransforms:x}=this.props;let w;return x?w=(0,o.setTransform)(p):(w=(0,o.setTopLeft)(p),m&&(w.left=(0,o.perc)(p.left/y),w.width=(0,o.perc)(p.width/y))),w}mixinDraggable(p,m){return e.default.createElement(a.DraggableCore,{disabled:!m,onStart:this.onDragStart,onDrag:this.onDrag,onStop:this.onDragStop,handle:this.props.handle,cancel:".react-resizable-handle"+(this.props.cancel?","+this.props.cancel:""),scale:this.props.transformScale,nodeRef:this.elementRef},p)}curryResizeHandler(p,m){return(y,x)=>m(y,x,p)}mixinResizable(p,m,y){const{cols:x,minW:w,minH:S,maxW:k,maxH:C,transformScale:R,resizeHandles:O,resizeHandle:P}=this.props,T=this.getPositionParams(),M=(0,l.calcGridItemPosition)(T,0,0,x,0).width,A=(0,l.calcGridItemPosition)(T,0,0,w,S),$=(0,l.calcGridItemPosition)(T,0,0,k,C),D=[A.width,A.height],U=[Math.min($.width,M),Math.min($.height,1/0)];return e.default.createElement(i.Resizable,{draggableOpts:{disabled:!y},className:y?void 0:"react-resizable-hide",width:m.width,height:m.height,minConstraints:D,maxConstraints:U,onResizeStop:this.curryResizeHandler(m,this.onResizeStop),onResizeStart:this.curryResizeHandler(m,this.onResizeStart),onResize:this.curryResizeHandler(m,this.onResize),transformScale:R,resizeHandles:O,handle:P},p)}onResizeHandler(p,m,y,x){let{node:w,size:S,handle:k}=m;const C=this.props[x];if(!C)return;const{x:R,y:O,i:P,maxH:T,minH:M,containerWidth:A}=this.props,{minW:$,maxW:D}=this.props;let U=S;w&&(U=(0,o.resizeItemInDirection)(k,y,S,A),(0,r.flushSync)(()=>{this.setState({resizing:x==="onResizeStop"?null:U})}));let{w:G,h:q}=(0,l.calcWH)(this.getPositionParams(),U.width,U.height,R,O,k);G=(0,l.clamp)(G,Math.max($,1),D),q=(0,l.clamp)(q,M,T),C.call(this,P,G,q,{e:p,node:w,size:U,handle:k})}render(){const{x:p,y:m,w:y,h:x,isDraggable:w,isResizable:S,droppingPosition:k,useCSSTransforms:C}=this.props,R=(0,l.calcGridItemPosition)(this.getPositionParams(),p,m,y,x,this.state),O=e.default.Children.only(this.props.children);let P=e.default.cloneElement(O,{ref:this.elementRef,className:(0,d.default)("react-grid-item",O.props.className,this.props.className,{static:this.props.static,resizing:!!this.state.resizing,"react-draggable":w,"react-draggable-dragging":!!this.state.dragging,dropping:!!k,cssTransforms:C}),style:h(h(h({},this.props.style),O.props.style),this.createStyle(R))});return P=this.mixinResizable(P,R,S),P=this.mixinDraggable(P,w),P}};return fs.default=_,g(_,"propTypes",{children:s.default.element,cols:s.default.number.isRequired,containerWidth:s.default.number.isRequired,rowHeight:s.default.number.isRequired,margin:s.default.array.isRequired,maxRows:s.default.number.isRequired,containerPadding:s.default.array.isRequired,x:s.default.number.isRequired,y:s.default.number.isRequired,w:s.default.number.isRequired,h:s.default.number.isRequired,minW:function(b,p){const m=b[p];if(typeof m!="number")return new Error("minWidth not Number");if(m>b.w||m>b.maxW)return new Error("minWidth larger than item width/maxWidth")},maxW:function(b,p){const m=b[p];if(typeof m!="number")return new Error("maxWidth not Number");if(m<b.w||m<b.minW)return new Error("maxWidth smaller than item width/minWidth")},minH:function(b,p){const m=b[p];if(typeof m!="number")return new Error("minHeight not Number");if(m>b.h||m>b.maxH)return new Error("minHeight larger than item height/maxHeight")},maxH:function(b,p){const m=b[p];if(typeof m!="number")return new Error("maxHeight not Number");if(m<b.h||m<b.minH)return new Error("maxHeight smaller than item height/minHeight")},i:s.default.string.isRequired,resizeHandles:c.resizeHandleAxesType,resizeHandle:c.resizeHandleType,onDragStop:s.default.func,onDragStart:s.default.func,onDrag:s.default.func,onResizeStop:s.default.func,onResizeStart:s.default.func,onResize:s.default.func,isDraggable:s.default.bool.isRequired,isResizable:s.default.bool.isRequired,isBounded:s.default.bool.isRequired,static:s.default.bool,useCSSTransforms:s.default.bool.isRequired,transformScale:s.default.number,className:s.default.string,handle:s.default.string,cancel:s.default.string,droppingPosition:s.default.shape({e:s.default.object.isRequired,left:s.default.number.isRequired,top:s.default.number.isRequired})}),g(_,"defaultProps",{className:"",cancel:"",handle:"",minH:1,minW:1,maxH:1/0,maxW:1/0,transformScale:1}),fs}var Xl;function xu(){if(Xl)return hs;Xl=1,Object.defineProperty(hs,"__esModule",{value:!0}),hs.default=void 0;var e=d(wt()),r=Gi(),s=c(wa()),a=Xr(),i=Yi(),o=c($_()),l=c(gu());function c(p){return p&&p.__esModule?p:{default:p}}function d(p,m){if(typeof WeakMap=="function")var y=new WeakMap,x=new WeakMap;return(d=function(w,S){if(!S&&w&&w.__esModule)return w;var k,C,R={__proto__:null,default:w};if(w===null||typeof w!="object"&&typeof w!="function")return R;if(k=S?x:y){if(k.has(w))return k.get(w);k.set(w,R)}for(const O in w)O!=="default"&&{}.hasOwnProperty.call(w,O)&&((C=(k=Object.defineProperty)&&Object.getOwnPropertyDescriptor(w,O))&&(C.get||C.set)?k(R,O,C):R[O]=w[O]);return R})(p,m)}function u(p,m){var y=Object.keys(p);if(Object.getOwnPropertySymbols){var x=Object.getOwnPropertySymbols(p);m&&(x=x.filter(function(w){return Object.getOwnPropertyDescriptor(p,w).enumerable})),y.push.apply(y,x)}return y}function f(p){for(var m=1;m<arguments.length;m++){var y=arguments[m]!=null?arguments[m]:{};m%2?u(Object(y),!0).forEach(function(x){h(p,x,y[x])}):Object.getOwnPropertyDescriptors?Object.defineProperties(p,Object.getOwnPropertyDescriptors(y)):u(Object(y)).forEach(function(x){Object.defineProperty(p,x,Object.getOwnPropertyDescriptor(y,x))})}return p}function h(p,m,y){return(m=g(m))in p?Object.defineProperty(p,m,{value:y,enumerable:!0,configurable:!0,writable:!0}):p[m]=y,p}function g(p){var m=v(p,"string");return typeof m=="symbol"?m:m+""}function v(p,m){if(typeof p!="object"||!p)return p;var y=p[Symbol.toPrimitive];if(y!==void 0){var x=y.call(p,m);if(typeof x!="object")return x;throw new TypeError("@@toPrimitive must return a primitive value.")}return(m==="string"?String:Number)(p)}const j="react-grid-layout";let _=!1;try{_=/firefox/i.test(navigator.userAgent)}catch{}let b=class extends e.Component{constructor(){super(...arguments),h(this,"state",{activeDrag:null,layout:(0,a.synchronizeLayoutWithChildren)(this.props.layout,this.props.children,this.props.cols,(0,a.compactType)(this.props),this.props.allowOverlap),mounted:!1,oldDragItem:null,oldLayout:null,oldResizeItem:null,resizing:!1,droppingDOMNode:null,children:[]}),h(this,"dragEnterCounter",0),h(this,"onDragStart",(m,y,x,w)=>{let{e:S,node:k}=w;const{layout:C}=this.state,R=(0,a.getLayoutItem)(C,m);if(!R)return;const O={w:R.w,h:R.h,x:R.x,y:R.y,placeholder:!0,i:m};return this.setState({oldDragItem:(0,a.cloneLayoutItem)(R),oldLayout:C,activeDrag:O}),this.props.onDragStart(C,R,R,null,S,k)}),h(this,"onDrag",(m,y,x,w)=>{let{e:S,node:k}=w;const{oldDragItem:C}=this.state;let{layout:R}=this.state;const{cols:O,allowOverlap:P,preventCollision:T}=this.props,M=(0,a.getLayoutItem)(R,m);if(!M)return;const A={w:M.w,h:M.h,x:M.x,y:M.y,placeholder:!0,i:m};R=(0,a.moveElement)(R,M,y,x,!0,T,(0,a.compactType)(this.props),O,P),this.props.onDrag(R,C,M,A,S,k),this.setState({layout:P?R:(0,a.compact)(R,(0,a.compactType)(this.props),O),activeDrag:A})}),h(this,"onDragStop",(m,y,x,w)=>{let{e:S,node:k}=w;if(!this.state.activeDrag)return;const{oldDragItem:C}=this.state;let{layout:R}=this.state;const{cols:O,preventCollision:P,allowOverlap:T}=this.props,M=(0,a.getLayoutItem)(R,m);if(!M)return;R=(0,a.moveElement)(R,M,y,x,!0,P,(0,a.compactType)(this.props),O,T);const $=T?R:(0,a.compact)(R,(0,a.compactType)(this.props),O);this.props.onDragStop($,C,M,null,S,k);const{oldLayout:D}=this.state;this.setState({activeDrag:null,layout:$,oldDragItem:null,oldLayout:null}),this.onLayoutMaybeChanged($,D)}),h(this,"onResizeStart",(m,y,x,w)=>{let{e:S,node:k}=w;const{layout:C}=this.state,R=(0,a.getLayoutItem)(C,m);R&&(this.setState({oldResizeItem:(0,a.cloneLayoutItem)(R),oldLayout:this.state.layout,resizing:!0}),this.props.onResizeStart(C,R,R,null,S,k))}),h(this,"onResize",(m,y,x,w)=>{let{e:S,node:k,size:C,handle:R}=w;const{oldResizeItem:O}=this.state,{layout:P}=this.state,{cols:T,preventCollision:M,allowOverlap:A}=this.props;let $=!1,D,U,G;const[q,Y]=(0,a.withLayoutItem)(P,m,K=>{let ue;return U=K.x,G=K.y,["sw","w","nw","n","ne"].indexOf(R)!==-1&&(["sw","nw","w"].indexOf(R)!==-1&&(U=K.x+(K.w-y),y=K.x!==U&&U<0?K.w:y,U=U<0?0:U),["ne","n","nw"].indexOf(R)!==-1&&(G=K.y+(K.h-x),x=K.y!==G&&G<0?K.h:x,G=G<0?0:G),$=!0),M&&!A&&(ue=(0,a.getAllCollisions)(P,f(f({},K),{},{w:y,h:x,x:U,y:G})).filter(xe=>xe.i!==K.i).length>0,ue&&(G=K.y,x=K.h,U=K.x,y=K.w,$=!1)),K.w=y,K.h=x,K});if(!Y)return;D=q,$&&(D=(0,a.moveElement)(q,Y,U,G,!0,this.props.preventCollision,(0,a.compactType)(this.props),T,A));const Z={w:Y.w,h:Y.h,x:Y.x,y:Y.y,static:!0,i:m};this.props.onResize(D,O,Y,Z,S,k),this.setState({layout:A?D:(0,a.compact)(D,(0,a.compactType)(this.props),T),activeDrag:Z})}),h(this,"onResizeStop",(m,y,x,w)=>{let{e:S,node:k}=w;const{layout:C,oldResizeItem:R}=this.state,{cols:O,allowOverlap:P}=this.props,T=(0,a.getLayoutItem)(C,m),M=P?C:(0,a.compact)(C,(0,a.compactType)(this.props),O);this.props.onResizeStop(M,R,T,null,S,k);const{oldLayout:A}=this.state;this.setState({activeDrag:null,layout:M,oldResizeItem:null,oldLayout:null,resizing:!1}),this.onLayoutMaybeChanged(M,A)}),h(this,"onDragOver",m=>{var y;if(m.preventDefault(),m.stopPropagation(),_&&!((y=m.nativeEvent.target)!==null&&y!==void 0&&y.classList.contains(j)))return!1;const{droppingItem:x,onDropDragOver:w,margin:S,cols:k,rowHeight:C,maxRows:R,width:O,containerPadding:P,transformScale:T}=this.props,M=w==null?void 0:w(m);if(M===!1)return this.state.droppingDOMNode&&this.removeDroppingPlaceholder(),!1;const A=f(f({},x),M),{layout:$}=this.state,D=m.currentTarget.getBoundingClientRect(),U=m.clientX-D.left,G=m.clientY-D.top,q={left:U/T,top:G/T,e:m};if(this.state.droppingDOMNode){if(this.state.droppingPosition){const{left:Y,top:Z}=this.state.droppingPosition;(Y!=U||Z!=G)&&this.setState({droppingPosition:q})}}else{const Y={cols:k,margin:S,maxRows:R,rowHeight:C,containerWidth:O,containerPadding:P||S},Z=(0,i.calcXY)(Y,G,U,A.w,A.h);this.setState({droppingDOMNode:e.createElement("div",{key:A.i}),droppingPosition:q,layout:[...$,f(f({},A),{},{x:Z.x,y:Z.y,static:!1,isDraggable:!0})]})}}),h(this,"removeDroppingPlaceholder",()=>{const{droppingItem:m,cols:y}=this.props,{layout:x}=this.state,w=(0,a.compact)(x.filter(S=>S.i!==m.i),(0,a.compactType)(this.props),y,this.props.allowOverlap);this.setState({layout:w,droppingDOMNode:null,activeDrag:null,droppingPosition:void 0})}),h(this,"onDragLeave",m=>{m.preventDefault(),m.stopPropagation(),this.dragEnterCounter--,this.dragEnterCounter===0&&this.removeDroppingPlaceholder()}),h(this,"onDragEnter",m=>{m.preventDefault(),m.stopPropagation(),this.dragEnterCounter++}),h(this,"onDrop",m=>{m.preventDefault(),m.stopPropagation();const{droppingItem:y}=this.props,{layout:x}=this.state,w=x.find(S=>S.i===y.i);this.dragEnterCounter=0,this.removeDroppingPlaceholder(),this.props.onDrop(x,w,m)})}componentDidMount(){this.setState({mounted:!0}),this.onLayoutMaybeChanged(this.state.layout,this.props.layout)}static getDerivedStateFromProps(m,y){let x;return y.activeDrag?null:(!(0,r.deepEqual)(m.layout,y.propsLayout)||m.compactType!==y.compactType?x=m.layout:(0,a.childrenEqual)(m.children,y.children)||(x=y.layout),x?{layout:(0,a.synchronizeLayoutWithChildren)(x,m.children,m.cols,(0,a.compactType)(m),m.allowOverlap),compactType:m.compactType,children:m.children,propsLayout:m.layout}:null)}shouldComponentUpdate(m,y){return this.props.children!==m.children||!(0,a.fastRGLPropsEqual)(this.props,m,r.deepEqual)||this.state.activeDrag!==y.activeDrag||this.state.mounted!==y.mounted||this.state.droppingPosition!==y.droppingPosition}componentDidUpdate(m,y){if(!this.state.activeDrag){const x=this.state.layout,w=y.layout;this.onLayoutMaybeChanged(x,w)}}containerHeight(){if(!this.props.autoSize)return;const m=(0,a.bottom)(this.state.layout),y=this.props.containerPadding?this.props.containerPadding[1]:this.props.margin[1];return m*this.props.rowHeight+(m-1)*this.props.margin[1]+y*2+"px"}onLayoutMaybeChanged(m,y){y||(y=this.state.layout),(0,r.deepEqual)(y,m)||this.props.onLayoutChange(m)}placeholder(){const{activeDrag:m}=this.state;if(!m)return null;const{width:y,cols:x,margin:w,containerPadding:S,rowHeight:k,maxRows:C,useCSSTransforms:R,transformScale:O}=this.props;return e.createElement(o.default,{w:m.w,h:m.h,x:m.x,y:m.y,i:m.i,className:"react-grid-placeholder ".concat(this.state.resizing?"placeholder-resizing":""),containerWidth:y,cols:x,margin:w,containerPadding:S||w,maxRows:C,rowHeight:k,isDraggable:!1,isResizable:!1,isBounded:!1,useCSSTransforms:R,transformScale:O},e.createElement("div",null))}processGridItem(m,y){if(!m||!m.key)return;const x=(0,a.getLayoutItem)(this.state.layout,String(m.key));if(!x)return null;const{width:w,cols:S,margin:k,containerPadding:C,rowHeight:R,maxRows:O,isDraggable:P,isResizable:T,isBounded:M,useCSSTransforms:A,transformScale:$,draggableCancel:D,draggableHandle:U,resizeHandles:G,resizeHandle:q}=this.props,{mounted:Y,droppingPosition:Z}=this.state,K=typeof x.isDraggable=="boolean"?x.isDraggable:!x.static&&P,ue=typeof x.isResizable=="boolean"?x.isResizable:!x.static&&T,he=x.resizeHandles||G,xe=K&&M&&x.isBounded!==!1;return e.createElement(o.default,{containerWidth:w,cols:S,margin:k,containerPadding:C||k,maxRows:O,rowHeight:R,cancel:D,handle:U,onDragStop:this.onDragStop,onDragStart:this.onDragStart,onDrag:this.onDrag,onResizeStart:this.onResizeStart,onResize:this.onResize,onResizeStop:this.onResizeStop,isDraggable:K,isResizable:ue,isBounded:xe,useCSSTransforms:A&&Y,usePercentages:!Y,transformScale:$,w:x.w,h:x.h,x:x.x,y:x.y,i:x.i,minH:x.minH,minW:x.minW,maxH:x.maxH,maxW:x.maxW,static:x.static,droppingPosition:y?Z:void 0,resizeHandles:he,resizeHandle:q},m)}render(){const{className:m,style:y,isDroppable:x,innerRef:w}=this.props,S=(0,s.default)(j,m),k=f({height:this.containerHeight()},y);return e.createElement("div",{ref:w,className:S,style:k,onDrop:x?this.onDrop:a.noop,onDragLeave:x?this.onDragLeave:a.noop,onDragEnter:x?this.onDragEnter:a.noop,onDragOver:x?this.onDragOver:a.noop},e.Children.map(this.props.children,C=>this.processGridItem(C)),x&&this.state.droppingDOMNode&&this.processGridItem(this.state.droppingDOMNode,!0),this.placeholder())}};return hs.default=b,h(b,"displayName","ReactGridLayout"),h(b,"propTypes",l.default),h(b,"defaultProps",{autoSize:!0,cols:12,className:"",style:{},draggableHandle:"",draggableCancel:"",containerPadding:null,rowHeight:150,maxRows:1/0,layout:[],margin:[10,10],isBounded:!1,isDraggable:!0,isResizable:!0,allowOverlap:!1,isDroppable:!1,useCSSTransforms:!0,transformScale:1,verticalCompact:!0,compactType:"vertical",preventCollision:!1,droppingItem:{i:"__dropping-elem__",h:1,w:1},resizeHandles:["se"],onLayoutChange:a.noop,onDragStart:a.noop,onDrag:a.noop,onDragStop:a.noop,onResizeStart:a.noop,onResize:a.noop,onResizeStop:a.noop,onDrop:a.noop,onDropDragOver:a.noop}),hs}var vs={},mr={},Kl;function yu(){if(Kl)return mr;Kl=1,Object.defineProperty(mr,"__esModule",{value:!0}),mr.findOrGenerateResponsiveLayout=a,mr.getBreakpointFromWidth=r,mr.getColsFromBreakpoint=s,mr.sortBreakpoints=i;var e=Xr();function r(o,l){const c=i(o);let d=c[0];for(let u=1,f=c.length;u<f;u++){const h=c[u];l>o[h]&&(d=h)}return d}function s(o,l){if(!l[o])throw new Error("ResponsiveReactGridLayout: `cols` entry for breakpoint "+o+" is missing!");return l[o]}function a(o,l,c,d,u,f){if(o[c])return(0,e.cloneLayout)(o[c]);let h=o[d];const g=i(l),v=g.slice(g.indexOf(c));for(let j=0,_=v.length;j<_;j++){const b=v[j];if(o[b]){h=o[b];break}}return h=(0,e.cloneLayout)(h||[]),(0,e.compact)((0,e.correctBounds)(h,{cols:u}),f,u)}function i(o){return Object.keys(o).sort(function(c,d){return o[c]-o[d]})}return mr}var Jl;function M_(){if(Jl)return vs;Jl=1,Object.defineProperty(vs,"__esModule",{value:!0}),vs.default=void 0;var e=d(wt()),r=c(ur()),s=Gi(),a=Xr(),i=yu(),o=c(xu());const l=["breakpoint","breakpoints","cols","layouts","margin","containerPadding","onBreakpointChange","onLayoutChange","onWidthChange"];function c(x){return x&&x.__esModule?x:{default:x}}function d(x,w){if(typeof WeakMap=="function")var S=new WeakMap,k=new WeakMap;return(d=function(C,R){if(!R&&C&&C.__esModule)return C;var O,P,T={__proto__:null,default:C};if(C===null||typeof C!="object"&&typeof C!="function")return T;if(O=R?k:S){if(O.has(C))return O.get(C);O.set(C,T)}for(const M in C)M!=="default"&&{}.hasOwnProperty.call(C,M)&&((P=(O=Object.defineProperty)&&Object.getOwnPropertyDescriptor(C,M))&&(P.get||P.set)?O(T,M,P):T[M]=C[M]);return T})(x,w)}function u(){return u=Object.assign?Object.assign.bind():function(x){for(var w=1;w<arguments.length;w++){var S=arguments[w];for(var k in S)({}).hasOwnProperty.call(S,k)&&(x[k]=S[k])}return x},u.apply(null,arguments)}function f(x,w){if(x==null)return{};var S,k,C=h(x,w);if(Object.getOwnPropertySymbols){var R=Object.getOwnPropertySymbols(x);for(k=0;k<R.length;k++)S=R[k],w.indexOf(S)===-1&&{}.propertyIsEnumerable.call(x,S)&&(C[S]=x[S])}return C}function h(x,w){if(x==null)return{};var S={};for(var k in x)if({}.hasOwnProperty.call(x,k)){if(w.indexOf(k)!==-1)continue;S[k]=x[k]}return S}function g(x,w){var S=Object.keys(x);if(Object.getOwnPropertySymbols){var k=Object.getOwnPropertySymbols(x);w&&(k=k.filter(function(C){return Object.getOwnPropertyDescriptor(x,C).enumerable})),S.push.apply(S,k)}return S}function v(x){for(var w=1;w<arguments.length;w++){var S=arguments[w]!=null?arguments[w]:{};w%2?g(Object(S),!0).forEach(function(k){j(x,k,S[k])}):Object.getOwnPropertyDescriptors?Object.defineProperties(x,Object.getOwnPropertyDescriptors(S)):g(Object(S)).forEach(function(k){Object.defineProperty(x,k,Object.getOwnPropertyDescriptor(S,k))})}return x}function j(x,w,S){return(w=_(w))in x?Object.defineProperty(x,w,{value:S,enumerable:!0,configurable:!0,writable:!0}):x[w]=S,x}function _(x){var w=b(x,"string");return typeof w=="symbol"?w:w+""}function b(x,w){if(typeof x!="object"||!x)return x;var S=x[Symbol.toPrimitive];if(S!==void 0){var k=S.call(x,w);if(typeof k!="object")return k;throw new TypeError("@@toPrimitive must return a primitive value.")}return(w==="string"?String:Number)(x)}const p=x=>Object.prototype.toString.call(x);function m(x,w){return x==null?null:Array.isArray(x)?x:x[w]}let y=class extends e.Component{constructor(){super(...arguments),j(this,"state",this.generateInitialState()),j(this,"onLayoutChange",w=>{this.props.onLayoutChange(w,v(v({},this.props.layouts),{},{[this.state.breakpoint]:w}))})}generateInitialState(){const{width:w,breakpoints:S,layouts:k,cols:C}=this.props,R=(0,i.getBreakpointFromWidth)(S,w),O=(0,i.getColsFromBreakpoint)(R,C),P=this.props.verticalCompact===!1?null:this.props.compactType;return{layout:(0,i.findOrGenerateResponsiveLayout)(k,S,R,R,O,P),breakpoint:R,cols:O}}static getDerivedStateFromProps(w,S){if(!(0,s.deepEqual)(w.layouts,S.layouts)){const{breakpoint:k,cols:C}=S;return{layout:(0,i.findOrGenerateResponsiveLayout)(w.layouts,w.breakpoints,k,k,C,w.compactType),layouts:w.layouts}}return null}componentDidUpdate(w){(this.props.width!=w.width||this.props.breakpoint!==w.breakpoint||!(0,s.deepEqual)(this.props.breakpoints,w.breakpoints)||!(0,s.deepEqual)(this.props.cols,w.cols))&&this.onWidthChange(w)}onWidthChange(w){const{breakpoints:S,cols:k,layouts:C,compactType:R}=this.props,O=this.props.breakpoint||(0,i.getBreakpointFromWidth)(this.props.breakpoints,this.props.width),P=this.state.breakpoint,T=(0,i.getColsFromBreakpoint)(O,k),M=v({},C);if(P!==O||w.breakpoints!==S||w.cols!==k){P in M||(M[P]=(0,a.cloneLayout)(this.state.layout));let D=(0,i.findOrGenerateResponsiveLayout)(M,S,O,P,T,R);D=(0,a.synchronizeLayoutWithChildren)(D,this.props.children,T,R,this.props.allowOverlap),M[O]=D,this.props.onBreakpointChange(O,T),this.props.onLayoutChange(D,M),this.setState({breakpoint:O,layout:D,cols:T})}const A=m(this.props.margin,O),$=m(this.props.containerPadding,O);this.props.onWidthChange(this.props.width,A,T,$)}render(){const w=this.props,{breakpoint:S,breakpoints:k,cols:C,layouts:R,margin:O,containerPadding:P,onBreakpointChange:T,onLayoutChange:M,onWidthChange:A}=w,$=f(w,l);return e.createElement(o.default,u({},$,{margin:m(O,this.state.breakpoint),containerPadding:m(P,this.state.breakpoint),onLayoutChange:this.onLayoutChange,layout:this.state.layout,cols:this.state.cols}))}};return vs.default=y,j(y,"propTypes",{breakpoint:r.default.string,breakpoints:r.default.object,allowOverlap:r.default.bool,cols:r.default.object,margin:r.default.oneOfType([r.default.array,r.default.object]),containerPadding:r.default.oneOfType([r.default.array,r.default.object]),layouts(x,w){if(p(x[w])!=="[object Object]")throw new Error("Layout property must be an object. Received: "+p(x[w]));Object.keys(x[w]).forEach(S=>{if(!(S in x.breakpoints))throw new Error("Each key in layouts must align with a key in breakpoints.");(0,a.validateLayout)(x.layouts[S],"layouts."+S)})},width:r.default.number.isRequired,onBreakpointChange:r.default.func,onLayoutChange:r.default.func,onWidthChange:r.default.func}),j(y,"defaultProps",{breakpoints:{lg:1200,md:996,sm:768,xs:480,xxs:0},cols:{lg:12,md:10,sm:6,xs:4,xxs:2},containerPadding:{lg:null,md:null,sm:null,xs:null,xxs:null},layouts:{},margin:[10,10],allowOverlap:!1,onBreakpointChange:a.noop,onLayoutChange:a.noop,onWidthChange:a.noop}),vs}var kn={},bu=(function(){if(typeof Map<"u")return Map;function e(r,s){var a=-1;return r.some(function(i,o){return i[0]===s?(a=o,!0):!1}),a}return(function(){function r(){this.__entries__=[]}return Object.defineProperty(r.prototype,"size",{get:function(){return this.__entries__.length},enumerable:!0,configurable:!0}),r.prototype.get=function(s){var a=e(this.__entries__,s),i=this.__entries__[a];return i&&i[1]},r.prototype.set=function(s,a){var i=e(this.__entries__,s);~i?this.__entries__[i][1]=a:this.__entries__.push([s,a])},r.prototype.delete=function(s){var a=this.__entries__,i=e(a,s);~i&&a.splice(i,1)},r.prototype.has=function(s){return!!~e(this.__entries__,s)},r.prototype.clear=function(){this.__entries__.splice(0)},r.prototype.forEach=function(s,a){a===void 0&&(a=null);for(var i=0,o=this.__entries__;i<o.length;i++){var l=o[i];s.call(a,l[1],l[0])}},r})()})(),gi=typeof window<"u"&&typeof document<"u"&&window.document===document,ea=(function(){return typeof global<"u"&&global.Math===Math?global:typeof self<"u"&&self.Math===Math?self:typeof window<"u"&&window.Math===Math?window:Function("return this")()})(),z_=(function(){return typeof requestAnimationFrame=="function"?requestAnimationFrame.bind(ea):function(e){return setTimeout(function(){return e(Date.now())},1e3/60)}})(),L_=2;function F_(e,r){var s=!1,a=!1,i=0;function o(){s&&(s=!1,e()),a&&c()}function l(){z_(o)}function c(){var d=Date.now();if(s){if(d-i<L_)return;a=!0}else s=!0,a=!1,setTimeout(l,r);i=d}return c}var I_=20,H_=["top","right","bottom","left","width","height","size","weight"],U_=typeof MutationObserver<"u",q_=(function(){function e(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=F_(this.refresh.bind(this),I_)}return e.prototype.addObserver=function(r){~this.observers_.indexOf(r)||this.observers_.push(r),this.connected_||this.connect_()},e.prototype.removeObserver=function(r){var s=this.observers_,a=s.indexOf(r);~a&&s.splice(a,1),!s.length&&this.connected_&&this.disconnect_()},e.prototype.refresh=function(){var r=this.updateObservers_();r&&this.refresh()},e.prototype.updateObservers_=function(){var r=this.observers_.filter(function(s){return s.gatherActive(),s.hasActive()});return r.forEach(function(s){return s.broadcastActive()}),r.length>0},e.prototype.connect_=function(){!gi||this.connected_||(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),U_?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},e.prototype.disconnect_=function(){!gi||!this.connected_||(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},e.prototype.onTransitionEnd_=function(r){var s=r.propertyName,a=s===void 0?"":s,i=H_.some(function(o){return!!~a.indexOf(o)});i&&this.refresh()},e.getInstance=function(){return this.instance_||(this.instance_=new e),this.instance_},e.instance_=null,e})(),vu=(function(e,r){for(var s=0,a=Object.keys(r);s<a.length;s++){var i=a[s];Object.defineProperty(e,i,{value:r[i],enumerable:!1,writable:!1,configurable:!0})}return e}),Br=(function(e){var r=e&&e.ownerDocument&&e.ownerDocument.defaultView;return r||ea}),wu=_a(0,0,0,0);function ta(e){return parseFloat(e)||0}function Ql(e){for(var r=[],s=1;s<arguments.length;s++)r[s-1]=arguments[s];return r.reduce(function(a,i){var o=e["border-"+i+"-width"];return a+ta(o)},0)}function W_(e){for(var r=["top","right","bottom","left"],s={},a=0,i=r;a<i.length;a++){var o=i[a],l=e["padding-"+o];s[o]=ta(l)}return s}function B_(e){var r=e.getBBox();return _a(0,0,r.width,r.height)}function V_(e){var r=e.clientWidth,s=e.clientHeight;if(!r&&!s)return wu;var a=Br(e).getComputedStyle(e),i=W_(a),o=i.left+i.right,l=i.top+i.bottom,c=ta(a.width),d=ta(a.height);if(a.boxSizing==="border-box"&&(Math.round(c+o)!==r&&(c-=Ql(a,"left","right")+o),Math.round(d+l)!==s&&(d-=Ql(a,"top","bottom")+l)),!Y_(e)){var u=Math.round(c+o)-r,f=Math.round(d+l)-s;Math.abs(u)!==1&&(c-=u),Math.abs(f)!==1&&(d-=f)}return _a(i.left,i.top,c,d)}var G_=(function(){return typeof SVGGraphicsElement<"u"?function(e){return e instanceof Br(e).SVGGraphicsElement}:function(e){return e instanceof Br(e).SVGElement&&typeof e.getBBox=="function"}})();function Y_(e){return e===Br(e).document.documentElement}function X_(e){return gi?G_(e)?B_(e):V_(e):wu}function K_(e){var r=e.x,s=e.y,a=e.width,i=e.height,o=typeof DOMRectReadOnly<"u"?DOMRectReadOnly:Object,l=Object.create(o.prototype);return vu(l,{x:r,y:s,width:a,height:i,top:s,right:r+a,bottom:i+s,left:r}),l}function _a(e,r,s,a){return{x:e,y:r,width:s,height:a}}var J_=(function(){function e(r){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=_a(0,0,0,0),this.target=r}return e.prototype.isActive=function(){var r=X_(this.target);return this.contentRect_=r,r.width!==this.broadcastWidth||r.height!==this.broadcastHeight},e.prototype.broadcastRect=function(){var r=this.contentRect_;return this.broadcastWidth=r.width,this.broadcastHeight=r.height,r},e})(),Q_=(function(){function e(r,s){var a=K_(s);vu(this,{target:r,contentRect:a})}return e})(),Z_=(function(){function e(r,s,a){if(this.activeObservations_=[],this.observations_=new bu,typeof r!="function")throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=r,this.controller_=s,this.callbackCtx_=a}return e.prototype.observe=function(r){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(!(typeof Element>"u"||!(Element instanceof Object))){if(!(r instanceof Br(r).Element))throw new TypeError('parameter 1 is not of type "Element".');var s=this.observations_;s.has(r)||(s.set(r,new J_(r)),this.controller_.addObserver(this),this.controller_.refresh())}},e.prototype.unobserve=function(r){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(!(typeof Element>"u"||!(Element instanceof Object))){if(!(r instanceof Br(r).Element))throw new TypeError('parameter 1 is not of type "Element".');var s=this.observations_;s.has(r)&&(s.delete(r),s.size||this.controller_.removeObserver(this))}},e.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},e.prototype.gatherActive=function(){var r=this;this.clearActive(),this.observations_.forEach(function(s){s.isActive()&&r.activeObservations_.push(s)})},e.prototype.broadcastActive=function(){if(this.hasActive()){var r=this.callbackCtx_,s=this.activeObservations_.map(function(a){return new Q_(a.target,a.broadcastRect())});this.callback_.call(r,s,r),this.clearActive()}},e.prototype.clearActive=function(){this.activeObservations_.splice(0)},e.prototype.hasActive=function(){return this.activeObservations_.length>0},e})(),ju=typeof WeakMap<"u"?new WeakMap:new bu,_u=(function(){function e(r){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var s=q_.getInstance(),a=new Z_(r,s,this);ju.set(this,a)}return e})();["observe","unobserve","disconnect"].forEach(function(e){_u.prototype[e]=function(){var r;return(r=ju.get(this))[e].apply(r,arguments)}});var eN=(function(){return typeof ea.ResizeObserver<"u"?ea.ResizeObserver:_u})();const tN=Object.freeze(Object.defineProperty({__proto__:null,default:eN},Symbol.toStringTag,{value:"Module"})),rN=Xu(tN);var Zl;function sN(){if(Zl)return kn;Zl=1,Object.defineProperty(kn,"__esModule",{value:!0}),kn.default=j;var e=l(wt()),r=o(ur()),s=o(rN),a=o(wa());const i=["measureBeforeMount"];function o(_){return _&&_.__esModule?_:{default:_}}function l(_,b){if(typeof WeakMap=="function")var p=new WeakMap,m=new WeakMap;return(l=function(y,x){if(!x&&y&&y.__esModule)return y;var w,S,k={__proto__:null,default:y};if(y===null||typeof y!="object"&&typeof y!="function")return k;if(w=x?m:p){if(w.has(y))return w.get(y);w.set(y,k)}for(const C in y)C!=="default"&&{}.hasOwnProperty.call(y,C)&&((S=(w=Object.defineProperty)&&Object.getOwnPropertyDescriptor(y,C))&&(S.get||S.set)?w(k,C,S):k[C]=y[C]);return k})(_,b)}function c(){return c=Object.assign?Object.assign.bind():function(_){for(var b=1;b<arguments.length;b++){var p=arguments[b];for(var m in p)({}).hasOwnProperty.call(p,m)&&(_[m]=p[m])}return _},c.apply(null,arguments)}function d(_,b){if(_==null)return{};var p,m,y=u(_,b);if(Object.getOwnPropertySymbols){var x=Object.getOwnPropertySymbols(_);for(m=0;m<x.length;m++)p=x[m],b.indexOf(p)===-1&&{}.propertyIsEnumerable.call(_,p)&&(y[p]=_[p])}return y}function u(_,b){if(_==null)return{};var p={};for(var m in _)if({}.hasOwnProperty.call(_,m)){if(b.indexOf(m)!==-1)continue;p[m]=_[m]}return p}function f(_,b,p){return(b=h(b))in _?Object.defineProperty(_,b,{value:p,enumerable:!0,configurable:!0,writable:!0}):_[b]=p,_}function h(_){var b=g(_,"string");return typeof b=="symbol"?b:b+""}function g(_,b){if(typeof _!="object"||!_)return _;var p=_[Symbol.toPrimitive];if(p!==void 0){var m=p.call(_,b);if(typeof m!="object")return m;throw new TypeError("@@toPrimitive must return a primitive value.")}return(b==="string"?String:Number)(_)}const v="react-grid-layout";function j(_){var b;return b=class extends e.Component{constructor(){super(...arguments),f(this,"state",{width:1280}),f(this,"elementRef",e.createRef()),f(this,"mounted",!1),f(this,"resizeObserver",void 0)}componentDidMount(){this.mounted=!0,this.resizeObserver=new s.default(y=>{if(this.elementRef.current instanceof HTMLElement){const w=y[0].contentRect.width;this.setState({width:w})}});const m=this.elementRef.current;m instanceof HTMLElement&&this.resizeObserver.observe(m)}componentWillUnmount(){this.mounted=!1;const m=this.elementRef.current;m instanceof HTMLElement&&this.resizeObserver.unobserve(m),this.resizeObserver.disconnect()}render(){const m=this.props,{measureBeforeMount:y}=m,x=d(m,i);return y&&!this.mounted?e.createElement("div",{className:(0,a.default)(this.props.className,v),style:this.props.style,ref:this.elementRef}):e.createElement(_,c({innerRef:this.elementRef},x,this.state))}},f(b,"defaultProps",{measureBeforeMount:!1}),f(b,"propTypes",{measureBeforeMount:r.default.bool}),b}return kn}var ec;function nN(){return ec||(ec=1,(function(e){e.exports=xu().default,e.exports.utils=Xr(),e.exports.calculateUtils=Yi(),e.exports.Responsive=M_().default,e.exports.Responsive.utils=yu(),e.exports.WidthProvider=sN().default})(Ha)),Ha.exports}var aN=nN();const iN=lc(aN),Jt=({title:e,icon:r,children:s,onRemove:a,className:i=""})=>n.jsxs("div",{className:`bg-dark-surface border border-dark-border rounded-lg shadow-lg h-full flex flex-col ${i}`,children:[n.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-dark-border",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Rh,{className:"h-4 w-4 text-slate-400 cursor-move drag-handle"}),r&&n.jsx("div",{className:"text-primary",children:r}),n.jsx("h3",{className:"text-lg font-semibold text-white",children:e})]}),a&&n.jsx("button",{onClick:a,className:"p-1 text-slate-400 hover:text-white hover:bg-dark-hover rounded transition-colors",children:n.jsx(bt,{className:"h-4 w-4"})})]}),n.jsx("div",{className:"flex-1 p-4 overflow-auto",children:s})]}),oN=({onRemove:e})=>{const[r,s]=E.useState([]),[a,i]=E.useState(!0);E.useEffect(()=>{o()},[]);const o=async()=>{try{const d=await(await fetch("/api/dashboard/data/recent_scans",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}})).json();s(d.scans||[])}catch(c){console.error("Failed to fetch recent scans:",c)}finally{i(!1)}},l=c=>{switch(c){case"completed":return n.jsx(Ye,{className:"h-4 w-4 text-green-500"});case"failed":return n.jsx(Tt,{className:"h-4 w-4 text-red-500"});case"running":return n.jsx(rt,{className:"h-4 w-4 text-blue-500 animate-spin"});default:return n.jsx(vt,{className:"h-4 w-4 text-yellow-500"})}};return n.jsx(Jt,{title:"Recent Scans",icon:n.jsx(xt,{className:"h-5 w-5"}),onRemove:e,children:a?n.jsx("div",{className:"flex items-center justify-center h-32",children:n.jsx(rt,{className:"h-6 w-6 text-primary animate-spin"})}):r.length===0?n.jsx("div",{className:"text-center text-slate-400 py-8",children:"No recent scans"}):n.jsx("div",{className:"space-y-2",children:r.map(c=>n.jsxs("div",{className:"flex items-center justify-between p-3 bg-dark-bg rounded-lg border border-dark-border hover:border-primary transition-colors",children:[n.jsxs("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[l(c.status),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("div",{className:"font-medium text-white truncate",children:c.name}),n.jsx("div",{className:"text-xs text-slate-400",children:fa(new Date(c.created_at),{addSuffix:!0})})]})]}),n.jsx("div",{className:"text-xs text-slate-400 capitalize",children:c.status})]},c.id))})})},lN=({onRemove:e})=>{const[r,s]=E.useState(null),[a,i]=E.useState(!0);E.useEffect(()=>{o()},[]);const o=async()=>{try{const c=await(await fetch("/api/dashboard/data/vulnerability_summary",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}})).json();s(c)}catch(l){console.error("Failed to fetch vulnerability summary:",l)}finally{i(!1)}};return n.jsx(Jt,{title:"Vulnerability Summary",icon:n.jsx(we,{className:"h-5 w-5"}),onRemove:e,children:a?n.jsx("div",{className:"flex items-center justify-center h-32",children:n.jsx(rt,{className:"h-6 w-6 text-primary animate-spin"})}):r?n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{className:"text-center p-4 bg-dark-bg rounded-lg border border-dark-border",children:[n.jsx("div",{className:"text-3xl font-bold text-white",children:r.total}),n.jsx("div",{className:"text-sm text-slate-400",children:"Total"})]}),n.jsxs("div",{className:"text-center p-4 bg-dark-bg rounded-lg border border-red-900/30",children:[n.jsx("div",{className:"text-3xl font-bold text-red-500",children:r.critical}),n.jsx("div",{className:"text-sm text-slate-400",children:"Critical"})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("div",{className:"w-3 h-3 rounded-full bg-orange-500"}),n.jsx("span",{className:"text-sm text-slate-300",children:"High"})]}),n.jsx("span",{className:"text-sm font-semibold text-white",children:r.high})]}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("div",{className:"w-3 h-3 rounded-full bg-yellow-500"}),n.jsx("span",{className:"text-sm text-slate-300",children:"Medium"})]}),n.jsx("span",{className:"text-sm font-semibold text-white",children:r.medium})]}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("div",{className:"w-3 h-3 rounded-full bg-blue-500"}),n.jsx("span",{className:"text-sm text-slate-300",children:"Low"})]}),n.jsx("span",{className:"text-sm font-semibold text-white",children:r.low})]})]})]}):n.jsx("div",{className:"text-center text-slate-400 py-8",children:"No vulnerability data"})})},cN=({onRemove:e})=>{const[r,s]=E.useState([]),[a,i]=E.useState(!0);E.useEffect(()=>{o()},[]);const o=async()=>{try{const u=await(await fetch("/api/dashboard/data/compliance_scores",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}})).json();s(u.scores||[])}catch(d){console.error("Failed to fetch compliance scores:",d)}finally{i(!1)}},l=d=>d>=90?"text-green-500":d>=70?"text-yellow-500":"text-red-500",c=d=>d>=90?"bg-green-500":d>=70?"bg-yellow-500":"bg-red-500";return n.jsx(Jt,{title:"Compliance Scores",icon:n.jsx(Oh,{className:"h-5 w-5"}),onRemove:e,children:a?n.jsx("div",{className:"flex items-center justify-center h-32",children:n.jsx(rt,{className:"h-6 w-6 text-primary animate-spin"})}):r.length===0?n.jsx("div",{className:"text-center text-slate-400 py-8",children:"No compliance data"}):n.jsx("div",{className:"space-y-4",children:r.map(d=>{const u=d.score/d.total*100;return n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("span",{className:"text-sm font-medium text-white",children:d.framework}),n.jsxs("span",{className:`text-sm font-bold ${l(u)}`,children:[d.score,"/",d.total," (",u.toFixed(0),"%)"]})]}),n.jsx("div",{className:"w-full bg-dark-bg rounded-full h-2",children:n.jsx("div",{className:`${c(u)} h-2 rounded-full transition-all duration-300`,style:{width:`${u}%`}})})]},d.framework)})})})},dN=({onRemove:e})=>{const[r,s]=E.useState([]),[a,i]=E.useState(!0);E.useEffect(()=>{o()},[]);const o=async()=>{try{const c=await(await fetch("/api/dashboard/data/scan_activity_chart",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}})).json();s(c.data||[])}catch(l){console.error("Failed to fetch scan activity:",l)}finally{i(!1)}};return n.jsx(Jt,{title:"Scan Activity (Last 30 Days)",icon:n.jsx(Lr,{className:"h-5 w-5"}),onRemove:e,children:a?n.jsx("div",{className:"flex items-center justify-center h-32",children:n.jsx(rt,{className:"h-6 w-6 text-primary animate-spin"})}):r.length===0?n.jsx("div",{className:"text-center text-slate-400 py-8",children:"No scan activity data"}):n.jsx(Be,{width:"100%",height:200,children:n.jsxs(Ls,{data:r,children:[n.jsx(Et,{strokeDasharray:"3 3",stroke:"#374151"}),n.jsx(mt,{dataKey:"date",stroke:"#9ca3af",tick:{fill:"#9ca3af",fontSize:12},tickFormatter:l=>{const c=new Date(l);return`${c.getMonth()+1}/${c.getDate()}`}}),n.jsx(lt,{stroke:"#9ca3af",tick:{fill:"#9ca3af",fontSize:12}}),n.jsx(Ve,{contentStyle:{backgroundColor:"#1f2937",border:"1px solid #374151",borderRadius:"0.5rem",color:"#fff"}}),n.jsx(nr,{type:"monotone",dataKey:"count",stroke:"#3b82f6",strokeWidth:2,dot:{fill:"#3b82f6",r:4}})]})})})},uN=({onRemove:e})=>{const[r,s]=E.useState([]),[a,i]=E.useState(!0);E.useEffect(()=>{o()},[]);const o=async()=>{try{const d=await(await fetch("/api/dashboard/data/top_risky_hosts",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}})).json();s(d.hosts||[])}catch(c){console.error("Failed to fetch risky hosts:",c)}finally{i(!1)}},l=c=>c>=50?"text-red-500":c>=20?"text-orange-500":"text-yellow-500";return n.jsx(Jt,{title:"Top Risky Hosts",icon:n.jsx(Ne,{className:"h-5 w-5"}),onRemove:e,children:a?n.jsx("div",{className:"flex items-center justify-center h-32",children:n.jsx(rt,{className:"h-6 w-6 text-primary animate-spin"})}):r.length===0?n.jsx("div",{className:"text-center text-slate-400 py-8",children:"No risky hosts found"}):n.jsx("div",{className:"space-y-2",children:r.map((c,d)=>n.jsxs("div",{className:"flex items-center justify-between p-3 bg-dark-bg rounded-lg border border-dark-border hover:border-primary transition-colors",children:[n.jsxs("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[n.jsx("div",{className:`text-xl font-bold ${l(c.risk_score)}`,children:d+1}),n.jsx(jt,{className:"h-4 w-4 text-slate-400"}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("div",{className:"font-medium text-white truncate",children:c.hostname||c.ip}),c.hostname&&n.jsx("div",{className:"text-xs text-slate-400",children:c.ip})]})]}),n.jsxs("div",{className:"flex flex-col items-end gap-1",children:[n.jsxs("div",{className:"text-sm font-semibold text-white",children:[c.vulnerability_count," vulns"]}),n.jsxs("div",{className:"flex gap-2 text-xs",children:[c.critical_count>0&&n.jsxs("span",{className:"text-red-500",children:[c.critical_count,"C"]}),c.high_count>0&&n.jsxs("span",{className:"text-orange-500",children:[c.high_count,"H"]})]})]})]},c.ip))})})},hN=({onRemove:e})=>{const[r,s]=E.useState([]),[a,i]=E.useState(!0);E.useEffect(()=>{o()},[]);const o=async()=>{try{const c=await(await fetch("/api/dashboard/data/critical_vulns",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}})).json();s(c.vulnerabilities||[])}catch(l){console.error("Failed to fetch critical vulnerabilities:",l)}finally{i(!1)}};return n.jsx(Jt,{title:"Critical Vulnerabilities",icon:n.jsx(to,{className:"h-5 w-5"}),onRemove:e,children:a?n.jsx("div",{className:"flex items-center justify-center h-32",children:n.jsx(rt,{className:"h-6 w-6 text-primary animate-spin"})}):r.length===0?n.jsx("div",{className:"text-center text-slate-400 py-8",children:"No critical vulnerabilities"}):n.jsx("div",{className:"space-y-2",children:r.map(l=>n.jsxs("div",{className:"flex items-center justify-between p-3 bg-dark-bg rounded-lg border border-red-900/30 hover:border-red-500 transition-colors",children:[n.jsxs("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[n.jsx(to,{className:"h-4 w-4 text-red-500 flex-shrink-0"}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("div",{className:"font-medium text-white truncate",children:l.vulnerability_id}),n.jsxs("div",{className:"text-xs text-slate-400",children:[l.host_ip,"  ",fa(new Date(l.created_at),{addSuffix:!0})]})]})]}),n.jsxs("div",{className:"flex flex-col items-end gap-1",children:[n.jsx("div",{className:"px-2 py-1 bg-red-900/30 text-red-500 text-xs font-semibold rounded",children:l.severity.toUpperCase()}),n.jsx("div",{className:"text-xs text-slate-400 capitalize",children:l.status.replace("_"," ")})]})]},l.id))})})},fN=({onRemove:e})=>{const[r,s]=E.useState([]),[a,i]=E.useState(!0);E.useEffect(()=>{o()},[]);const o=async()=>{try{const c=await(await fetch("/api/dashboard/data/upcoming_scheduled_scans",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}})).json();s(c.scans||[])}catch(l){console.error("Failed to fetch upcoming scans:",l)}finally{i(!1)}};return n.jsx(Jt,{title:"Upcoming Scheduled Scans",icon:n.jsx($r,{className:"h-5 w-5"}),onRemove:e,children:a?n.jsx("div",{className:"flex items-center justify-center h-32",children:n.jsx(rt,{className:"h-6 w-6 text-primary animate-spin"})}):r.length===0?n.jsx("div",{className:"text-center text-slate-400 py-8",children:"No upcoming scans"}):n.jsx("div",{className:"space-y-2",children:r.map(l=>n.jsxs("div",{className:"flex items-center justify-between p-3 bg-dark-bg rounded-lg border border-dark-border hover:border-primary transition-colors",children:[n.jsxs("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[n.jsx(vt,{className:"h-4 w-4 text-primary flex-shrink-0"}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("div",{className:"font-medium text-white truncate",children:l.name}),n.jsxs("div",{className:"text-xs text-slate-400 capitalize",children:[l.schedule_type," scan"]})]})]}),n.jsx("div",{className:"text-xs text-slate-400",children:fa(new Date(l.next_run_at),{addSuffix:!0})})]},l.id))})})},tc={critical:"bg-red-900/30 text-red-500 border-red-500/50",high:"bg-orange-900/30 text-orange-500 border-orange-500/50",medium:"bg-yellow-900/30 text-yellow-500 border-yellow-500/50",low:"bg-blue-900/30 text-blue-500 border-blue-500/50",info:"bg-slate-700/30 text-slate-400 border-slate-500/50"},mN={exposed_service:n.jsx(or,{className:"h-4 w-4"}),exploit_available:n.jsx(Ln,{className:"h-4 w-4"}),known_exploited_vulnerability:n.jsx(ro,{className:"h-4 w-4"}),critical_cve:n.jsx(Ne,{className:"h-4 w-4"}),new_cve:n.jsx(Ne,{className:"h-4 w-4"}),ransomware_threat:n.jsx(ro,{className:"h-4 w-4"}),misconfiguration:n.jsx(we,{className:"h-4 w-4"})},pN=({onRemove:e,limit:r=5})=>{const{data:s,isLoading:a,error:i}=Vu({queryKey:["threatAlerts","widget",r],queryFn:async()=>(await Um.getAlerts({limit:r})).data,refetchInterval:6e4}),o=(s==null?void 0:s.alerts)||[],l=(s==null?void 0:s.total)||0,c=o.filter(h=>h.severity==="critical").length,d=o.filter(h=>h.severity==="high").length,u=o.filter(h=>h.in_cisa_kev).length,f=o.filter(h=>h.exploit_available).length;return n.jsx(Jt,{title:"Threat Intelligence",icon:n.jsx(we,{className:"h-5 w-5"}),onRemove:e,children:a?n.jsx("div",{className:"flex items-center justify-center h-32",children:n.jsx(rt,{className:"h-6 w-6 text-primary animate-spin"})}):i?n.jsx("div",{className:"text-center text-red-400 py-8",children:"Failed to load threat alerts"}):o.length===0?n.jsxs("div",{className:"text-center text-slate-400 py-8",children:[n.jsx(we,{className:"h-8 w-8 mx-auto mb-2 opacity-50"}),n.jsx("p",{children:"No active threat alerts"}),n.jsx("p",{className:"text-xs mt-1",children:"Run threat intel enrichment on your scans to generate alerts"})]}):n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"grid grid-cols-4 gap-2 mb-4",children:[n.jsxs("div",{className:"bg-dark-bg rounded-lg p-2 text-center border border-dark-border",children:[n.jsx("div",{className:"text-lg font-bold text-red-400",children:c}),n.jsx("div",{className:"text-xs text-slate-400",children:"Critical"})]}),n.jsxs("div",{className:"bg-dark-bg rounded-lg p-2 text-center border border-dark-border",children:[n.jsx("div",{className:"text-lg font-bold text-orange-400",children:d}),n.jsx("div",{className:"text-xs text-slate-400",children:"High"})]}),n.jsxs("div",{className:"bg-dark-bg rounded-lg p-2 text-center border border-dark-border",children:[n.jsx("div",{className:"text-lg font-bold text-yellow-400",children:u}),n.jsx("div",{className:"text-xs text-slate-400",children:"KEV"})]}),n.jsxs("div",{className:"bg-dark-bg rounded-lg p-2 text-center border border-dark-border",children:[n.jsx("div",{className:"text-lg font-bold text-primary",children:f}),n.jsx("div",{className:"text-xs text-slate-400",children:"Exploits"})]})]}),n.jsx("div",{className:"space-y-2",children:o.slice(0,r).map(h=>n.jsx(gN,{alert:h},h.id))}),l>r&&n.jsx("div",{className:"mt-3 text-center",children:n.jsxs("a",{href:"/threat-intel",className:"text-sm text-primary hover:underline flex items-center justify-center gap-1",children:["View all ",l," alerts",n.jsx(Vs,{className:"h-4 w-4"})]})})]})})},gN=({alert:e})=>{const r=mN[e.alert_type]||n.jsx(Ne,{className:"h-4 w-4"}),s=tc[e.severity]||tc.info;return n.jsxs("div",{className:`flex items-center justify-between p-3 bg-dark-bg rounded-lg border ${e.severity==="critical"?"border-red-900/50":e.severity==="high"?"border-orange-900/50":"border-dark-border"} hover:border-primary/50 transition-colors`,children:[n.jsxs("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[n.jsx("div",{className:`p-1.5 rounded ${s}`,children:r}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("div",{className:"font-medium text-white text-sm truncate",title:e.title,children:e.title}),n.jsxs("div",{className:"text-xs text-slate-400 flex items-center gap-2",children:[n.jsx("span",{children:e.source}),n.jsx("span",{className:"text-slate-600",children:"|"}),n.jsx("span",{children:fa(new Date(e.created_at),{addSuffix:!0})})]})]})]}),n.jsxs("div",{className:"flex flex-col items-end gap-1 ml-2",children:[n.jsx("div",{className:`px-2 py-0.5 text-xs font-semibold rounded ${s}`,children:e.severity.toUpperCase()}),n.jsxs("div",{className:"flex gap-1",children:[e.in_cisa_kev&&n.jsx("span",{className:"px-1.5 py-0.5 text-xs bg-red-900/30 text-red-400 rounded",children:"KEV"}),e.exploit_available&&n.jsx("span",{className:"px-1.5 py-0.5 text-xs bg-purple-900/30 text-purple-400 rounded",children:"Exploit"})]})]})]})},xN=({onRemove:e})=>{const r=xi(),[s,a]=E.useState(null),[i,o]=E.useState([]),[l,c]=E.useState(!0),d=E.useCallback(async()=>{try{c(!0);const g=await Po.getMyAssignments({status:""});a(g.data.stats),o(g.data.assignments.slice(0,5))}catch(g){console.error("Failed to fetch assignments:",g)}finally{c(!1)}},[]);E.useEffect(()=>{d()},[d]);const u=async(g,v,j)=>{g.stopPropagation();try{await Po.updateAssignment(v,{status:j}),X.success("Status updated"),d()}catch(_){console.error("Failed to update status:",_),X.error("Failed to update status")}},f=g=>{const v="px-2 py-0.5 text-xs font-semibold rounded-full";switch(g.toLowerCase()){case"critical":return`${v} bg-red-500/20 text-red-400`;case"high":return`${v} bg-orange-500/20 text-orange-400`;case"medium":return`${v} bg-yellow-500/20 text-yellow-400`;case"low":return`${v} bg-blue-500/20 text-blue-400`;default:return`${v} bg-gray-500/20 text-gray-400`}},h=(g,v,j)=>{if(!g)return null;const b=new Date(g).toLocaleDateString();if(j)return n.jsxs("span",{className:"text-red-400 flex items-center gap-1",children:[n.jsx(Ne,{className:"h-3 w-3"}),"Overdue"]});if(v!==null){if(v===0)return n.jsx("span",{className:"text-yellow-400",children:"Today"});if(v<=3)return n.jsxs("span",{className:"text-yellow-400",children:[v,"d"]})}return n.jsx("span",{className:"text-gray-400",children:b})};return n.jsx(Jt,{title:"My Assignments",icon:n.jsx(Ah,{className:"h-5 w-5"}),onRemove:e,children:l?n.jsx("div",{className:"flex items-center justify-center h-32",children:n.jsx(rt,{className:"h-6 w-6 text-primary animate-spin"})}):n.jsxs(n.Fragment,{children:[s&&n.jsxs("div",{className:"grid grid-cols-4 gap-2 mb-4 p-3 bg-dark-bg rounded-lg border border-dark-border",children:[n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"text-lg font-bold text-white",children:s.total}),n.jsx("div",{className:"text-xs text-slate-400",children:"Total"})]}),n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"text-lg font-bold text-red-400",children:s.overdue}),n.jsx("div",{className:"text-xs text-slate-400",children:"Overdue"})]}),n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"text-lg font-bold text-yellow-400",children:s.in_progress}),n.jsx("div",{className:"text-xs text-slate-400",children:"In Progress"})]}),n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"text-lg font-bold text-cyan-400",children:s.critical+s.high}),n.jsx("div",{className:"text-xs text-slate-400",children:"High+"})]})]}),i.length===0?n.jsxs("div",{className:"text-center text-slate-400 py-8",children:[n.jsx(Ye,{className:"h-12 w-12 mx-auto mb-2 text-green-500/50"}),n.jsx("p",{children:"No assignments"}),n.jsx("p",{className:"text-sm mt-1",children:"You are all caught up!"})]}):n.jsx("div",{className:"space-y-2",children:i.map(g=>n.jsxs("div",{className:`flex items-center justify-between p-3 bg-dark-bg rounded-lg border border-dark-border hover:border-primary cursor-pointer transition-colors ${g.is_overdue?"border-red-900/50":""}`,onClick:()=>r(`/remediation?vuln=${g.id}`),children:[n.jsxs("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[n.jsx("span",{className:f(g.severity),children:g.severity.charAt(0).toUpperCase()}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("div",{className:"font-medium text-white truncate text-sm",children:g.vulnerability_id}),n.jsxs("div",{className:"text-xs text-slate-400",children:[g.host_ip,g.port?`:${g.port}`:""]})]})]}),n.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",onClick:v=>v.stopPropagation(),children:[n.jsxs("div",{className:"text-xs",children:[n.jsx($r,{className:"h-3 w-3 inline mr-1 text-gray-500"}),h(g.due_date,g.days_until_due,g.is_overdue)||n.jsx("span",{className:"text-gray-500",children:"--"})]}),g.status==="open"&&n.jsx("button",{onClick:v=>u(v,g.id,"in_progress"),className:"p-1 text-yellow-400 hover:bg-yellow-500/20 rounded transition-colors",title:"Start Working",children:n.jsx(Ba,{className:"h-4 w-4"})}),g.status==="in_progress"&&n.jsx("button",{onClick:v=>u(v,g.id,"resolved"),className:"p-1 text-green-400 hover:bg-green-500/20 rounded transition-colors",title:"Mark Resolved",children:n.jsx(Ye,{className:"h-4 w-4"})}),n.jsx(Vs,{className:"h-4 w-4 text-gray-500"})]})]},g.id))}),s&&s.total>5&&n.jsx("div",{className:"pt-3 text-center",children:n.jsxs("button",{onClick:()=>r("/remediation?assigned=me"),className:"text-cyan-400 hover:text-cyan-300 text-sm font-medium",children:["View all ",s.total," assignments"]})})]})})},rc=[{type:"recent_scans",label:"Recent Scans",minW:4,minH:2},{type:"vulnerability_summary",label:"Vulnerability Summary",minW:4,minH:2},{type:"compliance_scores",label:"Compliance Scores",minW:4,minH:2},{type:"scan_activity_chart",label:"Scan Activity",minW:6,minH:3},{type:"top_risky_hosts",label:"Top Risky Hosts",minW:4,minH:3},{type:"critical_vulns",label:"Critical Vulnerabilities",minW:4,minH:2},{type:"upcoming_scheduled_scans",label:"Upcoming Scans",minW:4,minH:2},{type:"threat_intel",label:"Threat Intelligence",minW:4,minH:3},{type:"my_assignments",label:"My Assignments",minW:4,minH:3}],yN=({editMode:e=!1,onEditModeChange:r})=>{const[s,a]=E.useState([]),[i,o]=E.useState(!0),[l,c]=E.useState(!1),[d,u]=E.useState(e),[f,h]=E.useState(!1);E.useEffect(()=>{g()},[]),E.useEffect(()=>{u(e)},[e]);const g=async()=>{try{const w=await(await fetch("/api/dashboard/widgets",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}})).json();a(w.widgets||[])}catch(x){console.error("Failed to fetch dashboard config:",x)}finally{o(!1)}},v=async()=>{c(!0);try{await fetch("/api/dashboard/widgets",{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},body:JSON.stringify({widgets:s})})}catch(x){console.error("Failed to save dashboard config:",x)}finally{c(!1)}},j=x=>{if(!d)return;const w=s.map(S=>{const k=x.find(C=>C.i===S.id);return k?{...S,x:k.x,y:k.y,w:k.w,h:k.h}:S});a(w)},_=x=>{const w=rc.find(k=>k.type===x);if(!w)return;const S={id:`${x}_${Date.now()}`,widget_type:x,x:0,y:1/0,w:w.minW,h:w.minH};a([...s,S]),h(!1)},b=x=>{a(s.filter(w=>w.id!==x))},p=()=>{const x=!d;u(x),r&&r(x)},m=x=>{const w={onRemove:d?()=>b(x.id):void 0};switch(x.widget_type){case"recent_scans":return n.jsx(oN,{...w});case"vulnerability_summary":return n.jsx(lN,{...w});case"compliance_scores":return n.jsx(cN,{...w});case"scan_activity_chart":return n.jsx(dN,{...w});case"top_risky_hosts":return n.jsx(uN,{...w});case"critical_vulns":return n.jsx(hN,{...w});case"upcoming_scheduled_scans":return n.jsx(fN,{...w});case"threat_intel":return n.jsx(pN,{...w});case"my_assignments":return n.jsx(xN,{...w});default:return null}};if(i)return n.jsx("div",{className:"flex items-center justify-center h-64",children:n.jsx("div",{className:"text-slate-400",children:"Loading dashboard..."})});const y=s.map(x=>({i:x.id,x:x.x,y:x.y,w:x.w,h:x.h}));return n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsxs("button",{onClick:p,className:`flex items-center gap-2 px-4 py-2 rounded-lg font-medium transition-colors ${d?"bg-primary text-white":"bg-dark-surface text-slate-300 hover:text-white border border-dark-border"}`,children:[n.jsx(so,{className:"h-4 w-4"}),d?"Exit Edit Mode":"Customize Dashboard"]}),d&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"relative",children:[n.jsxs("button",{onClick:()=>h(!f),className:"flex items-center gap-2 px-4 py-2 bg-dark-surface text-slate-300 hover:text-white border border-dark-border rounded-lg transition-colors",children:[n.jsx(Dr,{className:"h-4 w-4"}),"Add Widget"]}),f&&n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>h(!1)}),n.jsx("div",{className:"absolute top-full mt-2 left-0 bg-dark-surface border border-dark-border rounded-lg shadow-xl z-50 min-w-[200px]",children:rc.map(x=>n.jsx("button",{onClick:()=>_(x.type),className:"w-full text-left px-4 py-2 text-sm text-slate-300 hover:text-white hover:bg-dark-hover transition-colors first:rounded-t-lg last:rounded-b-lg",children:x.label},x.type))})]})]}),n.jsxs("button",{onClick:v,disabled:l,className:"flex items-center gap-2 px-4 py-2 bg-green-600 hover:bg-green-700 text-white rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[n.jsx(vi,{className:"h-4 w-4"}),l?"Saving...":"Save Layout"]})]})]}),d&&n.jsx("div",{className:"text-sm text-slate-400",children:"Drag widgets to reposition, resize from corners"})]}),n.jsx(iN,{className:"layout",layout:y,cols:12,rowHeight:100,width:1200,isDraggable:d,isResizable:d,onLayoutChange:j,draggableHandle:".drag-handle",children:s.map(x=>n.jsx("div",{className:d?"cursor-move":"",children:m(x)},x.id))}),s.length===0&&n.jsxs("div",{className:"text-center py-12 text-slate-400",children:[n.jsx(so,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),n.jsx("p",{children:"No widgets added yet"}),d&&n.jsx("button",{onClick:()=>h(!0),className:"mt-4 text-primary hover:underline",children:"Add your first widget"})]})]})},bN=({selectedCount:e,onClear:r,actions:s,onAction:a,isProcessing:i=!1})=>{const[o,l]=E.useState(null);if(e===0)return null;const c=h=>{h.requiresConfirmation?l(h.id):a(h.id)},d=()=>{o&&(a(o),l(null))},u=h=>{if(h.icon)return h.icon;switch(h.id){case"delete":return n.jsx(aa,{className:"h-4 w-4"});case"export":return n.jsx(Fr,{className:"h-4 w-4"});default:return null}},f=s.find(h=>h.id===o);return n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"fixed bottom-6 left-1/2 transform -translate-x-1/2 z-50 animate-slide-up",children:n.jsx("div",{className:"bg-dark-card border border-dark-border rounded-lg shadow-2xl px-6 py-4 min-w-[400px]",children:n.jsxs("div",{className:"flex items-center justify-between space-x-4",children:[n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx("div",{className:"bg-primary/10 text-primary rounded-full w-8 h-8 flex items-center justify-center font-semibold text-sm",children:e}),n.jsxs("span",{className:"text-white font-medium",children:[e," item",e!==1?"s":""," selected"]})]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[s.map(h=>n.jsxs(Re,{variant:h.variant||"secondary",onClick:()=>c(h),disabled:i,className:"flex items-center space-x-2",children:[u(h),n.jsx("span",{children:h.label})]},h.id)),n.jsx("button",{onClick:r,disabled:i,className:"text-slate-400 hover:text-white transition-colors p-2 rounded-lg hover:bg-dark-bg disabled:opacity-50",title:"Clear selection",children:n.jsx(bt,{className:"h-5 w-5"})})]})]})})}),o&&f&&n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-[60]",children:n.jsxs("div",{className:"bg-dark-card border border-dark-border rounded-lg p-6 max-w-md w-full mx-4",children:[n.jsx("h3",{className:"text-xl font-semibold text-white mb-4",children:"Confirm Action"}),n.jsx("p",{className:"text-slate-300 mb-6",children:f.confirmationMessage||`Are you sure you want to ${f.label.toLowerCase()} ${e} item${e!==1?"s":""}?`}),n.jsxs("div",{className:"flex justify-end space-x-3",children:[n.jsx(Re,{variant:"secondary",onClick:()=>l(null),disabled:i,children:"Cancel"}),n.jsx(Re,{variant:f.variant||"primary",onClick:d,disabled:i,children:"Confirm"})]})]})})]})},vN=({shortcuts:e,enabled:r=!0})=>{E.useEffect(()=>{if(!r)return;const s=a=>{if(!(a.target instanceof HTMLInputElement||a.target instanceof HTMLTextAreaElement||a.target instanceof HTMLSelectElement))for(const i of e){const o=i.ctrl===void 0||i.ctrl===(a.ctrlKey||a.metaKey),l=i.shift===void 0||i.shift===a.shiftKey,c=i.alt===void 0||i.alt===a.altKey,d=a.key.toLowerCase()===i.key.toLowerCase();if(o&&l&&c&&d){a.preventDefault(),i.action();break}}};return window.addEventListener("keydown",s),()=>{window.removeEventListener("keydown",s)}},[e,r])},wN=e=>{const r=[];return e.ctrl&&r.push("Ctrl"),e.shift&&r.push("Shift"),e.alt&&r.push("Alt"),r.push(e.key.toUpperCase()),r.join("+")},sc=()=>{const{activeScan:e,results:r,setActiveScan:s,scans:a,setScans:i}=yt(),[o,l]=E.useState(!1),[c,d]=E.useState("overview"),[u,f]=E.useState(new Set),[h,g]=E.useState(!1),v=x=>{const w=a.find(S=>S.id===x);w&&s(w)},j=async x=>{if(u.size!==0){g(!0);try{switch(x){case"delete":await _();break;case"export-json":await b("json");break;case"export-csv":await b("csv");break;default:X.warning("Unknown action")}}catch(w){console.error("Bulk action failed:",w),X.error("Bulk action failed")}finally{g(!1)}}},_=async()=>{try{const x=await Ot.bulkDelete(Array.from(u));x.data.failed&&x.data.failed>0?X.warning(x.data.message):X.success(x.data.message);const w=await Ot.getAll();i(w.data),f(new Set)}catch(x){throw X.error("Failed to delete scans"),x}},b=async x=>{try{const w=await Ot.bulkExport(Array.from(u),x,{include_vulnerabilities:!0,include_services:!0}),S=window.URL.createObjectURL(new Blob([w.data])),k=document.createElement("a");k.href=S,k.setAttribute("download","scans_export.zip"),document.body.appendChild(k),k.click(),k.remove(),window.URL.revokeObjectURL(S),X.success(`Exported ${u.size} scan(s) successfully`),f(new Set)}catch(w){throw X.error("Failed to export scans"),w}},p=[{id:"delete",label:"Delete",icon:n.jsx(aa,{className:"h-4 w-4"}),variant:"danger",requiresConfirmation:!0,confirmationMessage:`Are you sure you want to delete ${u.size} scan${u.size!==1?"s":""}? This action cannot be undone.`},{id:"export-json",label:"Export JSON",icon:n.jsx(Fr,{className:"h-4 w-4"}),variant:"secondary"},{id:"export-csv",label:"Export CSV",icon:n.jsx(Fr,{className:"h-4 w-4"}),variant:"secondary"}],m=E.useMemo(()=>e&&r.has(e.id)?r.get(e.id)||[]:Array.from(r.values()).flat(),[e,r]),y=[{key:"f",ctrl:!0,action:()=>{const x=document.querySelector('input[placeholder*="Search"]');x&&(x.focus(),x.select())},description:"Focus search"},{key:"k",ctrl:!0,action:()=>l(!o),description:"Show keyboard shortcuts"},{key:"Escape",action:()=>l(!1),description:"Close modals"}];return vN({shortcuts:y}),n.jsx(Qm,{children:n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h2",{className:"text-3xl font-bold text-slate-900 dark:text-white mb-2",children:"Network Triage Dashboard"}),n.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:"Create scans, monitor progress, and analyze results in real-time"})]}),n.jsxs("button",{onClick:()=>l(!0),className:"flex items-center gap-2 px-3 py-2 text-sm text-slate-500 dark:text-slate-400 hover:text-slate-900 dark:hover:text-white transition-colors border border-light-border dark:border-dark-border hover:border-primary rounded-lg",children:[n.jsx(no,{className:"h-4 w-4"}),"Shortcuts"]})]}),n.jsxs("div",{className:"flex gap-2 border-b border-light-border dark:border-dark-border pb-2",children:[n.jsxs("button",{onClick:()=>d("overview"),className:`flex items-center gap-2 px-4 py-2 rounded-t-lg text-sm font-medium transition-colors ${c==="overview"?"bg-light-surface dark:bg-dark-surface text-primary border-b-2 border-primary":"text-slate-500 dark:text-slate-400 hover:text-slate-900 dark:hover:text-white hover:bg-light-hover dark:hover:bg-dark-hover"}`,children:[n.jsx(Th,{className:"h-4 w-4"}),"Overview"]}),n.jsxs("button",{onClick:()=>d("scans"),className:`flex items-center gap-2 px-4 py-2 rounded-t-lg text-sm font-medium transition-colors ${c==="scans"?"bg-light-surface dark:bg-dark-surface text-primary border-b-2 border-primary":"text-slate-500 dark:text-slate-400 hover:text-slate-900 dark:hover:text-white hover:bg-light-hover dark:hover:bg-dark-hover"}`,children:[n.jsx(yc,{className:"h-4 w-4"}),"Scans"]}),n.jsxs("button",{onClick:()=>d("analytics"),className:`flex items-center gap-2 px-4 py-2 rounded-t-lg text-sm font-medium transition-colors ${c==="analytics"?"bg-light-surface dark:bg-dark-surface text-primary border-b-2 border-primary":"text-slate-500 dark:text-slate-400 hover:text-slate-900 dark:hover:text-white hover:bg-light-hover dark:hover:bg-dark-hover"}`,children:[n.jsx(Lr,{className:"h-4 w-4"}),"Analytics"]})]}),c==="overview"&&n.jsx(yN,{}),c==="scans"&&n.jsxs(n.Fragment,{children:[n.jsx(y_,{}),n.jsx(Sg,{onScanSelect:v}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[n.jsxs("div",{className:"space-y-6",children:[n.jsx(sp,{}),n.jsx(bg,{selectedIds:u,onSelectionChange:f})]}),n.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[n.jsx(Ng,{scanId:(e==null?void 0:e.id)||null}),(e==null?void 0:e.status)==="running"&&n.jsx(kg,{scanId:e.id}),m.length>0&&n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsx(v_,{hosts:m}),n.jsx(__,{hosts:m})]}),n.jsx(x_,{})]})]})]}),c==="analytics"&&n.jsx(k_,{}),n.jsx(bN,{selectedCount:u.size,onClear:()=>f(new Set),actions:p,onAction:j,isProcessing:h}),o&&n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"fixed inset-0 bg-black/50 z-40 animate-fadeIn",onClick:()=>l(!1)}),n.jsxs("div",{className:"fixed top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 z-50 bg-light-surface dark:bg-dark-surface border border-light-border dark:border-dark-border rounded-lg shadow-2xl p-6 w-full max-w-md animate-fadeIn",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsxs("h3",{className:"text-xl font-semibold text-slate-900 dark:text-white flex items-center gap-2",children:[n.jsx(no,{className:"h-5 w-5 text-primary"}),"Keyboard Shortcuts"]}),n.jsx("button",{onClick:()=>l(!1),className:"text-slate-500 dark:text-slate-400 hover:text-slate-900 dark:hover:text-white transition-colors",children:n.jsx("svg",{className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),n.jsx("div",{className:"space-y-2",children:y.map((x,w)=>n.jsxs("div",{className:"flex items-center justify-between py-2 px-3 bg-light-bg dark:bg-dark-bg rounded border border-light-border dark:border-dark-border",children:[n.jsx("span",{className:"text-sm text-slate-700 dark:text-slate-300",children:x.description}),n.jsx("kbd",{className:"px-2 py-1 bg-light-surface dark:bg-dark-surface border border-light-border dark:border-dark-border rounded text-xs font-mono text-primary",children:wN(x)})]},w))}),n.jsxs("p",{className:"text-xs text-slate-500 mt-4 text-center",children:["Press ",n.jsx("kbd",{className:"px-1 py-0.5 bg-light-surface dark:bg-dark-surface border border-light-border dark:border-dark-border rounded text-xs font-mono",children:"Esc"})," to close"]})]})]})]})})},jN=new Gu({defaultOptions:{queries:{staleTime:1e3*60*5,retry:1}}}),_N=E.lazy(()=>de(()=>import("./AdminPage-B3avn0ot.js"),__vite__mapDeps([0,1,2,3,4]))),NN=E.lazy(()=>de(()=>import("./SettingsPage-CNu-u_bZ.js"),__vite__mapDeps([5,1,2,3,6,4]))),SN=E.lazy(()=>de(()=>import("./SalesPage-DWglCC6e.js"),__vite__mapDeps([7,1,2,3]))),kN=E.lazy(()=>de(()=>import("./AssetsPage-CUam4NuI.js"),__vite__mapDeps([8,1,2,3,4]))),CN=E.lazy(()=>de(()=>import("./WebAppScanPage-BthmHoyO.js"),__vite__mapDeps([9,1,2,3,4]))),PN=E.lazy(()=>de(()=>import("./DnsToolsPage-D0f7fNx2.js"),__vite__mapDeps([10,1,2,3,4]))),EN=E.lazy(()=>de(()=>import("./CompliancePage-CvWSxEYi.js"),__vite__mapDeps([11,1,2,3,4]))),RN=E.lazy(()=>de(()=>import("./RemediationPage-ClPk_v7y.js"),__vite__mapDeps([12,1,2,3,13,4]))),ON=E.lazy(()=>de(()=>import("./ManualAssessmentPage-DbmrvIBg.js"),__vite__mapDeps([14,1,2,3,4]))),AN=E.lazy(()=>de(()=>import("./AssessmentDetailPage-BHskkJGw.js"),__vite__mapDeps([15,1,2,3,4]))),nc=E.lazy(()=>de(()=>import("./MethodologyPage-digtrkjC.js"),__vite__mapDeps([16,1,2,3,4]))),TN=E.lazy(()=>de(()=>import("./ExecutiveDashboardPage-CniQYNXC.js"),__vite__mapDeps([17,1,2,3,4]))),DN=E.lazy(()=>de(()=>import("./ApiSecurityPage-B3fO0u5o.js"),__vite__mapDeps([18,1,2,3,4]))),$N=E.lazy(()=>de(()=>import("./AttackPathsPage-BIJ7hKxY.js"),__vite__mapDeps([19,1,2,3,4]))),MN=E.lazy(()=>de(()=>import("./ScanComparisonPage-DtnOdPUT.js"),__vite__mapDeps([20,1,2,6,3,4]))),zN=E.lazy(()=>de(()=>import("./WorkflowsPage-BttjZPbJ.js"),__vite__mapDeps([21,1,2,3,13,4]))),LN=E.lazy(()=>de(()=>import("./ContainerSecurityPage-Br2_fUcm.js"),__vite__mapDeps([22,1,2,3,4]))),FN=E.lazy(()=>de(()=>import("./IacSecurityPage-C1GZyDZl.js"),__vite__mapDeps([23,1,2,3,4]))),IN=E.lazy(()=>de(()=>import("./PluginsPage-DhdcRHaD.js"),__vite__mapDeps([24,1,2,3,4]))),HN=E.lazy(()=>de(()=>import("./AgentsPage-B75mTuE4.js"),__vite__mapDeps([25,1,2,3,4]))),UN=E.lazy(()=>de(()=>import("./MeshAgentsPage-B9cyyt2S.js"),__vite__mapDeps([26,1,2,3,4]))),qN=E.lazy(()=>de(()=>import("./EvidencePage-BsBIXJ8h.js"),__vite__mapDeps([27,1,2,3,4]))),WN=E.lazy(()=>de(()=>import("./SiemPage-BPPBXMmC.js"),__vite__mapDeps([28,1,2,3,4]))),BN=E.lazy(()=>de(()=>import("./AttackSimulationPage-CFd4rJ8R.js"),__vite__mapDeps([29,1,2,3,4]))),ac=E.lazy(()=>de(()=>import("./ExploitationPage-qhoNqncH.js"),__vite__mapDeps([30,1,2,3,4]))),VN=E.lazy(()=>de(()=>import("./NucleiPage-DzV70r4C.js"),__vite__mapDeps([31,1,2,3,4]))),GN=E.lazy(()=>de(()=>import("./ReportsPage-D7PkX4PT.js"),__vite__mapDeps([32,1,2,3,4]))),YN=E.lazy(()=>de(()=>import("./AssetDiscoveryPage-C_n5iQB_.js"),__vite__mapDeps([33,1,2,3,4]))),XN=E.lazy(()=>de(()=>import("./PrivescPage-Bq47iaUw.js"),__vite__mapDeps([34,1,2,3,4]))),ic=E.lazy(()=>de(()=>import("./BloodHoundPage-cvLs-oAn.js"),__vite__mapDeps([35,1,2,3,4]))),KN=E.lazy(()=>de(()=>import("./PhishingPage-6ZSFeun7.js"),__vite__mapDeps([36,1,2,3,4]))),JN=E.lazy(()=>de(()=>import("./C2Page-wcZE7vfH.js"),__vite__mapDeps([37,1,2,3,4]))),QN=E.lazy(()=>de(()=>import("./WirelessPage-yQh_wve6.js"),__vite__mapDeps([38,1,2,3,4]))),ZN=E.lazy(()=>de(()=>import("./CrmDashboard-Ye32dzNg.js"),__vite__mapDeps([39,1,2,3,4]))),e1=E.lazy(()=>de(()=>import("./CustomerList-CSfI2153.js"),__vite__mapDeps([40,1,2,3,4]))),t1=E.lazy(()=>de(()=>import("./CustomerDetail-sgu9zMM_.js"),__vite__mapDeps([41,1,2,3,4]))),r1=E.lazy(()=>de(()=>import("./EngagementsPage-CVPKCeky.js"),__vite__mapDeps([42,1,2,3,4]))),s1=E.lazy(()=>de(()=>import("./ContractsPage-B8N_ioa5.js"),__vite__mapDeps([43,1,2,3,4]))),n1=E.lazy(()=>de(()=>import("./TimeTrackingPage-C9_i8QJv.js"),__vite__mapDeps([44,1,2,3,4]))),a1=E.lazy(()=>de(()=>import("./PortalLogin-BeCfthvL.js"),__vite__mapDeps([45,1,2,3,4]))),i1=E.lazy(()=>de(()=>import("./PortalForgotPassword-B3EYrHi6.js"),__vite__mapDeps([46,1,2,3,4]))),o1=E.lazy(()=>de(()=>import("./PortalResetPassword-pvWUeJ-h.js"),__vite__mapDeps([47,1,2,3,4]))),l1=E.lazy(()=>de(()=>import("./PortalDashboard-DEspuYb6.js"),__vite__mapDeps([48,1,2,49,3,4]))),c1=E.lazy(()=>de(()=>import("./PortalEngagementList-DVCvf-Hh.js"),__vite__mapDeps([50,1,2,49,3,4]))),d1=E.lazy(()=>de(()=>import("./PortalEngagementDetail-CwVa_Ut9.js"),__vite__mapDeps([51,1,2,49,3,4]))),u1=E.lazy(()=>de(()=>import("./PortalVulnerabilityList-CYHS5gRB.js"),__vite__mapDeps([52,1,2,49,3,4]))),h1=E.lazy(()=>de(()=>import("./PortalVulnerabilityDetail-p9gy9w7e.js"),__vite__mapDeps([53,1,2,49,3,4]))),f1=E.lazy(()=>de(()=>import("./PortalReportList-BBzwrKlB.js"),__vite__mapDeps([54,1,2,49,3,4]))),m1=E.lazy(()=>de(()=>import("./PortalProfile-DuT09uTQ.js"),__vite__mapDeps([55,1,2,49,3,4]))),p1=()=>n.jsx("div",{className:"min-h-screen bg-light-bg dark:bg-gray-900 flex items-center justify-center",children:n.jsxs("div",{className:"flex flex-col items-center gap-4",children:[n.jsx("div",{className:"w-12 h-12 border-4 border-primary border-t-transparent rounded-full animate-spin"}),n.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm",children:"Loading..."})]})}),fe=({children:e})=>Ir(s=>s.isAuthenticated)?n.jsx(n.Fragment,{children:e}):n.jsx(Ds,{to:"/",replace:!0}),g1=({children:e})=>{const r=Ir(a=>a.isAuthenticated),s=Ir(a=>a.isAdmin);return r?s()?n.jsx(n.Fragment,{children:e}):n.jsx(Ds,{to:"/dashboard",replace:!0}):n.jsx(Ds,{to:"/",replace:!0})},pr=({children:e})=>Dm.isAuthenticated()?n.jsx(n.Fragment,{children:e}):n.jsx(Ds,{to:"/portal/login",replace:!0}),x1=()=>{const{resolvedTheme:e}=ed();return n.jsx(Dh,{position:"top-right",autoClose:3e3,hideProgressBar:!1,newestOnTop:!0,closeOnClick:!0,rtl:!1,pauseOnFocusLoss:!0,draggable:!0,pauseOnHover:!0,theme:e})};function y1(){return n.jsx(Yu,{client:jN,children:n.jsx(zm,{defaultTheme:"system",children:n.jsxs(Ku,{children:[n.jsx(E.Suspense,{fallback:n.jsx(p1,{}),children:n.jsxs(Ju,{children:[n.jsx(ae,{path:"/",element:n.jsx(Xm,{})}),n.jsx(ae,{path:"/sales",element:n.jsx(SN,{})}),n.jsx(ae,{path:"/dashboard",element:n.jsx(fe,{children:n.jsx(sc,{})})}),n.jsx(ae,{path:"/dashboard/:scanId",element:n.jsx(fe,{children:n.jsx(sc,{})})}),n.jsx(ae,{path:"/admin",element:n.jsx(g1,{children:n.jsx(_N,{})})}),n.jsx(ae,{path:"/settings",element:n.jsx(fe,{children:n.jsx(NN,{})})}),n.jsx(ae,{path:"/assets",element:n.jsx(fe,{children:n.jsx(kN,{})})}),n.jsx(ae,{path:"/webapp-scan",element:n.jsx(fe,{children:n.jsx(CN,{})})}),n.jsx(ae,{path:"/dns-tools",element:n.jsx(fe,{children:n.jsx(PN,{})})}),n.jsx(ae,{path:"/compliance",element:n.jsx(fe,{children:n.jsx(EN,{})})}),n.jsx(ae,{path:"/evidence",element:n.jsx(fe,{children:n.jsx(qN,{})})}),n.jsx(ae,{path:"/remediation",element:n.jsx(fe,{children:n.jsx(RN,{})})}),n.jsx(ae,{path:"/reports",element:n.jsx(fe,{children:n.jsx(GN,{})})}),n.jsx(ae,{path:"/workflows",element:n.jsx(fe,{children:n.jsx(zN,{})})}),n.jsx(ae,{path:"/manual-assessments",element:n.jsx(fe,{children:n.jsx(ON,{})})}),n.jsx(ae,{path:"/manual-assessments/:assessmentId",element:n.jsx(fe,{children:n.jsx(AN,{})})}),n.jsx(ae,{path:"/methodology",element:n.jsx(fe,{children:n.jsx(nc,{})})}),n.jsx(ae,{path:"/methodology/:checklistId",element:n.jsx(fe,{children:n.jsx(nc,{})})}),n.jsx(ae,{path:"/executive-dashboard",element:n.jsx(fe,{children:n.jsx(TN,{})})}),n.jsx(ae,{path:"/api-security",element:n.jsx(fe,{children:n.jsx(DN,{})})}),n.jsx(ae,{path:"/attack-paths/:scanId",element:n.jsx(fe,{children:n.jsx($N,{})})}),n.jsx(ae,{path:"/compare",element:n.jsx(fe,{children:n.jsx(MN,{})})}),n.jsx(ae,{path:"/container-security",element:n.jsx(fe,{children:n.jsx(LN,{})})}),n.jsx(ae,{path:"/iac-security",element:n.jsx(fe,{children:n.jsx(FN,{})})}),n.jsx(ae,{path:"/attack-simulation",element:n.jsx(fe,{children:n.jsx(BN,{})})}),n.jsx(ae,{path:"/exploitation",element:n.jsx(fe,{children:n.jsx(ac,{})})}),n.jsx(ae,{path:"/exploitation/:tab",element:n.jsx(fe,{children:n.jsx(ac,{})})}),n.jsx(ae,{path:"/nuclei",element:n.jsx(fe,{children:n.jsx(VN,{})})}),n.jsx(ae,{path:"/discovery",element:n.jsx(fe,{children:n.jsx(YN,{})})}),n.jsx(ae,{path:"/privesc",element:n.jsx(fe,{children:n.jsx(XN,{})})}),n.jsx(ae,{path:"/bloodhound",element:n.jsx(fe,{children:n.jsx(ic,{})})}),n.jsx(ae,{path:"/bloodhound/:importId",element:n.jsx(fe,{children:n.jsx(ic,{})})}),n.jsx(ae,{path:"/phishing",element:n.jsx(fe,{children:n.jsx(KN,{})})}),n.jsx(ae,{path:"/c2",element:n.jsx(fe,{children:n.jsx(JN,{})})}),n.jsx(ae,{path:"/wireless",element:n.jsx(fe,{children:n.jsx(QN,{})})}),n.jsx(ae,{path:"/plugins",element:n.jsx(fe,{children:n.jsx(IN,{})})}),n.jsx(ae,{path:"/agents",element:n.jsx(fe,{children:n.jsx(HN,{})})}),n.jsx(ae,{path:"/agents/mesh",element:n.jsx(fe,{children:n.jsx(UN,{})})}),n.jsx(ae,{path:"/siem",element:n.jsx(fe,{children:n.jsx(WN,{})})}),n.jsx(ae,{path:"/crm",element:n.jsx(fe,{children:n.jsx(ZN,{})})}),n.jsx(ae,{path:"/crm/customers",element:n.jsx(fe,{children:n.jsx(e1,{})})}),n.jsx(ae,{path:"/crm/customers/:id",element:n.jsx(fe,{children:n.jsx(t1,{})})}),n.jsx(ae,{path:"/crm/engagements",element:n.jsx(fe,{children:n.jsx(r1,{})})}),n.jsx(ae,{path:"/crm/contracts",element:n.jsx(fe,{children:n.jsx(s1,{})})}),n.jsx(ae,{path:"/crm/time-tracking",element:n.jsx(fe,{children:n.jsx(n1,{})})}),n.jsx(ae,{path:"/portal/login",element:n.jsx(a1,{})}),n.jsx(ae,{path:"/portal/forgot-password",element:n.jsx(i1,{})}),n.jsx(ae,{path:"/portal/reset-password",element:n.jsx(o1,{})}),n.jsx(ae,{path:"/portal/dashboard",element:n.jsx(pr,{children:n.jsx(l1,{})})}),n.jsx(ae,{path:"/portal/engagements",element:n.jsx(pr,{children:n.jsx(c1,{})})}),n.jsx(ae,{path:"/portal/engagements/:id",element:n.jsx(pr,{children:n.jsx(d1,{})})}),n.jsx(ae,{path:"/portal/vulnerabilities",element:n.jsx(pr,{children:n.jsx(u1,{})})}),n.jsx(ae,{path:"/portal/vulnerabilities/:id",element:n.jsx(pr,{children:n.jsx(h1,{})})}),n.jsx(ae,{path:"/portal/reports",element:n.jsx(pr,{children:n.jsx(f1,{})})}),n.jsx(ae,{path:"/portal/profile",element:n.jsx(pr,{children:n.jsx(m1,{})})}),n.jsx(ae,{path:"*",element:n.jsx(Ds,{to:"/",replace:!0})})]})}),n.jsx(x1,{})]})})})}Xh.createRoot(document.getElementById("root")).render(n.jsx(yi.StrictMode,{children:n.jsx(y1,{})}));export{Te as $,m2 as A,Re as B,le as C,f2 as D,s2 as E,t2 as F,un as G,Po as H,Ue as I,Ir as J,Z1 as K,At as L,y2 as M,a2 as N,o2 as O,n2 as P,i2 as Q,c2 as R,Eo as S,d2 as T,h2 as U,u2 as V,od as W,Q1 as X,ke as Y,x2 as Z,b2 as _,G1 as a,w2 as a0,v2 as a1,Jm as a2,j2 as a3,N as a4,Es as a5,_2 as a6,N2 as a7,Dm as a8,q1 as a9,W1 as aa,B1 as ab,V1 as ac,U1 as ad,st as b,fa as c,Qm as d,In as e,ar as f,Kg as g,Rs as h,l2 as i,qm as j,J1 as k,e2 as l,Lm as m,K1 as n,r2 as o,Im as p,Ot as q,Ro as r,Y1 as s,Fm as t,X1 as u,Hm as v,p2 as w,g2 as x,Or as y,Oo as z};
