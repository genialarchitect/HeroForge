import{j as e}from"./vendor-state-oFDmcCcB.js";import{r as n,R as Q,u as Y,i as Z,L as P}from"./vendor-react-5KxtEOLM.js";import{u as G}from"./academyStore-DZGOKdtv.js";import{H as W}from"./index-DU1ke8Sf.js";import{aY as X,aZ as K,bo as ee,bp as te,bq as se,br as ae,bs as re,d as ne,J as le,p as A,g as R,aU as B,$ as D,N as H,F as J,D as ce,B as F,A as oe,C as U,b1 as V}from"./vendor-ui-BlFJDRaq.js";import"./academyApi-CeTYPipX.js";import"./vendor-utils-DfRopTPV.js";function ie(a){const t=/(?:youtube\.com\/(?:watch\?v=|embed\/)|youtu\.be\/)([a-zA-Z0-9_-]{11})/,r=a.match(t);if(r)return{type:"youtube",id:r[1]};const s=/(?:vimeo\.com\/(?:video\/)?|player\.vimeo\.com\/video\/)(\d+)/,c=a.match(s);return c?{type:"vimeo",id:c[1]}:{type:"unknown",id:null}}const de=({videoUrl:a,chapters:t=[],initialTimestamp:r=0,onProgress:s,onComplete:c})=>{const x=n.useRef(null),[i,p]=n.useState(!1),[d,y]=n.useState(r),[u,v]=n.useState(0),[f,N]=n.useState(!1),[g,M]=n.useState(!1),[w,S]=n.useState(0),o=n.useRef(Date.now()),m=n.useRef(null),{type:k,id:j}=ie(a),T=n.useCallback(()=>{if(k==="youtube"&&j){const l=new URLSearchParams({enablejsapi:"1",start:Math.floor(r).toString(),rel:"0",modestbranding:"1"});return`https://www.youtube.com/embed/${j}?${l.toString()}`}if(k==="vimeo"&&j){const l=new URLSearchParams({autopause:"0"});return`https://player.vimeo.com/video/${j}?${l.toString()}#t=${Math.floor(r)}s`}return a},[k,j,r,a]);n.useEffect(()=>(i?m.current=setInterval(()=>{S(l=>l+1),y(l=>l+1)},1e3):m.current&&clearInterval(m.current),()=>{m.current&&clearInterval(m.current)}),[i]),n.useEffect(()=>{const l=Date.now();l-o.current>=3e4&&s&&(s(d,w),o.current=l)},[d,w,s]),n.useEffect(()=>{u>0&&d>=u*.9&&c&&c()},[d,u,c]);const L=l=>{const b=Math.floor(l/3600),C=Math.floor(l%3600/60),E=Math.floor(l%60);return b>0?`${b}:${C.toString().padStart(2,"0")}:${E.toString().padStart(2,"0")}`:`${C}:${E.toString().padStart(2,"0")}`},$=l=>{if(y(l),x.current&&k==="youtube"&&j){const b=`https://www.youtube.com/embed/${j}?enablejsapi=1&start=${l}&autoplay=1&rel=0&modestbranding=1`;x.current.src=b,p(!0)}},q=()=>{var b,C;const l=(C=(b=x.current)==null?void 0:b.parentElement)==null?void 0:C.parentElement;l&&(g?document.exitFullscreen&&document.exitFullscreen():l.requestFullscreen&&l.requestFullscreen(),M(!g))};return k==="unknown"?e.jsxs("div",{className:"bg-gray-800 rounded-lg p-8 text-center",children:[e.jsx("p",{className:"text-gray-400",children:"Unsupported video format"}),e.jsx("a",{href:a,target:"_blank",rel:"noopener noreferrer",className:"text-cyan-400 hover:text-cyan-300 mt-2 inline-block",children:"Open video in new tab"})]}):e.jsxs("div",{className:"video-player-container",children:[e.jsx("div",{className:"relative bg-black rounded-lg overflow-hidden aspect-video",children:e.jsx("iframe",{ref:x,src:T(),className:"w-full h-full",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; fullscreen",allowFullScreen:!0,title:"Lesson Video"})}),e.jsxs("div",{className:"bg-gray-800 rounded-b-lg px-4 py-3 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("button",{onClick:()=>p(!i),className:"text-gray-400 hover:text-white transition-colors",title:i?"Pause":"Play",children:i?e.jsx(X,{className:"w-5 h-5"}):e.jsx(K,{className:"w-5 h-5"})}),e.jsx("button",{onClick:()=>$(Math.max(0,d-10)),className:"text-gray-400 hover:text-white transition-colors",title:"Back 10 seconds",children:e.jsx(ee,{className:"w-5 h-5"})}),e.jsx("button",{onClick:()=>$(d+10),className:"text-gray-400 hover:text-white transition-colors",title:"Forward 10 seconds",children:e.jsx(te,{className:"w-5 h-5"})}),e.jsxs("span",{className:"text-sm text-gray-400",children:[L(d)," ",u>0&&`/ ${L(u)}`]})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("button",{onClick:()=>N(!f),className:"text-gray-400 hover:text-white transition-colors",title:f?"Unmute":"Mute",children:f?e.jsx(se,{className:"w-5 h-5"}):e.jsx(ae,{className:"w-5 h-5"})}),e.jsx("button",{onClick:q,className:"text-gray-400 hover:text-white transition-colors",title:"Fullscreen",children:e.jsx(re,{className:"w-5 h-5"})})]})]}),t.length>0&&e.jsxs("div",{className:"mt-4",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-300 mb-2",children:"Chapters"}),e.jsx("div",{className:"space-y-1",children:t.map((l,b)=>e.jsxs("button",{onClick:()=>$(l.timestamp_seconds),className:`w-full text-left px-3 py-2 rounded text-sm transition-colors ${d>=l.timestamp_seconds&&(b===t.length-1||d<t[b+1].timestamp_seconds)?"bg-cyan-900/30 text-cyan-400":"text-gray-400 hover:bg-gray-800 hover:text-white"}`,children:[e.jsx("span",{className:"text-cyan-400 mr-2",children:L(l.timestamp_seconds)}),l.title]},l.id))})]})]})};function me(a){let t=a;return t=t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),t=t.replace(/^### (.*$)/gm,'<h3 class="text-xl font-bold text-white mt-6 mb-3">$1</h3>'),t=t.replace(/^## (.*$)/gm,'<h2 class="text-2xl font-bold text-white mt-8 mb-4">$1</h2>'),t=t.replace(/^# (.*$)/gm,'<h1 class="text-3xl font-bold text-white mt-8 mb-4">$1</h1>'),t=t.replace(/\*\*\*(.*?)\*\*\*/g,"<strong><em>$1</em></strong>"),t=t.replace(/\*\*(.*?)\*\*/g,'<strong class="text-white">$1</strong>'),t=t.replace(/\*(.*?)\*/g,"<em>$1</em>"),t=t.replace(/```(\w*)\n([\s\S]*?)```/g,'<pre class="code-block" data-language="$1"><code>$2</code></pre>'),t=t.replace(/`([^`]+)`/g,'<code class="bg-gray-800 text-cyan-400 px-1.5 py-0.5 rounded text-sm">$1</code>'),t=t.replace(/\[([^\]]+)\]\(([^)]+)\)/g,'<a href="$2" target="_blank" rel="noopener noreferrer" class="text-cyan-400 hover:text-cyan-300 underline">$1</a>'),t=t.replace(/^\s*[-*] (.*$)/gm,'<li class="ml-4">$1</li>'),t=t.replace(/(<li.*<\/li>\n?)+/g,'<ul class="list-disc list-inside space-y-1 my-4">$&</ul>'),t=t.replace(/^\s*\d+\. (.*$)/gm,'<li class="ml-4">$1</li>'),t=t.replace(/^> (.*$)/gm,'<blockquote class="border-l-4 border-cyan-500 pl-4 py-2 my-4 text-gray-300 italic">$1</blockquote>'),t=t.replace(/^---$/gm,'<hr class="border-gray-700 my-6" />'),t=t.replace(/\n\n/g,'</p><p class="my-4 text-gray-300 leading-relaxed">'),t=t.replace(/\n/g,"<br />"),t.startsWith("<")||(t='<p class="my-4 text-gray-300 leading-relaxed">'+t+"</p>"),t}function O(a){return{javascript:"language-javascript",typescript:"language-typescript",js:"language-javascript",ts:"language-typescript",python:"language-python",py:"language-python",rust:"language-rust",go:"language-go",bash:"language-bash",shell:"language-bash",sh:"language-bash",sql:"language-sql",json:"language-json",yaml:"language-yaml",yml:"language-yaml",html:"language-html",css:"language-css",c:"language-c",cpp:"language-cpp",java:"language-java",ruby:"language-ruby",php:"language-php"}[a.toLowerCase()]||"language-plaintext"}const ue=({code:a,language:t})=>{const[r,s]=Q.useState(!1),c=async()=>{try{await navigator.clipboard.writeText(a),s(!0),setTimeout(()=>s(!1),2e3)}catch(x){console.error("Failed to copy:",x)}};return e.jsxs("div",{className:"relative group my-4",children:[t&&e.jsx("span",{className:"absolute top-2 left-3 text-xs text-gray-500 uppercase",children:t}),e.jsx("button",{onClick:c,className:"absolute top-2 right-2 p-2 rounded bg-gray-700 text-gray-400 hover:text-white opacity-0 group-hover:opacity-100 transition-opacity",title:"Copy code",children:r?e.jsx(ne,{className:"w-4 h-4 text-green-400"}):e.jsx(le,{className:"w-4 h-4"})}),e.jsx("pre",{className:`bg-gray-900 border border-gray-700 rounded-lg p-4 pt-8 overflow-x-auto ${O(t)}`,children:e.jsx("code",{className:"text-sm text-gray-300 font-mono",children:a})})]})},xe=({content:a,codeExamples:t})=>{const r=n.useRef(null);n.useEffect(()=>{if(!r.current)return;r.current.querySelectorAll("pre.code-block").forEach(x=>{var f,N;const i=x,p=i.dataset.language||"",d=((f=i.querySelector("code"))==null?void 0:f.textContent)||"",y=document.createElement("div");if(y.className="relative group my-4",p){const g=document.createElement("span");g.className="absolute top-2 left-3 text-xs text-gray-500 uppercase",g.textContent=p,y.appendChild(g)}const u=document.createElement("button");u.className="absolute top-2 right-2 p-2 rounded bg-gray-700 text-gray-400 hover:text-white opacity-0 group-hover:opacity-100 transition-opacity",u.innerHTML='<svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"></path></svg>',u.onclick=async()=>{try{await navigator.clipboard.writeText(d),u.innerHTML='<svg class="w-4 h-4 text-green-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg>',setTimeout(()=>{u.innerHTML='<svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"></path></svg>'},2e3)}catch(g){console.error("Failed to copy:",g)}},y.appendChild(u),i.className=`bg-gray-900 border border-gray-700 rounded-lg p-4 pt-8 overflow-x-auto ${O(p)}`;const v=i.querySelector("code");v&&(v.className="text-sm text-gray-300 font-mono"),(N=i.parentNode)==null||N.insertBefore(y,i),y.appendChild(i)})},[a]);const s=me(a);return e.jsxs("div",{className:"markdown-viewer",children:[e.jsx("div",{ref:r,className:"prose prose-invert max-w-none",dangerouslySetInnerHTML:{__html:s}}),t&&t.length>0&&e.jsxs("div",{className:"mt-8",children:[e.jsx("h3",{className:"text-xl font-bold text-white mb-4",children:"Code Examples"}),e.jsx("div",{className:"space-y-4",children:t.map((c,x)=>e.jsx(ue,{code:c.code,language:c.language},x))})]})]})},pe=({previousLesson:a,nextLesson:t,currentLesson:r,pathSlug:s,onComplete:c,isCompleted:x=!1})=>{const i=Y(),p=d=>{switch(d){case"completed":return e.jsx(R,{className:"w-4 h-4 text-green-400"});case"in_progress":return e.jsx(H,{className:"w-4 h-4 text-yellow-400 fill-yellow-400/20"});default:return e.jsx(H,{className:"w-4 h-4 text-gray-500"})}};return e.jsxs("div",{className:"lesson-navigation",children:[e.jsxs("div",{className:"bg-gray-800 rounded-lg p-4 mb-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[p(r.status),e.jsx("span",{className:"text-sm text-gray-400",children:r.status==="completed"?"Completed":r.status==="in_progress"?"In Progress":"Not Started"})]}),e.jsxs("div",{className:"flex items-center text-sm text-gray-500",children:[e.jsx(A,{className:"w-4 h-4 mr-1"}),r.duration_minutes," min"]})]}),!x&&c&&e.jsxs("button",{onClick:c,className:"w-full mt-2 bg-green-600 hover:bg-green-700 text-white font-medium py-2 px-4 rounded-lg transition-colors flex items-center justify-center",children:[e.jsx(R,{className:"w-5 h-5 mr-2"}),"Mark as Complete"]}),x&&e.jsxs("div",{className:"w-full mt-2 bg-green-900/30 text-green-400 font-medium py-2 px-4 rounded-lg flex items-center justify-center",children:[e.jsx(R,{className:"w-5 h-5 mr-2"}),"Lesson Completed"]})]}),e.jsxs("div",{className:"flex justify-between items-stretch gap-4",children:[a?e.jsxs("button",{onClick:()=>i(`/academy/lesson/${a.id}`),className:"flex-1 bg-gray-800 hover:bg-gray-700 rounded-lg p-4 text-left transition-colors group",children:[e.jsxs("div",{className:"flex items-center text-gray-500 mb-1",children:[e.jsx(B,{className:"w-4 h-4 mr-1 group-hover:text-cyan-400 transition-colors"}),e.jsx("span",{className:"text-xs uppercase",children:"Previous"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[p(a.status),e.jsx("span",{className:"text-white font-medium truncate",children:a.title})]})]}):e.jsxs("button",{onClick:()=>i(`/academy/path/${s}`),className:"flex-1 bg-gray-800 hover:bg-gray-700 rounded-lg p-4 text-left transition-colors group",children:[e.jsxs("div",{className:"flex items-center text-gray-500 mb-1",children:[e.jsx(B,{className:"w-4 h-4 mr-1 group-hover:text-cyan-400 transition-colors"}),e.jsx("span",{className:"text-xs uppercase",children:"Back to Path"})]}),e.jsx("span",{className:"text-white font-medium",children:"Return to course overview"})]}),t?e.jsxs("button",{onClick:()=>i(`/academy/lesson/${t.id}`),className:"flex-1 bg-cyan-600 hover:bg-cyan-700 rounded-lg p-4 text-left transition-colors group",children:[e.jsxs("div",{className:"flex items-center justify-end text-cyan-200 mb-1",children:[e.jsx("span",{className:"text-xs uppercase",children:"Next"}),e.jsx(D,{className:"w-4 h-4 ml-1"})]}),e.jsxs("div",{className:"flex items-center justify-end space-x-2",children:[e.jsx("span",{className:"text-white font-medium truncate",children:t.title}),p(t.status)]})]}):e.jsxs("button",{onClick:()=>i(`/academy/path/${s}`),className:"flex-1 bg-gradient-to-r from-cyan-600 to-purple-600 hover:from-cyan-700 hover:to-purple-700 rounded-lg p-4 text-left transition-colors",children:[e.jsxs("div",{className:"flex items-center justify-end text-cyan-200 mb-1",children:[e.jsx("span",{className:"text-xs uppercase",children:"Complete"}),e.jsx(D,{className:"w-4 h-4 ml-1"})]}),e.jsx("span",{className:"text-white font-medium block text-right",children:"Finish & Return to Path"})]})]})]})};function he(a,t){let r=null;const s=((...c)=>{r&&clearTimeout(r),r=setTimeout(()=>{a(...c)},t)});return s.cancel=()=>{r&&clearTimeout(r)},s}const ge=({initialContent:a="",onSave:t,autoSave:r=!0,autoSaveDelay:s=2e3})=>{const[c,x]=n.useState(a||""),[i,p]=n.useState(!1),[d,y]=n.useState(null),[u,v]=n.useState(!1),f=n.useRef(null);n.useEffect(()=>{a!=null&&x(a)},[a]);const N=async()=>{if(!(!u&&d)){p(!0);try{await t(c),y(new Date),v(!1)}catch(o){console.error("Failed to save notes:",o)}finally{p(!1)}}},g=n.useCallback(he(async o=>{if(r){p(!0);try{await t(o),y(new Date),v(!1)}catch(m){console.error("Auto-save failed:",m)}finally{p(!1)}}},s),[t,r,s]),M=o=>{const m=o.target.value;x(m),v(!0),r&&g(m)},w=o=>{if((o.ctrlKey||o.metaKey)&&o.key==="s"&&(o.preventDefault(),N()),o.key==="Tab"){o.preventDefault();const m=f.current;if(!m)return;const k=m.selectionStart,j=m.selectionEnd,T=c.substring(0,k)+"  "+c.substring(j);x(T),v(!0),setTimeout(()=>{m.selectionStart=m.selectionEnd=k+2},0)}},S=()=>{if(!d)return null;const m=Math.floor((new Date().getTime()-d.getTime())/1e3);return m<60?"Just now":m<3600?`${Math.floor(m/60)} min ago`:d.toLocaleTimeString()};return n.useEffect(()=>{const o=f.current;o&&(o.style.height="auto",o.style.height=Math.max(200,o.scrollHeight)+"px")},[c]),e.jsxs("div",{className:"notes-editor bg-gray-800 rounded-lg border border-gray-700",children:[e.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-b border-gray-700",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(J,{className:"w-5 h-5 text-cyan-400"}),e.jsx("span",{className:"font-medium text-white",children:"My Notes"})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[i?e.jsxs("span",{className:"text-sm text-gray-400 flex items-center",children:[e.jsx("div",{className:"w-3 h-3 border-2 border-cyan-500 border-t-transparent rounded-full animate-spin mr-2"}),"Saving..."]}):d?e.jsxs("span",{className:"text-sm text-gray-500 flex items-center",children:[e.jsx(A,{className:"w-3 h-3 mr-1"}),"Saved ",S()]}):null,u&&!i&&e.jsx("span",{className:"w-2 h-2 bg-yellow-500 rounded-full",title:"Unsaved changes"}),e.jsxs("button",{onClick:N,disabled:i||!u&&d!==null,className:`flex items-center px-3 py-1.5 rounded text-sm font-medium transition-colors ${u?"bg-cyan-600 hover:bg-cyan-700 text-white":"bg-gray-700 text-gray-400 cursor-not-allowed"}`,children:[e.jsx(ce,{className:"w-4 h-4 mr-1"}),"Save"]})]})]}),e.jsx("div",{className:"p-4",children:e.jsx("textarea",{ref:f,value:c,onChange:M,onKeyDown:w,placeholder:`Take notes on this lesson...

Tips:
• Press Tab to indent
• Press Ctrl+S (Cmd+S) to save manually
• Your notes auto-save after you stop typing`,className:"w-full min-h-[200px] bg-gray-900 border border-gray-700 rounded-lg p-4 text-gray-300 placeholder-gray-600 resize-none focus:outline-none focus:ring-2 focus:ring-cyan-500 focus:border-transparent font-mono text-sm"})}),e.jsxs("div",{className:"px-4 py-2 border-t border-gray-700 text-xs text-gray-500",children:[e.jsxs("span",{className:"mr-4",children:[e.jsx("kbd",{className:"bg-gray-700 px-1.5 py-0.5 rounded",children:"Ctrl"})," +"," ",e.jsx("kbd",{className:"bg-gray-700 px-1.5 py-0.5 rounded",children:"S"})," to save"]}),e.jsxs("span",{children:[e.jsx("kbd",{className:"bg-gray-700 px-1.5 py-0.5 rounded",children:"Tab"})," to indent"]})]})]})},ke=()=>{var l,b,C,E,z;const{lessonId:a}=Z(),t=Y(),r=W(h=>h.isAuthenticated),{currentLesson:s,currentPath:c,isLoadingLesson:x,isUpdatingProgress:i,error:p,fetchLesson:d,updateLessonProgress:y,completeLesson:u,updateNotes:v,clearError:f,clearCurrentLesson:N}=G(),[g,M]=n.useState(!1),[w,S]=n.useState(null),[o,m]=n.useState(null);n.useEffect(()=>{r||t(`/login?redirect=/academy/lesson/${a}`)},[r,a,t]),n.useEffect(()=>(a&&r&&d(a),()=>{N()}),[a,r,d,N]),n.useEffect(()=>{if(!c||!s)return;const h=c.modules.flatMap(I=>I.lessons),_=h.findIndex(I=>I.id===s.id);_>0?S(h[_-1]):S(null),_<h.length-1?m(h[_+1]):m(null)},[c,s]),n.useEffect(()=>{p&&(F.error(p),f())},[p,f]);const k=n.useCallback((h,_)=>{a&&y(a,h,_)},[a,y]),j=n.useCallback(()=>{a&&(s==null?void 0:s.status)!=="completed"&&u(a).then(h=>{h!=null&&h.certificate_issued&&F.success("Congratulations! You earned a certificate!")})},[a,s,u]),T=async()=>{if(!a)return;const h=await u(a);h&&(F.success("Lesson marked as complete!"),h.certificate_issued&&F.success("You earned a certificate!",{autoClose:5e3}))},L=async h=>{a&&await v(a,h)},$=()=>c?c.slug:"beginner";if(x||!s)return e.jsx("div",{className:"min-h-screen bg-gray-900 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-12 h-12 border-4 border-cyan-500 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),e.jsx("p",{className:"text-gray-400",children:"Loading lesson..."})]})});const q={video:e.jsx(K,{className:"w-5 h-5"}),text:e.jsx(V,{className:"w-5 h-5"}),interactive:e.jsx(V,{className:"w-5 h-5"}),quiz:e.jsx(U,{className:"w-5 h-5"})};return e.jsxs("div",{className:"min-h-screen bg-gray-900",children:[e.jsx("header",{className:"bg-gray-800 border-b border-gray-700 sticky top-0 z-50",children:e.jsxs("div",{className:"max-w-6xl mx-auto px-4 py-3 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("button",{onClick:()=>t(`/academy/path/${$()}`),className:"mr-4 text-gray-400 hover:text-white transition-colors",children:e.jsx(oe,{className:"w-5 h-5"})}),e.jsx(P,{to:"/",className:"flex items-center space-x-2",children:e.jsx("span",{className:"text-xl font-bold text-cyan-400",children:"HeroForge"})}),e.jsx("span",{className:"text-gray-500 mx-2",children:"•"}),e.jsx("span",{className:"text-gray-400 text-sm",children:"Academy"})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("button",{onClick:()=>M(!g),className:`flex items-center px-3 py-2 rounded-lg text-sm font-medium transition-colors ${g?"bg-cyan-600 text-white":"bg-gray-700 text-gray-300 hover:bg-gray-600"}`,children:[e.jsx(J,{className:"w-4 h-4 mr-2"}),"Notes"]}),s.status==="completed"?e.jsxs("span",{className:"flex items-center text-green-400 text-sm",children:[e.jsx(R,{className:"w-4 h-4 mr-1"}),"Completed"]}):e.jsxs("span",{className:"flex items-center text-gray-400 text-sm",children:[e.jsx(A,{className:"w-4 h-4 mr-1"}),s.duration_minutes," min"]})]})]})}),e.jsx("div",{className:"max-w-6xl mx-auto px-4 py-6",children:e.jsxs("div",{className:"flex gap-6 ",children:[e.jsxs("div",{className:`${g?"w-2/3":"w-full"} transition-all`,children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx("span",{className:`p-2 rounded-lg ${s.lesson_type==="video"?"bg-red-900/50 text-red-400":s.lesson_type==="quiz"?"bg-purple-900/50 text-purple-400":"bg-cyan-900/50 text-cyan-400"}`,children:q[s.lesson_type]}),e.jsx("span",{className:"text-sm text-gray-500 uppercase",children:s.lesson_type})]}),e.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:s.title}),s.description&&e.jsx("p",{className:"text-gray-400",children:s.description})]}),s.lesson_type==="video"&&((l=s.content)==null?void 0:l.video_url)&&e.jsx("div",{className:"mb-8",children:e.jsx(de,{videoUrl:s.content.video_url,chapters:s.chapters||[],initialTimestamp:s.video_timestamp_seconds||0,onProgress:k,onComplete:j})}),(s.lesson_type==="text"||s.lesson_type==="interactive")&&((b=s.content)==null?void 0:b.markdown)&&e.jsx("div",{className:"mb-8 bg-gray-800 rounded-xl p-8",children:e.jsx(xe,{content:s.content.markdown,codeExamples:s.content.code_examples})}),s.lesson_type==="quiz"&&e.jsxs("div",{className:"mb-8 bg-gradient-to-r from-purple-900/30 to-pink-900/30 border border-purple-700 rounded-xl p-8 text-center",children:[e.jsx(U,{className:"w-16 h-16 text-purple-400 mx-auto mb-4"}),e.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:"Quiz Assessment"}),e.jsxs("p",{className:"text-gray-400 mb-6",children:["Test your knowledge with this interactive quiz. You need to score at least"," ",((C=s.content)==null?void 0:C.pass_threshold)||70,"% to pass."]}),e.jsxs("div",{className:"flex items-center justify-center gap-4 text-sm text-gray-500 mb-6",children:[s.questions&&e.jsxs("span",{children:[s.questions.length," questions"]}),((E=s.content)==null?void 0:E.max_attempts)&&e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"•"}),e.jsxs("span",{children:["Max ",s.content.max_attempts," attempts"]})]})]}),e.jsx("button",{onClick:()=>t(`/academy/quiz/${a}`),className:"bg-purple-600 hover:bg-purple-700 text-white font-medium px-8 py-3 rounded-lg transition-colors",children:"Start Quiz"})]}),((z=s.content)==null?void 0:z.description)&&e.jsx("div",{className:"mb-8 bg-gray-800 rounded-xl p-8",children:e.jsx("p",{className:"text-gray-300",children:s.content.description})}),e.jsx(pe,{previousLesson:w?{id:w.id,title:w.title,status:w.status,duration_minutes:w.duration_minutes}:null,nextLesson:o?{id:o.id,title:o.title,status:o.status,duration_minutes:o.duration_minutes}:null,currentLesson:{id:s.id,title:s.title,status:s.status,duration_minutes:s.duration_minutes},pathSlug:$(),onComplete:T,isCompleted:s.status==="completed"})]}),g&&e.jsx("div",{className:"w-1/3 sticky top-20 h-fit",children:e.jsx(ge,{initialContent:s.user_note,onSave:L,autoSave:!0,autoSaveDelay:3e3})})]})}),e.jsx("footer",{className:"bg-gray-800 border-t border-gray-700 mt-16",children:e.jsx("div",{className:"max-w-6xl mx-auto px-4 py-6",children:e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center",children:[e.jsx("p",{className:"text-gray-400 text-sm",children:"© 2026 Genial Architect Cybersecurity Research Associates. All rights reserved."}),e.jsxs("div",{className:"flex space-x-6 mt-4 md:mt-0",children:[e.jsx(P,{to:"/legal/terms",className:"text-gray-400 hover:text-white text-sm",children:"Terms"}),e.jsx(P,{to:"/legal/privacy",className:"text-gray-400 hover:text-white text-sm",children:"Privacy"}),e.jsx(P,{to:"/docs",className:"text-gray-400 hover:text-white text-sm",children:"Documentation"})]})]})})})]})};export{ke as default};
