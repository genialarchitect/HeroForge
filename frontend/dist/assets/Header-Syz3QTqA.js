import{c as f,j as e,u as y}from"./vendor-state-GQ86PG8z.js";import{a0 as v,a1 as C,a2 as S,_ as z,B as L}from"./index-DXyI7EZp.js";import{r as o,u as E}from"./vendor-react-5KxtEOLM.js";import{l as k,c7 as w,c8 as j,aj as I,m as p,f as b,d as M,s as R,c9 as T,bQ as $,bR as B,S as D,U as P,ca as Q}from"./vendor-ui-B4zQTbMA.js";const A=f()(v(a=>({sidebarCollapsed:!1,sidebarOpen:!1,expandedSections:["featured","recon"],toggleSidebar:()=>a(t=>({sidebarCollapsed:!t.sidebarCollapsed})),setSidebarCollapsed:t=>a({sidebarCollapsed:t}),setSidebarOpen:t=>a({sidebarOpen:t}),toggleSection:t=>a(s=>({expandedSections:s.expandedSections.includes(t)?s.expandedSections.filter(n=>n!==t):[...s.expandedSections,t]})),setExpandedSections:t=>a({expandedSections:t})}),{name:"heroforge-ui-storage",partialize:a=>({sidebarCollapsed:a.sidebarCollapsed,expandedSections:a.expandedSections})}));function F(a){const[t,s]=o.useState(()=>typeof window<"u"?window.matchMedia(a).matches:!1);return o.useEffect(()=>{if(typeof window>"u")return;const n=window.matchMedia(a),r=d=>s(d.matches);return s(n.matches),n.addEventListener("change",r),()=>n.removeEventListener("change",r)},[a]),t}function H(){return F("(max-width: 1023px)")}const g=[{value:"light",label:"Light",icon:e.jsx(w,{className:"h-4 w-4"})},{value:"dark",label:"Dark",icon:e.jsx(j,{className:"h-4 w-4"})},{value:"system",label:"System",icon:e.jsx(I,{className:"h-4 w-4"})}],U=({className:a=""})=>{const{theme:t,setTheme:s,resolvedTheme:n}=C(),[r,d]=o.useState(!1),c=o.useRef(null),x=g.find(l=>l.value===t)||g[2];o.useEffect(()=>{const l=m=>{c.current&&!c.current.contains(m.target)&&d(!1)};return document.addEventListener("mousedown",l),()=>document.removeEventListener("mousedown",l)},[]),o.useEffect(()=>{const l=m=>{m.key==="Escape"&&d(!1)};if(r)return document.addEventListener("keydown",l),()=>document.removeEventListener("keydown",l)},[r]);const h=l=>{s(l),d(!1)},u=()=>t==="system"?n==="dark"?e.jsx(j,{className:"h-4 w-4"}):e.jsx(w,{className:"h-4 w-4"}):x.icon;return e.jsxs("div",{className:`relative ${a}`,ref:c,children:[e.jsxs("button",{type:"button",onClick:()=>d(!r),className:`flex items-center gap-2 px-3 py-2 text-sm rounded-lg transition-colors
          text-slate-400 hover:text-slate-100 dark:text-slate-400 dark:hover:text-slate-100
          hover:bg-slate-700 dark:hover:bg-dark-hover
          bg-transparent`,"aria-haspopup":"listbox","aria-expanded":r,"aria-label":"Select theme",children:[e.jsxs("span",{className:"flex items-center gap-2",children:[u(),e.jsx("span",{className:"hidden sm:inline",children:x.label})]}),e.jsx(k,{className:`h-3 w-3 transition-transform ${r?"rotate-180":""}`})]}),r&&e.jsx("div",{className:`absolute right-0 mt-2 w-36 rounded-lg shadow-lg z-50
            bg-white dark:bg-dark-surface
            border border-slate-200 dark:border-dark-border
            animate-fade-in`,role:"listbox","aria-label":"Theme options",children:e.jsx("div",{className:"py-1",children:g.map(l=>e.jsxs("button",{type:"button",role:"option","aria-selected":t===l.value,onClick:()=>h(l.value),className:`w-full flex items-center gap-3 px-4 py-2 text-sm transition-colors
                  ${t===l.value?"bg-primary/10 text-primary dark:text-primary-light":"text-slate-700 dark:text-slate-300 hover:bg-slate-100 dark:hover:bg-dark-hover"}`,children:[l.icon,e.jsx("span",{children:l.label}),t===l.value&&e.jsx("span",{className:"ml-auto text-primary dark:text-primary-light",children:e.jsx("svg",{className:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})})]},l.value))})})]})},K=f()(v((a,t)=>({currentOrg:null,currentOrgId:null,organizations:[],isLoading:!1,setCurrentOrg:s=>{a({currentOrg:s,currentOrgId:(s==null?void 0:s.id)??null})},setCurrentOrgId:s=>{const r=t().organizations.find(d=>d.id===s)??null;a({currentOrgId:s,currentOrg:r})},setOrganizations:s=>{a({organizations:s});const n=t().currentOrg;!n&&s.length>0&&a({currentOrg:s[0],currentOrgId:s[0].id}),n&&!s.find(r=>r.id===n.id)&&(s.length>0?a({currentOrg:s[0],currentOrgId:s[0].id}):a({currentOrg:null,currentOrgId:null}))},setLoading:s=>a({isLoading:s}),clearOrgState:()=>{a({currentOrg:null,currentOrgId:null,organizations:[],isLoading:!1})},isOrgOwner:()=>{var s;return((s=t().currentOrg)==null?void 0:s.role)==="owner"},isOrgAdmin:()=>{var n;const s=(n=t().currentOrg)==null?void 0:n.role;return s==="owner"||s==="admin"},isOrgMember:()=>{var s;return((s=t().currentOrg)==null?void 0:s.role)==="member"},getCurrentOrgRole:()=>{var s;return((s=t().currentOrg)==null?void 0:s.role)??null},getOrgById:s=>t().organizations.find(n=>n.id===s),hasMultipleOrgs:()=>t().organizations.length>1}),{name:"org-storage",partialize:a=>({currentOrgId:a.currentOrgId})})),_=()=>{const[a,t]=o.useState(!1),s=o.useRef(null),n=E(),{currentOrg:r,organizations:d,setCurrentOrg:c,setOrganizations:x}=K(),{isLoading:h}=y({queryKey:["organizations"],queryFn:async()=>{const i=await S.list();return x(i.data),i.data},staleTime:300*1e3});o.useEffect(()=>{const i=O=>{s.current&&!s.current.contains(O.target)&&t(!1)};return document.addEventListener("mousedown",i),()=>document.removeEventListener("mousedown",i)},[]);const u=i=>{c(i),t(!1)},l=()=>{t(!1),n("/organization/new")},m=()=>{t(!1),r&&n(`/organization/${r.id}`)},N=i=>{switch(i){case"owner":return"bg-amber-500/20 text-amber-400 border-amber-500/30";case"admin":return"bg-cyan-500/20 text-cyan-400 border-cyan-500/30";default:return"bg-slate-500/20 text-slate-400 border-slate-500/30"}};return!h&&d.length===0?e.jsxs("button",{onClick:l,className:"flex items-center gap-2 px-3 py-2 rounded-lg text-sm text-slate-600 dark:text-slate-400 hover:text-slate-900 dark:hover:text-white hover:bg-light-hover dark:hover:bg-dark-hover transition-colors",children:[e.jsx(p,{className:"h-4 w-4"}),"Create Organization"]}):e.jsxs("div",{className:"relative",ref:s,children:[e.jsxs("button",{onClick:()=>t(!a),disabled:h,className:"flex items-center gap-2 px-3 py-2 rounded-lg text-sm text-slate-600 dark:text-slate-400 hover:text-slate-900 dark:hover:text-white hover:bg-light-hover dark:hover:bg-dark-hover transition-colors border border-light-border dark:border-dark-border",children:[e.jsx(b,{className:"h-4 w-4"}),e.jsx("span",{className:"max-w-[120px] truncate",children:h?"Loading...":(r==null?void 0:r.name)||"Select Organization"}),e.jsx(k,{className:`h-3 w-3 transition-transform ${a?"rotate-180":""}`})]}),a&&e.jsxs("div",{className:"absolute left-0 mt-1 w-64 bg-light-surface dark:bg-dark-surface border border-light-border dark:border-dark-border rounded-lg shadow-lg z-50 overflow-hidden",children:[e.jsx("div",{className:"max-h-64 overflow-y-auto py-1",children:d.map(i=>e.jsxs("button",{onClick:()=>u(i),className:`w-full flex items-center justify-between px-3 py-2 text-sm transition-colors ${(r==null?void 0:r.id)===i.id?"bg-primary/10 text-primary":"text-slate-600 dark:text-slate-400 hover:text-slate-900 dark:hover:text-white hover:bg-light-hover dark:hover:bg-dark-hover"}`,children:[e.jsxs("div",{className:"flex items-center gap-2 min-w-0",children:[e.jsx(b,{className:"h-4 w-4 flex-shrink-0"}),e.jsx("span",{className:"truncate",children:i.name})]}),e.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[e.jsx("span",{className:`text-xs px-1.5 py-0.5 rounded border ${N(i.role)}`,children:i.role}),(r==null?void 0:r.id)===i.id&&e.jsx(M,{className:"h-4 w-4 text-primary"})]})]},i.id))}),e.jsx("div",{className:"border-t border-light-border dark:border-dark-border"}),e.jsxs("div",{className:"py-1",children:[r&&e.jsxs("button",{onClick:m,className:"w-full flex items-center gap-2 px-3 py-2 text-sm text-slate-600 dark:text-slate-400 hover:text-slate-900 dark:hover:text-white hover:bg-light-hover dark:hover:bg-dark-hover transition-colors",children:[e.jsx(R,{className:"h-4 w-4"}),"Manage Organization"]}),e.jsxs("button",{onClick:l,className:"w-full flex items-center gap-2 px-3 py-2 text-sm text-slate-600 dark:text-slate-400 hover:text-slate-900 dark:hover:text-white hover:bg-light-hover dark:hover:bg-dark-hover transition-colors",children:[e.jsx(p,{className:"h-4 w-4"}),"Create Organization"]})]})]})]})},W=()=>{const{user:a,logout:t}=z(),{sidebarCollapsed:s,toggleSidebar:n,setSidebarOpen:r}=A(),d=H(),c=()=>{d?r(!0):n()};return e.jsx("header",{className:"bg-light-surface dark:bg-dark-surface border-b border-light-border dark:border-dark-border shadow-sm sticky top-0 z-30",children:e.jsx("div",{className:"px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"flex items-center justify-between h-14",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[a&&e.jsx("button",{onClick:c,className:"p-2 rounded-lg hover:bg-light-hover dark:hover:bg-dark-hover transition-colors","aria-label":d?"Open menu":s?"Expand sidebar":"Collapse sidebar",children:d?e.jsx(T,{className:"h-5 w-5 text-slate-600 dark:text-slate-400"}):s?e.jsx($,{className:"h-5 w-5 text-slate-600 dark:text-slate-400"}):e.jsx(B,{className:"h-5 w-5 text-slate-600 dark:text-slate-400"})}),(!a||d)&&e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"flex items-center justify-center w-9 h-9 bg-primary rounded-lg",children:e.jsx(D,{className:"h-5 w-5 text-white"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-lg font-bold text-slate-900 dark:text-white",children:"HeroForge"}),e.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 hidden sm:block",children:"Network Triage Dashboard"})]})]})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[a&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"hidden sm:block",children:e.jsx(_,{})}),e.jsxs("div",{className:"hidden md:flex items-center space-x-2 text-sm",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(P,{className:"h-4 w-4 text-slate-500 dark:text-slate-400"}),e.jsx("span",{className:"text-slate-700 dark:text-slate-300",children:a.username})]}),a.roles&&a.roles.length>0&&e.jsx("div",{className:"flex gap-1",children:a.roles.slice(0,2).map(x=>e.jsx("span",{className:"inline-flex items-center px-1.5 py-0.5 text-xs font-medium rounded border bg-slate-500/20 text-slate-700 dark:text-slate-300 border-slate-500/30 capitalize",children:x},x))})]})]}),e.jsx(U,{}),a&&e.jsxs(L,{variant:"ghost",size:"sm",onClick:t,className:"text-slate-600 dark:text-slate-400 hover:text-slate-900 dark:hover:text-white",children:[e.jsx(Q,{className:"h-4 w-4"}),e.jsx("span",{className:"hidden sm:inline ml-2",children:"Logout"})]})]})]})})})};export{W as H,A as a,K as b,H as u};
