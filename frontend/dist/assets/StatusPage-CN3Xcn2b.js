import{j as e}from"./vendor-state-oFDmcCcB.js";import{r as n,L as i}from"./vendor-react-5KxtEOLM.js";import{B as g}from"./vendor-ui-7EurIAWU.js";const I=()=>{const[l,_]=n.useState([]),[h,k]=n.useState([]),[x,L]=n.useState({}),[c,F]=n.useState(null),[D,P]=n.useState(!0),[m,p]=n.useState(""),[O,A]=n.useState(!1),[y,b]=n.useState(!1);n.useEffect(()=>{j();const t=setInterval(j,6e4);return()=>clearInterval(t)},[]);const j=async()=>{try{const[t,s,r,S]=await Promise.all([fetch("/api/status/services"),fetch("/api/status/incidents"),fetch("/api/status/uptime"),fetch("/api/status/uptime/summary")]);if(t.ok){const a=await t.json();a.success&&_(a.data)}if(s.ok){const a=await s.json();a.success&&k(a.data)}if(r.ok){const a=await r.json();if(a.success&&Array.isArray(a.data)){const o={};a.data.forEach(d=>{o[d.service_id]||(o[d.service_id]=[]),o[d.service_id].push({date:d.date,status:d.status})}),L(o)}}if(S.ok){const a=await S.json();a.success&&F(a.data)}}catch(t){console.error("Failed to fetch status data:",t)}finally{P(!1)}},f=t=>{switch(t){case"operational":return"bg-green-500";case"degraded":return"bg-yellow-500";case"partial_outage":return"bg-orange-500";case"major_outage":return"bg-red-500";case"maintenance":return"bg-blue-500";default:return"bg-gray-500"}},N=t=>{switch(t){case"operational":return"Operational";case"degraded":return"Degraded Performance";case"partial_outage":return"Partial Outage";case"major_outage":return"Major Outage";case"maintenance":return"Under Maintenance";default:return"Unknown"}},v=t=>{switch(t){case"investigating":return"text-yellow-400";case"identified":return"text-orange-400";case"monitoring":return"text-blue-400";case"resolved":return"text-green-400";default:return"text-gray-400"}},R=t=>{switch(t){case"critical":return"bg-red-500/20 text-red-400 border-red-500/50";case"major":return"bg-orange-500/20 text-orange-400 border-orange-500/50";case"minor":return"bg-yellow-500/20 text-yellow-400 border-yellow-500/50";case"maintenance":return"bg-blue-500/20 text-blue-400 border-blue-500/50";default:return"bg-gray-500/20 text-gray-400 border-gray-500/50"}},$=()=>l.some(t=>t.status==="major_outage")?{status:"major_outage",text:"Major System Outage",color:"bg-red-500"}:l.some(t=>t.status==="partial_outage")?{status:"partial_outage",text:"Partial System Outage",color:"bg-orange-500"}:l.some(t=>t.status==="degraded")?{status:"degraded",text:"Degraded Performance",color:"bg-yellow-500"}:l.some(t=>t.status==="maintenance")?{status:"maintenance",text:"Scheduled Maintenance",color:"bg-blue-500"}:{status:"operational",text:"All Systems Operational",color:"bg-green-500"},C=async t=>{if(t.preventDefault(),!!m.trim()){b(!0);try{const r=await(await fetch("/api/status/subscribe",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:m})})).json();r.success?(A(!0),p(""),g.success("Please check your email to verify your subscription.")):g.error(r.error||"Failed to subscribe")}catch(s){console.error("Failed to subscribe:",s),g.error("Failed to subscribe")}finally{b(!1)}}},u=t=>new Date(t).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"2-digit",minute:"2-digit"}),T=t=>{try{return JSON.parse(t)}catch{return[]}},w=$();return D?e.jsx("div",{className:"min-h-screen bg-gray-900 flex items-center justify-center",children:e.jsxs("div",{className:"flex flex-col items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 border-4 border-cyan-500 border-t-transparent rounded-full animate-spin"}),e.jsx("p",{className:"text-gray-400",children:"Loading status..."})]})}):e.jsxs("div",{className:"min-h-screen bg-gray-900",children:[e.jsx("header",{className:"bg-gray-800 border-b border-gray-700",children:e.jsxs("div",{className:"max-w-4xl mx-auto px-4 py-4 flex items-center justify-between",children:[e.jsxs(i,{to:"/",className:"flex items-center space-x-2",children:[e.jsx("span",{className:"text-2xl font-bold text-cyan-400",children:"HeroForge"}),e.jsx("span",{className:"text-gray-400",children:"Status"})]}),e.jsxs("nav",{className:"hidden md:flex items-center space-x-6",children:[e.jsx(i,{to:"/features",className:"text-gray-300 hover:text-white",children:"Features"}),e.jsx(i,{to:"/pricing",className:"text-gray-300 hover:text-white",children:"Pricing"}),e.jsx(i,{to:"/roadmap",className:"text-gray-300 hover:text-white",children:"Roadmap"}),e.jsx(i,{to:"/docs",className:"text-gray-300 hover:text-white",children:"Docs"}),e.jsx(i,{to:"/login",className:"px-4 py-2 bg-cyan-600 hover:bg-cyan-700 text-white rounded-lg",children:"Sign In"})]})]})}),e.jsxs("main",{className:"max-w-4xl mx-auto px-4 py-12",children:[e.jsx("div",{className:`${w.color} rounded-xl p-6 mb-8`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-4 h-4 bg-white rounded-full animate-pulse"}),e.jsx("h1",{className:"text-2xl font-bold text-white",children:w.text})]}),e.jsxs("p",{className:"text-white/80 text-sm",children:["Last updated: ",new Date().toLocaleTimeString()]})]})}),c&&e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-8",children:[e.jsxs("div",{className:"bg-gray-800 rounded-xl border border-gray-700 p-4 text-center",children:[e.jsxs("p",{className:"text-2xl font-bold text-green-400",children:[c.current_month.toFixed(2),"%"]}),e.jsx("p",{className:"text-gray-400 text-sm",children:"This Month"})]}),e.jsxs("div",{className:"bg-gray-800 rounded-xl border border-gray-700 p-4 text-center",children:[e.jsxs("p",{className:"text-2xl font-bold text-green-400",children:[c.last_30_days.toFixed(2),"%"]}),e.jsx("p",{className:"text-gray-400 text-sm",children:"Last 30 Days"})]}),e.jsxs("div",{className:"bg-gray-800 rounded-xl border border-gray-700 p-4 text-center",children:[e.jsxs("p",{className:"text-2xl font-bold text-green-400",children:[c.last_90_days.toFixed(2),"%"]}),e.jsx("p",{className:"text-gray-400 text-sm",children:"Last 90 Days"})]}),e.jsxs("div",{className:"bg-gray-800 rounded-xl border border-gray-700 p-4 text-center",children:[e.jsxs("p",{className:"text-2xl font-bold text-green-400",children:[c.all_time.toFixed(2),"%"]}),e.jsx("p",{className:"text-gray-400 text-sm",children:"All Time"})]})]}),e.jsxs("div",{className:"bg-gray-800 rounded-xl border border-gray-700 p-6 mb-8",children:[e.jsx("h2",{className:"text-lg font-semibold text-white mb-2",children:"Subscribe to Updates"}),e.jsx("p",{className:"text-gray-400 text-sm mb-4",children:"Get notified when we have scheduled maintenance or experience service disruptions."}),O?e.jsxs("div",{className:"flex items-center gap-2 text-green-400",children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),e.jsx("span",{children:"Please check your email to verify your subscription."})]}):e.jsxs("form",{onSubmit:C,className:"flex gap-2",children:[e.jsx("input",{type:"email",value:m,onChange:t=>p(t.target.value),placeholder:"your@email.com",className:"flex-1 bg-gray-700 border border-gray-600 rounded-lg px-4 py-2 text-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-cyan-500",required:!0}),e.jsx("button",{type:"submit",disabled:y,className:"px-4 py-2 bg-cyan-600 hover:bg-cyan-700 text-white rounded-lg font-medium transition-colors disabled:opacity-50",children:y?"Subscribing...":"Subscribe"})]})]}),e.jsxs("div",{className:"mb-12",children:[e.jsx("h2",{className:"text-xl font-semibold text-white mb-4",children:"System Status"}),e.jsx("div",{className:"bg-gray-800 rounded-xl border border-gray-700 divide-y divide-gray-700",children:l.map(t=>e.jsxs("div",{className:"p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-white font-medium",children:t.name}),e.jsx("p",{className:"text-gray-500 text-sm",children:t.description})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[t.latency_ms&&e.jsxs("span",{className:"text-gray-400 text-sm",children:[t.latency_ms,"ms"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:`w-3 h-3 rounded-full ${f(t.status)}`}),e.jsx("span",{className:"text-gray-300 text-sm",children:N(t.status)})]})]})]}),e.jsxs("div",{className:"flex gap-px",children:[(x[t.id]||[]).slice(-90).map((s,r)=>e.jsx("div",{className:`flex-1 h-6 rounded-sm ${f(s.status)} opacity-80 hover:opacity-100 transition-opacity`,title:`${s.date}: ${N(s.status)}`},r)),(!x[t.id]||x[t.id].length===0)&&Array.from({length:90}).map((s,r)=>e.jsx("div",{className:"flex-1 h-6 rounded-sm bg-green-500 opacity-50"},r))]}),e.jsxs("div",{className:"flex justify-between mt-1",children:[e.jsx("span",{className:"text-gray-500 text-xs",children:"90 days ago"}),e.jsxs("span",{className:"text-gray-400 text-xs font-medium",children:[t.uptime_percent.toFixed(2),"% uptime"]}),e.jsx("span",{className:"text-gray-500 text-xs",children:"Today"})]})]},t.id))})]}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold text-white mb-4",children:"Recent Incidents"}),h.length===0?e.jsxs("div",{className:"bg-gray-800 rounded-xl border border-gray-700 p-8 text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-green-500/20 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx("svg",{className:"w-8 h-8 text-green-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),e.jsx("p",{className:"text-gray-400",children:"No incidents reported in the last 90 days."})]}):e.jsx("div",{className:"space-y-4",children:h.map(t=>e.jsxs("div",{className:"bg-gray-800 rounded-xl border border-gray-700 p-6",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-3 mb-1",children:[e.jsx("h3",{className:"text-white font-medium",children:t.title}),e.jsx("span",{className:`text-xs px-2 py-0.5 rounded border ${R(t.severity)}`,children:t.severity})]}),e.jsxs("p",{className:"text-gray-500 text-sm",children:[u(t.created_at),t.resolved_at&&` — Resolved ${u(t.resolved_at)}`]})]}),e.jsx("span",{className:`text-sm font-medium ${v(t.status)}`,children:t.status.charAt(0).toUpperCase()+t.status.slice(1)})]}),e.jsx("div",{className:"flex flex-wrap gap-2 mb-4",children:T(t.affected_services).map(s=>e.jsx("span",{className:"text-xs bg-gray-700 text-gray-300 px-2 py-1 rounded",children:s},s))}),e.jsx("div",{className:"border-l-2 border-gray-700 pl-4 space-y-4",children:t.updates.map((s,r)=>e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("span",{className:`text-sm font-medium ${v(s.status)}`,children:s.status.charAt(0).toUpperCase()+s.status.slice(1)}),e.jsx("span",{className:"text-gray-500 text-xs",children:u(s.created_at)})]}),e.jsx("p",{className:"text-gray-400 text-sm",children:s.message})]},r))})]},t.id))})]})]}),e.jsx("footer",{className:"bg-gray-800 border-t border-gray-700 mt-16",children:e.jsx("div",{className:"max-w-4xl mx-auto px-4 py-8",children:e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center gap-4",children:[e.jsxs("p",{className:"text-gray-500 text-sm",children:["© ",new Date().getFullYear()," HeroForge Security. All rights reserved."]}),e.jsxs("div",{className:"flex items-center gap-6",children:[e.jsx(i,{to:"/roadmap",className:"text-gray-400 hover:text-white text-sm",children:"Roadmap"}),e.jsx(i,{to:"/legal/terms",className:"text-gray-400 hover:text-white text-sm",children:"Terms"}),e.jsx(i,{to:"/legal/privacy",className:"text-gray-400 hover:text-white text-sm",children:"Privacy"})]})]})})})]})};export{I as default};
