import{j as e}from"./vendor-state-BjT_zREg.js";import{e as y,u as N,r as s,L as x}from"./vendor-react-5KxtEOLM.js";import{aw as v}from"./index-CJ_zz9jP.js";import{g as P,A as u,S}from"./vendor-ui-CfSMq23b.js";import"./vendor-utils-DfRopTPV.js";function F(){const[h]=y(),g=N(),[l,p]=s.useState(""),[d,b]=s.useState(""),[o,i]=s.useState(!1),[n,r]=s.useState(""),[f,w]=s.useState(!1),t=h.get("token");s.useEffect(()=>{t||r("Invalid reset link. Please request a new password reset.")},[t]);const k=async a=>{var c,m;if(a.preventDefault(),r(""),l!==d){r("Passwords do not match");return}if(l.length<8){r("Password must be at least 8 characters");return}if(!t){r("Invalid reset link");return}i(!0);try{await v.resetPassword(t,l),w(!0),setTimeout(()=>g("/portal/login"),3e3)}catch(j){r(((m=(c=j.response)==null?void 0:c.data)==null?void 0:m.error)||"Failed to reset password. The link may have expired.")}finally{i(!1)}};return f?e.jsx("div",{className:"min-h-screen bg-light-bg dark:bg-dark-bg flex flex-col justify-center py-12 sm:px-6 lg:px-8",children:e.jsx("div",{className:"sm:mx-auto sm:w-full sm:max-w-md",children:e.jsxs("div",{className:"bg-light-surface dark:bg-dark-surface py-8 px-4 shadow-lg rounded-lg sm:px-10 border border-light-border dark:border-dark-border text-center",children:[e.jsx("div",{className:"flex justify-center mb-4",children:e.jsx("div",{className:"w-12 h-12 bg-green-100 dark:bg-green-900/30 rounded-full flex items-center justify-center",children:e.jsx(P,{className:"w-6 h-6 text-green-600 dark:text-green-400"})})}),e.jsx("h2",{className:"text-xl font-semibold text-slate-900 dark:text-white mb-2",children:"Password Reset Successful"}),e.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-4",children:"Your password has been updated. Redirecting to login..."}),e.jsxs(x,{to:"/portal/login",className:"inline-flex items-center gap-2 text-primary hover:text-primary-dark transition-colors",children:[e.jsx(u,{className:"w-4 h-4"}),"Go to login now"]})]})})}):e.jsxs("div",{className:"min-h-screen bg-light-bg dark:bg-dark-bg flex flex-col justify-center py-12 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"sm:mx-auto sm:w-full sm:max-w-md",children:[e.jsx("div",{className:"flex justify-center",children:e.jsx("div",{className:"w-12 h-12 bg-primary rounded-xl flex items-center justify-center",children:e.jsx(S,{className:"w-7 h-7 text-white"})})}),e.jsx("h2",{className:"mt-6 text-center text-3xl font-bold text-slate-900 dark:text-white",children:"Set New Password"}),e.jsx("p",{className:"mt-2 text-center text-sm text-slate-500 dark:text-slate-400",children:"Enter your new password below"})]}),e.jsxs("div",{className:"mt-8 sm:mx-auto sm:w-full sm:max-w-md",children:[e.jsxs("div",{className:"bg-light-surface dark:bg-dark-surface py-8 px-4 shadow-lg rounded-lg sm:px-10 border border-light-border dark:border-dark-border",children:[e.jsxs("form",{className:"space-y-6",onSubmit:k,children:[n&&e.jsx("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 text-red-700 dark:text-red-300 p-4 rounded-lg text-sm",children:n}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"newPassword",className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:"New Password"}),e.jsx("div",{className:"mt-1",children:e.jsx("input",{id:"newPassword",name:"newPassword",type:"password",required:!0,value:l,onChange:a=>p(a.target.value),className:"appearance-none block w-full px-4 py-3 bg-light-bg dark:bg-dark-bg border border-light-border dark:border-dark-border rounded-lg text-slate-900 dark:text-white placeholder-slate-400 dark:placeholder-slate-500 focus:outline-none focus:ring-2 focus:ring-primary focus:border-primary transition-colors",placeholder:"Enter new password",minLength:8})}),e.jsx("p",{className:"mt-1 text-xs text-slate-500 dark:text-slate-400",children:"Minimum 8 characters"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Confirm Password"}),e.jsx("div",{className:"mt-1",children:e.jsx("input",{id:"confirmPassword",name:"confirmPassword",type:"password",required:!0,value:d,onChange:a=>b(a.target.value),className:"appearance-none block w-full px-4 py-3 bg-light-bg dark:bg-dark-bg border border-light-border dark:border-dark-border rounded-lg text-slate-900 dark:text-white placeholder-slate-400 dark:placeholder-slate-500 focus:outline-none focus:ring-2 focus:ring-primary focus:border-primary transition-colors",placeholder:"Confirm new password"})})]}),e.jsx("div",{children:e.jsx("button",{type:"submit",disabled:o||!t,className:"w-full flex justify-center py-3 px-4 border border-transparent rounded-lg shadow-sm text-sm font-medium text-white bg-primary hover:bg-primary-dark focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:o?e.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}):"Reset Password"})})]}),e.jsx("div",{className:"mt-6 text-center",children:e.jsxs(x,{to:"/portal/login",className:"inline-flex items-center gap-2 text-sm text-primary hover:text-primary-dark transition-colors",children:[e.jsx(u,{className:"w-4 h-4"}),"Back to login"]})})]}),e.jsx("p",{className:"mt-8 text-center text-xs text-slate-500 dark:text-slate-400",children:"Â© 2025 Genial Architect Cybersecurity Research Associates. All rights reserved."})]})]})}export{F as default};
