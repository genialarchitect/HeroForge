var Nt=e=>{throw TypeError(e)};var St=(e,t,s)=>t.has(e)||Nt("Cannot "+s);var r=(e,t,s)=>(St(e,t,"read from private field"),s?s.call(e):t.get(e)),y=(e,t,s)=>t.has(e)?Nt("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,s),p=(e,t,s,i)=>(St(e,t,"write to private field"),i?i.call(e,s):t.set(e,s),s),S=(e,t,s)=>(St(e,t,"access private method"),s);import{a as Dt,g as ve,R as be,r as O}from"./vendor-react-Da1CiaFS.js";var gt={exports:{}},nt={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var At;function ye(){if(At)return nt;At=1;var e=Dt(),t=Symbol.for("react.element"),s=Symbol.for("react.fragment"),i=Object.prototype.hasOwnProperty,n=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,h={key:!0,ref:!0,__self:!0,__source:!0};function a(c,u,v){var l,o={},f=null,d=null;v!==void 0&&(f=""+v),u.key!==void 0&&(f=""+u.key),u.ref!==void 0&&(d=u.ref);for(l in u)i.call(u,l)&&!h.hasOwnProperty(l)&&(o[l]=u[l]);if(c&&c.defaultProps)for(l in u=c.defaultProps,u)o[l]===void 0&&(o[l]=u[l]);return{$$typeof:t,type:c,key:f,ref:d,props:o,_owner:n.current}}return nt.Fragment=s,nt.jsx=a,nt.jsxs=a,nt}var qt;function me(){return qt||(qt=1,gt.exports=ye()),gt.exports}var cs=me();const Se={},zt=e=>{let t;const s=new Set,i=(l,o)=>{const f=typeof l=="function"?l(t):l;if(!Object.is(f,t)){const d=t;t=o??(typeof f!="object"||f===null)?f:Object.assign({},t,f),s.forEach(R=>R(t,d))}},n=()=>t,u={setState:i,getState:n,getInitialState:()=>v,subscribe:l=>(s.add(l),()=>s.delete(l)),destroy:()=>{(Se?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),s.clear()}},v=t=e(i,n,u);return u},ge=e=>e?zt(e):zt;var Et={exports:{}},Rt={},Ot={exports:{}},wt={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Wt;function Ee(){if(Wt)return wt;Wt=1;var e=Dt();function t(o,f){return o===f&&(o!==0||1/o===1/f)||o!==o&&f!==f}var s=typeof Object.is=="function"?Object.is:t,i=e.useState,n=e.useEffect,h=e.useLayoutEffect,a=e.useDebugValue;function c(o,f){var d=f(),R=i({inst:{value:d,getSnapshot:f}}),E=R[0].inst,g=R[1];return h(function(){E.value=d,E.getSnapshot=f,u(E)&&g({inst:E})},[o,d,f]),n(function(){return u(E)&&g({inst:E}),o(function(){u(E)&&g({inst:E})})},[o]),a(d),d}function u(o){var f=o.getSnapshot;o=o.value;try{var d=f();return!s(o,d)}catch{return!0}}function v(o,f){return f()}var l=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?v:c;return wt.useSyncExternalStore=e.useSyncExternalStore!==void 0?e.useSyncExternalStore:l,wt}var Vt;function Re(){return Vt||(Vt=1,Ot.exports=Ee()),Ot.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Bt;function Oe(){if(Bt)return Rt;Bt=1;var e=Dt(),t=Re();function s(v,l){return v===l&&(v!==0||1/v===1/l)||v!==v&&l!==l}var i=typeof Object.is=="function"?Object.is:s,n=t.useSyncExternalStore,h=e.useRef,a=e.useEffect,c=e.useMemo,u=e.useDebugValue;return Rt.useSyncExternalStoreWithSelector=function(v,l,o,f,d){var R=h(null);if(R.current===null){var E={hasValue:!1,value:null};R.current=E}else E=R.current;R=c(function(){function W(x){if(!$){if($=!0,U=x,x=f(x),d!==void 0&&E.hasValue){var V=E.value;if(d(V,x))return D=V}return D=x}if(V=D,i(U,x))return V;var I=f(x);return d!==void 0&&d(V,I)?(U=x,V):(U=x,D=I)}var $=!1,U,D,it=o===void 0?null:o;return[function(){return W(l())},it===null?void 0:function(){return W(it())}]},[l,o,f,d]);var g=n(v,R[0],R[1]);return a(function(){E.hasValue=!0,E.value=g},[g]),u(g),g},Rt}var Kt;function we(){return Kt||(Kt=1,Et.exports=Oe()),Et.exports}var Ce=we();const _e=ve(Ce),ce={},{useDebugValue:Ie}=be,{useSyncExternalStoreWithSelector:xe}=_e;let Ht=!1;const Te=e=>e;function Me(e,t=Te,s){(ce?"production":void 0)!=="production"&&s&&!Ht&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),Ht=!0);const i=xe(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,s);return Ie(i),i}const Jt=e=>{(ce?"production":void 0)!=="production"&&typeof e!="function"&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const t=typeof e=="function"?ge(e):e,s=(i,n)=>Me(t,i,n);return Object.assign(s,t),s},hs=e=>e?Jt(e):Jt;var yt=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},je={setTimeout:(e,t)=>setTimeout(e,t),clearTimeout:e=>clearTimeout(e),setInterval:(e,t)=>setInterval(e,t),clearInterval:e=>clearInterval(e)},Q,Ut,ie,Fe=(ie=class{constructor(){y(this,Q,je);y(this,Ut,!1)}setTimeoutProvider(e){p(this,Q,e)}setTimeout(e,t){return r(this,Q).setTimeout(e,t)}clearTimeout(e){r(this,Q).clearTimeout(e)}setInterval(e,t){return r(this,Q).setInterval(e,t)}clearInterval(e){r(this,Q).clearInterval(e)}},Q=new WeakMap,Ut=new WeakMap,ie),dt=new Fe;function Pe(e){setTimeout(e,0)}var at=typeof window>"u"||"Deno"in globalThis;function vt(){}function $t(e){return typeof e=="number"&&e>=0&&e!==1/0}function Le(e,t){return Math.max(e+(t||0)-Date.now(),0)}function ut(e,t){return typeof e=="function"?e(t):e}function M(e,t){return typeof e=="function"?e(t):e}function Gt(e){return JSON.stringify(e,(t,s)=>Ct(s)?Object.keys(s).sort().reduce((i,n)=>(i[n]=s[n],i),{}):s)}var Ue=Object.prototype.hasOwnProperty;function he(e,t){if(e===t)return e;const s=Yt(e)&&Yt(t);if(!s&&!(Ct(e)&&Ct(t)))return t;const n=(s?e:Object.keys(e)).length,h=s?t:Object.keys(t),a=h.length,c=s?new Array(a):{};let u=0;for(let v=0;v<a;v++){const l=s?v:h[v],o=e[l],f=t[l];if(o===f){c[l]=o,(s?v<n:Ue.call(e,l))&&u++;continue}if(o===null||f===null||typeof o!="object"||typeof f!="object"){c[l]=f;continue}const d=he(o,f);c[l]=d,d===o&&u++}return n===a&&u===n?e:c}function bt(e,t){if(!t||Object.keys(e).length!==Object.keys(t).length)return!1;for(const s in e)if(e[s]!==t[s])return!1;return!0}function Yt(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function Ct(e){if(!Zt(e))return!1;const t=e.constructor;if(t===void 0)return!0;const s=t.prototype;return!(!Zt(s)||!s.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(e)!==Object.prototype)}function Zt(e){return Object.prototype.toString.call(e)==="[object Object]"}function Xt(e,t,s){return typeof s.structuralSharing=="function"?s.structuralSharing(e,t):s.structuralSharing!==!1?he(e,t):t}function le(e,t){return typeof e=="function"?e(...t):!!e}var B,k,Y,ne,De=(ne=class extends yt{constructor(){super();y(this,B);y(this,k);y(this,Y);p(this,Y,t=>{if(!at&&window.addEventListener){const s=()=>t();return window.addEventListener("visibilitychange",s,!1),()=>{window.removeEventListener("visibilitychange",s)}}})}onSubscribe(){r(this,k)||this.setEventListener(r(this,Y))}onUnsubscribe(){var t;this.hasListeners()||((t=r(this,k))==null||t.call(this),p(this,k,void 0))}setEventListener(t){var s;p(this,Y,t),(s=r(this,k))==null||s.call(this),p(this,k,t(i=>{typeof i=="boolean"?this.setFocused(i):this.onFocus()}))}setFocused(t){r(this,B)!==t&&(p(this,B,t),this.onFocus())}onFocus(){const t=this.isFocused();this.listeners.forEach(s=>{s(t)})}isFocused(){var t;return typeof r(this,B)=="boolean"?r(this,B):((t=globalThis.document)==null?void 0:t.visibilityState)!=="hidden"}},B=new WeakMap,k=new WeakMap,Y=new WeakMap,ne),Qe=new De;function te(){let e,t;const s=new Promise((n,h)=>{e=n,t=h});s.status="pending",s.catch(()=>{});function i(n){Object.assign(s,n),delete s.resolve,delete s.reject}return s.resolve=n=>{i({status:"fulfilled",value:n}),e(n)},s.reject=n=>{i({status:"rejected",reason:n}),t(n)},s}var ke=Pe;function Ne(){let e=[],t=0,s=c=>{c()},i=c=>{c()},n=ke;const h=c=>{t?e.push(c):n(()=>{s(c)})},a=()=>{const c=e;e=[],c.length&&n(()=>{i(()=>{c.forEach(u=>{s(u)})})})};return{batch:c=>{let u;t++;try{u=c()}finally{t--,t||a()}return u},batchCalls:c=>(...u)=>{h(()=>{c(...u)})},schedule:h,setNotifyFunction:c=>{s=c},setBatchNotifyFunction:c=>{i=c},setScheduler:c=>{n=c}}}var mt=Ne(),Z,N,X,oe,Ae=(oe=class extends yt{constructor(){super();y(this,Z,!0);y(this,N);y(this,X);p(this,X,t=>{if(!at&&window.addEventListener){const s=()=>t(!0),i=()=>t(!1);return window.addEventListener("online",s,!1),window.addEventListener("offline",i,!1),()=>{window.removeEventListener("online",s),window.removeEventListener("offline",i)}}})}onSubscribe(){r(this,N)||this.setEventListener(r(this,X))}onUnsubscribe(){var t;this.hasListeners()||((t=r(this,N))==null||t.call(this),p(this,N,void 0))}setEventListener(t){var s;p(this,X,t),(s=r(this,N))==null||s.call(this),p(this,N,t(this.setOnline.bind(this)))}setOnline(t){r(this,Z)!==t&&(p(this,Z,t),this.listeners.forEach(i=>{i(t)}))}isOnline(){return r(this,Z)}},Z=new WeakMap,N=new WeakMap,X=new WeakMap,oe),qe=new Ae;function ze(e){return(e??"online")==="online"?qe.isOnline():!0}function We(e,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:ze(t.networkMode)?"fetching":"paused",...e===void 0&&{error:null,status:"pending"}}}var C,b,ct,w,K,tt,j,A,ht,et,st,H,J,q,rt,m,ot,_t,It,xt,Tt,Mt,jt,Ft,fe,ue,Ve=(ue=class extends yt{constructor(t,s){super();y(this,m);y(this,C);y(this,b);y(this,ct);y(this,w);y(this,K);y(this,tt);y(this,j);y(this,A);y(this,ht);y(this,et);y(this,st);y(this,H);y(this,J);y(this,q);y(this,rt,new Set);this.options=s,p(this,C,t),p(this,A,null),p(this,j,te()),this.bindMethods(),this.setOptions(s)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(r(this,b).addObserver(this),ee(r(this,b),this.options)?S(this,m,ot).call(this):this.updateResult(),S(this,m,Tt).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return Pt(r(this,b),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return Pt(r(this,b),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,S(this,m,Mt).call(this),S(this,m,jt).call(this),r(this,b).removeObserver(this)}setOptions(t){const s=this.options,i=r(this,b);if(this.options=r(this,C).defaultQueryOptions(t),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof M(this.options.enabled,r(this,b))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");S(this,m,Ft).call(this),r(this,b).setOptions(this.options),s._defaulted&&!bt(this.options,s)&&r(this,C).getQueryCache().notify({type:"observerOptionsUpdated",query:r(this,b),observer:this});const n=this.hasListeners();n&&se(r(this,b),i,this.options,s)&&S(this,m,ot).call(this),this.updateResult(),n&&(r(this,b)!==i||M(this.options.enabled,r(this,b))!==M(s.enabled,r(this,b))||ut(this.options.staleTime,r(this,b))!==ut(s.staleTime,r(this,b)))&&S(this,m,_t).call(this);const h=S(this,m,It).call(this);n&&(r(this,b)!==i||M(this.options.enabled,r(this,b))!==M(s.enabled,r(this,b))||h!==r(this,q))&&S(this,m,xt).call(this,h)}getOptimisticResult(t){const s=r(this,C).getQueryCache().build(r(this,C),t),i=this.createResult(s,t);return Ke(this,i)&&(p(this,w,i),p(this,tt,this.options),p(this,K,r(this,b).state)),i}getCurrentResult(){return r(this,w)}trackResult(t,s){return new Proxy(t,{get:(i,n)=>(this.trackProp(n),s==null||s(n),n==="promise"&&(this.trackProp("data"),!this.options.experimental_prefetchInRender&&r(this,j).status==="pending"&&r(this,j).reject(new Error("experimental_prefetchInRender feature flag is not enabled"))),Reflect.get(i,n))})}trackProp(t){r(this,rt).add(t)}getCurrentQuery(){return r(this,b)}refetch({...t}={}){return this.fetch({...t})}fetchOptimistic(t){const s=r(this,C).defaultQueryOptions(t),i=r(this,C).getQueryCache().build(r(this,C),s);return i.fetch().then(()=>this.createResult(i,s))}fetch(t){return S(this,m,ot).call(this,{...t,cancelRefetch:t.cancelRefetch??!0}).then(()=>(this.updateResult(),r(this,w)))}createResult(t,s){var kt;const i=r(this,b),n=this.options,h=r(this,w),a=r(this,K),c=r(this,tt),v=t!==i?t.state:r(this,ct),{state:l}=t;let o={...l},f=!1,d;if(s._optimisticResults){const T=this.hasListeners(),lt=!T&&ee(t,s),G=T&&se(t,i,s,n);(lt||G)&&(o={...o,...We(l.data,t.options)}),s._optimisticResults==="isRestoring"&&(o.fetchStatus="idle")}let{error:R,errorUpdatedAt:E,status:g}=o;d=o.data;let W=!1;if(s.placeholderData!==void 0&&d===void 0&&g==="pending"){let T;h!=null&&h.isPlaceholderData&&s.placeholderData===(c==null?void 0:c.placeholderData)?(T=h.data,W=!0):T=typeof s.placeholderData=="function"?s.placeholderData((kt=r(this,st))==null?void 0:kt.state.data,r(this,st)):s.placeholderData,T!==void 0&&(g="success",d=Xt(h==null?void 0:h.data,T,s),f=!0)}if(s.select&&d!==void 0&&!W)if(h&&d===(a==null?void 0:a.data)&&s.select===r(this,ht))d=r(this,et);else try{p(this,ht,s.select),d=s.select(d),d=Xt(h==null?void 0:h.data,d,s),p(this,et,d),p(this,A,null)}catch(T){p(this,A,T)}r(this,A)&&(R=r(this,A),d=r(this,et),E=Date.now(),g="error");const $=o.fetchStatus==="fetching",U=g==="pending",D=g==="error",it=U&&$,x=d!==void 0,I={status:g,fetchStatus:o.fetchStatus,isPending:U,isSuccess:g==="success",isError:D,isInitialLoading:it,isLoading:it,data:d,dataUpdatedAt:o.dataUpdatedAt,error:R,errorUpdatedAt:E,failureCount:o.fetchFailureCount,failureReason:o.fetchFailureReason,errorUpdateCount:o.errorUpdateCount,isFetched:o.dataUpdateCount>0||o.errorUpdateCount>0,isFetchedAfterMount:o.dataUpdateCount>v.dataUpdateCount||o.errorUpdateCount>v.errorUpdateCount,isFetching:$,isRefetching:$&&!U,isLoadingError:D&&!x,isPaused:o.fetchStatus==="paused",isPlaceholderData:f,isRefetchError:D&&x,isStale:Qt(t,s),refetch:this.refetch,promise:r(this,j),isEnabled:M(s.enabled,t)!==!1};if(this.options.experimental_prefetchInRender){const T=ft=>{I.status==="error"?ft.reject(I.error):I.data!==void 0&&ft.resolve(I.data)},lt=()=>{const ft=p(this,j,I.promise=te());T(ft)},G=r(this,j);switch(G.status){case"pending":t.queryHash===i.queryHash&&T(G);break;case"fulfilled":(I.status==="error"||I.data!==G.value)&&lt();break;case"rejected":(I.status!=="error"||I.error!==G.reason)&&lt();break}}return I}updateResult(){const t=r(this,w),s=this.createResult(r(this,b),this.options);if(p(this,K,r(this,b).state),p(this,tt,this.options),r(this,K).data!==void 0&&p(this,st,r(this,b)),bt(s,t))return;p(this,w,s);const i=()=>{if(!t)return!0;const{notifyOnChangeProps:n}=this.options,h=typeof n=="function"?n():n;if(h==="all"||!h&&!r(this,rt).size)return!0;const a=new Set(h??r(this,rt));return this.options.throwOnError&&a.add("error"),Object.keys(r(this,w)).some(c=>{const u=c;return r(this,w)[u]!==t[u]&&a.has(u)})};S(this,m,fe).call(this,{listeners:i()})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&S(this,m,Tt).call(this)}},C=new WeakMap,b=new WeakMap,ct=new WeakMap,w=new WeakMap,K=new WeakMap,tt=new WeakMap,j=new WeakMap,A=new WeakMap,ht=new WeakMap,et=new WeakMap,st=new WeakMap,H=new WeakMap,J=new WeakMap,q=new WeakMap,rt=new WeakMap,m=new WeakSet,ot=function(t){S(this,m,Ft).call(this);let s=r(this,b).fetch(this.options,t);return t!=null&&t.throwOnError||(s=s.catch(vt)),s},_t=function(){S(this,m,Mt).call(this);const t=ut(this.options.staleTime,r(this,b));if(at||r(this,w).isStale||!$t(t))return;const i=Le(r(this,w).dataUpdatedAt,t)+1;p(this,H,dt.setTimeout(()=>{r(this,w).isStale||this.updateResult()},i))},It=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(r(this,b)):this.options.refetchInterval)??!1},xt=function(t){S(this,m,jt).call(this),p(this,q,t),!(at||M(this.options.enabled,r(this,b))===!1||!$t(r(this,q))||r(this,q)===0)&&p(this,J,dt.setInterval(()=>{(this.options.refetchIntervalInBackground||Qe.isFocused())&&S(this,m,ot).call(this)},r(this,q)))},Tt=function(){S(this,m,_t).call(this),S(this,m,xt).call(this,S(this,m,It).call(this))},Mt=function(){r(this,H)&&(dt.clearTimeout(r(this,H)),p(this,H,void 0))},jt=function(){r(this,J)&&(dt.clearInterval(r(this,J)),p(this,J,void 0))},Ft=function(){const t=r(this,C).getQueryCache().build(r(this,C),this.options);if(t===r(this,b))return;const s=r(this,b);p(this,b,t),p(this,ct,t.state),this.hasListeners()&&(s==null||s.removeObserver(this),t.addObserver(this))},fe=function(t){mt.batch(()=>{t.listeners&&this.listeners.forEach(s=>{s(r(this,w))}),r(this,C).getQueryCache().notify({query:r(this,b),type:"observerResultsUpdated"})})},ue);function Be(e,t){return M(t.enabled,e)!==!1&&e.state.data===void 0&&!(e.state.status==="error"&&t.retryOnMount===!1)}function ee(e,t){return Be(e,t)||e.state.data!==void 0&&Pt(e,t,t.refetchOnMount)}function Pt(e,t,s){if(M(t.enabled,e)!==!1&&ut(t.staleTime,e)!=="static"){const i=typeof s=="function"?s(e):s;return i==="always"||i!==!1&&Qt(e,t)}return!1}function se(e,t,s,i){return(e!==t||M(i.enabled,e)===!1)&&(!s.suspense||e.state.status!=="error")&&Qt(e,s)}function Qt(e,t){return M(t.enabled,e)!==!1&&e.isStaleByTime(ut(t.staleTime,e))}function Ke(e,t){return!bt(e.getCurrentResult(),t)}function He(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var F,z,_,P,L,pt,Lt,ae,Je=(ae=class extends yt{constructor(t,s){super();y(this,L);y(this,F);y(this,z);y(this,_);y(this,P);p(this,F,t),this.setOptions(s),this.bindMethods(),S(this,L,pt).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(t){var i;const s=this.options;this.options=r(this,F).defaultMutationOptions(t),bt(this.options,s)||r(this,F).getMutationCache().notify({type:"observerOptionsUpdated",mutation:r(this,_),observer:this}),s!=null&&s.mutationKey&&this.options.mutationKey&&Gt(s.mutationKey)!==Gt(this.options.mutationKey)?this.reset():((i=r(this,_))==null?void 0:i.state.status)==="pending"&&r(this,_).setOptions(this.options)}onUnsubscribe(){var t;this.hasListeners()||(t=r(this,_))==null||t.removeObserver(this)}onMutationUpdate(t){S(this,L,pt).call(this),S(this,L,Lt).call(this,t)}getCurrentResult(){return r(this,z)}reset(){var t;(t=r(this,_))==null||t.removeObserver(this),p(this,_,void 0),S(this,L,pt).call(this),S(this,L,Lt).call(this)}mutate(t,s){var i;return p(this,P,s),(i=r(this,_))==null||i.removeObserver(this),p(this,_,r(this,F).getMutationCache().build(r(this,F),this.options)),r(this,_).addObserver(this),r(this,_).execute(t)}},F=new WeakMap,z=new WeakMap,_=new WeakMap,P=new WeakMap,L=new WeakSet,pt=function(){var s;const t=((s=r(this,_))==null?void 0:s.state)??He();p(this,z,{...t,isPending:t.status==="pending",isSuccess:t.status==="success",isError:t.status==="error",isIdle:t.status==="idle",mutate:this.mutate,reset:this.reset})},Lt=function(t){mt.batch(()=>{var s,i,n,h,a,c,u,v;if(r(this,P)&&this.hasListeners()){const l=r(this,z).variables,o=r(this,z).context,f={client:r(this,F),meta:this.options.meta,mutationKey:this.options.mutationKey};(t==null?void 0:t.type)==="success"?((i=(s=r(this,P)).onSuccess)==null||i.call(s,t.data,l,o,f),(h=(n=r(this,P)).onSettled)==null||h.call(n,t.data,null,l,o,f)):(t==null?void 0:t.type)==="error"&&((c=(a=r(this,P)).onError)==null||c.call(a,t.error,l,o,f),(v=(u=r(this,P)).onSettled)==null||v.call(u,void 0,t.error,l,o,f))}this.listeners.forEach(l=>{l(r(this,z))})})},ae),$e=O.createContext(void 0),de=e=>{const t=O.useContext($e);if(!t)throw new Error("No QueryClient set, use QueryClientProvider to set one");return t},pe=O.createContext(!1),Ge=()=>O.useContext(pe);pe.Provider;function Ye(){let e=!1;return{clearReset:()=>{e=!1},reset:()=>{e=!0},isReset:()=>e}}var Ze=O.createContext(Ye()),Xe=()=>O.useContext(Ze),ts=(e,t)=>{(e.suspense||e.throwOnError||e.experimental_prefetchInRender)&&(t.isReset()||(e.retryOnMount=!1))},es=e=>{O.useEffect(()=>{e.clearReset()},[e])},ss=({result:e,errorResetBoundary:t,throwOnError:s,query:i,suspense:n})=>e.isError&&!t.isReset()&&!e.isFetching&&i&&(n&&e.data===void 0||le(s,[e.error,i])),rs=e=>{if(e.suspense){const s=n=>n==="static"?n:Math.max(n??1e3,1e3),i=e.staleTime;e.staleTime=typeof i=="function"?(...n)=>s(i(...n)):s(i),typeof e.gcTime=="number"&&(e.gcTime=Math.max(e.gcTime,1e3))}},is=(e,t)=>e.isLoading&&e.isFetching&&!t,ns=(e,t)=>(e==null?void 0:e.suspense)&&t.isPending,re=(e,t,s)=>t.fetchOptimistic(e).catch(()=>{s.clearReset()});function os(e,t,s){var o,f,d,R,E;const i=Ge(),n=Xe(),h=de(),a=h.defaultQueryOptions(e);(f=(o=h.getDefaultOptions().queries)==null?void 0:o._experimental_beforeQuery)==null||f.call(o,a),a._optimisticResults=i?"isRestoring":"optimistic",rs(a),ts(a,n),es(n);const c=!h.getQueryCache().get(a.queryHash),[u]=O.useState(()=>new t(h,a)),v=u.getOptimisticResult(a),l=!i&&e.subscribed!==!1;if(O.useSyncExternalStore(O.useCallback(g=>{const W=l?u.subscribe(mt.batchCalls(g)):vt;return u.updateResult(),W},[u,l]),()=>u.getCurrentResult(),()=>u.getCurrentResult()),O.useEffect(()=>{u.setOptions(a)},[a,u]),ns(a,v))throw re(a,u,n);if(ss({result:v,errorResetBoundary:n,throwOnError:a.throwOnError,query:h.getQueryCache().get(a.queryHash),suspense:a.suspense}))throw v.error;if((R=(d=h.getDefaultOptions().queries)==null?void 0:d._experimental_afterQuery)==null||R.call(d,a,v),a.experimental_prefetchInRender&&!at&&is(v,i)){const g=c?re(a,u,n):(E=h.getQueryCache().get(a.queryHash))==null?void 0:E.promise;g==null||g.catch(vt).finally(()=>{u.updateResult()})}return a.notifyOnChangeProps?v:u.trackResult(v)}function ls(e,t){return os(e,Ve)}function fs(e,t){const s=de(),[i]=O.useState(()=>new Je(s,e));O.useEffect(()=>{i.setOptions(e)},[i,e]);const n=O.useSyncExternalStore(O.useCallback(a=>i.subscribe(mt.batchCalls(a)),[i]),()=>i.getCurrentResult(),()=>i.getCurrentResult()),h=O.useCallback((a,c)=>{i.mutate(a,c).catch(vt)},[i]);if(n.error&&le(i.options.throwOnError,[n.error]))throw n.error;return{...n,mutate:h,mutateAsync:n.mutate}}export{de as a,fs as b,hs as c,cs as j,ls as u};
