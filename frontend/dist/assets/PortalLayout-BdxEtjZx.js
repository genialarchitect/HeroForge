import{j as e}from"./vendor-state-BjT_zREg.js";import{r as l,j as f,u as p,L as u}from"./vendor-react-5KxtEOLM.js";import{av as o}from"./index-RI0GBk2h.js";import{S as k,X as v,cB as j,bp as N,a4 as w,F as y,U as d,bX as S,bU as C}from"./vendor-ui-C4nf_tR6.js";const L=[{name:"Dashboard",href:"/portal/dashboard",icon:j},{name:"Engagements",href:"/portal/engagements",icon:N},{name:"Vulnerabilities",href:"/portal/vulnerabilities",icon:w},{name:"Reports",href:"/portal/reports",icon:y},{name:"Profile",href:"/portal/profile",icon:d}];function z({children:c}){const[i,s]=l.useState(!1),[a,x]=l.useState(null),n=f(),r=p();l.useEffect(()=>{const t=o.getStoredUser();t?x(t):o.isAuthenticated()||r("/portal/login")},[r]);const h=()=>{o.logout(),r("/portal/login")},m=t=>n.pathname===t||t!=="/portal/dashboard"&&n.pathname.startsWith(t);return e.jsxs("div",{className:"min-h-screen bg-light-bg dark:bg-dark-bg transition-colors",children:[i&&e.jsx("div",{className:"fixed inset-0 bg-black/50 z-40 lg:hidden",onClick:()=>s(!1)}),e.jsxs("aside",{className:`
          fixed top-0 left-0 h-full z-50
          bg-light-surface dark:bg-dark-surface
          border-r border-light-border dark:border-dark-border
          transition-transform duration-300 ease-in-out
          w-64 flex flex-col
          ${i?"translate-x-0":"-translate-x-full"}
          lg:translate-x-0
        `,children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-light-border dark:border-dark-border",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"flex items-center justify-center w-8 h-8 bg-primary rounded-lg",children:e.jsx(k,{className:"h-5 w-5 text-white"})}),e.jsx("span",{className:"font-bold text-slate-900 dark:text-white",children:"Customer Portal"})]}),e.jsx("button",{className:"lg:hidden p-1.5 rounded-lg hover:bg-light-hover dark:hover:bg-dark-hover",onClick:()=>s(!1),children:e.jsx(v,{className:"h-5 w-5 text-slate-600 dark:text-slate-400"})})]}),e.jsx("nav",{className:"flex-1 p-3 space-y-1 overflow-y-auto",children:L.map(t=>{const b=t.icon,g=m(t.href);return e.jsxs(u,{to:t.href,onClick:()=>s(!1),className:`flex items-center gap-3 px-3 py-2 rounded-lg transition-colors text-sm ${g?"bg-primary/10 text-primary font-medium":"text-slate-600 dark:text-slate-400 hover:bg-light-hover dark:hover:bg-dark-hover hover:text-slate-900 dark:hover:text-white"}`,children:[e.jsx(b,{className:"h-4 w-4 flex-shrink-0"}),e.jsx("span",{children:t.name})]},t.name)})}),e.jsxs("div",{className:"p-4 border-t border-light-border dark:border-dark-border",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx("div",{className:"w-8 h-8 bg-primary/10 rounded-full flex items-center justify-center",children:e.jsx(d,{className:"h-4 w-4 text-primary"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium text-slate-900 dark:text-white truncate",children:a==null?void 0:a.email}),e.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 truncate",children:a==null?void 0:a.customer_name})]})]}),e.jsxs("button",{onClick:h,className:"flex items-center gap-2 w-full px-3 py-2 text-sm text-slate-600 dark:text-slate-400 hover:bg-light-hover dark:hover:bg-dark-hover hover:text-slate-900 dark:hover:text-white rounded-lg transition-colors",children:[e.jsx(S,{className:"h-4 w-4"}),e.jsx("span",{children:"Sign out"})]})]})]}),e.jsxs("div",{className:"lg:ml-64 flex flex-col min-h-screen transition-all duration-300",children:[e.jsx("header",{className:"sticky top-0 z-30 bg-light-surface dark:bg-dark-surface border-b border-light-border dark:border-dark-border",children:e.jsxs("div",{className:"flex items-center justify-between h-16 px-4 sm:px-6 lg:px-8",children:[e.jsx("button",{type:"button",className:"lg:hidden p-2 rounded-lg hover:bg-light-hover dark:hover:bg-dark-hover",onClick:()=>s(!0),children:e.jsx(C,{className:"h-5 w-5 text-slate-600 dark:text-slate-400"})}),e.jsx("div",{className:"flex-1"}),e.jsxs("div",{className:"flex items-center text-sm text-slate-500 dark:text-slate-400",children:["Welcome, ",e.jsx("span",{className:"ml-1 font-medium text-slate-900 dark:text-white",children:a==null?void 0:a.customer_name})]})]})}),e.jsx("main",{className:"flex-1 px-4 sm:px-6 lg:px-8 py-6 w-full max-w-7xl mx-auto",children:c})]})]})}export{z as P};
