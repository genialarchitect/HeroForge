import{j as e}from"./vendor-state-GQ86PG8z.js";import{r}from"./vendor-react-5KxtEOLM.js";import{P as c}from"./PortalLayout-DaLf70HK.js";import{aw as m}from"./index-DXyI7EZp.js";import{F as x,L as w,a6 as k}from"./vendor-ui-B4zQTbMA.js";import"./vendor-utils-DfRopTPV.js";function F(){const[d,h]=r.useState([]),[b,p]=r.useState(!0),[l,g]=r.useState(""),[n,o]=r.useState(null);r.useEffect(()=>{u()},[]);const u=async()=>{try{const a=await m.getAll();h(a.data)}catch(a){g("Failed to load reports"),console.error(a)}finally{p(!1)}},j=async a=>{o(a.id);try{const s=await m.download(a.id),f=new Blob([s.data]),i=window.URL.createObjectURL(f),t=document.createElement("a");t.href=i,t.download=a.name.replace(/\s+/g,"_")+"."+(a.format||"pdf"),document.body.appendChild(t),t.click(),window.URL.revokeObjectURL(i),document.body.removeChild(t)}catch(s){console.error("Failed to download report:",s),alert("Failed to download report")}finally{o(null)}};return b?e.jsx(c,{children:e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"w-8 h-8 border-4 border-primary border-t-transparent rounded-full animate-spin"})})}):e.jsx(c,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsx("h1",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:"Reports"}),l&&e.jsx("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 text-red-700 dark:text-red-300 p-4 rounded-lg",children:l}),d.length===0?e.jsxs("div",{className:"bg-light-surface dark:bg-dark-surface border border-light-border dark:border-dark-border rounded-lg p-8 text-center",children:[e.jsx(x,{className:"mx-auto h-12 w-12 text-slate-400 dark:text-slate-500 mb-4"}),e.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:"No reports available"}),e.jsx("p",{className:"text-sm text-slate-400 dark:text-slate-500 mt-1",children:"Reports will appear here once they are generated"})]}):e.jsx("div",{className:"grid gap-4",children:d.map(a=>e.jsxs("div",{className:"bg-light-surface dark:bg-dark-surface border border-light-border dark:border-dark-border rounded-lg p-6 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-10 h-10 bg-blue-100 dark:bg-blue-900/30 rounded-lg flex items-center justify-center",children:e.jsx(x,{className:"w-5 h-5 text-blue-600 dark:text-blue-400"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-slate-900 dark:text-white",children:a.name}),e.jsxs("div",{className:"flex items-center gap-3 text-sm text-slate-500 dark:text-slate-400 mt-1",children:[e.jsx("span",{className:"uppercase",children:a.format||"PDF"}),e.jsx("span",{children:new Date(a.created_at).toLocaleDateString()}),a.engagement_name&&e.jsx("span",{className:"text-slate-400 dark:text-slate-500",children:a.engagement_name})]})]})]}),e.jsx("button",{onClick:()=>j(a),disabled:n===a.id,className:"flex items-center gap-2 px-4 py-2 bg-primary hover:bg-primary-dark text-white rounded-lg disabled:opacity-50 transition-colors",children:n===a.id?e.jsxs(e.Fragment,{children:[e.jsx(w,{className:"w-4 h-4 animate-spin"}),"Downloading..."]}):e.jsxs(e.Fragment,{children:[e.jsx(k,{className:"w-4 h-4"}),"Download"]})})]},a.id))})]})})}export{F as default};
