import{j as e}from"./vendor-state-oFDmcCcB.js";import{R as Y,r as i}from"./vendor-react-5KxtEOLM.js";import{W as K,_ as B,cx as oe,s as ce,K as xe,ac as X,p as I,y as U,aj as me,x as he,ag as Z,X as ae,d as ee,V as ge,J as ue,B as c,e as be,m as H,l as le,$ as de,h as ne,g as ie,bS as V,aN as pe,cy as te,aa as fe,Y as se,i as ke}from"./vendor-ui-7EurIAWU.js";import{L as je}from"./Layout-B2BPZquP.js";import{B as E,d as b}from"./index-MDkiA-RQ.js";import"./vendor-markdown-BwTKtS0m.js";import"./vendor-utils-DfRopTPV.js";const re={online:{bg:"bg-green-500/10",text:"text-green-500",dot:"bg-green-500"},busy:{bg:"bg-yellow-500/10",text:"text-yellow-500",dot:"bg-yellow-500"},offline:{bg:"bg-gray-500/10",text:"text-gray-500",dot:"bg-gray-500"},pending:{bg:"bg-blue-500/10",text:"text-blue-500",dot:"bg-blue-500"},disabled:{bg:"bg-red-500/10",text:"text-red-500",dot:"bg-red-500"}},Ne=({agent:d,onRotateToken:D,onDelete:R,onConfigure:C,onViewDetails:S})=>{const[k,j]=Y.useState(!1),_=Y.useRef(null),u=re[d.status]||re.offline;Y.useEffect(()=>{const l=x=>{_.current&&!_.current.contains(x.target)&&j(!1)};return document.addEventListener("mousedown",l),()=>document.removeEventListener("mousedown",l)},[]);const O=l=>{if(!l)return"Never";const x=new Date(l),z=new Date().getTime()-x.getTime(),f=Math.floor(z/6e4),F=Math.floor(f/60),w=Math.floor(F/24);return f<1?"Just now":f<60?`${f}m ago`:F<24?`${F}h ago`:`${w}d ago`},G=()=>{if(!d.capabilities)return[];try{return JSON.parse(d.capabilities)}catch{return[]}},v=()=>{if(!d.network_zones)return[];try{return JSON.parse(d.network_zones)}catch{return[]}},p=G(),A=v();return e.jsxs("div",{className:"bg-light-surface dark:bg-dark-surface border border-light-border dark:border-dark-border rounded-lg p-4 hover:shadow-lg transition-shadow cursor-pointer",onClick:()=>S==null?void 0:S(d),children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`p-2 rounded-lg ${u.bg}`,children:d.status==="online"||d.status==="busy"?e.jsx(K,{className:`h-5 w-5 ${u.text}`}):e.jsx(B,{className:`h-5 w-5 ${u.text}`})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-slate-900 dark:text-white",children:d.name}),e.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:d.hostname||d.ip_address||"Unknown host"})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("div",{className:`flex items-center gap-1.5 px-2 py-1 rounded-full ${u.bg}`,children:[e.jsx("span",{className:`h-2 w-2 rounded-full ${u.dot} animate-pulse`}),e.jsx("span",{className:`text-xs font-medium capitalize ${u.text}`,children:d.status})]}),e.jsxs("div",{className:"relative",ref:_,children:[e.jsx("button",{onClick:l=>{l.stopPropagation(),j(!k)},className:"p-1 hover:bg-light-hover dark:hover:bg-dark-hover rounded",children:e.jsx(oe,{className:"h-4 w-4 text-slate-500"})}),k&&e.jsxs("div",{className:"absolute right-0 mt-1 w-48 bg-light-surface dark:bg-dark-surface border border-light-border dark:border-dark-border rounded-lg shadow-lg py-1 z-50",children:[C&&e.jsxs("button",{onClick:l=>{l.stopPropagation(),C(d),j(!1)},className:"flex items-center gap-2 w-full px-3 py-2 text-sm text-slate-700 dark:text-slate-300 hover:bg-light-hover dark:hover:bg-dark-hover",children:[e.jsx(ce,{className:"h-4 w-4"}),"Configure"]}),D&&e.jsxs("button",{onClick:l=>{l.stopPropagation(),D(d),j(!1)},className:"flex items-center gap-2 w-full px-3 py-2 text-sm text-slate-700 dark:text-slate-300 hover:bg-light-hover dark:hover:bg-dark-hover",children:[e.jsx(xe,{className:"h-4 w-4"}),"Rotate Token"]}),R&&e.jsxs("button",{onClick:l=>{l.stopPropagation(),R(d),j(!1)},className:"flex items-center gap-2 w-full px-3 py-2 text-sm text-red-600 hover:bg-red-50 dark:hover:bg-red-900/20",children:[e.jsx(X,{className:"h-4 w-4"}),"Delete"]})]})]})]})]}),d.description&&e.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 mb-3 line-clamp-2",children:d.description}),e.jsxs("div",{className:"grid grid-cols-3 gap-3 mb-3",children:[e.jsxs("div",{className:"flex items-center gap-2 text-xs text-slate-500 dark:text-slate-400",children:[e.jsx(I,{className:"h-3.5 w-3.5"}),e.jsx("span",{children:O(d.last_heartbeat_at)})]}),e.jsxs("div",{className:"flex items-center gap-2 text-xs text-slate-500 dark:text-slate-400",children:[e.jsx(U,{className:"h-3.5 w-3.5"}),e.jsxs("span",{children:[d.current_tasks,"/",d.max_concurrent_tasks," tasks"]})]}),e.jsxs("div",{className:"flex items-center gap-2 text-xs text-slate-500 dark:text-slate-400",children:[e.jsx(me,{className:"h-3.5 w-3.5"}),e.jsx("span",{children:d.version||"Unknown"})]})]}),d.groups&&d.groups.length>0&&e.jsx("div",{className:"flex flex-wrap gap-1 mb-3",children:d.groups.map(l=>e.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium",style:{backgroundColor:`${l.color}20`,color:l.color,borderColor:l.color,borderWidth:1},children:l.name},l.id))}),e.jsxs("div",{className:"flex flex-wrap gap-1",children:[p.slice(0,3).map(l=>e.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 rounded text-xs bg-blue-500/10 text-blue-600 dark:text-blue-400",children:[e.jsx(he,{className:"h-3 w-3"}),l]},l)),A.slice(0,2).map(l=>e.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 rounded text-xs bg-purple-500/10 text-purple-600 dark:text-purple-400",children:[e.jsx(Z,{className:"h-3 w-3"}),l]},l)),p.length+A.length>5&&e.jsxs("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs bg-gray-500/10 text-gray-600 dark:text-gray-400",children:["+",p.length+A.length-5," more"]})]}),e.jsx("div",{className:"mt-3 pt-3 border-t border-light-border dark:border-dark-border",children:e.jsxs("div",{className:"flex items-center justify-between text-xs",children:[e.jsx("span",{className:"text-slate-500 dark:text-slate-400",children:"Token prefix:"}),e.jsxs("code",{className:"px-2 py-0.5 bg-slate-100 dark:bg-slate-800 rounded font-mono",children:[d.token_prefix,"..."]})]})})]})},ve=({isOpen:d,onClose:D,onSuccess:R})=>{const[C,S]=i.useState("form"),[k,j]=i.useState(""),[_,u]=i.useState(""),[O,G]=i.useState(""),[v,p]=i.useState(5),[A,l]=i.useState(!1),[x,$]=i.useState(null),[z,f]=i.useState(!1),F=async N=>{var J,L;if(N.preventDefault(),!k.trim()){c.error("Agent name is required");return}l(!0);try{const q=O.split(",").map(t=>t.trim()).filter(t=>t.length>0),s=await b.register({name:k.trim(),description:_.trim()||void 0,network_zones:q.length>0?q:void 0,max_concurrent_tasks:v});$(s.data),S("success"),R()}catch(q){const s=q;c.error(((L=(J=s.response)==null?void 0:J.data)==null?void 0:L.message)||"Failed to register agent")}finally{l(!1)}},w=async()=>{x!=null&&x.token&&(await navigator.clipboard.writeText(x.token),f(!0),c.success("Token copied to clipboard"),setTimeout(()=>f(!1),2e3))},P=()=>{S("form"),j(""),u(""),G(""),p(5),$(null),f(!1),D()};return d?e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[e.jsx("div",{className:"absolute inset-0 bg-black/50",onClick:P}),e.jsxs("div",{className:"relative bg-light-surface dark:bg-dark-surface border border-light-border dark:border-dark-border rounded-lg shadow-xl w-full max-w-lg mx-4",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-light-border dark:border-dark-border",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-primary/10 rounded-lg",children:e.jsx(U,{className:"h-5 w-5 text-primary"})}),e.jsx("h2",{className:"text-lg font-semibold text-slate-900 dark:text-white",children:C==="form"?"Register New Agent":"Agent Registered"})]}),e.jsx("button",{onClick:P,className:"p-1 hover:bg-light-hover dark:hover:bg-dark-hover rounded",children:e.jsx(ae,{className:"h-5 w-5 text-slate-500"})})]}),C==="form"?e.jsxs("form",{onSubmit:F,children:[e.jsxs("div",{className:"p-4 space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Agent Name *"}),e.jsx("input",{type:"text",value:k,onChange:N=>j(N.target.value),placeholder:"e.g., datacenter-scanner-01",className:"w-full px-3 py-2 bg-light-bg dark:bg-dark-bg border border-light-border dark:border-dark-border rounded-lg text-slate-900 dark:text-white focus:ring-2 focus:ring-primary focus:border-primary",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Description"}),e.jsx("textarea",{value:_,onChange:N=>u(N.target.value),placeholder:"Optional description of this agent's purpose",rows:2,className:"w-full px-3 py-2 bg-light-bg dark:bg-dark-bg border border-light-border dark:border-dark-border rounded-lg text-slate-900 dark:text-white focus:ring-2 focus:ring-primary focus:border-primary resize-none"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Network Zones"}),e.jsx("input",{type:"text",value:O,onChange:N=>G(N.target.value),placeholder:"e.g., internal, dmz, production (comma-separated)",className:"w-full px-3 py-2 bg-light-bg dark:bg-dark-bg border border-light-border dark:border-dark-border rounded-lg text-slate-900 dark:text-white focus:ring-2 focus:ring-primary focus:border-primary"}),e.jsx("p",{className:"mt-1 text-xs text-slate-500 dark:text-slate-400",children:"Define which network zones this agent can scan"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Max Concurrent Tasks"}),e.jsx("input",{type:"number",value:v,onChange:N=>p(parseInt(N.target.value)||1),min:1,max:20,className:"w-full px-3 py-2 bg-light-bg dark:bg-dark-bg border border-light-border dark:border-dark-border rounded-lg text-slate-900 dark:text-white focus:ring-2 focus:ring-primary focus:border-primary"}),e.jsx("p",{className:"mt-1 text-xs text-slate-500 dark:text-slate-400",children:"Maximum number of scan tasks this agent can run simultaneously"})]})]}),e.jsxs("div",{className:"flex justify-end gap-3 p-4 border-t border-light-border dark:border-dark-border",children:[e.jsx(E,{variant:"secondary",onClick:P,disabled:A,children:"Cancel"}),e.jsx(E,{type:"submit",loading:A,children:"Register Agent"})]})]}):e.jsxs("div",{className:"p-4 space-y-4",children:[e.jsxs("div",{className:"flex items-start gap-3 p-4 bg-green-500/10 border border-green-500/20 rounded-lg",children:[e.jsx(ee,{className:"h-5 w-5 text-green-500 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-green-700 dark:text-green-400",children:"Agent registered successfully!"}),e.jsxs("p",{className:"text-sm text-green-600 dark:text-green-500 mt-1",children:['Your agent "',x==null?void 0:x.name,'" is ready to be configured.']})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ge,{className:"h-4 w-4 text-yellow-500"}),e.jsx("span",{className:"text-sm font-medium text-yellow-700 dark:text-yellow-400",children:"Save this token now - it won't be shown again!"})]}),e.jsxs("div",{className:"relative",children:[e.jsx("code",{className:"block w-full p-3 bg-slate-100 dark:bg-slate-800 rounded-lg text-sm font-mono text-slate-900 dark:text-white break-all",children:x==null?void 0:x.token}),e.jsx("button",{onClick:w,className:"absolute top-2 right-2 p-2 hover:bg-slate-200 dark:hover:bg-slate-700 rounded",title:"Copy token",children:z?e.jsx(ee,{className:"h-4 w-4 text-green-500"}):e.jsx(ue,{className:"h-4 w-4 text-slate-500"})})]})]}),e.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-800/50 rounded-lg",children:[e.jsx("h4",{className:"text-sm font-medium text-slate-900 dark:text-white mb-2",children:"Configure the agent"}),e.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 mb-2",children:"Set the following environment variables on your agent:"}),e.jsx("pre",{className:"text-xs bg-slate-100 dark:bg-slate-800 p-2 rounded overflow-x-auto",children:`HEROFORGE_AGENT_TOKEN="${x==null?void 0:x.token}"
HEROFORGE_SERVER_URL="https://heroforge.example.com"
HEROFORGE_AGENT_NAME="${x==null?void 0:x.name}"`})]}),e.jsx("div",{className:"flex justify-end pt-2",children:e.jsx(E,{onClick:P,children:"Done"})})]})]})]}):null},we=({peerData:d,clusters:D,agents:R,onRefresh:C})=>{const[S,k]=i.useState(!1),[j,_]=i.useState(""),[u,O]=i.useState(""),[G,v]=i.useState(!1),[p,A]=i.useState(new Set),[l,x]=i.useState(null),[$,z]=i.useState(null),f=s=>{const t=new Set(p);t.has(s)?t.delete(s):t.add(s),A(t)},F=async s=>{var t,o;if(s.preventDefault(),!j.trim()){c.error("Cluster name is required");return}v(!0);try{const h={name:j.trim(),description:u.trim()||void 0};await b.mesh.createCluster(h),c.success("Cluster created successfully"),_(""),O(""),k(!1),C()}catch(h){const y=h;c.error(((o=(t=y.response)==null?void 0:t.data)==null?void 0:o.message)||"Failed to create cluster")}finally{v(!1)}},w=async s=>{var t,o;if(confirm("Are you sure you want to delete this cluster?"))try{await b.mesh.deleteCluster(s),c.success("Cluster deleted"),C()}catch(h){const y=h;c.error(((o=(t=y.response)==null?void 0:t.data)==null?void 0:o.message)||"Failed to delete cluster")}},P=async(s,t)=>{var o,h;z(s);try{await b.mesh.addAgentToCluster(s,t),c.success("Agent added to cluster"),x(null),C()}catch(y){const M=y;c.error(((h=(o=M.response)==null?void 0:o.data)==null?void 0:h.message)||"Failed to add agent to cluster")}finally{z(null)}},N=async(s,t)=>{var o,h;try{await b.mesh.removeAgentFromCluster(s,t),c.success("Agent removed from cluster"),C()}catch(y){const M=y;c.error(((h=(o=M.response)==null?void 0:o.data)==null?void 0:h.message)||"Failed to remove agent from cluster")}},J=s=>{const t=new Set(s.members.map(o=>o.id));return R.filter(o=>!t.has(o.id)&&o.status!=="disabled")},L=s=>{switch(s){case"connected":return"text-green-500";case"connecting":return"text-yellow-500";case"disconnected":return"text-gray-500";case"error":return"text-red-500";default:return"text-gray-500"}},q=s=>{switch(s){case"connected":return e.jsx(ie,{className:"h-4 w-4"});case"connecting":return e.jsx(I,{className:"h-4 w-4"});case"disconnected":return e.jsx(B,{className:"h-4 w-4"});case"error":return e.jsx(ne,{className:"h-4 w-4"});default:return e.jsx(B,{className:"h-4 w-4"})}};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h3",{className:"text-lg font-semibold text-slate-900 dark:text-white flex items-center gap-2",children:[e.jsx(be,{className:"h-5 w-5 text-primary"}),"Mesh Clusters"]}),e.jsxs(E,{size:"sm",onClick:()=>k(!0),children:[e.jsx(H,{className:"h-4 w-4 mr-1"}),"New Cluster"]})]}),S&&e.jsxs("form",{onSubmit:F,className:"mb-4 p-4 bg-light-surface dark:bg-dark-surface border border-light-border dark:border-dark-border rounded-lg",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Cluster Name"}),e.jsx("input",{type:"text",value:j,onChange:s=>_(s.target.value),placeholder:"e.g., Production Scanners",className:"w-full px-3 py-2 bg-light-bg dark:bg-dark-bg border border-light-border dark:border-dark-border rounded-lg text-slate-900 dark:text-white focus:ring-2 focus:ring-primary focus:border-primary",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Description"}),e.jsx("input",{type:"text",value:u,onChange:s=>O(s.target.value),placeholder:"Optional description",className:"w-full px-3 py-2 bg-light-bg dark:bg-dark-bg border border-light-border dark:border-dark-border rounded-lg text-slate-900 dark:text-white focus:ring-2 focus:ring-primary focus:border-primary"})]})]}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(E,{variant:"secondary",size:"sm",onClick:()=>k(!1),disabled:G,children:"Cancel"}),e.jsx(E,{type:"submit",size:"sm",loading:G,children:"Create Cluster"})]})]}),D.length===0?e.jsxs("div",{className:"text-center py-8 bg-light-surface dark:bg-dark-surface border border-light-border dark:border-dark-border rounded-lg",children:[e.jsx(Z,{className:"h-12 w-12 text-slate-400 mx-auto mb-3"}),e.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"No clusters configured"}),e.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-500 mt-1",children:"Create a cluster to organize agents into mesh networks"})]}):e.jsx("div",{className:"space-y-3",children:D.map(s=>e.jsxs("div",{className:"bg-light-surface dark:bg-dark-surface border border-light-border dark:border-dark-border rounded-lg overflow-hidden",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 cursor-pointer hover:bg-light-hover dark:hover:bg-dark-hover",onClick:()=>f(s.id),children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{className:"p-1",children:p.has(s.id)?e.jsx(le,{className:"h-4 w-4 text-slate-500"}):e.jsx(de,{className:"h-4 w-4 text-slate-500"})}),e.jsx("div",{className:"p-2 bg-purple-500/10 rounded-lg",children:e.jsx(Z,{className:"h-5 w-5 text-purple-500"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-slate-900 dark:text-white",children:s.name}),s.description&&e.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:s.description})]})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("span",{className:"text-sm text-slate-500 dark:text-slate-400",children:[s.member_count," agent",s.member_count!==1?"s":""]}),e.jsx("button",{onClick:t=>{t.stopPropagation(),w(s.id)},className:"p-1 hover:bg-red-500/10 rounded text-red-500",title:"Delete cluster",children:e.jsx(X,{className:"h-4 w-4"})})]})]}),p.has(s.id)&&e.jsxs("div",{className:"border-t border-light-border dark:border-dark-border p-4",children:[s.members.length===0?e.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 text-center py-4",children:"No agents in this cluster"}):e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3 mb-4",children:s.members.map(t=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-light-bg dark:bg-dark-bg rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[t.status==="online"||t.status==="busy"?e.jsx(K,{className:"h-4 w-4 text-green-500"}):e.jsx(B,{className:"h-4 w-4 text-gray-500"}),e.jsx("span",{className:"text-sm font-medium text-slate-900 dark:text-white",children:t.name})]}),e.jsx("button",{onClick:()=>N(s.id,t.id),className:"p-1 hover:bg-red-500/10 rounded text-red-500",title:"Remove from cluster",children:e.jsx(X,{className:"h-3 w-3"})})]},t.id))}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("select",{value:l||"",onChange:t=>x(t.target.value),className:"flex-1 px-3 py-2 bg-light-bg dark:bg-dark-bg border border-light-border dark:border-dark-border rounded-lg text-sm text-slate-900 dark:text-white",children:[e.jsx("option",{value:"",children:"Select an agent to add..."}),J(s).map(t=>e.jsxs("option",{value:t.id,children:[t.name," (",t.status,")"]},t.id))]}),e.jsx(E,{size:"sm",onClick:()=>l&&P(s.id,l),disabled:!l||$===s.id,loading:$===s.id,children:e.jsx(H,{className:"h-4 w-4"})})]})]})]},s.id))})]}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-semibold text-slate-900 dark:text-white flex items-center gap-2 mb-4",children:[e.jsx(K,{className:"h-5 w-5 text-primary"}),"Peer Connections"]}),d.length===0?e.jsxs("div",{className:"text-center py-8 bg-light-surface dark:bg-dark-surface border border-light-border dark:border-dark-border rounded-lg",children:[e.jsx(U,{className:"h-12 w-12 text-slate-400 mx-auto mb-3"}),e.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"No mesh-enabled agents"}),e.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-500 mt-1",children:"Enable mesh networking on agents to see peer connections"})]}):e.jsx("div",{className:"space-y-4",children:d.map(s=>e.jsxs("div",{className:"bg-light-surface dark:bg-dark-surface border border-light-border dark:border-dark-border rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-green-500/10 rounded-lg",children:e.jsx(U,{className:"h-5 w-5 text-green-500"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-slate-900 dark:text-white",children:s.agent_name}),e.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:["Port ",s.mesh_config.mesh_port,s.mesh_config.external_address&&` - ${s.mesh_config.external_address}`]})]})]}),s.stats&&e.jsxs("div",{className:"text-right text-sm text-slate-500 dark:text-slate-400",children:[e.jsxs("p",{children:[s.stats.active_connections,"/",s.stats.total_connections," active"]}),s.stats.avg_latency_ms!==null&&e.jsxs("p",{children:["Avg latency: ",s.stats.avg_latency_ms.toFixed(1),"ms"]})]})]}),s.peers.length===0?e.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 text-center py-2",children:"No peer connections"}):e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2",children:s.peers.map(t=>e.jsxs("div",{className:"flex items-center gap-2 p-2 bg-light-bg dark:bg-dark-bg rounded",children:[e.jsx("span",{className:L(t.connection_status),children:q(t.connection_status)}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("p",{className:"text-sm font-medium text-slate-900 dark:text-white truncate",children:[t.to_agent_id.slice(0,8),"..."]}),t.latency_ms!==null&&e.jsxs("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:[t.latency_ms,"ms"]})]})]},t.id))})]},s.agent_id))})]})]})},Q=["#22c55e","#3b82f6","#f97316","#8b5cf6","#ec4899","#eab308","#06b6d4","#f43f5e"],ye=({groups:d,agents:D,onRefresh:R})=>{const[C,S]=i.useState(!1),[k,j]=i.useState(null),[_,u]=i.useState(new Set),[O,G]=i.useState(null),[v,p]=i.useState(new Map),[A,l]=i.useState(""),[x,$]=i.useState(""),[z,f]=i.useState(""),[F,w]=i.useState(Q[0]),[P,N]=i.useState(!1),J=async r=>{const a=new Set(_);if(a.has(r))a.delete(r);else if(a.add(r),!v.has(r)){G(r);try{const m=await b.groups.get(r);p(new Map(v.set(r,m.data)))}catch{c.error("Failed to load group details")}finally{G(null)}}u(a)},L=()=>{l(""),$(""),f(""),w(Q[0])},q=async r=>{var a,m;if(r.preventDefault(),!A.trim()){c.error("Group name is required");return}N(!0);try{const g=z.split(",").map(T=>T.trim()).filter(T=>T.length>0),n={name:A.trim(),description:x.trim()||void 0,network_ranges:g.length>0?g:void 0,color:F};await b.groups.create(n),c.success("Group created successfully"),L(),S(!1),R()}catch(g){const n=g;c.error(((m=(a=n.response)==null?void 0:a.data)==null?void 0:m.message)||"Failed to create group")}finally{N(!1)}},s=async r=>{var a,m;if(r.preventDefault(),!k||!A.trim()){c.error("Group name is required");return}N(!0);try{const g=z.split(",").map(T=>T.trim()).filter(T=>T.length>0),n={name:A.trim(),description:x.trim()||void 0,network_ranges:g.length>0?g:void 0,color:F};await b.groups.update(k.id,n),c.success("Group updated successfully"),L(),j(null),R()}catch(g){const n=g;c.error(((m=(a=n.response)==null?void 0:a.data)==null?void 0:m.message)||"Failed to update group")}finally{N(!1)}},t=async r=>{var a,m;if(confirm("Are you sure you want to delete this group?"))try{await b.groups.delete(r),c.success("Group deleted"),R()}catch(g){const n=g;c.error(((m=(a=n.response)==null?void 0:a.data)==null?void 0:m.message)||"Failed to delete group")}},o=async(r,a)=>{var m,g;try{await b.groups.removeAgent(r,a),c.success("Agent removed from group");const n=await b.groups.get(r);p(new Map(v.set(r,n.data))),R()}catch(n){const T=n;c.error(((g=(m=T.response)==null?void 0:m.data)==null?void 0:g.message)||"Failed to remove agent")}},h=async(r,a)=>{var m,g;try{await b.groups.assignAgents(r,{agent_ids:[a]}),c.success("Agent added to group");const n=await b.groups.get(r);p(new Map(v.set(r,n.data))),R()}catch(n){const T=n;c.error(((g=(m=T.response)==null?void 0:m.data)==null?void 0:g.message)||"Failed to add agent")}},y=r=>{const a=v.get(r.id);if(l(r.name),$(r.description||""),w(r.color),a&&a.network_ranges)try{const m=JSON.parse(a.network_ranges);f(m.join(", "))}catch{f("")}else f("");j(a||r),S(!1)},M=r=>{const a=v.get(r.id);if(!a)return D;const m=new Set(a.agents.map(g=>g.id));return D.filter(g=>!m.has(g.id))},W=({isEdit:r=!1})=>e.jsxs("form",{onSubmit:r?s:q,className:"p-4 bg-light-surface dark:bg-dark-surface border border-light-border dark:border-dark-border rounded-lg mb-4",children:[e.jsx("h4",{className:"text-sm font-medium text-slate-900 dark:text-white mb-4",children:r?"Edit Group":"Create New Group"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Group Name *"}),e.jsx("input",{type:"text",value:A,onChange:a=>l(a.target.value),placeholder:"e.g., Production Scanners",className:"w-full px-3 py-2 bg-light-bg dark:bg-dark-bg border border-light-border dark:border-dark-border rounded-lg text-slate-900 dark:text-white focus:ring-2 focus:ring-primary focus:border-primary",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Color"}),e.jsx("div",{className:"flex items-center gap-2",children:Q.map(a=>e.jsx("button",{type:"button",onClick:()=>w(a),className:`w-6 h-6 rounded-full border-2 ${F===a?"border-slate-900 dark:border-white":"border-transparent"}`,style:{backgroundColor:a}},a))})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Description"}),e.jsx("input",{type:"text",value:x,onChange:a=>$(a.target.value),placeholder:"Optional description",className:"w-full px-3 py-2 bg-light-bg dark:bg-dark-bg border border-light-border dark:border-dark-border rounded-lg text-slate-900 dark:text-white focus:ring-2 focus:ring-primary focus:border-primary"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Network Ranges"}),e.jsx("input",{type:"text",value:z,onChange:a=>f(a.target.value),placeholder:"e.g., 192.168.1.0/24, 10.0.0.0/8 (comma-separated)",className:"w-full px-3 py-2 bg-light-bg dark:bg-dark-bg border border-light-border dark:border-dark-border rounded-lg text-slate-900 dark:text-white focus:ring-2 focus:ring-primary focus:border-primary"}),e.jsx("p",{className:"mt-1 text-xs text-slate-500 dark:text-slate-400",children:"Define which network ranges this group is responsible for scanning"})]}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(E,{variant:"secondary",size:"sm",onClick:()=>{L(),S(!1),j(null)},disabled:P,children:"Cancel"}),e.jsx(E,{type:"submit",size:"sm",loading:P,children:r?"Update Group":"Create Group"})]})]});return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("h3",{className:"text-lg font-semibold text-slate-900 dark:text-white flex items-center gap-2",children:[e.jsx(V,{className:"h-5 w-5 text-primary"}),"Agent Groups"]}),!C&&!k&&e.jsxs(E,{size:"sm",onClick:()=>S(!0),children:[e.jsx(H,{className:"h-4 w-4 mr-1"}),"New Group"]})]}),C&&e.jsx(W,{isEdit:!1}),k&&e.jsx(W,{isEdit:!0}),d.length===0?e.jsxs("div",{className:"text-center py-8 bg-light-surface dark:bg-dark-surface border border-light-border dark:border-dark-border rounded-lg",children:[e.jsx(V,{className:"h-12 w-12 text-slate-400 mx-auto mb-3"}),e.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"No groups created yet"}),e.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-500 mt-1",children:"Create a group to organize your agents"})]}):e.jsx("div",{className:"space-y-2",children:d.map(r=>{const a=v.get(r.id),m=_.has(r.id),g=O===r.id;return e.jsxs("div",{className:"bg-light-surface dark:bg-dark-surface border border-light-border dark:border-dark-border rounded-lg overflow-hidden",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 cursor-pointer hover:bg-light-hover dark:hover:bg-dark-hover",onClick:()=>J(r.id),children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{className:"p-1",children:m?e.jsx(le,{className:"h-4 w-4 text-slate-500"}):e.jsx(de,{className:"h-4 w-4 text-slate-500"})}),e.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:r.color}}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-slate-900 dark:text-white",children:r.name}),r.description&&e.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:r.description})]})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("span",{className:"text-sm text-slate-500 dark:text-slate-400 flex items-center gap-1",children:[e.jsx(U,{className:"h-4 w-4"}),r.agent_count," agent",r.agent_count!==1?"s":""]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("button",{onClick:n=>{n.stopPropagation(),y(r)},className:"p-1 hover:bg-light-hover dark:hover:bg-dark-hover rounded",title:"Edit group",children:e.jsx(pe,{className:"h-4 w-4 text-slate-500"})}),e.jsx("button",{onClick:n=>{n.stopPropagation(),t(r.id)},className:"p-1 hover:bg-red-500/10 rounded text-red-500",title:"Delete group",children:e.jsx(X,{className:"h-4 w-4"})})]})]})]}),m&&e.jsx("div",{className:"border-t border-light-border dark:border-dark-border p-4",children:g?e.jsx("div",{className:"flex items-center justify-center py-4",children:e.jsx("div",{className:"w-5 h-5 border-2 border-primary border-t-transparent rounded-full animate-spin"})}):a?e.jsxs(e.Fragment,{children:[a.network_ranges&&e.jsxs("div",{className:"mb-4",children:[e.jsx("p",{className:"text-xs font-medium text-slate-500 dark:text-slate-400 mb-2",children:"Network Ranges"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:(()=>{try{return JSON.parse(a.network_ranges).map(T=>e.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded text-xs bg-slate-100 dark:bg-slate-800 text-slate-700 dark:text-slate-300",children:[e.jsx(Z,{className:"h-3 w-3"}),T]},T))}catch{return null}})()})]}),a.agents.length===0?e.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 text-center py-2",children:"No agents in this group"}):e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2 mb-4",children:a.agents.map(n=>e.jsxs("div",{className:"flex items-center justify-between p-2 bg-light-bg dark:bg-dark-bg rounded",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:`w-2 h-2 rounded-full ${n.status==="online"||n.status==="busy"?"bg-green-500":"bg-gray-500"}`}),e.jsx("span",{className:"text-sm font-medium text-slate-900 dark:text-white truncate",children:n.name})]}),e.jsx("button",{onClick:()=>o(r.id,n.id),className:"p-1 hover:bg-red-500/10 rounded text-red-500",title:"Remove from group",children:e.jsx(ae,{className:"h-3 w-3"})})]},n.id))}),M(a).length>0&&e.jsx("div",{children:e.jsxs("select",{onChange:n=>{n.target.value&&(h(r.id,n.target.value),n.target.value="")},className:"w-full px-3 py-2 bg-light-bg dark:bg-dark-bg border border-light-border dark:border-dark-border rounded-lg text-sm text-slate-900 dark:text-white",defaultValue:"",children:[e.jsx("option",{value:"",children:"Add an agent to this group..."}),M(a).map(n=>e.jsxs("option",{value:n.id,children:[n.name," (",n.status,")"]},n.id))]})})]}):null})]},r.id)})})]})},Fe=()=>{const[d,D]=i.useState("agents"),[R,C]=i.useState(!0),[S,k]=i.useState(!1),[j,_]=i.useState(!1),[u,O]=i.useState([]),[G,v]=i.useState([]),[p,A]=i.useState(null),[l,x]=i.useState([]),[$,z]=i.useState([]),[f,F]=i.useState([]),w=async(t=!0)=>{t?C(!0):k(!0);try{const[o,h,y,M,W,r]=await Promise.all([b.list(),b.groups.list(),b.getStats(),b.tasks.list({limit:50}),b.mesh.getPeers().catch(()=>({data:[]})),b.mesh.getClusters().catch(()=>({data:[]}))]);O(o.data),v(h.data),A(y.data),x(M.data),z(W.data),F(r.data)}catch(o){c.error("Failed to load agent data"),console.error(o)}finally{C(!1),k(!1)}};i.useEffect(()=>{w()},[]);const P=async t=>{var o,h;if(confirm(`Are you sure you want to rotate the token for "${t.name}"? The current token will be invalidated.`))try{const y=await b.regenerateToken(t.id);c.success(`New token: ${y.data.token.slice(0,20)}... (copy it now!)`),w(!1)}catch(y){const M=y;c.error(((h=(o=M.response)==null?void 0:o.data)==null?void 0:h.message)||"Failed to rotate token")}},N=async t=>{var o,h;if(confirm(`Are you sure you want to delete agent "${t.name}"?`))try{await b.delete(t.id),c.success("Agent deleted"),w(!1)}catch(y){const M=y;c.error(((h=(o=M.response)==null?void 0:o.data)==null?void 0:h.message)||"Failed to delete agent")}},J=t=>{switch(t){case"completed":return e.jsx(ie,{className:"h-4 w-4 text-green-500"});case"running":return e.jsx(se,{className:"h-4 w-4 text-blue-500 animate-pulse"});case"pending":case"assigned":return e.jsx(I,{className:"h-4 w-4 text-yellow-500"});case"failed":case"cancelled":case"timed_out":return e.jsx(ke,{className:"h-4 w-4 text-red-500"});default:return e.jsx(ne,{className:"h-4 w-4 text-gray-500"})}},L=t=>{switch(t){case"completed":return"bg-green-500/10 text-green-700 dark:text-green-400";case"running":return"bg-blue-500/10 text-blue-700 dark:text-blue-400";case"pending":case"assigned":return"bg-yellow-500/10 text-yellow-700 dark:text-yellow-400";case"failed":case"cancelled":case"timed_out":return"bg-red-500/10 text-red-700 dark:text-red-400";default:return"bg-gray-500/10 text-gray-700 dark:text-gray-400"}},q=t=>t?new Date(t).toLocaleString():"N/A",s=[{id:"agents",label:"Agents",icon:U,count:u.length},{id:"groups",label:"Groups",icon:V,count:G.length},{id:"mesh",label:"Mesh",icon:Z,count:f.length},{id:"tasks",label:"Tasks",icon:te,count:l.length}];return e.jsxs(je,{children:[e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-2xl font-bold text-slate-900 dark:text-white flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-primary/10 rounded-lg",children:e.jsx(U,{className:"h-6 w-6 text-primary"})}),"Distributed Scanning Agents"]}),e.jsx("p",{className:"text-slate-600 dark:text-slate-400 mt-1",children:"Manage agents, groups, mesh networks, and distributed tasks"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs(E,{variant:"secondary",size:"sm",onClick:()=>w(!1),disabled:S,children:[e.jsx(fe,{className:`h-4 w-4 mr-1 ${S?"animate-spin":""}`}),"Refresh"]}),e.jsxs(E,{size:"sm",onClick:()=>_(!0),children:[e.jsx(H,{className:"h-4 w-4 mr-1"}),"Register Agent"]})]})]}),p&&e.jsxs("div",{className:"grid grid-cols-4 gap-4 mb-6",children:[e.jsx("div",{className:"bg-light-surface dark:bg-dark-surface border border-light-border dark:border-dark-border rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-blue-500/10 rounded-lg",children:e.jsx(U,{className:"h-5 w-5 text-blue-500"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:p.total_agents}),e.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Total Agents"})]})]})}),e.jsx("div",{className:"bg-light-surface dark:bg-dark-surface border border-light-border dark:border-dark-border rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-green-500/10 rounded-lg",children:e.jsx(K,{className:"h-5 w-5 text-green-500"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:p.online_agents}),e.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Online"})]})]})}),e.jsx("div",{className:"bg-light-surface dark:bg-dark-surface border border-light-border dark:border-dark-border rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-yellow-500/10 rounded-lg",children:e.jsx(se,{className:"h-5 w-5 text-yellow-500"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:p.busy_agents}),e.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Busy"})]})]})}),e.jsx("div",{className:"bg-light-surface dark:bg-dark-surface border border-light-border dark:border-dark-border rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-gray-500/10 rounded-lg",children:e.jsx(B,{className:"h-5 w-5 text-gray-500"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:p.offline_agents}),e.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Offline"})]})]})})]}),e.jsx("div",{className:"border-b border-light-border dark:border-dark-border mb-6",children:e.jsx("nav",{className:"flex gap-4",children:s.map(t=>{const o=t.icon;return e.jsxs("button",{onClick:()=>D(t.id),className:`flex items-center gap-2 px-4 py-3 text-sm font-medium border-b-2 -mb-px transition-colors ${d===t.id?"border-primary text-primary":"border-transparent text-slate-600 dark:text-slate-400 hover:text-slate-900 dark:hover:text-white"}`,children:[e.jsx(o,{className:"h-4 w-4"}),t.label,e.jsx("span",{className:"px-1.5 py-0.5 rounded text-xs bg-slate-100 dark:bg-slate-800",children:t.count})]},t.id)})})}),R?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx("div",{className:"w-8 h-8 border-4 border-primary border-t-transparent rounded-full animate-spin"})}):e.jsxs(e.Fragment,{children:[d==="agents"&&e.jsx("div",{children:u.length===0?e.jsxs("div",{className:"text-center py-12 bg-light-surface dark:bg-dark-surface border border-light-border dark:border-dark-border rounded-lg",children:[e.jsx(U,{className:"h-12 w-12 text-slate-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-slate-900 dark:text-white mb-2",children:"No agents registered"}),e.jsx("p",{className:"text-slate-600 dark:text-slate-400 mb-4",children:"Register an agent to start distributed scanning"}),e.jsxs(E,{onClick:()=>_(!0),children:[e.jsx(H,{className:"h-4 w-4 mr-1"}),"Register Agent"]})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:u.map(t=>e.jsx(Ne,{agent:t,onRotateToken:P,onDelete:N},t.id))})}),d==="groups"&&e.jsx(ye,{groups:G,agents:u,onRefresh:()=>w(!1)}),d==="mesh"&&e.jsx(we,{peerData:$,clusters:f,agents:u,onRefresh:()=>w(!1)}),d==="tasks"&&e.jsx("div",{children:l.length===0?e.jsxs("div",{className:"text-center py-12 bg-light-surface dark:bg-dark-surface border border-light-border dark:border-dark-border rounded-lg",children:[e.jsx(te,{className:"h-12 w-12 text-slate-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-slate-900 dark:text-white mb-2",children:"No tasks found"}),e.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"Tasks will appear here when you run distributed scans"})]}):e.jsx("div",{className:"bg-light-surface dark:bg-dark-surface border border-light-border dark:border-dark-border rounded-lg overflow-hidden",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-light-bg dark:bg-dark-bg border-b border-light-border dark:border-dark-border",children:[e.jsx("th",{className:"text-left px-4 py-3 text-sm font-medium text-slate-600 dark:text-slate-400",children:"Status"}),e.jsx("th",{className:"text-left px-4 py-3 text-sm font-medium text-slate-600 dark:text-slate-400",children:"Type"}),e.jsx("th",{className:"text-left px-4 py-3 text-sm font-medium text-slate-600 dark:text-slate-400",children:"Targets"}),e.jsx("th",{className:"text-left px-4 py-3 text-sm font-medium text-slate-600 dark:text-slate-400",children:"Agent"}),e.jsx("th",{className:"text-left px-4 py-3 text-sm font-medium text-slate-600 dark:text-slate-400",children:"Priority"}),e.jsx("th",{className:"text-left px-4 py-3 text-sm font-medium text-slate-600 dark:text-slate-400",children:"Created"})]})}),e.jsx("tbody",{className:"divide-y divide-light-border dark:divide-dark-border",children:l.map(t=>{var o;return e.jsxs("tr",{className:"hover:bg-light-hover dark:hover:bg-dark-hover",children:[e.jsx("td",{className:"px-4 py-3",children:e.jsxs("span",{className:`inline-flex items-center gap-1.5 px-2 py-1 rounded-full text-xs font-medium capitalize ${L(t.status)}`,children:[J(t.status),t.status]})}),e.jsx("td",{className:"px-4 py-3 text-sm text-slate-900 dark:text-white",children:t.task_type}),e.jsx("td",{className:"px-4 py-3 text-sm text-slate-600 dark:text-slate-400 max-w-xs truncate",children:t.targets}),e.jsx("td",{className:"px-4 py-3 text-sm",children:t.agent_id?e.jsx("span",{className:"text-slate-900 dark:text-white",children:((o=u.find(h=>h.id===t.agent_id))==null?void 0:o.name)||t.agent_id.slice(0,8)}):e.jsx("span",{className:"text-slate-500 dark:text-slate-400",children:t.group_id?"Group":"Unassigned"})}),e.jsx("td",{className:"px-4 py-3 text-sm text-slate-600 dark:text-slate-400",children:t.priority}),e.jsx("td",{className:"px-4 py-3 text-sm text-slate-600 dark:text-slate-400",children:q(t.created_at)})]},t.id)})})]})})})]})]}),e.jsx(ve,{isOpen:j,onClose:()=>_(!1),onSuccess:()=>w(!1)})]})};export{Fe as default};
