import{j as e}from"./vendor-state-BXNPjUwt.js";import{r as l}from"./vendor-react-5KxtEOLM.js";import{h as B,p as re,bK as K,bL as J,s as $,ab as le,ba as H,F as _,S as V,bM as q,L as U,aT as X,X as ee,bD as ie,bN as Q,g as W,O as ne,B as c,a2 as de,a9 as se,z as ce,x as oe,au as xe,a0 as Y,u as me,af as he,bO as G,m as Z,bJ as ge,y as pe,H as ue}from"./vendor-ui-PizTOSgB.js";import{L as be}from"./Layout-CeExTnzB.js";import{C as E}from"./Card-D4UbjXYP.js";import{B as v,I as ae}from"./index-DgePDh_X.js";import{L as je}from"./LoadingSpinner-p-Ub3czh.js";import{B as z}from"./Badge-B0_IBqp5.js";import{a as fe}from"./vendor-utils-DfRopTPV.js";import"./Header-Dw99lsG2.js";import"./vendor-markdown-RN55YrVy.js";const Ne=s=>{switch(s){case"scanner":return e.jsx(q,{className:"h-5 w-5"});case"detector":return e.jsx(V,{className:"h-5 w-5"});case"reporter":return e.jsx(_,{className:"h-5 w-5"});case"integration":return e.jsx(H,{className:"h-5 w-5"});default:return e.jsx(H,{className:"h-5 w-5"})}},ve=s=>{switch(s){case"scanner":return"primary";case"detector":return"warning";case"reporter":return"info";case"integration":return"success";default:return"primary"}},ke=s=>{switch(s){case"enabled":return e.jsxs(z,{variant:"success",className:"flex items-center gap-1",children:[e.jsx(J,{className:"h-3 w-3"}),"Enabled"]});case"disabled":return e.jsxs(z,{variant:"secondary",className:"flex items-center gap-1",children:[e.jsx(K,{className:"h-3 w-3"}),"Disabled"]});case"error":return e.jsxs(z,{variant:"danger",className:"flex items-center gap-1",children:[e.jsx(B,{className:"h-3 w-3"}),"Error"]});case"installing":return e.jsxs(z,{variant:"info",className:"flex items-center gap-1",children:[e.jsx(U,{className:"h-3 w-3 animate-spin"}),"Installing"]});case"updating":return e.jsxs(z,{variant:"info",className:"flex items-center gap-1",children:[e.jsx(U,{className:"h-3 w-3 animate-spin"}),"Updating"]});default:return e.jsx(z,{variant:"secondary",children:s})}},we=({plugin:s,onEnable:r,onDisable:o,onUninstall:m,onSettings:k,isLoading:u})=>{const w=s.status==="enabled",x=s.status==="enabled"||s.status==="disabled";return e.jsxs("div",{className:"bg-light-surface dark:bg-dark-surface border border-light-border dark:border-dark-border rounded-lg p-4 hover:border-primary/50 transition-colors",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"p-2 rounded-lg bg-primary/10 text-primary",children:Ne(s.plugin_type)}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-slate-900 dark:text-white",children:s.name}),e.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:["v",s.version]})]})]}),e.jsx("div",{className:"flex items-center gap-2",children:ke(s.status)})]}),e.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 mb-3 line-clamp-2",children:s.description||"No description provided."}),s.status==="error"&&s.error_message&&e.jsx("div",{className:"mb-3 p-2 bg-red-500/10 border border-red-500/30 rounded text-sm text-red-500",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(B,{className:"h-4 w-4 mt-0.5 flex-shrink-0"}),e.jsx("span",{children:s.error_message})]})}),e.jsxs("div",{className:"flex items-center gap-4 mb-4 text-xs text-slate-500 dark:text-slate-400",children:[e.jsx("div",{className:"flex items-center gap-1",children:e.jsx(z,{variant:ve(s.plugin_type),size:"sm",children:s.plugin_type})}),e.jsx("div",{className:"flex items-center gap-1",children:e.jsxs("span",{children:["by ",s.author]})}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(re,{className:"h-3 w-3"}),e.jsx("span",{children:new Date(s.installed_at).toLocaleDateString()})]})]}),e.jsxs("div",{className:"flex items-center gap-2 pt-3 border-t border-light-border dark:border-dark-border",children:[x&&e.jsx(e.Fragment,{children:w?e.jsxs(v,{variant:"secondary",size:"sm",onClick:()=>o(s.id),disabled:u,className:"flex items-center gap-1",children:[e.jsx(K,{className:"h-4 w-4"}),"Disable"]}):e.jsxs(v,{variant:"primary",size:"sm",onClick:()=>r(s.id),disabled:u,className:"flex items-center gap-1",children:[e.jsx(J,{className:"h-4 w-4"}),"Enable"]})}),e.jsxs(v,{variant:"ghost",size:"sm",onClick:()=>k(s.id),className:"flex items-center gap-1",children:[e.jsx($,{className:"h-4 w-4"}),"Settings"]}),e.jsxs(v,{variant:"ghost",size:"sm",onClick:()=>m(s.id),disabled:u,className:"flex items-center gap-1 text-red-500 hover:text-red-600 hover:bg-red-500/10",children:[e.jsx(le,{className:"h-4 w-4"}),"Uninstall"]})]})]})},N=fe.create({baseURL:"/api"});N.interceptors.request.use(s=>{const r=localStorage.getItem("token");return r&&(s.headers.Authorization=`Bearer ${r}`),s});const S={list:s=>{const r=new URLSearchParams;return s!=null&&s.plugin_type&&r.append("plugin_type",s.plugin_type),s!=null&&s.status&&r.append("status",s.status),s!=null&&s.search&&r.append("search",s.search),N.get(`/plugins?${r.toString()}`)},getStats:()=>N.get("/plugins/stats"),getTypes:()=>N.get("/plugins/types"),get:s=>N.get(`/plugins/${s}`),installFromUrl:s=>N.post("/plugins/install",s),uploadPlugin:(s,r=!0)=>{const o=new FormData;return o.append("file",s),o.append("enable",r.toString()),N.post("/plugins/upload",o,{headers:{"Content-Type":"multipart/form-data"}})},validatePlugin:s=>{const r=new FormData;return r.append("file",s),N.post("/plugins/validate",r,{headers:{"Content-Type":"multipart/form-data"}})},enable:s=>N.post(`/plugins/${s}/enable`),disable:s=>N.post(`/plugins/${s}/disable`),uninstall:s=>N.delete(`/plugins/${s}`),getSettings:s=>N.get(`/plugins/${s}/settings`),updateSettings:(s,r)=>N.put(`/plugins/${s}/settings`,{settings:r}),deleteSettings:s=>N.delete(`/plugins/${s}/settings`)},ye=({isOpen:s,onClose:r,onInstalled:o})=>{const[m,k]=l.useState("url"),[u,w]=l.useState(""),[x,T]=l.useState(null),[g,C]=l.useState(!0),[F,P]=l.useState(!1),[A,I]=l.useState(!1),[p,R]=l.useState(null),t=l.useRef(null),i=()=>{w(""),T(null),C(!0),R(null)},n=()=>{i(),r()},b=d=>{var y;const j=(y=d.target.files)==null?void 0:y[0];j&&(T(j),R(null))},M=async()=>{var d,j;if(!x){c.error("Please select a file to validate");return}I(!0);try{const y=await S.validatePlugin(x);R(y.data),y.data.valid?c.success("Plugin validation passed"):c.error("Plugin validation failed")}catch(y){const a=y;c.error(((j=(d=a.response)==null?void 0:d.data)==null?void 0:j.error)||"Failed to validate plugin")}finally{I(!1)}},O=async()=>{var d,j,y;if(m==="url"&&!u.trim()){c.error("Please enter a plugin URL");return}if(m==="file"&&!x){c.error("Please select a plugin file");return}P(!0);try{m==="url"?await S.installFromUrl({url:u.trim(),enable:g}):x&&await S.uploadPlugin(x,g),c.success("Plugin installed successfully"),o(),n()}catch(a){const h=a,f=typeof((d=h.response)==null?void 0:d.data)=="string"?h.response.data:((y=(j=h.response)==null?void 0:j.data)==null?void 0:y.error)||"Failed to install plugin";c.error(f)}finally{P(!1)}};return s?e.jsx("div",{className:"fixed inset-0 bg-black/60 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-light-surface dark:bg-dark-surface rounded-lg shadow-xl max-w-lg w-full border border-light-border dark:border-dark-border",children:[e.jsx("div",{className:"p-6 border-b border-light-border dark:border-dark-border",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("h2",{className:"text-xl font-bold text-slate-900 dark:text-white flex items-center gap-2",children:[e.jsx(X,{className:"h-5 w-5"}),"Install Plugin"]}),e.jsx("button",{onClick:n,className:"text-slate-400 hover:text-slate-900 dark:hover:text-white",children:e.jsx(ee,{className:"h-6 w-6"})})]})}),e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:()=>{k("url"),R(null)},className:`flex-1 flex items-center justify-center gap-2 px-4 py-2 rounded-lg border transition-colors ${m==="url"?"bg-primary/10 border-primary text-primary":"border-light-border dark:border-dark-border text-slate-600 dark:text-slate-400 hover:border-primary/50"}`,children:[e.jsx(ie,{className:"h-4 w-4"}),"From URL"]}),e.jsxs("button",{onClick:()=>{k("file"),R(null)},className:`flex-1 flex items-center justify-center gap-2 px-4 py-2 rounded-lg border transition-colors ${m==="file"?"bg-primary/10 border-primary text-primary":"border-light-border dark:border-dark-border text-slate-600 dark:text-slate-400 hover:border-primary/50"}`,children:[e.jsx(Q,{className:"h-4 w-4"}),"Upload File"]})]}),m==="url"&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Plugin URL"}),e.jsx(ae,{type:"url",value:u,onChange:d=>w(d.target.value),placeholder:"https://example.com/plugin.zip",disabled:F}),e.jsx("p",{className:"mt-1 text-xs text-slate-500 dark:text-slate-400",children:"Enter the URL of a plugin package (.zip file)"})]}),m==="file"&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Plugin File"}),e.jsx("input",{ref:t,type:"file",accept:".zip",onChange:b,className:"hidden"}),e.jsx("div",{onClick:()=>{var d;return(d=t.current)==null?void 0:d.click()},className:"border-2 border-dashed border-light-border dark:border-dark-border rounded-lg p-6 text-center cursor-pointer hover:border-primary/50 transition-colors",children:x?e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx(Q,{className:"h-8 w-8 text-primary"}),e.jsxs("div",{className:"text-left",children:[e.jsx("p",{className:"font-medium text-slate-900 dark:text-white",children:x.name}),e.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:[(x.size/1024).toFixed(1)," KB"]})]})]}):e.jsxs("div",{children:[e.jsx(X,{className:"h-8 w-8 mx-auto text-slate-400 mb-2"}),e.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Click to select a plugin file (.zip)"})]})}),x&&e.jsx("div",{className:"mt-2 flex justify-end",children:e.jsxs(v,{variant:"secondary",size:"sm",onClick:M,disabled:A,className:"flex items-center gap-1",children:[A?e.jsx(U,{className:"h-4 w-4 animate-spin"}):e.jsx(W,{className:"h-4 w-4"}),"Validate"]})})]}),p&&e.jsx("div",{className:`p-3 rounded-lg border ${p.valid?"bg-green-500/10 border-green-500/30":"bg-red-500/10 border-red-500/30"}`,children:e.jsxs("div",{className:"flex items-start gap-2",children:[p.valid?e.jsx(W,{className:"h-5 w-5 text-green-500 flex-shrink-0"}):e.jsx(B,{className:"h-5 w-5 text-red-500 flex-shrink-0"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:`font-medium ${p.valid?"text-green-600":"text-red-600"}`,children:p.valid?"Validation Passed":"Validation Failed"}),p.errors.length>0&&e.jsx("ul",{className:"mt-1 text-sm text-red-500 list-disc list-inside",children:p.errors.map((d,j)=>e.jsx("li",{children:d},j))}),p.warnings.length>0&&e.jsx("ul",{className:"mt-1 text-sm text-amber-500 list-disc list-inside",children:p.warnings.map((d,j)=>e.jsxs("li",{className:"flex items-start gap-1",children:[e.jsx(ne,{className:"h-3 w-3 mt-0.5 flex-shrink-0"}),d]},j))})]})]})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",id:"enable-after-install",checked:g,onChange:d=>C(d.target.checked),className:"rounded border-light-border dark:border-dark-border text-primary focus:ring-primary"}),e.jsx("label",{htmlFor:"enable-after-install",className:"text-sm text-slate-600 dark:text-slate-400",children:"Enable plugin after installation"})]})]}),e.jsxs("div",{className:"p-6 border-t border-light-border dark:border-dark-border flex justify-end gap-3",children:[e.jsx(v,{variant:"secondary",onClick:n,disabled:F,children:"Cancel"}),e.jsxs(v,{variant:"primary",onClick:O,disabled:F||(m==="url"?!u.trim():!x),className:"flex items-center gap-2",children:[F&&e.jsx(U,{className:"h-4 w-4 animate-spin"}),"Install Plugin"]})]})]})}):null},Se=({permission:s,granted:r})=>{const o={network:e.jsx(he,{className:"h-4 w-4"}),filesystem:e.jsx(me,{className:"h-4 w-4"}),environment:e.jsx(Y,{className:"h-4 w-4"}),subprocess:e.jsx(Y,{className:"h-4 w-4"}),scan_results:e.jsx(_,{className:"h-4 w-4"}),vulnerabilities:e.jsx(xe,{className:"h-4 w-4"}),assets:e.jsx(oe,{className:"h-4 w-4"}),reports:e.jsx(_,{className:"h-4 w-4"})},m={network:"Network Access",filesystem:"Filesystem Access",environment:"Environment Variables",subprocess:"Spawn Processes",scan_results:"Scan Results",vulnerabilities:"Vulnerability Data",assets:"Asset Inventory",reports:"Report Generation"};return e.jsxs("div",{className:`flex items-center gap-2 px-3 py-2 rounded-lg border ${r?"bg-green-500/10 border-green-500/30 text-green-600":"bg-slate-500/10 border-slate-500/30 text-slate-400"}`,children:[o[s]||e.jsx(V,{className:"h-4 w-4"}),e.jsx("span",{className:"text-sm",children:m[s]||s}),r&&e.jsx(z,{variant:"success",size:"sm",children:"Granted"})]})},Pe=({plugin:s,isOpen:r,onClose:o,onUpdate:m})=>{const[k,u]=l.useState({}),[w,x]=l.useState(!0),[T,g]=l.useState(!1),[C,F]=l.useState(!1);l.useEffect(()=>{r&&P()},[r,s.id]);const P=async()=>{x(!0);try{const t=await S.getSettings(s.id);u(t.data||{}),F(!1)}catch(t){console.error("Failed to load settings:",t),u({})}finally{x(!1)}},A=async()=>{var t,i;g(!0);try{await S.updateSettings(s.id,k),c.success("Settings saved successfully"),F(!1),m()}catch(n){const b=n;c.error(((i=(t=b.response)==null?void 0:t.data)==null?void 0:i.error)||"Failed to save settings")}finally{g(!1)}},I=async()=>{var t,i;if(window.confirm("Are you sure you want to reset settings to defaults?")){g(!0);try{await S.deleteSettings(s.id),c.success("Settings reset to defaults"),await P(),m()}catch(n){const b=n;c.error(((i=(t=b.response)==null?void 0:t.data)==null?void 0:i.error)||"Failed to reset settings")}finally{g(!1)}}},p=(t,i)=>{u(n=>({...n,[t]:i})),F(!0)},R=t=>Object.entries(t);return r?e.jsx("div",{className:"fixed inset-0 bg-black/60 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-light-surface dark:bg-dark-surface rounded-lg shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto border border-light-border dark:border-dark-border",children:[e.jsx("div",{className:"sticky top-0 p-6 border-b border-light-border dark:border-dark-border bg-light-surface dark:bg-dark-surface z-10",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-xl font-bold text-slate-900 dark:text-white flex items-center gap-2",children:[e.jsx($,{className:"h-5 w-5"}),"Plugin Settings"]}),e.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400 mt-1",children:[s.name," v",s.version]})]}),e.jsx("button",{onClick:o,className:"text-slate-400 hover:text-slate-900 dark:hover:text-white",children:e.jsx(ee,{className:"h-6 w-6"})})]})}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsx(E,{children:e.jsxs("div",{className:"p-4",children:[e.jsxs("h3",{className:"font-semibold text-slate-900 dark:text-white mb-3 flex items-center gap-2",children:[e.jsx(de,{className:"h-4 w-4"}),"Plugin Information"]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-slate-500 dark:text-slate-400",children:"ID:"}),e.jsx("span",{className:"ml-2 text-slate-900 dark:text-white font-mono text-xs",children:s.plugin_id})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-slate-500 dark:text-slate-400",children:"Type:"}),e.jsx(z,{variant:"primary",size:"sm",className:"ml-2",children:s.plugin_type})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-slate-500 dark:text-slate-400",children:"Author:"}),e.jsx("span",{className:"ml-2 text-slate-900 dark:text-white",children:s.author})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-slate-500 dark:text-slate-400",children:"Status:"}),e.jsx(z,{variant:s.status==="enabled"?"success":"secondary",size:"sm",className:"ml-2",children:s.status})]})]}),e.jsx("p",{className:"mt-3 text-sm text-slate-600 dark:text-slate-400",children:s.description})]})}),e.jsx(E,{children:e.jsxs("div",{className:"p-4",children:[e.jsxs("h3",{className:"font-semibold text-slate-900 dark:text-white mb-3 flex items-center gap-2",children:[e.jsx(V,{className:"h-4 w-4"}),"Permissions"]}),e.jsx("div",{className:"grid grid-cols-2 gap-2",children:R(s.permissions).map(([t,i])=>e.jsx(Se,{permission:t,granted:i},t))})]})}),e.jsx(E,{children:e.jsxs("div",{className:"p-4",children:[e.jsxs("h3",{className:"font-semibold text-slate-900 dark:text-white mb-3 flex items-center gap-2",children:[e.jsx($,{className:"h-4 w-4"}),"Configuration"]}),w?e.jsx("div",{className:"flex items-center justify-center py-8",children:e.jsx(U,{className:"h-6 w-6 animate-spin text-primary"})}):Object.keys(k).length===0?e.jsxs("div",{className:"text-center py-8 text-slate-500 dark:text-slate-400",children:[e.jsx($,{className:"h-12 w-12 mx-auto mb-3 opacity-50"}),e.jsx("p",{children:"No configurable settings for this plugin."})]}):e.jsx("div",{className:"space-y-4",children:Object.entries(k).map(([t,i])=>e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:t.replace(/_/g," ").replace(/\b\w/g,n=>n.toUpperCase())}),typeof i=="boolean"?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:i,onChange:n=>p(t,n.target.checked),className:"rounded border-light-border dark:border-dark-border text-primary focus:ring-primary"}),e.jsx("span",{className:"text-sm text-slate-600 dark:text-slate-400",children:i?"Enabled":"Disabled"})]}):typeof i=="number"?e.jsx("input",{type:"number",value:i,onChange:n=>p(t,parseInt(n.target.value,10)),className:"w-full px-3 py-2 rounded-lg border border-light-border dark:border-dark-border bg-light-bg dark:bg-dark-bg text-slate-900 dark:text-white focus:ring-2 focus:ring-primary focus:border-primary"}):e.jsx("input",{type:"text",value:String(i),onChange:n=>p(t,n.target.value),className:"w-full px-3 py-2 rounded-lg border border-light-border dark:border-dark-border bg-light-bg dark:bg-dark-bg text-slate-900 dark:text-white focus:ring-2 focus:ring-primary focus:border-primary"})]},t))})]})})]}),e.jsxs("div",{className:"sticky bottom-0 p-6 border-t border-light-border dark:border-dark-border bg-light-surface dark:bg-dark-surface flex justify-between",children:[e.jsxs(v,{variant:"ghost",onClick:I,disabled:T||w,className:"flex items-center gap-2 text-slate-600 dark:text-slate-400",children:[e.jsx(se,{className:"h-4 w-4"}),"Reset to Defaults"]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx(v,{variant:"secondary",onClick:o,disabled:T,children:"Cancel"}),e.jsxs(v,{variant:"primary",onClick:A,disabled:T||w||!C,className:"flex items-center gap-2",children:[T&&e.jsx(U,{className:"h-4 w-4 animate-spin"}),e.jsx(ce,{className:"h-4 w-4"}),"Save Settings"]})]})]})]})}):null},$e=()=>{const[s,r]=l.useState([]),[o,m]=l.useState(null),[k,u]=l.useState([]),[w,x]=l.useState(!0),[T,g]=l.useState(null),[C,F]=l.useState(""),[P,A]=l.useState(""),[I,p]=l.useState(""),[R,t]=l.useState(!1),[i,n]=l.useState(null),b=l.useCallback(async()=>{x(!0);try{const[a,h,f]=await Promise.all([S.list({search:C||void 0,plugin_type:P||void 0,status:I||void 0}),S.getStats(),S.getTypes()]);r(a.data.plugins),m(h.data),u(f.data)}catch(a){console.error("Failed to load plugins:",a),c.error("Failed to load plugins")}finally{x(!1)}},[C,P,I]);l.useEffect(()=>{b()},[b]);const M=async a=>{var h,f;g(a);try{await S.enable(a),c.success("Plugin enabled"),await b()}catch(D){const L=D;c.error(((f=(h=L.response)==null?void 0:h.data)==null?void 0:f.error)||"Failed to enable plugin")}finally{g(null)}},O=async a=>{var h,f;g(a);try{await S.disable(a),c.success("Plugin disabled"),await b()}catch(D){const L=D;c.error(((f=(h=L.response)==null?void 0:h.data)==null?void 0:f.error)||"Failed to disable plugin")}finally{g(null)}},d=async a=>{var f,D;const h=s.find(L=>L.id===a);if(h&&window.confirm(`Are you sure you want to uninstall "${h.name}"? This action cannot be undone.`)){g(a);try{await S.uninstall(a),c.success("Plugin uninstalled"),await b()}catch(L){const te=L;c.error(((D=(f=te.response)==null?void 0:f.data)==null?void 0:D.error)||"Failed to uninstall plugin")}finally{g(null)}}},j=a=>{const h=s.find(f=>f.id===a);h&&n(h)},y=a=>{switch(a){case"scanner":return e.jsx(q,{className:"h-4 w-4"});case"detector":return e.jsx(V,{className:"h-4 w-4"});case"reporter":return e.jsx(_,{className:"h-4 w-4"});case"integration":return e.jsx(H,{className:"h-4 w-4"});default:return e.jsx(G,{className:"h-4 w-4"})}};return e.jsxs(be,{children:[e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-2xl font-bold text-slate-900 dark:text-white flex items-center gap-3",children:[e.jsx(G,{className:"h-7 w-7 text-primary"}),"Plugin Marketplace"]}),e.jsx("p",{className:"mt-1 text-slate-500 dark:text-slate-400",children:"Manage installed plugins and extend HeroForge functionality"})]}),e.jsxs(v,{variant:"primary",onClick:()=>t(!0),className:"flex items-center gap-2",children:[e.jsx(Z,{className:"h-4 w-4"}),"Install Plugin"]})]}),o&&e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsx(E,{children:e.jsxs("div",{className:"p-4 flex items-center gap-3",children:[e.jsx("div",{className:"p-2 rounded-lg bg-primary/10 text-primary",children:e.jsx(ge,{className:"h-5 w-5"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:o.total}),e.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Total Plugins"})]})]})}),e.jsx(E,{children:e.jsxs("div",{className:"p-4 flex items-center gap-3",children:[e.jsx("div",{className:"p-2 rounded-lg bg-green-500/10 text-green-500",children:e.jsx(J,{className:"h-5 w-5"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:o.enabled}),e.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Enabled"})]})]})}),e.jsx(E,{children:e.jsxs("div",{className:"p-4 flex items-center gap-3",children:[e.jsx("div",{className:"p-2 rounded-lg bg-slate-500/10 text-slate-500",children:e.jsx(K,{className:"h-5 w-5"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:o.disabled}),e.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Disabled"})]})]})}),e.jsx(E,{children:e.jsxs("div",{className:"p-4 flex items-center gap-3",children:[e.jsx("div",{className:"p-2 rounded-lg bg-red-500/10 text-red-500",children:e.jsx(B,{className:"h-5 w-5"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:o.error}),e.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Errors"})]})]})})]}),e.jsx(E,{children:e.jsx("div",{className:"p-4",children:e.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(pe,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-slate-400"}),e.jsx(ae,{type:"text",placeholder:"Search plugins...",value:C,onChange:a=>F(a.target.value),className:"pl-10"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ue,{className:"h-4 w-4 text-slate-400"}),e.jsxs("select",{value:P,onChange:a=>A(a.target.value),className:"px-3 py-2 rounded-lg border border-light-border dark:border-dark-border bg-light-bg dark:bg-dark-bg text-slate-900 dark:text-white focus:ring-2 focus:ring-primary focus:border-primary",children:[e.jsx("option",{value:"",children:"All Types"}),k.map(a=>e.jsx("option",{value:a.id,children:a.name},a.id))]})]}),e.jsx("div",{children:e.jsxs("select",{value:I,onChange:a=>p(a.target.value),className:"px-3 py-2 rounded-lg border border-light-border dark:border-dark-border bg-light-bg dark:bg-dark-bg text-slate-900 dark:text-white focus:ring-2 focus:ring-primary focus:border-primary",children:[e.jsx("option",{value:"",children:"All Status"}),e.jsx("option",{value:"enabled",children:"Enabled"}),e.jsx("option",{value:"disabled",children:"Disabled"}),e.jsx("option",{value:"error",children:"Error"})]})}),e.jsxs(v,{variant:"secondary",onClick:b,disabled:w,className:"flex items-center gap-2",children:[e.jsx(se,{className:`h-4 w-4 ${w?"animate-spin":""}`}),"Refresh"]})]})})}),w?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx(je,{size:"lg"})}):s.length===0?e.jsx(E,{children:e.jsxs("div",{className:"p-12 text-center",children:[e.jsx(G,{className:"h-16 w-16 mx-auto text-slate-400 mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-white mb-2",children:"No Plugins Installed"}),e.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-4",children:C||P||I?"No plugins match your filters.":"Get started by installing your first plugin."}),!C&&!P&&!I&&e.jsxs(v,{variant:"primary",onClick:()=>t(!0),className:"flex items-center gap-2 mx-auto",children:[e.jsx(Z,{className:"h-4 w-4"}),"Install Plugin"]})]})}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:s.map(a=>e.jsx(we,{plugin:a,onEnable:M,onDisable:O,onUninstall:d,onSettings:j,isLoading:T===a.id},a.id))}),k.length>0&&s.length>0&&e.jsx(E,{children:e.jsxs("div",{className:"p-4",children:[e.jsx("h3",{className:"text-sm font-medium text-slate-700 dark:text-slate-300 mb-3",children:"Plugin Types"}),e.jsx("div",{className:"flex flex-wrap gap-4",children:k.map(a=>e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx("div",{className:"p-1.5 rounded bg-primary/10 text-primary",children:y(a.id)}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-slate-900 dark:text-white",children:a.name}),e.jsxs("span",{className:"text-slate-500 dark:text-slate-400 ml-1",children:["- ",a.description]})]})]},a.id))})]})})]}),e.jsx(ye,{isOpen:R,onClose:()=>t(!1),onInstalled:b}),i&&e.jsx(Pe,{plugin:i,isOpen:!!i,onClose:()=>n(null),onUpdate:b})]})};export{$e as default};
