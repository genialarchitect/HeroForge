import{j as e}from"./vendor-state-oFDmcCcB.js";import{u as re,r as i,R as le}from"./vendor-react-5KxtEOLM.js";import{A as ae,aQ as ne,$ as F,h as ce,m as A,B as u,ac as P,bu as oe,F as de,O as ie,C as xe,aN as T,b1 as ue,g as me,X as he,D as ge}from"./vendor-ui-7EurIAWU.js";import{a as E,c as b}from"./academyApi-CeTYPipX.js";import"./vendor-utils-DfRopTPV.js";const fe=()=>{const a=re(),[r,p]=i.useState("paths"),[v,x]=i.useState(!0),[n,t]=i.useState(null),[o,d]=i.useState([]),[l,m]=i.useState([]),[w,C]=i.useState([]),[I,G]=i.useState([]),[h,O]=i.useState(null),[g,S]=i.useState(null),[j,_]=i.useState(null),[M,N]=i.useState(null),[f,y]=i.useState(!1),B=[{label:"Learning Paths",tab:"paths"},...h?[{label:h.title,id:h.id,tab:"modules"}]:[],...g?[{label:g.title,id:g.id,tab:"lessons"}]:[],...j?[{label:j.title,id:j.id,tab:"questions"}]:[]];i.useEffect(()=>{k()},[]);const k=async()=>{try{x(!0);const s=await E.listPaths();d(s),t(null)}catch(s){t("Failed to load learning paths"),console.error(s)}finally{x(!1)}},q=async s=>{try{x(!0);const c=await E.getPath(s);m(c.modules||[]),t(null)}catch(c){t("Failed to load modules"),console.error(c)}finally{x(!1)}},L=async s=>{try{x(!0);const c=await E.listModuleLessons(s);C(c),t(null)}catch(c){t("Failed to load lessons"),console.error(c)}finally{x(!1)}},Q=async s=>{try{x(!0);const c=await b.listQuestions(s);G(c),t(null)}catch(c){t("Failed to load questions"),console.error(c)}finally{x(!1)}},V=s=>{O(s),S(null),_(null),p("modules"),q(s.slug)},H=s=>{S(s),_(null),p("lessons"),L(s.id)},J=s=>{_(s),p("questions"),Q(s.id)},X=s=>{p(s.tab),s.tab==="paths"?(O(null),S(null),_(null)):s.tab==="modules"?(S(null),_(null)):s.tab==="lessons"&&_(null),y(!1),N(null)},K=async s=>{if(confirm("Are you sure you want to delete this learning path? This will also delete all modules, lessons, and questions within it."))try{await b.deletePath(s),u.success("Learning path deleted"),k()}catch{u.error("Failed to delete learning path")}},U=async s=>{if(confirm("Are you sure you want to delete this module? This will also delete all lessons and questions within it."))try{await b.deleteModule(s),u.success("Module deleted"),h&&q(h.slug)}catch{u.error("Failed to delete module")}},W=async s=>{if(confirm("Are you sure you want to delete this lesson? This will also delete all questions within it."))try{await b.deleteLesson(s),u.success("Lesson deleted"),g&&L(g.id)}catch{u.error("Failed to delete lesson")}},Y=async s=>{if(confirm("Are you sure you want to delete this question?"))try{await b.deleteQuestion(s),u.success("Question deleted"),j&&Q(j.id)}catch{u.error("Failed to delete question")}},Z=()=>{if(v)return e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"w-8 h-8 border-4 border-cyan-500 border-t-transparent rounded-full animate-spin"})});if(n)return e.jsxs("div",{className:"flex items-center justify-center h-64 text-red-400",children:[e.jsx(ce,{className:"w-6 h-6 mr-2"}),n]});switch(r){case"paths":return D();case"modules":return ee();case"lessons":return se();case"questions":return te();default:return null}},D=()=>e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h2",{className:"text-xl font-semibold text-white",children:"Learning Paths"}),e.jsxs("button",{onClick:()=>y(!0),className:"flex items-center px-4 py-2 bg-cyan-600 hover:bg-cyan-700 text-white rounded-lg transition-colors",children:[e.jsx(A,{className:"w-4 h-4 mr-2"}),"Add Path"]})]}),f&&e.jsx(z,{onSave:async s=>{await b.createPath(s),u.success("Learning path created"),y(!1),k()},onCancel:()=>y(!1)}),e.jsxs("div",{className:"grid gap-4",children:[o.map(s=>e.jsx("div",{className:"bg-gray-800 rounded-lg border border-gray-700 p-4 hover:border-gray-600 transition-colors",children:M===s.id?e.jsx(z,{initialData:s,onSave:async c=>{await b.updatePath(s.id,c),u.success("Learning path updated"),N(null),k()},onCancel:()=>N(null)}):e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"flex-1 cursor-pointer",onClick:()=>V(s),children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg flex items-center justify-center text-xl",style:{backgroundColor:s.color||"#4b5563"},children:s.icon||"ðŸ“š"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-white font-medium",children:s.title}),e.jsxs("p",{className:"text-sm text-gray-400",children:[s.level," â€¢ ",s.module_count," modules â€¢ ",s.lesson_count," lessons"]})]})]})}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>N(s.id),className:"p-2 text-gray-400 hover:text-white transition-colors",children:e.jsx(T,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>K(s.id),className:"p-2 text-gray-400 hover:text-red-400 transition-colors",children:e.jsx(P,{className:"w-4 h-4"})}),e.jsx(F,{className:"w-5 h-5 text-gray-500"})]})]})},s.id)),o.length===0&&!f&&e.jsx("div",{className:"text-center py-12 text-gray-400",children:"No learning paths yet. Create your first one!"})]})]}),ee=()=>e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("h2",{className:"text-xl font-semibold text-white",children:['Modules in "',h==null?void 0:h.title,'"']}),e.jsxs("button",{onClick:()=>y(!0),className:"flex items-center px-4 py-2 bg-cyan-600 hover:bg-cyan-700 text-white rounded-lg transition-colors",children:[e.jsx(A,{className:"w-4 h-4 mr-2"}),"Add Module"]})]}),f&&h&&e.jsx(R,{pathId:h.id,onSave:async s=>{await b.createModule(s),u.success("Module created"),y(!1),q(h.slug)},onCancel:()=>y(!1)}),e.jsxs("div",{className:"grid gap-4",children:[l.map(s=>e.jsx("div",{className:"bg-gray-800 rounded-lg border border-gray-700 p-4 hover:border-gray-600 transition-colors",children:M===s.id?e.jsx(R,{pathId:h.id,initialData:s,onSave:async c=>{await b.updateModule(s.id,c),u.success("Module updated"),N(null),q(h.slug)},onCancel:()=>N(null)}):e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"flex-1 cursor-pointer",onClick:()=>H(s),children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(ue,{className:"w-6 h-6 text-cyan-400"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-white font-medium",children:s.title}),e.jsxs("p",{className:"text-sm text-gray-400",children:[s.duration_minutes," min â€¢ ",s.lesson_count," lessons",s.is_assessment&&" â€¢ Assessment"]})]})]})}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>N(s.id),className:"p-2 text-gray-400 hover:text-white transition-colors",children:e.jsx(T,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>U(s.id),className:"p-2 text-gray-400 hover:text-red-400 transition-colors",children:e.jsx(P,{className:"w-4 h-4"})}),e.jsx(F,{className:"w-5 h-5 text-gray-500"})]})]})},s.id)),l.length===0&&!f&&e.jsx("div",{className:"text-center py-12 text-gray-400",children:"No modules yet. Create your first one!"})]})]}),se=()=>e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("h2",{className:"text-xl font-semibold text-white",children:['Lessons in "',g==null?void 0:g.title,'"']}),e.jsxs("button",{onClick:()=>y(!0),className:"flex items-center px-4 py-2 bg-cyan-600 hover:bg-cyan-700 text-white rounded-lg transition-colors",children:[e.jsx(A,{className:"w-4 h-4 mr-2"}),"Add Lesson"]})]}),f&&g&&e.jsx($,{moduleId:g.id,onSave:async s=>{await b.createLesson(s),u.success("Lesson created"),y(!1),L(g.id)},onCancel:()=>y(!1)}),e.jsxs("div",{className:"grid gap-4",children:[w.map(s=>e.jsx("div",{className:"bg-gray-800 rounded-lg border border-gray-700 p-4 hover:border-gray-600 transition-colors",children:M===s.id?e.jsx($,{moduleId:g.id,initialData:s,onSave:async c=>{await b.updateLesson(s.id,c),u.success("Lesson updated"),N(null),L(g.id)},onCancel:()=>N(null)}):e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"flex-1 cursor-pointer",onClick:()=>J(s),children:e.jsxs("div",{className:"flex items-center space-x-3",children:[s.lesson_type==="video"&&e.jsx(oe,{className:"w-6 h-6 text-blue-400"}),s.lesson_type==="text"&&e.jsx(de,{className:"w-6 h-6 text-green-400"}),s.lesson_type==="interactive"&&e.jsx(ie,{className:"w-6 h-6 text-purple-400"}),s.lesson_type==="quiz"&&e.jsx(xe,{className:"w-6 h-6 text-yellow-400"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-white font-medium",children:s.title}),e.jsxs("p",{className:"text-sm text-gray-400",children:[s.lesson_type," â€¢ ",s.duration_minutes," min",s.is_preview&&" â€¢ Preview"]})]})]})}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>N(s.id),className:"p-2 text-gray-400 hover:text-white transition-colors",children:e.jsx(T,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>W(s.id),className:"p-2 text-gray-400 hover:text-red-400 transition-colors",children:e.jsx(P,{className:"w-4 h-4"})}),s.lesson_type==="quiz"&&e.jsx(F,{className:"w-5 h-5 text-gray-500"})]})]})},s.id)),w.length===0&&!f&&e.jsx("div",{className:"text-center py-12 text-gray-400",children:"No lessons yet. Create your first one!"})]})]}),te=()=>e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("h2",{className:"text-xl font-semibold text-white",children:['Questions in "',j==null?void 0:j.title,'"']}),e.jsxs("button",{onClick:()=>y(!0),className:"flex items-center px-4 py-2 bg-cyan-600 hover:bg-cyan-700 text-white rounded-lg transition-colors",children:[e.jsx(A,{className:"w-4 h-4 mr-2"}),"Add Question"]})]}),f&&j&&e.jsx(ye,{lessonId:j.id,displayOrder:I.length+1,onSave:async s=>{await b.createQuestion(s),u.success("Question created"),y(!1),Q(j.id)},onCancel:()=>y(!1)}),e.jsxs("div",{className:"grid gap-4",children:[I.map((s,c)=>e.jsx("div",{className:"bg-gray-800 rounded-lg border border-gray-700 p-4",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsxs("span",{className:"text-gray-500 text-sm",children:["#",c+1]}),e.jsx("span",{className:"px-2 py-0.5 bg-gray-700 rounded text-xs text-gray-300",children:s.question_type}),e.jsxs("span",{className:"text-gray-500 text-sm",children:[s.points," pts"]})]}),e.jsx("p",{className:"text-white",children:s.question_text}),s.explanation&&e.jsxs("p",{className:"text-sm text-gray-400 mt-1",children:["Explanation: ",s.explanation]})]}),e.jsx("div",{className:"flex items-center space-x-2 ml-4",children:e.jsx("button",{onClick:()=>Y(s.id),className:"p-2 text-gray-400 hover:text-red-400 transition-colors",children:e.jsx(P,{className:"w-4 h-4"})})})]})},s.id)),I.length===0&&!f&&e.jsx("div",{className:"text-center py-12 text-gray-400",children:"No questions yet. Create your first one!"})]})]});return e.jsx("div",{className:"min-h-screen bg-gray-900 p-6",children:e.jsxs("div",{className:"max-w-6xl mx-auto",children:[e.jsx("div",{className:"flex items-center justify-between mb-6",children:e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("button",{onClick:()=>a("/admin"),className:"p-2 text-gray-400 hover:text-white transition-colors",children:e.jsx(ae,{className:"w-5 h-5"})}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ne,{className:"w-8 h-8 text-cyan-400"}),e.jsx("h1",{className:"text-2xl font-bold text-white",children:"Academy Admin"})]})]})}),e.jsx("nav",{className:"flex items-center space-x-2 mb-6 text-sm",children:B.map((s,c)=>e.jsxs(le.Fragment,{children:[c>0&&e.jsx(F,{className:"w-4 h-4 text-gray-500"}),e.jsx("button",{onClick:()=>X(s),className:`hover:text-cyan-400 transition-colors ${c===B.length-1?"text-white font-medium":"text-gray-400"}`,children:s.label})]},c))}),Z()]})})},z=({initialData:a,onSave:r,onCancel:p})=>{const[v,x]=i.useState(!1),[n,t]=i.useState({slug:(a==null?void 0:a.slug)||"",title:(a==null?void 0:a.title)||"",description:(a==null?void 0:a.description)||"",level:(a==null?void 0:a.level)||"Beginner",duration_hours:(a==null?void 0:a.duration_hours)||1,price_cents:(a==null?void 0:a.price_cents)||0,icon:(a==null?void 0:a.icon)||"",color:(a==null?void 0:a.color)||"#4b5563",certificate_name:(a==null?void 0:a.certificate_name)||""}),o=async d=>{d.preventDefault(),x(!0);try{await r(n)}catch{u.error("Failed to save")}finally{x(!1)}};return e.jsxs("form",{onSubmit:o,className:"bg-gray-800 rounded-lg border border-gray-600 p-4 space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Slug"}),e.jsx("input",{type:"text",value:n.slug,onChange:d=>t({...n,slug:d.target.value}),className:"w-full bg-gray-700 border border-gray-600 rounded px-3 py-2 text-white",placeholder:"beginner-path",required:!0,disabled:!!a})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Title"}),e.jsx("input",{type:"text",value:n.title,onChange:d=>t({...n,title:d.target.value}),className:"w-full bg-gray-700 border border-gray-600 rounded px-3 py-2 text-white",placeholder:"Security Fundamentals",required:!0})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Description"}),e.jsx("textarea",{value:n.description,onChange:d=>t({...n,description:d.target.value}),className:"w-full bg-gray-700 border border-gray-600 rounded px-3 py-2 text-white",rows:2,placeholder:"Learn the fundamentals of cybersecurity..."})]}),e.jsxs("div",{className:"grid grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Level"}),e.jsxs("select",{value:n.level,onChange:d=>t({...n,level:d.target.value}),className:"w-full bg-gray-700 border border-gray-600 rounded px-3 py-2 text-white",children:[e.jsx("option",{value:"Beginner",children:"Beginner"}),e.jsx("option",{value:"Professional",children:"Professional"}),e.jsx("option",{value:"Expert",children:"Expert"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Duration (hours)"}),e.jsx("input",{type:"number",value:n.duration_hours,onChange:d=>t({...n,duration_hours:parseInt(d.target.value)||0}),className:"w-full bg-gray-700 border border-gray-600 rounded px-3 py-2 text-white",min:1})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Icon (emoji)"}),e.jsx("input",{type:"text",value:n.icon,onChange:d=>t({...n,icon:d.target.value}),className:"w-full bg-gray-700 border border-gray-600 rounded px-3 py-2 text-white",placeholder:"ðŸ”’"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Color"}),e.jsx("input",{type:"color",value:n.color,onChange:d=>t({...n,color:d.target.value}),className:"w-full h-10 bg-gray-700 border border-gray-600 rounded cursor-pointer"})]})]}),e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsxs("button",{type:"button",onClick:p,className:"px-4 py-2 bg-gray-700 hover:bg-gray-600 text-white rounded transition-colors",children:[e.jsx(he,{className:"w-4 h-4 inline mr-1"}),"Cancel"]}),e.jsxs("button",{type:"submit",disabled:v,className:"px-4 py-2 bg-cyan-600 hover:bg-cyan-700 text-white rounded transition-colors disabled:opacity-50",children:[e.jsx(ge,{className:"w-4 h-4 inline mr-1"}),v?"Saving...":"Save"]})]})]})},R=({pathId:a,initialData:r,onSave:p,onCancel:v})=>{const[x,n]=i.useState(!1),[t,o]=i.useState({learning_path_id:a,slug:(r==null?void 0:r.slug)||"",title:(r==null?void 0:r.title)||"",description:(r==null?void 0:r.description)||"",duration_minutes:(r==null?void 0:r.duration_minutes)||30,display_order:(r==null?void 0:r.display_order)||1,is_assessment:(r==null?void 0:r.is_assessment)||!1}),d=async l=>{l.preventDefault(),n(!0);try{await p(t)}catch{u.error("Failed to save")}finally{n(!1)}};return e.jsxs("form",{onSubmit:d,className:"bg-gray-800 rounded-lg border border-gray-600 p-4 space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Slug"}),e.jsx("input",{type:"text",value:t.slug,onChange:l=>o({...t,slug:l.target.value}),className:"w-full bg-gray-700 border border-gray-600 rounded px-3 py-2 text-white",placeholder:"intro-module",required:!0,disabled:!!r})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Title"}),e.jsx("input",{type:"text",value:t.title,onChange:l=>o({...t,title:l.target.value}),className:"w-full bg-gray-700 border border-gray-600 rounded px-3 py-2 text-white",placeholder:"Introduction to Security",required:!0})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Description"}),e.jsx("textarea",{value:t.description,onChange:l=>o({...t,description:l.target.value}),className:"w-full bg-gray-700 border border-gray-600 rounded px-3 py-2 text-white",rows:2})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Duration (minutes)"}),e.jsx("input",{type:"number",value:t.duration_minutes,onChange:l=>o({...t,duration_minutes:parseInt(l.target.value)||0}),className:"w-full bg-gray-700 border border-gray-600 rounded px-3 py-2 text-white",min:1})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Display Order"}),e.jsx("input",{type:"number",value:t.display_order,onChange:l=>o({...t,display_order:parseInt(l.target.value)||1}),className:"w-full bg-gray-700 border border-gray-600 rounded px-3 py-2 text-white",min:1})]}),e.jsx("div",{className:"flex items-end pb-2",children:e.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:t.is_assessment,onChange:l=>o({...t,is_assessment:l.target.checked}),className:"w-4 h-4 rounded border-gray-600 bg-gray-700 text-cyan-600"}),e.jsx("span",{className:"text-gray-300",children:"Is Assessment"})]})})]}),e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsx("button",{type:"button",onClick:v,className:"px-4 py-2 bg-gray-700 hover:bg-gray-600 text-white rounded transition-colors",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:x,className:"px-4 py-2 bg-cyan-600 hover:bg-cyan-700 text-white rounded transition-colors disabled:opacity-50",children:x?"Saving...":"Save"})]})]})},$=({moduleId:a,initialData:r,onSave:p,onCancel:v})=>{const[x,n]=i.useState(!1),[t,o]=i.useState({module_id:a,slug:(r==null?void 0:r.slug)||"",title:(r==null?void 0:r.title)||"",description:(r==null?void 0:r.description)||"",lesson_type:(r==null?void 0:r.lesson_type)||"text",content_json:"{}",duration_minutes:(r==null?void 0:r.duration_minutes)||10,display_order:(r==null?void 0:r.display_order)||1,is_preview:(r==null?void 0:r.is_preview)||!1}),d=async l=>{l.preventDefault(),n(!0);try{await p(t)}catch{u.error("Failed to save")}finally{n(!1)}};return e.jsxs("form",{onSubmit:d,className:"bg-gray-800 rounded-lg border border-gray-600 p-4 space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Slug"}),e.jsx("input",{type:"text",value:t.slug,onChange:l=>o({...t,slug:l.target.value}),className:"w-full bg-gray-700 border border-gray-600 rounded px-3 py-2 text-white",placeholder:"intro-lesson",required:!0,disabled:!!r})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Title"}),e.jsx("input",{type:"text",value:t.title,onChange:l=>o({...t,title:l.target.value}),className:"w-full bg-gray-700 border border-gray-600 rounded px-3 py-2 text-white",placeholder:"Getting Started",required:!0})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Description"}),e.jsx("textarea",{value:t.description,onChange:l=>o({...t,description:l.target.value}),className:"w-full bg-gray-700 border border-gray-600 rounded px-3 py-2 text-white",rows:2})]}),e.jsxs("div",{className:"grid grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Type"}),e.jsxs("select",{value:t.lesson_type,onChange:l=>o({...t,lesson_type:l.target.value}),className:"w-full bg-gray-700 border border-gray-600 rounded px-3 py-2 text-white",children:[e.jsx("option",{value:"text",children:"Text"}),e.jsx("option",{value:"video",children:"Video"}),e.jsx("option",{value:"interactive",children:"Interactive"}),e.jsx("option",{value:"quiz",children:"Quiz"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Duration (minutes)"}),e.jsx("input",{type:"number",value:t.duration_minutes,onChange:l=>o({...t,duration_minutes:parseInt(l.target.value)||0}),className:"w-full bg-gray-700 border border-gray-600 rounded px-3 py-2 text-white",min:1})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Display Order"}),e.jsx("input",{type:"number",value:t.display_order,onChange:l=>o({...t,display_order:parseInt(l.target.value)||1}),className:"w-full bg-gray-700 border border-gray-600 rounded px-3 py-2 text-white",min:1})]}),e.jsx("div",{className:"flex items-end pb-2",children:e.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:t.is_preview,onChange:l=>o({...t,is_preview:l.target.checked}),className:"w-4 h-4 rounded border-gray-600 bg-gray-700 text-cyan-600"}),e.jsx("span",{className:"text-gray-300",children:"Preview"})]})})]}),e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsx("button",{type:"button",onClick:v,className:"px-4 py-2 bg-gray-700 hover:bg-gray-600 text-white rounded transition-colors",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:x,className:"px-4 py-2 bg-cyan-600 hover:bg-cyan-700 text-white rounded transition-colors disabled:opacity-50",children:x?"Saving...":"Save"})]})]})},ye=({lessonId:a,displayOrder:r,onSave:p,onCancel:v})=>{const[x,n]=i.useState(!1),[t,o]=i.useState({lesson_id:a,question_type:"multiple_choice",question_text:"",options:["","","",""],correct_answer:0,points:1,explanation:"",display_order:r}),d=async l=>{l.preventDefault(),n(!0);try{const m={lesson_id:t.lesson_id,question_type:t.question_type,question_text:t.question_text,question_data_json:JSON.stringify({options:t.options.filter(w=>w.trim()!==""),correct_answer:t.correct_answer}),points:t.points,explanation:t.explanation||void 0,display_order:t.display_order};await p(m)}catch{u.error("Failed to save")}finally{n(!1)}};return e.jsxs("form",{onSubmit:d,className:"bg-gray-800 rounded-lg border border-gray-600 p-4 space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Question Type"}),e.jsxs("select",{value:t.question_type,onChange:l=>o({...t,question_type:l.target.value}),className:"w-full bg-gray-700 border border-gray-600 rounded px-3 py-2 text-white",children:[e.jsx("option",{value:"multiple_choice",children:"Multiple Choice"}),e.jsx("option",{value:"multiple_select",children:"Multiple Select"}),e.jsx("option",{value:"true_false",children:"True/False"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Points"}),e.jsx("input",{type:"number",value:t.points,onChange:l=>o({...t,points:parseInt(l.target.value)||1}),className:"w-full bg-gray-700 border border-gray-600 rounded px-3 py-2 text-white",min:1})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Correct Answer (0-indexed)"}),e.jsx("input",{type:"number",value:t.correct_answer,onChange:l=>o({...t,correct_answer:parseInt(l.target.value)||0}),className:"w-full bg-gray-700 border border-gray-600 rounded px-3 py-2 text-white",min:0,max:3})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Question Text"}),e.jsx("textarea",{value:t.question_text,onChange:l=>o({...t,question_text:l.target.value}),className:"w-full bg-gray-700 border border-gray-600 rounded px-3 py-2 text-white",rows:2,required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Options"}),e.jsx("div",{className:"space-y-2",children:t.options.map((l,m)=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:`w-6 h-6 rounded-full flex items-center justify-center text-xs ${m===t.correct_answer?"bg-green-600 text-white":"bg-gray-700 text-gray-400"}`,children:m===t.correct_answer?e.jsx(me,{className:"w-4 h-4"}):m+1}),e.jsx("input",{type:"text",value:l,onChange:w=>{const C=[...t.options];C[m]=w.target.value,o({...t,options:C})},className:"flex-1 bg-gray-700 border border-gray-600 rounded px-3 py-2 text-white",placeholder:`Option ${m+1}`})]},m))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Explanation (shown after answer)"}),e.jsx("textarea",{value:t.explanation,onChange:l=>o({...t,explanation:l.target.value}),className:"w-full bg-gray-700 border border-gray-600 rounded px-3 py-2 text-white",rows:2})]}),e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsx("button",{type:"button",onClick:v,className:"px-4 py-2 bg-gray-700 hover:bg-gray-600 text-white rounded transition-colors",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:x,className:"px-4 py-2 bg-cyan-600 hover:bg-cyan-700 text-white rounded transition-colors disabled:opacity-50",children:x?"Saving...":"Save"})]})]})};export{fe as default};
