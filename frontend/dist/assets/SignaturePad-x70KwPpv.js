import{j as D}from"./vendor-state-oFDmcCcB.js";import{r}from"./vendor-react-5KxtEOLM.js";const j=r.forwardRef(({width:a=500,height:o=200,penColor:f="#000000",penWidth:d=2,backgroundColor:v="#ffffff",onChange:c,className:k=""},T)=>{const u=r.useRef(null),[x,E]=r.useState(!1),[p,w]=r.useState(!0),l=r.useRef(null);r.useEffect(()=>{const t=u.current;if(!t)return;const e=t.getContext("2d");if(!e)return;const s=window.devicePixelRatio||1;t.width=a*s,t.height=o*s,t.style.width=`${a}px`,t.style.height=`${o}px`,e.scale(s,s),e.fillStyle=v,e.fillRect(0,0,a,o)},[a,o,v]);const m=r.useCallback(t=>{const e=u.current;if(!e)return{x:0,y:0};const s=e.getBoundingClientRect();let n,y;if("touches"in t){const M=t.touches[0]||t.changedTouches[0];n=M.clientX,y=M.clientY}else n=t.clientX,y=t.clientY;return{x:n-s.left,y:y-s.top}},[]),R=r.useCallback((t,e)=>{const s=u.current;if(!s)return;const n=s.getContext("2d");n&&(n.beginPath(),n.moveTo(t.x,t.y),n.lineTo(e.x,e.y),n.strokeStyle=f,n.lineWidth=d,n.lineCap="round",n.lineJoin="round",n.stroke())},[f,d]),S=r.useCallback(t=>{t.preventDefault(),E(!0);const e=m(t);l.current=e;const s=u.current;if(!s)return;const n=s.getContext("2d");n&&(n.beginPath(),n.arc(e.x,e.y,d/2,0,Math.PI*2),n.fillStyle=f,n.fill(),p&&(w(!1),c==null||c(!1)))},[m,p,c,f,d]),b=r.useCallback(t=>{if(!x)return;t.preventDefault();const e=m(t);l.current&&R(l.current,e),l.current=e},[x,m,R]),i=r.useCallback(()=>{E(!1),l.current=null},[]);r.useEffect(()=>{const t=()=>{x&&i()};return window.addEventListener("mouseup",t),window.addEventListener("touchend",t),()=>{window.removeEventListener("mouseup",t),window.removeEventListener("touchend",t)}},[x,i]);const P=r.useCallback(()=>{const t=u.current;if(!t)return;const e=t.getContext("2d");if(!e)return;const s=window.devicePixelRatio||1;e.fillStyle=v,e.fillRect(0,0,a*s,o*s),w(!0),c==null||c(!0)},[v,a,o,c]),L=r.useCallback((t="image/png")=>{const e=u.current;return e?e.toDataURL(t):""},[]);return r.useImperativeHandle(T,()=>({clear:P,isEmpty:()=>p,toDataURL:L}),[P,p,L]),D.jsx("div",{className:`signature-pad-container ${k}`,children:D.jsx("canvas",{ref:u,className:"border border-gray-300 rounded cursor-crosshair touch-none",style:{width:a,height:o},onMouseDown:S,onMouseMove:b,onMouseUp:i,onMouseLeave:i,onTouchStart:S,onTouchMove:b,onTouchEnd:i})})});j.displayName="SignaturePad";export{j as S};
