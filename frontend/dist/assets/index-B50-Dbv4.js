const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/AdminPage-C4FRDIbH.js","assets/vendor-state-DrZ0R9WI.js","assets/vendor-react-HUtzaQ-y.js","assets/vendor-ui-MCXOk1Y_.js","assets/vendor-charts-DGjHbZ-f.js","assets/SettingsPage-Bpwvjm0n.js","assets/ScanComparison-CQ0tNr79.js","assets/SalesPage-B5oOcwp0.js","assets/AssetsPage-BJGrFDcK.js","assets/WebAppScanPage-C2wg7vto.js","assets/DnsToolsPage-Cn-3A8cy.js","assets/CompliancePage-BTRdxETv.js","assets/RemediationPage-CVX1NzSC.js","assets/ManualAssessmentPage-IjxM3r_y.js","assets/AssessmentDetailPage-Djxr2jrg.js","assets/MethodologyPage-CH73fQ5X.js","assets/ExecutiveDashboardPage-CXs5QycK.js","assets/ApiSecurityPage-7wm3N-y0.js","assets/AttackPathsPage-BypfCxCS.js","assets/ScanComparisonPage-CwLzPMUt.js","assets/CrmDashboard-DaHvQQiS.js","assets/CustomerList-D9ErLJGx.js","assets/CustomerDetail-tpOGN55P.js","assets/EngagementsPage-9Bdwprbo.js","assets/ContractsPage-BNr-Mu8L.js","assets/TimeTrackingPage-LV2of-Kw.js","assets/PortalLogin-DcZS-c7o.js","assets/PortalForgotPassword-B1Yj4gEj.js","assets/PortalResetPassword-eU35e2wA.js","assets/PortalDashboard-BPp4clKJ.js","assets/PortalLayout-BuZONkm7.js","assets/PortalEngagementList-CLT1WPv-.js","assets/PortalEngagementDetail-LgEu8enV.js","assets/PortalVulnerabilityList-DGEFuct5.js","assets/PortalVulnerabilityDetail-DbXbB1vU.js","assets/PortalReportList-BC03nhx9.js","assets/PortalProfile-CqTdyJD3.js"])))=>i.map(i=>d[i]);
var ed=Object.defineProperty;var td=(e,r,n)=>r in e?ed(e,r,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[r]=n;var Ct=(e,r,n)=>td(e,typeof r!="symbol"?r+"":r,n);import{c as jl,j as a,u as rd}from"./vendor-state-DrZ0R9WI.js";import{b as Cs,g as Nl,r as R,u as Ua,d as nd,L as Ke,e as sd,R as Sl,a as ut,f as ad,B as id,h as od,i as pe,N as xn}from"./vendor-react-HUtzaQ-y.js";import{B as Q,L as Ps,C as kl,S as ke,K as us,U as Cl,a as yn,b as hr,d as Pl,M as El,e as Ol,f as Rl,g as Tl,G as ld,h as jt,i as or,N as ds,Z as Zn,j as cd,k as qa,l as ud,m as Wa,n as Al,o as dd,p as hd,q as Dl,T as bn,X as Lt,P as _r,r as fd,F as md,s as Ml,t as pd,R as gd,W as Es,u as Os,v as $l,E as xd,w as yd,x as Rr,y as zl,z as Rs,A as bd,D as Ba,H as Ee,I as bt,J as Ts,O as ma,Q as As,V as Ft,Y as Ze,_ as Ll,$ as vd,a0 as pa,a1 as Va,a2 as wd,a3 as _d,a4 as Fl,a5 as Nr,a6 as jd,a7 as Yt,a8 as Nd,a9 as Ds,aa as Qn,ab as Qe,ac as Sd,ad as kd,ae as Cd,af as Pd,ag as vi,ah as Ed,ai as Od,aj as Rd,ak as hn,al as Td,am as Ad,an as Dd,ao as wi,ap as _i,aq as Md,ar as $d,as as zd,at as ji,au as Ni,av as Ld,aw as Fd}from"./vendor-ui-MCXOk1Y_.js";import{i as Id,a as Si,b as Hd,c as ki,d as Ud,e as qd,f as Wd,o as Bd,s as Vd,m as Ci,g as Pi,P as $,R as sr,h as Gd,j as Yd,C as Il,T as ar,L as Hl,B as Ul,k as yr,X as br,Y as vr,l as ql,n as ga,p as xa,A as Xd,q as Mn,r as Kt}from"./vendor-charts-DGjHbZ-f.js";(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))s(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&s(l)}).observe(document,{childList:!0,subtree:!0});function n(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function s(i){if(i.ep)return;i.ep=!0;const o=n(i);fetch(i.href,o)}})();var $n={},Ei;function Kd(){if(Ei)return $n;Ei=1;var e=Cs();return $n.createRoot=e.createRoot,$n.hydrateRoot=e.hydrateRoot,$n}var Jd=Kd();const Zd=Nl(Jd),Qd="modulepreload",eh=function(e){return"/"+e},Oi={},be=function(r,n,s){let i=Promise.resolve();if(n&&n.length>0){let l=function(d){return Promise.all(d.map(f=>Promise.resolve(f).then(h=>({status:"fulfilled",value:h}),h=>({status:"rejected",reason:h}))))};document.getElementsByTagName("link");const c=document.querySelector("meta[property=csp-nonce]"),u=(c==null?void 0:c.nonce)||(c==null?void 0:c.getAttribute("nonce"));i=l(n.map(d=>{if(d=eh(d),d in Oi)return;Oi[d]=!0;const f=d.endsWith(".css"),h=f?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${d}"]${h}`))return;const x=document.createElement("link");if(x.rel=f?"stylesheet":Qd,f||(x.as="script"),x.crossOrigin="",x.href=d,u&&x.setAttribute("nonce",u),document.head.appendChild(x),f)return new Promise((w,v)=>{x.addEventListener("load",w),x.addEventListener("error",()=>v(new Error(`Unable to preload CSS for ${d}`)))})}))}function o(l){const c=new Event("vite:preloadError",{cancelable:!0});if(c.payload=l,window.dispatchEvent(c),!c.defaultPrevented)throw l}return i.then(l=>{for(const c of l||[])c.status==="rejected"&&o(c.reason);return r().catch(o)})},th={};function rh(e,r){let n;try{n=e()}catch{return}return{getItem:i=>{var o;const l=u=>u===null?null:JSON.parse(u,void 0),c=(o=n.getItem(i))!=null?o:null;return c instanceof Promise?c.then(l):l(c)},setItem:(i,o)=>n.setItem(i,JSON.stringify(o,void 0)),removeItem:i=>n.removeItem(i)}}const vn=e=>r=>{try{const n=e(r);return n instanceof Promise?n:{then(s){return vn(s)(n)},catch(s){return this}}}catch(n){return{then(s){return this},catch(s){return vn(s)(n)}}}},nh=(e,r)=>(n,s,i)=>{let o={getStorage:()=>localStorage,serialize:JSON.stringify,deserialize:JSON.parse,partialize:b=>b,version:0,merge:(b,p)=>({...p,...b}),...r},l=!1;const c=new Set,u=new Set;let d;try{d=o.getStorage()}catch{}if(!d)return e((...b)=>{console.warn(`[zustand persist middleware] Unable to update item '${o.name}', the given storage is currently unavailable.`),n(...b)},s,i);const f=vn(o.serialize),h=()=>{const b=o.partialize({...s()});let p;const m=f({state:b,version:o.version}).then(_=>d.setItem(o.name,_)).catch(_=>{p=_});if(p)throw p;return m},x=i.setState;i.setState=(b,p)=>{x(b,p),h()};const w=e((...b)=>{n(...b),h()},s,i);let v;const j=()=>{var b;if(!d)return;l=!1,c.forEach(m=>m(s()));const p=((b=o.onRehydrateStorage)==null?void 0:b.call(o,s()))||void 0;return vn(d.getItem.bind(d))(o.name).then(m=>{if(m)return o.deserialize(m)}).then(m=>{if(m)if(typeof m.version=="number"&&m.version!==o.version){if(o.migrate)return o.migrate(m.state,m.version);console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return m.state}).then(m=>{var _;return v=o.merge(m,(_=s())!=null?_:w),n(v,!0),h()}).then(()=>{p==null||p(v,void 0),l=!0,u.forEach(m=>m(v))}).catch(m=>{p==null||p(void 0,m)})};return i.persist={setOptions:b=>{o={...o,...b},b.getStorage&&(d=b.getStorage())},clearStorage:()=>{d==null||d.removeItem(o.name)},getOptions:()=>o,rehydrate:()=>j(),hasHydrated:()=>l,onHydrate:b=>(c.add(b),()=>{c.delete(b)}),onFinishHydration:b=>(u.add(b),()=>{u.delete(b)})},j(),v||w},sh=(e,r)=>(n,s,i)=>{let o={storage:rh(()=>localStorage),partialize:j=>j,version:0,merge:(j,b)=>({...b,...j}),...r},l=!1;const c=new Set,u=new Set;let d=o.storage;if(!d)return e((...j)=>{console.warn(`[zustand persist middleware] Unable to update item '${o.name}', the given storage is currently unavailable.`),n(...j)},s,i);const f=()=>{const j=o.partialize({...s()});return d.setItem(o.name,{state:j,version:o.version})},h=i.setState;i.setState=(j,b)=>{h(j,b),f()};const x=e((...j)=>{n(...j),f()},s,i);i.getInitialState=()=>x;let w;const v=()=>{var j,b;if(!d)return;l=!1,c.forEach(m=>{var _;return m((_=s())!=null?_:x)});const p=((b=o.onRehydrateStorage)==null?void 0:b.call(o,(j=s())!=null?j:x))||void 0;return vn(d.getItem.bind(d))(o.name).then(m=>{if(m)if(typeof m.version=="number"&&m.version!==o.version){if(o.migrate)return[!0,o.migrate(m.state,m.version)];console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,m.state];return[!1,void 0]}).then(m=>{var _;const[g,y]=m;if(w=o.merge(y,(_=s())!=null?_:x),n(w,!0),g)return f()}).then(()=>{p==null||p(w,void 0),w=s(),l=!0,u.forEach(m=>m(w))}).catch(m=>{p==null||p(void 0,m)})};return i.persist={setOptions:j=>{o={...o,...j},j.storage&&(d=j.storage)},clearStorage:()=>{d==null||d.removeItem(o.name)},getOptions:()=>o,rehydrate:()=>v(),hasHydrated:()=>l,onHydrate:j=>(c.add(j),()=>{c.delete(j)}),onFinishHydration:j=>(u.add(j),()=>{u.delete(j)})},o.skipHydration||v(),w||x},ah=(e,r)=>"getStorage"in r||"serialize"in r||"deserialize"in r?((th?"production":void 0)!=="production"&&console.warn("[DEPRECATED] `getStorage`, `serialize` and `deserialize` options are deprecated. Use `storage` option instead."),nh(e,r)):sh(e,r),ih=ah,Sr=jl()(ih((e,r)=>({user:null,token:null,isAuthenticated:!1,isLoading:!1,setUser:n=>e({user:n,isAuthenticated:!!n}),setToken:n=>{e({token:n}),n?localStorage.setItem("token",n):localStorage.removeItem("token")},login:(n,s)=>{e({user:n,token:s,isAuthenticated:!0,isLoading:!1}),localStorage.setItem("token",s)},logout:()=>{e({user:null,token:null,isAuthenticated:!1,isLoading:!1}),localStorage.removeItem("token")},setLoading:n=>e({isLoading:n}),isAdmin:()=>{var n,s;return((s=(n=r().user)==null?void 0:n.roles)==null?void 0:s.includes("admin"))??!1},hasRole:n=>{var s,i;return((i=(s=r().user)==null?void 0:s.roles)==null?void 0:i.includes(n))??!1},canManageUsers:()=>{var n,s;return((s=(n=r().user)==null?void 0:n.roles)==null?void 0:s.includes("admin"))??!1},canManageScans:()=>{var n,s;return((s=(n=r().user)==null?void 0:n.roles)==null?void 0:s.some(i=>["admin","auditor"].includes(i)))??!1},canViewAuditLogs:()=>{var n,s;return((s=(n=r().user)==null?void 0:n.roles)==null?void 0:s.some(i=>["admin","auditor"].includes(i)))??!1},canManageSettings:()=>{var n,s;return((s=(n=r().user)==null?void 0:n.roles)==null?void 0:s.includes("admin"))??!1}}),{name:"auth-storage",partialize:e=>({token:e.token,user:e.user})}));function Wl(e,r){return function(){return e.apply(r,arguments)}}const{toString:oh}=Object.prototype,{getPrototypeOf:Ga}=Object,{iterator:Ms,toStringTag:Bl}=Symbol,$s=(e=>r=>{const n=oh.call(r);return e[n]||(e[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),dt=e=>(e=e.toLowerCase(),r=>$s(r)===e),zs=e=>r=>typeof r===e,{isArray:Tr}=Array,kr=zs("undefined");function kn(e){return e!==null&&!kr(e)&&e.constructor!==null&&!kr(e.constructor)&&Ge(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const Vl=dt("ArrayBuffer");function lh(e){let r;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?r=ArrayBuffer.isView(e):r=e&&e.buffer&&Vl(e.buffer),r}const ch=zs("string"),Ge=zs("function"),Gl=zs("number"),Cn=e=>e!==null&&typeof e=="object",uh=e=>e===!0||e===!1,es=e=>{if($s(e)!=="object")return!1;const r=Ga(e);return(r===null||r===Object.prototype||Object.getPrototypeOf(r)===null)&&!(Bl in e)&&!(Ms in e)},dh=e=>{if(!Cn(e)||kn(e))return!1;try{return Object.keys(e).length===0&&Object.getPrototypeOf(e)===Object.prototype}catch{return!1}},hh=dt("Date"),fh=dt("File"),mh=dt("Blob"),ph=dt("FileList"),gh=e=>Cn(e)&&Ge(e.pipe),xh=e=>{let r;return e&&(typeof FormData=="function"&&e instanceof FormData||Ge(e.append)&&((r=$s(e))==="formdata"||r==="object"&&Ge(e.toString)&&e.toString()==="[object FormData]"))},yh=dt("URLSearchParams"),[bh,vh,wh,_h]=["ReadableStream","Request","Response","Headers"].map(dt),jh=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Pn(e,r,{allOwnKeys:n=!1}={}){if(e===null||typeof e>"u")return;let s,i;if(typeof e!="object"&&(e=[e]),Tr(e))for(s=0,i=e.length;s<i;s++)r.call(null,e[s],s,e);else{if(kn(e))return;const o=n?Object.getOwnPropertyNames(e):Object.keys(e),l=o.length;let c;for(s=0;s<l;s++)c=o[s],r.call(null,e[c],c,e)}}function Yl(e,r){if(kn(e))return null;r=r.toLowerCase();const n=Object.keys(e);let s=n.length,i;for(;s-- >0;)if(i=n[s],r===i.toLowerCase())return i;return null}const ir=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,Xl=e=>!kr(e)&&e!==ir;function ya(){const{caseless:e,skipUndefined:r}=Xl(this)&&this||{},n={},s=(i,o)=>{const l=e&&Yl(n,o)||o;es(n[l])&&es(i)?n[l]=ya(n[l],i):es(i)?n[l]=ya({},i):Tr(i)?n[l]=i.slice():(!r||!kr(i))&&(n[l]=i)};for(let i=0,o=arguments.length;i<o;i++)arguments[i]&&Pn(arguments[i],s);return n}const Nh=(e,r,n,{allOwnKeys:s}={})=>(Pn(r,(i,o)=>{n&&Ge(i)?e[o]=Wl(i,n):e[o]=i},{allOwnKeys:s}),e),Sh=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),kh=(e,r,n,s)=>{e.prototype=Object.create(r.prototype,s),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:r.prototype}),n&&Object.assign(e.prototype,n)},Ch=(e,r,n,s)=>{let i,o,l;const c={};if(r=r||{},e==null)return r;do{for(i=Object.getOwnPropertyNames(e),o=i.length;o-- >0;)l=i[o],(!s||s(l,e,r))&&!c[l]&&(r[l]=e[l],c[l]=!0);e=n!==!1&&Ga(e)}while(e&&(!n||n(e,r))&&e!==Object.prototype);return r},Ph=(e,r,n)=>{e=String(e),(n===void 0||n>e.length)&&(n=e.length),n-=r.length;const s=e.indexOf(r,n);return s!==-1&&s===n},Eh=e=>{if(!e)return null;if(Tr(e))return e;let r=e.length;if(!Gl(r))return null;const n=new Array(r);for(;r-- >0;)n[r]=e[r];return n},Oh=(e=>r=>e&&r instanceof e)(typeof Uint8Array<"u"&&Ga(Uint8Array)),Rh=(e,r)=>{const s=(e&&e[Ms]).call(e);let i;for(;(i=s.next())&&!i.done;){const o=i.value;r.call(e,o[0],o[1])}},Th=(e,r)=>{let n;const s=[];for(;(n=e.exec(r))!==null;)s.push(n);return s},Ah=dt("HTMLFormElement"),Dh=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,s,i){return s.toUpperCase()+i}),Ri=(({hasOwnProperty:e})=>(r,n)=>e.call(r,n))(Object.prototype),Mh=dt("RegExp"),Kl=(e,r)=>{const n=Object.getOwnPropertyDescriptors(e),s={};Pn(n,(i,o)=>{let l;(l=r(i,o,e))!==!1&&(s[o]=l||i)}),Object.defineProperties(e,s)},$h=e=>{Kl(e,(r,n)=>{if(Ge(e)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const s=e[n];if(Ge(s)){if(r.enumerable=!1,"writable"in r){r.writable=!1;return}r.set||(r.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},zh=(e,r)=>{const n={},s=i=>{i.forEach(o=>{n[o]=!0})};return Tr(e)?s(e):s(String(e).split(r)),n},Lh=()=>{},Fh=(e,r)=>e!=null&&Number.isFinite(e=+e)?e:r;function Ih(e){return!!(e&&Ge(e.append)&&e[Bl]==="FormData"&&e[Ms])}const Hh=e=>{const r=new Array(10),n=(s,i)=>{if(Cn(s)){if(r.indexOf(s)>=0)return;if(kn(s))return s;if(!("toJSON"in s)){r[i]=s;const o=Tr(s)?[]:{};return Pn(s,(l,c)=>{const u=n(l,i+1);!kr(u)&&(o[c]=u)}),r[i]=void 0,o}}return s};return n(e,0)},Uh=dt("AsyncFunction"),qh=e=>e&&(Cn(e)||Ge(e))&&Ge(e.then)&&Ge(e.catch),Jl=((e,r)=>e?setImmediate:r?((n,s)=>(ir.addEventListener("message",({source:i,data:o})=>{i===ir&&o===n&&s.length&&s.shift()()},!1),i=>{s.push(i),ir.postMessage(n,"*")}))(`axios@${Math.random()}`,[]):n=>setTimeout(n))(typeof setImmediate=="function",Ge(ir.postMessage)),Wh=typeof queueMicrotask<"u"?queueMicrotask.bind(ir):typeof process<"u"&&process.nextTick||Jl,Bh=e=>e!=null&&Ge(e[Ms]),q={isArray:Tr,isArrayBuffer:Vl,isBuffer:kn,isFormData:xh,isArrayBufferView:lh,isString:ch,isNumber:Gl,isBoolean:uh,isObject:Cn,isPlainObject:es,isEmptyObject:dh,isReadableStream:bh,isRequest:vh,isResponse:wh,isHeaders:_h,isUndefined:kr,isDate:hh,isFile:fh,isBlob:mh,isRegExp:Mh,isFunction:Ge,isStream:gh,isURLSearchParams:yh,isTypedArray:Oh,isFileList:ph,forEach:Pn,merge:ya,extend:Nh,trim:jh,stripBOM:Sh,inherits:kh,toFlatObject:Ch,kindOf:$s,kindOfTest:dt,endsWith:Ph,toArray:Eh,forEachEntry:Rh,matchAll:Th,isHTMLForm:Ah,hasOwnProperty:Ri,hasOwnProp:Ri,reduceDescriptors:Kl,freezeMethods:$h,toObjectSet:zh,toCamelCase:Dh,noop:Lh,toFiniteNumber:Fh,findKey:Yl,global:ir,isContextDefined:Xl,isSpecCompliantForm:Ih,toJSONObject:Hh,isAsyncFn:Uh,isThenable:qh,setImmediate:Jl,asap:Wh,isIterable:Bh};function ue(e,r,n,s,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",r&&(this.code=r),n&&(this.config=n),s&&(this.request=s),i&&(this.response=i,this.status=i.status?i.status:null)}q.inherits(ue,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:q.toJSONObject(this.config),code:this.code,status:this.status}}});const Zl=ue.prototype,Ql={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{Ql[e]={value:e}});Object.defineProperties(ue,Ql);Object.defineProperty(Zl,"isAxiosError",{value:!0});ue.from=(e,r,n,s,i,o)=>{const l=Object.create(Zl);q.toFlatObject(e,l,function(f){return f!==Error.prototype},d=>d!=="isAxiosError");const c=e&&e.message?e.message:"Error",u=r==null&&e?e.code:r;return ue.call(l,c,u,n,s,i),e&&l.cause==null&&Object.defineProperty(l,"cause",{value:e,configurable:!0}),l.name=e&&e.name||"Error",o&&Object.assign(l,o),l};const Vh=null;function ba(e){return q.isPlainObject(e)||q.isArray(e)}function ec(e){return q.endsWith(e,"[]")?e.slice(0,-2):e}function Ti(e,r,n){return e?e.concat(r).map(function(i,o){return i=ec(i),!n&&o?"["+i+"]":i}).join(n?".":""):r}function Gh(e){return q.isArray(e)&&!e.some(ba)}const Yh=q.toFlatObject(q,{},null,function(r){return/^is[A-Z]/.test(r)});function Ls(e,r,n){if(!q.isObject(e))throw new TypeError("target must be an object");r=r||new FormData,n=q.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(j,b){return!q.isUndefined(b[j])});const s=n.metaTokens,i=n.visitor||f,o=n.dots,l=n.indexes,u=(n.Blob||typeof Blob<"u"&&Blob)&&q.isSpecCompliantForm(r);if(!q.isFunction(i))throw new TypeError("visitor must be a function");function d(v){if(v===null)return"";if(q.isDate(v))return v.toISOString();if(q.isBoolean(v))return v.toString();if(!u&&q.isBlob(v))throw new ue("Blob is not supported. Use a Buffer instead.");return q.isArrayBuffer(v)||q.isTypedArray(v)?u&&typeof Blob=="function"?new Blob([v]):Buffer.from(v):v}function f(v,j,b){let p=v;if(v&&!b&&typeof v=="object"){if(q.endsWith(j,"{}"))j=s?j:j.slice(0,-2),v=JSON.stringify(v);else if(q.isArray(v)&&Gh(v)||(q.isFileList(v)||q.endsWith(j,"[]"))&&(p=q.toArray(v)))return j=ec(j),p.forEach(function(_,g){!(q.isUndefined(_)||_===null)&&r.append(l===!0?Ti([j],g,o):l===null?j:j+"[]",d(_))}),!1}return ba(v)?!0:(r.append(Ti(b,j,o),d(v)),!1)}const h=[],x=Object.assign(Yh,{defaultVisitor:f,convertValue:d,isVisitable:ba});function w(v,j){if(!q.isUndefined(v)){if(h.indexOf(v)!==-1)throw Error("Circular reference detected in "+j.join("."));h.push(v),q.forEach(v,function(p,m){(!(q.isUndefined(p)||p===null)&&i.call(r,p,q.isString(m)?m.trim():m,j,x))===!0&&w(p,j?j.concat(m):[m])}),h.pop()}}if(!q.isObject(e))throw new TypeError("data must be an object");return w(e),r}function Ai(e){const r={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(s){return r[s]})}function Ya(e,r){this._pairs=[],e&&Ls(e,this,r)}const tc=Ya.prototype;tc.append=function(r,n){this._pairs.push([r,n])};tc.toString=function(r){const n=r?function(s){return r.call(this,s,Ai)}:Ai;return this._pairs.map(function(i){return n(i[0])+"="+n(i[1])},"").join("&")};function Xh(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function rc(e,r,n){if(!r)return e;const s=n&&n.encode||Xh;q.isFunction(n)&&(n={serialize:n});const i=n&&n.serialize;let o;if(i?o=i(r,n):o=q.isURLSearchParams(r)?r.toString():new Ya(r,n).toString(s),o){const l=e.indexOf("#");l!==-1&&(e=e.slice(0,l)),e+=(e.indexOf("?")===-1?"?":"&")+o}return e}class Di{constructor(){this.handlers=[]}use(r,n,s){return this.handlers.push({fulfilled:r,rejected:n,synchronous:s?s.synchronous:!1,runWhen:s?s.runWhen:null}),this.handlers.length-1}eject(r){this.handlers[r]&&(this.handlers[r]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(r){q.forEach(this.handlers,function(s){s!==null&&r(s)})}}const nc={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Kh=typeof URLSearchParams<"u"?URLSearchParams:Ya,Jh=typeof FormData<"u"?FormData:null,Zh=typeof Blob<"u"?Blob:null,Qh={isBrowser:!0,classes:{URLSearchParams:Kh,FormData:Jh,Blob:Zh},protocols:["http","https","file","blob","url","data"]},Xa=typeof window<"u"&&typeof document<"u",va=typeof navigator=="object"&&navigator||void 0,ef=Xa&&(!va||["ReactNative","NativeScript","NS"].indexOf(va.product)<0),tf=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",rf=Xa&&window.location.href||"http://localhost",nf=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Xa,hasStandardBrowserEnv:ef,hasStandardBrowserWebWorkerEnv:tf,navigator:va,origin:rf},Symbol.toStringTag,{value:"Module"})),He={...nf,...Qh};function sf(e,r){return Ls(e,new He.classes.URLSearchParams,{visitor:function(n,s,i,o){return He.isNode&&q.isBuffer(n)?(this.append(s,n.toString("base64")),!1):o.defaultVisitor.apply(this,arguments)},...r})}function af(e){return q.matchAll(/\w+|\[(\w*)]/g,e).map(r=>r[0]==="[]"?"":r[1]||r[0])}function of(e){const r={},n=Object.keys(e);let s;const i=n.length;let o;for(s=0;s<i;s++)o=n[s],r[o]=e[o];return r}function sc(e){function r(n,s,i,o){let l=n[o++];if(l==="__proto__")return!0;const c=Number.isFinite(+l),u=o>=n.length;return l=!l&&q.isArray(i)?i.length:l,u?(q.hasOwnProp(i,l)?i[l]=[i[l],s]:i[l]=s,!c):((!i[l]||!q.isObject(i[l]))&&(i[l]=[]),r(n,s,i[l],o)&&q.isArray(i[l])&&(i[l]=of(i[l])),!c)}if(q.isFormData(e)&&q.isFunction(e.entries)){const n={};return q.forEachEntry(e,(s,i)=>{r(af(s),i,n,0)}),n}return null}function lf(e,r,n){if(q.isString(e))try{return(r||JSON.parse)(e),q.trim(e)}catch(s){if(s.name!=="SyntaxError")throw s}return(n||JSON.stringify)(e)}const En={transitional:nc,adapter:["xhr","http","fetch"],transformRequest:[function(r,n){const s=n.getContentType()||"",i=s.indexOf("application/json")>-1,o=q.isObject(r);if(o&&q.isHTMLForm(r)&&(r=new FormData(r)),q.isFormData(r))return i?JSON.stringify(sc(r)):r;if(q.isArrayBuffer(r)||q.isBuffer(r)||q.isStream(r)||q.isFile(r)||q.isBlob(r)||q.isReadableStream(r))return r;if(q.isArrayBufferView(r))return r.buffer;if(q.isURLSearchParams(r))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),r.toString();let c;if(o){if(s.indexOf("application/x-www-form-urlencoded")>-1)return sf(r,this.formSerializer).toString();if((c=q.isFileList(r))||s.indexOf("multipart/form-data")>-1){const u=this.env&&this.env.FormData;return Ls(c?{"files[]":r}:r,u&&new u,this.formSerializer)}}return o||i?(n.setContentType("application/json",!1),lf(r)):r}],transformResponse:[function(r){const n=this.transitional||En.transitional,s=n&&n.forcedJSONParsing,i=this.responseType==="json";if(q.isResponse(r)||q.isReadableStream(r))return r;if(r&&q.isString(r)&&(s&&!this.responseType||i)){const l=!(n&&n.silentJSONParsing)&&i;try{return JSON.parse(r,this.parseReviver)}catch(c){if(l)throw c.name==="SyntaxError"?ue.from(c,ue.ERR_BAD_RESPONSE,this,null,this.response):c}}return r}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:He.classes.FormData,Blob:He.classes.Blob},validateStatus:function(r){return r>=200&&r<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};q.forEach(["delete","get","head","post","put","patch"],e=>{En.headers[e]={}});const cf=q.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),uf=e=>{const r={};let n,s,i;return e&&e.split(`
`).forEach(function(l){i=l.indexOf(":"),n=l.substring(0,i).trim().toLowerCase(),s=l.substring(i+1).trim(),!(!n||r[n]&&cf[n])&&(n==="set-cookie"?r[n]?r[n].push(s):r[n]=[s]:r[n]=r[n]?r[n]+", "+s:s)}),r},Mi=Symbol("internals");function zr(e){return e&&String(e).trim().toLowerCase()}function ts(e){return e===!1||e==null?e:q.isArray(e)?e.map(ts):String(e)}function df(e){const r=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let s;for(;s=n.exec(e);)r[s[1]]=s[2];return r}const hf=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function Js(e,r,n,s,i){if(q.isFunction(s))return s.call(this,r,n);if(i&&(r=n),!!q.isString(r)){if(q.isString(s))return r.indexOf(s)!==-1;if(q.isRegExp(s))return s.test(r)}}function ff(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(r,n,s)=>n.toUpperCase()+s)}function mf(e,r){const n=q.toCamelCase(" "+r);["get","set","has"].forEach(s=>{Object.defineProperty(e,s+n,{value:function(i,o,l){return this[s].call(this,r,i,o,l)},configurable:!0})})}let Ye=class{constructor(r){r&&this.set(r)}set(r,n,s){const i=this;function o(c,u,d){const f=zr(u);if(!f)throw new Error("header name must be a non-empty string");const h=q.findKey(i,f);(!h||i[h]===void 0||d===!0||d===void 0&&i[h]!==!1)&&(i[h||u]=ts(c))}const l=(c,u)=>q.forEach(c,(d,f)=>o(d,f,u));if(q.isPlainObject(r)||r instanceof this.constructor)l(r,n);else if(q.isString(r)&&(r=r.trim())&&!hf(r))l(uf(r),n);else if(q.isObject(r)&&q.isIterable(r)){let c={},u,d;for(const f of r){if(!q.isArray(f))throw TypeError("Object iterator must return a key-value pair");c[d=f[0]]=(u=c[d])?q.isArray(u)?[...u,f[1]]:[u,f[1]]:f[1]}l(c,n)}else r!=null&&o(n,r,s);return this}get(r,n){if(r=zr(r),r){const s=q.findKey(this,r);if(s){const i=this[s];if(!n)return i;if(n===!0)return df(i);if(q.isFunction(n))return n.call(this,i,s);if(q.isRegExp(n))return n.exec(i);throw new TypeError("parser must be boolean|regexp|function")}}}has(r,n){if(r=zr(r),r){const s=q.findKey(this,r);return!!(s&&this[s]!==void 0&&(!n||Js(this,this[s],s,n)))}return!1}delete(r,n){const s=this;let i=!1;function o(l){if(l=zr(l),l){const c=q.findKey(s,l);c&&(!n||Js(s,s[c],c,n))&&(delete s[c],i=!0)}}return q.isArray(r)?r.forEach(o):o(r),i}clear(r){const n=Object.keys(this);let s=n.length,i=!1;for(;s--;){const o=n[s];(!r||Js(this,this[o],o,r,!0))&&(delete this[o],i=!0)}return i}normalize(r){const n=this,s={};return q.forEach(this,(i,o)=>{const l=q.findKey(s,o);if(l){n[l]=ts(i),delete n[o];return}const c=r?ff(o):String(o).trim();c!==o&&delete n[o],n[c]=ts(i),s[c]=!0}),this}concat(...r){return this.constructor.concat(this,...r)}toJSON(r){const n=Object.create(null);return q.forEach(this,(s,i)=>{s!=null&&s!==!1&&(n[i]=r&&q.isArray(s)?s.join(", "):s)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([r,n])=>r+": "+n).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(r){return r instanceof this?r:new this(r)}static concat(r,...n){const s=new this(r);return n.forEach(i=>s.set(i)),s}static accessor(r){const s=(this[Mi]=this[Mi]={accessors:{}}).accessors,i=this.prototype;function o(l){const c=zr(l);s[c]||(mf(i,l),s[c]=!0)}return q.isArray(r)?r.forEach(o):o(r),this}};Ye.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);q.reduceDescriptors(Ye.prototype,({value:e},r)=>{let n=r[0].toUpperCase()+r.slice(1);return{get:()=>e,set(s){this[n]=s}}});q.freezeMethods(Ye);function Zs(e,r){const n=this||En,s=r||n,i=Ye.from(s.headers);let o=s.data;return q.forEach(e,function(c){o=c.call(n,o,i.normalize(),r?r.status:void 0)}),i.normalize(),o}function ac(e){return!!(e&&e.__CANCEL__)}function Ar(e,r,n){ue.call(this,e??"canceled",ue.ERR_CANCELED,r,n),this.name="CanceledError"}q.inherits(Ar,ue,{__CANCEL__:!0});function ic(e,r,n){const s=n.config.validateStatus;!n.status||!s||s(n.status)?e(n):r(new ue("Request failed with status code "+n.status,[ue.ERR_BAD_REQUEST,ue.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}function pf(e){const r=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return r&&r[1]||""}function gf(e,r){e=e||10;const n=new Array(e),s=new Array(e);let i=0,o=0,l;return r=r!==void 0?r:1e3,function(u){const d=Date.now(),f=s[o];l||(l=d),n[i]=u,s[i]=d;let h=o,x=0;for(;h!==i;)x+=n[h++],h=h%e;if(i=(i+1)%e,i===o&&(o=(o+1)%e),d-l<r)return;const w=f&&d-f;return w?Math.round(x*1e3/w):void 0}}function xf(e,r){let n=0,s=1e3/r,i,o;const l=(d,f=Date.now())=>{n=f,i=null,o&&(clearTimeout(o),o=null),e(...d)};return[(...d)=>{const f=Date.now(),h=f-n;h>=s?l(d,f):(i=d,o||(o=setTimeout(()=>{o=null,l(i)},s-h)))},()=>i&&l(i)]}const hs=(e,r,n=3)=>{let s=0;const i=gf(50,250);return xf(o=>{const l=o.loaded,c=o.lengthComputable?o.total:void 0,u=l-s,d=i(u),f=l<=c;s=l;const h={loaded:l,total:c,progress:c?l/c:void 0,bytes:u,rate:d||void 0,estimated:d&&c&&f?(c-l)/d:void 0,event:o,lengthComputable:c!=null,[r?"download":"upload"]:!0};e(h)},n)},$i=(e,r)=>{const n=e!=null;return[s=>r[0]({lengthComputable:n,total:e,loaded:s}),r[1]]},zi=e=>(...r)=>q.asap(()=>e(...r)),yf=He.hasStandardBrowserEnv?((e,r)=>n=>(n=new URL(n,He.origin),e.protocol===n.protocol&&e.host===n.host&&(r||e.port===n.port)))(new URL(He.origin),He.navigator&&/(msie|trident)/i.test(He.navigator.userAgent)):()=>!0,bf=He.hasStandardBrowserEnv?{write(e,r,n,s,i,o,l){if(typeof document>"u")return;const c=[`${e}=${encodeURIComponent(r)}`];q.isNumber(n)&&c.push(`expires=${new Date(n).toUTCString()}`),q.isString(s)&&c.push(`path=${s}`),q.isString(i)&&c.push(`domain=${i}`),o===!0&&c.push("secure"),q.isString(l)&&c.push(`SameSite=${l}`),document.cookie=c.join("; ")},read(e){if(typeof document>"u")return null;const r=document.cookie.match(new RegExp("(?:^|; )"+e+"=([^;]*)"));return r?decodeURIComponent(r[1]):null},remove(e){this.write(e,"",Date.now()-864e5,"/")}}:{write(){},read(){return null},remove(){}};function vf(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function wf(e,r){return r?e.replace(/\/?\/$/,"")+"/"+r.replace(/^\/+/,""):e}function oc(e,r,n){let s=!vf(r);return e&&(s||n==!1)?wf(e,r):r}const Li=e=>e instanceof Ye?{...e}:e;function ur(e,r){r=r||{};const n={};function s(d,f,h,x){return q.isPlainObject(d)&&q.isPlainObject(f)?q.merge.call({caseless:x},d,f):q.isPlainObject(f)?q.merge({},f):q.isArray(f)?f.slice():f}function i(d,f,h,x){if(q.isUndefined(f)){if(!q.isUndefined(d))return s(void 0,d,h,x)}else return s(d,f,h,x)}function o(d,f){if(!q.isUndefined(f))return s(void 0,f)}function l(d,f){if(q.isUndefined(f)){if(!q.isUndefined(d))return s(void 0,d)}else return s(void 0,f)}function c(d,f,h){if(h in r)return s(d,f);if(h in e)return s(void 0,d)}const u={url:o,method:o,data:o,baseURL:l,transformRequest:l,transformResponse:l,paramsSerializer:l,timeout:l,timeoutMessage:l,withCredentials:l,withXSRFToken:l,adapter:l,responseType:l,xsrfCookieName:l,xsrfHeaderName:l,onUploadProgress:l,onDownloadProgress:l,decompress:l,maxContentLength:l,maxBodyLength:l,beforeRedirect:l,transport:l,httpAgent:l,httpsAgent:l,cancelToken:l,socketPath:l,responseEncoding:l,validateStatus:c,headers:(d,f,h)=>i(Li(d),Li(f),h,!0)};return q.forEach(Object.keys({...e,...r}),function(f){const h=u[f]||i,x=h(e[f],r[f],f);q.isUndefined(x)&&h!==c||(n[f]=x)}),n}const lc=e=>{const r=ur({},e);let{data:n,withXSRFToken:s,xsrfHeaderName:i,xsrfCookieName:o,headers:l,auth:c}=r;if(r.headers=l=Ye.from(l),r.url=rc(oc(r.baseURL,r.url,r.allowAbsoluteUrls),e.params,e.paramsSerializer),c&&l.set("Authorization","Basic "+btoa((c.username||"")+":"+(c.password?unescape(encodeURIComponent(c.password)):""))),q.isFormData(n)){if(He.hasStandardBrowserEnv||He.hasStandardBrowserWebWorkerEnv)l.setContentType(void 0);else if(q.isFunction(n.getHeaders)){const u=n.getHeaders(),d=["content-type","content-length"];Object.entries(u).forEach(([f,h])=>{d.includes(f.toLowerCase())&&l.set(f,h)})}}if(He.hasStandardBrowserEnv&&(s&&q.isFunction(s)&&(s=s(r)),s||s!==!1&&yf(r.url))){const u=i&&o&&bf.read(o);u&&l.set(i,u)}return r},_f=typeof XMLHttpRequest<"u",jf=_f&&function(e){return new Promise(function(n,s){const i=lc(e);let o=i.data;const l=Ye.from(i.headers).normalize();let{responseType:c,onUploadProgress:u,onDownloadProgress:d}=i,f,h,x,w,v;function j(){w&&w(),v&&v(),i.cancelToken&&i.cancelToken.unsubscribe(f),i.signal&&i.signal.removeEventListener("abort",f)}let b=new XMLHttpRequest;b.open(i.method.toUpperCase(),i.url,!0),b.timeout=i.timeout;function p(){if(!b)return;const _=Ye.from("getAllResponseHeaders"in b&&b.getAllResponseHeaders()),y={data:!c||c==="text"||c==="json"?b.responseText:b.response,status:b.status,statusText:b.statusText,headers:_,config:e,request:b};ic(function(N){n(N),j()},function(N){s(N),j()},y),b=null}"onloadend"in b?b.onloadend=p:b.onreadystatechange=function(){!b||b.readyState!==4||b.status===0&&!(b.responseURL&&b.responseURL.indexOf("file:")===0)||setTimeout(p)},b.onabort=function(){b&&(s(new ue("Request aborted",ue.ECONNABORTED,e,b)),b=null)},b.onerror=function(g){const y=g&&g.message?g.message:"Network Error",S=new ue(y,ue.ERR_NETWORK,e,b);S.event=g||null,s(S),b=null},b.ontimeout=function(){let g=i.timeout?"timeout of "+i.timeout+"ms exceeded":"timeout exceeded";const y=i.transitional||nc;i.timeoutErrorMessage&&(g=i.timeoutErrorMessage),s(new ue(g,y.clarifyTimeoutError?ue.ETIMEDOUT:ue.ECONNABORTED,e,b)),b=null},o===void 0&&l.setContentType(null),"setRequestHeader"in b&&q.forEach(l.toJSON(),function(g,y){b.setRequestHeader(y,g)}),q.isUndefined(i.withCredentials)||(b.withCredentials=!!i.withCredentials),c&&c!=="json"&&(b.responseType=i.responseType),d&&([x,v]=hs(d,!0),b.addEventListener("progress",x)),u&&b.upload&&([h,w]=hs(u),b.upload.addEventListener("progress",h),b.upload.addEventListener("loadend",w)),(i.cancelToken||i.signal)&&(f=_=>{b&&(s(!_||_.type?new Ar(null,e,b):_),b.abort(),b=null)},i.cancelToken&&i.cancelToken.subscribe(f),i.signal&&(i.signal.aborted?f():i.signal.addEventListener("abort",f)));const m=pf(i.url);if(m&&He.protocols.indexOf(m)===-1){s(new ue("Unsupported protocol "+m+":",ue.ERR_BAD_REQUEST,e));return}b.send(o||null)})},Nf=(e,r)=>{const{length:n}=e=e?e.filter(Boolean):[];if(r||n){let s=new AbortController,i;const o=function(d){if(!i){i=!0,c();const f=d instanceof Error?d:this.reason;s.abort(f instanceof ue?f:new Ar(f instanceof Error?f.message:f))}};let l=r&&setTimeout(()=>{l=null,o(new ue(`timeout ${r} of ms exceeded`,ue.ETIMEDOUT))},r);const c=()=>{e&&(l&&clearTimeout(l),l=null,e.forEach(d=>{d.unsubscribe?d.unsubscribe(o):d.removeEventListener("abort",o)}),e=null)};e.forEach(d=>d.addEventListener("abort",o));const{signal:u}=s;return u.unsubscribe=()=>q.asap(c),u}},Sf=function*(e,r){let n=e.byteLength;if(n<r){yield e;return}let s=0,i;for(;s<n;)i=s+r,yield e.slice(s,i),s=i},kf=async function*(e,r){for await(const n of Cf(e))yield*Sf(n,r)},Cf=async function*(e){if(e[Symbol.asyncIterator]){yield*e;return}const r=e.getReader();try{for(;;){const{done:n,value:s}=await r.read();if(n)break;yield s}}finally{await r.cancel()}},Fi=(e,r,n,s)=>{const i=kf(e,r);let o=0,l,c=u=>{l||(l=!0,s&&s(u))};return new ReadableStream({async pull(u){try{const{done:d,value:f}=await i.next();if(d){c(),u.close();return}let h=f.byteLength;if(n){let x=o+=h;n(x)}u.enqueue(new Uint8Array(f))}catch(d){throw c(d),d}},cancel(u){return c(u),i.return()}},{highWaterMark:2})},Ii=64*1024,{isFunction:zn}=q,Pf=(({Request:e,Response:r})=>({Request:e,Response:r}))(q.global),{ReadableStream:Hi,TextEncoder:Ui}=q.global,qi=(e,...r)=>{try{return!!e(...r)}catch{return!1}},Ef=e=>{e=q.merge.call({skipUndefined:!0},Pf,e);const{fetch:r,Request:n,Response:s}=e,i=r?zn(r):typeof fetch=="function",o=zn(n),l=zn(s);if(!i)return!1;const c=i&&zn(Hi),u=i&&(typeof Ui=="function"?(v=>j=>v.encode(j))(new Ui):async v=>new Uint8Array(await new n(v).arrayBuffer())),d=o&&c&&qi(()=>{let v=!1;const j=new n(He.origin,{body:new Hi,method:"POST",get duplex(){return v=!0,"half"}}).headers.has("Content-Type");return v&&!j}),f=l&&c&&qi(()=>q.isReadableStream(new s("").body)),h={stream:f&&(v=>v.body)};i&&["text","arrayBuffer","blob","formData","stream"].forEach(v=>{!h[v]&&(h[v]=(j,b)=>{let p=j&&j[v];if(p)return p.call(j);throw new ue(`Response type '${v}' is not supported`,ue.ERR_NOT_SUPPORT,b)})});const x=async v=>{if(v==null)return 0;if(q.isBlob(v))return v.size;if(q.isSpecCompliantForm(v))return(await new n(He.origin,{method:"POST",body:v}).arrayBuffer()).byteLength;if(q.isArrayBufferView(v)||q.isArrayBuffer(v))return v.byteLength;if(q.isURLSearchParams(v)&&(v=v+""),q.isString(v))return(await u(v)).byteLength},w=async(v,j)=>{const b=q.toFiniteNumber(v.getContentLength());return b??x(j)};return async v=>{let{url:j,method:b,data:p,signal:m,cancelToken:_,timeout:g,onDownloadProgress:y,onUploadProgress:S,responseType:N,headers:k,withCredentials:C="same-origin",fetchOptions:E}=lc(v),O=r||fetch;N=N?(N+"").toLowerCase():"text";let A=Nf([m,_&&_.toAbortSignal()],g),M=null;const T=A&&A.unsubscribe&&(()=>{A.unsubscribe()});let H;try{if(S&&d&&b!=="get"&&b!=="head"&&(H=await w(k,p))!==0){let Z=new n(j,{method:"POST",body:p,duplex:"half"}),X;if(q.isFormData(p)&&(X=Z.headers.get("content-type"))&&k.setContentType(X),Z.body){const[oe,le]=$i(H,hs(zi(S)));p=Fi(Z.body,Ii,oe,le)}}q.isString(C)||(C=C?"include":"omit");const z=o&&"credentials"in n.prototype,B={...E,signal:A,method:b.toUpperCase(),headers:k.normalize().toJSON(),body:p,duplex:"half",credentials:z?C:void 0};M=o&&new n(j,B);let Y=await(o?O(M,E):O(j,B));const U=f&&(N==="stream"||N==="response");if(f&&(y||U&&T)){const Z={};["status","statusText","headers"].forEach(me=>{Z[me]=Y[me]});const X=q.toFiniteNumber(Y.headers.get("content-length")),[oe,le]=y&&$i(X,hs(zi(y),!0))||[];Y=new s(Fi(Y.body,Ii,oe,()=>{le&&le(),T&&T()}),Z)}N=N||"text";let G=await h[q.findKey(h,N)||"text"](Y,v);return!U&&T&&T(),await new Promise((Z,X)=>{ic(Z,X,{data:G,headers:Ye.from(Y.headers),status:Y.status,statusText:Y.statusText,config:v,request:M})})}catch(z){throw T&&T(),z&&z.name==="TypeError"&&/Load failed|fetch/i.test(z.message)?Object.assign(new ue("Network Error",ue.ERR_NETWORK,v,M),{cause:z.cause||z}):ue.from(z,z&&z.code,v,M)}}},Of=new Map,cc=e=>{let r=e&&e.env||{};const{fetch:n,Request:s,Response:i}=r,o=[s,i,n];let l=o.length,c=l,u,d,f=Of;for(;c--;)u=o[c],d=f.get(u),d===void 0&&f.set(u,d=c?new Map:Ef(r)),f=d;return d};cc();const Ka={http:Vh,xhr:jf,fetch:{get:cc}};q.forEach(Ka,(e,r)=>{if(e){try{Object.defineProperty(e,"name",{value:r})}catch{}Object.defineProperty(e,"adapterName",{value:r})}});const Wi=e=>`- ${e}`,Rf=e=>q.isFunction(e)||e===null||e===!1;function Tf(e,r){e=q.isArray(e)?e:[e];const{length:n}=e;let s,i;const o={};for(let l=0;l<n;l++){s=e[l];let c;if(i=s,!Rf(s)&&(i=Ka[(c=String(s)).toLowerCase()],i===void 0))throw new ue(`Unknown adapter '${c}'`);if(i&&(q.isFunction(i)||(i=i.get(r))))break;o[c||"#"+l]=i}if(!i){const l=Object.entries(o).map(([u,d])=>`adapter ${u} `+(d===!1?"is not supported by the environment":"is not available in the build"));let c=n?l.length>1?`since :
`+l.map(Wi).join(`
`):" "+Wi(l[0]):"as no adapter specified";throw new ue("There is no suitable adapter to dispatch the request "+c,"ERR_NOT_SUPPORT")}return i}const uc={getAdapter:Tf,adapters:Ka};function Qs(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new Ar(null,e)}function Bi(e){return Qs(e),e.headers=Ye.from(e.headers),e.data=Zs.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),uc.getAdapter(e.adapter||En.adapter,e)(e).then(function(s){return Qs(e),s.data=Zs.call(e,e.transformResponse,s),s.headers=Ye.from(s.headers),s},function(s){return ac(s)||(Qs(e),s&&s.response&&(s.response.data=Zs.call(e,e.transformResponse,s.response),s.response.headers=Ye.from(s.response.headers))),Promise.reject(s)})}const dc="1.13.2",Fs={};["object","boolean","number","function","string","symbol"].forEach((e,r)=>{Fs[e]=function(s){return typeof s===e||"a"+(r<1?"n ":" ")+e}});const Vi={};Fs.transitional=function(r,n,s){function i(o,l){return"[Axios v"+dc+"] Transitional option '"+o+"'"+l+(s?". "+s:"")}return(o,l,c)=>{if(r===!1)throw new ue(i(l," has been removed"+(n?" in "+n:"")),ue.ERR_DEPRECATED);return n&&!Vi[l]&&(Vi[l]=!0,console.warn(i(l," has been deprecated since v"+n+" and will be removed in the near future"))),r?r(o,l,c):!0}};Fs.spelling=function(r){return(n,s)=>(console.warn(`${s} is likely a misspelling of ${r}`),!0)};function Af(e,r,n){if(typeof e!="object")throw new ue("options must be an object",ue.ERR_BAD_OPTION_VALUE);const s=Object.keys(e);let i=s.length;for(;i-- >0;){const o=s[i],l=r[o];if(l){const c=e[o],u=c===void 0||l(c,o,e);if(u!==!0)throw new ue("option "+o+" must be "+u,ue.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new ue("Unknown option "+o,ue.ERR_BAD_OPTION)}}const rs={assertOptions:Af,validators:Fs},mt=rs.validators;let lr=class{constructor(r){this.defaults=r||{},this.interceptors={request:new Di,response:new Di}}async request(r,n){try{return await this._request(r,n)}catch(s){if(s instanceof Error){let i={};Error.captureStackTrace?Error.captureStackTrace(i):i=new Error;const o=i.stack?i.stack.replace(/^.+\n/,""):"";try{s.stack?o&&!String(s.stack).endsWith(o.replace(/^.+\n.+\n/,""))&&(s.stack+=`
`+o):s.stack=o}catch{}}throw s}}_request(r,n){typeof r=="string"?(n=n||{},n.url=r):n=r||{},n=ur(this.defaults,n);const{transitional:s,paramsSerializer:i,headers:o}=n;s!==void 0&&rs.assertOptions(s,{silentJSONParsing:mt.transitional(mt.boolean),forcedJSONParsing:mt.transitional(mt.boolean),clarifyTimeoutError:mt.transitional(mt.boolean)},!1),i!=null&&(q.isFunction(i)?n.paramsSerializer={serialize:i}:rs.assertOptions(i,{encode:mt.function,serialize:mt.function},!0)),n.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?n.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:n.allowAbsoluteUrls=!0),rs.assertOptions(n,{baseUrl:mt.spelling("baseURL"),withXsrfToken:mt.spelling("withXSRFToken")},!0),n.method=(n.method||this.defaults.method||"get").toLowerCase();let l=o&&q.merge(o.common,o[n.method]);o&&q.forEach(["delete","get","head","post","put","patch","common"],v=>{delete o[v]}),n.headers=Ye.concat(l,o);const c=[];let u=!0;this.interceptors.request.forEach(function(j){typeof j.runWhen=="function"&&j.runWhen(n)===!1||(u=u&&j.synchronous,c.unshift(j.fulfilled,j.rejected))});const d=[];this.interceptors.response.forEach(function(j){d.push(j.fulfilled,j.rejected)});let f,h=0,x;if(!u){const v=[Bi.bind(this),void 0];for(v.unshift(...c),v.push(...d),x=v.length,f=Promise.resolve(n);h<x;)f=f.then(v[h++],v[h++]);return f}x=c.length;let w=n;for(;h<x;){const v=c[h++],j=c[h++];try{w=v(w)}catch(b){j.call(this,b);break}}try{f=Bi.call(this,w)}catch(v){return Promise.reject(v)}for(h=0,x=d.length;h<x;)f=f.then(d[h++],d[h++]);return f}getUri(r){r=ur(this.defaults,r);const n=oc(r.baseURL,r.url,r.allowAbsoluteUrls);return rc(n,r.params,r.paramsSerializer)}};q.forEach(["delete","get","head","options"],function(r){lr.prototype[r]=function(n,s){return this.request(ur(s||{},{method:r,url:n,data:(s||{}).data}))}});q.forEach(["post","put","patch"],function(r){function n(s){return function(o,l,c){return this.request(ur(c||{},{method:r,headers:s?{"Content-Type":"multipart/form-data"}:{},url:o,data:l}))}}lr.prototype[r]=n(),lr.prototype[r+"Form"]=n(!0)});let Df=class hc{constructor(r){if(typeof r!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(o){n=o});const s=this;this.promise.then(i=>{if(!s._listeners)return;let o=s._listeners.length;for(;o-- >0;)s._listeners[o](i);s._listeners=null}),this.promise.then=i=>{let o;const l=new Promise(c=>{s.subscribe(c),o=c}).then(i);return l.cancel=function(){s.unsubscribe(o)},l},r(function(o,l,c){s.reason||(s.reason=new Ar(o,l,c),n(s.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(r){if(this.reason){r(this.reason);return}this._listeners?this._listeners.push(r):this._listeners=[r]}unsubscribe(r){if(!this._listeners)return;const n=this._listeners.indexOf(r);n!==-1&&this._listeners.splice(n,1)}toAbortSignal(){const r=new AbortController,n=s=>{r.abort(s)};return this.subscribe(n),r.signal.unsubscribe=()=>this.unsubscribe(n),r.signal}static source(){let r;return{token:new hc(function(i){r=i}),cancel:r}}};function Mf(e){return function(n){return e.apply(null,n)}}function $f(e){return q.isObject(e)&&e.isAxiosError===!0}const wa={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511,WebServerIsDown:521,ConnectionTimedOut:522,OriginIsUnreachable:523,TimeoutOccurred:524,SslHandshakeFailed:525,InvalidSslCertificate:526};Object.entries(wa).forEach(([e,r])=>{wa[r]=e});function fc(e){const r=new lr(e),n=Wl(lr.prototype.request,r);return q.extend(n,lr.prototype,r,{allOwnKeys:!0}),q.extend(n,r,null,{allOwnKeys:!0}),n.create=function(i){return fc(ur(e,i))},n}const Re=fc(En);Re.Axios=lr;Re.CanceledError=Ar;Re.CancelToken=Df;Re.isCancel=ac;Re.VERSION=dc;Re.toFormData=Ls;Re.AxiosError=ue;Re.Cancel=Re.CanceledError;Re.all=function(r){return Promise.all(r)};Re.spread=Mf;Re.isAxiosError=$f;Re.mergeConfig=ur;Re.AxiosHeaders=Ye;Re.formToJSON=e=>sc(q.isHTMLForm(e)?new FormData(e):e);Re.getAdapter=uc.getAdapter;Re.HttpStatusCode=wa;Re.default=Re;const{Axios:e1,AxiosError:t1,CanceledError:r1,isCancel:n1,CancelToken:s1,VERSION:a1,all:i1,Cancel:o1,isAxiosError:l1,spread:c1,toFormData:u1,AxiosHeaders:d1,HttpStatusCode:h1,formToJSON:f1,getAdapter:m1,mergeConfig:p1}=Re,Me=Re.create({baseURL:"/api/portal"}),wr="portal_token",ns="portal_user";Me.interceptors.request.use(e=>{const r=localStorage.getItem(wr);return r&&(e.headers.Authorization=`Bearer ${r}`),e});Me.interceptors.response.use(e=>e,e=>{var r;return((r=e.response)==null?void 0:r.status)===401&&(localStorage.removeItem(wr),localStorage.removeItem(ns),window.location.pathname.startsWith("/portal")&&!window.location.pathname.includes("/login")&&(window.location.href="/portal/login")),Promise.reject(e)});const zf={login:async e=>{const r=await Me.post("/auth/login",e);return localStorage.setItem(wr,r.data.token),localStorage.setItem(ns,JSON.stringify(r.data.user)),r.data},logout:()=>{localStorage.removeItem(wr),localStorage.removeItem(ns)},getCurrentUser:()=>Me.get("/auth/me"),changePassword:e=>Me.post("/auth/change-password",e),forgotPassword:e=>Me.post("/auth/forgot-password",{email:e}),resetPassword:(e,r)=>Me.post("/auth/reset-password",{token:e,new_password:r}),getToken:()=>localStorage.getItem(wr),getStoredUser:()=>{const e=localStorage.getItem(ns);if(e)try{return JSON.parse(e)}catch{return null}return null},isAuthenticated:()=>!!localStorage.getItem(wr)},g1={getProfile:()=>Me.get("/profile"),updateProfile:e=>Me.put("/profile",e)},x1={getDashboard:()=>Me.get("/dashboard")},y1={getAll:()=>Me.get("/engagements"),getById:e=>Me.get(`/engagements/${e}`),getMilestones:e=>Me.get(`/engagements/${e}/milestones`),updateMilestone:(e,r,n)=>Me.put(`/engagements/${e}/milestones/${r}`,n)},b1={getAll:e=>{const r=new URLSearchParams;return e!=null&&e.severity&&r.append("severity",e.severity),e!=null&&e.status&&r.append("status",e.status),e!=null&&e.engagement_id&&r.append("engagement_id",e.engagement_id),e!=null&&e.limit&&r.append("limit",e.limit.toString()),e!=null&&e.offset&&r.append("offset",e.offset.toString()),Me.get(`/vulnerabilities?${r.toString()}`)},getById:e=>Me.get(`/vulnerabilities/${e}`),updateStatus:(e,r,n)=>Me.put(`/vulnerabilities/${e}/status`,{status:r,comment:n}),getComments:e=>Me.get(`/vulnerabilities/${e}/comments`),addComment:(e,r)=>Me.post(`/vulnerabilities/${e}/comments`,{comment:r})},v1={getAll:()=>Me.get("/reports"),getById:e=>Me.get(`/reports/${e}`),download:e=>Me.get(`/reports/${e}/download`,{responseType:"blob"})},mc=R.createContext(void 0),pc="heroforge-theme";function Lf(){return typeof window<"u"&&window.matchMedia?window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light":"dark"}function Ff(){if(typeof window<"u"){const e=localStorage.getItem(pc);if(e==="light"||e==="dark"||e==="system")return e}return"system"}function ea(e){return e==="system"?Lf():e}const If=({children:e,defaultTheme:r="system"})=>{const[n,s]=R.useState(()=>Ff()||r),[i,o]=R.useState(()=>ea(n)),l=R.useCallback(d=>{const f=document.documentElement;d==="dark"?(f.classList.add("dark"),f.classList.remove("light")):(f.classList.add("light"),f.classList.remove("dark"));const h=document.querySelector('meta[name="theme-color"]');h&&h.setAttribute("content",d==="dark"?"#0f172a":"#ffffff")},[]),c=R.useCallback(d=>{s(d),localStorage.setItem(pc,d)},[]);R.useEffect(()=>{const d=ea(n);o(d),l(d)},[n,l]),R.useEffect(()=>{if(n!=="system")return;const d=window.matchMedia("(prefers-color-scheme: dark)"),f=h=>{const x=h.matches?"dark":"light";o(x),l(x)};return d.addEventListener("change",f),()=>d.removeEventListener("change",f)},[n,l]),R.useEffect(()=>{const d=ea(n);l(d)},[]);const u={theme:n,setTheme:c,resolvedTheme:i};return a.jsx(mc.Provider,{value:u,children:e})};function gc(){const e=R.useContext(mc);if(e===void 0)throw new Error("useTheme must be used within a ThemeProvider");return e}const P=Re.create({baseURL:"/api"});P.interceptors.request.use(e=>{const r=localStorage.getItem("token");return r&&(e.headers.Authorization=`Bearer ${r}`),e});const _a={register:e=>P.post("/auth/register",e),login:e=>P.post("/auth/login",e),me:()=>P.get("/user/me"),updateProfile:e=>P.put("/user/profile",e),changePassword:e=>P.put("/user/password",e)},Hf={setup:()=>P.post("/user/mfa/setup"),verifySetup:e=>P.post("/user/mfa/verify-setup",e),disable:e=>P.delete("/user/mfa",{data:e}),regenerateRecoveryCodes:e=>P.post("/user/mfa/recovery-codes",e),verify:e=>P.post("/auth/mfa/verify",e)},vt={create:e=>P.post("/scans",e),getAll:()=>P.get("/scans"),getById:e=>P.get(`/scans/${e}`),getResults:e=>P.get(`/scans/${e}/results`),delete:e=>P.delete(`/scans/${e}`),getPresets:()=>P.get("/scan-presets"),bulkDelete:e=>P.post("/scans/bulk-delete",{scan_ids:e}),bulkExport:(e,r,n)=>P.post("/scans/bulk-export",{scan_ids:e,format:r,...n},{responseType:"blob"}),duplicate:(e,r)=>P.post(`/scans/${e}/duplicate`,r||{}),getAllWithTags:()=>P.get("/scans/with-tags"),getSslReport:e=>P.get(`/scans/${e}/ssl-report`)},ot={getAll:()=>P.get("/scans/tags"),create:e=>P.post("/scans/tags",e),delete:e=>P.delete(`/scans/tags/${e}`),getSuggestions:()=>P.get("/scans/tags/suggestions"),getTagsForScan:e=>P.get(`/scans/${e}/tags`),addTagsToScan:(e,r)=>P.post(`/scans/${e}/tags`,r),removeTagFromScan:(e,r)=>P.delete(`/scans/${e}/tags/${r}`)},w1={getUsers:()=>P.get("/admin/users"),getUser:e=>P.get(`/admin/users/${e}`),updateUser:(e,r)=>P.patch(`/admin/users/${e}`,r),deleteUser:e=>P.delete(`/admin/users/${e}`),assignRole:(e,r)=>P.post(`/admin/users/${e}/roles`,{role_id:r}),removeRole:(e,r)=>P.delete(`/admin/users/${e}/roles/${r}`),unlockUser:e=>P.post(`/admin/users/${e}/unlock`),getRoles:()=>P.get("/admin/roles"),getAllScans:()=>P.get("/admin/scans"),deleteScan:e=>P.delete(`/admin/scans/${e}`),getAuditLogs:(e={})=>{const r=new URLSearchParams;return e.user_id&&r.append("user_id",e.user_id),e.action&&r.append("action",e.action),e.target_type&&r.append("target_type",e.target_type),e.start_date&&r.append("start_date",e.start_date),e.end_date&&r.append("end_date",e.end_date),e.limit!==void 0&&r.append("limit",e.limit.toString()),e.offset!==void 0&&r.append("offset",e.offset.toString()),P.get(`/admin/audit-logs?${r.toString()}`)},getAuditActionTypes:()=>P.get("/admin/audit-logs/action-types"),getAuditUsers:()=>P.get("/admin/audit-logs/users"),exportAuditLogs:async(e={})=>{const r=new URLSearchParams;return e.user_id&&r.append("user_id",e.user_id),e.action&&r.append("action",e.action),e.target_type&&r.append("target_type",e.target_type),e.start_date&&r.append("start_date",e.start_date),e.end_date&&r.append("end_date",e.end_date),await P.get(`/admin/audit-logs/export?${r.toString()}`,{responseType:"blob"})},getSettings:()=>P.get("/admin/settings"),updateSetting:(e,r)=>P.patch(`/admin/settings/${e}`,{value:r}),getRateLimitDashboard:()=>P.get("/admin/rate-limits")},fn={create:e=>P.post("/reports",e),getAll:e=>{const r=e?`?scan_id=${e}`:"";return P.get(`/reports${r}`)},getById:e=>P.get(`/reports/${e}`),download:async e=>await P.get(`/reports/${e}/download`,{responseType:"blob"}),delete:e=>P.delete(`/reports/${e}`),getTemplates:()=>P.get("/reports/templates")},Uf={getAll:()=>P.get("/target-groups"),getById:e=>P.get(`/target-groups/${e}`),create:e=>P.post("/target-groups",e),update:(e,r)=>P.put(`/target-groups/${e}`,r),delete:e=>P.delete(`/target-groups/${e}`)},_1={getAll:()=>P.get("/scheduled-scans"),getById:e=>P.get(`/scheduled-scans/${e}`),create:e=>P.post("/scheduled-scans",e),update:(e,r)=>P.put(`/scheduled-scans/${e}`,r),delete:e=>P.delete(`/scheduled-scans/${e}`)},j1={getSettings:()=>P.get("/notifications/settings"),updateSettings:e=>P.put("/notifications/settings",e),testSlack:()=>P.post("/notifications/test-slack"),testTeams:()=>P.post("/notifications/test-teams"),testEmail:()=>P.post("/notifications/test-email"),checkSmtpStatus:()=>P.get("/notifications/smtp-status")},N1={getAll:()=>P.get("/api-keys"),create:e=>P.post("/api-keys",e),update:(e,r)=>P.patch(`/api-keys/${e}`,r),delete:e=>P.delete(`/api-keys/${e}`)},S1={compare:(e,r)=>P.post("/scans/compare",{scan_id_1:e,scan_id_2:r})},qf={getAll:()=>P.get("/templates"),getById:e=>P.get(`/templates/${e}`),create:e=>P.post("/templates",e),update:(e,r)=>P.put(`/templates/${e}`,r),delete:e=>P.delete(`/templates/${e}`),createScan:(e,r)=>P.post(`/templates/${e}/scan`,{name:r})},k1={list:()=>P.get("/users")},Lr={getSummary:(e=30)=>P.get(`/analytics/summary?days=${e}`),getHosts:(e=30)=>P.get(`/analytics/hosts?days=${e}`),getVulnerabilities:(e=30)=>P.get(`/analytics/vulnerabilities?days=${e}`),getServices:(e=10)=>P.get(`/analytics/services?limit=${e}`),getFrequency:(e=30)=>P.get(`/analytics/frequency?days=${e}`)},Gi={list:e=>{const r=new URLSearchParams;return e.scan_id&&r.append("scan_id",e.scan_id),e.status&&r.append("status",e.status),e.severity&&r.append("severity",e.severity),P.get(`/vulnerabilities?${r.toString()}`)},get:e=>P.get(`/vulnerabilities/${e}`),update:(e,r)=>P.put(`/vulnerabilities/${e}`,r),addComment:(e,r)=>P.post(`/vulnerabilities/${e}/comments`,{comment:r}),getComments:e=>P.get(`/vulnerabilities/${e}/comments`),updateComment:(e,r,n)=>P.put(`/vulnerabilities/${e}/comments/${r}`,{comment:n}),deleteComment:(e,r)=>P.delete(`/vulnerabilities/${e}/comments/${r}`),bulkUpdate:e=>P.post("/vulnerabilities/bulk-update",e),bulkExport:(e,r)=>P.post("/vulnerabilities/bulk-export",{vulnerability_ids:e,format:r},{responseType:"blob"}),getStats:e=>{const r=e?`?scan_id=${e}`:"";return P.get(`/vulnerabilities/stats${r}`)},getTimeline:e=>P.get(`/vulnerabilities/${e}/timeline`),markForVerification:(e,r)=>P.post(`/vulnerabilities/${e}/verify`,r),bulkAssign:e=>P.post("/vulnerabilities/bulk-assign",e),getMyAssignments:e=>{const r=new URLSearchParams;return e!=null&&e.status&&r.append("status",e.status),(e==null?void 0:e.overdue)!==void 0&&r.append("overdue",e.overdue.toString()),e!=null&&e.user_id&&r.append("user_id",e.user_id),P.get(`/vulnerabilities/assigned?${r.toString()}`)},getAssignmentStats:()=>P.get("/vulnerabilities/assignment-stats"),listWithAssignments:e=>{const r=new URLSearchParams;return e!=null&&e.scan_id&&r.append("scan_id",e.scan_id),e!=null&&e.status&&r.append("status",e.status),e!=null&&e.severity&&r.append("severity",e.severity),e!=null&&e.assigned_to&&r.append("assigned_to",e.assigned_to),(e==null?void 0:e.overdue)!==void 0&&r.append("overdue",e.overdue.toString()),P.get(`/vulnerabilities/with-assignments?${r.toString()}`)},assign:(e,r)=>P.post(`/vulnerabilities/${e}/assign`,r),unassign:e=>P.delete(`/vulnerabilities/${e}/assign`),updateAssignment:(e,r)=>P.put(`/vulnerabilities/${e}/assignment`,r),bulkUpdateStatus:(e,r)=>P.post("/vulnerabilities/bulk/status",{vulnerability_ids:e,status:r}),bulkUpdateSeverity:(e,r)=>P.post("/vulnerabilities/bulk/severity",{vulnerability_ids:e,severity:r}),bulkDelete:e=>P.post("/vulnerabilities/bulk/delete",{vulnerability_ids:e}),bulkAddTags:(e,r)=>P.post("/vulnerabilities/bulk/tags",{vulnerability_ids:e,tags:r}),requestRetest:(e,r={})=>P.post(`/vulnerabilities/${e}/request-retest`,r),bulkRequestRetest:e=>P.post("/vulnerabilities/bulk-retest",e),completeRetest:(e,r)=>P.post(`/vulnerabilities/${e}/complete-retest`,r),getPendingRetests:e=>{const r=e?`?scan_id=${e}`:"";return P.get(`/vulnerabilities/pending-retest${r}`)},getRetestHistory:e=>P.get(`/vulnerabilities/${e}/retest-history`)},Ln={getFrameworks:()=>P.get("/compliance/frameworks"),getFramework:e=>P.get(`/compliance/frameworks/${e}`),getFrameworkControls:e=>P.get(`/compliance/frameworks/${e}/controls`),analyzeScan:(e,r)=>P.post(`/scans/${e}/compliance`,r),getScanCompliance:e=>P.get(`/scans/${e}/compliance`),generateReport:(e,r)=>P.post(`/scans/${e}/compliance/report`,r),downloadReport:e=>P.get(`/compliance/reports/${e}/download`,{responseType:"blob"})},C1={getSettings:()=>P.get("/integrations/jira/settings"),updateSettings:e=>P.post("/integrations/jira/settings",e),testConnection:()=>P.post("/integrations/jira/test"),listProjects:()=>P.get("/integrations/jira/projects"),listIssueTypes:()=>P.get("/integrations/jira/issue-types"),createTicket:(e,r)=>P.post(`/vulnerabilities/${e}/create-ticket`,r||{})},P1={performRecon:e=>P.post("/dns/recon",{domain:e.domain,include_subdomains:e.includeSubdomains,custom_wordlist:e.customWordlist,timeout_secs:e.timeoutSecs}),listResults:()=>P.get("/dns/recon"),getResult:e=>P.get(`/dns/recon/${e}`),deleteResult:e=>P.delete(`/dns/recon/${e}`),getWordlist:()=>P.get("/dns/wordlist")},Wf={getSettings:()=>P.get("/integrations/siem/settings"),createSettings:e=>P.post("/integrations/siem/settings",e),updateSettings:(e,r)=>P.put(`/integrations/siem/settings/${e}`,r),deleteSettings:e=>P.delete(`/integrations/siem/settings/${e}`),testConnection:e=>P.post(`/integrations/siem/settings/${e}/test`),exportScan:e=>P.post(`/integrations/siem/export/${e}`)},E1={startScan:e=>P.post("/webapp/scan",e),getScan:e=>P.get(`/webapp/scan/${e}`)},O1={getAll:e=>{const r=e?`?framework_id=${e}`:"";return P.get(`/compliance/rubrics${r}`)},getById:e=>P.get(`/compliance/rubrics/${e}`),create:e=>P.post("/compliance/rubrics",e),update:(e,r)=>P.put(`/compliance/rubrics/${e}`,r),delete:e=>P.delete(`/compliance/rubrics/${e}`),getByFramework:e=>P.get(`/compliance/frameworks/${e}/rubrics`)},R1={getAll:(e,r)=>{const n=new URLSearchParams;e&&n.append("framework_id",e),r&&n.append("status",r);const s=n.toString();return P.get(`/compliance/assessments${s?`?${s}`:""}`)},getById:e=>P.get(`/compliance/assessments/${e}`),create:e=>P.post("/compliance/assessments",e),update:(e,r)=>P.put(`/compliance/assessments/${e}`,r),delete:e=>P.delete(`/compliance/assessments/${e}`),submit:e=>P.post(`/compliance/assessments/${e}/submit`),approve:e=>P.post(`/compliance/assessments/${e}/approve`),reject:(e,r)=>P.post(`/compliance/assessments/${e}/reject`,{notes:r})},T1={getAll:e=>P.get(`/compliance/assessments/${e}/evidence`),upload:(e,r)=>P.post(`/compliance/assessments/${e}/evidence`,r,{headers:{"Content-Type":"multipart/form-data"}}),addLink:(e,r,n,s)=>P.post(`/compliance/assessments/${e}/evidence/link`,{title:r,url:n,description:s}),delete:e=>P.delete(`/compliance/evidence/${e}`),download:async e=>(await P.get(`/compliance/evidence/${e}/download`,{responseType:"blob"})).data},A1={getAll:()=>P.get("/compliance/campaigns"),getById:e=>P.get(`/compliance/campaigns/${e}`),create:e=>P.post("/compliance/campaigns",e),update:(e,r)=>P.put(`/compliance/campaigns/${e}`,r),delete:e=>P.delete(`/compliance/campaigns/${e}`),getProgress:e=>P.get(`/compliance/campaigns/${e}/progress`)},Bf={getConfigs:()=>P.get("/vpn/configs"),uploadConfig:e=>P.post("/vpn/configs",e),updateConfig:(e,r)=>P.put(`/vpn/configs/${e}`,r),deleteConfig:e=>P.delete(`/vpn/configs/${e}`),testConfig:e=>P.post(`/vpn/configs/${e}/test`),getStatus:()=>P.get("/vpn/status"),connect:e=>P.post("/vpn/connect",e),disconnect:()=>P.post("/vpn/disconnect")},Yi={getDashboard:()=>P.get("/crm/dashboard"),customers:{getAll:e=>{const r=e?`?status=${e}`:"";return P.get(`/crm/customers${r}`)},getById:e=>P.get(`/crm/customers/${e}`),getSummary:e=>P.get(`/crm/customers/${e}/summary`),create:e=>P.post("/crm/customers",e),update:(e,r)=>P.put(`/crm/customers/${e}`,r),delete:e=>P.delete(`/crm/customers/${e}`)},contacts:{getByCustomer:e=>P.get(`/crm/customers/${e}/contacts`),getById:e=>P.get(`/crm/contacts/${e}`),create:(e,r)=>P.post(`/crm/customers/${e}/contacts`,r),update:(e,r)=>P.put(`/crm/contacts/${e}`,r),delete:e=>P.delete(`/crm/contacts/${e}`)},engagements:{getAll:e=>{const r=e?`?status=${e}`:"";return P.get(`/crm/engagements${r}`)},getByCustomer:(e,r)=>{const n=r?`?status=${r}`:"";return P.get(`/crm/customers/${e}/engagements${n}`)},getById:e=>P.get(`/crm/engagements/${e}`),create:(e,r)=>P.post(`/crm/customers/${e}/engagements`,r),update:(e,r)=>P.put(`/crm/engagements/${e}`,r),delete:e=>P.delete(`/crm/engagements/${e}`)},milestones:{getByEngagement:e=>P.get(`/crm/engagements/${e}/milestones`),create:(e,r)=>P.post(`/crm/engagements/${e}/milestones`,r),update:(e,r)=>P.put(`/crm/milestones/${e}`,r),delete:e=>P.delete(`/crm/milestones/${e}`)},contracts:{getAll:e=>{const r=e?`?status=${e}`:"";return P.get(`/crm/contracts${r}`)},getByCustomer:e=>P.get(`/crm/customers/${e}/contracts`),getById:e=>P.get(`/crm/contracts/${e}`),create:(e,r)=>P.post(`/crm/customers/${e}/contracts`,r),update:(e,r)=>P.put(`/crm/contracts/${e}`,r),delete:e=>P.delete(`/crm/contracts/${e}`)},sla:{getTemplates:()=>P.get("/crm/sla-templates"),createTemplate:e=>P.post("/crm/sla-templates",e),getByCustomer:e=>P.get(`/crm/customers/${e}/sla`),setForCustomer:(e,r)=>P.post(`/crm/customers/${e}/sla`,r),delete:e=>P.delete(`/crm/sla/${e}`)},timeEntries:{getAll:(e,r)=>{const n=new URLSearchParams;e&&n.append("start_date",e),r&&n.append("end_date",r);const s=n.toString();return P.get(`/crm/time${s?`?${s}`:""}`)},getByEngagement:e=>P.get(`/crm/engagements/${e}/time`),create:(e,r)=>P.post(`/crm/engagements/${e}/time`,r),delete:e=>P.delete(`/crm/time/${e}`)},communications:{getByCustomer:(e,r)=>{const n=r?`?limit=${r}`:"";return P.get(`/crm/customers/${e}/communications${n}`)},create:(e,r)=>P.post(`/crm/customers/${e}/communications`,r),delete:e=>P.delete(`/crm/communications/${e}`)},portalUsers:{getByCustomer:e=>P.get(`/crm/customers/${e}/portal-users`),getById:(e,r)=>P.get(`/crm/customers/${e}/portal-users/${r}`),create:(e,r)=>P.post(`/crm/customers/${e}/portal-users`,r),update:(e,r,n)=>P.put(`/crm/customers/${e}/portal-users/${r}`,n),delete:(e,r)=>P.delete(`/crm/customers/${e}/portal-users/${r}`),activate:(e,r)=>P.post(`/crm/customers/${e}/portal-users/${r}/activate`),deactivate:(e,r)=>P.post(`/crm/customers/${e}/portal-users/${r}/deactivate`),resetPassword:(e,r,n)=>P.post(`/crm/customers/${e}/portal-users/${r}/reset-password`,n)}},D1={list:e=>{const r=new URLSearchParams;e!=null&&e.category&&r.append("category",e.category),e!=null&&e.severity&&r.append("severity",e.severity),e!=null&&e.search&&r.append("search",e.search),(e==null?void 0:e.include_system)!==void 0&&r.append("include_system",e.include_system.toString());const n=r.toString();return P.get(`/finding-templates${n?`?${n}`:""}`)},getById:e=>P.get(`/finding-templates/${e}`),create:e=>P.post("/finding-templates",e),update:(e,r)=>P.put(`/finding-templates/${e}`,r),delete:e=>P.delete(`/finding-templates/${e}`),clone:(e,r)=>P.post(`/finding-templates/${e}/clone`,r||{}),getCategories:()=>P.get("/finding-templates/categories")},M1={listTemplates:()=>P.get("/methodology/templates"),getTemplate:e=>P.get(`/methodology/templates/${e}`),listChecklists:()=>P.get("/methodology/checklists"),createChecklist:e=>P.post("/methodology/checklists",e),getChecklist:e=>P.get(`/methodology/checklists/${e}`),updateChecklist:(e,r)=>P.put(`/methodology/checklists/${e}`,r),deleteChecklist:e=>P.delete(`/methodology/checklists/${e}`),getProgress:e=>P.get(`/methodology/checklists/${e}/progress`),getItem:(e,r)=>P.get(`/methodology/checklists/${e}/items/${r}`),updateItem:(e,r,n)=>P.put(`/methodology/checklists/${e}/items/${r}`,n)},$1={getCustomerTrends:(e,r=6)=>P.get(`/analytics/customer/${e}/trends`,{params:{months:r}}),getCustomerSummary:e=>P.get(`/analytics/customer/${e}/summary`),getRemediationVelocity:(e=90)=>P.get("/analytics/remediation-velocity",{params:{days:e}}),getRiskTrends:(e=6)=>P.get("/analytics/risk-trends",{params:{months:e}}),getMethodologyCoverage:()=>P.get("/analytics/methodology-coverage"),getExecutiveDashboard:(e,r=6)=>P.get("/analytics/executive-dashboard",{params:{customer_id:e,months:r}})},Vf={getStatus:()=>P.get("/threat-intel/status"),lookupIp:e=>P.get(`/threat-intel/lookup/${e}`),lookupCve:e=>P.get(`/threat-intel/cve/${e}`),getAlerts:e=>P.get("/threat-intel/alerts",{params:e}),acknowledgeAlert:e=>P.post(`/threat-intel/alerts/${e}/acknowledge`),enrichScan:(e,r)=>P.post(`/threat-intel/enrich/${e}`,r||{}),getEnrichment:e=>P.get(`/threat-intel/scan/${e}/enrichment`)},z1={analyze:(e,r)=>P.post(`/attack-paths/analyze/${e}`,r||{}),getByScan:e=>P.get(`/attack-paths/${e}`),getCritical:e=>P.get(`/attack-paths/${e}/critical`),getPath:e=>P.get(`/attack-paths/path/${e}`)},L1={startScan:e=>P.post("/api-security/scans",e),listScans:()=>P.get("/api-security/scans"),getScan:e=>P.get(`/api-security/scans/${e}`),deleteScan:e=>P.delete(`/api-security/scans/${e}`),getFindings:e=>P.get(`/api-security/scans/${e}/findings`),getEndpoints:e=>P.get(`/api-security/scans/${e}/endpoints`),discoverEndpoints:e=>P.post("/api-security/discover",e),getStats:()=>P.get("/api-security/stats")},F1={getTags:()=>P.get("/assets/tags"),createTag:e=>P.post("/assets/tags",e),getTag:e=>P.get(`/assets/tags/${e}`),updateTag:(e,r)=>P.put(`/assets/tags/${e}`,r),deleteTag:e=>P.delete(`/assets/tags/${e}`),getAssets:e=>P.get("/assets",{params:e}),getAssetsWithTags:e=>P.get("/assets/with-tags",{params:e}),getAssetsByTags:e=>P.get("/assets/by-tags",{params:e}),getAsset:e=>P.get(`/assets/${e}`),addTagsToAsset:(e,r)=>P.post(`/assets/${e}/tags`,r),removeTagFromAsset:(e,r)=>P.delete(`/assets/${e}/tags/${r}`),updateAsset:(e,r)=>P.patch(`/assets/${e}`,r),deleteAsset:e=>P.delete(`/assets/${e}`),getAssetHistory:e=>P.get(`/assets/${e}/history`),getAssetFull:e=>P.get(`/assets/${e}/full`)},I1={getGroups:()=>P.get("/asset-groups"),createGroup:e=>P.post("/asset-groups",e),getGroup:e=>P.get(`/asset-groups/${e}`),updateGroup:(e,r)=>P.put(`/asset-groups/${e}`,r),deleteGroup:e=>P.delete(`/asset-groups/${e}`),addAssetsToGroup:(e,r)=>P.post(`/asset-groups/${e}/members`,r),removeAssetFromGroup:(e,r)=>P.delete(`/asset-groups/${e}/members/${r}`),getAssetsByGroup:e=>P.get("/asset-groups/assets",{params:e}),bulkAddAssetsToGroup:(e,r)=>P.post(`/asset-groups/${e}/bulk-add`,r)},Gf={getAll:()=>P.get("/exclusions"),getGlobal:()=>P.get("/exclusions/global"),get:e=>P.get(`/exclusions/${e}`),create:e=>P.post("/exclusions",e),update:(e,r)=>P.put(`/exclusions/${e}`,r),delete:e=>P.delete(`/exclusions/${e}`)},Ja=()=>{const{user:e,token:r,isAuthenticated:n,isLoading:s,login:i,logout:o,setLoading:l,setUser:c}=Sr();R.useEffect(()=>{(async()=>{if(localStorage.getItem("token")&&!e){l(!0);try{const x=await _a.me();c(x.data)}catch(x){console.error("Failed to verify token:",x),o()}finally{l(!1)}}})()},[]);const u=R.useCallback(async(f,h)=>{var x,w;l(!0);try{const v=await _a.login({username:f,password:h}),{token:j,user:b}=v.data;return i(b,j),Q.success("Login successful!"),!0}catch(v){const b=((w=(x=v.response)==null?void 0:x.data)==null?void 0:w.error)||"Login failed. Please check your credentials.";return Q.error(b),!1}finally{l(!1)}},[i,l]),d=R.useCallback(()=>{o(),Q.info("Logged out successfully")},[o]);return{user:e,token:r,isAuthenticated:n,isLoading:s,login:u,logout:d}},ze=({variant:e="primary",size:r="md",loading:n=!1,loadingText:s,disabled:i,className:o="",children:l,"aria-label":c,...u})=>{const d="inline-flex items-center justify-center font-medium rounded-lg transition-colors focus-ring disabled:opacity-50 disabled:cursor-not-allowed",f={primary:"bg-primary text-white hover:bg-primary-dark active:bg-blue-700",secondary:"bg-light-surface dark:bg-dark-surface text-slate-700 dark:text-slate-100 hover:bg-light-hover dark:hover:bg-dark-hover border border-light-border dark:border-dark-border",danger:"bg-red-600 text-white hover:bg-red-700 active:bg-red-800",ghost:"text-slate-600 dark:text-slate-300 hover:bg-light-hover dark:hover:bg-dark-surface hover:text-slate-900 dark:hover:text-slate-100",outline:"bg-transparent text-slate-600 dark:text-slate-300 border border-light-border dark:border-dark-border hover:bg-light-hover dark:hover:bg-dark-surface hover:text-slate-900 dark:hover:text-slate-100"},h={sm:"px-3 py-1.5 text-sm",md:"px-4 py-2 text-base",lg:"px-6 py-3 text-lg"};return a.jsxs("button",{className:`${d} ${f[e]} ${h[r]} ${o}`,disabled:i||n,"aria-busy":n,"aria-disabled":i||n,"aria-label":n&&s?s:c,...u,children:[n&&a.jsx(Ps,{className:"mr-2 h-4 w-4 animate-spin","aria-hidden":"true"}),a.jsx("span",{"aria-live":n?"polite":void 0,children:n&&s?s:l})]})},Yf=({content:e,children:r,position:n="top",delay:s=200,maxWidth:i=250})=>{const[o,l]=R.useState(!1),[c,u]=R.useState({x:0,y:0}),d=R.useRef(null),f=R.useRef(null),h=R.useRef(),x=()=>{h.current=setTimeout(()=>{l(!0)},s)},w=()=>{h.current&&clearTimeout(h.current),l(!1)};R.useEffect(()=>{if(o&&d.current&&f.current){const j=d.current.getBoundingClientRect(),b=f.current.getBoundingClientRect(),p=8;let m=0,_=0;switch(n){case"top":m=j.left+j.width/2-b.width/2,_=j.top-b.height-p;break;case"bottom":m=j.left+j.width/2-b.width/2,_=j.bottom+p;break;case"left":m=j.left-b.width-p,_=j.top+j.height/2-b.height/2;break;case"right":m=j.right+p,_=j.top+j.height/2-b.height/2;break}const g=10;m=Math.max(g,Math.min(m,window.innerWidth-b.width-g)),_=Math.max(g,Math.min(_,window.innerHeight-b.height-g)),u({x:m,y:_})}},[o,n]),R.useEffect(()=>()=>{h.current&&clearTimeout(h.current)},[]);const v={top:"after:top-full after:left-1/2 after:-translate-x-1/2",bottom:"after:bottom-full after:left-1/2 after:-translate-x-1/2",left:"after:left-full after:top-1/2 after:-translate-y-1/2",right:"after:right-full after:top-1/2 after:-translate-y-1/2"};return a.jsxs(a.Fragment,{children:[a.jsx("div",{ref:d,onMouseEnter:x,onMouseLeave:w,onFocus:x,onBlur:w,className:"inline-flex",children:r}),o&&a.jsx("div",{ref:f,role:"tooltip",className:`
            fixed z-[200] px-3 py-2 text-sm
            text-slate-700 dark:text-slate-100
            bg-light-surface dark:bg-dark-surface
            border border-light-border dark:border-dark-border
            rounded-lg shadow-xl
            animate-fade-in pointer-events-none
            ${v[n]}
          `,style:{left:c.x,top:c.y,maxWidth:i},children:e})]})},Ie=({label:e,error:r,icon:n,helpText:s,hint:i,className:o="",id:l,...c})=>{const u=R.useId(),d=l||u,f=`${d}-error`,h=`${d}-hint`,x=[r?f:null,i?h:null].filter(Boolean).join(" ")||void 0;return a.jsxs("div",{className:"w-full",children:[e&&a.jsxs("div",{className:"flex items-center gap-1.5 mb-1",children:[a.jsxs("label",{htmlFor:d,className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:[e,c.required&&a.jsx("span",{className:"text-red-500 dark:text-red-400 ml-0.5","aria-hidden":"true",children:"*"})]}),s&&a.jsx(Yf,{content:s,position:"top",children:a.jsx("button",{type:"button",className:"text-slate-400 dark:text-slate-500 hover:text-slate-600 dark:hover:text-slate-300 transition-colors","aria-label":`Help for ${e}`,children:a.jsx(kl,{className:"h-3.5 w-3.5"})})})]}),i&&a.jsx("p",{id:h,className:"text-xs text-slate-500 mb-1.5",children:i}),a.jsxs("div",{className:"relative",children:[n&&a.jsx("div",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-slate-500 dark:text-slate-400 pointer-events-none","aria-hidden":"true",children:n}),a.jsx("input",{id:d,className:`
            w-full px-3 py-2 rounded-lg transition-colors focus-ring
            bg-light-surface dark:bg-dark-surface
            text-slate-900 dark:text-slate-100
            placeholder-slate-400 dark:placeholder-slate-500
            ${n?"pl-10":""}
            ${r?"border border-red-500":"border border-light-border dark:border-dark-border hover:border-slate-400 dark:hover:border-dark-hover focus:border-primary"}
            ${o}
          `,"aria-invalid":r?"true":void 0,"aria-describedby":x,...c})]}),r&&a.jsx("p",{id:f,className:"mt-1 text-sm text-red-500",role:"alert",children:r})]})},Xf=()=>{const[e,r]=R.useState(""),[n,s]=R.useState(""),[i,o]=R.useState(!1),[l,c]=R.useState(""),[u,d]=R.useState(""),[f,h]=R.useState(!1),{isLoading:x}=Ja(),[w,v]=R.useState(!1),j=Ua(),{login:b}=Sr(),p=async g=>{var y,S;if(g.preventDefault(),!(!e||!n)){v(!0);try{const k=(await _a.login({username:e,password:n})).data;k.mfa_required&&k.mfa_token?(o(!0),c(k.mfa_token),Q.info("Please enter your two-factor authentication code")):(b(k.user,k.token),Q.success("Login successful!"),j("/dashboard"))}catch(N){const C=((S=(y=N.response)==null?void 0:y.data)==null?void 0:S.error)||"Login failed. Please check your credentials.";Q.error(C)}finally{v(!1)}}},m=async g=>{var y,S;if(g.preventDefault(),!u||(f?u.length===0:u.length!==6)){Q.error(f?"Please enter a recovery code":"Please enter a valid 6-digit code");return}v(!0);try{const N=await Hf.verify({mfa_token:l,...f?{recovery_code:u}:{totp_code:u}}),{token:k,user:C}=N.data;b(C,k),Q.success("Login successful!"),j("/dashboard")}catch(N){const k=N;Q.error(((S=(y=k.response)==null?void 0:y.data)==null?void 0:S.error)||"Invalid authentication code")}finally{v(!1)}},_=()=>{o(!1),c(""),d(""),h(!1)};return i?a.jsxs("div",{className:"space-y-4 w-full max-w-md",children:[a.jsxs("div",{className:"text-center mb-6",children:[a.jsx("div",{className:"inline-flex items-center justify-center w-12 h-12 bg-primary/20 rounded-lg mb-3",children:a.jsx(ke,{className:"h-6 w-6 text-primary"})}),a.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-white mb-1",children:"Two-Factor Authentication"}),a.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:f?"Enter one of your recovery codes":"Enter the 6-digit code from your authenticator app"})]}),a.jsxs("form",{onSubmit:m,className:"space-y-4",children:[a.jsx(Ie,{type:"text",placeholder:f?"Recovery Code":"000000",value:u,onChange:g=>{d(f?g.target.value:g.target.value.replace(/\D/g,"").slice(0,6))},icon:f?a.jsx(us,{className:"h-5 w-5"}):a.jsx(ke,{className:"h-5 w-5"}),className:f?"":"text-center tracking-widest font-mono",maxLength:f?void 0:6,required:!0,autoFocus:!0,autoComplete:"one-time-code"}),a.jsx("div",{className:"flex items-center justify-center",children:a.jsx("button",{type:"button",onClick:()=>{h(!f),d("")},className:"text-sm text-primary hover:text-primary-dark transition-colors",children:f?"Use authenticator code instead":"Use recovery code instead"})}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx(ze,{type:"button",variant:"secondary",size:"lg",onClick:_,className:"flex-1",children:"Back"}),a.jsx(ze,{type:"submit",variant:"primary",size:"lg",loading:w,disabled:w,className:"flex-1",children:"Verify"})]})]})]}):a.jsxs("form",{onSubmit:p,className:"space-y-4 w-full max-w-md",children:[a.jsx(Ie,{type:"text",placeholder:"Username",value:e,onChange:g=>r(g.target.value),icon:a.jsx(Cl,{className:"h-5 w-5"}),required:!0,autoComplete:"username"}),a.jsx(Ie,{type:"password",placeholder:"Password",value:n,onChange:g=>s(g.target.value),icon:a.jsx(yn,{className:"h-5 w-5"}),required:!0,autoComplete:"current-password"}),a.jsx(ze,{type:"submit",variant:"primary",size:"lg",loading:w||x,disabled:w||x,className:"w-full",children:"Sign In"})]})},Kf=()=>{const{isAuthenticated:e}=Ja(),r=Ua();return R.useEffect(()=>{e&&r("/dashboard")},[e,r]),a.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-slate-100 via-slate-50 to-white dark:from-dark-bg dark:via-slate-900 dark:to-slate-800 p-4",children:a.jsxs("div",{className:"w-full max-w-md",children:[a.jsxs("div",{className:"text-center mb-8 animate-fadeIn",children:[a.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-primary rounded-lg mb-4",children:a.jsx(ke,{className:"h-10 w-10 text-white"})}),a.jsx("h1",{className:"text-4xl font-bold text-slate-900 dark:text-white mb-2",children:"HeroForge"}),a.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-lg",children:"Network Triage & Reconnaissance"})]}),a.jsxs("div",{className:"bg-light-surface dark:bg-dark-surface border border-light-border dark:border-dark-border rounded-lg shadow-2xl p-8 animate-fadeIn",children:[a.jsx("h2",{className:"text-2xl font-semibold text-slate-900 dark:text-white mb-6 text-center",children:"Sign In"}),a.jsx(Xf,{})]}),a.jsx("div",{className:"text-center mt-6 text-slate-500 text-sm",children:a.jsx("p",{children:"Authorized personnel only"})})]})})},ta=[{value:"light",label:"Light",icon:a.jsx(Pl,{className:"h-4 w-4"})},{value:"dark",label:"Dark",icon:a.jsx(El,{className:"h-4 w-4"})},{value:"system",label:"System",icon:a.jsx(Ol,{className:"h-4 w-4"})}],Jf=({className:e=""})=>{const{theme:r,setTheme:n,resolvedTheme:s}=gc(),[i,o]=R.useState(!1),l=R.useRef(null),c=ta.find(f=>f.value===r)||ta[2];R.useEffect(()=>{const f=h=>{l.current&&!l.current.contains(h.target)&&o(!1)};return document.addEventListener("mousedown",f),()=>document.removeEventListener("mousedown",f)},[]),R.useEffect(()=>{const f=h=>{h.key==="Escape"&&o(!1)};if(i)return document.addEventListener("keydown",f),()=>document.removeEventListener("keydown",f)},[i]);const u=f=>{n(f),o(!1)},d=()=>r==="system"?s==="dark"?a.jsx(El,{className:"h-4 w-4"}):a.jsx(Pl,{className:"h-4 w-4"}):c.icon;return a.jsxs("div",{className:`relative ${e}`,ref:l,children:[a.jsxs("button",{type:"button",onClick:()=>o(!i),className:`flex items-center gap-2 px-3 py-2 text-sm rounded-lg transition-colors
          text-slate-400 hover:text-slate-100 dark:text-slate-400 dark:hover:text-slate-100
          hover:bg-slate-700 dark:hover:bg-dark-hover
          bg-transparent`,"aria-haspopup":"listbox","aria-expanded":i,"aria-label":"Select theme",children:[a.jsxs("span",{className:"flex items-center gap-2",children:[d(),a.jsx("span",{className:"hidden sm:inline",children:c.label})]}),a.jsx(hr,{className:`h-3 w-3 transition-transform ${i?"rotate-180":""}`})]}),i&&a.jsx("div",{className:`absolute right-0 mt-2 w-36 rounded-lg shadow-lg z-50
            bg-white dark:bg-dark-surface
            border border-slate-200 dark:border-dark-border
            animate-fade-in`,role:"listbox","aria-label":"Theme options",children:a.jsx("div",{className:"py-1",children:ta.map(f=>a.jsxs("button",{type:"button",role:"option","aria-selected":r===f.value,onClick:()=>u(f.value),className:`w-full flex items-center gap-3 px-4 py-2 text-sm transition-colors
                  ${r===f.value?"bg-primary/10 text-primary dark:text-primary-light":"text-slate-700 dark:text-slate-300 hover:bg-slate-100 dark:hover:bg-dark-hover"}`,children:[f.icon,a.jsx("span",{children:f.label}),r===f.value&&a.jsx("span",{className:"ml-auto text-primary dark:text-primary-light",children:a.jsx("svg",{className:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor",children:a.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})})]},f.value))})})]})},Zf=()=>{const{user:e,logout:r}=Ja(),n=Sr(i=>i.isAdmin),s=nd();return a.jsx("header",{className:"bg-light-surface dark:bg-dark-surface border-b border-light-border dark:border-dark-border shadow-lg",children:a.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:a.jsxs("div",{className:"flex items-center justify-between h-16",children:[a.jsxs("div",{className:"flex items-center space-x-6",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:"flex items-center justify-center w-10 h-10 bg-primary rounded-lg",children:a.jsx(ke,{className:"h-6 w-6 text-white"})}),a.jsxs("div",{children:[a.jsx("h1",{className:"text-xl font-bold text-slate-900 dark:text-white",children:"HeroForge"}),a.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:"Network Triage Dashboard"})]})]}),e&&a.jsxs("nav",{className:"flex items-center space-x-1",children:[a.jsxs(Ke,{to:"/crm",className:`flex items-center gap-2 px-3 py-2 rounded-lg text-sm transition-colors ${s.pathname.startsWith("/crm")?"bg-primary/10 text-primary font-medium":"text-slate-600 dark:text-slate-400 hover:text-slate-900 dark:hover:text-white hover:bg-light-hover dark:hover:bg-dark-hover"}`,children:[a.jsx(Rl,{className:"h-4 w-4"}),"CRM"]}),a.jsxs(Ke,{to:"/dashboard",className:`flex items-center gap-2 px-3 py-2 rounded-lg text-sm transition-colors ${s.pathname.startsWith("/dashboard")?"bg-primary/10 text-primary font-medium":"text-slate-600 dark:text-slate-400 hover:text-slate-900 dark:hover:text-white hover:bg-light-hover dark:hover:bg-dark-hover"}`,children:[a.jsx(Tl,{className:"h-4 w-4"}),"Scans"]}),a.jsxs(Ke,{to:"/compare",className:`flex items-center gap-2 px-3 py-2 rounded-lg text-sm transition-colors ${s.pathname==="/compare"?"bg-primary/10 text-primary font-medium":"text-slate-600 dark:text-slate-400 hover:text-slate-900 dark:hover:text-white hover:bg-light-hover dark:hover:bg-dark-hover"}`,children:[a.jsx(ld,{className:"h-4 w-4"}),"Compare"]}),a.jsxs(Ke,{to:"/assets",className:`flex items-center gap-2 px-3 py-2 rounded-lg text-sm transition-colors ${s.pathname.startsWith("/assets")?"bg-primary/10 text-primary font-medium":"text-slate-600 dark:text-slate-400 hover:text-slate-900 dark:hover:text-white hover:bg-light-hover dark:hover:bg-dark-hover"}`,children:[a.jsx(jt,{className:"h-4 w-4"}),"Assets"]}),a.jsxs(Ke,{to:"/webapp-scan",className:`flex items-center gap-2 px-3 py-2 rounded-lg text-sm transition-colors ${s.pathname.startsWith("/webapp-scan")?"bg-primary/10 text-primary font-medium":"text-slate-600 dark:text-slate-400 hover:text-slate-900 dark:hover:text-white hover:bg-light-hover dark:hover:bg-dark-hover"}`,children:[a.jsx(or,{className:"h-4 w-4"}),"Web Scan"]}),a.jsxs(Ke,{to:"/dns-tools",className:`flex items-center gap-2 px-3 py-2 rounded-lg text-sm transition-colors ${s.pathname.startsWith("/dns-tools")?"bg-primary/10 text-primary font-medium":"text-slate-600 dark:text-slate-400 hover:text-slate-900 dark:hover:text-white hover:bg-light-hover dark:hover:bg-dark-hover"}`,children:[a.jsx(ds,{className:"h-4 w-4"}),"DNS Tools"]}),a.jsxs(Ke,{to:"/api-security",className:`flex items-center gap-2 px-3 py-2 rounded-lg text-sm transition-colors ${s.pathname.startsWith("/api-security")?"bg-primary/10 text-primary font-medium":"text-slate-600 dark:text-slate-400 hover:text-slate-900 dark:hover:text-white hover:bg-light-hover dark:hover:bg-dark-hover"}`,children:[a.jsx(Zn,{className:"h-4 w-4"}),"API Sec"]}),a.jsxs(Ke,{to:"/compliance",className:`flex items-center gap-2 px-3 py-2 rounded-lg text-sm transition-colors ${s.pathname==="/compliance"?"bg-primary/10 text-primary font-medium":"text-slate-600 dark:text-slate-400 hover:text-slate-900 dark:hover:text-white hover:bg-light-hover dark:hover:bg-dark-hover"}`,children:[a.jsx(cd,{className:"h-4 w-4"}),"Compliance"]}),a.jsxs(Ke,{to:"/manual-assessments",className:`flex items-center gap-2 px-3 py-2 rounded-lg text-sm transition-colors ${s.pathname.startsWith("/manual-assessments")?"bg-primary/10 text-primary font-medium":"text-slate-600 dark:text-slate-400 hover:text-slate-900 dark:hover:text-white hover:bg-light-hover dark:hover:bg-dark-hover"}`,children:[a.jsx(qa,{className:"h-4 w-4"}),"Assessments"]}),a.jsxs(Ke,{to:"/methodology",className:`flex items-center gap-2 px-3 py-2 rounded-lg text-sm transition-colors ${s.pathname.startsWith("/methodology")?"bg-primary/10 text-primary font-medium":"text-slate-600 dark:text-slate-400 hover:text-slate-900 dark:hover:text-white hover:bg-light-hover dark:hover:bg-dark-hover"}`,children:[a.jsx(ud,{className:"h-4 w-4"}),"Methodology"]}),a.jsxs(Ke,{to:"/executive-dashboard",className:`flex items-center gap-2 px-3 py-2 rounded-lg text-sm transition-colors ${s.pathname==="/executive-dashboard"?"bg-primary/10 text-primary font-medium":"text-slate-600 dark:text-slate-400 hover:text-slate-900 dark:hover:text-white hover:bg-light-hover dark:hover:bg-dark-hover"}`,children:[a.jsx(Wa,{className:"h-4 w-4"}),"Executive"]}),a.jsxs(Ke,{to:"/settings",className:`flex items-center gap-2 px-3 py-2 rounded-lg text-sm transition-colors ${s.pathname.startsWith("/settings")?"bg-primary/10 text-primary font-medium":"text-slate-600 dark:text-slate-400 hover:text-slate-900 dark:hover:text-white hover:bg-light-hover dark:hover:bg-dark-hover"}`,children:[a.jsx(Al,{className:"h-4 w-4"}),"Settings"]}),n()&&a.jsxs(Ke,{to:"/admin",className:`flex items-center gap-2 px-3 py-2 rounded-lg text-sm transition-colors ${s.pathname.startsWith("/admin")?"bg-primary/10 text-primary font-medium":"text-slate-600 dark:text-slate-400 hover:text-slate-900 dark:hover:text-white hover:bg-light-hover dark:hover:bg-dark-hover"}`,children:[a.jsx(dd,{className:"h-4 w-4"}),"Admin Console"]})]})]}),a.jsxs("div",{className:"flex items-center space-x-4",children:[e&&a.jsxs("div",{className:"flex items-center space-x-3 text-sm",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(Cl,{className:"h-5 w-5 text-slate-600 dark:text-slate-400"}),a.jsx("span",{className:"text-slate-700 dark:text-slate-300",children:e.username})]}),e.roles&&e.roles.length>0&&a.jsx("div",{className:"flex gap-1",children:e.roles.map(i=>a.jsx("span",{className:"inline-flex items-center px-2 py-1 text-xs font-medium rounded border bg-slate-500/20 text-slate-700 dark:text-slate-300 border-slate-500/30 capitalize",children:i},i))})]}),a.jsx(Jf,{}),a.jsxs(ze,{variant:"ghost",size:"sm",onClick:r,className:"text-slate-600 dark:text-slate-400 hover:text-slate-900 dark:hover:text-white",children:[a.jsx(hd,{className:"h-4 w-4 mr-2"}),"Logout"]})]})]})})})},Qf=({children:e})=>a.jsxs("div",{className:"min-h-screen bg-light-bg dark:bg-dark-bg transition-colors",children:[a.jsx(Zf,{}),a.jsx("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:e})]}),xr=({id:e,label:r,checked:n,onChange:s,className:i="",disabled:o=!1})=>a.jsxs("label",{className:`inline-flex items-center ${o?"opacity-50 cursor-not-allowed":"cursor-pointer"} ${i}`,children:[a.jsxs("div",{className:"relative",children:[a.jsx("input",{id:e,type:"checkbox",checked:n,onChange:l=>s(l.target.checked),disabled:o,className:"sr-only"}),a.jsx("div",{className:`
            w-5 h-5 border-2 rounded transition-all
            ${n?"bg-primary border-primary":"bg-light-surface dark:bg-dark-surface border-light-border dark:border-dark-border hover:border-primary"}
          `,children:n&&a.jsx(Dl,{className:"h-full w-full text-white p-0.5"})})]}),r&&a.jsx("span",{className:"ml-2 text-sm text-slate-700 dark:text-slate-300",children:r})]}),fe=({children:e,variant:r="default",className:n="",onClick:s})=>{const i="bg-dark-surface border border-dark-border rounded-lg p-4 shadow-lg",o={default:"",interactive:"cursor-pointer hover:border-primary hover:shadow-xl transition-all duration-200"};return a.jsx("div",{className:`${i} ${o[r]} ${n}`,onClick:s,children:e})},em=({selectedTagIds:e,onChange:r,existingTags:n,onTagsChange:s})=>{const[i,o]=R.useState(!1),[l,c]=R.useState(""),[u,d]=R.useState([]),[f,h]=R.useState(!1),[x,w]=R.useState(""),[v,j]=R.useState("#06b6d4"),[b,p]=R.useState(!1),m=R.useRef(null),_=["#06b6d4","#8b5cf6","#f59e0b","#10b981","#ef4444","#ec4899","#3b82f6","#84cc16"];R.useEffect(()=>{g()},[]),R.useEffect(()=>{const O=A=>{m.current&&!m.current.contains(A.target)&&(o(!1),h(!1))};return document.addEventListener("mousedown",O),()=>document.removeEventListener("mousedown",O)},[]);const g=async()=>{try{const O=await ot.getSuggestions();d(O.data)}catch(O){console.error("Failed to load tag suggestions:",O)}},y=n.filter(O=>e.includes(O.id)),S=n.filter(O=>!e.includes(O.id)&&O.name.toLowerCase().includes(l.toLowerCase())),N=u.reduce((O,A)=>(O[A.category]||(O[A.category]=[]),!n.some(T=>T.name.toLowerCase()===A.name.toLowerCase())&&A.name.toLowerCase().includes(l.toLowerCase())&&O[A.category].push(A),O),{}),k=O=>{e.includes(O)?r(e.filter(A=>A!==O)):r([...e,O])},C=async O=>{p(!0);try{const M=(await ot.create({name:O.name,color:O.color})).data;s&&s([...n,M]),r([...e,M.id]),c("")}catch(A){console.error("Failed to create tag:",A)}finally{p(!1)}},E=async()=>{if(x.trim()){p(!0);try{const A=(await ot.create({name:x.trim(),color:v})).data;s&&s([...n,A]),r([...e,A.id]),w(""),h(!1)}catch(O){console.error("Failed to create tag:",O)}finally{p(!1)}}};return a.jsxs("div",{className:"relative",ref:m,children:[a.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(bn,{className:"h-4 w-4 text-primary"}),"Tags (Optional)"]})}),a.jsxs("div",{className:"min-h-[42px] px-3 py-2 bg-dark-surface border border-dark-border rounded-lg cursor-pointer flex flex-wrap gap-2 items-center",onClick:()=>o(!i),children:[y.length>0?a.jsx(a.Fragment,{children:y.map(O=>a.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 rounded text-sm",style:{backgroundColor:O.color+"20",color:O.color},children:[O.name,a.jsx("button",{type:"button",onClick:A=>{A.stopPropagation(),k(O.id)},className:"hover:opacity-70",children:a.jsx(Lt,{className:"h-3 w-3"})})]},O.id))}):a.jsx("span",{className:"text-slate-500",children:"Click to add tags..."}),a.jsx(hr,{className:`h-4 w-4 text-slate-400 ml-auto transition-transform ${i?"rotate-180":""}`})]}),i&&a.jsxs("div",{className:"absolute z-50 mt-1 w-full bg-dark-bg border border-dark-border rounded-lg shadow-xl max-h-80 overflow-y-auto",children:[a.jsx("div",{className:"p-2 border-b border-dark-border",children:a.jsx("input",{type:"text",placeholder:"Search or create tags...",value:l,onChange:O=>c(O.target.value),className:"w-full px-3 py-1.5 bg-dark-surface border border-dark-border rounded text-sm text-white focus:outline-none focus:border-primary",autoFocus:!0})}),a.jsxs("div",{className:"p-2 space-y-3",children:[S.length>0&&a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-slate-500 uppercase tracking-wider mb-2",children:"Your Tags"}),a.jsx("div",{className:"flex flex-wrap gap-1.5",children:S.map(O=>a.jsxs("button",{type:"button",onClick:()=>k(O.id),className:"inline-flex items-center gap-1 px-2 py-1 rounded text-sm transition-opacity hover:opacity-80",style:{backgroundColor:O.color+"20",color:O.color},children:[a.jsx(_r,{className:"h-3 w-3"}),O.name]},O.id))})]}),Object.entries(N).map(([O,A])=>A.length>0&&a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-slate-500 uppercase tracking-wider mb-2",children:O}),a.jsx("div",{className:"flex flex-wrap gap-1.5",children:A.map(M=>a.jsxs("button",{type:"button",onClick:()=>C(M),disabled:b,className:"inline-flex items-center gap-1 px-2 py-1 rounded text-sm transition-opacity hover:opacity-80 disabled:opacity-50",style:{backgroundColor:M.color+"15",color:M.color,border:`1px dashed ${M.color}40`},children:[a.jsx(_r,{className:"h-3 w-3"}),M.name]},M.name))})]},O)),f?a.jsxs("div",{className:"space-y-2 p-2 bg-dark-surface rounded-lg",children:[a.jsx("input",{type:"text",placeholder:"Tag name",value:x,onChange:O=>w(O.target.value),className:"w-full px-3 py-1.5 bg-dark-bg border border-dark-border rounded text-sm text-white focus:outline-none focus:border-primary",autoFocus:!0}),a.jsx("div",{className:"flex gap-1",children:_.map(O=>a.jsx("button",{type:"button",onClick:()=>j(O),className:`w-6 h-6 rounded-full border-2 ${v===O?"border-white":"border-transparent"}`,style:{backgroundColor:O}},O))}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("button",{type:"button",onClick:E,disabled:!x.trim()||b,className:"flex-1 px-3 py-1.5 bg-primary text-white rounded text-sm hover:bg-primary/80 disabled:opacity-50",children:"Create"}),a.jsx("button",{type:"button",onClick:()=>{h(!1),w("")},className:"px-3 py-1.5 bg-dark-bg border border-dark-border text-slate-400 rounded text-sm hover:text-white",children:"Cancel"})]})]}):a.jsxs("button",{type:"button",onClick:()=>{h(!0),l&&w(l)},className:"w-full px-3 py-2 text-sm text-slate-400 border border-dashed border-dark-border rounded hover:border-primary hover:text-primary transition-colors flex items-center justify-center gap-2",children:[a.jsx(_r,{className:"h-4 w-4"}),"Create new tag",l?`: "${l}"`:""]})]})]})]})},ct=jl(e=>({scans:[],activeScan:null,results:new Map,liveUpdates:new Map,setScans:r=>e({scans:r}),addScan:r=>e(n=>({scans:[r,...n.scans]})),setActiveScan:r=>e({activeScan:r}),updateScanStatus:(r,n)=>e(s=>{var o;const i=n;return{scans:s.scans.map(l=>l.id===r?{...l,status:i}:l),activeScan:((o=s.activeScan)==null?void 0:o.id)===r?{...s.activeScan,status:i}:s.activeScan}}),setResults:(r,n)=>e(s=>{const i=new Map(s.results);return i.set(r,n),{results:i}}),addHostToResults:(r,n)=>e(s=>{const i=new Map(s.results),o=i.get(r)||[],l=o.findIndex(c=>c.target.ip===n.target.ip);return l>=0?o[l]=n:o.push(n),i.set(r,o),{results:i}}),updateHostInResults:(r,n,s)=>e(i=>{const o=new Map(i.results),c=(o.get(r)||[]).map(u=>u.target.ip===n?{...u,...s}:u);return o.set(r,c),{results:o}}),addLiveUpdate:(r,n)=>e(s=>{const i=new Map(s.liveUpdates),o=i.get(r)||[];return o.push(n),i.set(r,o),{liveUpdates:i}}),clearLiveUpdates:r=>e(n=>{const s=new Map(n.liveUpdates);return s.delete(r),{liveUpdates:s}})})),tm=[{id:"tcp_connect",label:"TCP Connect",description:"Standard TCP scan (most reliable)"},{id:"udp",label:"UDP Only",description:"UDP port scanning (requires root)"},{id:"comprehensive",label:"Comprehensive",description:"TCP + UDP scanning (thorough)"},{id:"syn",label:"SYN Stealth",description:"Half-open TCP scan (requires root)"}],rm=[{id:"http",label:"HTTP",category:"Web"},{id:"https",label:"HTTPS",category:"Web"},{id:"dns",label:"DNS",category:"Network"},{id:"smb",label:"SMB",category:"Network"},{id:"ftp",label:"FTP",category:"Network"},{id:"ssh",label:"SSH",category:"Network"},{id:"smtp",label:"SMTP",category:"Network"},{id:"ldap",label:"LDAP",category:"Network"},{id:"rdp",label:"RDP",category:"Remote"},{id:"vnc",label:"VNC",category:"Remote"},{id:"telnet",label:"Telnet",category:"Remote"},{id:"snmp",label:"SNMP",category:"Network"},{id:"mysql",label:"MySQL",category:"Database"},{id:"postgresql",label:"PostgreSQL",category:"Database"},{id:"mongodb",label:"MongoDB",category:"Database"},{id:"redis",label:"Redis",category:"Database"},{id:"elasticsearch",label:"Elasticsearch",category:"Database"}],nm=()=>{const[e]=sd(),[r,n]=R.useState(""),[s,i]=R.useState(""),[o,l]=R.useState(1),[c,u]=R.useState(1e3),[d,f]=R.useState(100),[h,x]=R.useState("tcp_connect"),[w,v]=R.useState(53),[j,b]=R.useState(500),[p,m]=R.useState(2),[_,g]=R.useState(!0),[y,S]=R.useState(!0),[N,k]=R.useState(!1),[C,E]=R.useState(!1),[O,A]=R.useState("light"),[M,T]=R.useState([]),[H,z]=R.useState(!1),[B,Y]=R.useState([]),[U,G]=R.useState(!1),[Z,X]=R.useState(""),[oe,le]=R.useState(""),[me,de]=R.useState([]),[ge,J]=R.useState(null),[W,te]=R.useState([]),[ne,ee]=R.useState(""),[he,Ce]=R.useState([]),[Te,D]=R.useState(""),[L,F]=R.useState([]),[V,re]=R.useState(""),[ae,ie]=R.useState([]),[ce,Ne]=R.useState([]),[Ae,Ue]=R.useState([]),[qe,ft]=R.useState([]),[St,fr]=R.useState(!1),{addScan:Mr}=ct(),Jt=h==="udp"||h==="comprehensive";R.useEffect(()=>{kt(),Iu(),Hu(),Uu(),qu(),Wu()},[]),R.useEffect(()=>{const I=e.get("customer");I&&he.length>0&&he.find(Ve=>Ve.id===I)&&D(I)},[e,he]),R.useEffect(()=>{Te?Bu(Te):(F([]),re(""))},[Te]);const kt=async()=>{try{const I=await Uf.getAll();Y(I.data)}catch(I){console.error("Failed to load target groups:",I)}},Iu=async()=>{try{const I=await vt.getPresets();de(I.data)}catch(I){console.error("Failed to load scan presets:",I)}},Hu=async()=>{try{const I=await Bf.getConfigs();te(I.data);const ye=I.data.find(Ve=>Ve.is_default);ye&&ee(ye.id)}catch(I){console.error("Failed to load VPN configs:",I)}},Uu=async()=>{try{const I=await Yi.customers.getAll("active");Ce(I.data)}catch(I){console.error("Failed to load customers:",I)}},qu=async()=>{try{const I=await ot.getAll();ie(I.data)}catch(I){console.error("Failed to load tags:",I)}},Wu=async()=>{try{const I=await Gf.getAll();Ue(I.data)}catch(I){console.error("Failed to load exclusions:",I)}},Bu=async I=>{try{const Ve=(await Yi.engagements.getByCustomer(I)).data.filter(Zt=>Zt.status==="planning"||Zt.status==="in_progress");F(Ve)}catch(ye){console.error("Failed to load engagements:",ye),F([])}},Vu=I=>{const ye=JSON.parse(I.targets||"[]");i(ye.join(", "))},Gu=I=>{J(I.id),I.id==="webapp"?(l(80),u(8443)):(l(I.port_range[0]),u(I.port_range[1])),f(I.threads),x(I.scan_type),g(I.enable_os_detection),S(I.enable_service_detection),k(I.enable_vuln_scan),E(I.enable_enumeration),I.enum_depth&&A(I.enum_depth),I.udp_port_range&&(v(I.udp_port_range[0]),b(I.udp_port_range[1])),I.udp_retries&&m(I.udp_retries),I.enum_services?T(I.enum_services):T([]),Q.success(`Applied "${I.name}" preset`)},Yu=I=>{switch(I){case"Zap":return Zn;case"Radar":return yd;case"Globe":return or;case"EyeOff":return xd;default:return Zn}},Xu=I=>{const ye=I.trim(),Ve=/^(\d{1,3}\.){3}\d{1,3}$/,Zt=/^(\d{1,3}\.){3}\d{1,3}\/\d{1,2}$/,$r=/^(\d{1,3}\.){3}\d{1,3}-(\d{1,3}\.){3}\d{1,3}$/,Dn=/^[a-zA-Z0-9]([a-zA-Z0-9-]*[a-zA-Z0-9])?(\.[a-zA-Z0-9]([a-zA-Z0-9-]*[a-zA-Z0-9])?)*$/;return Ve.test(ye)||Zt.test(ye)||$r.test(ye)||Dn.test(ye)},bi=I=>I.split(/[,\n]/).map(ye=>ye.trim()).filter(ye=>ye.length>0),Ku=I=>{const ye=bi(I);return ye.length===0?!1:ye.every(Xu)},Ju=async I=>{var Ve,Zt;if(I.preventDefault(),!r.trim()){Q.error("Please enter a scan name");return}if(!s.trim()){Q.error("Please enter a target");return}if(!Ku(s)){Q.error("Invalid target format. Use IP (192.168.1.1), CIDR (192.168.1.0/24), range, or hostname. Separate multiple targets with commas.");return}if(o<1||c>65535||o>c){Q.error("Invalid port range");return}const ye=bi(s);z(!0);try{const $r=await vt.create({name:r.trim(),targets:ye,port_range:[o,c],threads:d,scan_type:h,udp_port_range:Jt?[w,j]:void 0,udp_retries:Jt?p:void 0,enable_os_detection:_,enable_service_detection:y,enable_vuln_scan:N,enable_enumeration:C,enum_depth:C?O:void 0,enum_services:C&&M.length>0?M:void 0,vpn_config_id:ne||void 0,customer_id:Te||void 0,engagement_id:V||void 0,tag_ids:ce.length>0?ce:void 0,exclusion_ids:qe.length>0?qe:void 0,skip_global_exclusions:St||void 0});if(Mr($r.data),Q.success("Scan started successfully!"),U&&Z.trim())try{await qf.create({name:Z.trim(),description:oe.trim()||void 0,config:{targets:ye,port_range:[o,c],threads:d,scan_type:h,udp_port_range:Jt?[w,j]:void 0,udp_retries:Jt?p:void 0,enable_os_detection:_,enable_service_detection:y,enable_vuln_scan:N,enable_enumeration:C,enum_depth:C?O:void 0,enum_services:C&&M.length>0?M:void 0}}),Q.success("Template saved!")}catch(Dn){console.error("Failed to save template:",Dn),Q.warning("Scan started but template save failed")}n(""),i(""),l(1),u(1e3),f(100),x("tcp_connect"),v(53),b(500),m(2),E(!1),A("light"),T([]),G(!1),X(""),le(""),D(""),re(""),Ne([])}catch($r){const Qu=((Zt=(Ve=$r.response)==null?void 0:Ve.data)==null?void 0:Zt.error)||"Failed to start scan";Q.error(Qu)}finally{z(!1)}},Zu=I=>{T(ye=>ye.includes(I)?ye.filter(Ve=>Ve!==I):[...ye,I])};return a.jsxs(fe,{children:[a.jsx("h3",{className:"text-xl font-semibold text-white mb-4",children:"Create New Scan"}),a.jsxs("form",{onSubmit:Ju,className:"space-y-4",children:[me.length>0&&a.jsxs("div",{className:"space-y-3 pb-4 border-b border-dark-border",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(Zn,{className:"h-5 w-5 text-yellow-400"}),a.jsx("p",{className:"text-sm font-medium text-slate-300",children:"Quick Presets"})]}),a.jsx("div",{className:"grid grid-cols-2 gap-2",children:me.map(I=>{const ye=Yu(I.icon);return a.jsxs("button",{type:"button",onClick:()=>Gu(I),className:`px-3 py-3 text-sm rounded-lg border transition-all text-left ${ge===I.id?"bg-gradient-to-br from-yellow-600/20 to-orange-600/20 border-yellow-500 text-white shadow-lg":"bg-dark-surface border-dark-border text-slate-400 hover:border-slate-500 hover:bg-dark-surface/50"}`,children:[a.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[a.jsx(ye,{className:`h-4 w-4 ${ge===I.id?"text-yellow-400":"text-slate-500"}`}),a.jsx("div",{className:"font-medium",children:I.name})]}),a.jsx("div",{className:"text-xs opacity-70 line-clamp-2",children:I.description})]},I.id)})}),a.jsx("p",{className:"text-xs text-slate-500 italic",children:"Select a preset to auto-configure scan settings, or customize manually below."})]}),a.jsx(Ie,{label:"Scan Name",type:"text",placeholder:"Production Network Scan",value:r,onChange:I=>n(I.target.value),required:!0}),a.jsx(em,{selectedTagIds:ce,onChange:Ne,existingTags:ae,onTagsChange:ie}),a.jsxs("div",{className:"space-y-3 pb-4 border-b border-dark-border",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(Rl,{className:"h-5 w-5 text-indigo-400"}),a.jsx("p",{className:"text-sm font-medium text-slate-300",children:"Customer Association (Optional)"})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-400 mb-2",children:"Customer"}),a.jsxs("select",{value:Te,onChange:I=>{D(I.target.value),re("")},className:"w-full px-3 py-2 bg-dark-surface border border-dark-border rounded-lg text-white focus:ring-2 focus:ring-indigo-500 focus:border-transparent",children:[a.jsx("option",{value:"",children:"No customer"}),he.map(I=>a.jsx("option",{value:I.id,children:I.name},I.id))]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-400 mb-2",children:"Engagement"}),a.jsxs("select",{value:V,onChange:I=>re(I.target.value),disabled:!Te||L.length===0,className:"w-full px-3 py-2 bg-dark-surface border border-dark-border rounded-lg text-white focus:ring-2 focus:ring-indigo-500 focus:border-transparent disabled:opacity-50 disabled:cursor-not-allowed",children:[a.jsx("option",{value:"",children:Te?L.length===0?"No active engagements":"No engagement":"Select customer first"}),L.map(I=>a.jsxs("option",{value:I.id,children:[I.name," (",I.engagement_type.replace("_"," "),")"]},I.id))]})]})]}),a.jsx("p",{className:"text-xs text-slate-500",children:"Link this scan to a customer and engagement for tracking and reporting."})]}),Ae.length>0&&a.jsxs("div",{className:"space-y-3 pb-4 border-b border-dark-border",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(fd,{className:"h-5 w-5 text-orange-400"}),a.jsx("p",{className:"text-sm font-medium text-slate-300",children:"Exclusions (Optional)"})]}),Ae.filter(I=>I.is_global).length>0&&a.jsxs("div",{className:"flex items-center justify-between p-3 bg-green-500/10 border border-green-500/20 rounded-lg",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(or,{className:"h-4 w-4 text-green-400"}),a.jsxs("span",{className:"text-sm text-green-400",children:[Ae.filter(I=>I.is_global).length," global exclusion(s) will be applied"]})]}),a.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[a.jsx("input",{type:"checkbox",checked:St,onChange:I=>fr(I.target.checked),className:"w-4 h-4 rounded bg-dark-bg border-dark-border text-orange-500 focus:ring-orange-500 focus:ring-offset-dark-bg"}),a.jsx("span",{className:"text-xs text-slate-400",children:"Skip global exclusions"})]})]}),Ae.filter(I=>!I.is_global).length>0&&a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-400 mb-2",children:"Additional exclusions for this scan"}),a.jsx("div",{className:"space-y-2 max-h-40 overflow-y-auto",children:Ae.filter(I=>!I.is_global).map(I=>a.jsxs("label",{className:"flex items-center gap-3 p-2 bg-dark-surface rounded-lg cursor-pointer hover:bg-dark-border/30 transition-colors",children:[a.jsx("input",{type:"checkbox",checked:qe.includes(I.id),onChange:ye=>{ye.target.checked?ft([...qe,I.id]):ft(qe.filter(Ve=>Ve!==I.id))},className:"w-4 h-4 rounded bg-dark-bg border-dark-border text-primary focus:ring-primary focus:ring-offset-dark-bg"}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-sm font-medium text-white",children:I.name}),a.jsx("span",{className:"text-xs px-1.5 py-0.5 rounded bg-orange-500/20 text-orange-400",children:I.exclusion_type.replace("_"," ")})]}),a.jsx("code",{className:"text-xs text-slate-400 font-mono",children:I.value})]})]},I.id))})]}),a.jsx("p",{className:"text-xs text-slate-500",children:"Exclusions prevent scanning specific hosts or ports. Configure them in Settings."})]}),a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center justify-between mb-1",children:[a.jsx("label",{className:"block text-sm font-medium text-slate-300",children:"Target"}),B.length>0&&a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(md,{className:"h-3 w-3 text-slate-500"}),a.jsx("span",{className:"text-xs text-slate-500",children:"Use group:"}),B.slice(0,3).map(I=>a.jsx("button",{type:"button",onClick:()=>Vu(I),className:"px-2 py-0.5 text-xs rounded border border-dark-border text-slate-400 hover:text-white hover:border-primary transition-colors",style:{borderLeftColor:I.color,borderLeftWidth:3},children:I.name},I.id)),B.length>3&&a.jsxs("span",{className:"text-xs text-slate-500",children:["+",B.length-3]})]})]}),a.jsx(Ie,{type:"text",placeholder:"192.168.1.0/24, 10.0.0.1-10.0.0.100, or hostname",value:s,onChange:I=>i(I.target.value),icon:a.jsx(Ml,{className:"h-5 w-5"}),required:!0})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsx(Ie,{label:"Start Port",type:"number",min:1,max:65535,value:o,onChange:I=>{l(Number(I.target.value)),J(null)}}),a.jsx(Ie,{label:"End Port",type:"number",min:1,max:65535,value:c,onChange:I=>{u(Number(I.target.value)),J(null)}})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:["Threads: ",d]}),a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx(pd,{className:"h-5 w-5 text-slate-400"}),a.jsx("input",{type:"range",min:1,max:100,value:d,onChange:I=>{f(Number(I.target.value)),J(null)},className:"w-full h-2 bg-dark-surface rounded-lg appearance-none cursor-pointer slider"})]})]}),a.jsxs("div",{className:"space-y-3 border-t border-dark-border pt-4",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(gd,{className:"h-5 w-5 text-primary"}),a.jsx("p",{className:"text-sm font-medium text-slate-300",children:"Scan Type"})]}),a.jsx("div",{className:"grid grid-cols-2 gap-2",children:tm.map(I=>a.jsxs("button",{type:"button",onClick:()=>{x(I.id),J(null)},className:`px-3 py-2 text-sm rounded-lg border transition-colors text-left ${h===I.id?"bg-primary/20 border-primary text-white":"bg-dark-surface border-dark-border text-slate-400 hover:border-slate-500"}`,children:[a.jsx("div",{className:"font-medium",children:I.label}),a.jsx("div",{className:"text-xs opacity-70",children:I.description})]},I.id))}),Jt&&a.jsxs("div",{className:"ml-4 space-y-3 animate-fadeIn",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(Es,{className:"h-4 w-4 text-cyan-400"}),a.jsx("p",{className:"text-sm font-medium text-slate-400",children:"UDP Options"})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsx(Ie,{label:"UDP Start Port",type:"number",min:1,max:65535,value:w,onChange:I=>v(Number(I.target.value))}),a.jsx(Ie,{label:"UDP End Port",type:"number",min:1,max:65535,value:j,onChange:I=>b(Number(I.target.value))})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-slate-400 mb-2",children:["UDP Retries: ",p]}),a.jsx("input",{type:"range",min:1,max:5,value:p,onChange:I=>m(Number(I.target.value)),className:"w-full h-2 bg-dark-surface rounded-lg appearance-none cursor-pointer slider"})]})]})]}),W.length>0&&a.jsxs("div",{className:"space-y-3 border-t border-dark-border pt-4",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(ke,{className:"h-5 w-5 text-green-400"}),a.jsx("p",{className:"text-sm font-medium text-slate-300",children:"VPN Connection"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-400 mb-2",children:"Route scan through VPN (optional)"}),a.jsxs("select",{value:ne,onChange:I=>ee(I.target.value),className:"w-full px-3 py-2 bg-dark-surface border border-dark-border rounded-lg text-white focus:ring-2 focus:ring-green-500 focus:border-transparent",children:[a.jsx("option",{value:"",children:"No VPN - Direct connection"}),W.map(I=>a.jsxs("option",{value:I.id,children:[I.name," (",I.vpn_type.toUpperCase(),")",I.is_default?" (Default)":""]},I.id))]}),a.jsx("p",{className:"mt-1 text-xs text-slate-500",children:"VPN connects before scan and disconnects when complete. Configure VPNs in Settings."})]})]}),a.jsxs("div",{className:"space-y-2 border-t border-dark-border pt-4",children:[a.jsx("p",{className:"text-sm font-medium text-slate-300 mb-2",children:"Scan Options"}),a.jsx(xr,{label:"Enable OS Detection",checked:_,onChange:g}),a.jsx(xr,{label:"Enable Service Detection",checked:y,onChange:S}),a.jsx(xr,{label:"Enable Vulnerability Scanning",checked:N,onChange:k})]}),a.jsxs("div",{className:"space-y-3 border-t border-dark-border pt-4",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(Os,{className:"h-5 w-5 text-cyan-400"}),a.jsx("p",{className:"text-sm font-medium text-slate-300",children:"Service Enumeration"})]}),a.jsx(xr,{label:"Enable Deep Service Enumeration",checked:C,onChange:E}),C&&a.jsxs("div",{className:"ml-4 space-y-4 animate-fadeIn",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-400 mb-2",children:"Enumeration Depth"}),a.jsxs("select",{value:O,onChange:I=>A(I.target.value),className:"w-full px-3 py-2 bg-dark-surface border border-dark-border rounded-lg text-white focus:ring-2 focus:ring-cyan-500 focus:border-transparent",children:[a.jsx("option",{value:"passive",children:"Passive - Banner analysis only"}),a.jsx("option",{value:"light",children:"Light - Common checks (default)"}),a.jsx("option",{value:"aggressive",children:"Aggressive - Full enumeration"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-400 mb-2",children:"Services to Enumerate (leave empty for all detected)"}),a.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-2",children:rm.map(I=>a.jsx("button",{type:"button",onClick:()=>Zu(I.id),className:`px-3 py-1.5 text-sm rounded-md border transition-colors ${M.includes(I.id)?"bg-cyan-600 border-cyan-500 text-white":"bg-dark-surface border-dark-border text-slate-400 hover:border-slate-500"}`,children:I.label},I.id))}),M.length>0&&a.jsxs("p",{className:"mt-2 text-xs text-slate-500",children:["Selected: ",M.join(", ")]})]})]})]}),a.jsxs("div",{className:"space-y-3 border-t border-dark-border pt-4",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx($l,{className:"h-5 w-5 text-purple-400"}),a.jsx("p",{className:"text-sm font-medium text-slate-300",children:"Save Configuration"})]}),a.jsx(xr,{label:"Save this scan configuration as a template",checked:U,onChange:G}),U&&a.jsxs("div",{className:"ml-4 space-y-3 animate-fadeIn",children:[a.jsx(Ie,{label:"Template Name",type:"text",placeholder:"Production Network Scan Template",value:Z,onChange:I=>X(I.target.value)}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-400 mb-1",children:"Template Description (Optional)"}),a.jsx("textarea",{value:oe,onChange:I=>le(I.target.value),className:"w-full bg-dark-surface border border-dark-border rounded-lg px-3 py-2 text-white focus:ring-2 focus:ring-purple-500 focus:border-transparent",rows:2,placeholder:"Quick template for scanning production servers"})]})]})]}),a.jsx(ze,{type:"submit",variant:"primary",size:"lg",loading:H,className:"w-full",children:"Start Scan"})]})]})},et=({children:e,variant:r="status",type:n="pending",className:s=""})=>{const i="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium",o={pending:"bg-status-pending/20 text-status-pending border border-status-pending/30",running:"bg-status-running/20 text-status-running border border-status-running/30",completed:"bg-status-completed/20 text-status-completed border border-status-completed/30",failed:"bg-status-failed/20 text-status-failed border border-status-failed/30"},l={critical:"bg-severity-critical/20 text-severity-critical border border-severity-critical/30",high:"bg-severity-high/20 text-severity-high border border-severity-high/30",medium:"bg-severity-medium/20 text-severity-medium border border-severity-medium/30",low:"bg-severity-low/20 text-severity-low border border-severity-low/30"},c={primary:"bg-blue-500/20 text-blue-400 border border-blue-500/30",success:"bg-green-500/20 text-green-400 border border-green-500/30",warning:"bg-yellow-500/20 text-yellow-400 border border-yellow-500/30",danger:"bg-red-500/20 text-red-400 border border-red-500/30"};if(r&&c[r])return a.jsx("span",{className:`${i} ${c[r]} ${s}`,children:e});const d=(r==="status"?o:l)[n]||o.pending;return a.jsx("span",{className:`${i} ${d} ${s}`,children:e})};function je(e){const r=Object.prototype.toString.call(e);return e instanceof Date||typeof e=="object"&&r==="[object Date]"?new e.constructor(+e):typeof e=="number"||r==="[object Number]"||typeof e=="string"||r==="[object String]"?new Date(e):new Date(NaN)}function Xt(e,r){return e instanceof Date?new e.constructor(r):new Date(r)}const xc=6048e5,sm=864e5,Fn=43200,Xi=1440;let am={};function On(){return am}function wn(e,r){var c,u,d,f;const n=On(),s=(r==null?void 0:r.weekStartsOn)??((u=(c=r==null?void 0:r.locale)==null?void 0:c.options)==null?void 0:u.weekStartsOn)??n.weekStartsOn??((f=(d=n.locale)==null?void 0:d.options)==null?void 0:f.weekStartsOn)??0,i=je(e),o=i.getDay(),l=(o<s?7:0)+o-s;return i.setDate(i.getDate()-l),i.setHours(0,0,0,0),i}function fs(e){return wn(e,{weekStartsOn:1})}function yc(e){const r=je(e),n=r.getFullYear(),s=Xt(e,0);s.setFullYear(n+1,0,4),s.setHours(0,0,0,0);const i=fs(s),o=Xt(e,0);o.setFullYear(n,0,4),o.setHours(0,0,0,0);const l=fs(o);return r.getTime()>=i.getTime()?n+1:r.getTime()>=l.getTime()?n:n-1}function Ki(e){const r=je(e);return r.setHours(0,0,0,0),r}function ms(e){const r=je(e),n=new Date(Date.UTC(r.getFullYear(),r.getMonth(),r.getDate(),r.getHours(),r.getMinutes(),r.getSeconds(),r.getMilliseconds()));return n.setUTCFullYear(r.getFullYear()),+e-+n}function im(e,r){const n=Ki(e),s=Ki(r),i=+n-ms(n),o=+s-ms(s);return Math.round((i-o)/sm)}function om(e){const r=yc(e),n=Xt(e,0);return n.setFullYear(r,0,4),n.setHours(0,0,0,0),fs(n)}function ss(e,r){const n=je(e),s=je(r),i=n.getTime()-s.getTime();return i<0?-1:i>0?1:i}function lm(e){return Xt(e,Date.now())}function cm(e){return e instanceof Date||typeof e=="object"&&Object.prototype.toString.call(e)==="[object Date]"}function um(e){if(!cm(e)&&typeof e!="number")return!1;const r=je(e);return!isNaN(Number(r))}function dm(e,r){const n=je(e),s=je(r),i=n.getFullYear()-s.getFullYear(),o=n.getMonth()-s.getMonth();return i*12+o}function hm(e){return r=>{const s=(e?Math[e]:Math.trunc)(r);return s===0?0:s}}function fm(e,r){return+je(e)-+je(r)}function mm(e){const r=je(e);return r.setHours(23,59,59,999),r}function pm(e){const r=je(e),n=r.getMonth();return r.setFullYear(r.getFullYear(),n+1,0),r.setHours(23,59,59,999),r}function gm(e){const r=je(e);return+mm(r)==+pm(r)}function xm(e,r){const n=je(e),s=je(r),i=ss(n,s),o=Math.abs(dm(n,s));let l;if(o<1)l=0;else{n.getMonth()===1&&n.getDate()>27&&n.setDate(30),n.setMonth(n.getMonth()-i*o);let c=ss(n,s)===-i;gm(je(e))&&o===1&&ss(e,s)===1&&(c=!1),l=i*(o-Number(c))}return l===0?0:l}function ym(e,r,n){const s=fm(e,r)/1e3;return hm(n==null?void 0:n.roundingMethod)(s)}function bm(e){const r=je(e),n=Xt(e,0);return n.setFullYear(r.getFullYear(),0,1),n.setHours(0,0,0,0),n}const vm={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},wm=(e,r,n)=>{let s;const i=vm[e];return typeof i=="string"?s=i:r===1?s=i.one:s=i.other.replace("{{count}}",r.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"in "+s:s+" ago":s};function ra(e){return(r={})=>{const n=r.width?String(r.width):e.defaultWidth;return e.formats[n]||e.formats[e.defaultWidth]}}const _m={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},jm={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},Nm={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},Sm={date:ra({formats:_m,defaultWidth:"full"}),time:ra({formats:jm,defaultWidth:"full"}),dateTime:ra({formats:Nm,defaultWidth:"full"})},km={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},Cm=(e,r,n,s)=>km[e];function Fr(e){return(r,n)=>{const s=n!=null&&n.context?String(n.context):"standalone";let i;if(s==="formatting"&&e.formattingValues){const l=e.defaultFormattingWidth||e.defaultWidth,c=n!=null&&n.width?String(n.width):l;i=e.formattingValues[c]||e.formattingValues[l]}else{const l=e.defaultWidth,c=n!=null&&n.width?String(n.width):e.defaultWidth;i=e.values[c]||e.values[l]}const o=e.argumentCallback?e.argumentCallback(r):r;return i[o]}}const Pm={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},Em={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},Om={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},Rm={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},Tm={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},Am={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},Dm=(e,r)=>{const n=Number(e),s=n%100;if(s>20||s<10)switch(s%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},Mm={ordinalNumber:Dm,era:Fr({values:Pm,defaultWidth:"wide"}),quarter:Fr({values:Em,defaultWidth:"wide",argumentCallback:e=>e-1}),month:Fr({values:Om,defaultWidth:"wide"}),day:Fr({values:Rm,defaultWidth:"wide"}),dayPeriod:Fr({values:Tm,defaultWidth:"wide",formattingValues:Am,defaultFormattingWidth:"wide"})};function Ir(e){return(r,n={})=>{const s=n.width,i=s&&e.matchPatterns[s]||e.matchPatterns[e.defaultMatchWidth],o=r.match(i);if(!o)return null;const l=o[0],c=s&&e.parsePatterns[s]||e.parsePatterns[e.defaultParseWidth],u=Array.isArray(c)?zm(c,h=>h.test(l)):$m(c,h=>h.test(l));let d;d=e.valueCallback?e.valueCallback(u):u,d=n.valueCallback?n.valueCallback(d):d;const f=r.slice(l.length);return{value:d,rest:f}}}function $m(e,r){for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&r(e[n]))return n}function zm(e,r){for(let n=0;n<e.length;n++)if(r(e[n]))return n}function Lm(e){return(r,n={})=>{const s=r.match(e.matchPattern);if(!s)return null;const i=s[0],o=r.match(e.parsePattern);if(!o)return null;let l=e.valueCallback?e.valueCallback(o[0]):o[0];l=n.valueCallback?n.valueCallback(l):l;const c=r.slice(i.length);return{value:l,rest:c}}}const Fm=/^(\d+)(th|st|nd|rd)?/i,Im=/\d+/i,Hm={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},Um={any:[/^b/i,/^(a|c)/i]},qm={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},Wm={any:[/1/i,/2/i,/3/i,/4/i]},Bm={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},Vm={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},Gm={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},Ym={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},Xm={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},Km={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},Jm={ordinalNumber:Lm({matchPattern:Fm,parsePattern:Im,valueCallback:e=>parseInt(e,10)}),era:Ir({matchPatterns:Hm,defaultMatchWidth:"wide",parsePatterns:Um,defaultParseWidth:"any"}),quarter:Ir({matchPatterns:qm,defaultMatchWidth:"wide",parsePatterns:Wm,defaultParseWidth:"any",valueCallback:e=>e+1}),month:Ir({matchPatterns:Bm,defaultMatchWidth:"wide",parsePatterns:Vm,defaultParseWidth:"any"}),day:Ir({matchPatterns:Gm,defaultMatchWidth:"wide",parsePatterns:Ym,defaultParseWidth:"any"}),dayPeriod:Ir({matchPatterns:Xm,defaultMatchWidth:"any",parsePatterns:Km,defaultParseWidth:"any"})},bc={code:"en-US",formatDistance:wm,formatLong:Sm,formatRelative:Cm,localize:Mm,match:Jm,options:{weekStartsOn:0,firstWeekContainsDate:1}};function Zm(e){const r=je(e);return im(r,bm(r))+1}function Qm(e){const r=je(e),n=+fs(r)-+om(r);return Math.round(n/xc)+1}function vc(e,r){var f,h,x,w;const n=je(e),s=n.getFullYear(),i=On(),o=(r==null?void 0:r.firstWeekContainsDate)??((h=(f=r==null?void 0:r.locale)==null?void 0:f.options)==null?void 0:h.firstWeekContainsDate)??i.firstWeekContainsDate??((w=(x=i.locale)==null?void 0:x.options)==null?void 0:w.firstWeekContainsDate)??1,l=Xt(e,0);l.setFullYear(s+1,0,o),l.setHours(0,0,0,0);const c=wn(l,r),u=Xt(e,0);u.setFullYear(s,0,o),u.setHours(0,0,0,0);const d=wn(u,r);return n.getTime()>=c.getTime()?s+1:n.getTime()>=d.getTime()?s:s-1}function ep(e,r){var c,u,d,f;const n=On(),s=(r==null?void 0:r.firstWeekContainsDate)??((u=(c=r==null?void 0:r.locale)==null?void 0:c.options)==null?void 0:u.firstWeekContainsDate)??n.firstWeekContainsDate??((f=(d=n.locale)==null?void 0:d.options)==null?void 0:f.firstWeekContainsDate)??1,i=vc(e,r),o=Xt(e,0);return o.setFullYear(i,0,s),o.setHours(0,0,0,0),wn(o,r)}function tp(e,r){const n=je(e),s=+wn(n,r)-+ep(n,r);return Math.round(s/xc)+1}function we(e,r){const n=e<0?"-":"",s=Math.abs(e).toString().padStart(r,"0");return n+s}const Ut={y(e,r){const n=e.getFullYear(),s=n>0?n:1-n;return we(r==="yy"?s%100:s,r.length)},M(e,r){const n=e.getMonth();return r==="M"?String(n+1):we(n+1,2)},d(e,r){return we(e.getDate(),r.length)},a(e,r){const n=e.getHours()/12>=1?"pm":"am";switch(r){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];case"aaaa":default:return n==="am"?"a.m.":"p.m."}},h(e,r){return we(e.getHours()%12||12,r.length)},H(e,r){return we(e.getHours(),r.length)},m(e,r){return we(e.getMinutes(),r.length)},s(e,r){return we(e.getSeconds(),r.length)},S(e,r){const n=r.length,s=e.getMilliseconds(),i=Math.trunc(s*Math.pow(10,n-3));return we(i,r.length)}},mr={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},Ji={G:function(e,r,n){const s=e.getFullYear()>0?1:0;switch(r){case"G":case"GG":case"GGG":return n.era(s,{width:"abbreviated"});case"GGGGG":return n.era(s,{width:"narrow"});case"GGGG":default:return n.era(s,{width:"wide"})}},y:function(e,r,n){if(r==="yo"){const s=e.getFullYear(),i=s>0?s:1-s;return n.ordinalNumber(i,{unit:"year"})}return Ut.y(e,r)},Y:function(e,r,n,s){const i=vc(e,s),o=i>0?i:1-i;if(r==="YY"){const l=o%100;return we(l,2)}return r==="Yo"?n.ordinalNumber(o,{unit:"year"}):we(o,r.length)},R:function(e,r){const n=yc(e);return we(n,r.length)},u:function(e,r){const n=e.getFullYear();return we(n,r.length)},Q:function(e,r,n){const s=Math.ceil((e.getMonth()+1)/3);switch(r){case"Q":return String(s);case"QQ":return we(s,2);case"Qo":return n.ordinalNumber(s,{unit:"quarter"});case"QQQ":return n.quarter(s,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(s,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(s,{width:"wide",context:"formatting"})}},q:function(e,r,n){const s=Math.ceil((e.getMonth()+1)/3);switch(r){case"q":return String(s);case"qq":return we(s,2);case"qo":return n.ordinalNumber(s,{unit:"quarter"});case"qqq":return n.quarter(s,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(s,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(s,{width:"wide",context:"standalone"})}},M:function(e,r,n){const s=e.getMonth();switch(r){case"M":case"MM":return Ut.M(e,r);case"Mo":return n.ordinalNumber(s+1,{unit:"month"});case"MMM":return n.month(s,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(s,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(s,{width:"wide",context:"formatting"})}},L:function(e,r,n){const s=e.getMonth();switch(r){case"L":return String(s+1);case"LL":return we(s+1,2);case"Lo":return n.ordinalNumber(s+1,{unit:"month"});case"LLL":return n.month(s,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(s,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(s,{width:"wide",context:"standalone"})}},w:function(e,r,n,s){const i=tp(e,s);return r==="wo"?n.ordinalNumber(i,{unit:"week"}):we(i,r.length)},I:function(e,r,n){const s=Qm(e);return r==="Io"?n.ordinalNumber(s,{unit:"week"}):we(s,r.length)},d:function(e,r,n){return r==="do"?n.ordinalNumber(e.getDate(),{unit:"date"}):Ut.d(e,r)},D:function(e,r,n){const s=Zm(e);return r==="Do"?n.ordinalNumber(s,{unit:"dayOfYear"}):we(s,r.length)},E:function(e,r,n){const s=e.getDay();switch(r){case"E":case"EE":case"EEE":return n.day(s,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(s,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(s,{width:"short",context:"formatting"});case"EEEE":default:return n.day(s,{width:"wide",context:"formatting"})}},e:function(e,r,n,s){const i=e.getDay(),o=(i-s.weekStartsOn+8)%7||7;switch(r){case"e":return String(o);case"ee":return we(o,2);case"eo":return n.ordinalNumber(o,{unit:"day"});case"eee":return n.day(i,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(i,{width:"short",context:"formatting"});case"eeee":default:return n.day(i,{width:"wide",context:"formatting"})}},c:function(e,r,n,s){const i=e.getDay(),o=(i-s.weekStartsOn+8)%7||7;switch(r){case"c":return String(o);case"cc":return we(o,r.length);case"co":return n.ordinalNumber(o,{unit:"day"});case"ccc":return n.day(i,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(i,{width:"narrow",context:"standalone"});case"cccccc":return n.day(i,{width:"short",context:"standalone"});case"cccc":default:return n.day(i,{width:"wide",context:"standalone"})}},i:function(e,r,n){const s=e.getDay(),i=s===0?7:s;switch(r){case"i":return String(i);case"ii":return we(i,r.length);case"io":return n.ordinalNumber(i,{unit:"day"});case"iii":return n.day(s,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(s,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(s,{width:"short",context:"formatting"});case"iiii":default:return n.day(s,{width:"wide",context:"formatting"})}},a:function(e,r,n){const i=e.getHours()/12>=1?"pm":"am";switch(r){case"a":case"aa":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},b:function(e,r,n){const s=e.getHours();let i;switch(s===12?i=mr.noon:s===0?i=mr.midnight:i=s/12>=1?"pm":"am",r){case"b":case"bb":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},B:function(e,r,n){const s=e.getHours();let i;switch(s>=17?i=mr.evening:s>=12?i=mr.afternoon:s>=4?i=mr.morning:i=mr.night,r){case"B":case"BB":case"BBB":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},h:function(e,r,n){if(r==="ho"){let s=e.getHours()%12;return s===0&&(s=12),n.ordinalNumber(s,{unit:"hour"})}return Ut.h(e,r)},H:function(e,r,n){return r==="Ho"?n.ordinalNumber(e.getHours(),{unit:"hour"}):Ut.H(e,r)},K:function(e,r,n){const s=e.getHours()%12;return r==="Ko"?n.ordinalNumber(s,{unit:"hour"}):we(s,r.length)},k:function(e,r,n){let s=e.getHours();return s===0&&(s=24),r==="ko"?n.ordinalNumber(s,{unit:"hour"}):we(s,r.length)},m:function(e,r,n){return r==="mo"?n.ordinalNumber(e.getMinutes(),{unit:"minute"}):Ut.m(e,r)},s:function(e,r,n){return r==="so"?n.ordinalNumber(e.getSeconds(),{unit:"second"}):Ut.s(e,r)},S:function(e,r){return Ut.S(e,r)},X:function(e,r,n){const s=e.getTimezoneOffset();if(s===0)return"Z";switch(r){case"X":return Qi(s);case"XXXX":case"XX":return rr(s);case"XXXXX":case"XXX":default:return rr(s,":")}},x:function(e,r,n){const s=e.getTimezoneOffset();switch(r){case"x":return Qi(s);case"xxxx":case"xx":return rr(s);case"xxxxx":case"xxx":default:return rr(s,":")}},O:function(e,r,n){const s=e.getTimezoneOffset();switch(r){case"O":case"OO":case"OOO":return"GMT"+Zi(s,":");case"OOOO":default:return"GMT"+rr(s,":")}},z:function(e,r,n){const s=e.getTimezoneOffset();switch(r){case"z":case"zz":case"zzz":return"GMT"+Zi(s,":");case"zzzz":default:return"GMT"+rr(s,":")}},t:function(e,r,n){const s=Math.trunc(e.getTime()/1e3);return we(s,r.length)},T:function(e,r,n){const s=e.getTime();return we(s,r.length)}};function Zi(e,r=""){const n=e>0?"-":"+",s=Math.abs(e),i=Math.trunc(s/60),o=s%60;return o===0?n+String(i):n+String(i)+r+we(o,2)}function Qi(e,r){return e%60===0?(e>0?"-":"+")+we(Math.abs(e)/60,2):rr(e,r)}function rr(e,r=""){const n=e>0?"-":"+",s=Math.abs(e),i=we(Math.trunc(s/60),2),o=we(s%60,2);return n+i+r+o}const eo=(e,r)=>{switch(e){case"P":return r.date({width:"short"});case"PP":return r.date({width:"medium"});case"PPP":return r.date({width:"long"});case"PPPP":default:return r.date({width:"full"})}},wc=(e,r)=>{switch(e){case"p":return r.time({width:"short"});case"pp":return r.time({width:"medium"});case"ppp":return r.time({width:"long"});case"pppp":default:return r.time({width:"full"})}},rp=(e,r)=>{const n=e.match(/(P+)(p+)?/)||[],s=n[1],i=n[2];if(!i)return eo(e,r);let o;switch(s){case"P":o=r.dateTime({width:"short"});break;case"PP":o=r.dateTime({width:"medium"});break;case"PPP":o=r.dateTime({width:"long"});break;case"PPPP":default:o=r.dateTime({width:"full"});break}return o.replace("{{date}}",eo(s,r)).replace("{{time}}",wc(i,r))},np={p:wc,P:rp},sp=/^D+$/,ap=/^Y+$/,ip=["D","DD","YY","YYYY"];function op(e){return sp.test(e)}function lp(e){return ap.test(e)}function cp(e,r,n){const s=up(e,r,n);if(console.warn(s),ip.includes(e))throw new RangeError(s)}function up(e,r,n){const s=e[0]==="Y"?"years":"days of the month";return`Use \`${e.toLowerCase()}\` instead of \`${e}\` (in \`${r}\`) for formatting ${s} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const dp=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,hp=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,fp=/^'([^]*?)'?$/,mp=/''/g,pp=/[a-zA-Z]/;function Gt(e,r,n){var f,h,x,w;const s=On(),i=s.locale??bc,o=s.firstWeekContainsDate??((h=(f=s.locale)==null?void 0:f.options)==null?void 0:h.firstWeekContainsDate)??1,l=s.weekStartsOn??((w=(x=s.locale)==null?void 0:x.options)==null?void 0:w.weekStartsOn)??0,c=je(e);if(!um(c))throw new RangeError("Invalid time value");let u=r.match(hp).map(v=>{const j=v[0];if(j==="p"||j==="P"){const b=np[j];return b(v,i.formatLong)}return v}).join("").match(dp).map(v=>{if(v==="''")return{isToken:!1,value:"'"};const j=v[0];if(j==="'")return{isToken:!1,value:gp(v)};if(Ji[j])return{isToken:!0,value:v};if(j.match(pp))throw new RangeError("Format string contains an unescaped latin alphabet character `"+j+"`");return{isToken:!1,value:v}});i.localize.preprocessor&&(u=i.localize.preprocessor(c,u));const d={firstWeekContainsDate:o,weekStartsOn:l,locale:i};return u.map(v=>{if(!v.isToken)return v.value;const j=v.value;(lp(j)||op(j))&&cp(j,r,String(e));const b=Ji[j[0]];return b(c,j,i.localize,d)}).join("")}function gp(e){const r=e.match(fp);return r?r[1].replace(mp,"'"):e}function xp(e,r,n){const s=On(),i=(n==null?void 0:n.locale)??s.locale??bc,o=2520,l=ss(e,r);if(isNaN(l))throw new RangeError("Invalid time value");const c=Object.assign({},n,{addSuffix:n==null?void 0:n.addSuffix,comparison:l});let u,d;l>0?(u=je(r),d=je(e)):(u=je(e),d=je(r));const f=ym(d,u),h=(ms(d)-ms(u))/1e3,x=Math.round((f-h)/60);let w;if(x<2)return n!=null&&n.includeSeconds?f<5?i.formatDistance("lessThanXSeconds",5,c):f<10?i.formatDistance("lessThanXSeconds",10,c):f<20?i.formatDistance("lessThanXSeconds",20,c):f<40?i.formatDistance("halfAMinute",0,c):f<60?i.formatDistance("lessThanXMinutes",1,c):i.formatDistance("xMinutes",1,c):x===0?i.formatDistance("lessThanXMinutes",1,c):i.formatDistance("xMinutes",x,c);if(x<45)return i.formatDistance("xMinutes",x,c);if(x<90)return i.formatDistance("aboutXHours",1,c);if(x<Xi){const v=Math.round(x/60);return i.formatDistance("aboutXHours",v,c)}else{if(x<o)return i.formatDistance("xDays",1,c);if(x<Fn){const v=Math.round(x/Xi);return i.formatDistance("xDays",v,c)}else if(x<Fn*2)return w=Math.round(x/Fn),i.formatDistance("aboutXMonths",w,c)}if(w=xm(d,u),w<12){const v=Math.round(x/Fn);return i.formatDistance("xMonths",v,c)}else{const v=w%12,j=Math.trunc(w/12);return v<3?i.formatDistance("aboutXYears",j,c):v<9?i.formatDistance("overXYears",j,c):i.formatDistance("almostXYears",j+1,c)}}function Is(e,r){return xp(e,lm(e),r)}const yp=({scan:e,isActive:r,onClick:n,tags:s,onTagClick:i})=>{const o=JSON.parse(e.targets),l=e.status,c=()=>({pending:"Pending",running:"Running",completed:"Completed",failed:"Failed"})[e.status]||e.status;return a.jsxs("div",{onClick:n,className:`
        p-4 border rounded-lg cursor-pointer transition-all duration-200
        ${r?"bg-primary/10 border-primary shadow-lg":"bg-dark-surface border-dark-border hover:border-primary/50 hover:shadow-md"}
      `,children:[a.jsxs("div",{className:"flex items-start justify-between mb-2",children:[a.jsx("h4",{className:"text-white font-semibold truncate flex-1",children:e.name}),a.jsxs(et,{variant:"status",type:l,children:[l==="running"&&a.jsx("span",{className:"inline-block w-2 h-2 bg-primary rounded-full animate-pulse-dot mr-1"}),c()]})]}),s&&s.length>0&&a.jsxs("div",{className:"flex flex-wrap gap-1 mb-2",children:[s.slice(0,3).map(u=>a.jsxs("button",{type:"button",onClick:d=>{d.stopPropagation(),i==null||i(u.id)},className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium hover:opacity-80 transition-opacity",style:{backgroundColor:u.color+"20",color:u.color},title:`Filter by ${u.name}`,children:[a.jsx(bn,{className:"h-3 w-3 mr-1"}),u.name]},u.id)),s.length>3&&a.jsxs("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs text-slate-400",children:["+",s.length-3," more"]})]}),a.jsxs("div",{className:"space-y-1 text-sm",children:[a.jsxs("div",{className:"flex items-center text-slate-400",children:[a.jsx(Ml,{className:"h-4 w-4 mr-2"}),a.jsx("span",{className:"font-mono text-xs",children:o[0]})]}),a.jsxs("div",{className:"flex items-center text-slate-500",children:[a.jsx(Rr,{className:"h-4 w-4 mr-2"}),a.jsx("span",{children:Gt(new Date(e.created_at),"MMM d, yyyy HH:mm")})]})]})]})},wt=({size:e="md",className:r=""})=>{const n={sm:"h-4 w-4",md:"h-8 w-8",lg:"h-12 w-12"};return a.jsx(Ps,{className:`${n[e]} animate-spin text-primary ${r}`})},bp=({selectedIds:e,onSelectionChange:r})=>{const{scans:n,activeScan:s,setScans:i,setActiveScan:o}=ct(),[l,c]=R.useState(!0),[u,d]=R.useState(""),[f,h]=R.useState("all"),[x,w]=R.useState("all"),[v,j]=R.useState([]),[b,p]=R.useState({}),[m,_]=R.useState(!1),[g,y]=R.useState(""),[S,N]=R.useState("#06b6d4"),[k,C]=R.useState(null);R.useEffect(()=>{E(),O()},[]);const E=async()=>{try{const G=(await vt.getAllWithTags()).data;i(G.map(X=>({...X,tags:void 0})));const Z={};G.forEach(X=>{Z[X.id]=X.tags||[]}),p(Z)}catch{try{const G=await vt.getAll();i(G.data)}catch{Q.error("Failed to load scans")}}finally{c(!1)}},O=async()=>{try{const U=await ot.getAll();j(U.data)}catch(U){console.error("Failed to load tags:",U)}},A=async()=>{if(g.trim())try{const U=await ot.create({name:g.trim(),color:S});j([...v,U.data]),y(""),Q.success("Tag created successfully")}catch{Q.error("Failed to create tag")}},M=async U=>{try{await ot.delete(U),j(v.filter(G=>G.id!==U)),x===U&&w("all"),Q.success("Tag deleted")}catch{Q.error("Failed to delete tag")}},T=async(U,G)=>{U.stopPropagation(),C(G);try{const X=(await vt.duplicate(G)).data;i([X,...n]),b[G]&&p({...b,[X.id]:b[G]}),Q.success("Scan duplicated successfully")}catch{Q.error("Failed to duplicate scan")}finally{C(null)}},H=n.filter(U=>{const G=U.name.toLowerCase().includes(u.toLowerCase())||U.targets.toLowerCase().includes(u.toLowerCase()),Z=f==="all"||U.status===f,X=x==="all"||b[U.id]&&b[U.id].some(oe=>oe.id===x);return G&&Z&&X}),z=U=>{r&&(U.target.checked?r(new Set(H.map(G=>G.id))):r(new Set))},B=(U,G)=>{if(!r||!e)return;const Z=new Set(e);G?Z.add(U):Z.delete(U),r(Z)},Y=["#06b6d4","#8b5cf6","#f59e0b","#10b981","#ef4444","#ec4899","#3b82f6","#84cc16"];return l?a.jsx(fe,{children:a.jsx("div",{className:"flex items-center justify-center py-12",children:a.jsx(wt,{})})}):a.jsx(fe,{children:a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("h3",{className:"text-xl font-semibold text-white",children:"Scan History"}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsxs("button",{onClick:()=>_(!m),className:"text-sm text-slate-400 hover:text-primary flex items-center gap-1",title:"Manage tags",children:[a.jsx(bn,{className:"h-4 w-4"}),"Tags"]}),a.jsxs("span",{className:"text-sm text-slate-400",children:[n.length," scans",e&&e.size>0&&` (${e.size} selected)`]})]})]}),m&&a.jsxs("div",{className:"bg-dark-bg border border-dark-border rounded-lg p-3 space-y-3",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Ie,{type:"text",placeholder:"New tag name...",value:g,onChange:U=>y(U.target.value),className:"flex-1"}),a.jsx("div",{className:"flex gap-1",children:Y.map(U=>a.jsx("button",{onClick:()=>N(U),className:`w-6 h-6 rounded-full border-2 ${S===U?"border-white":"border-transparent"}`,style:{backgroundColor:U},title:U},U))}),a.jsx("button",{onClick:A,disabled:!g.trim(),className:"px-3 py-1.5 bg-primary text-white rounded hover:bg-primary/80 disabled:opacity-50 disabled:cursor-not-allowed",children:a.jsx(_r,{className:"h-4 w-4"})})]}),a.jsxs("div",{className:"flex flex-wrap gap-2",children:[v.map(U=>a.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded text-sm",style:{backgroundColor:U.color+"20",color:U.color},children:[U.name,a.jsx("button",{onClick:()=>M(U.id),className:"hover:opacity-70",children:a.jsx(Lt,{className:"h-3 w-3"})})]},U.id)),v.length===0&&a.jsx("span",{className:"text-sm text-slate-500",children:"No tags yet"})]})]}),a.jsx(Ie,{type:"text",placeholder:"Search by name, target, or customer...",value:u,onChange:U=>d(U.target.value),icon:a.jsx(Os,{className:"h-5 w-5"})}),a.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-2",children:[a.jsxs("div",{className:"flex items-center gap-4 text-sm",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(zl,{className:"h-4 w-4 text-slate-400"}),a.jsx("span",{className:"text-slate-400",children:"Status:"}),a.jsxs("select",{value:f,onChange:U=>h(U.target.value),className:"bg-dark-bg border border-dark-border text-slate-300 rounded px-2 py-1 focus:outline-none focus:border-primary",children:[a.jsx("option",{value:"all",children:"All"}),a.jsx("option",{value:"pending",children:"Pending"}),a.jsx("option",{value:"running",children:"Running"}),a.jsx("option",{value:"completed",children:"Completed"}),a.jsx("option",{value:"failed",children:"Failed"})]})]}),v.length>0&&a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(bn,{className:"h-4 w-4 text-slate-400"}),a.jsx("span",{className:"text-slate-400",children:"Tag:"}),a.jsxs("select",{value:x,onChange:U=>w(U.target.value),className:"bg-dark-bg border border-dark-border text-slate-300 rounded px-2 py-1 focus:outline-none focus:border-primary",children:[a.jsx("option",{value:"all",children:"All Tags"}),v.map(U=>a.jsx("option",{value:U.id,children:U.name},U.id))]})]})]}),r&&a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("input",{type:"checkbox",id:"select-all",checked:(e==null?void 0:e.size)===H.length&&H.length>0,onChange:z,className:"rounded border-dark-border bg-dark-bg text-primary focus:ring-primary"}),a.jsx("label",{htmlFor:"select-all",className:"text-sm text-slate-400 cursor-pointer",children:"Select All"})]})]}),a.jsx("div",{className:"space-y-2 max-h-[600px] overflow-y-auto",children:H.length===0?a.jsx("div",{className:"text-center py-8 text-slate-500",children:u||f!=="all"||x!=="all"?"No scans match your filters":"No scans yet. Create your first scan above."}):H.map(U=>a.jsxs("div",{className:"flex items-center space-x-2",children:[r&&a.jsx("input",{type:"checkbox",checked:(e==null?void 0:e.has(U.id))||!1,onChange:G=>B(U.id,G.target.checked),className:"rounded border-dark-border bg-dark-bg text-primary focus:ring-primary flex-shrink-0"}),a.jsxs("div",{className:"flex-1 relative group",children:[a.jsx(yp,{scan:U,isActive:(s==null?void 0:s.id)===U.id,onClick:()=>o(U),tags:b[U.id],onTagClick:G=>w(G)}),a.jsx("button",{onClick:G=>T(G,U.id),disabled:k===U.id,className:"absolute top-2 right-12 p-1.5 bg-dark-bg/90 border border-dark-border rounded opacity-0 group-hover:opacity-100 transition-opacity hover:border-primary hover:text-primary disabled:opacity-50",title:"Duplicate scan",children:k===U.id?a.jsx(wt,{className:"h-4 w-4"}):a.jsx(Rs,{className:"h-4 w-4"})})]})]},U.id))})]})})},Hr=[{name:"host_discovery",label:"Host Discovery",progressStart:0,progressEnd:20},{name:"port_scanning",label:"Port Scanning",progressStart:20,progressEnd:40},{name:"service_detection",label:"Service Detection",progressStart:40,progressEnd:60},{name:"enumeration",label:"Enumeration",progressStart:60,progressEnd:75},{name:"os_fingerprinting",label:"OS Fingerprinting",progressStart:75,progressEnd:85},{name:"vulnerability_scanning",label:"Vulnerability Scanning",progressStart:85,progressEnd:100}],vp=({currentPhase:e,progress:r=0,isComplete:n=!1})=>{var c;const s=u=>u.toLowerCase().replace(/\s+/g,"_"),o=(()=>{if(n)return Hr.length;if(!e)return-1;const u=s(e);return Hr.findIndex(d=>d.name===u||s(d.label)===u)})(),l=u=>n||u<o?"completed":u===o?"active":"pending";return a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"absolute top-6 left-0 right-0 h-0.5 bg-dark-border"}),a.jsx("div",{className:"absolute top-6 left-0 h-0.5 bg-gradient-to-r from-primary to-primary-light transition-all duration-500",style:{width:`${n?100:o/Hr.length*100}%`}}),a.jsx("div",{className:"relative grid grid-cols-6 gap-2",children:Hr.map((u,d)=>{const f=l(d);return a.jsxs("div",{className:"flex flex-col items-center",children:[a.jsx("div",{className:`
                    relative z-10 flex items-center justify-center w-12 h-12 rounded-full border-2 transition-all duration-300
                    ${f==="completed"?"bg-green-500 border-green-500 shadow-lg shadow-green-500/50":f==="active"?"bg-primary border-primary shadow-lg shadow-primary/50 animate-pulse-glow":"bg-dark-surface border-dark-border"}
                  `,children:f==="completed"?a.jsx(Dl,{className:"h-6 w-6 text-white"}):f==="active"?a.jsx(Ps,{className:"h-6 w-6 text-white animate-spin"}):a.jsx(bd,{className:"h-6 w-6 text-slate-600"})}),a.jsxs("div",{className:"mt-3 text-center",children:[a.jsx("p",{className:`text-xs font-medium transition-colors ${f==="completed"?"text-green-500":f==="active"?"text-primary":"text-slate-500"}`,children:u.label}),f==="active"&&a.jsx("p",{className:"text-xs text-slate-400 mt-1",children:"In Progress..."}),f==="completed"&&a.jsx("p",{className:"text-xs text-green-500/70 mt-1",children:"Complete"})]})]},u.name)})})]}),a.jsxs("div",{className:"space-y-2 pt-4 border-t border-dark-border",children:[a.jsxs("div",{className:"flex items-center justify-between text-sm",children:[a.jsx("span",{className:"text-slate-400",children:n?a.jsx("span",{className:"text-green-500 font-medium",children:"Scan Complete"}):e?a.jsxs(a.Fragment,{children:[a.jsx("span",{className:"text-primary font-medium",children:((c=Hr[o])==null?void 0:c.label)||e})," in progress..."]}):a.jsx("span",{className:"text-slate-500",children:"Initializing..."})}),a.jsxs("span",{className:"text-white font-semibold tabular-nums",children:[Math.round(r),"%"]})]}),a.jsx("div",{className:"relative h-3 bg-dark-surface rounded-full overflow-hidden",children:a.jsx("div",{className:"absolute top-0 left-0 h-full bg-gradient-to-r from-primary via-primary-light to-primary transition-all duration-500 ease-out",style:{width:`${n?100:r}%`},children:a.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white to-transparent opacity-30 animate-shimmer"})})})]})]})},Ur=({value:e,duration:r=500})=>{const[n,s]=R.useState(0);return R.useEffect(()=>{if(n===e)return;const i=n,o=e-i,l=Date.now(),c=()=>{const u=Date.now()-l,d=Math.min(u/r,1),f=1-Math.pow(1-d,3),h=Math.round(i+o*f);s(h),d<1&&requestAnimationFrame(c)};requestAnimationFrame(c)},[e,r]),a.jsx("span",{className:"tabular-nums",children:n.toLocaleString()})},wp=({hostsFound:e,portsOpen:r,servicesDetected:n,vulnerabilitiesFound:s,criticalVulns:i=0,highVulns:o=0,mediumVulns:l=0,lowVulns:c=0})=>{const u=[{label:"Hosts Found",value:e,icon:jt,color:"text-blue-400",bgColor:"bg-blue-500/10",borderColor:"border-blue-500/30"},{label:"Open Ports",value:r,icon:Es,color:"text-green-400",bgColor:"bg-green-500/10",borderColor:"border-green-500/30"},{label:"Services Detected",value:n,icon:Ba,color:"text-purple-400",bgColor:"bg-purple-500/10",borderColor:"border-purple-500/30"},{label:"Vulnerabilities",value:s,icon:Ee,color:s>0?"text-red-400":"text-slate-500",bgColor:s>0?"bg-red-500/10":"bg-slate-500/10",borderColor:s>0?"border-red-500/30":"border-slate-500/30"}],d=f=>{switch(f){case"critical":return"bg-severity-critical text-white";case"high":return"bg-severity-high text-white";case"medium":return"bg-severity-medium text-white";case"low":return"bg-severity-low text-white";default:return"bg-slate-600 text-white"}};return a.jsxs("div",{className:"space-y-4",children:[a.jsx("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4",children:u.map(f=>{const h=f.icon;return a.jsxs("div",{className:`relative overflow-hidden rounded-lg border ${f.borderColor} ${f.bgColor} p-4 transition-all duration-300 hover:scale-105`,children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsx(h,{className:`h-5 w-5 ${f.color}`}),f.value>0&&a.jsx("div",{className:"absolute top-2 right-2 w-2 h-2 rounded-full bg-current animate-pulse-dot"})]}),a.jsxs("div",{className:"space-y-1",children:[a.jsx("p",{className:"text-2xl font-bold text-white",children:a.jsx(Ur,{value:f.value})}),a.jsx("p",{className:"text-xs text-slate-400 font-medium",children:f.label})]}),a.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-white/5 to-transparent pointer-events-none"})]},f.label)})}),s>0&&a.jsxs("div",{className:"bg-dark-surface border border-dark-border rounded-lg p-4",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[a.jsx(ke,{className:"h-4 w-4 text-red-400"}),a.jsx("h4",{className:"text-sm font-semibold text-white",children:"Vulnerability Breakdown"})]}),a.jsxs("div",{className:"flex flex-wrap gap-2",children:[i>0&&a.jsxs("div",{className:`px-3 py-1.5 rounded-lg text-xs font-medium ${d("critical")}`,children:[a.jsx("span",{className:"font-bold",children:a.jsx(Ur,{value:i})})," Critical"]}),o>0&&a.jsxs("div",{className:`px-3 py-1.5 rounded-lg text-xs font-medium ${d("high")}`,children:[a.jsx("span",{className:"font-bold",children:a.jsx(Ur,{value:o})})," High"]}),l>0&&a.jsxs("div",{className:`px-3 py-1.5 rounded-lg text-xs font-medium ${d("medium")}`,children:[a.jsx("span",{className:"font-bold",children:a.jsx(Ur,{value:l})})," Medium"]}),c>0&&a.jsxs("div",{className:`px-3 py-1.5 rounded-lg text-xs font-medium ${d("low")}`,children:[a.jsx("span",{className:"font-bold",children:a.jsx(Ur,{value:c})})," Low"]})]})]})]})};class _p{constructor(r,n){Ct(this,"ws",null);Ct(this,"scanId");Ct(this,"token");Ct(this,"reconnectAttempts",0);Ct(this,"maxReconnectAttempts",10);Ct(this,"reconnectDelay",1e3);Ct(this,"messageHandlers",[]);Ct(this,"statusHandlers",[]);this.scanId=r,this.token=n||localStorage.getItem("token")||""}connect(){if(!this.token){console.error("WebSocket connection failed: No authentication token available"),this.updateStatus("failed");return}const r=window.location.protocol==="https:"?"wss:":"ws:",n=window.location.hostname,s=window.location.port||(r==="wss:"?"443":"80"),i=`${r}//${n}:${s}/api/ws/scans/${this.scanId}?token=${encodeURIComponent(this.token)}`;this.updateStatus("connecting");try{this.ws=new WebSocket(i),this.ws.onopen=()=>{console.log(`WebSocket connected for scan: ${this.scanId}`),this.reconnectAttempts=0,this.reconnectDelay=1e3,this.updateStatus("connected")},this.ws.onmessage=o=>{try{const l=JSON.parse(o.data);this.messageHandlers.forEach(c=>c(l))}catch(l){console.error("Failed to parse WebSocket message:",l)}},this.ws.onerror=o=>{console.error("WebSocket error:",o)},this.ws.onclose=()=>{console.log("WebSocket disconnected"),this.updateStatus("disconnected"),this.attemptReconnect()}}catch(o){console.error("Failed to create WebSocket:",o),this.updateStatus("failed")}}attemptReconnect(){if(this.reconnectAttempts>=this.maxReconnectAttempts){console.log("Max reconnection attempts reached"),this.updateStatus("failed");return}this.reconnectAttempts++;const r=Math.min(this.reconnectDelay*Math.pow(2,this.reconnectAttempts-1),8e3);console.log(`Reconnecting in ${r}ms... (Attempt ${this.reconnectAttempts}/${this.maxReconnectAttempts})`),setTimeout(()=>{this.connect()},r)}onMessage(r){this.messageHandlers.push(r)}onStatusChange(r){this.statusHandlers.push(r)}updateStatus(r){this.statusHandlers.forEach(n=>n(r))}disconnect(){this.ws&&(this.ws.close(),this.ws=null),this.messageHandlers=[],this.statusHandlers=[]}reconnect(){this.disconnect(),this.reconnectAttempts=0,this.connect()}}const jp=e=>{const[r,n]=R.useState("disconnected"),[s,i]=R.useState(null),o=R.useRef(null),{updateScanStatus:l,addHostToResults:c,updateHostInResults:u,results:d}=ct();R.useEffect(()=>{if(!e)return;const x=new _p(e);return o.current=x,x.onStatusChange(w=>{n(w),i(w==="failed"?"Failed to connect to WebSocket":null)}),x.onMessage(w=>{f(e,w)}),x.connect(),()=>{x.disconnect(),o.current=null}},[e]);const f=(x,w)=>{switch(console.log("WebSocket message:",w),w.type){case"scanStarted":l(x,"running"),Q.info("Scan started");break;case"phaseStarted":break;case"hostDiscovered":const v={target:{ip:w.ip,hostname:w.hostname||null},is_alive:!0,os_guess:null,ports:[],vulnerabilities:[],scan_duration:{secs:0,nanos:0}};c(x,v);break;case"portFound":const b=(d.get(x)||[]).find(y=>y.target.ip===w.ip);if(b){const y={port:w.port,protocol:w.protocol==="TCP"?"TCP":"UDP",state:w.state,service:null},S=[...b.ports,y];u(x,w.ip,{ports:S})}break;case"serviceDetected":const m=(d.get(x)||[]).find(y=>y.target.ip===w.ip);if(m){const y=m.ports.map(S=>S.port===w.port?{...S,service:{name:w.service_name,version:w.version||null,banner:null,cpe:null,ssl_info:null}}:S);u(x,w.ip,{ports:y})}break;case"vulnerabilityFound":const g=(d.get(x)||[]).find(y=>y.target.ip===w.ip);if(g){const y={cve_id:w.cve_id||null,title:w.title,severity:w.severity,description:"",affected_service:null},S=[...g.vulnerabilities,y];u(x,w.ip,{vulnerabilities:S}),w.severity==="Critical"?Q.error(` CRITICAL vulnerability found on ${w.ip}: ${w.title}`,{autoClose:8e3}):w.severity==="High"&&Q.warning(` HIGH severity vulnerability found on ${w.ip}: ${w.title}`,{autoClose:6e3})}break;case"scanCompleted":l(x,"completed"),Q.success(`Scan completed! Found ${w.total_hosts} hosts`);break;case"error":l(x,"failed"),Q.error(`Scan error: ${w.message}`);break;default:console.log("Unknown message type:",w.type)}};return{status:r,error:s,reconnect:()=>{o.current&&o.current.reconnect()}}},Np=({scanId:e})=>{const{status:r,error:n,reconnect:s}=jp(e),{liveUpdates:i,scans:o}=ct(),[l,c]=R.useState(!0),u=R.useMemo(()=>o.find(g=>g.id===e),[o,e]),{currentPhase:d,progress:f,isComplete:h,metrics:x,currentActivity:w,estimatedTime:v}=R.useMemo(()=>{var G,Z,X,oe,le,me;if(!e)return{currentPhase:void 0,progress:0,isComplete:!1,metrics:{hostsFound:0,portsOpen:0,servicesDetected:0,vulnerabilitiesFound:0,criticalVulns:0,highVulns:0,mediumVulns:0,lowVulns:0},currentActivity:"",estimatedTime:null};const g=i.get(e)||[],y=(u==null?void 0:u.status)==="completed",S=g.filter(de=>de.type==="phaseStarted"),N=S.length>0?S[S.length-1]:null,k=g.filter(de=>de.type==="scanProgress"),C=k.length>0?k[k.length-1]:null,E=g.filter(de=>de.type==="hostDiscovered"),O=g.filter(de=>de.type==="portFound"),A=g.filter(de=>de.type==="serviceDetected"),M=g.filter(de=>de.type==="vulnerabilityFound"),T=M.filter(de=>{var ge;return((ge=de.data)==null?void 0:ge.severity)==="Critical"}).length,H=M.filter(de=>{var ge;return((ge=de.data)==null?void 0:ge.severity)==="High"}).length,z=M.filter(de=>{var ge;return((ge=de.data)==null?void 0:ge.severity)==="Medium"}).length,B=M.filter(de=>{var ge;return((ge=de.data)==null?void 0:ge.severity)==="Low"}).length,Y=((G=C==null?void 0:C.data)==null?void 0:G.message)||((Z=N==null?void 0:N.data)==null?void 0:Z.phase)||"";let U=null;if(!y&&C&&((X=C.data)==null?void 0:X.progress)>0){const de=C.data.progress,ge=g.find(J=>J.type==="scanStarted");if(ge){const J=new Date(ge.timestamp).getTime(),te=(Date.now()-J)/1e3,ne=te/de*100;U=Math.max(0,ne-te)}}return{currentPhase:(oe=N==null?void 0:N.data)==null?void 0:oe.phase,progress:((le=C==null?void 0:C.data)==null?void 0:le.progress)||((me=N==null?void 0:N.data)==null?void 0:me.progress)||0,isComplete:y,metrics:{hostsFound:E.length,portsOpen:O.length,servicesDetected:A.length,vulnerabilitiesFound:M.length,criticalVulns:T,highVulns:H,mediumVulns:z,lowVulns:B},currentActivity:Y,estimatedTime:U}},[e,i,u]),j=g=>g===null?"Calculating...":g<60?`~${Math.round(g)}s remaining`:g<3600?`~${Math.round(g/60)}m remaining`:`~${Math.round(g/3600)}h ${Math.round(g%3600/60)}m remaining`;if(!e)return a.jsx(fe,{children:a.jsx("div",{className:"text-center py-8 text-slate-500",children:"Select a scan to view real-time progress"})});const b=()=>{switch(r){case"connected":return"text-green-500";case"connecting":return"text-yellow-500";case"disconnected":case"failed":return"text-red-500";default:return"text-slate-500"}},p=()=>r==="connected"?a.jsx(Es,{className:"h-5 w-5"}):a.jsx(ma,{className:"h-5 w-5"}),m=()=>{switch(r){case"connected":return"Connected - Receiving live updates";case"connecting":return"Connecting to scan...";case"disconnected":return"Disconnected";case"failed":return"Connection failed";default:return"Unknown"}},_=(u==null?void 0:u.status)==="running"||(u==null?void 0:u.status)==="completed";return a.jsx(fe,{children:a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsxs("h3",{className:"text-xl font-semibold text-white flex items-center",children:[a.jsx(bt,{className:"h-5 w-5 mr-2"}),"Real-Time Scan Progress"]}),a.jsxs(et,{variant:"status",type:r==="connected"?"running":"pending",children:[r==="connected"&&a.jsx("span",{className:"inline-block w-2 h-2 bg-green-500 rounded-full animate-pulse-dot mr-1"}),"Live"]})]}),a.jsx("button",{onClick:()=>c(!l),className:"p-2 hover:bg-dark-hover rounded-lg transition-colors",children:l?a.jsx(Ts,{className:"h-5 w-5 text-slate-400"}):a.jsx(hr,{className:"h-5 w-5 text-slate-400"})})]}),a.jsxs("div",{className:`flex items-center space-x-2 ${b()}`,children:[p(),a.jsx("span",{className:"text-sm",children:m()})]}),n&&a.jsxs("div",{className:"bg-red-500/10 border border-red-500/30 rounded-lg p-3",children:[a.jsx("p",{className:"text-red-500 text-sm",children:n}),a.jsx("button",{onClick:s,className:"mt-2 text-xs text-red-400 hover:text-red-300 underline",children:"Try reconnecting"})]}),l&&a.jsxs(a.Fragment,{children:[_&&!h&&w&&a.jsxs("div",{className:"bg-dark-surface border border-dark-border rounded-lg p-3 space-y-2",children:[a.jsxs("div",{className:"flex items-start gap-2",children:[a.jsx(bt,{className:"h-4 w-4 text-primary mt-0.5 animate-pulse"}),a.jsx("div",{className:"flex-1 min-w-0",children:a.jsx("p",{className:"text-sm text-slate-300",children:w})})]}),v!==null&&a.jsxs("div",{className:"flex items-center gap-2 text-xs text-slate-400",children:[a.jsx(Rr,{className:"h-3 w-3"}),a.jsx("span",{children:j(v)})]})]}),_&&a.jsx(wp,{hostsFound:x.hostsFound,portsOpen:x.portsOpen,servicesDetected:x.servicesDetected,vulnerabilitiesFound:x.vulnerabilitiesFound,criticalVulns:x.criticalVulns,highVulns:x.highVulns,mediumVulns:x.mediumVulns,lowVulns:x.lowVulns}),_&&a.jsx("div",{className:"border-t border-dark-border pt-4",children:a.jsx(vp,{currentPhase:d,progress:f,isComplete:h})}),r==="connected"&&!_&&a.jsxs("div",{className:"border-t border-dark-border pt-4 text-sm text-slate-400",children:[a.jsx("p",{children:"Listening for scan events:"}),a.jsxs("ul",{className:"mt-2 space-y-1 text-xs",children:[a.jsx("li",{children:" Host discoveries"}),a.jsx("li",{children:" Open ports"}),a.jsx("li",{children:" Service detections"}),a.jsx("li",{children:" Vulnerability findings"})]})]})]})]})})},Sp=({onScanSelect:e})=>{const{scans:r,liveUpdates:n,activeScan:s}=ct(),i=R.useMemo(()=>r.filter(d=>d.status==="running"),[r]),o=R.useMemo(()=>{const d=new Map;return i.forEach(f=>{var v;const x=(n.get(f.id)||[]).filter(j=>j.type==="scanProgress"||j.type==="phaseStarted"),w=x.length>0?x[x.length-1]:null;d.set(f.id,((v=w==null?void 0:w.data)==null?void 0:v.progress)||0)}),d},[i,n]),l=R.useMemo(()=>{let d=0,f=0,h=0;i.forEach(w=>{const v=n.get(w.id)||[];d+=o.get(w.id)||0,f+=v.filter(j=>j.type==="hostDiscovered").length,h+=v.filter(j=>j.type==="vulnerabilityFound").length});const x=i.length>0?d/i.length:0;return{totalScans:i.length,avgProgress:x,totalHosts:f,totalVulns:h}},[i,n,o]),c=d=>{switch(d){case"running":return a.jsx(Ps,{className:"h-4 w-4 text-primary animate-spin"});case"completed":return a.jsx(Ze,{className:"h-4 w-4 text-green-500"});case"failed":return a.jsx(Ft,{className:"h-4 w-4 text-red-500"});default:return a.jsx(bt,{className:"h-4 w-4 text-slate-400"})}},u=d=>{if(!d.started_at)return"";const f=new Date(d.started_at).getTime(),h=d.completed_at?new Date(d.completed_at).getTime():Date.now(),x=Math.floor((h-f)/1e3);return x<60?`${x}s`:x<3600?`${Math.floor(x/60)}m`:`${Math.floor(x/3600)}h ${Math.floor(x%3600/60)}m`};return i.length===0?null:a.jsx(fe,{children:a.jsxs("div",{className:"space-y-4",children:[a.jsx("div",{className:"flex items-center justify-between",children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(bt,{className:"h-5 w-5 text-primary"}),a.jsx("h3",{className:"text-lg font-semibold text-white",children:"Active Scans"}),a.jsxs(et,{variant:"status",type:"running",children:[l.totalScans," Running"]})]})}),a.jsxs("div",{className:"grid grid-cols-3 gap-3 pb-3 border-b border-dark-border",children:[a.jsxs("div",{className:"text-center",children:[a.jsxs("p",{className:"text-2xl font-bold text-primary",children:[Math.round(l.avgProgress),"%"]}),a.jsx("p",{className:"text-xs text-slate-400",children:"Avg Progress"})]}),a.jsxs("div",{className:"text-center",children:[a.jsx("p",{className:"text-2xl font-bold text-blue-400",children:l.totalHosts}),a.jsx("p",{className:"text-xs text-slate-400",children:"Total Hosts"})]}),a.jsxs("div",{className:"text-center",children:[a.jsx("p",{className:"text-2xl font-bold text-red-400",children:l.totalVulns}),a.jsx("p",{className:"text-xs text-slate-400",children:"Total Vulns"})]})]}),a.jsx("div",{className:"space-y-2 max-h-80 overflow-y-auto custom-scrollbar",children:i.map(d=>{const f=o.get(d.id)||0,h=(s==null?void 0:s.id)===d.id;return a.jsxs("div",{onClick:()=>e==null?void 0:e(d.id),className:`
                  group relative p-3 rounded-lg border transition-all cursor-pointer
                  ${h?"bg-primary/10 border-primary":"bg-dark-surface border-dark-border hover:border-primary/50 hover:bg-dark-hover"}
                `,children:[a.jsx("div",{className:"absolute inset-0 bg-primary/5 rounded-lg transition-all duration-300",style:{width:`${f}%`}}),a.jsxs("div",{className:"relative flex items-center justify-between gap-3",children:[a.jsxs("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[c(d.status),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("p",{className:"text-sm font-medium text-white truncate",children:d.name}),a.jsx("p",{className:"text-xs text-slate-400 truncate",children:d.targets})]})]}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsxs("div",{className:"text-right",children:[a.jsxs("p",{className:"text-sm font-semibold text-primary tabular-nums",children:[Math.round(f),"%"]}),a.jsx("p",{className:"text-xs text-slate-500",children:u(d)})]}),a.jsx(As,{className:`h-4 w-4 text-slate-400 transition-transform ${h?"text-primary":"group-hover:translate-x-1"}`})]})]}),a.jsx("div",{className:"relative mt-2 h-1 bg-dark-bg rounded-full overflow-hidden",children:a.jsx("div",{className:"absolute top-0 left-0 h-full bg-gradient-to-r from-primary to-primary-light transition-all duration-500",style:{width:`${f}%`}})})]},d.id)})})]})})},kp=({scanId:e,maxItems:r=50})=>{const{liveUpdates:n}=ct(),[s,i]=R.useState(!1),o=R.useRef(null),[l,c]=R.useState(!0),u=e?n.get(e)||[]:[],f=(s?u.filter(v=>{var j,b;return v.type==="vulnerabilityFound"&&(((j=v.data)==null?void 0:j.severity)==="Critical"||((b=v.data)==null?void 0:b.severity)==="High")}):u).slice(-r);R.useEffect(()=>{l&&o.current&&o.current.scrollIntoView({behavior:"smooth"})},[f.length,l]);const h=v=>{switch(v){case"hostDiscovered":return a.jsx(jt,{className:"h-4 w-4 text-blue-400"});case"portFound":return a.jsx(Es,{className:"h-4 w-4 text-green-400"});case"serviceDetected":return a.jsx(Ba,{className:"h-4 w-4 text-purple-400"});case"vulnerabilityFound":return a.jsx(Ee,{className:"h-4 w-4 text-red-400"});case"phaseStarted":return a.jsx(bt,{className:"h-4 w-4 text-primary"});case"scanStarted":case"scanCompleted":return a.jsx(ke,{className:"h-4 w-4 text-green-400"});case"vpnConnecting":return a.jsx(or,{className:"h-4 w-4 text-yellow-400 animate-pulse"});case"vpnConnected":return a.jsx(or,{className:"h-4 w-4 text-green-400"});case"vpnDisconnecting":return a.jsx(ma,{className:"h-4 w-4 text-yellow-400"});case"vpnDisconnected":return a.jsx(ma,{className:"h-4 w-4 text-slate-400"});case"vpnError":return a.jsx(or,{className:"h-4 w-4 text-red-400"});default:return a.jsx(bt,{className:"h-4 w-4 text-slate-400"})}},x=v=>{var j,b,p,m,_,g,y,S,N,k,C,E,O,A,M,T,H,z,B,Y,U,G,Z,X;switch(v.type){case"hostDiscovered":return a.jsxs(a.Fragment,{children:["Discovered host ",a.jsx("code",{className:"text-primary font-mono",children:(j=v.data)==null?void 0:j.ip}),((b=v.data)==null?void 0:b.hostname)&&` (${v.data.hostname})`]});case"portFound":return a.jsxs(a.Fragment,{children:["Found open port"," ",a.jsxs("code",{className:"text-green-400 font-mono",children:[(p=v.data)==null?void 0:p.port,"/",(m=v.data)==null?void 0:m.protocol]})," ","on ",a.jsx("code",{className:"text-primary font-mono",children:(_=v.data)==null?void 0:_.ip})]});case"serviceDetected":return a.jsxs(a.Fragment,{children:["Detected service ",a.jsx("code",{className:"text-purple-400",children:(g=v.data)==null?void 0:g.service_name})," on"," ",a.jsx("code",{className:"text-primary font-mono",children:(y=v.data)==null?void 0:y.ip}),":",(S=v.data)==null?void 0:S.port]});case"vulnerabilityFound":return a.jsxs(a.Fragment,{children:["Found"," ",a.jsx(et,{variant:"severity",type:((k=(N=v.data)==null?void 0:N.severity)==null?void 0:k.toLowerCase())||"low",children:(C=v.data)==null?void 0:C.severity})," ","vulnerability on ",a.jsx("code",{className:"text-primary font-mono",children:(E=v.data)==null?void 0:E.ip}),":"," ",a.jsx("span",{className:"text-white",children:(O=v.data)==null?void 0:O.title})]});case"phaseStarted":return a.jsxs(a.Fragment,{children:["Started phase: ",a.jsx("span",{className:"text-primary font-medium",children:(A=v.data)==null?void 0:A.phase})]});case"scanStarted":return a.jsx("span",{className:"text-green-400 font-medium",children:"Scan started"});case"scanCompleted":return a.jsxs(a.Fragment,{children:[a.jsx("span",{className:"text-green-400 font-medium",children:"Scan completed"})," - Found"," ",((M=v.data)==null?void 0:M.total_hosts)||0," hosts in ",((T=v.data)==null?void 0:T.duration)||0,"s"]});case"error":return a.jsxs("span",{className:"text-red-400",children:["Error: ",(H=v.data)==null?void 0:H.message]});case"vpnConnecting":return a.jsxs(a.Fragment,{children:[a.jsx("span",{className:"text-yellow-400",children:"Connecting to VPN:"})," ",a.jsx("span",{className:"text-white",children:(z=v.data)==null?void 0:z.config_name})]});case"vpnConnected":return a.jsxs(a.Fragment,{children:[a.jsx("span",{className:"text-green-400 font-medium",children:"VPN connected"})," - ",(B=v.data)==null?void 0:B.config_name,((Y=v.data)==null?void 0:Y.assigned_ip)&&a.jsxs(a.Fragment,{children:[" (IP: ",a.jsx("code",{className:"text-primary font-mono",children:v.data.assigned_ip}),")"]})]});case"vpnDisconnecting":return a.jsxs(a.Fragment,{children:[a.jsx("span",{className:"text-yellow-400",children:"Disconnecting from VPN:"})," ",a.jsx("span",{className:"text-white",children:(U=v.data)==null?void 0:U.config_name})]});case"vpnDisconnected":return a.jsxs(a.Fragment,{children:[a.jsx("span",{className:"text-slate-400",children:"VPN disconnected:"})," ",a.jsx("span",{className:"text-white",children:(G=v.data)==null?void 0:G.config_name})]});case"vpnError":return a.jsxs(a.Fragment,{children:[a.jsxs("span",{className:"text-red-400",children:["VPN Error (",(Z=v.data)==null?void 0:Z.config_name,"):"]})," ",(X=v.data)==null?void 0:X.message]});default:return a.jsx("span",{className:"text-slate-400",children:v.type})}},w=v=>{var j;if(v.type==="vulnerabilityFound")switch((j=v.data)==null?void 0:j.severity){case"Critical":return"border-l-severity-critical bg-severity-critical/5";case"High":return"border-l-severity-high bg-severity-high/5";case"Medium":return"border-l-severity-medium bg-severity-medium/5";default:return"border-l-severity-low bg-severity-low/5"}return v.type==="vpnConnecting"||v.type==="vpnDisconnecting"?"border-l-yellow-500 bg-yellow-500/5":v.type==="vpnConnected"?"border-l-green-500 bg-green-500/5":v.type==="vpnError"?"border-l-red-500 bg-red-500/5":"border-l-slate-600 bg-dark-bg"};return e?a.jsxs(fe,{children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(bt,{className:"h-5 w-5 text-primary"}),a.jsx("h3",{className:"text-lg font-semibold text-white",children:"Live Activity Feed"}),a.jsxs("span",{className:"text-sm text-slate-400",children:["(",f.length," events)"]})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsxs("button",{onClick:()=>i(!s),className:`flex items-center gap-1 px-3 py-1.5 rounded-lg text-sm transition-colors ${s?"bg-red-500/20 text-red-400 border border-red-500/50":"bg-dark-surface text-slate-400 border border-dark-border hover:border-primary"}`,children:[a.jsx(zl,{className:"h-3 w-3"}),s?"Critical/High Only":"All Events"]}),a.jsx("button",{onClick:()=>c(!l),className:`px-3 py-1.5 rounded-lg text-sm transition-colors ${l?"bg-primary text-white":"bg-dark-surface text-slate-400 border border-dark-border"}`,children:"Auto-scroll"})]})]}),a.jsxs("div",{className:"space-y-2 max-h-96 overflow-y-auto pr-2 custom-scrollbar",children:[f.length===0?a.jsx("div",{className:"text-center py-8 text-slate-500",children:s?"No critical/high severity findings yet":"Waiting for scan events..."}):f.map((v,j)=>a.jsx("div",{className:`border-l-4 rounded-r-lg p-3 transition-all hover:bg-dark-surface/50 ${w(v)}`,children:a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx("div",{className:"mt-0.5",children:h(v.type)}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("p",{className:"text-sm text-slate-300",children:x(v)}),a.jsx("p",{className:"text-xs text-slate-500 mt-1",children:Gt(new Date(v.timestamp),"HH:mm:ss.SSS")})]})]})},j)),a.jsx("div",{ref:o})]})]}):a.jsx(fe,{children:a.jsx("div",{className:"text-center py-8 text-slate-500",children:"Select a running scan to view live activity"})})},Cp={Critical:10,High:7,Medium:4,Low:1};function na(e){let r=0;const n=e.vulnerabilities.reduce((o,l)=>o+Cp[l.severity],0),s=e.ports.filter(o=>o.state==="Open").length,i=Math.min(s*2,30);return r=n+i,Math.min(Math.round(r),100)}function Pp(e){return e>=70?"Critical":e>=50?"High":e>=25?"Medium":"Low"}function _c(e){const r={Critical:0,High:0,Medium:0,Low:0};return e.forEach(n=>{n.vulnerabilities.forEach(s=>{r[s.severity]++})}),r}function Ep(e){const r=new Map;return e.forEach(n=>{n.ports.filter(s=>s.state==="Open").forEach(s=>{var o;const i=r.get(s.port);i?i.count++:r.set(s.port,{count:1,service:((o=s.service)==null?void 0:o.name)||`Port ${s.port}`})})}),Array.from(r.entries()).map(([n,s])=>({port:n,...s})).sort((n,s)=>s.count-n.count).slice(0,10)}function Op(e){const r=e.length,n=e.reduce((l,c)=>l+c.ports.filter(u=>u.state==="Open").length,0),s=_c(e),i=Object.values(s).reduce((l,c)=>l+c,0),o=s.Critical;return{totalHosts:r,totalPorts:n,totalVulnerabilities:i,criticalVulnerabilities:o,vulnerabilities:s}}function jc(e){switch(e.toLowerCase()){case"critical":return"critical";case"high":return"high";case"medium":return"medium";case"low":case"info":case"informational":return"low";default:return"low"}}const Rp=({vulnerability:e,compact:r=!1})=>{const[n,s]=R.useState(!1),i=()=>{e.cve_id&&(navigator.clipboard.writeText(e.cve_id),Q.success("CVE ID copied to clipboard"))},o=c=>`https://nvd.nist.gov/vuln/detail/${c}`,l=c=>{switch(c){case"Critical":return"border-severity-critical bg-severity-critical/10";case"High":return"border-severity-high bg-severity-high/10";case"Medium":return"border-severity-medium bg-severity-medium/10";case"Low":return"border-severity-low bg-severity-low/10";default:return"border-slate-600 bg-slate-600/10"}};return a.jsx("div",{className:`border-l-4 rounded-lg p-4 ${l(e.severity)}`,children:a.jsx("div",{className:"flex items-start justify-between gap-3",children:a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx(ke,{className:"h-4 w-4 text-red-400 flex-shrink-0"}),a.jsx("h4",{className:"text-white font-semibold text-sm truncate",children:e.title})]}),a.jsxs("div",{className:"flex items-center gap-2 mb-2 flex-wrap",children:[e.cve_id&&a.jsxs("div",{className:"flex items-center gap-1 bg-dark-surface px-2 py-1 rounded",children:[a.jsx("code",{className:"text-xs text-primary font-mono",children:e.cve_id}),a.jsx("button",{onClick:i,className:"text-slate-400 hover:text-white transition-colors",title:"Copy CVE ID",children:a.jsx(Rs,{className:"h-3 w-3"})}),a.jsx("a",{href:o(e.cve_id),target:"_blank",rel:"noopener noreferrer",className:"text-slate-400 hover:text-white transition-colors",title:"View on NVD",children:a.jsx(Ll,{className:"h-3 w-3"})})]}),a.jsx(et,{variant:"severity",type:jc(e.severity),children:e.severity}),e.affected_service&&a.jsxs("span",{className:"text-xs text-slate-400",children:["Affects: ",a.jsx("span",{className:"text-slate-300 font-mono",children:e.affected_service})]})]}),!r&&e.description&&a.jsxs(a.Fragment,{children:[a.jsx("div",{className:`text-sm text-slate-300 mt-2 ${n?"":"line-clamp-2"}`,children:e.description}),e.description.length>100&&a.jsx("button",{onClick:()=>s(!n),className:"flex items-center gap-1 text-xs text-primary hover:text-primary-light transition-colors mt-2",children:n?a.jsxs(a.Fragment,{children:["Show less ",a.jsx(Ts,{className:"h-3 w-3"})]}):a.jsxs(a.Fragment,{children:["Show more ",a.jsx(hr,{className:"h-3 w-3"})]})})]})]})})})},Tp=({banner:e,service:r})=>{const[n,s]=R.useState(!1),i=()=>{navigator.clipboard.writeText(e),Q.success("Service banner copied to clipboard")},o=e.length>100,l=n||!o?e:e.substring(0,100)+"...";return a.jsxs("div",{className:"bg-dark-bg border border-dark-border rounded-lg p-3 mt-2",children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(vd,{className:"h-4 w-4 text-green-400"}),a.jsxs("span",{className:"text-xs font-semibold text-slate-300",children:["Service Banner ",r&&`(${r})`]})]}),a.jsx("button",{onClick:i,className:"text-slate-400 hover:text-white transition-colors p-1 rounded hover:bg-dark-surface",title:"Copy banner",children:a.jsx(Rs,{className:"h-3 w-3"})})]}),a.jsx("pre",{className:"bg-slate-900 rounded p-2 overflow-x-auto",children:a.jsx("code",{className:"text-xs text-green-400 font-mono whitespace-pre-wrap break-all",children:l})}),o&&a.jsx("button",{onClick:()=>s(!n),className:"flex items-center gap-1 text-xs text-primary hover:text-primary-light transition-colors mt-2",children:n?a.jsxs(a.Fragment,{children:["Show less ",a.jsx(Ts,{className:"h-3 w-3"})]}):a.jsxs(a.Fragment,{children:["Show full banner ",a.jsx(hr,{className:"h-3 w-3"})]})})]})};function Ap(e){switch(e){case"A+":return{bg:"bg-emerald-500",text:"text-white",border:"border-emerald-600",glow:"shadow-emerald-500/50"};case"A":return{bg:"bg-green-500",text:"text-white",border:"border-green-600",glow:"shadow-green-500/50"};case"A-":return{bg:"bg-green-400",text:"text-white",border:"border-green-500",glow:"shadow-green-400/50"};case"B+":return{bg:"bg-lime-500",text:"text-white",border:"border-lime-600",glow:"shadow-lime-500/50"};case"B":return{bg:"bg-yellow-500",text:"text-gray-900",border:"border-yellow-600",glow:"shadow-yellow-500/50"};case"B-":return{bg:"bg-yellow-400",text:"text-gray-900",border:"border-yellow-500",glow:"shadow-yellow-400/50"};case"C":return{bg:"bg-orange-500",text:"text-white",border:"border-orange-600",glow:"shadow-orange-500/50"};case"D":return{bg:"bg-red-400",text:"text-white",border:"border-red-500",glow:"shadow-red-400/50"};case"F":return{bg:"bg-red-600",text:"text-white",border:"border-red-700",glow:"shadow-red-600/50"};case"T":return{bg:"bg-purple-600",text:"text-white",border:"border-purple-700",glow:"shadow-purple-600/50"};case"M":return{bg:"bg-fuchsia-600",text:"text-white",border:"border-fuchsia-700",glow:"shadow-fuchsia-600/50"};default:return{bg:"bg-gray-500",text:"text-white",border:"border-gray-600"}}}function to(e){switch(e){case"A+":return"Excellent - Best possible SSL/TLS configuration with HSTS";case"A":return"Very Good - Strong SSL/TLS configuration";case"A-":return"Good - Minor improvements possible";case"B+":case"B":case"B-":return"Acceptable - Some security issues present";case"C":return"Weak - Significant security issues";case"D":return"Poor - Serious security vulnerabilities";case"F":return"Failed - Critical security issues";case"T":return"Trust Issue - Certificate not from a trusted CA (self-signed)";case"M":return"Mismatch - Certificate hostname does not match";default:return"Unknown - Grade could not be determined"}}function Dp(e){switch(e){case"T":return _d;case"M":return wd;default:return null}}function Mp(e){return e>=90?"bg-emerald-500":e>=80?"bg-green-500":e>=70?"bg-lime-500":e>=60?"bg-yellow-500":e>=50?"bg-orange-500":"bg-red-500"}function $p(e){switch(e){case"Critical":return{bg:"bg-red-600",text:"text-white"};case"High":return{bg:"bg-orange-500",text:"text-white"};case"Medium":return{bg:"bg-yellow-500",text:"text-gray-900"};case"Low":return{bg:"bg-blue-500",text:"text-white"};case"Informational":return{bg:"bg-gray-500",text:"text-white"};default:return{bg:"bg-gray-500",text:"text-white"}}}function In({label:e,score:r,icon:n}){return a.jsxs("div",{className:"space-y-1",children:[a.jsxs("div",{className:"flex items-center justify-between text-sm",children:[a.jsxs("div",{className:"flex items-center gap-2 text-gray-300",children:[a.jsx(n,{className:"w-4 h-4"}),a.jsx("span",{children:e})]}),a.jsxs("span",{className:"font-mono text-gray-200",children:[r,"/100"]})]}),a.jsx("div",{className:"h-2 bg-gray-700 rounded-full overflow-hidden",children:a.jsx("div",{className:`h-full ${Mp(r)} transition-all duration-300`,style:{width:`${r}%`}})})]})}function zp({vuln:e}){const r=$p(e.severity);return a.jsx("div",{className:"bg-gray-800 rounded-lg p-3 border border-gray-700",children:a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx("span",{className:`px-2 py-0.5 text-xs font-medium rounded ${r.bg} ${r.text}`,children:e.severity}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"font-medium text-gray-200",children:e.name}),e.cve&&a.jsx("span",{className:"text-xs text-cyan-400 font-mono",children:e.cve})]}),a.jsx("p",{className:"text-sm text-gray-400 mt-1",children:e.description})]})]})})}function Lp({grade:e,showDetails:r=!0,compact:n=!1,animate:s=!0}){const[i,o]=R.useState(!1),[l,c]=R.useState(!s),u=Ap(e.grade),d=Dp(e.grade),f=e.grade==="T"||e.grade==="M";return R.useEffect(()=>{if(s&&!l){const h=setTimeout(()=>c(!0),100);return()=>clearTimeout(h)}},[s,l]),n?a.jsx("div",{className:`inline-flex items-center justify-center w-8 h-8 rounded-lg font-bold text-sm
          ${u.bg} ${u.text} border ${u.border}
          ${l?"opacity-100 scale-100":"opacity-0 scale-75"}
          ${u.glow?`shadow-lg ${u.glow}`:""}
          transition-all duration-300 ease-out`,title:`SSL/TLS Grade: ${e.grade} - ${to(e.grade)} (Score: ${e.overall_score}/100)`,children:d?a.jsx(d,{className:"w-4 h-4"}):e.grade}):a.jsxs("div",{className:"bg-gray-800/50 rounded-lg border border-gray-700",children:[a.jsxs("div",{className:`flex items-center justify-between p-3 ${r?"cursor-pointer hover:bg-gray-800/80":""} transition-colors`,onClick:()=>r&&o(!i),children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:`flex items-center justify-center w-12 h-12 rounded-lg font-bold text-xl
              ${u.bg} ${u.text} border-2 ${u.border}
              ${l?"opacity-100 scale-100":"opacity-0 scale-75"}
              ${u.glow?`shadow-lg ${u.glow}`:""}
              transition-all duration-500 ease-out`,children:d?a.jsx(d,{className:"w-6 h-6"}):e.grade}),a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-gray-200 font-medium",children:"SSL/TLS Grade"}),f&&a.jsx("span",{className:`text-xs px-2 py-0.5 rounded ${e.grade==="T"?"bg-purple-500/20 text-purple-400":"bg-fuchsia-500/20 text-fuchsia-400"}`,children:e.grade==="T"?"Trust Issue":"Hostname Mismatch"}),!f&&e.grade_capped&&a.jsx("span",{className:"text-xs bg-yellow-500/20 text-yellow-400 px-2 py-0.5 rounded",children:"Capped"})]}),a.jsx("div",{className:"text-sm text-gray-400",children:f?a.jsx("span",{children:to(e.grade)}):a.jsxs(a.Fragment,{children:["Overall Score: ",e.overall_score,"/100",e.vulnerabilities_found.length>0&&a.jsxs("span",{className:"ml-2 text-red-400",children:["(",e.vulnerabilities_found.length," issue",e.vulnerabilities_found.length!==1?"s":"",")"]})]})})]})]}),r&&a.jsx("button",{className:"text-gray-400 hover:text-gray-200 p-1 transition-colors",children:i?a.jsx(Ts,{className:"w-5 h-5"}):a.jsx(hr,{className:"w-5 h-5"})})]}),r&&i&&a.jsxs("div",{className:"border-t border-gray-700 p-4 space-y-4",children:[e.grade_capped&&e.cap_reason&&a.jsxs("div",{className:"bg-yellow-500/10 border border-yellow-500/30 rounded-lg p-3 flex items-start gap-2",children:[a.jsx(Ee,{className:"w-5 h-5 text-yellow-500 flex-shrink-0 mt-0.5"}),a.jsxs("div",{children:[a.jsx("span",{className:"text-yellow-400 font-medium",children:"Grade Capped"}),a.jsx("p",{className:"text-sm text-yellow-300/80 mt-1",children:e.cap_reason})]})]}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("h4",{className:"text-sm font-medium text-gray-300 flex items-center gap-2",children:[a.jsx(ke,{className:"w-4 h-4"}),"Score Breakdown"]}),a.jsxs("div",{className:"grid gap-3",children:[a.jsx(In,{label:"Protocol",score:e.protocol_score,icon:yn}),a.jsx(In,{label:"Cipher Suites",score:e.cipher_score,icon:us}),a.jsx(In,{label:"Certificate",score:e.certificate_score,icon:pa}),a.jsx(In,{label:"Key Exchange",score:e.key_exchange_score,icon:ke})]})]}),e.vulnerabilities_found.length>0&&a.jsxs("div",{className:"space-y-3",children:[a.jsxs("h4",{className:"text-sm font-medium text-gray-300 flex items-center gap-2",children:[a.jsx(Ee,{className:"w-4 h-4 text-red-400"}),"Issues Found (",e.vulnerabilities_found.length,")"]}),a.jsx("div",{className:"space-y-2 max-h-64 overflow-y-auto",children:e.vulnerabilities_found.map((h,x)=>a.jsx(zp,{vuln:h},`${h.id}-${x}`))})]}),e.recommendations.length>0&&a.jsxs("div",{className:"space-y-3",children:[a.jsxs("h4",{className:"text-sm font-medium text-gray-300 flex items-center gap-2",children:[a.jsx(Ze,{className:"w-4 h-4 text-green-400"}),"Recommendations (",e.recommendations.length,")"]}),a.jsx("ul",{className:"space-y-2",children:e.recommendations.map((h,x)=>a.jsxs("li",{className:"flex items-start gap-2 text-sm text-gray-400",children:[a.jsx(Va,{className:"w-4 h-4 text-cyan-400 flex-shrink-0 mt-0.5"}),a.jsx("span",{children:h})]},x))})]}),e.vulnerabilities_found.length===0&&e.recommendations.length===0&&a.jsxs("div",{className:"bg-emerald-500/10 border border-emerald-500/30 rounded-lg p-3 flex items-center gap-2",children:[a.jsx(Ze,{className:"w-5 h-5 text-emerald-500"}),a.jsx("span",{className:"text-emerald-400",children:"Excellent! No security issues or recommendations found."})]})]})]})}function Fp(e){return e>=90?"text-emerald-400":e>=80?"text-green-400":e>=70?"text-lime-400":e>=60?"text-yellow-400":e>=50?"text-orange-400":"text-red-400"}function Ip(e){return e>=90?"bg-emerald-500":e>=80?"bg-green-500":e>=70?"bg-lime-500":e>=60?"bg-yellow-500":e>=50?"bg-orange-500":"bg-red-500"}function Hp(e){switch(e){case"A+":return{bg:"bg-emerald-500",text:"text-white",border:"border-emerald-600"};case"A":return{bg:"bg-green-500",text:"text-white",border:"border-green-600"};case"A-":return{bg:"bg-green-400",text:"text-white",border:"border-green-500"};case"B+":return{bg:"bg-lime-500",text:"text-white",border:"border-lime-600"};case"B":return{bg:"bg-yellow-500",text:"text-gray-900",border:"border-yellow-600"};case"B-":return{bg:"bg-yellow-400",text:"text-gray-900",border:"border-yellow-500"};case"C":return{bg:"bg-orange-500",text:"text-white",border:"border-orange-600"};case"D":return{bg:"bg-red-400",text:"text-white",border:"border-red-500"};case"F":return{bg:"bg-red-600",text:"text-white",border:"border-red-700"};case"T":return{bg:"bg-purple-600",text:"text-white",border:"border-purple-700"};case"M":return{bg:"bg-fuchsia-600",text:"text-white",border:"border-fuchsia-700"};default:return{bg:"bg-gray-500",text:"text-white",border:"border-gray-600"}}}function Up(e){switch(e){case"Critical":return"bg-red-600 text-white";case"High":return"bg-orange-500 text-white";case"Medium":return"bg-yellow-500 text-gray-900";case"Low":return"bg-blue-500 text-white";case"Informational":return"bg-gray-500 text-white";default:return"bg-gray-500 text-white"}}function Hn({label:e,score:r,icon:n,description:s}){return a.jsxs("div",{className:"bg-gray-800 rounded-lg p-4",children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(n,{className:"w-5 h-5 text-gray-400"}),a.jsx("span",{className:"font-medium text-gray-200",children:e})]}),a.jsxs("span",{className:`font-bold text-lg ${Fp(r)}`,children:[r,"/100"]})]}),a.jsx("div",{className:"h-3 bg-gray-700 rounded-full overflow-hidden",children:a.jsx("div",{className:`h-full ${Ip(r)} transition-all duration-500`,style:{width:`${r}%`}})}),s&&a.jsx("p",{className:"text-xs text-gray-500 mt-2",children:s})]})}function qp({protocol:e,isWeak:r}){return a.jsxs("div",{className:`flex items-center gap-2 px-3 py-2 rounded-lg ${r?"bg-red-500/10 border border-red-500/30":"bg-green-500/10 border border-green-500/30"}`,children:[r?a.jsx(Ft,{className:"w-4 h-4 text-red-400"}):a.jsx(Ze,{className:"w-4 h-4 text-green-400"}),a.jsx("span",{className:r?"text-red-300":"text-green-300",children:e}),r&&a.jsx("span",{className:"text-xs text-red-400 ml-auto",children:"Weak"})]})}function Wp({cipher:e,isWeak:r}){return a.jsxs("div",{className:`flex items-center gap-2 px-3 py-1.5 rounded text-sm ${r?"bg-red-500/10 text-red-300":"bg-gray-700/50 text-gray-300"}`,children:[r&&a.jsx(Ee,{className:"w-3 h-3 text-red-400"}),a.jsx("span",{className:"font-mono text-xs truncate",children:e})]})}function Bp({sslInfo:e,hostname:r}){const n=e.ssl_grade;if(!n)return a.jsx("div",{className:"bg-gray-800/50 rounded-lg p-6 border border-gray-700",children:a.jsx("p",{className:"text-gray-400 text-center",children:"SSL grade information not available"})});const s=Hp(n.grade),i=n.grade==="T"||n.grade==="M";return a.jsxs("div",{className:"bg-gray-900 rounded-xl border border-gray-700 overflow-hidden",children:[a.jsx("div",{className:"bg-gradient-to-r from-gray-800 to-gray-900 p-6 border-b border-gray-700",children:a.jsxs("div",{className:"flex items-center gap-6",children:[a.jsx("div",{className:`flex items-center justify-center w-24 h-24 rounded-xl font-bold text-4xl shadow-xl ${s.bg} ${s.text} border-4 ${s.border}`,children:n.grade}),a.jsxs("div",{className:"flex-1",children:[a.jsxs("h2",{className:"text-xl font-bold text-white mb-2",children:["SSL/TLS Security Grade",r&&a.jsxs("span",{className:"text-gray-400 font-normal ml-2",children:["for ",r]})]}),i?a.jsxs("div",{className:`inline-flex items-center gap-2 px-3 py-1.5 rounded-lg ${n.grade==="T"?"bg-purple-500/20 text-purple-300":"bg-fuchsia-500/20 text-fuchsia-300"}`,children:[a.jsx(Ee,{className:"w-4 h-4"}),a.jsx("span",{children:n.grade==="T"?"Certificate not trusted (self-signed or untrusted CA)":"Certificate hostname mismatch"})]}):a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsxs("div",{className:"text-gray-400",children:[a.jsx("span",{className:"text-2xl font-bold text-white",children:n.overall_score}),a.jsx("span",{className:"text-gray-500",children:"/100"})]}),n.grade_capped&&n.cap_reason&&a.jsxs("div",{className:"flex items-center gap-2 text-yellow-400 text-sm",children:[a.jsx(Ee,{className:"w-4 h-4"}),a.jsx("span",{children:"Grade capped"})]})]})]})]})}),a.jsxs("div",{className:"p-6 space-y-6",children:[a.jsxs("div",{children:[a.jsxs("h3",{className:"text-lg font-semibold text-gray-200 mb-4 flex items-center gap-2",children:[a.jsx(ke,{className:"w-5 h-5 text-cyan-400"}),"Score Breakdown"]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsx(Hn,{label:"Protocol Support",score:n.protocol_score,icon:yn,description:"TLS version support and configuration"}),a.jsx(Hn,{label:"Cipher Strength",score:n.cipher_score,icon:us,description:"Encryption algorithms and key sizes"}),a.jsx(Hn,{label:"Certificate",score:n.certificate_score,icon:pa,description:"Certificate validity and chain"}),a.jsx(Hn,{label:"Key Exchange",score:n.key_exchange_score,icon:ke,description:"Forward secrecy and key exchange methods"})]})]}),a.jsxs("div",{children:[a.jsxs("h3",{className:"text-lg font-semibold text-gray-200 mb-4 flex items-center gap-2",children:[a.jsx(pa,{className:"w-5 h-5 text-cyan-400"}),"Certificate Details"]}),a.jsxs("div",{className:"bg-gray-800 rounded-lg p-4 space-y-3",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("span",{className:"text-xs text-gray-500 uppercase tracking-wider",children:"Subject"}),a.jsx("p",{className:"text-gray-200 font-mono text-sm truncate",title:e.subject,children:e.subject})]}),a.jsxs("div",{children:[a.jsx("span",{className:"text-xs text-gray-500 uppercase tracking-wider",children:"Issuer"}),a.jsx("p",{className:"text-gray-200 font-mono text-sm truncate",title:e.issuer,children:e.issuer})]}),a.jsxs("div",{children:[a.jsx("span",{className:"text-xs text-gray-500 uppercase tracking-wider",children:"Valid From"}),a.jsx("p",{className:"text-gray-200",children:new Date(e.valid_from).toLocaleDateString()})]}),a.jsxs("div",{children:[a.jsx("span",{className:"text-xs text-gray-500 uppercase tracking-wider",children:"Valid Until"}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("p",{className:e.cert_expired?"text-red-400":"text-gray-200",children:new Date(e.valid_until).toLocaleDateString()}),e.days_until_expiry!==null&&a.jsx("span",{className:`text-xs px-2 py-0.5 rounded ${e.cert_expired?"bg-red-500/20 text-red-400":e.days_until_expiry<30?"bg-yellow-500/20 text-yellow-400":"bg-green-500/20 text-green-400"}`,children:e.cert_expired?`Expired ${Math.abs(e.days_until_expiry)} days ago`:`${e.days_until_expiry} days`})]})]})]}),a.jsxs("div",{className:"flex flex-wrap gap-2 pt-2 border-t border-gray-700",children:[e.self_signed&&a.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-purple-500/20 text-purple-400 text-xs rounded",children:[a.jsx(Ee,{className:"w-3 h-3"}),"Self-Signed"]}),e.hostname_mismatch&&a.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-fuchsia-500/20 text-fuchsia-400 text-xs rounded",children:[a.jsx(Ft,{className:"w-3 h-3"}),"Hostname Mismatch"]}),e.hsts_enabled?a.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-green-500/20 text-green-400 text-xs rounded",children:[a.jsx(Ze,{className:"w-3 h-3"}),"HSTS Enabled"]}):a.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-yellow-500/20 text-yellow-400 text-xs rounded",children:[a.jsx(Ee,{className:"w-3 h-3"}),"HSTS Not Enabled"]})]})]})]}),a.jsxs("div",{children:[a.jsxs("h3",{className:"text-lg font-semibold text-gray-200 mb-4 flex items-center gap-2",children:[a.jsx(yn,{className:"w-5 h-5 text-cyan-400"}),"Protocol Support"]}),a.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-2",children:e.protocols.map(o=>a.jsx(qp,{protocol:o,isWeak:e.weak_protocols.includes(o)},o))})]}),e.cipher_suites.length>0&&a.jsxs("div",{children:[a.jsxs("h3",{className:"text-lg font-semibold text-gray-200 mb-4 flex items-center gap-2",children:[a.jsx(us,{className:"w-5 h-5 text-cyan-400"}),"Cipher Suites",a.jsxs("span",{className:"text-sm font-normal text-gray-500",children:["(",e.cipher_suites.length,")"]})]}),a.jsx("div",{className:"bg-gray-800 rounded-lg p-4 max-h-48 overflow-y-auto",children:a.jsx("div",{className:"flex flex-wrap gap-2",children:e.cipher_suites.map(o=>a.jsx(Wp,{cipher:o,isWeak:e.weak_ciphers.includes(o)},o))})})]}),n.vulnerabilities_found.length>0&&a.jsxs("div",{children:[a.jsxs("h3",{className:"text-lg font-semibold text-gray-200 mb-4 flex items-center gap-2",children:[a.jsx(Ee,{className:"w-5 h-5 text-red-400"}),"Security Issues",a.jsxs("span",{className:"text-sm font-normal text-red-400",children:["(",n.vulnerabilities_found.length,")"]})]}),a.jsx("div",{className:"space-y-3",children:n.vulnerabilities_found.map((o,l)=>a.jsx("div",{className:"bg-gray-800 rounded-lg p-4 border border-gray-700",children:a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx("span",{className:`px-2 py-0.5 text-xs font-medium rounded flex-shrink-0 ${Up(o.severity)}`,children:o.severity}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[a.jsx("span",{className:"font-medium text-gray-200",children:o.name}),o.cve&&a.jsxs("a",{href:`https://nvd.nist.gov/vuln/detail/${o.cve}`,target:"_blank",rel:"noopener noreferrer",className:"text-xs text-cyan-400 font-mono hover:underline flex items-center gap-1",children:[o.cve,a.jsx(Ll,{className:"w-3 h-3"})]})]}),a.jsx("p",{className:"text-sm text-gray-400 mt-1",children:o.description})]})]})},`${o.id}-${l}`))})]}),n.recommendations.length>0&&a.jsxs("div",{children:[a.jsxs("h3",{className:"text-lg font-semibold text-gray-200 mb-4 flex items-center gap-2",children:[a.jsx(Ze,{className:"w-5 h-5 text-green-400"}),"Recommendations"]}),a.jsx("div",{className:"bg-gray-800 rounded-lg p-4 space-y-2",children:n.recommendations.map((o,l)=>a.jsxs("div",{className:"flex items-start gap-3 text-sm",children:[a.jsx(Va,{className:"w-4 h-4 text-cyan-400 flex-shrink-0 mt-0.5"}),a.jsx("span",{className:"text-gray-300",children:o})]},l))})]}),e.chain_issues.length>0&&a.jsxs("div",{children:[a.jsxs("h3",{className:"text-lg font-semibold text-gray-200 mb-4 flex items-center gap-2",children:[a.jsx(jt,{className:"w-5 h-5 text-yellow-400"}),"Certificate Chain Issues"]}),a.jsx("div",{className:"bg-yellow-500/10 border border-yellow-500/30 rounded-lg p-4 space-y-2",children:e.chain_issues.map((o,l)=>a.jsxs("div",{className:"flex items-start gap-2 text-sm text-yellow-300",children:[a.jsx(Ee,{className:"w-4 h-4 flex-shrink-0 mt-0.5"}),a.jsx("span",{children:o})]},l))})]}),n.vulnerabilities_found.length===0&&n.recommendations.length===0&&e.chain_issues.length===0&&a.jsxs("div",{className:"bg-emerald-500/10 border border-emerald-500/30 rounded-lg p-6 flex items-center justify-center gap-3",children:[a.jsx(Ze,{className:"w-6 h-6 text-emerald-400"}),a.jsx("span",{className:"text-emerald-300 text-lg",children:"Excellent! SSL/TLS configuration meets best practices."})]})]})]})}const Vp=({sslInfo:e,port:r,hostname:n})=>{const[s,i]=R.useState(!1),l=e.cert_expired||e.hostname_mismatch?"critical":e.weak_protocols.length>0||e.weak_ciphers.length>0||e.self_signed?"warning":!e.hsts_enabled&&r===443?"info":"good",c=()=>e.cert_expired?"text-red-400":e.days_until_expiry?e.days_until_expiry<30?"text-yellow-400":e.days_until_expiry<90?"text-blue-400":"text-green-400":"text-slate-400";return s?a.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/80",children:a.jsxs("div",{className:"relative w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:[a.jsx("button",{onClick:()=>i(!1),className:"absolute top-4 right-4 z-10 p-2 bg-gray-800 hover:bg-gray-700 rounded-lg text-gray-400 hover:text-white transition-colors",children:a.jsx(Ft,{className:"w-6 h-6"})}),a.jsx(Bp,{sslInfo:e,hostname:n})]})}):a.jsxs("div",{className:"mt-3 space-y-3 border-t border-dark-border pt-3",children:[e.ssl_grade&&a.jsxs("div",{className:"relative",children:[a.jsx(Lp,{grade:e.ssl_grade,showDetails:!0,animate:!0}),a.jsx("button",{onClick:()=>i(!0),className:"absolute top-3 right-12 p-1.5 text-gray-400 hover:text-cyan-400 hover:bg-gray-700/50 rounded transition-colors",title:"View detailed SSL/TLS breakdown",children:a.jsx(Fl,{className:"w-4 h-4"})})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(yn,{className:"h-4 w-4 text-primary"}),a.jsx("span",{className:"text-sm font-semibold text-white",children:"SSL/TLS Certificate"}),!e.ssl_grade&&a.jsxs(a.Fragment,{children:[l==="critical"&&a.jsx(et,{variant:"severity",type:"critical",children:"Critical Issues"}),l==="warning"&&a.jsx(et,{variant:"severity",type:"high",children:"Security Issues"}),l==="good"&&a.jsx(et,{variant:"severity",type:"low",children:"Secure"})]})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-3 text-xs",children:[a.jsxs("div",{className:"bg-dark-bg rounded p-2",children:[a.jsxs("div",{className:"flex items-center gap-1 mb-1",children:[e.cert_valid&&!e.cert_expired?a.jsx(Ze,{className:"h-3 w-3 text-green-500"}):a.jsx(Ft,{className:"h-3 w-3 text-red-500"}),a.jsx("span",{className:"font-medium text-slate-300",children:"Certificate Status"})]}),a.jsx("div",{className:e.cert_expired?"text-red-400":"text-green-400",children:e.cert_expired?"Expired":"Valid"})]}),a.jsxs("div",{className:"bg-dark-bg rounded p-2",children:[a.jsxs("div",{className:"flex items-center gap-1 mb-1",children:[a.jsx(Rr,{className:"h-3 w-3 text-slate-400"}),a.jsx("span",{className:"font-medium text-slate-300",children:"Expires In"})]}),a.jsx("div",{className:c(),children:e.days_until_expiry!==null?e.cert_expired?`${Math.abs(e.days_until_expiry)} days ago`:`${e.days_until_expiry} days`:"Unknown"})]}),a.jsxs("div",{className:"bg-dark-bg rounded p-2 col-span-2",children:[a.jsxs("div",{className:"flex items-center gap-1 mb-1",children:[a.jsx(jt,{className:"h-3 w-3 text-slate-400"}),a.jsx("span",{className:"font-medium text-slate-300",children:"Subject"})]}),a.jsx("div",{className:"text-slate-400 truncate",title:e.subject,children:e.subject})]}),a.jsxs("div",{className:"bg-dark-bg rounded p-2 col-span-2",children:[a.jsxs("div",{className:"flex items-center gap-1 mb-1",children:[a.jsx(ke,{className:"h-3 w-3 text-slate-400"}),a.jsx("span",{className:"font-medium text-slate-300",children:"Issuer"})]}),a.jsx("div",{className:"text-slate-400 truncate",title:e.issuer,children:e.issuer})]}),a.jsxs("div",{className:"bg-dark-bg rounded p-2",children:[a.jsx("span",{className:"font-medium text-slate-300",children:"Valid From"}),a.jsx("div",{className:"text-slate-400 text-[10px] mt-1",children:new Date(e.valid_from).toLocaleDateString()})]}),a.jsxs("div",{className:"bg-dark-bg rounded p-2",children:[a.jsx("span",{className:"font-medium text-slate-300",children:"Valid Until"}),a.jsx("div",{className:"text-slate-400 text-[10px] mt-1",children:new Date(e.valid_until).toLocaleDateString()})]})]}),(e.self_signed||e.hostname_mismatch||e.weak_protocols.length>0||e.weak_ciphers.length>0||!e.hsts_enabled||e.chain_issues.length>0)&&a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"flex items-center gap-1 text-sm font-medium text-yellow-400",children:[a.jsx(Ee,{className:"h-4 w-4"}),"Security Findings"]}),e.self_signed&&a.jsxs("div",{className:"bg-yellow-500/10 border border-yellow-500/20 rounded p-2 text-xs",children:[a.jsx("div",{className:"text-yellow-400 font-medium",children:"Self-Signed Certificate"}),a.jsx("div",{className:"text-slate-400 mt-1",children:"Certificate is not from a trusted Certificate Authority"})]}),e.hostname_mismatch&&a.jsxs("div",{className:"bg-red-500/10 border border-red-500/20 rounded p-2 text-xs",children:[a.jsx("div",{className:"text-red-400 font-medium",children:"Hostname Mismatch"}),a.jsx("div",{className:"text-slate-400 mt-1",children:"Certificate does not match the hostname"})]}),e.weak_protocols.length>0&&a.jsxs("div",{className:"bg-red-500/10 border border-red-500/20 rounded p-2 text-xs",children:[a.jsx("div",{className:"text-red-400 font-medium",children:"Weak Protocols"}),a.jsx("div",{className:"text-slate-400 mt-1",children:e.weak_protocols.join(", ")})]}),e.weak_ciphers.length>0&&a.jsxs("div",{className:"bg-yellow-500/10 border border-yellow-500/20 rounded p-2 text-xs",children:[a.jsx("div",{className:"text-yellow-400 font-medium",children:"Weak Ciphers"}),a.jsx("div",{className:"text-slate-400 mt-1 max-h-16 overflow-y-auto",children:e.weak_ciphers.join(", ")})]}),!e.hsts_enabled&&r===443&&a.jsxs("div",{className:"bg-blue-500/10 border border-blue-500/20 rounded p-2 text-xs",children:[a.jsx("div",{className:"text-blue-400 font-medium",children:"HSTS Not Enabled"}),a.jsx("div",{className:"text-slate-400 mt-1",children:"HTTP Strict Transport Security header not detected"})]}),e.chain_issues.length>0&&a.jsxs("div",{className:"bg-yellow-500/10 border border-yellow-500/20 rounded p-2 text-xs",children:[a.jsx("div",{className:"text-yellow-400 font-medium",children:"Certificate Chain Issues"}),a.jsx("div",{className:"text-slate-400 mt-1",children:e.chain_issues.join(", ")})]})]}),e.protocols.length>0&&a.jsxs("div",{className:"bg-dark-bg rounded p-2",children:[a.jsx("div",{className:"text-xs font-medium text-slate-300 mb-1",children:"Supported Protocols"}),a.jsx("div",{className:"flex flex-wrap gap-1",children:e.protocols.map(u=>a.jsx("span",{className:`px-2 py-0.5 rounded text-[10px] ${e.weak_protocols.includes(u)?"bg-red-500/20 text-red-400":"bg-green-500/20 text-green-400"}`,children:u},u))})]}),e.hsts_enabled&&a.jsxs("div",{className:"bg-dark-bg rounded p-2",children:[a.jsx("div",{className:"text-xs font-medium text-slate-300 mb-1",children:"HSTS"}),a.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[a.jsx(Ze,{className:"h-3 w-3 text-green-500"}),a.jsx("span",{className:"text-green-400",children:"Enabled"}),e.hsts_max_age&&a.jsxs("span",{className:"text-slate-400",children:["(max-age: ",e.hsts_max_age.toLocaleString(),"s)"]})]})]})]})},Gp=({hosts:e,scanName:r="scan",scanId:n,disabled:s=!1})=>{const[i,o]=R.useState(!1),[l,c]=R.useState(!1),u=()=>{const v={scan:r,exportedAt:new Date().toISOString(),totalHosts:e.length,hosts:e.map(j=>({ip:j.target.ip,hostname:j.target.hostname,isAlive:j.is_alive,osGuess:j.os_guess,ports:j.ports.map(b=>({port:b.port,protocol:b.protocol,state:b.state,service:b.service})),vulnerabilities:j.vulnerabilities}))};x(JSON.stringify(v,null,2),`${r}_${Gt(new Date,"yyyy-MM-dd_HHmmss")}.json`,"application/json"),Q.success("Exported as JSON")},d=()=>{let v=`IP,Hostname,Alive,OS,Ports,Vulnerabilities,Critical,High,Medium,Low
`;e.forEach(j=>{var m;const b=j.ports.filter(_=>_.state==="Open").map(_=>_.port).join(";"),p={Critical:j.vulnerabilities.filter(_=>_.severity==="Critical").length,High:j.vulnerabilities.filter(_=>_.severity==="High").length,Medium:j.vulnerabilities.filter(_=>_.severity==="Medium").length,Low:j.vulnerabilities.filter(_=>_.severity==="Low").length};v+=`"${j.target.ip}",`,v+=`"${j.target.hostname||""}",`,v+=`${j.is_alive},`,v+=`"${((m=j.os_guess)==null?void 0:m.os_family)||""}",`,v+=`"${b}",`,v+=`${j.vulnerabilities.length},`,v+=`${p.Critical},`,v+=`${p.High},`,v+=`${p.Medium},`,v+=`${p.Low}
`}),x(v,`${r}_${Gt(new Date,"yyyy-MM-dd_HHmmss")}.csv`,"text/csv"),Q.success("Exported as CSV")},f=()=>{const v=`<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>HeroForge Scan Report - ${r}</title>
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
      background: #0f172a;
      color: #e2e8f0;
      padding: 2rem;
    }
    .container { max-width: 1200px; margin: 0 auto; }
    h1 { color: #3b82f6; margin-bottom: 0.5rem; }
    .meta { color: #94a3b8; margin-bottom: 2rem; }
    .summary {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 1rem;
      margin-bottom: 2rem;
    }
    .card {
      background: #1e293b;
      border: 1px solid #334155;
      border-radius: 8px;
      padding: 1.5rem;
    }
    .card h3 { color: #cbd5e1; font-size: 0.875rem; margin-bottom: 0.5rem; }
    .card .value { font-size: 2rem; font-weight: bold; }
    .host {
      background: #1e293b;
      border: 1px solid #334155;
      border-radius: 8px;
      padding: 1.5rem;
      margin-bottom: 1rem;
    }
    .host-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 1rem;
      padding-bottom: 1rem;
      border-bottom: 1px solid #334155;
    }
    .host-ip { font-family: monospace; font-size: 1.25rem; color: #3b82f6; }
    .badge {
      display: inline-block;
      padding: 0.25rem 0.75rem;
      border-radius: 4px;
      font-size: 0.75rem;
      font-weight: 600;
    }
    .badge-critical { background: rgba(239, 68, 68, 0.2); color: #ef4444; }
    .badge-high { background: rgba(249, 115, 22, 0.2); color: #f97316; }
    .badge-medium { background: rgba(234, 179, 8, 0.2); color: #eab308; }
    .badge-low { background: rgba(59, 130, 246, 0.2); color: #3b82f6; }
    .section { margin-top: 1rem; }
    .section h4 { color: #cbd5e1; margin-bottom: 0.5rem; font-size: 0.875rem; }
    .ports { display: grid; grid-template-columns: repeat(auto-fill, minmax(150px, 1fr)); gap: 0.5rem; }
    .port {
      background: #0f172a;
      padding: 0.5rem;
      border-radius: 4px;
      font-family: monospace;
      font-size: 0.875rem;
    }
    .vuln {
      background: rgba(239, 68, 68, 0.1);
      border-left: 4px solid #ef4444;
      padding: 1rem;
      margin-bottom: 0.5rem;
      border-radius: 4px;
    }
    .vuln-title { color: #fff; font-weight: 600; margin-bottom: 0.25rem; }
    .vuln-cve { color: #3b82f6; font-family: monospace; font-size: 0.875rem; }
    @media print {
      body { background: white; color: black; }
      .card, .host { border-color: #ccc; }
    }
  </style>
</head>
<body>
  <div class="container">
    <h1> HeroForge Scan Report</h1>
    <p class="meta">
      Scan: ${r} |
      Generated: ${Gt(new Date,"PPpp")} |
      Hosts: ${e.length}
    </p>

    <div class="summary">
      <div class="card">
        <h3>Total Hosts</h3>
        <div class="value" style="color: #3b82f6;">${e.length}</div>
      </div>
      <div class="card">
        <h3>Open Ports</h3>
        <div class="value" style="color: #22c55e;">
          ${e.reduce((j,b)=>j+b.ports.filter(p=>p.state==="Open").length,0)}
        </div>
      </div>
      <div class="card">
        <h3>Total Vulnerabilities</h3>
        <div class="value" style="color: #eab308;">
          ${e.reduce((j,b)=>j+b.vulnerabilities.length,0)}
        </div>
      </div>
      <div class="card">
        <h3>Critical Findings</h3>
        <div class="value" style="color: #ef4444;">
          ${e.reduce((j,b)=>j+b.vulnerabilities.filter(p=>p.severity==="Critical").length,0)}
        </div>
      </div>
    </div>

    <h2 style="color: #cbd5e1; margin-bottom: 1rem;">Discovered Hosts</h2>
    ${e.map(j=>`
      <div class="host">
        <div class="host-header">
          <div>
            <div class="host-ip">${j.target.ip}</div>
            ${j.target.hostname?`<div style="color: #94a3b8; font-size: 0.875rem;">${j.target.hostname}</div>`:""}
          </div>
          <div>
            ${j.vulnerabilities.length>0?`<span class="badge badge-critical">${j.vulnerabilities.length} vulnerabilities</span>`:""}
          </div>
        </div>

        ${j.os_guess?`
          <div class="section">
            <h4>OS Detection</h4>
            <p style="color: #94a3b8; font-size: 0.875rem;">
              ${j.os_guess.os_family} ${j.os_guess.os_version||""} (${j.os_guess.confidence}% confidence)
            </p>
          </div>
        `:""}

        ${j.ports.filter(b=>b.state==="Open").length>0?`
          <div class="section">
            <h4>Open Ports (${j.ports.filter(b=>b.state==="Open").length})</h4>
            <div class="ports">
              ${j.ports.filter(b=>b.state==="Open").map(b=>`
                <div class="port">
                  <strong>${b.port}/${b.protocol}</strong><br>
                  ${b.service?`<span style="color: #94a3b8;">${b.service.name} ${b.service.version||""}</span>`:""}
                </div>
              `).join("")}
            </div>
          </div>
        `:""}

        ${j.vulnerabilities.length>0?`
          <div class="section">
            <h4>Vulnerabilities (${j.vulnerabilities.length})</h4>
            ${j.vulnerabilities.map(b=>`
              <div class="vuln">
                <div class="vuln-title">${b.title}</div>
                ${b.cve_id?`<div class="vuln-cve">${b.cve_id}</div>`:""}
                <span class="badge badge-${b.severity.toLowerCase()}">${b.severity}</span>
              </div>
            `).join("")}
          </div>
        `:""}
      </div>
    `).join("")}

    <footer style="margin-top: 2rem; padding-top: 2rem; border-top: 1px solid #334155; text-align: center; color: #64748b;">
      <p>Generated by HeroForge - Network Reconnaissance Tool</p>
      <p style="font-size: 0.875rem;">For authorized security testing only</p>
    </footer>
  </div>
</body>
</html>`;x(v,`${r}_${Gt(new Date,"yyyy-MM-dd_HHmmss")}.html`,"text/html"),Q.success("Exported as HTML report")},h=async()=>{if(!n){Q.error("Scan ID required for Markdown export");return}c(!0);try{const v=localStorage.getItem("token"),j=await Re.get(`/api/scans/${n}/export/markdown`,{headers:{Authorization:`Bearer ${v}`},responseType:"blob"}),b=j.headers["content-disposition"];let p=`${r}_${Gt(new Date,"yyyy-MM-dd_HHmmss")}.md`;if(b){const g=b.match(/filename="?([^";\n]+)"?/);g&&(p=g[1])}const m=window.URL.createObjectURL(new Blob([j.data])),_=document.createElement("a");_.href=m,_.setAttribute("download",p),document.body.appendChild(_),_.click(),_.remove(),window.URL.revokeObjectURL(m),Q.success("Exported as Markdown")}catch(v){console.error("Markdown export failed:",v),Q.error("Failed to export as Markdown")}finally{c(!1)}},x=(v,j,b)=>{const p=new Blob([v],{type:b}),m=URL.createObjectURL(p),_=document.createElement("a");_.href=m,_.download=j,document.body.appendChild(_),_.click(),document.body.removeChild(_),URL.revokeObjectURL(m)},w=v=>{if(o(!1),e.length===0){Q.error("No results to export");return}switch(v){case"json":u();break;case"csv":d();break;case"html":f();break;case"markdown":h();break}};return a.jsxs("div",{className:"relative",children:[a.jsxs(ze,{onClick:()=>o(!i),disabled:s||e.length===0,variant:"secondary",children:[a.jsx(Nr,{className:"h-4 w-4 mr-2"}),"Export Results"]}),i&&a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"fixed inset-0 z-10",onClick:()=>o(!1)}),a.jsx("div",{className:"absolute right-0 mt-2 w-56 bg-dark-surface border border-dark-border rounded-lg shadow-xl z-20 overflow-hidden",children:a.jsxs("div",{className:"p-2",children:[a.jsxs("button",{onClick:()=>w("json"),className:"w-full flex items-center gap-3 px-3 py-2 text-sm text-slate-300 hover:bg-dark-hover rounded transition-colors",children:[a.jsx(jd,{className:"h-4 w-4 text-blue-400"}),a.jsxs("div",{className:"text-left",children:[a.jsx("div",{className:"font-medium",children:"JSON"}),a.jsx("div",{className:"text-xs text-slate-500",children:"Full data export"})]})]}),a.jsxs("button",{onClick:()=>w("csv"),className:"w-full flex items-center gap-3 px-3 py-2 text-sm text-slate-300 hover:bg-dark-hover rounded transition-colors",children:[a.jsx(Yt,{className:"h-4 w-4 text-green-400"}),a.jsxs("div",{className:"text-left",children:[a.jsx("div",{className:"font-medium",children:"CSV"}),a.jsx("div",{className:"text-xs text-slate-500",children:"Spreadsheet format"})]})]}),a.jsxs("button",{onClick:()=>w("html"),className:"w-full flex items-center gap-3 px-3 py-2 text-sm text-slate-300 hover:bg-dark-hover rounded transition-colors",children:[a.jsx(Ba,{className:"h-4 w-4 text-purple-400"}),a.jsxs("div",{className:"text-left",children:[a.jsx("div",{className:"font-medium",children:"HTML"}),a.jsx("div",{className:"text-xs text-slate-500",children:"Printable report"})]})]}),a.jsxs("button",{onClick:()=>w("markdown"),disabled:!n||l,className:"w-full flex items-center gap-3 px-3 py-2 text-sm text-slate-300 hover:bg-dark-hover rounded transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[a.jsx(Nd,{className:"h-4 w-4 text-cyan-400"}),a.jsxs("div",{className:"text-left",children:[a.jsx("div",{className:"font-medium",children:"Markdown"}),a.jsx("div",{className:"text-xs text-slate-500",children:"GitHub-flavored MD"})]})]})]})})]})]})},Yp={tableOfContents:"Table of Contents",executiveSummary:"Executive Summary",riskOverview:"Risk Overview",hostInventory:"Host Inventory",portAnalysis:"Port Analysis",vulnerabilityFindings:"Vulnerability Findings",serviceEnumeration:"Service Enumeration",remediationRecommendations:"Remediation Recommendations",appendix:"Appendix"},Xp=({scanId:e,scanName:r,onClose:n,onReportCreated:s})=>{const[i,o]=R.useState([]),[l,c]=R.useState(!0),[u,d]=R.useState(!1),[f,h]=R.useState(!1),[x,w]=R.useState(`${r} Report`),[v,j]=R.useState(""),[b,p]=R.useState("pdf"),[m,_]=R.useState("technical"),[g,y]=R.useState([]),[S,N]=R.useState({include_charts:!0,company_name:"",assessor_name:"",classification:"Confidential"});R.useEffect(()=>{k()},[]),R.useEffect(()=>{const A=i.find(M=>M.id===m);A&&y(A.default_sections)},[m,i]);const k=async()=>{try{const A=await fn.getTemplates();o(A.data);const M=A.data.find(T=>T.id==="technical");M&&y(M.default_sections)}catch{Q.error("Failed to load report templates")}finally{c(!1)}},C=A=>{y(M=>M.includes(A)?M.filter(T=>T!==A):[...M,A])},E=async()=>{var A,M;if(!x.trim()){Q.error("Please enter a report name");return}if(g.length===0){Q.error("Please select at least one section");return}d(!0);try{const T={scan_id:e,name:x.trim(),description:v.trim()||void 0,format:b,template_id:m,sections:g,options:S};await fn.create(T),Q.success("Report generation started"),s==null||s(),n()}catch(T){const z=((M=(A=T.response)==null?void 0:A.data)==null?void 0:M.error)||"Failed to create report";Q.error(z)}finally{d(!1)}},O=i.find(A=>A.id===m);return l?a.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:a.jsx(fe,{className:"w-full max-w-2xl mx-4",children:a.jsx("div",{className:"flex items-center justify-center py-12",children:a.jsx(wt,{})})})}):a.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4 overflow-y-auto",children:a.jsxs(fe,{className:"w-full max-w-2xl my-8",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(Yt,{className:"h-6 w-6 text-primary"}),a.jsx("h2",{className:"text-xl font-semibold text-white",children:"Generate Report"})]}),a.jsx("button",{onClick:n,className:"p-2 hover:bg-dark-surface rounded-lg transition-colors",children:a.jsx(Lt,{className:"h-5 w-5 text-slate-400"})})]}),a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Report Name"}),a.jsx(Ie,{type:"text",value:x,onChange:A=>w(A.target.value),placeholder:"Enter report name"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Description (optional)"}),a.jsx("textarea",{value:v,onChange:A=>j(A.target.value),placeholder:"Brief description of the report",className:"w-full bg-dark-surface border border-dark-border rounded-lg px-4 py-3 text-white placeholder-slate-500 focus:ring-2 focus:ring-primary focus:border-transparent resize-none",rows:2})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Report Template"}),a.jsx("div",{className:"grid grid-cols-3 gap-3",children:i.map(A=>a.jsxs("button",{onClick:()=>_(A.id),className:`p-4 rounded-lg border text-left transition-all ${m===A.id?"border-primary bg-primary/10":"border-dark-border hover:border-primary/50"}`,children:[a.jsx("p",{className:"font-medium text-white",children:A.name}),a.jsx("p",{className:"text-xs text-slate-400 mt-1",children:A.description})]},A.id))})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Output Format"}),a.jsx("div",{className:"flex gap-3",children:O==null?void 0:O.supports_formats.map(A=>a.jsxs("button",{onClick:()=>p(A),className:`px-6 py-3 rounded-lg border font-medium transition-all flex items-center gap-2 ${b===A?"border-primary bg-primary/10 text-primary":"border-dark-border text-slate-400 hover:border-primary/50"}`,children:[a.jsx(Nr,{className:"h-4 w-4"}),A.toUpperCase()]},A))})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Included Sections"}),a.jsx("div",{className:"grid grid-cols-2 gap-2",children:Object.entries(Yp).map(([A,M])=>a.jsxs("label",{className:`flex items-center gap-3 p-3 rounded-lg border cursor-pointer transition-all ${g.includes(M)?"border-primary bg-primary/10":"border-dark-border hover:border-primary/50"}`,children:[a.jsx("input",{type:"checkbox",checked:g.includes(M),onChange:()=>C(M),className:"w-4 h-4 rounded border-dark-border text-primary focus:ring-primary"}),a.jsx("span",{className:"text-sm text-white",children:M})]},A))})]}),a.jsxs("button",{onClick:()=>h(!f),className:"flex items-center gap-2 text-sm text-slate-400 hover:text-white transition-colors",children:[a.jsx(Al,{className:"h-4 w-4"}),f?"Hide":"Show"," Advanced Options"]}),f&&a.jsxs("div",{className:"space-y-4 p-4 bg-dark-surface rounded-lg border border-dark-border",children:[a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Company Name"}),a.jsx(Ie,{type:"text",value:S.company_name||"",onChange:A=>N({...S,company_name:A.target.value}),placeholder:"Your Company"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Assessor Name"}),a.jsx(Ie,{type:"text",value:S.assessor_name||"",onChange:A=>N({...S,assessor_name:A.target.value}),placeholder:"Security Analyst"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Classification"}),a.jsxs("select",{value:S.classification||"",onChange:A=>N({...S,classification:A.target.value}),className:"w-full bg-dark-bg border border-dark-border rounded-lg px-4 py-3 text-white focus:ring-2 focus:ring-primary focus:border-transparent",children:[a.jsx("option",{value:"",children:"None"}),a.jsx("option",{value:"Public",children:"Public"}),a.jsx("option",{value:"Internal",children:"Internal"}),a.jsx("option",{value:"Confidential",children:"Confidential"}),a.jsx("option",{value:"Restricted",children:"Restricted"})]})]}),a.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[a.jsx("input",{type:"checkbox",checked:S.include_charts,onChange:A=>N({...S,include_charts:A.target.checked}),className:"w-4 h-4 rounded border-dark-border text-primary focus:ring-primary"}),a.jsx("span",{className:"text-sm text-white",children:"Include visual charts"})]})]}),a.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-dark-border",children:[a.jsx(ze,{variant:"ghost",onClick:n,children:"Cancel"}),a.jsx(ze,{onClick:E,disabled:u,children:u?a.jsxs(a.Fragment,{children:[a.jsx(wt,{size:"sm",className:"mr-2"}),"Generating..."]}):a.jsxs(a.Fragment,{children:[a.jsx(Yt,{className:"h-4 w-4 mr-2"}),"Generate Report"]})})]})]})]})})},Kp=({isOpen:e,onClose:r,onConfirm:n,title:s,message:i,confirmLabel:o="Confirm",cancelLabel:l="Cancel",variant:c="danger",itemCount:u,loading:d=!1})=>{const f=R.useRef(null),h=R.useRef(null);if(R.useEffect(()=>{var j;if(e){h.current=document.activeElement,(j=f.current)==null||j.focus();const b=p=>{var m;if(p.key==="Escape"&&r(),p.key==="Tab"){const _=(m=f.current)==null?void 0:m.querySelectorAll('button:not([disabled]), [tabindex]:not([tabindex="-1"])');if(_&&_.length>0){const g=_[0],y=_[_.length-1];p.shiftKey&&document.activeElement===g?(p.preventDefault(),y.focus()):!p.shiftKey&&document.activeElement===y&&(p.preventDefault(),g.focus())}}};return document.addEventListener("keydown",b),document.body.style.overflow="hidden",()=>{document.removeEventListener("keydown",b),document.body.style.overflow="",h.current instanceof HTMLElement&&h.current.focus()}}},[e,r]),!e)return null;const x={danger:a.jsx(Ds,{className:"h-6 w-6 text-red-400"}),warning:a.jsx(Ee,{className:"h-6 w-6 text-yellow-400"}),info:a.jsx(Va,{className:"h-6 w-6 text-blue-400"})},w={danger:"danger",warning:"primary",info:"primary"},v={danger:"bg-red-500/10",warning:"bg-yellow-500/10",info:"bg-blue-500/10"};return a.jsx("div",{className:"fixed inset-0 bg-black/60 flex items-center justify-center z-[100]",onClick:j=>{j.target===j.currentTarget&&r()},role:"presentation",children:a.jsxs("div",{ref:f,role:"alertdialog","aria-modal":"true","aria-labelledby":"dialog-title","aria-describedby":"dialog-description",tabIndex:-1,className:"bg-dark-card border border-dark-border rounded-xl p-6 max-w-md w-full mx-4 shadow-2xl animate-scale-in focus:outline-none",children:[a.jsxs("div",{className:"flex items-start gap-4",children:[a.jsx("div",{className:`p-3 rounded-full ${v[c]}`,children:x[c]}),a.jsxs("div",{className:"flex-1",children:[a.jsx("h3",{id:"dialog-title",className:"text-lg font-semibold text-white",children:s}),a.jsx("p",{id:"dialog-description",className:"text-slate-400 mt-2",children:i}),u!==void 0&&u>0&&a.jsxs("p",{className:"text-sm text-slate-500 mt-2",children:["This will affect ",a.jsx("span",{className:"font-medium text-slate-300",children:u})," item",u!==1?"s":"","."]}),c==="danger"&&a.jsxs("p",{className:"text-sm text-red-400/80 mt-2 flex items-center gap-1",children:[a.jsx(Ee,{className:"h-3.5 w-3.5"}),"This action cannot be undone."]})]}),a.jsx("button",{onClick:r,disabled:d,className:"text-slate-500 hover:text-slate-300 transition-colors p-1 rounded hover:bg-dark-hover disabled:opacity-50","aria-label":"Close dialog",children:a.jsx(Lt,{className:"h-5 w-5"})})]}),a.jsxs("div",{className:"flex justify-end gap-3 mt-6 pt-4 border-t border-dark-border",children:[a.jsx(ze,{variant:"secondary",onClick:r,disabled:d,children:l}),a.jsx(ze,{variant:w[c],onClick:n,loading:d,children:o})]})]})})},Jp=({scanId:e,onGenerateNew:r})=>{const[n,s]=R.useState([]),[i,o]=R.useState(!0),[l,c]=R.useState(null),[u,d]=R.useState(null),[f,h]=R.useState(null);R.useEffect(()=>{x();const m=setInterval(()=>{n.filter(g=>g.status==="pending"||g.status==="generating").length>0&&x()},5e3);return()=>clearInterval(m)},[e]);const x=async()=>{try{const m=await fn.getAll(e);s(m.data)}catch{Q.error("Failed to load reports")}finally{o(!1)}},w=async m=>{if(m.status!=="completed"){Q.warning("Report is not ready for download");return}c(m.id);try{const _=await fn.download(m.id),g=new Blob([_.data],{type:_.headers["content-type"]}),y=window.URL.createObjectURL(g),S=document.createElement("a");S.href=y,S.download=`${m.name.replace(/\s+/g,"_")}.${m.format}`,document.body.appendChild(S),S.click(),window.URL.revokeObjectURL(y),document.body.removeChild(S),Q.success("Report downloaded")}catch{Q.error("Failed to download report")}finally{c(null)}},v=async()=>{if(f){d(f.id);try{await fn.delete(f.id),s(m=>m.filter(_=>_.id!==f.id)),Q.success(`Report "${f.name}" deleted`),h(null)}catch{Q.error("Failed to delete report")}finally{d(null)}}},j=m=>{switch(m){case"completed":return a.jsx(Ze,{className:"h-4 w-4 text-green-500"});case"failed":return a.jsx(Ft,{className:"h-4 w-4 text-red-500"});case"generating":return a.jsx(Qe,{className:"h-4 w-4 text-blue-500 animate-spin"});default:return a.jsx(Rr,{className:"h-4 w-4 text-slate-400"})}},b=m=>{switch(m){case"completed":return"completed";case"generating":return"running";case"failed":return"failed";default:return"pending"}},p=m=>m?m<1024?`${m} B`:m<1024*1024?`${(m/1024).toFixed(1)} KB`:`${(m/(1024*1024)).toFixed(1)} MB`:"-";return i?a.jsx(fe,{children:a.jsx("div",{className:"flex items-center justify-center py-12",children:a.jsx(wt,{})})}):n.length===0?a.jsx(fe,{children:a.jsxs("div",{className:"text-center py-12",children:[a.jsx(Yt,{className:"h-12 w-12 mx-auto mb-4 text-slate-500"}),a.jsx("h3",{className:"text-lg font-medium text-white mb-2",children:"No Reports Yet"}),a.jsx("p",{className:"text-slate-400 mb-4",children:"Generate a professional report from your scan results."}),r&&a.jsxs(ze,{onClick:r,children:[a.jsx(Yt,{className:"h-4 w-4 mr-2"}),"Generate Report"]})]})}):a.jsxs(fe,{children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsxs("h3",{className:"text-lg font-semibold text-white flex items-center gap-2",children:[a.jsx(Yt,{className:"h-5 w-5 text-primary"}),"Reports"]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("button",{onClick:x,className:"p-2 hover:bg-dark-surface rounded-lg transition-colors",title:"Refresh",children:a.jsx(Qn,{className:"h-4 w-4 text-slate-400"})}),r&&a.jsxs(ze,{size:"sm",onClick:r,children:[a.jsx(Yt,{className:"h-4 w-4 mr-1"}),"New Report"]})]})]}),a.jsx("div",{className:"space-y-3",children:n.map(m=>a.jsxs("div",{className:"flex items-center justify-between p-4 bg-dark-surface rounded-lg border border-dark-border hover:border-primary/30 transition-colors",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("div",{className:"p-2 bg-dark-bg rounded-lg",children:j(m.status)}),a.jsxs("div",{children:[a.jsx("p",{className:"font-medium text-white",children:m.name}),a.jsxs("div",{className:"flex items-center gap-3 text-sm text-slate-400 mt-1",children:[a.jsx("span",{className:"uppercase font-mono",children:m.format}),a.jsx("span",{children:"|"}),a.jsx("span",{children:m.template_id}),a.jsx("span",{children:"|"}),a.jsx("span",{children:Gt(new Date(m.created_at),"MMM d, yyyy HH:mm")}),m.file_size&&a.jsxs(a.Fragment,{children:[a.jsx("span",{children:"|"}),a.jsx("span",{children:p(m.file_size)})]})]}),m.error_message&&a.jsx("p",{className:"text-sm text-red-400 mt-1",children:m.error_message})]})]}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(et,{variant:"status",type:b(m.status),children:m.status}),a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx("button",{onClick:()=>w(m),disabled:m.status!=="completed"||l===m.id,className:`p-2 rounded-lg transition-colors ${m.status==="completed"?"hover:bg-dark-bg text-slate-400 hover:text-white":"text-slate-600 cursor-not-allowed"}`,title:"Download",children:l===m.id?a.jsx(Qe,{className:"h-4 w-4 animate-spin"}):a.jsx(Nr,{className:"h-4 w-4"})}),a.jsx("button",{onClick:()=>h(m),disabled:u===m.id,className:"p-2 rounded-lg text-slate-400 hover:text-red-400 hover:bg-dark-bg transition-colors",title:"Delete","aria-label":`Delete report ${m.name}`,children:u===m.id?a.jsx(Qe,{className:"h-4 w-4 animate-spin"}):a.jsx(Ds,{className:"h-4 w-4"})})]})]})]},m.id))}),a.jsx(Kp,{isOpen:!!f,onClose:()=>h(null),onConfirm:v,title:"Delete Report",message:`Are you sure you want to delete the report "${f==null?void 0:f.name}"?`,confirmLabel:"Delete Report",variant:"danger",loading:!!u})]})},Zp=({scanId:e,scanName:r,onClose:n})=>{const[s,i]=R.useState([]),[o,l]=R.useState(new Set),[c,u]=R.useState(!1),[d,f]=R.useState(!1),[h,x]=R.useState(null),[w,v]=R.useState(null),[j,b]=R.useState(!1),[p,m]=R.useState("pdf");R.useEffect(()=>{_()},[]);const _=async()=>{u(!0);try{const C=await Ln.getFrameworks();i(C.data.frameworks),l(new Set(["pci_dss","nist_800_53","owasp_top10"]))}catch{Q.error("Failed to load compliance frameworks")}finally{u(!1)}},g=async()=>{var C,E;if(o.size===0){Q.warning("Please select at least one framework");return}f(!0);try{const O=await Ln.analyzeScan(e,{frameworks:Array.from(o)});x(O.data),Q.success("Compliance analysis completed")}catch(O){const A=O;Q.error(((E=(C=A.response)==null?void 0:C.data)==null?void 0:E.error)||"Analysis failed")}finally{f(!1)}},y=C=>{const E=new Set(o);E.has(C)?E.delete(C):E.add(C),l(E)},S=C=>C>=80?"text-green-400":C>=60?"text-yellow-400":C>=40?"text-orange-400":"text-red-400",N=C=>C>=80?"completed":C>=60?"running":"failed",k=async()=>{var C,E;if(h){b(!0);try{const O=h.summary.frameworks.map(B=>String(B.framework).toLowerCase().replace(/_/g,"_")),A=await Ln.generateReport(e,{frameworks:O,format:p,include_evidence:!0}),M=await Ln.downloadReport(A.data.report_id),T=new Blob([M.data],{type:p==="pdf"?"application/pdf":p==="html"?"text/html":"application/json"}),H=window.URL.createObjectURL(T),z=document.createElement("a");z.href=H,z.download=`compliance_report_${e}.${p}`,document.body.appendChild(z),z.click(),document.body.removeChild(z),window.URL.revokeObjectURL(H),Q.success(`${p.toUpperCase()} report generated and downloaded successfully`)}catch(O){const A=O;Q.error(((E=(C=A.response)==null?void 0:C.data)==null?void 0:E.error)||"Failed to generate report")}finally{b(!1)}}};return c?a.jsx("div",{className:"fixed inset-0 bg-black/60 z-50 flex items-center justify-center",children:a.jsx(fe,{className:"w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:a.jsx("div",{className:"flex items-center justify-center py-12",children:a.jsx(wt,{})})})}):a.jsx("div",{className:"fixed inset-0 bg-black/60 z-50 flex items-center justify-center p-4",children:a.jsxs(fe,{className:"w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(ke,{className:"h-6 w-6 text-primary"}),a.jsxs("div",{children:[a.jsx("h2",{className:"text-xl font-bold text-white",children:"Compliance Analysis"}),a.jsxs("p",{className:"text-sm text-slate-400",children:["Scan: ",r]})]})]}),a.jsx("button",{onClick:n,className:"text-slate-400 hover:text-white transition-colors",children:a.jsx(Ft,{className:"h-6 w-6"})})]}),h?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"mb-6 p-4 bg-dark-bg rounded-lg border border-dark-border",children:a.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-center",children:[a.jsxs("div",{children:[a.jsxs("p",{className:`text-3xl font-bold ${S(h.summary.overall_score)}`,children:[h.summary.overall_score.toFixed(0),"%"]}),a.jsx("p",{className:"text-sm text-slate-400",children:"Overall Score"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-3xl font-bold text-white",children:h.summary.total_findings}),a.jsx("p",{className:"text-sm text-slate-400",children:"Total Findings"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-3xl font-bold text-red-400",children:h.summary.critical_findings+h.summary.high_findings}),a.jsx("p",{className:"text-sm text-slate-400",children:"Critical/High"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-3xl font-bold text-yellow-400",children:h.summary.medium_findings+h.summary.low_findings}),a.jsx("p",{className:"text-sm text-slate-400",children:"Medium/Low"})]})]})}),a.jsxs("div",{className:"space-y-4",children:[a.jsx("h3",{className:"text-lg font-semibold text-white",children:"Framework Results"}),h.summary.frameworks.map(C=>a.jsxs("div",{className:"border border-dark-border rounded-lg overflow-hidden",children:[a.jsxs("div",{onClick:()=>v(w===C.framework?null:C.framework),className:"flex items-center justify-between p-4 bg-dark-surface cursor-pointer hover:bg-dark-hover transition-colors",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[w===C.framework?a.jsx(hr,{className:"h-5 w-5 text-slate-400"}):a.jsx(As,{className:"h-5 w-5 text-slate-400"}),a.jsx("span",{className:"font-medium text-white",children:C.framework})]}),a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[a.jsx(Sd,{className:"h-4 w-4 text-green-400"}),a.jsx("span",{className:"text-green-400",children:C.compliant})]}),a.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[a.jsx(Ft,{className:"h-4 w-4 text-red-400"}),a.jsx("span",{className:"text-red-400",children:C.non_compliant})]}),a.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[a.jsx(Ee,{className:"h-4 w-4 text-yellow-400"}),a.jsx("span",{className:"text-yellow-400",children:C.partially_compliant})]}),a.jsxs(et,{variant:"status",type:N(C.compliance_score),children:[C.compliance_score.toFixed(0),"%"]})]})]}),w===C.framework&&a.jsxs("div",{className:"p-4 bg-dark-bg border-t border-dark-border",children:[a.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4 mb-4 text-sm",children:[a.jsxs("div",{className:"p-3 bg-dark-surface rounded-lg",children:[a.jsx("p",{className:"text-slate-400",children:"Total Controls"}),a.jsx("p",{className:"text-xl font-bold text-white",children:C.total_controls})]}),a.jsxs("div",{className:"p-3 bg-dark-surface rounded-lg",children:[a.jsx("p",{className:"text-slate-400",children:"Compliant"}),a.jsx("p",{className:"text-xl font-bold text-green-400",children:C.compliant})]}),a.jsxs("div",{className:"p-3 bg-dark-surface rounded-lg",children:[a.jsx("p",{className:"text-slate-400",children:"Non-Compliant"}),a.jsx("p",{className:"text-xl font-bold text-red-400",children:C.non_compliant})]}),a.jsxs("div",{className:"p-3 bg-dark-surface rounded-lg",children:[a.jsx("p",{className:"text-slate-400",children:"Partially Compliant"}),a.jsx("p",{className:"text-xl font-bold text-yellow-400",children:C.partially_compliant})]}),a.jsxs("div",{className:"p-3 bg-dark-surface rounded-lg",children:[a.jsx("p",{className:"text-slate-400",children:"Not Applicable"}),a.jsx("p",{className:"text-xl font-bold text-slate-400",children:C.not_applicable})]}),a.jsxs("div",{className:"p-3 bg-dark-surface rounded-lg",children:[a.jsx("p",{className:"text-slate-400",children:"Not Assessed"}),a.jsx("p",{className:"text-xl font-bold text-slate-500",children:C.not_assessed})]})]}),C.by_category&&C.by_category.length>0&&a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-slate-300 mb-2",children:"By Category"}),a.jsx("div",{className:"space-y-2",children:C.by_category.map(E=>a.jsxs("div",{className:"flex items-center justify-between p-2 bg-dark-surface rounded",children:[a.jsx("span",{className:"text-sm text-white",children:E.category}),a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsxs("span",{className:"text-xs text-slate-400",children:[E.compliant,"/",E.total," compliant"]}),a.jsx("div",{className:"w-24 bg-dark-border rounded-full h-2",children:a.jsx("div",{className:`h-2 rounded-full ${E.percentage>=80?"bg-green-500":E.percentage>=60?"bg-yellow-500":"bg-red-500"}`,style:{width:`${E.percentage}%`}})}),a.jsxs("span",{className:"text-xs text-slate-300 w-12 text-right",children:[E.percentage.toFixed(0),"%"]})]})]},E.category))})]})]})]},C.framework))]}),a.jsxs("div",{className:"mt-6 pt-4 border-t border-dark-border",children:[a.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Generate Compliance Report"}),a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("div",{className:"flex gap-2",children:["pdf","html","json"].map(C=>a.jsx("button",{onClick:()=>m(C),className:`px-4 py-2 rounded-lg font-medium transition-colors ${p===C?"bg-primary text-white":"bg-dark-surface text-slate-400 hover:bg-dark-hover"}`,children:C.toUpperCase()},C))}),a.jsx(ze,{onClick:k,disabled:j,className:"ml-auto",children:j?a.jsxs(a.Fragment,{children:[a.jsx(Qn,{className:"h-4 w-4 animate-spin mr-2"}),"Generating..."]}):a.jsxs(a.Fragment,{children:[a.jsx(kd,{className:"h-4 w-4 mr-2"}),"Generate Report"]})})]})]}),a.jsxs("div",{className:"flex justify-end gap-3 mt-6 pt-4 border-t border-dark-border",children:[a.jsxs(ze,{variant:"secondary",onClick:()=>x(null),children:[a.jsx(Qn,{className:"h-4 w-4 mr-2"}),"Run New Analysis"]}),a.jsx(ze,{onClick:n,children:"Close"})]})]}):a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"mb-6",children:[a.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Select Compliance Frameworks"}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:s.map(C=>a.jsx("div",{onClick:()=>y(C.id),className:`p-4 rounded-lg border cursor-pointer transition-all ${o.has(C.id)?"border-primary bg-primary/10":"border-dark-border hover:border-primary/50"}`,children:a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx(xr,{checked:o.has(C.id),onChange:()=>y(C.id)}),a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("p",{className:"font-medium text-white",children:C.name}),a.jsxs(et,{variant:"status",type:"running",children:["v",C.version]})]}),a.jsx("p",{className:"text-sm text-slate-400 mt-1",children:C.description}),a.jsxs("div",{className:"flex items-center gap-4 mt-2 text-xs text-slate-500",children:[a.jsxs("span",{children:[C.control_count," controls"]}),a.jsxs("span",{children:[C.automated_percentage.toFixed(0),"% automated"]})]})]})]})},C.id))})]}),a.jsxs("div",{className:"flex justify-end gap-3",children:[a.jsx(ze,{variant:"secondary",onClick:n,children:"Cancel"}),a.jsx(ze,{onClick:g,disabled:d||o.size===0,children:d?a.jsxs(a.Fragment,{children:[a.jsx(Qn,{className:"h-4 w-4 animate-spin mr-2"}),"Analyzing..."]}):a.jsxs(a.Fragment,{children:[a.jsx(qa,{className:"h-4 w-4 mr-2"}),"Run Analysis"]})})]})]})]})})};function Qp(e,r){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var s,i,o,l,c=[],u=!0,d=!1;try{if(o=(n=n.call(e)).next,r===0){if(Object(n)!==n)return;u=!1}else for(;!(u=(s=o.call(n)).done)&&(c.push(s.value),c.length!==r);u=!0);}catch(f){d=!0,i=f}finally{try{if(!u&&n.return!=null&&(l=n.return(),Object(l)!==l))return}finally{if(d)throw i}}return c}}function eg(e,r,n){return r=lg(r),r in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}function ro(e,r){return ng(e)||Qp(e,r)||Nc(e,r)||ig()}function tg(e){return rg(e)||sg(e)||Nc(e)||ag()}function rg(e){if(Array.isArray(e))return ja(e)}function ng(e){if(Array.isArray(e))return e}function sg(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Nc(e,r){if(e){if(typeof e=="string")return ja(e,r);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ja(e,r)}}function ja(e,r){(r==null||r>e.length)&&(r=e.length);for(var n=0,s=new Array(r);n<r;n++)s[n]=e[n];return s}function ag(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ig(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function og(e,r){if(typeof e!="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,r);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(e)}function lg(e){var r=og(e,"string");return typeof r=="symbol"?r:String(r)}var cg=function(r,n){var s=new Set(n);return Object.assign.apply(Object,[{}].concat(tg(Object.entries(r).filter(function(i){var o=ro(i,1),l=o[0];return!s.has(l)}).map(function(i){var o=ro(i,2),l=o[0],c=o[1];return eg({},l,c)}))))};function Na(e,r){(r==null||r>e.length)&&(r=e.length);for(var n=0,s=Array(r);n<r;n++)s[n]=e[n];return s}function ug(e){if(Array.isArray(e))return e}function dg(e){if(Array.isArray(e))return Na(e)}function hg(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function fg(e,r){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var s,i,o,l,c=[],u=!0,d=!1;try{if(o=(n=n.call(e)).next,r!==0)for(;!(u=(s=o.call(n)).done)&&(c.push(s.value),c.length!==r);u=!0);}catch(f){d=!0,i=f}finally{try{if(!u&&n.return!=null&&(l=n.return(),Object(l)!==l))return}finally{if(d)throw i}}return c}}function mg(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function pg(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function gg(e,r){return ug(e)||fg(e,r)||Sc(e,r)||mg()}function no(e){return dg(e)||hg(e)||Sc(e)||pg()}function Sc(e,r){if(e){if(typeof e=="string")return Na(e,r);var n={}.toString.call(e).slice(8,-1);return n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set"?Array.from(e):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Na(e,r):void 0}}function xg(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=r.wrapperElementType,s=n===void 0?"div":n,i=r.nodeMapper,o=i===void 0?function(f){return f}:i,l=r.methodNames,c=l===void 0?[]:l,u=r.initPropNames,d=u===void 0?[]:u;return R.forwardRef(function(f,h){var x=R.useRef(),w=R.useMemo(function(){var b=Object.fromEntries(d.filter(function(p){return f.hasOwnProperty(p)}).map(function(p){return[p,f[p]]}));return e(b)},[]);so(function(){w(o(x.current))},R.useLayoutEffect),so(function(){return w._destructor instanceof Function?w._destructor:void 0});var v=R.useCallback(function(b){for(var p=arguments.length,m=new Array(p>1?p-1:0),_=1;_<p;_++)m[_-1]=arguments[_];return w[b]instanceof Function?w[b].apply(w,m):void 0},[w]),j=R.useRef({});return Object.keys(cg(f,[].concat(no(c),no(d)))).filter(function(b){return j.current[b]!==f[b]}).forEach(function(b){return v(b,f[b])}),j.current=f,R.useImperativeHandle(h,function(){return Object.fromEntries(c.map(function(b){return[b,function(){for(var p=arguments.length,m=new Array(p),_=0;_<p;_++)m[_]=arguments[_];return v.apply(void 0,[b].concat(m))}]}))},[v]),Sl.createElement(s,{ref:x})})}function so(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:R.useEffect,n=R.useRef(),s=R.useRef(!1),i=R.useRef(!1),o=R.useState(0),l=gg(o,2);l[0];var c=l[1];s.current&&(i.current=!0),r(function(){return s.current||(n.current=e(),s.current=!0),c(function(u){return u+1}),function(){i.current&&n.current&&n.current()}},[])}var Sa="http://www.w3.org/1999/xhtml";const ao={svg:"http://www.w3.org/2000/svg",xhtml:Sa,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Hs(e){var r=e+="",n=r.indexOf(":");return n>=0&&(r=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),ao.hasOwnProperty(r)?{space:ao[r],local:e}:e}function yg(e){return function(){var r=this.ownerDocument,n=this.namespaceURI;return n===Sa&&r.documentElement.namespaceURI===Sa?r.createElement(e):r.createElementNS(n,e)}}function bg(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function kc(e){var r=Hs(e);return(r.local?bg:yg)(r)}function vg(){}function Za(e){return e==null?vg:function(){return this.querySelector(e)}}function wg(e){typeof e!="function"&&(e=Za(e));for(var r=this._groups,n=r.length,s=new Array(n),i=0;i<n;++i)for(var o=r[i],l=o.length,c=s[i]=new Array(l),u,d,f=0;f<l;++f)(u=o[f])&&(d=e.call(u,u.__data__,f,o))&&("__data__"in u&&(d.__data__=u.__data__),c[f]=d);return new tt(s,this._parents)}function _g(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function jg(){return[]}function Cc(e){return e==null?jg:function(){return this.querySelectorAll(e)}}function Ng(e){return function(){return _g(e.apply(this,arguments))}}function Sg(e){typeof e=="function"?e=Ng(e):e=Cc(e);for(var r=this._groups,n=r.length,s=[],i=[],o=0;o<n;++o)for(var l=r[o],c=l.length,u,d=0;d<c;++d)(u=l[d])&&(s.push(e.call(u,u.__data__,d,l)),i.push(u));return new tt(s,i)}function Pc(e){return function(){return this.matches(e)}}function Ec(e){return function(r){return r.matches(e)}}var kg=Array.prototype.find;function Cg(e){return function(){return kg.call(this.children,e)}}function Pg(){return this.firstElementChild}function Eg(e){return this.select(e==null?Pg:Cg(typeof e=="function"?e:Ec(e)))}var Og=Array.prototype.filter;function Rg(){return Array.from(this.children)}function Tg(e){return function(){return Og.call(this.children,e)}}function Ag(e){return this.selectAll(e==null?Rg:Tg(typeof e=="function"?e:Ec(e)))}function Dg(e){typeof e!="function"&&(e=Pc(e));for(var r=this._groups,n=r.length,s=new Array(n),i=0;i<n;++i)for(var o=r[i],l=o.length,c=s[i]=[],u,d=0;d<l;++d)(u=o[d])&&e.call(u,u.__data__,d,o)&&c.push(u);return new tt(s,this._parents)}function Oc(e){return new Array(e.length)}function Mg(){return new tt(this._enter||this._groups.map(Oc),this._parents)}function ps(e,r){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=r}ps.prototype={constructor:ps,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,r){return this._parent.insertBefore(e,r)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function $g(e){return function(){return e}}function zg(e,r,n,s,i,o){for(var l=0,c,u=r.length,d=o.length;l<d;++l)(c=r[l])?(c.__data__=o[l],s[l]=c):n[l]=new ps(e,o[l]);for(;l<u;++l)(c=r[l])&&(i[l]=c)}function Lg(e,r,n,s,i,o,l){var c,u,d=new Map,f=r.length,h=o.length,x=new Array(f),w;for(c=0;c<f;++c)(u=r[c])&&(x[c]=w=l.call(u,u.__data__,c,r)+"",d.has(w)?i[c]=u:d.set(w,u));for(c=0;c<h;++c)w=l.call(e,o[c],c,o)+"",(u=d.get(w))?(s[c]=u,u.__data__=o[c],d.delete(w)):n[c]=new ps(e,o[c]);for(c=0;c<f;++c)(u=r[c])&&d.get(x[c])===u&&(i[c]=u)}function Fg(e){return e.__data__}function Ig(e,r){if(!arguments.length)return Array.from(this,Fg);var n=r?Lg:zg,s=this._parents,i=this._groups;typeof e!="function"&&(e=$g(e));for(var o=i.length,l=new Array(o),c=new Array(o),u=new Array(o),d=0;d<o;++d){var f=s[d],h=i[d],x=h.length,w=Hg(e.call(f,f&&f.__data__,d,s)),v=w.length,j=c[d]=new Array(v),b=l[d]=new Array(v),p=u[d]=new Array(x);n(f,h,j,b,p,w,r);for(var m=0,_=0,g,y;m<v;++m)if(g=j[m]){for(m>=_&&(_=m+1);!(y=b[_])&&++_<v;);g._next=y||null}}return l=new tt(l,s),l._enter=c,l._exit=u,l}function Hg(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function Ug(){return new tt(this._exit||this._groups.map(Oc),this._parents)}function qg(e,r,n){var s=this.enter(),i=this,o=this.exit();return typeof e=="function"?(s=e(s),s&&(s=s.selection())):s=s.append(e+""),r!=null&&(i=r(i),i&&(i=i.selection())),n==null?o.remove():n(o),s&&i?s.merge(i).order():i}function Wg(e){for(var r=e.selection?e.selection():e,n=this._groups,s=r._groups,i=n.length,o=s.length,l=Math.min(i,o),c=new Array(i),u=0;u<l;++u)for(var d=n[u],f=s[u],h=d.length,x=c[u]=new Array(h),w,v=0;v<h;++v)(w=d[v]||f[v])&&(x[v]=w);for(;u<i;++u)c[u]=n[u];return new tt(c,this._parents)}function Bg(){for(var e=this._groups,r=-1,n=e.length;++r<n;)for(var s=e[r],i=s.length-1,o=s[i],l;--i>=0;)(l=s[i])&&(o&&l.compareDocumentPosition(o)^4&&o.parentNode.insertBefore(l,o),o=l);return this}function Vg(e){e||(e=Gg);function r(h,x){return h&&x?e(h.__data__,x.__data__):!h-!x}for(var n=this._groups,s=n.length,i=new Array(s),o=0;o<s;++o){for(var l=n[o],c=l.length,u=i[o]=new Array(c),d,f=0;f<c;++f)(d=l[f])&&(u[f]=d);u.sort(r)}return new tt(i,this._parents).order()}function Gg(e,r){return e<r?-1:e>r?1:e>=r?0:NaN}function Yg(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function Xg(){return Array.from(this)}function Kg(){for(var e=this._groups,r=0,n=e.length;r<n;++r)for(var s=e[r],i=0,o=s.length;i<o;++i){var l=s[i];if(l)return l}return null}function Jg(){let e=0;for(const r of this)++e;return e}function Zg(){return!this.node()}function Qg(e){for(var r=this._groups,n=0,s=r.length;n<s;++n)for(var i=r[n],o=0,l=i.length,c;o<l;++o)(c=i[o])&&e.call(c,c.__data__,o,i);return this}function ex(e){return function(){this.removeAttribute(e)}}function tx(e){return function(){this.removeAttributeNS(e.space,e.local)}}function rx(e,r){return function(){this.setAttribute(e,r)}}function nx(e,r){return function(){this.setAttributeNS(e.space,e.local,r)}}function sx(e,r){return function(){var n=r.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function ax(e,r){return function(){var n=r.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function ix(e,r){var n=Hs(e);if(arguments.length<2){var s=this.node();return n.local?s.getAttributeNS(n.space,n.local):s.getAttribute(n)}return this.each((r==null?n.local?tx:ex:typeof r=="function"?n.local?ax:sx:n.local?nx:rx)(n,r))}function Rc(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function ox(e){return function(){this.style.removeProperty(e)}}function lx(e,r,n){return function(){this.style.setProperty(e,r,n)}}function cx(e,r,n){return function(){var s=r.apply(this,arguments);s==null?this.style.removeProperty(e):this.style.setProperty(e,s,n)}}function ux(e,r,n){return arguments.length>1?this.each((r==null?ox:typeof r=="function"?cx:lx)(e,r,n??"")):Cr(this.node(),e)}function Cr(e,r){return e.style.getPropertyValue(r)||Rc(e).getComputedStyle(e,null).getPropertyValue(r)}function dx(e){return function(){delete this[e]}}function hx(e,r){return function(){this[e]=r}}function fx(e,r){return function(){var n=r.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function mx(e,r){return arguments.length>1?this.each((r==null?dx:typeof r=="function"?fx:hx)(e,r)):this.node()[e]}function Tc(e){return e.trim().split(/^|\s+/)}function Qa(e){return e.classList||new Ac(e)}function Ac(e){this._node=e,this._names=Tc(e.getAttribute("class")||"")}Ac.prototype={add:function(e){var r=this._names.indexOf(e);r<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var r=this._names.indexOf(e);r>=0&&(this._names.splice(r,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function Dc(e,r){for(var n=Qa(e),s=-1,i=r.length;++s<i;)n.add(r[s])}function Mc(e,r){for(var n=Qa(e),s=-1,i=r.length;++s<i;)n.remove(r[s])}function px(e){return function(){Dc(this,e)}}function gx(e){return function(){Mc(this,e)}}function xx(e,r){return function(){(r.apply(this,arguments)?Dc:Mc)(this,e)}}function yx(e,r){var n=Tc(e+"");if(arguments.length<2){for(var s=Qa(this.node()),i=-1,o=n.length;++i<o;)if(!s.contains(n[i]))return!1;return!0}return this.each((typeof r=="function"?xx:r?px:gx)(n,r))}function bx(){this.textContent=""}function vx(e){return function(){this.textContent=e}}function wx(e){return function(){var r=e.apply(this,arguments);this.textContent=r??""}}function _x(e){return arguments.length?this.each(e==null?bx:(typeof e=="function"?wx:vx)(e)):this.node().textContent}function jx(){this.innerHTML=""}function Nx(e){return function(){this.innerHTML=e}}function Sx(e){return function(){var r=e.apply(this,arguments);this.innerHTML=r??""}}function kx(e){return arguments.length?this.each(e==null?jx:(typeof e=="function"?Sx:Nx)(e)):this.node().innerHTML}function Cx(){this.nextSibling&&this.parentNode.appendChild(this)}function Px(){return this.each(Cx)}function Ex(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Ox(){return this.each(Ex)}function Rx(e){var r=typeof e=="function"?e:kc(e);return this.select(function(){return this.appendChild(r.apply(this,arguments))})}function Tx(){return null}function Ax(e,r){var n=typeof e=="function"?e:kc(e),s=r==null?Tx:typeof r=="function"?r:Za(r);return this.select(function(){return this.insertBefore(n.apply(this,arguments),s.apply(this,arguments)||null)})}function Dx(){var e=this.parentNode;e&&e.removeChild(this)}function Mx(){return this.each(Dx)}function $x(){var e=this.cloneNode(!1),r=this.parentNode;return r?r.insertBefore(e,this.nextSibling):e}function zx(){var e=this.cloneNode(!0),r=this.parentNode;return r?r.insertBefore(e,this.nextSibling):e}function Lx(e){return this.select(e?zx:$x)}function Fx(e){return arguments.length?this.property("__data__",e):this.node().__data__}function Ix(e){return function(r){e.call(this,r,this.__data__)}}function Hx(e){return e.trim().split(/^|\s+/).map(function(r){var n="",s=r.indexOf(".");return s>=0&&(n=r.slice(s+1),r=r.slice(0,s)),{type:r,name:n}})}function Ux(e){return function(){var r=this.__on;if(r){for(var n=0,s=-1,i=r.length,o;n<i;++n)o=r[n],(!e.type||o.type===e.type)&&o.name===e.name?this.removeEventListener(o.type,o.listener,o.options):r[++s]=o;++s?r.length=s:delete this.__on}}}function qx(e,r,n){return function(){var s=this.__on,i,o=Ix(r);if(s){for(var l=0,c=s.length;l<c;++l)if((i=s[l]).type===e.type&&i.name===e.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=o,i.options=n),i.value=r;return}}this.addEventListener(e.type,o,n),i={type:e.type,name:e.name,value:r,listener:o,options:n},s?s.push(i):this.__on=[i]}}function Wx(e,r,n){var s=Hx(e+""),i,o=s.length,l;if(arguments.length<2){var c=this.node().__on;if(c){for(var u=0,d=c.length,f;u<d;++u)for(i=0,f=c[u];i<o;++i)if((l=s[i]).type===f.type&&l.name===f.name)return f.value}return}for(c=r?qx:Ux,i=0;i<o;++i)this.each(c(s[i],r,n));return this}function $c(e,r,n){var s=Rc(e),i=s.CustomEvent;typeof i=="function"?i=new i(r,n):(i=s.document.createEvent("Event"),n?(i.initEvent(r,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(r,!1,!1)),e.dispatchEvent(i)}function Bx(e,r){return function(){return $c(this,e,r)}}function Vx(e,r){return function(){return $c(this,e,r.apply(this,arguments))}}function Gx(e,r){return this.each((typeof r=="function"?Vx:Bx)(e,r))}function*Yx(){for(var e=this._groups,r=0,n=e.length;r<n;++r)for(var s=e[r],i=0,o=s.length,l;i<o;++i)(l=s[i])&&(yield l)}var zc=[null];function tt(e,r){this._groups=e,this._parents=r}function Rn(){return new tt([[document.documentElement]],zc)}function Xx(){return this}tt.prototype=Rn.prototype={constructor:tt,select:wg,selectAll:Sg,selectChild:Eg,selectChildren:Ag,filter:Dg,data:Ig,enter:Mg,exit:Ug,join:qg,merge:Wg,selection:Xx,order:Bg,sort:Vg,call:Yg,nodes:Xg,node:Kg,size:Jg,empty:Zg,each:Qg,attr:ix,style:ux,property:mx,classed:yx,text:_x,html:kx,raise:Px,lower:Ox,append:Rx,insert:Ax,remove:Mx,clone:Lx,datum:Fx,on:Wx,dispatch:Gx,[Symbol.iterator]:Yx};function st(e){return typeof e=="string"?new tt([[document.querySelector(e)]],[document.documentElement]):new tt([[e]],zc)}function Kx(e){let r;for(;r=e.sourceEvent;)e=r;return e}function xt(e,r){if(e=Kx(e),r===void 0&&(r=e.currentTarget),r){var n=r.ownerSVGElement||r;if(n.createSVGPoint){var s=n.createSVGPoint();return s.x=e.clientX,s.y=e.clientY,s=s.matrixTransform(r.getScreenCTM().inverse()),[s.x,s.y]}if(r.getBoundingClientRect){var i=r.getBoundingClientRect();return[e.clientX-i.left-r.clientLeft,e.clientY-i.top-r.clientTop]}}return[e.pageX,e.pageY]}var Jx={value:()=>{}};function Tn(){for(var e=0,r=arguments.length,n={},s;e<r;++e){if(!(s=arguments[e]+"")||s in n||/[\s.]/.test(s))throw new Error("illegal type: "+s);n[s]=[]}return new as(n)}function as(e){this._=e}function Zx(e,r){return e.trim().split(/^|\s+/).map(function(n){var s="",i=n.indexOf(".");if(i>=0&&(s=n.slice(i+1),n=n.slice(0,i)),n&&!r.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:s}})}as.prototype=Tn.prototype={constructor:as,on:function(e,r){var n=this._,s=Zx(e+"",n),i,o=-1,l=s.length;if(arguments.length<2){for(;++o<l;)if((i=(e=s[o]).type)&&(i=Qx(n[i],e.name)))return i;return}if(r!=null&&typeof r!="function")throw new Error("invalid callback: "+r);for(;++o<l;)if(i=(e=s[o]).type)n[i]=io(n[i],e.name,r);else if(r==null)for(i in n)n[i]=io(n[i],e.name,null);return this},copy:function(){var e={},r=this._;for(var n in r)e[n]=r[n].slice();return new as(e)},call:function(e,r){if((i=arguments.length-2)>0)for(var n=new Array(i),s=0,i,o;s<i;++s)n[s]=arguments[s+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(o=this._[e],s=0,i=o.length;s<i;++s)o[s].value.apply(r,n)},apply:function(e,r,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var s=this._[e],i=0,o=s.length;i<o;++i)s[i].value.apply(r,n)}};function Qx(e,r){for(var n=0,s=e.length,i;n<s;++n)if((i=e[n]).name===r)return i.value}function io(e,r,n){for(var s=0,i=e.length;s<i;++s)if(e[s].name===r){e[s]=Jx,e=e.slice(0,s).concat(e.slice(s+1));break}return n!=null&&e.push({name:r,value:n}),e}const e0={passive:!1},_n={capture:!0,passive:!1};function sa(e){e.stopImmediatePropagation()}function jr(e){e.preventDefault(),e.stopImmediatePropagation()}function Lc(e){var r=e.document.documentElement,n=st(e).on("dragstart.drag",jr,_n);"onselectstart"in r?n.on("selectstart.drag",jr,_n):(r.__noselect=r.style.MozUserSelect,r.style.MozUserSelect="none")}function Fc(e,r){var n=e.document.documentElement,s=st(e).on("dragstart.drag",null);r&&(s.on("click.drag",jr,_n),setTimeout(function(){s.on("click.drag",null)},0)),"onselectstart"in n?s.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const Un=e=>()=>e;function ka(e,{sourceEvent:r,subject:n,target:s,identifier:i,active:o,x:l,y:c,dx:u,dy:d,dispatch:f}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:r,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:s,enumerable:!0,configurable:!0},identifier:{value:i,enumerable:!0,configurable:!0},active:{value:o,enumerable:!0,configurable:!0},x:{value:l,enumerable:!0,configurable:!0},y:{value:c,enumerable:!0,configurable:!0},dx:{value:u,enumerable:!0,configurable:!0},dy:{value:d,enumerable:!0,configurable:!0},_:{value:f}})}ka.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};function t0(e){return!e.ctrlKey&&!e.button}function r0(){return this.parentNode}function n0(e,r){return r??{x:e.x,y:e.y}}function s0(){return navigator.maxTouchPoints||"ontouchstart"in this}function a0(){var e=t0,r=r0,n=n0,s=s0,i={},o=Tn("start","drag","end"),l=0,c,u,d,f,h=0;function x(g){g.on("mousedown.drag",w).filter(s).on("touchstart.drag",b).on("touchmove.drag",p,e0).on("touchend.drag touchcancel.drag",m).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function w(g,y){if(!(f||!e.call(this,g,y))){var S=_(this,r.call(this,g,y),g,y,"mouse");S&&(st(g.view).on("mousemove.drag",v,_n).on("mouseup.drag",j,_n),Lc(g.view),sa(g),d=!1,c=g.clientX,u=g.clientY,S("start",g))}}function v(g){if(jr(g),!d){var y=g.clientX-c,S=g.clientY-u;d=y*y+S*S>h}i.mouse("drag",g)}function j(g){st(g.view).on("mousemove.drag mouseup.drag",null),Fc(g.view,d),jr(g),i.mouse("end",g)}function b(g,y){if(e.call(this,g,y)){var S=g.changedTouches,N=r.call(this,g,y),k=S.length,C,E;for(C=0;C<k;++C)(E=_(this,N,g,y,S[C].identifier,S[C]))&&(sa(g),E("start",g,S[C]))}}function p(g){var y=g.changedTouches,S=y.length,N,k;for(N=0;N<S;++N)(k=i[y[N].identifier])&&(jr(g),k("drag",g,y[N]))}function m(g){var y=g.changedTouches,S=y.length,N,k;for(f&&clearTimeout(f),f=setTimeout(function(){f=null},500),N=0;N<S;++N)(k=i[y[N].identifier])&&(sa(g),k("end",g,y[N]))}function _(g,y,S,N,k,C){var E=o.copy(),O=xt(C||S,y),A,M,T;if((T=n.call(g,new ka("beforestart",{sourceEvent:S,target:x,identifier:k,active:l,x:O[0],y:O[1],dx:0,dy:0,dispatch:E}),N))!=null)return A=T.x-O[0]||0,M=T.y-O[1]||0,function H(z,B,Y){var U=O,G;switch(z){case"start":i[k]=H,G=l++;break;case"end":delete i[k],--l;case"drag":O=xt(Y||B,y),G=l;break}E.call(z,g,new ka(z,{sourceEvent:B,subject:T,target:x,identifier:k,active:G,x:O[0]+A,y:O[1]+M,dx:O[0]-U[0],dy:O[1]-U[1],dispatch:E}),N)}}return x.filter=function(g){return arguments.length?(e=typeof g=="function"?g:Un(!!g),x):e},x.container=function(g){return arguments.length?(r=typeof g=="function"?g:Un(g),x):r},x.subject=function(g){return arguments.length?(n=typeof g=="function"?g:Un(g),x):n},x.touchable=function(g){return arguments.length?(s=typeof g=="function"?g:Un(!!g),x):s},x.on=function(){var g=o.on.apply(o,arguments);return g===o?x:g},x.clickDistance=function(g){return arguments.length?(h=(g=+g)*g,x):Math.sqrt(h)},x}var Pr=0,on=0,qr=0,Ic=1e3,gs,ln,xs=0,dr=0,Us=0,jn=typeof performance=="object"&&performance.now?performance:Date,Hc=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function ei(){return dr||(Hc(i0),dr=jn.now()+Us)}function i0(){dr=0}function ys(){this._call=this._time=this._next=null}ys.prototype=ti.prototype={constructor:ys,restart:function(e,r,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?ei():+n)+(r==null?0:+r),!this._next&&ln!==this&&(ln?ln._next=this:gs=this,ln=this),this._call=e,this._time=n,Ca()},stop:function(){this._call&&(this._call=null,this._time=1/0,Ca())}};function ti(e,r,n){var s=new ys;return s.restart(e,r,n),s}function o0(){ei(),++Pr;for(var e=gs,r;e;)(r=dr-e._time)>=0&&e._call.call(void 0,r),e=e._next;--Pr}function oo(){dr=(xs=jn.now())+Us,Pr=on=0;try{o0()}finally{Pr=0,c0(),dr=0}}function l0(){var e=jn.now(),r=e-xs;r>Ic&&(Us-=r,xs=e)}function c0(){for(var e,r=gs,n,s=1/0;r;)r._call?(s>r._time&&(s=r._time),e=r,r=r._next):(n=r._next,r._next=null,r=e?e._next=n:gs=n);ln=e,Ca(s)}function Ca(e){if(!Pr){on&&(on=clearTimeout(on));var r=e-dr;r>24?(e<1/0&&(on=setTimeout(oo,e-jn.now()-Us)),qr&&(qr=clearInterval(qr))):(qr||(xs=jn.now(),qr=setInterval(l0,Ic)),Pr=1,Hc(oo))}}function lo(e,r,n){var s=new ys;return r=r==null?0:+r,s.restart(i=>{s.stop(),e(i+r)},r,n),s}var u0=Tn("start","end","cancel","interrupt"),d0=[],Uc=0,co=1,Pa=2,is=3,uo=4,Ea=5,os=6;function qs(e,r,n,s,i,o){var l=e.__transition;if(!l)e.__transition={};else if(n in l)return;h0(e,n,{name:r,index:s,group:i,on:u0,tween:d0,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:Uc})}function ri(e,r){var n=ht(e,r);if(n.state>Uc)throw new Error("too late; already scheduled");return n}function Nt(e,r){var n=ht(e,r);if(n.state>is)throw new Error("too late; already running");return n}function ht(e,r){var n=e.__transition;if(!n||!(n=n[r]))throw new Error("transition not found");return n}function h0(e,r,n){var s=e.__transition,i;s[r]=n,n.timer=ti(o,0,n.time);function o(d){n.state=co,n.timer.restart(l,n.delay,n.time),n.delay<=d&&l(d-n.delay)}function l(d){var f,h,x,w;if(n.state!==co)return u();for(f in s)if(w=s[f],w.name===n.name){if(w.state===is)return lo(l);w.state===uo?(w.state=os,w.timer.stop(),w.on.call("interrupt",e,e.__data__,w.index,w.group),delete s[f]):+f<r&&(w.state=os,w.timer.stop(),w.on.call("cancel",e,e.__data__,w.index,w.group),delete s[f])}if(lo(function(){n.state===is&&(n.state=uo,n.timer.restart(c,n.delay,n.time),c(d))}),n.state=Pa,n.on.call("start",e,e.__data__,n.index,n.group),n.state===Pa){for(n.state=is,i=new Array(x=n.tween.length),f=0,h=-1;f<x;++f)(w=n.tween[f].value.call(e,e.__data__,n.index,n.group))&&(i[++h]=w);i.length=h+1}}function c(d){for(var f=d<n.duration?n.ease.call(null,d/n.duration):(n.timer.restart(u),n.state=Ea,1),h=-1,x=i.length;++h<x;)i[h].call(e,f);n.state===Ea&&(n.on.call("end",e,e.__data__,n.index,n.group),u())}function u(){n.state=os,n.timer.stop(),delete s[r];for(var d in s)return;delete e.__transition}}function ls(e,r){var n=e.__transition,s,i,o=!0,l;if(n){r=r==null?null:r+"";for(l in n){if((s=n[l]).name!==r){o=!1;continue}i=s.state>Pa&&s.state<Ea,s.state=os,s.timer.stop(),s.on.call(i?"interrupt":"cancel",e,e.__data__,s.index,s.group),delete n[l]}o&&delete e.__transition}}function f0(e){return this.each(function(){ls(this,e)})}function m0(e,r){var n,s;return function(){var i=Nt(this,e),o=i.tween;if(o!==n){s=n=o;for(var l=0,c=s.length;l<c;++l)if(s[l].name===r){s=s.slice(),s.splice(l,1);break}}i.tween=s}}function p0(e,r,n){var s,i;if(typeof n!="function")throw new Error;return function(){var o=Nt(this,e),l=o.tween;if(l!==s){i=(s=l).slice();for(var c={name:r,value:n},u=0,d=i.length;u<d;++u)if(i[u].name===r){i[u]=c;break}u===d&&i.push(c)}o.tween=i}}function g0(e,r){var n=this._id;if(e+="",arguments.length<2){for(var s=ht(this.node(),n).tween,i=0,o=s.length,l;i<o;++i)if((l=s[i]).name===e)return l.value;return null}return this.each((r==null?m0:p0)(n,e,r))}function ni(e,r,n){var s=e._id;return e.each(function(){var i=Nt(this,s);(i.value||(i.value={}))[r]=n.apply(this,arguments)}),function(i){return ht(i,s).value[r]}}function qc(e,r){var n;return(typeof r=="number"?Id:r instanceof ki?Si:(n=ki(r))?(r=n,Si):Hd)(e,r)}function x0(e){return function(){this.removeAttribute(e)}}function y0(e){return function(){this.removeAttributeNS(e.space,e.local)}}function b0(e,r,n){var s,i=n+"",o;return function(){var l=this.getAttribute(e);return l===i?null:l===s?o:o=r(s=l,n)}}function v0(e,r,n){var s,i=n+"",o;return function(){var l=this.getAttributeNS(e.space,e.local);return l===i?null:l===s?o:o=r(s=l,n)}}function w0(e,r,n){var s,i,o;return function(){var l,c=n(this),u;return c==null?void this.removeAttribute(e):(l=this.getAttribute(e),u=c+"",l===u?null:l===s&&u===i?o:(i=u,o=r(s=l,c)))}}function _0(e,r,n){var s,i,o;return function(){var l,c=n(this),u;return c==null?void this.removeAttributeNS(e.space,e.local):(l=this.getAttributeNS(e.space,e.local),u=c+"",l===u?null:l===s&&u===i?o:(i=u,o=r(s=l,c)))}}function j0(e,r){var n=Hs(e),s=n==="transform"?Ud:qc;return this.attrTween(e,typeof r=="function"?(n.local?_0:w0)(n,s,ni(this,"attr."+e,r)):r==null?(n.local?y0:x0)(n):(n.local?v0:b0)(n,s,r))}function N0(e,r){return function(n){this.setAttribute(e,r.call(this,n))}}function S0(e,r){return function(n){this.setAttributeNS(e.space,e.local,r.call(this,n))}}function k0(e,r){var n,s;function i(){var o=r.apply(this,arguments);return o!==s&&(n=(s=o)&&S0(e,o)),n}return i._value=r,i}function C0(e,r){var n,s;function i(){var o=r.apply(this,arguments);return o!==s&&(n=(s=o)&&N0(e,o)),n}return i._value=r,i}function P0(e,r){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(r==null)return this.tween(n,null);if(typeof r!="function")throw new Error;var s=Hs(e);return this.tween(n,(s.local?k0:C0)(s,r))}function E0(e,r){return function(){ri(this,e).delay=+r.apply(this,arguments)}}function O0(e,r){return r=+r,function(){ri(this,e).delay=r}}function R0(e){var r=this._id;return arguments.length?this.each((typeof e=="function"?E0:O0)(r,e)):ht(this.node(),r).delay}function T0(e,r){return function(){Nt(this,e).duration=+r.apply(this,arguments)}}function A0(e,r){return r=+r,function(){Nt(this,e).duration=r}}function D0(e){var r=this._id;return arguments.length?this.each((typeof e=="function"?T0:A0)(r,e)):ht(this.node(),r).duration}function M0(e,r){if(typeof r!="function")throw new Error;return function(){Nt(this,e).ease=r}}function $0(e){var r=this._id;return arguments.length?this.each(M0(r,e)):ht(this.node(),r).ease}function z0(e,r){return function(){var n=r.apply(this,arguments);if(typeof n!="function")throw new Error;Nt(this,e).ease=n}}function L0(e){if(typeof e!="function")throw new Error;return this.each(z0(this._id,e))}function F0(e){typeof e!="function"&&(e=Pc(e));for(var r=this._groups,n=r.length,s=new Array(n),i=0;i<n;++i)for(var o=r[i],l=o.length,c=s[i]=[],u,d=0;d<l;++d)(u=o[d])&&e.call(u,u.__data__,d,o)&&c.push(u);return new It(s,this._parents,this._name,this._id)}function I0(e){if(e._id!==this._id)throw new Error;for(var r=this._groups,n=e._groups,s=r.length,i=n.length,o=Math.min(s,i),l=new Array(s),c=0;c<o;++c)for(var u=r[c],d=n[c],f=u.length,h=l[c]=new Array(f),x,w=0;w<f;++w)(x=u[w]||d[w])&&(h[w]=x);for(;c<s;++c)l[c]=r[c];return new It(l,this._parents,this._name,this._id)}function H0(e){return(e+"").trim().split(/^|\s+/).every(function(r){var n=r.indexOf(".");return n>=0&&(r=r.slice(0,n)),!r||r==="start"})}function U0(e,r,n){var s,i,o=H0(r)?ri:Nt;return function(){var l=o(this,e),c=l.on;c!==s&&(i=(s=c).copy()).on(r,n),l.on=i}}function q0(e,r){var n=this._id;return arguments.length<2?ht(this.node(),n).on.on(e):this.each(U0(n,e,r))}function W0(e){return function(){var r=this.parentNode;for(var n in this.__transition)if(+n!==e)return;r&&r.removeChild(this)}}function B0(){return this.on("end.remove",W0(this._id))}function V0(e){var r=this._name,n=this._id;typeof e!="function"&&(e=Za(e));for(var s=this._groups,i=s.length,o=new Array(i),l=0;l<i;++l)for(var c=s[l],u=c.length,d=o[l]=new Array(u),f,h,x=0;x<u;++x)(f=c[x])&&(h=e.call(f,f.__data__,x,c))&&("__data__"in f&&(h.__data__=f.__data__),d[x]=h,qs(d[x],r,n,x,d,ht(f,n)));return new It(o,this._parents,r,n)}function G0(e){var r=this._name,n=this._id;typeof e!="function"&&(e=Cc(e));for(var s=this._groups,i=s.length,o=[],l=[],c=0;c<i;++c)for(var u=s[c],d=u.length,f,h=0;h<d;++h)if(f=u[h]){for(var x=e.call(f,f.__data__,h,u),w,v=ht(f,n),j=0,b=x.length;j<b;++j)(w=x[j])&&qs(w,r,n,j,x,v);o.push(x),l.push(f)}return new It(o,l,r,n)}var Y0=Rn.prototype.constructor;function X0(){return new Y0(this._groups,this._parents)}function K0(e,r){var n,s,i;return function(){var o=Cr(this,e),l=(this.style.removeProperty(e),Cr(this,e));return o===l?null:o===n&&l===s?i:i=r(n=o,s=l)}}function Wc(e){return function(){this.style.removeProperty(e)}}function J0(e,r,n){var s,i=n+"",o;return function(){var l=Cr(this,e);return l===i?null:l===s?o:o=r(s=l,n)}}function Z0(e,r,n){var s,i,o;return function(){var l=Cr(this,e),c=n(this),u=c+"";return c==null&&(u=c=(this.style.removeProperty(e),Cr(this,e))),l===u?null:l===s&&u===i?o:(i=u,o=r(s=l,c))}}function Q0(e,r){var n,s,i,o="style."+r,l="end."+o,c;return function(){var u=Nt(this,e),d=u.on,f=u.value[o]==null?c||(c=Wc(r)):void 0;(d!==n||i!==f)&&(s=(n=d).copy()).on(l,i=f),u.on=s}}function ey(e,r,n){var s=(e+="")=="transform"?qd:qc;return r==null?this.styleTween(e,K0(e,s)).on("end.style."+e,Wc(e)):typeof r=="function"?this.styleTween(e,Z0(e,s,ni(this,"style."+e,r))).each(Q0(this._id,e)):this.styleTween(e,J0(e,s,r),n).on("end.style."+e,null)}function ty(e,r,n){return function(s){this.style.setProperty(e,r.call(this,s),n)}}function ry(e,r,n){var s,i;function o(){var l=r.apply(this,arguments);return l!==i&&(s=(i=l)&&ty(e,l,n)),s}return o._value=r,o}function ny(e,r,n){var s="style."+(e+="");if(arguments.length<2)return(s=this.tween(s))&&s._value;if(r==null)return this.tween(s,null);if(typeof r!="function")throw new Error;return this.tween(s,ry(e,r,n??""))}function sy(e){return function(){this.textContent=e}}function ay(e){return function(){var r=e(this);this.textContent=r??""}}function iy(e){return this.tween("text",typeof e=="function"?ay(ni(this,"text",e)):sy(e==null?"":e+""))}function oy(e){return function(r){this.textContent=e.call(this,r)}}function ly(e){var r,n;function s(){var i=e.apply(this,arguments);return i!==n&&(r=(n=i)&&oy(i)),r}return s._value=e,s}function cy(e){var r="text";if(arguments.length<1)return(r=this.tween(r))&&r._value;if(e==null)return this.tween(r,null);if(typeof e!="function")throw new Error;return this.tween(r,ly(e))}function uy(){for(var e=this._name,r=this._id,n=Bc(),s=this._groups,i=s.length,o=0;o<i;++o)for(var l=s[o],c=l.length,u,d=0;d<c;++d)if(u=l[d]){var f=ht(u,r);qs(u,e,n,d,l,{time:f.time+f.delay+f.duration,delay:0,duration:f.duration,ease:f.ease})}return new It(s,this._parents,e,n)}function dy(){var e,r,n=this,s=n._id,i=n.size();return new Promise(function(o,l){var c={value:l},u={value:function(){--i===0&&o()}};n.each(function(){var d=Nt(this,s),f=d.on;f!==e&&(r=(e=f).copy(),r._.cancel.push(c),r._.interrupt.push(c),r._.end.push(u)),d.on=r}),i===0&&o()})}var hy=0;function It(e,r,n,s){this._groups=e,this._parents=r,this._name=n,this._id=s}function Bc(){return++hy}var Pt=Rn.prototype;It.prototype={constructor:It,select:V0,selectAll:G0,selectChild:Pt.selectChild,selectChildren:Pt.selectChildren,filter:F0,merge:I0,selection:X0,transition:uy,call:Pt.call,nodes:Pt.nodes,node:Pt.node,size:Pt.size,empty:Pt.empty,each:Pt.each,on:q0,attr:j0,attrTween:P0,style:ey,styleTween:ny,text:iy,textTween:cy,remove:B0,tween:g0,delay:R0,duration:D0,ease:$0,easeVarying:L0,end:dy,[Symbol.iterator]:Pt[Symbol.iterator]};function fy(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var my={time:null,delay:0,duration:250,ease:fy};function py(e,r){for(var n;!(n=e.__transition)||!(n=n[r]);)if(!(e=e.parentNode))throw new Error(`transition ${r} not found`);return n}function gy(e){var r,n;e instanceof It?(r=e._id,e=e._name):(r=Bc(),(n=my).time=ei(),e=e==null?null:e+"");for(var s=this._groups,i=s.length,o=0;o<i;++o)for(var l=s[o],c=l.length,u,d=0;d<c;++d)(u=l[d])&&qs(u,e,r,d,l,n||py(u,r));return new It(s,this._parents,e,r)}Rn.prototype.interrupt=f0;Rn.prototype.transition=gy;const qn=e=>()=>e;function xy(e,{sourceEvent:r,target:n,transform:s,dispatch:i}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:r,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:s,enumerable:!0,configurable:!0},_:{value:i}})}function Mt(e,r,n){this.k=e,this.x=r,this.y=n}Mt.prototype={constructor:Mt,scale:function(e){return e===1?this:new Mt(this.k*e,this.x,this.y)},translate:function(e,r){return e===0&r===0?this:new Mt(this.k,this.x+this.k*e,this.y+this.k*r)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var si=new Mt(1,0,0);gt.prototype=Mt.prototype;function gt(e){for(;!e.__zoom;)if(!(e=e.parentNode))return si;return e.__zoom}function aa(e){e.stopImmediatePropagation()}function Wr(e){e.preventDefault(),e.stopImmediatePropagation()}function yy(e){return(!e.ctrlKey||e.type==="wheel")&&!e.button}function by(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function ho(){return this.__zoom||si}function vy(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function wy(){return navigator.maxTouchPoints||"ontouchstart"in this}function _y(e,r,n){var s=e.invertX(r[0][0])-n[0][0],i=e.invertX(r[1][0])-n[1][0],o=e.invertY(r[0][1])-n[0][1],l=e.invertY(r[1][1])-n[1][1];return e.translate(i>s?(s+i)/2:Math.min(0,s)||Math.max(0,i),l>o?(o+l)/2:Math.min(0,o)||Math.max(0,l))}function jy(){var e=yy,r=by,n=_y,s=vy,i=wy,o=[0,1/0],l=[[-1/0,-1/0],[1/0,1/0]],c=250,u=Wd,d=Tn("start","zoom","end"),f,h,x,w=500,v=150,j=0,b=10;function p(T){T.property("__zoom",ho).on("wheel.zoom",k,{passive:!1}).on("mousedown.zoom",C).on("dblclick.zoom",E).filter(i).on("touchstart.zoom",O).on("touchmove.zoom",A).on("touchend.zoom touchcancel.zoom",M).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}p.transform=function(T,H,z,B){var Y=T.selection?T.selection():T;Y.property("__zoom",ho),T!==Y?y(T,H,z,B):Y.interrupt().each(function(){S(this,arguments).event(B).start().zoom(null,typeof H=="function"?H.apply(this,arguments):H).end()})},p.scaleBy=function(T,H,z,B){p.scaleTo(T,function(){var Y=this.__zoom.k,U=typeof H=="function"?H.apply(this,arguments):H;return Y*U},z,B)},p.scaleTo=function(T,H,z,B){p.transform(T,function(){var Y=r.apply(this,arguments),U=this.__zoom,G=z==null?g(Y):typeof z=="function"?z.apply(this,arguments):z,Z=U.invert(G),X=typeof H=="function"?H.apply(this,arguments):H;return n(_(m(U,X),G,Z),Y,l)},z,B)},p.translateBy=function(T,H,z,B){p.transform(T,function(){return n(this.__zoom.translate(typeof H=="function"?H.apply(this,arguments):H,typeof z=="function"?z.apply(this,arguments):z),r.apply(this,arguments),l)},null,B)},p.translateTo=function(T,H,z,B,Y){p.transform(T,function(){var U=r.apply(this,arguments),G=this.__zoom,Z=B==null?g(U):typeof B=="function"?B.apply(this,arguments):B;return n(si.translate(Z[0],Z[1]).scale(G.k).translate(typeof H=="function"?-H.apply(this,arguments):-H,typeof z=="function"?-z.apply(this,arguments):-z),U,l)},B,Y)};function m(T,H){return H=Math.max(o[0],Math.min(o[1],H)),H===T.k?T:new Mt(H,T.x,T.y)}function _(T,H,z){var B=H[0]-z[0]*T.k,Y=H[1]-z[1]*T.k;return B===T.x&&Y===T.y?T:new Mt(T.k,B,Y)}function g(T){return[(+T[0][0]+ +T[1][0])/2,(+T[0][1]+ +T[1][1])/2]}function y(T,H,z,B){T.on("start.zoom",function(){S(this,arguments).event(B).start()}).on("interrupt.zoom end.zoom",function(){S(this,arguments).event(B).end()}).tween("zoom",function(){var Y=this,U=arguments,G=S(Y,U).event(B),Z=r.apply(Y,U),X=z==null?g(Z):typeof z=="function"?z.apply(Y,U):z,oe=Math.max(Z[1][0]-Z[0][0],Z[1][1]-Z[0][1]),le=Y.__zoom,me=typeof H=="function"?H.apply(Y,U):H,de=u(le.invert(X).concat(oe/le.k),me.invert(X).concat(oe/me.k));return function(ge){if(ge===1)ge=me;else{var J=de(ge),W=oe/J[2];ge=new Mt(W,X[0]-J[0]*W,X[1]-J[1]*W)}G.zoom(null,ge)}})}function S(T,H,z){return!z&&T.__zooming||new N(T,H)}function N(T,H){this.that=T,this.args=H,this.active=0,this.sourceEvent=null,this.extent=r.apply(T,H),this.taps=0}N.prototype={event:function(T){return T&&(this.sourceEvent=T),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(T,H){return this.mouse&&T!=="mouse"&&(this.mouse[1]=H.invert(this.mouse[0])),this.touch0&&T!=="touch"&&(this.touch0[1]=H.invert(this.touch0[0])),this.touch1&&T!=="touch"&&(this.touch1[1]=H.invert(this.touch1[0])),this.that.__zoom=H,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(T){var H=st(this.that).datum();d.call(T,this.that,new xy(T,{sourceEvent:this.sourceEvent,target:p,transform:this.that.__zoom,dispatch:d}),H)}};function k(T,...H){if(!e.apply(this,arguments))return;var z=S(this,H).event(T),B=this.__zoom,Y=Math.max(o[0],Math.min(o[1],B.k*Math.pow(2,s.apply(this,arguments)))),U=xt(T);if(z.wheel)(z.mouse[0][0]!==U[0]||z.mouse[0][1]!==U[1])&&(z.mouse[1]=B.invert(z.mouse[0]=U)),clearTimeout(z.wheel);else{if(B.k===Y)return;z.mouse=[U,B.invert(U)],ls(this),z.start()}Wr(T),z.wheel=setTimeout(G,v),z.zoom("mouse",n(_(m(B,Y),z.mouse[0],z.mouse[1]),z.extent,l));function G(){z.wheel=null,z.end()}}function C(T,...H){if(x||!e.apply(this,arguments))return;var z=T.currentTarget,B=S(this,H,!0).event(T),Y=st(T.view).on("mousemove.zoom",X,!0).on("mouseup.zoom",oe,!0),U=xt(T,z),G=T.clientX,Z=T.clientY;Lc(T.view),aa(T),B.mouse=[U,this.__zoom.invert(U)],ls(this),B.start();function X(le){if(Wr(le),!B.moved){var me=le.clientX-G,de=le.clientY-Z;B.moved=me*me+de*de>j}B.event(le).zoom("mouse",n(_(B.that.__zoom,B.mouse[0]=xt(le,z),B.mouse[1]),B.extent,l))}function oe(le){Y.on("mousemove.zoom mouseup.zoom",null),Fc(le.view,B.moved),Wr(le),B.event(le).end()}}function E(T,...H){if(e.apply(this,arguments)){var z=this.__zoom,B=xt(T.changedTouches?T.changedTouches[0]:T,this),Y=z.invert(B),U=z.k*(T.shiftKey?.5:2),G=n(_(m(z,U),B,Y),r.apply(this,H),l);Wr(T),c>0?st(this).transition().duration(c).call(y,G,B,T):st(this).call(p.transform,G,B,T)}}function O(T,...H){if(e.apply(this,arguments)){var z=T.touches,B=z.length,Y=S(this,H,T.changedTouches.length===B).event(T),U,G,Z,X;for(aa(T),G=0;G<B;++G)Z=z[G],X=xt(Z,this),X=[X,this.__zoom.invert(X),Z.identifier],Y.touch0?!Y.touch1&&Y.touch0[2]!==X[2]&&(Y.touch1=X,Y.taps=0):(Y.touch0=X,U=!0,Y.taps=1+!!f);f&&(f=clearTimeout(f)),U&&(Y.taps<2&&(h=X[0],f=setTimeout(function(){f=null},w)),ls(this),Y.start())}}function A(T,...H){if(this.__zooming){var z=S(this,H).event(T),B=T.changedTouches,Y=B.length,U,G,Z,X;for(Wr(T),U=0;U<Y;++U)G=B[U],Z=xt(G,this),z.touch0&&z.touch0[2]===G.identifier?z.touch0[0]=Z:z.touch1&&z.touch1[2]===G.identifier&&(z.touch1[0]=Z);if(G=z.that.__zoom,z.touch1){var oe=z.touch0[0],le=z.touch0[1],me=z.touch1[0],de=z.touch1[1],ge=(ge=me[0]-oe[0])*ge+(ge=me[1]-oe[1])*ge,J=(J=de[0]-le[0])*J+(J=de[1]-le[1])*J;G=m(G,Math.sqrt(ge/J)),Z=[(oe[0]+me[0])/2,(oe[1]+me[1])/2],X=[(le[0]+de[0])/2,(le[1]+de[1])/2]}else if(z.touch0)Z=z.touch0[0],X=z.touch0[1];else return;z.zoom("touch",n(_(G,Z,X),z.extent,l))}}function M(T,...H){if(this.__zooming){var z=S(this,H).event(T),B=T.changedTouches,Y=B.length,U,G;for(aa(T),x&&clearTimeout(x),x=setTimeout(function(){x=null},w),U=0;U<Y;++U)G=B[U],z.touch0&&z.touch0[2]===G.identifier?delete z.touch0:z.touch1&&z.touch1[2]===G.identifier&&delete z.touch1;if(z.touch1&&!z.touch0&&(z.touch0=z.touch1,delete z.touch1),z.touch0)z.touch0[1]=this.__zoom.invert(z.touch0[0]);else if(z.end(),z.taps===2&&(G=xt(G,this),Math.hypot(h[0]-G[0],h[1]-G[1])<b)){var Z=st(this).on("dblclick.zoom");Z&&Z.apply(this,arguments)}}}return p.wheelDelta=function(T){return arguments.length?(s=typeof T=="function"?T:qn(+T),p):s},p.filter=function(T){return arguments.length?(e=typeof T=="function"?T:qn(!!T),p):e},p.touchable=function(T){return arguments.length?(i=typeof T=="function"?T:qn(!!T),p):i},p.extent=function(T){return arguments.length?(r=typeof T=="function"?T:qn([[+T[0][0],+T[0][1]],[+T[1][0],+T[1][1]]]),p):r},p.scaleExtent=function(T){return arguments.length?(o[0]=+T[0],o[1]=+T[1],p):[o[0],o[1]]},p.translateExtent=function(T){return arguments.length?(l[0][0]=+T[0][0],l[1][0]=+T[1][0],l[0][1]=+T[0][1],l[1][1]=+T[1][1],p):[[l[0][0],l[0][1]],[l[1][0],l[1][1]]]},p.constrain=function(T){return arguments.length?(n=T,p):n},p.duration=function(T){return arguments.length?(c=+T,p):c},p.interpolate=function(T){return arguments.length?(u=T,p):u},p.on=function(){var T=d.on.apply(d,arguments);return T===d?p:T},p.clickDistance=function(T){return arguments.length?(j=(T=+T)*T,p):Math.sqrt(j)},p.tapDistance=function(T){return arguments.length?(b=+T,p):b},p}var Ny=typeof global=="object"&&global&&global.Object===Object&&global,Sy=typeof self=="object"&&self&&self.Object===Object&&self,Vc=Ny||Sy||Function("return this")(),bs=Vc.Symbol,Gc=Object.prototype,ky=Gc.hasOwnProperty,Cy=Gc.toString,Br=bs?bs.toStringTag:void 0;function Py(e){var r=ky.call(e,Br),n=e[Br];try{e[Br]=void 0;var s=!0}catch{}var i=Cy.call(e);return s&&(r?e[Br]=n:delete e[Br]),i}var Ey=Object.prototype,Oy=Ey.toString;function Ry(e){return Oy.call(e)}var Ty="[object Null]",Ay="[object Undefined]",fo=bs?bs.toStringTag:void 0;function Dy(e){return e==null?e===void 0?Ay:Ty:fo&&fo in Object(e)?Py(e):Ry(e)}function My(e){return e!=null&&typeof e=="object"}var $y="[object Symbol]";function zy(e){return typeof e=="symbol"||My(e)&&Dy(e)==$y}var Ly=/\s/;function Fy(e){for(var r=e.length;r--&&Ly.test(e.charAt(r)););return r}var Iy=/^\s+/;function Hy(e){return e&&e.slice(0,Fy(e)+1).replace(Iy,"")}function vs(e){var r=typeof e;return e!=null&&(r=="object"||r=="function")}var mo=NaN,Uy=/^[-+]0x[0-9a-f]+$/i,qy=/^0b[01]+$/i,Wy=/^0o[0-7]+$/i,By=parseInt;function po(e){if(typeof e=="number")return e;if(zy(e))return mo;if(vs(e)){var r=typeof e.valueOf=="function"?e.valueOf():e;e=vs(r)?r+"":r}if(typeof e!="string")return e===0?e:+e;e=Hy(e);var n=qy.test(e);return n||Wy.test(e)?By(e.slice(2),n?2:8):Uy.test(e)?mo:+e}var ia=function(){return Vc.Date.now()},Vy="Expected a function",Gy=Math.max,Yy=Math.min;function Yc(e,r,n){var s,i,o,l,c,u,d=0,f=!1,h=!1,x=!0;if(typeof e!="function")throw new TypeError(Vy);r=po(r)||0,vs(n)&&(f=!!n.leading,h="maxWait"in n,o=h?Gy(po(n.maxWait)||0,r):o,x="trailing"in n?!!n.trailing:x);function w(S){var N=s,k=i;return s=i=void 0,d=S,l=e.apply(k,N),l}function v(S){return d=S,c=setTimeout(p,r),f?w(S):l}function j(S){var N=S-u,k=S-d,C=r-N;return h?Yy(C,o-k):C}function b(S){var N=S-u,k=S-d;return u===void 0||N>=r||N<0||h&&k>=o}function p(){var S=ia();if(b(S))return m(S);c=setTimeout(p,j(S))}function m(S){return c=void 0,x&&s?w(S):(s=i=void 0,l)}function _(){c!==void 0&&clearTimeout(c),d=0,s=u=i=c=void 0}function g(){return c===void 0?l:m(ia())}function y(){var S=ia(),N=b(S);if(s=arguments,i=this,u=S,N){if(c===void 0)return v(u);if(h)return clearTimeout(c),c=setTimeout(p,r),w(u)}return c===void 0&&(c=setTimeout(p,r)),l}return y.cancel=_,y.flush=g,y}var Xy="Expected a function";function Ky(e,r,n){var s=!0,i=!0;if(typeof e!="function")throw new TypeError(Xy);return vs(n)&&(s="leading"in n?!!n.leading:s,i="trailing"in n?!!n.trailing:i),Yc(e,r,{leading:s,maxWait:r,trailing:i})}var cr=Object.freeze({Linear:Object.freeze({None:function(e){return e},In:function(e){return e},Out:function(e){return e},InOut:function(e){return e}}),Quadratic:Object.freeze({In:function(e){return e*e},Out:function(e){return e*(2-e)},InOut:function(e){return(e*=2)<1?.5*e*e:-.5*(--e*(e-2)-1)}}),Cubic:Object.freeze({In:function(e){return e*e*e},Out:function(e){return--e*e*e+1},InOut:function(e){return(e*=2)<1?.5*e*e*e:.5*((e-=2)*e*e+2)}}),Quartic:Object.freeze({In:function(e){return e*e*e*e},Out:function(e){return 1- --e*e*e*e},InOut:function(e){return(e*=2)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2)}}),Quintic:Object.freeze({In:function(e){return e*e*e*e*e},Out:function(e){return--e*e*e*e*e+1},InOut:function(e){return(e*=2)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2)}}),Sinusoidal:Object.freeze({In:function(e){return 1-Math.sin((1-e)*Math.PI/2)},Out:function(e){return Math.sin(e*Math.PI/2)},InOut:function(e){return .5*(1-Math.sin(Math.PI*(.5-e)))}}),Exponential:Object.freeze({In:function(e){return e===0?0:Math.pow(1024,e-1)},Out:function(e){return e===1?1:1-Math.pow(2,-10*e)},InOut:function(e){return e===0?0:e===1?1:(e*=2)<1?.5*Math.pow(1024,e-1):.5*(-Math.pow(2,-10*(e-1))+2)}}),Circular:Object.freeze({In:function(e){return 1-Math.sqrt(1-e*e)},Out:function(e){return Math.sqrt(1- --e*e)},InOut:function(e){return(e*=2)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1)}}),Elastic:Object.freeze({In:function(e){return e===0?0:e===1?1:-Math.pow(2,10*(e-1))*Math.sin((e-1.1)*5*Math.PI)},Out:function(e){return e===0?0:e===1?1:Math.pow(2,-10*e)*Math.sin((e-.1)*5*Math.PI)+1},InOut:function(e){return e===0?0:e===1?1:(e*=2,e<1?-.5*Math.pow(2,10*(e-1))*Math.sin((e-1.1)*5*Math.PI):.5*Math.pow(2,-10*(e-1))*Math.sin((e-1.1)*5*Math.PI)+1)}}),Back:Object.freeze({In:function(e){var r=1.70158;return e===1?1:e*e*((r+1)*e-r)},Out:function(e){var r=1.70158;return e===0?0:--e*e*((r+1)*e+r)+1},InOut:function(e){var r=2.5949095;return(e*=2)<1?.5*(e*e*((r+1)*e-r)):.5*((e-=2)*e*((r+1)*e+r)+2)}}),Bounce:Object.freeze({In:function(e){return 1-cr.Bounce.Out(1-e)},Out:function(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375},InOut:function(e){return e<.5?cr.Bounce.In(e*2)*.5:cr.Bounce.Out(e*2-1)*.5+.5}}),generatePow:function(e){return e===void 0&&(e=4),e=e<Number.EPSILON?Number.EPSILON:e,e=e>1e4?1e4:e,{In:function(r){return Math.pow(r,e)},Out:function(r){return 1-Math.pow(1-r,e)},InOut:function(r){return r<.5?Math.pow(r*2,e)/2:(1-Math.pow(2-r*2,e))/2+.5}}}}),cn=function(){return performance.now()},Xc=(function(){function e(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];this._tweens={},this._tweensAddedDuringUpdate={},this.add.apply(this,r)}return e.prototype.getAll=function(){var r=this;return Object.keys(this._tweens).map(function(n){return r._tweens[n]})},e.prototype.removeAll=function(){this._tweens={}},e.prototype.add=function(){for(var r,n=[],s=0;s<arguments.length;s++)n[s]=arguments[s];for(var i=0,o=n;i<o.length;i++){var l=o[i];(r=l._group)===null||r===void 0||r.remove(l),l._group=this,this._tweens[l.getId()]=l,this._tweensAddedDuringUpdate[l.getId()]=l}},e.prototype.remove=function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];for(var s=0,i=r;s<i.length;s++){var o=i[s];o._group=void 0,delete this._tweens[o.getId()],delete this._tweensAddedDuringUpdate[o.getId()]}},e.prototype.allStopped=function(){return this.getAll().every(function(r){return!r.isPlaying()})},e.prototype.update=function(r,n){r===void 0&&(r=cn()),n===void 0&&(n=!0);var s=Object.keys(this._tweens);if(s.length!==0)for(;s.length>0;){this._tweensAddedDuringUpdate={};for(var i=0;i<s.length;i++){var o=this._tweens[s[i]],l=!n;o&&o.update(r,l)===!1&&!n&&this.remove(o)}s=Object.keys(this._tweensAddedDuringUpdate)}},e})(),Oa={Linear:function(e,r){var n=e.length-1,s=n*r,i=Math.floor(s),o=Oa.Utils.Linear;return r<0?o(e[0],e[1],s):r>1?o(e[n],e[n-1],n-s):o(e[i],e[i+1>n?n:i+1],s-i)},Utils:{Linear:function(e,r,n){return(r-e)*n+e}}},Kc=(function(){function e(){}return e.nextId=function(){return e._nextId++},e._nextId=0,e})(),Ra=new Xc,go=(function(){function e(r,n){this._isPaused=!1,this._pauseStart=0,this._valuesStart={},this._valuesEnd={},this._valuesStartRepeat={},this._duration=1e3,this._isDynamic=!1,this._initialRepeat=0,this._repeat=0,this._yoyo=!1,this._isPlaying=!1,this._reversed=!1,this._delayTime=0,this._startTime=0,this._easingFunction=cr.Linear.None,this._interpolationFunction=Oa.Linear,this._chainedTweens=[],this._onStartCallbackFired=!1,this._onEveryStartCallbackFired=!1,this._id=Kc.nextId(),this._isChainStopped=!1,this._propertiesAreSetUp=!1,this._goToEnd=!1,this._object=r,typeof n=="object"?(this._group=n,n.add(this)):n===!0&&(this._group=Ra,Ra.add(this))}return e.prototype.getId=function(){return this._id},e.prototype.isPlaying=function(){return this._isPlaying},e.prototype.isPaused=function(){return this._isPaused},e.prototype.getDuration=function(){return this._duration},e.prototype.to=function(r,n){if(n===void 0&&(n=1e3),this._isPlaying)throw new Error("Can not call Tween.to() while Tween is already started or paused. Stop the Tween first.");return this._valuesEnd=r,this._propertiesAreSetUp=!1,this._duration=n<0?0:n,this},e.prototype.duration=function(r){return r===void 0&&(r=1e3),this._duration=r<0?0:r,this},e.prototype.dynamic=function(r){return r===void 0&&(r=!1),this._isDynamic=r,this},e.prototype.start=function(r,n){if(r===void 0&&(r=cn()),n===void 0&&(n=!1),this._isPlaying)return this;if(this._repeat=this._initialRepeat,this._reversed){this._reversed=!1;for(var s in this._valuesStartRepeat)this._swapEndStartRepeatValues(s),this._valuesStart[s]=this._valuesStartRepeat[s]}if(this._isPlaying=!0,this._isPaused=!1,this._onStartCallbackFired=!1,this._onEveryStartCallbackFired=!1,this._isChainStopped=!1,this._startTime=r,this._startTime+=this._delayTime,!this._propertiesAreSetUp||n){if(this._propertiesAreSetUp=!0,!this._isDynamic){var i={};for(var o in this._valuesEnd)i[o]=this._valuesEnd[o];this._valuesEnd=i}this._setupProperties(this._object,this._valuesStart,this._valuesEnd,this._valuesStartRepeat,n)}return this},e.prototype.startFromCurrentValues=function(r){return this.start(r,!0)},e.prototype._setupProperties=function(r,n,s,i,o){for(var l in s){var c=r[l],u=Array.isArray(c),d=u?"array":typeof c,f=!u&&Array.isArray(s[l]);if(!(d==="undefined"||d==="function")){if(f){var h=s[l];if(h.length===0)continue;for(var x=[c],w=0,v=h.length;w<v;w+=1){var j=this._handleRelativeValue(c,h[w]);if(isNaN(j)){f=!1,console.warn("Found invalid interpolation list. Skipping.");break}x.push(j)}f&&(s[l]=x)}if((d==="object"||u)&&c&&!f){n[l]=u?[]:{};var b=c;for(var p in b)n[l][p]=b[p];i[l]=u?[]:{};var h=s[l];if(!this._isDynamic){var m={};for(var p in h)m[p]=h[p];s[l]=h=m}this._setupProperties(b,n[l],h,i[l],o)}else(typeof n[l]>"u"||o)&&(n[l]=c),u||(n[l]*=1),f?i[l]=s[l].slice().reverse():i[l]=n[l]||0}}},e.prototype.stop=function(){return this._isChainStopped||(this._isChainStopped=!0,this.stopChainedTweens()),this._isPlaying?(this._isPlaying=!1,this._isPaused=!1,this._onStopCallback&&this._onStopCallback(this._object),this):this},e.prototype.end=function(){return this._goToEnd=!0,this.update(this._startTime+this._duration),this},e.prototype.pause=function(r){return r===void 0&&(r=cn()),this._isPaused||!this._isPlaying?this:(this._isPaused=!0,this._pauseStart=r,this)},e.prototype.resume=function(r){return r===void 0&&(r=cn()),!this._isPaused||!this._isPlaying?this:(this._isPaused=!1,this._startTime+=r-this._pauseStart,this._pauseStart=0,this)},e.prototype.stopChainedTweens=function(){for(var r=0,n=this._chainedTweens.length;r<n;r++)this._chainedTweens[r].stop();return this},e.prototype.group=function(r){return r?(r.add(this),this):(console.warn("tween.group() without args has been removed, use group.add(tween) instead."),this)},e.prototype.remove=function(){var r;return(r=this._group)===null||r===void 0||r.remove(this),this},e.prototype.delay=function(r){return r===void 0&&(r=0),this._delayTime=r,this},e.prototype.repeat=function(r){return r===void 0&&(r=0),this._initialRepeat=r,this._repeat=r,this},e.prototype.repeatDelay=function(r){return this._repeatDelayTime=r,this},e.prototype.yoyo=function(r){return r===void 0&&(r=!1),this._yoyo=r,this},e.prototype.easing=function(r){return r===void 0&&(r=cr.Linear.None),this._easingFunction=r,this},e.prototype.interpolation=function(r){return r===void 0&&(r=Oa.Linear),this._interpolationFunction=r,this},e.prototype.chain=function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];return this._chainedTweens=r,this},e.prototype.onStart=function(r){return this._onStartCallback=r,this},e.prototype.onEveryStart=function(r){return this._onEveryStartCallback=r,this},e.prototype.onUpdate=function(r){return this._onUpdateCallback=r,this},e.prototype.onRepeat=function(r){return this._onRepeatCallback=r,this},e.prototype.onComplete=function(r){return this._onCompleteCallback=r,this},e.prototype.onStop=function(r){return this._onStopCallback=r,this},e.prototype.update=function(r,n){var s=this,i;if(r===void 0&&(r=cn()),n===void 0&&(n=e.autoStartOnUpdate),this._isPaused)return!0;var o;if(!this._goToEnd&&!this._isPlaying)if(n)this.start(r,!0);else return!1;if(this._goToEnd=!1,r<this._startTime)return!0;this._onStartCallbackFired===!1&&(this._onStartCallback&&this._onStartCallback(this._object),this._onStartCallbackFired=!0),this._onEveryStartCallbackFired===!1&&(this._onEveryStartCallback&&this._onEveryStartCallback(this._object),this._onEveryStartCallbackFired=!0);var l=r-this._startTime,c=this._duration+((i=this._repeatDelayTime)!==null&&i!==void 0?i:this._delayTime),u=this._duration+this._repeat*c,d=function(){if(s._duration===0||l>u)return 1;var j=Math.trunc(l/c),b=l-j*c,p=Math.min(b/s._duration,1);return p===0&&l===s._duration?1:p},f=d(),h=this._easingFunction(f);if(this._updateProperties(this._object,this._valuesStart,this._valuesEnd,h),this._onUpdateCallback&&this._onUpdateCallback(this._object,f),this._duration===0||l>=this._duration)if(this._repeat>0){var x=Math.min(Math.trunc((l-this._duration)/c)+1,this._repeat);isFinite(this._repeat)&&(this._repeat-=x);for(o in this._valuesStartRepeat)!this._yoyo&&typeof this._valuesEnd[o]=="string"&&(this._valuesStartRepeat[o]=this._valuesStartRepeat[o]+parseFloat(this._valuesEnd[o])),this._yoyo&&this._swapEndStartRepeatValues(o),this._valuesStart[o]=this._valuesStartRepeat[o];return this._yoyo&&(this._reversed=!this._reversed),this._startTime+=c*x,this._onRepeatCallback&&this._onRepeatCallback(this._object),this._onEveryStartCallbackFired=!1,!0}else{this._onCompleteCallback&&this._onCompleteCallback(this._object);for(var w=0,v=this._chainedTweens.length;w<v;w++)this._chainedTweens[w].start(this._startTime+this._duration,!1);return this._isPlaying=!1,!1}return!0},e.prototype._updateProperties=function(r,n,s,i){for(var o in s)if(n[o]!==void 0){var l=n[o]||0,c=s[o],u=Array.isArray(r[o]),d=Array.isArray(c),f=!u&&d;f?r[o]=this._interpolationFunction(c,i):typeof c=="object"&&c?this._updateProperties(r[o],l,c,i):(c=this._handleRelativeValue(l,c),typeof c=="number"&&(r[o]=l+(c-l)*i))}},e.prototype._handleRelativeValue=function(r,n){return typeof n!="string"?n:n.charAt(0)==="+"||n.charAt(0)==="-"?r+parseFloat(n):parseFloat(n)},e.prototype._swapEndStartRepeatValues=function(r){var n=this._valuesStartRepeat[r],s=this._valuesEnd[r];typeof s=="string"?this._valuesStartRepeat[r]=this._valuesStartRepeat[r]+parseFloat(s):this._valuesStartRepeat[r]=this._valuesEnd[r],this._valuesEnd[r]=n},e.autoStartOnUpdate=!1,e})();Kc.nextId;var _t=Ra;_t.getAll.bind(_t);_t.removeAll.bind(_t);_t.add.bind(_t);_t.remove.bind(_t);_t.update.bind(_t);function xo(e,r){(r==null||r>e.length)&&(r=e.length);for(var n=0,s=Array(r);n<r;n++)s[n]=e[n];return s}function Jy(e){if(Array.isArray(e))return e}function Zy(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function Qy(e,r,n){return Object.defineProperty(e,"prototype",{writable:!1}),e}function eb(e,r){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var s,i,o,l,c=[],u=!0,d=!1;try{if(o=(n=n.call(e)).next,r!==0)for(;!(u=(s=o.call(n)).done)&&(c.push(s.value),c.length!==r);u=!0);}catch(f){d=!0,i=f}finally{try{if(!u&&n.return!=null&&(l=n.return(),Object(l)!==l))return}finally{if(d)throw i}}return c}}function tb(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function rb(e,r){return Jy(e)||eb(e,r)||nb(e,r)||tb()}function nb(e,r){if(e){if(typeof e=="string")return xo(e,r);var n={}.toString.call(e).slice(8,-1);return n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set"?Array.from(e):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?xo(e,r):void 0}}var sb=Qy(function e(r,n){var s=n.default,i=s===void 0?null:s,o=n.triggerUpdate,l=o===void 0?!0:o,c=n.onChange,u=c===void 0?function(d,f){}:c;Zy(this,e),this.name=r,this.defaultVal=i,this.triggerUpdate=l,this.onChange=u});function ai(e){var r=e.stateInit,n=r===void 0?function(){return{}}:r,s=e.props,i=s===void 0?{}:s,o=e.methods,l=o===void 0?{}:o,c=e.aliases,u=c===void 0?{}:c,d=e.init,f=d===void 0?function(){}:d,h=e.update,x=h===void 0?function(){}:h,w=Object.keys(i).map(function(v){return new sb(v,i[v])});return function v(){for(var j=arguments.length,b=new Array(j),p=0;p<j;p++)b[p]=arguments[p];var m=!!(this instanceof v&&this.constructor),_=m?b.shift():void 0,g=b[0],y=g===void 0?{}:g,S=Object.assign({},n instanceof Function?n(y):n,{initialised:!1}),N={};function k(O){return C(O,y),E(),k}var C=function(A,M){f.call(k,A,S,M),S.initialised=!0},E=Yc(function(){S.initialised&&(x.call(k,S,N),N={})},1);return w.forEach(function(O){k[O.name]=A(O);function A(M){var T=M.name,H=M.triggerUpdate,z=H===void 0?!1:H,B=M.onChange,Y=B===void 0?function(Z,X){}:B,U=M.defaultVal,G=U===void 0?null:U;return function(Z){var X=S[T];if(!arguments.length)return X;var oe=Z===void 0?G:Z;return S[T]=oe,Y.call(k,oe,S,X),!N.hasOwnProperty(T)&&(N[T]=X),z&&E(),k}}}),Object.keys(l).forEach(function(O){k[O]=function(){for(var A,M=arguments.length,T=new Array(M),H=0;H<M;H++)T[H]=arguments[H];return(A=l[O]).call.apply(A,[k,S].concat(T))}}),Object.entries(u).forEach(function(O){var A=rb(O,2),M=A[0],T=A[1];return k[M]=k[T]}),k.resetProps=function(){return w.forEach(function(O){k[O.name](O.defaultVal)}),k},k.resetProps(),S._rerender=E,m&&_&&k(_),k}}var ve=(function(e){return typeof e=="function"?e:typeof e=="string"?function(r){return r[e]}:function(r){return e}});function ws(e){"@babel/helpers - typeof";return ws=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},ws(e)}var ab=/^\s+/,ib=/\s+$/;function se(e,r){if(e=e||"",r=r||{},e instanceof se)return e;if(!(this instanceof se))return new se(e,r);var n=ob(e);this._originalInput=e,this._r=n.r,this._g=n.g,this._b=n.b,this._a=n.a,this._roundA=Math.round(100*this._a)/100,this._format=r.format||n.format,this._gradientType=r.gradientType,this._r<1&&(this._r=Math.round(this._r)),this._g<1&&(this._g=Math.round(this._g)),this._b<1&&(this._b=Math.round(this._b)),this._ok=n.ok}se.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var r=this.toRgb();return(r.r*299+r.g*587+r.b*114)/1e3},getLuminance:function(){var r=this.toRgb(),n,s,i,o,l,c;return n=r.r/255,s=r.g/255,i=r.b/255,n<=.03928?o=n/12.92:o=Math.pow((n+.055)/1.055,2.4),s<=.03928?l=s/12.92:l=Math.pow((s+.055)/1.055,2.4),i<=.03928?c=i/12.92:c=Math.pow((i+.055)/1.055,2.4),.2126*o+.7152*l+.0722*c},setAlpha:function(r){return this._a=Jc(r),this._roundA=Math.round(100*this._a)/100,this},toHsv:function(){var r=bo(this._r,this._g,this._b);return{h:r.h*360,s:r.s,v:r.v,a:this._a}},toHsvString:function(){var r=bo(this._r,this._g,this._b),n=Math.round(r.h*360),s=Math.round(r.s*100),i=Math.round(r.v*100);return this._a==1?"hsv("+n+", "+s+"%, "+i+"%)":"hsva("+n+", "+s+"%, "+i+"%, "+this._roundA+")"},toHsl:function(){var r=yo(this._r,this._g,this._b);return{h:r.h*360,s:r.s,l:r.l,a:this._a}},toHslString:function(){var r=yo(this._r,this._g,this._b),n=Math.round(r.h*360),s=Math.round(r.s*100),i=Math.round(r.l*100);return this._a==1?"hsl("+n+", "+s+"%, "+i+"%)":"hsla("+n+", "+s+"%, "+i+"%, "+this._roundA+")"},toHex:function(r){return vo(this._r,this._g,this._b,r)},toHexString:function(r){return"#"+this.toHex(r)},toHex8:function(r){return db(this._r,this._g,this._b,this._a,r)},toHex8String:function(r){return"#"+this.toHex8(r)},toRgb:function(){return{r:Math.round(this._r),g:Math.round(this._g),b:Math.round(this._b),a:this._a}},toRgbString:function(){return this._a==1?"rgb("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+")":"rgba("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:Math.round(Pe(this._r,255)*100)+"%",g:Math.round(Pe(this._g,255)*100)+"%",b:Math.round(Pe(this._b,255)*100)+"%",a:this._a}},toPercentageRgbString:function(){return this._a==1?"rgb("+Math.round(Pe(this._r,255)*100)+"%, "+Math.round(Pe(this._g,255)*100)+"%, "+Math.round(Pe(this._b,255)*100)+"%)":"rgba("+Math.round(Pe(this._r,255)*100)+"%, "+Math.round(Pe(this._g,255)*100)+"%, "+Math.round(Pe(this._b,255)*100)+"%, "+this._roundA+")"},toName:function(){return this._a===0?"transparent":this._a<1?!1:jb[vo(this._r,this._g,this._b,!0)]||!1},toFilter:function(r){var n="#"+wo(this._r,this._g,this._b,this._a),s=n,i=this._gradientType?"GradientType = 1, ":"";if(r){var o=se(r);s="#"+wo(o._r,o._g,o._b,o._a)}return"progid:DXImageTransform.Microsoft.gradient("+i+"startColorstr="+n+",endColorstr="+s+")"},toString:function(r){var n=!!r;r=r||this._format;var s=!1,i=this._a<1&&this._a>=0,o=!n&&i&&(r==="hex"||r==="hex6"||r==="hex3"||r==="hex4"||r==="hex8"||r==="name");return o?r==="name"&&this._a===0?this.toName():this.toRgbString():(r==="rgb"&&(s=this.toRgbString()),r==="prgb"&&(s=this.toPercentageRgbString()),(r==="hex"||r==="hex6")&&(s=this.toHexString()),r==="hex3"&&(s=this.toHexString(!0)),r==="hex4"&&(s=this.toHex8String(!0)),r==="hex8"&&(s=this.toHex8String()),r==="name"&&(s=this.toName()),r==="hsl"&&(s=this.toHslString()),r==="hsv"&&(s=this.toHsvString()),s||this.toHexString())},clone:function(){return se(this.toString())},_applyModification:function(r,n){var s=r.apply(null,[this].concat([].slice.call(n)));return this._r=s._r,this._g=s._g,this._b=s._b,this.setAlpha(s._a),this},lighten:function(){return this._applyModification(pb,arguments)},brighten:function(){return this._applyModification(gb,arguments)},darken:function(){return this._applyModification(xb,arguments)},desaturate:function(){return this._applyModification(hb,arguments)},saturate:function(){return this._applyModification(fb,arguments)},greyscale:function(){return this._applyModification(mb,arguments)},spin:function(){return this._applyModification(yb,arguments)},_applyCombination:function(r,n){return r.apply(null,[this].concat([].slice.call(n)))},analogous:function(){return this._applyCombination(wb,arguments)},complement:function(){return this._applyCombination(bb,arguments)},monochromatic:function(){return this._applyCombination(_b,arguments)},splitcomplement:function(){return this._applyCombination(vb,arguments)},triad:function(){return this._applyCombination(_o,[3])},tetrad:function(){return this._applyCombination(_o,[4])}};se.fromRatio=function(e,r){if(ws(e)=="object"){var n={};for(var s in e)e.hasOwnProperty(s)&&(s==="a"?n[s]=e[s]:n[s]=un(e[s]));e=n}return se(e,r)};function ob(e){var r={r:0,g:0,b:0},n=1,s=null,i=null,o=null,l=!1,c=!1;return typeof e=="string"&&(e=Cb(e)),ws(e)=="object"&&(Et(e.r)&&Et(e.g)&&Et(e.b)?(r=lb(e.r,e.g,e.b),l=!0,c=String(e.r).substr(-1)==="%"?"prgb":"rgb"):Et(e.h)&&Et(e.s)&&Et(e.v)?(s=un(e.s),i=un(e.v),r=ub(e.h,s,i),l=!0,c="hsv"):Et(e.h)&&Et(e.s)&&Et(e.l)&&(s=un(e.s),o=un(e.l),r=cb(e.h,s,o),l=!0,c="hsl"),e.hasOwnProperty("a")&&(n=e.a)),n=Jc(n),{ok:l,format:e.format||c,r:Math.min(255,Math.max(r.r,0)),g:Math.min(255,Math.max(r.g,0)),b:Math.min(255,Math.max(r.b,0)),a:n}}function lb(e,r,n){return{r:Pe(e,255)*255,g:Pe(r,255)*255,b:Pe(n,255)*255}}function yo(e,r,n){e=Pe(e,255),r=Pe(r,255),n=Pe(n,255);var s=Math.max(e,r,n),i=Math.min(e,r,n),o,l,c=(s+i)/2;if(s==i)o=l=0;else{var u=s-i;switch(l=c>.5?u/(2-s-i):u/(s+i),s){case e:o=(r-n)/u+(r<n?6:0);break;case r:o=(n-e)/u+2;break;case n:o=(e-r)/u+4;break}o/=6}return{h:o,s:l,l:c}}function cb(e,r,n){var s,i,o;e=Pe(e,360),r=Pe(r,100),n=Pe(n,100);function l(d,f,h){return h<0&&(h+=1),h>1&&(h-=1),h<1/6?d+(f-d)*6*h:h<1/2?f:h<2/3?d+(f-d)*(2/3-h)*6:d}if(r===0)s=i=o=n;else{var c=n<.5?n*(1+r):n+r-n*r,u=2*n-c;s=l(u,c,e+1/3),i=l(u,c,e),o=l(u,c,e-1/3)}return{r:s*255,g:i*255,b:o*255}}function bo(e,r,n){e=Pe(e,255),r=Pe(r,255),n=Pe(n,255);var s=Math.max(e,r,n),i=Math.min(e,r,n),o,l,c=s,u=s-i;if(l=s===0?0:u/s,s==i)o=0;else{switch(s){case e:o=(r-n)/u+(r<n?6:0);break;case r:o=(n-e)/u+2;break;case n:o=(e-r)/u+4;break}o/=6}return{h:o,s:l,v:c}}function ub(e,r,n){e=Pe(e,360)*6,r=Pe(r,100),n=Pe(n,100);var s=Math.floor(e),i=e-s,o=n*(1-r),l=n*(1-i*r),c=n*(1-(1-i)*r),u=s%6,d=[n,l,o,o,c,n][u],f=[c,n,n,l,o,o][u],h=[o,o,c,n,n,l][u];return{r:d*255,g:f*255,b:h*255}}function vo(e,r,n,s){var i=[lt(Math.round(e).toString(16)),lt(Math.round(r).toString(16)),lt(Math.round(n).toString(16))];return s&&i[0].charAt(0)==i[0].charAt(1)&&i[1].charAt(0)==i[1].charAt(1)&&i[2].charAt(0)==i[2].charAt(1)?i[0].charAt(0)+i[1].charAt(0)+i[2].charAt(0):i.join("")}function db(e,r,n,s,i){var o=[lt(Math.round(e).toString(16)),lt(Math.round(r).toString(16)),lt(Math.round(n).toString(16)),lt(Zc(s))];return i&&o[0].charAt(0)==o[0].charAt(1)&&o[1].charAt(0)==o[1].charAt(1)&&o[2].charAt(0)==o[2].charAt(1)&&o[3].charAt(0)==o[3].charAt(1)?o[0].charAt(0)+o[1].charAt(0)+o[2].charAt(0)+o[3].charAt(0):o.join("")}function wo(e,r,n,s){var i=[lt(Zc(s)),lt(Math.round(e).toString(16)),lt(Math.round(r).toString(16)),lt(Math.round(n).toString(16))];return i.join("")}se.equals=function(e,r){return!e||!r?!1:se(e).toRgbString()==se(r).toRgbString()};se.random=function(){return se.fromRatio({r:Math.random(),g:Math.random(),b:Math.random()})};function hb(e,r){r=r===0?0:r||10;var n=se(e).toHsl();return n.s-=r/100,n.s=Ws(n.s),se(n)}function fb(e,r){r=r===0?0:r||10;var n=se(e).toHsl();return n.s+=r/100,n.s=Ws(n.s),se(n)}function mb(e){return se(e).desaturate(100)}function pb(e,r){r=r===0?0:r||10;var n=se(e).toHsl();return n.l+=r/100,n.l=Ws(n.l),se(n)}function gb(e,r){r=r===0?0:r||10;var n=se(e).toRgb();return n.r=Math.max(0,Math.min(255,n.r-Math.round(255*-(r/100)))),n.g=Math.max(0,Math.min(255,n.g-Math.round(255*-(r/100)))),n.b=Math.max(0,Math.min(255,n.b-Math.round(255*-(r/100)))),se(n)}function xb(e,r){r=r===0?0:r||10;var n=se(e).toHsl();return n.l-=r/100,n.l=Ws(n.l),se(n)}function yb(e,r){var n=se(e).toHsl(),s=(n.h+r)%360;return n.h=s<0?360+s:s,se(n)}function bb(e){var r=se(e).toHsl();return r.h=(r.h+180)%360,se(r)}function _o(e,r){if(isNaN(r)||r<=0)throw new Error("Argument to polyad must be a positive number");for(var n=se(e).toHsl(),s=[se(e)],i=360/r,o=1;o<r;o++)s.push(se({h:(n.h+o*i)%360,s:n.s,l:n.l}));return s}function vb(e){var r=se(e).toHsl(),n=r.h;return[se(e),se({h:(n+72)%360,s:r.s,l:r.l}),se({h:(n+216)%360,s:r.s,l:r.l})]}function wb(e,r,n){r=r||6,n=n||30;var s=se(e).toHsl(),i=360/n,o=[se(e)];for(s.h=(s.h-(i*r>>1)+720)%360;--r;)s.h=(s.h+i)%360,o.push(se(s));return o}function _b(e,r){r=r||6;for(var n=se(e).toHsv(),s=n.h,i=n.s,o=n.v,l=[],c=1/r;r--;)l.push(se({h:s,s:i,v:o})),o=(o+c)%1;return l}se.mix=function(e,r,n){n=n===0?0:n||50;var s=se(e).toRgb(),i=se(r).toRgb(),o=n/100,l={r:(i.r-s.r)*o+s.r,g:(i.g-s.g)*o+s.g,b:(i.b-s.b)*o+s.b,a:(i.a-s.a)*o+s.a};return se(l)};se.readability=function(e,r){var n=se(e),s=se(r);return(Math.max(n.getLuminance(),s.getLuminance())+.05)/(Math.min(n.getLuminance(),s.getLuminance())+.05)};se.isReadable=function(e,r,n){var s=se.readability(e,r),i,o;switch(o=!1,i=Pb(n),i.level+i.size){case"AAsmall":case"AAAlarge":o=s>=4.5;break;case"AAlarge":o=s>=3;break;case"AAAsmall":o=s>=7;break}return o};se.mostReadable=function(e,r,n){var s=null,i=0,o,l,c,u;n=n||{},l=n.includeFallbackColors,c=n.level,u=n.size;for(var d=0;d<r.length;d++)o=se.readability(e,r[d]),o>i&&(i=o,s=se(r[d]));return se.isReadable(e,s,{level:c,size:u})||!l?s:(n.includeFallbackColors=!1,se.mostReadable(e,["#fff","#000"],n))};var Ta=se.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},jb=se.hexNames=Nb(Ta);function Nb(e){var r={};for(var n in e)e.hasOwnProperty(n)&&(r[e[n]]=n);return r}function Jc(e){return e=parseFloat(e),(isNaN(e)||e<0||e>1)&&(e=1),e}function Pe(e,r){Sb(e)&&(e="100%");var n=kb(e);return e=Math.min(r,Math.max(0,parseFloat(e))),n&&(e=parseInt(e*r,10)/100),Math.abs(e-r)<1e-6?1:e%r/parseFloat(r)}function Ws(e){return Math.min(1,Math.max(0,e))}function Je(e){return parseInt(e,16)}function Sb(e){return typeof e=="string"&&e.indexOf(".")!=-1&&parseFloat(e)===1}function kb(e){return typeof e=="string"&&e.indexOf("%")!=-1}function lt(e){return e.length==1?"0"+e:""+e}function un(e){return e<=1&&(e=e*100+"%"),e}function Zc(e){return Math.round(parseFloat(e)*255).toString(16)}function jo(e){return Je(e)/255}var it=(function(){var e="[-\\+]?\\d+%?",r="[-\\+]?\\d*\\.\\d+%?",n="(?:"+r+")|(?:"+e+")",s="[\\s|\\(]+("+n+")[,|\\s]+("+n+")[,|\\s]+("+n+")\\s*\\)?",i="[\\s|\\(]+("+n+")[,|\\s]+("+n+")[,|\\s]+("+n+")[,|\\s]+("+n+")\\s*\\)?";return{CSS_UNIT:new RegExp(n),rgb:new RegExp("rgb"+s),rgba:new RegExp("rgba"+i),hsl:new RegExp("hsl"+s),hsla:new RegExp("hsla"+i),hsv:new RegExp("hsv"+s),hsva:new RegExp("hsva"+i),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/}})();function Et(e){return!!it.CSS_UNIT.exec(e)}function Cb(e){e=e.replace(ab,"").replace(ib,"").toLowerCase();var r=!1;if(Ta[e])e=Ta[e],r=!0;else if(e=="transparent")return{r:0,g:0,b:0,a:0,format:"name"};var n;return(n=it.rgb.exec(e))?{r:n[1],g:n[2],b:n[3]}:(n=it.rgba.exec(e))?{r:n[1],g:n[2],b:n[3],a:n[4]}:(n=it.hsl.exec(e))?{h:n[1],s:n[2],l:n[3]}:(n=it.hsla.exec(e))?{h:n[1],s:n[2],l:n[3],a:n[4]}:(n=it.hsv.exec(e))?{h:n[1],s:n[2],v:n[3]}:(n=it.hsva.exec(e))?{h:n[1],s:n[2],v:n[3],a:n[4]}:(n=it.hex8.exec(e))?{r:Je(n[1]),g:Je(n[2]),b:Je(n[3]),a:jo(n[4]),format:r?"name":"hex8"}:(n=it.hex6.exec(e))?{r:Je(n[1]),g:Je(n[2]),b:Je(n[3]),format:r?"name":"hex"}:(n=it.hex4.exec(e))?{r:Je(n[1]+""+n[1]),g:Je(n[2]+""+n[2]),b:Je(n[3]+""+n[3]),a:jo(n[4]+""+n[4]),format:r?"name":"hex8"}:(n=it.hex3.exec(e))?{r:Je(n[1]+""+n[1]),g:Je(n[2]+""+n[2]),b:Je(n[3]+""+n[3]),format:r?"name":"hex"}:!1}function Pb(e){var r,n;return e=e||{level:"AA",size:"small"},r=(e.level||"AA").toUpperCase(),n=(e.size||"small").toLowerCase(),r!=="AA"&&r!=="AAA"&&(r="AA"),n!=="small"&&n!=="large"&&(n="small"),{level:r,size:n}}function Aa(e,r){(r==null||r>e.length)&&(r=e.length);for(var n=0,s=Array(r);n<r;n++)s[n]=e[n];return s}function Eb(e){if(Array.isArray(e))return Aa(e)}function Qc(e,r,n){if(typeof e=="function"?e===r:e.has(r))return arguments.length<3?r:n;throw new TypeError("Private element is not present on this object")}function Ob(e,r){if(r.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Rb(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function rt(e,r){return e.get(Qc(e,r))}function No(e,r,n){Ob(e,r),r.set(e,n)}function So(e,r,n){return e.set(Qc(e,r),n),n}function Tb(e,r){for(var n=0;n<r.length;n++){var s=r[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,Lb(s.key),s)}}function Ab(e,r,n){return r&&Tb(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function Db(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Mb(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function $b(e){return Eb(e)||Db(e)||Fb(e)||Mb()}function zb(e,r){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,r);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function Lb(e){var r=zb(e,"string");return typeof r=="symbol"?r:r+""}function Fb(e,r){if(e){if(typeof e=="string")return Aa(e,r);var n={}.toString.call(e).slice(8,-1);return n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set"?Array.from(e):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Aa(e,r):void 0}}var Ib=123,Hb=function(r){return"#".concat(Math.min(r,Math.pow(2,24)).toString(16).padStart(6,"0"))},eu=function(r,n,s){return(r<<16)+(n<<8)+s},Ub=function(r){var n=se(r).toRgb(),s=n.r,i=n.g,o=n.b;return eu(s,i,o)},ko=function(r,n){return r*Ib%Math.pow(2,n)},Qt=new WeakMap,Ot=new WeakMap,qb=(function(){function e(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:6;Rb(this,e),No(this,Qt,void 0),No(this,Ot,void 0),So(Ot,this,r),this.reset()}return Ab(e,[{key:"reset",value:function(){So(Qt,this,["__reserved for background__"])}},{key:"register",value:function(n){if(rt(Qt,this).length>=Math.pow(2,24-rt(Ot,this)))return null;var s=rt(Qt,this).length,i=ko(s,rt(Ot,this)),o=Hb(s+(i<<24-rt(Ot,this)));return rt(Qt,this).push(n),o}},{key:"lookup",value:function(n){if(!n)return null;var s=typeof n=="string"?Ub(n):eu.apply(void 0,$b(n));if(!s)return null;var i=s&Math.pow(2,24-rt(Ot,this))-1,o=s>>24-rt(Ot,this)&Math.pow(2,rt(Ot,this))-1;return ko(i,rt(Ot,this))!==o||i>=rt(Qt,this).length?null:rt(Qt,this)[i]}}])})(),An,Oe,tu,ru,nr,Co,nu,su,au,ii,Da,Ma,Nn={},iu=[],Wb=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,Bs=Array.isArray;function yt(e,r){for(var n in r)e[n]=r[n];return e}function oi(e){e&&e.parentNode&&e.parentNode.removeChild(e)}function Bb(e,r,n){var s,i,o,l={};for(o in r)o=="key"?s=r[o]:o=="ref"?i=r[o]:l[o]=r[o];if(arguments.length>2&&(l.children=arguments.length>3?An.call(arguments,2):n),typeof e=="function"&&e.defaultProps!=null)for(o in e.defaultProps)l[o]===void 0&&(l[o]=e.defaultProps[o]);return mn(e,l,s,i,null)}function mn(e,r,n,s,i){var o={type:e,props:r,key:n,ref:s,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:i??++tu,__i:-1,__u:0};return i==null&&Oe.vnode!=null&&Oe.vnode(o),o}function Vs(e){return e.children}function cs(e,r){this.props=e,this.context=r}function Er(e,r){if(r==null)return e.__?Er(e.__,e.__i+1):null;for(var n;r<e.__k.length;r++)if((n=e.__k[r])!=null&&n.__e!=null)return n.__e;return typeof e.type=="function"?Er(e):null}function ou(e){var r,n;if((e=e.__)!=null&&e.__c!=null){for(e.__e=e.__c.base=null,r=0;r<e.__k.length;r++)if((n=e.__k[r])!=null&&n.__e!=null){e.__e=e.__c.base=n.__e;break}return ou(e)}}function Po(e){(!e.__d&&(e.__d=!0)&&nr.push(e)&&!_s.__r++||Co!=Oe.debounceRendering)&&((Co=Oe.debounceRendering)||nu)(_s)}function _s(){for(var e,r,n,s,i,o,l,c=1;nr.length;)nr.length>c&&nr.sort(su),e=nr.shift(),c=nr.length,e.__d&&(n=void 0,s=void 0,i=(s=(r=e).__v).__e,o=[],l=[],r.__P&&((n=yt({},s)).__v=s.__v+1,Oe.vnode&&Oe.vnode(n),li(r.__P,n,s,r.__n,r.__P.namespaceURI,32&s.__u?[i]:null,o,i??Er(s),!!(32&s.__u),l),n.__v=s.__v,n.__.__k[n.__i]=n,uu(o,n,l),s.__e=s.__=null,n.__e!=i&&ou(n)));_s.__r=0}function lu(e,r,n,s,i,o,l,c,u,d,f){var h,x,w,v,j,b,p,m=s&&s.__k||iu,_=r.length;for(u=Vb(n,r,m,u,_),h=0;h<_;h++)(w=n.__k[h])!=null&&(x=w.__i==-1?Nn:m[w.__i]||Nn,w.__i=h,b=li(e,w,x,i,o,l,c,u,d,f),v=w.__e,w.ref&&x.ref!=w.ref&&(x.ref&&ci(x.ref,null,w),f.push(w.ref,w.__c||v,w)),j==null&&v!=null&&(j=v),(p=!!(4&w.__u))||x.__k===w.__k?u=cu(w,u,e,p):typeof w.type=="function"&&b!==void 0?u=b:v&&(u=v.nextSibling),w.__u&=-7);return n.__e=j,u}function Vb(e,r,n,s,i){var o,l,c,u,d,f=n.length,h=f,x=0;for(e.__k=new Array(i),o=0;o<i;o++)(l=r[o])!=null&&typeof l!="boolean"&&typeof l!="function"?(typeof l=="string"||typeof l=="number"||typeof l=="bigint"||l.constructor==String?l=e.__k[o]=mn(null,l,null,null,null):Bs(l)?l=e.__k[o]=mn(Vs,{children:l},null,null,null):l.constructor==null&&l.__b>0?l=e.__k[o]=mn(l.type,l.props,l.key,l.ref?l.ref:null,l.__v):e.__k[o]=l,u=o+x,l.__=e,l.__b=e.__b+1,(d=l.__i=Gb(l,n,u,h))!=-1&&(h--,(c=n[d])&&(c.__u|=2)),c==null||c.__v==null?(d==-1&&(i>f?x--:i<f&&x++),typeof l.type!="function"&&(l.__u|=4)):d!=u&&(d==u-1?x--:d==u+1?x++:(d>u?x--:x++,l.__u|=4))):e.__k[o]=null;if(h)for(o=0;o<f;o++)(c=n[o])!=null&&(2&c.__u)==0&&(c.__e==s&&(s=Er(c)),hu(c,c));return s}function cu(e,r,n,s){var i,o;if(typeof e.type=="function"){for(i=e.__k,o=0;i&&o<i.length;o++)i[o]&&(i[o].__=e,r=cu(i[o],r,n,s));return r}e.__e!=r&&(s&&(r&&e.type&&!r.parentNode&&(r=Er(e)),n.insertBefore(e.__e,r||null)),r=e.__e);do r=r&&r.nextSibling;while(r!=null&&r.nodeType==8);return r}function Gb(e,r,n,s){var i,o,l,c=e.key,u=e.type,d=r[n],f=d!=null&&(2&d.__u)==0;if(d===null&&c==null||f&&c==d.key&&u==d.type)return n;if(s>(f?1:0)){for(i=n-1,o=n+1;i>=0||o<r.length;)if((d=r[l=i>=0?i--:o++])!=null&&(2&d.__u)==0&&c==d.key&&u==d.type)return l}return-1}function Eo(e,r,n){r[0]=="-"?e.setProperty(r,n??""):e[r]=n==null?"":typeof n!="number"||Wb.test(r)?n:n+"px"}function Wn(e,r,n,s,i){var o,l;e:if(r=="style")if(typeof n=="string")e.style.cssText=n;else{if(typeof s=="string"&&(e.style.cssText=s=""),s)for(r in s)n&&r in n||Eo(e.style,r,"");if(n)for(r in n)s&&n[r]==s[r]||Eo(e.style,r,n[r])}else if(r[0]=="o"&&r[1]=="n")o=r!=(r=r.replace(au,"$1")),l=r.toLowerCase(),r=l in e||r=="onFocusOut"||r=="onFocusIn"?l.slice(2):r.slice(2),e.l||(e.l={}),e.l[r+o]=n,n?s?n.u=s.u:(n.u=ii,e.addEventListener(r,o?Ma:Da,o)):e.removeEventListener(r,o?Ma:Da,o);else{if(i=="http://www.w3.org/2000/svg")r=r.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(r!="width"&&r!="height"&&r!="href"&&r!="list"&&r!="form"&&r!="tabIndex"&&r!="download"&&r!="rowSpan"&&r!="colSpan"&&r!="role"&&r!="popover"&&r in e)try{e[r]=n??"";break e}catch{}typeof n=="function"||(n==null||n===!1&&r[4]!="-"?e.removeAttribute(r):e.setAttribute(r,r=="popover"&&n==1?"":n))}}function Oo(e){return function(r){if(this.l){var n=this.l[r.type+e];if(r.t==null)r.t=ii++;else if(r.t<n.u)return;return n(Oe.event?Oe.event(r):r)}}}function li(e,r,n,s,i,o,l,c,u,d){var f,h,x,w,v,j,b,p,m,_,g,y,S,N,k,C,E,O=r.type;if(r.constructor!=null)return null;128&n.__u&&(u=!!(32&n.__u),o=[c=r.__e=n.__e]),(f=Oe.__b)&&f(r);e:if(typeof O=="function")try{if(p=r.props,m="prototype"in O&&O.prototype.render,_=(f=O.contextType)&&s[f.__c],g=f?_?_.props.value:f.__:s,n.__c?b=(h=r.__c=n.__c).__=h.__E:(m?r.__c=h=new O(p,g):(r.__c=h=new cs(p,g),h.constructor=O,h.render=Xb),_&&_.sub(h),h.state||(h.state={}),h.__n=s,x=h.__d=!0,h.__h=[],h._sb=[]),m&&h.__s==null&&(h.__s=h.state),m&&O.getDerivedStateFromProps!=null&&(h.__s==h.state&&(h.__s=yt({},h.__s)),yt(h.__s,O.getDerivedStateFromProps(p,h.__s))),w=h.props,v=h.state,h.__v=r,x)m&&O.getDerivedStateFromProps==null&&h.componentWillMount!=null&&h.componentWillMount(),m&&h.componentDidMount!=null&&h.__h.push(h.componentDidMount);else{if(m&&O.getDerivedStateFromProps==null&&p!==w&&h.componentWillReceiveProps!=null&&h.componentWillReceiveProps(p,g),r.__v==n.__v||!h.__e&&h.shouldComponentUpdate!=null&&h.shouldComponentUpdate(p,h.__s,g)===!1){for(r.__v!=n.__v&&(h.props=p,h.state=h.__s,h.__d=!1),r.__e=n.__e,r.__k=n.__k,r.__k.some(function(A){A&&(A.__=r)}),y=0;y<h._sb.length;y++)h.__h.push(h._sb[y]);h._sb=[],h.__h.length&&l.push(h);break e}h.componentWillUpdate!=null&&h.componentWillUpdate(p,h.__s,g),m&&h.componentDidUpdate!=null&&h.__h.push(function(){h.componentDidUpdate(w,v,j)})}if(h.context=g,h.props=p,h.__P=e,h.__e=!1,S=Oe.__r,N=0,m){for(h.state=h.__s,h.__d=!1,S&&S(r),f=h.render(h.props,h.state,h.context),k=0;k<h._sb.length;k++)h.__h.push(h._sb[k]);h._sb=[]}else do h.__d=!1,S&&S(r),f=h.render(h.props,h.state,h.context),h.state=h.__s;while(h.__d&&++N<25);h.state=h.__s,h.getChildContext!=null&&(s=yt(yt({},s),h.getChildContext())),m&&!x&&h.getSnapshotBeforeUpdate!=null&&(j=h.getSnapshotBeforeUpdate(w,v)),C=f,f!=null&&f.type===Vs&&f.key==null&&(C=du(f.props.children)),c=lu(e,Bs(C)?C:[C],r,n,s,i,o,l,c,u,d),h.base=r.__e,r.__u&=-161,h.__h.length&&l.push(h),b&&(h.__E=h.__=null)}catch(A){if(r.__v=null,u||o!=null)if(A.then){for(r.__u|=u?160:128;c&&c.nodeType==8&&c.nextSibling;)c=c.nextSibling;o[o.indexOf(c)]=null,r.__e=c}else{for(E=o.length;E--;)oi(o[E]);$a(r)}else r.__e=n.__e,r.__k=n.__k,A.then||$a(r);Oe.__e(A,r,n)}else o==null&&r.__v==n.__v?(r.__k=n.__k,r.__e=n.__e):c=r.__e=Yb(n.__e,r,n,s,i,o,l,u,d);return(f=Oe.diffed)&&f(r),128&r.__u?void 0:c}function $a(e){e&&e.__c&&(e.__c.__e=!0),e&&e.__k&&e.__k.forEach($a)}function uu(e,r,n){for(var s=0;s<n.length;s++)ci(n[s],n[++s],n[++s]);Oe.__c&&Oe.__c(r,e),e.some(function(i){try{e=i.__h,i.__h=[],e.some(function(o){o.call(i)})}catch(o){Oe.__e(o,i.__v)}})}function du(e){return typeof e!="object"||e==null||e.__b&&e.__b>0?e:Bs(e)?e.map(du):yt({},e)}function Yb(e,r,n,s,i,o,l,c,u){var d,f,h,x,w,v,j,b=n.props||Nn,p=r.props,m=r.type;if(m=="svg"?i="http://www.w3.org/2000/svg":m=="math"?i="http://www.w3.org/1998/Math/MathML":i||(i="http://www.w3.org/1999/xhtml"),o!=null){for(d=0;d<o.length;d++)if((w=o[d])&&"setAttribute"in w==!!m&&(m?w.localName==m:w.nodeType==3)){e=w,o[d]=null;break}}if(e==null){if(m==null)return document.createTextNode(p);e=document.createElementNS(i,m,p.is&&p),c&&(Oe.__m&&Oe.__m(r,o),c=!1),o=null}if(m==null)b===p||c&&e.data==p||(e.data=p);else{if(o=o&&An.call(e.childNodes),!c&&o!=null)for(b={},d=0;d<e.attributes.length;d++)b[(w=e.attributes[d]).name]=w.value;for(d in b)if(w=b[d],d!="children"){if(d=="dangerouslySetInnerHTML")h=w;else if(!(d in p)){if(d=="value"&&"defaultValue"in p||d=="checked"&&"defaultChecked"in p)continue;Wn(e,d,null,w,i)}}for(d in p)w=p[d],d=="children"?x=w:d=="dangerouslySetInnerHTML"?f=w:d=="value"?v=w:d=="checked"?j=w:c&&typeof w!="function"||b[d]===w||Wn(e,d,w,b[d],i);if(f)c||h&&(f.__html==h.__html||f.__html==e.innerHTML)||(e.innerHTML=f.__html),r.__k=[];else if(h&&(e.innerHTML=""),lu(r.type=="template"?e.content:e,Bs(x)?x:[x],r,n,s,m=="foreignObject"?"http://www.w3.org/1999/xhtml":i,o,l,o?o[0]:n.__k&&Er(n,0),c,u),o!=null)for(d=o.length;d--;)oi(o[d]);c||(d="value",m=="progress"&&v==null?e.removeAttribute("value"):v!=null&&(v!==e[d]||m=="progress"&&!v||m=="option"&&v!=b[d])&&Wn(e,d,v,b[d],i),d="checked",j!=null&&j!=e[d]&&Wn(e,d,j,b[d],i))}return e}function ci(e,r,n){try{if(typeof e=="function"){var s=typeof e.__u=="function";s&&e.__u(),s&&r==null||(e.__u=e(r))}else e.current=r}catch(i){Oe.__e(i,n)}}function hu(e,r,n){var s,i;if(Oe.unmount&&Oe.unmount(e),(s=e.ref)&&(s.current&&s.current!=e.__e||ci(s,null,r)),(s=e.__c)!=null){if(s.componentWillUnmount)try{s.componentWillUnmount()}catch(o){Oe.__e(o,r)}s.base=s.__P=null}if(s=e.__k)for(i=0;i<s.length;i++)s[i]&&hu(s[i],r,n||typeof e.type!="function");n||oi(e.__e),e.__c=e.__=e.__e=void 0}function Xb(e,r,n){return this.constructor(e,n)}function Kb(e,r,n){var s,i,o,l;r==document&&(r=document.documentElement),Oe.__&&Oe.__(e,r),i=(s=!1)?null:r.__k,o=[],l=[],li(r,e=r.__k=Bb(Vs,null,[e]),i||Nn,Nn,r.namespaceURI,i?null:r.firstChild?An.call(r.childNodes):null,o,i?i.__e:r.firstChild,s,l),uu(o,e,l)}function fu(e,r,n){var s,i,o,l,c=yt({},e.props);for(o in e.type&&e.type.defaultProps&&(l=e.type.defaultProps),r)o=="key"?s=r[o]:o=="ref"?i=r[o]:c[o]=r[o]===void 0&&l!=null?l[o]:r[o];return arguments.length>2&&(c.children=arguments.length>3?An.call(arguments,2):n),mn(e.type,c,s||e.key,i||e.ref,null)}An=iu.slice,Oe={__e:function(e,r,n,s){for(var i,o,l;r=r.__;)if((i=r.__c)&&!i.__)try{if((o=i.constructor)&&o.getDerivedStateFromError!=null&&(i.setState(o.getDerivedStateFromError(e)),l=i.__d),i.componentDidCatch!=null&&(i.componentDidCatch(e,s||{}),l=i.__d),l)return i.__E=i}catch(c){e=c}throw e}},tu=0,ru=function(e){return e!=null&&e.constructor==null},cs.prototype.setState=function(e,r){var n;n=this.__s!=null&&this.__s!=this.state?this.__s:this.__s=yt({},this.state),typeof e=="function"&&(e=e(yt({},n),this.props)),e&&yt(n,e),e!=null&&this.__v&&(r&&this._sb.push(r),Po(this))},cs.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),Po(this))},cs.prototype.render=Vs,nr=[],nu=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,su=function(e,r){return e.__v.__b-r.__v.__b},_s.__r=0,au=/(PointerCapture)$|Capture$/i,ii=0,Da=Oo(!1),Ma=Oo(!0);function Ro(e,r){(r==null||r>e.length)&&(r=e.length);for(var n=0,s=Array(r);n<r;n++)s[n]=e[n];return s}function Jb(e){if(Array.isArray(e))return e}function Zb(e,r,n){return(r=sv(r))in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}function Qb(e,r){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var s,i,o,l,c=[],u=!0,d=!1;try{if(o=(n=n.call(e)).next,r!==0)for(;!(u=(s=o.call(n)).done)&&(c.push(s.value),c.length!==r);u=!0);}catch(f){d=!0,i=f}finally{try{if(!u&&n.return!=null&&(l=n.return(),Object(l)!==l))return}finally{if(d)throw i}}return c}}function ev(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function To(e,r){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);r&&(s=s.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,s)}return n}function tv(e){for(var r=1;r<arguments.length;r++){var n=arguments[r]!=null?arguments[r]:{};r%2?To(Object(n),!0).forEach(function(s){Zb(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):To(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function rv(e,r){return Jb(e)||Qb(e,r)||av(e,r)||ev()}function nv(e,r){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,r);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(e)}function sv(e){var r=nv(e,"string");return typeof r=="symbol"?r:r+""}function js(e){"@babel/helpers - typeof";return js=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},js(e)}function av(e,r){if(e){if(typeof e=="string")return Ro(e,r);var n={}.toString.call(e).slice(8,-1);return n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set"?Array.from(e):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ro(e,r):void 0}}var za=function(r){if(js(r)!=="object")return r;var n=fu(r);if(n.props){var s;n.props=tv({},n.props),n!=null&&(s=n.props)!==null&&s!==void 0&&s.children&&(n.props.children=Array.isArray(n.props.children)?n.props.children.map(za):za(n.props.children))}return n},iv=function(r){return ru(fu(r))},ov=function(r,n){delete n.__k,Kb(za(r),n)};function lv(e,r){r===void 0&&(r={});var n=r.insertAt;if(!(typeof document>"u")){var s=document.head||document.getElementsByTagName("head")[0],i=document.createElement("style");i.type="text/css",n==="top"&&s.firstChild?s.insertBefore(i,s.firstChild):s.appendChild(i),i.styleSheet?i.styleSheet.cssText=e:i.appendChild(document.createTextNode(e))}}var cv=`.float-tooltip-kap {
  position: absolute;
  width: max-content; /* prevent shrinking near right edge */
  max-width: max(50%, 150px);
  padding: 3px 5px;
  border-radius: 3px;
  font: 12px sans-serif;
  color: #eee;
  background: rgba(0,0,0,0.6);
  pointer-events: none;
}
`;lv(cv);var uv=ai({props:{content:{default:!1},offsetX:{triggerUpdate:!1},offsetY:{triggerUpdate:!1}},init:function(r,n){var s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},i=s.style,o=i===void 0?{}:i,l=!!r&&js(r)==="object"&&!!r.node&&typeof r.node=="function",c=st(l?r.node():r);c.style("position")==="static"&&c.style("position","relative"),n.tooltipEl=c.append("div").attr("class","float-tooltip-kap"),Object.entries(o).forEach(function(d){var f=rv(d,2),h=f[0],x=f[1];return n.tooltipEl.style(h,x)}),n.tooltipEl.style("left","-10000px").style("display","none");var u="tooltip-".concat(Math.round(Math.random()*1e12));n.mouseInside=!1,c.on("mousemove.".concat(u),function(d){n.mouseInside=!0;var f=xt(d),h=c.node(),x=h.offsetWidth,w=h.offsetHeight,v=[n.offsetX===null||n.offsetX===void 0?"-".concat(f[0]/x*100,"%"):typeof n.offsetX=="number"?"calc(-50% + ".concat(n.offsetX,"px)"):n.offsetX,n.offsetY===null||n.offsetY===void 0?w>130&&w-f[1]<100?"calc(-100% - 6px)":"21px":typeof n.offsetY=="number"?n.offsetY<0?"calc(-100% - ".concat(Math.abs(n.offsetY),"px)"):"".concat(n.offsetY,"px"):n.offsetY];n.tooltipEl.style("left",f[0]+"px").style("top",f[1]+"px").style("transform","translate(".concat(v.join(","),")")),n.content&&n.tooltipEl.style("display","inline")}),c.on("mouseover.".concat(u),function(){n.mouseInside=!0,n.content&&n.tooltipEl.style("display","inline")}),c.on("mouseout.".concat(u),function(){n.mouseInside=!1,n.tooltipEl.style("display","none")})},update:function(r){r.tooltipEl.style("display",r.content&&r.mouseInside?"inline":"none"),r.content?r.content instanceof HTMLElement?(r.tooltipEl.text(""),r.tooltipEl.append(function(){return r.content})):typeof r.content=="string"?r.tooltipEl.html(r.content):iv(r.content)?(r.tooltipEl.text(""),ov(r.content,r.tooltipEl.node())):(r.tooltipEl.style("display","none"),console.warn("Tooltip content is invalid, skipping.",r.content,r.content.toString())):r.tooltipEl.text("")}});function dv(e,r,n){var s,i=1;e==null&&(e=0),r==null&&(r=0),n==null&&(n=0);function o(){var l,c=s.length,u,d=0,f=0,h=0;for(l=0;l<c;++l)u=s[l],d+=u.x||0,f+=u.y||0,h+=u.z||0;for(d=(d/c-e)*i,f=(f/c-r)*i,h=(h/c-n)*i,l=0;l<c;++l)u=s[l],d&&(u.x-=d),f&&(u.y-=f),h&&(u.z-=h)}return o.initialize=function(l){s=l},o.x=function(l){return arguments.length?(e=+l,o):e},o.y=function(l){return arguments.length?(r=+l,o):r},o.z=function(l){return arguments.length?(n=+l,o):n},o.strength=function(l){return arguments.length?(i=+l,o):i},o}function hv(e){const r=+this._x.call(null,e);return mu(this.cover(r),r,e)}function mu(e,r,n){if(isNaN(r))return e;var s,i=e._root,o={data:n},l=e._x0,c=e._x1,u,d,f,h,x;if(!i)return e._root=o,e;for(;i.length;)if((f=r>=(u=(l+c)/2))?l=u:c=u,s=i,!(i=i[h=+f]))return s[h]=o,e;if(d=+e._x.call(null,i.data),r===d)return o.next=i,s?s[h]=o:e._root=o,e;do s=s?s[h]=new Array(2):e._root=new Array(2),(f=r>=(u=(l+c)/2))?l=u:c=u;while((h=+f)==(x=+(d>=u)));return s[x]=i,s[h]=o,e}function fv(e){Array.isArray(e)||(e=Array.from(e));const r=e.length,n=new Float64Array(r);let s=1/0,i=-1/0;for(let o=0,l;o<r;++o)isNaN(l=+this._x.call(null,e[o]))||(n[o]=l,l<s&&(s=l),l>i&&(i=l));if(s>i)return this;this.cover(s).cover(i);for(let o=0;o<r;++o)mu(this,n[o],e[o]);return this}function mv(e){if(isNaN(e=+e))return this;var r=this._x0,n=this._x1;if(isNaN(r))n=(r=Math.floor(e))+1;else{for(var s=n-r||1,i=this._root,o,l;r>e||e>=n;)switch(l=+(e<r),o=new Array(2),o[l]=i,i=o,s*=2,l){case 0:n=r+s;break;case 1:r=n-s;break}this._root&&this._root.length&&(this._root=i)}return this._x0=r,this._x1=n,this}function pv(){var e=[];return this.visit(function(r){if(!r.length)do e.push(r.data);while(r=r.next)}),e}function gv(e){return arguments.length?this.cover(+e[0][0]).cover(+e[1][0]):isNaN(this._x0)?void 0:[[this._x0],[this._x1]]}function zt(e,r,n){this.node=e,this.x0=r,this.x1=n}function xv(e,r){var n,s=this._x0,i,o,l=this._x1,c=[],u=this._root,d,f;for(u&&c.push(new zt(u,s,l)),r==null?r=1/0:(s=e-r,l=e+r);d=c.pop();)if(!(!(u=d.node)||(i=d.x0)>l||(o=d.x1)<s))if(u.length){var h=(i+o)/2;c.push(new zt(u[1],h,o),new zt(u[0],i,h)),(f=+(e>=h))&&(d=c[c.length-1],c[c.length-1]=c[c.length-1-f],c[c.length-1-f]=d)}else{var x=Math.abs(e-+this._x.call(null,u.data));x<r&&(r=x,s=e-x,l=e+x,n=u.data)}return n}function yv(e){if(isNaN(u=+this._x.call(null,e)))return this;var r,n=this._root,s,i,o,l=this._x0,c=this._x1,u,d,f,h,x;if(!n)return this;if(n.length)for(;;){if((f=u>=(d=(l+c)/2))?l=d:c=d,r=n,!(n=n[h=+f]))return this;if(!n.length)break;r[h+1&1]&&(s=r,x=h)}for(;n.data!==e;)if(i=n,!(n=n.next))return this;return(o=n.next)&&delete n.next,i?(o?i.next=o:delete i.next,this):r?(o?r[h]=o:delete r[h],(n=r[0]||r[1])&&n===(r[1]||r[0])&&!n.length&&(s?s[x]=n:this._root=n),this):(this._root=o,this)}function bv(e){for(var r=0,n=e.length;r<n;++r)this.remove(e[r]);return this}function vv(){return this._root}function wv(){var e=0;return this.visit(function(r){if(!r.length)do++e;while(r=r.next)}),e}function _v(e){var r=[],n,s=this._root,i,o,l;for(s&&r.push(new zt(s,this._x0,this._x1));n=r.pop();)if(!e(s=n.node,o=n.x0,l=n.x1)&&s.length){var c=(o+l)/2;(i=s[1])&&r.push(new zt(i,c,l)),(i=s[0])&&r.push(new zt(i,o,c))}return this}function jv(e){var r=[],n=[],s;for(this._root&&r.push(new zt(this._root,this._x0,this._x1));s=r.pop();){var i=s.node;if(i.length){var o,l=s.x0,c=s.x1,u=(l+c)/2;(o=i[0])&&r.push(new zt(o,l,u)),(o=i[1])&&r.push(new zt(o,u,c))}n.push(s)}for(;s=n.pop();)e(s.node,s.x0,s.x1);return this}function Nv(e){return e[0]}function Sv(e){return arguments.length?(this._x=e,this):this._x}function pu(e,r){var n=new ui(r??Nv,NaN,NaN);return e==null?n:n.addAll(e)}function ui(e,r,n){this._x=e,this._x0=r,this._x1=n,this._root=void 0}function Ao(e){for(var r={data:e.data},n=r;e=e.next;)n=n.next={data:e.data};return r}var Xe=pu.prototype=ui.prototype;Xe.copy=function(){var e=new ui(this._x,this._x0,this._x1),r=this._root,n,s;if(!r)return e;if(!r.length)return e._root=Ao(r),e;for(n=[{source:r,target:e._root=new Array(2)}];r=n.pop();)for(var i=0;i<2;++i)(s=r.source[i])&&(s.length?n.push({source:s,target:r.target[i]=new Array(2)}):r.target[i]=Ao(s));return e};Xe.add=hv;Xe.addAll=fv;Xe.cover=mv;Xe.data=pv;Xe.extent=gv;Xe.find=xv;Xe.remove=yv;Xe.removeAll=bv;Xe.root=vv;Xe.size=wv;Xe.visit=_v;Xe.visitAfter=jv;Xe.x=Sv;function kv(e){const r=+this._x.call(null,e),n=+this._y.call(null,e);return gu(this.cover(r,n),r,n,e)}function gu(e,r,n,s){if(isNaN(r)||isNaN(n))return e;var i,o=e._root,l={data:s},c=e._x0,u=e._y0,d=e._x1,f=e._y1,h,x,w,v,j,b,p,m;if(!o)return e._root=l,e;for(;o.length;)if((j=r>=(h=(c+d)/2))?c=h:d=h,(b=n>=(x=(u+f)/2))?u=x:f=x,i=o,!(o=o[p=b<<1|j]))return i[p]=l,e;if(w=+e._x.call(null,o.data),v=+e._y.call(null,o.data),r===w&&n===v)return l.next=o,i?i[p]=l:e._root=l,e;do i=i?i[p]=new Array(4):e._root=new Array(4),(j=r>=(h=(c+d)/2))?c=h:d=h,(b=n>=(x=(u+f)/2))?u=x:f=x;while((p=b<<1|j)===(m=(v>=x)<<1|w>=h));return i[m]=o,i[p]=l,e}function Cv(e){var r,n,s=e.length,i,o,l=new Array(s),c=new Array(s),u=1/0,d=1/0,f=-1/0,h=-1/0;for(n=0;n<s;++n)isNaN(i=+this._x.call(null,r=e[n]))||isNaN(o=+this._y.call(null,r))||(l[n]=i,c[n]=o,i<u&&(u=i),i>f&&(f=i),o<d&&(d=o),o>h&&(h=o));if(u>f||d>h)return this;for(this.cover(u,d).cover(f,h),n=0;n<s;++n)gu(this,l[n],c[n],e[n]);return this}function Pv(e,r){if(isNaN(e=+e)||isNaN(r=+r))return this;var n=this._x0,s=this._y0,i=this._x1,o=this._y1;if(isNaN(n))i=(n=Math.floor(e))+1,o=(s=Math.floor(r))+1;else{for(var l=i-n||1,c=this._root,u,d;n>e||e>=i||s>r||r>=o;)switch(d=(r<s)<<1|e<n,u=new Array(4),u[d]=c,c=u,l*=2,d){case 0:i=n+l,o=s+l;break;case 1:n=i-l,o=s+l;break;case 2:i=n+l,s=o-l;break;case 3:n=i-l,s=o-l;break}this._root&&this._root.length&&(this._root=c)}return this._x0=n,this._y0=s,this._x1=i,this._y1=o,this}function Ev(){var e=[];return this.visit(function(r){if(!r.length)do e.push(r.data);while(r=r.next)}),e}function Ov(e){return arguments.length?this.cover(+e[0][0],+e[0][1]).cover(+e[1][0],+e[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function We(e,r,n,s,i){this.node=e,this.x0=r,this.y0=n,this.x1=s,this.y1=i}function Rv(e,r,n){var s,i=this._x0,o=this._y0,l,c,u,d,f=this._x1,h=this._y1,x=[],w=this._root,v,j;for(w&&x.push(new We(w,i,o,f,h)),n==null?n=1/0:(i=e-n,o=r-n,f=e+n,h=r+n,n*=n);v=x.pop();)if(!(!(w=v.node)||(l=v.x0)>f||(c=v.y0)>h||(u=v.x1)<i||(d=v.y1)<o))if(w.length){var b=(l+u)/2,p=(c+d)/2;x.push(new We(w[3],b,p,u,d),new We(w[2],l,p,b,d),new We(w[1],b,c,u,p),new We(w[0],l,c,b,p)),(j=(r>=p)<<1|e>=b)&&(v=x[x.length-1],x[x.length-1]=x[x.length-1-j],x[x.length-1-j]=v)}else{var m=e-+this._x.call(null,w.data),_=r-+this._y.call(null,w.data),g=m*m+_*_;if(g<n){var y=Math.sqrt(n=g);i=e-y,o=r-y,f=e+y,h=r+y,s=w.data}}return s}function Tv(e){if(isNaN(f=+this._x.call(null,e))||isNaN(h=+this._y.call(null,e)))return this;var r,n=this._root,s,i,o,l=this._x0,c=this._y0,u=this._x1,d=this._y1,f,h,x,w,v,j,b,p;if(!n)return this;if(n.length)for(;;){if((v=f>=(x=(l+u)/2))?l=x:u=x,(j=h>=(w=(c+d)/2))?c=w:d=w,r=n,!(n=n[b=j<<1|v]))return this;if(!n.length)break;(r[b+1&3]||r[b+2&3]||r[b+3&3])&&(s=r,p=b)}for(;n.data!==e;)if(i=n,!(n=n.next))return this;return(o=n.next)&&delete n.next,i?(o?i.next=o:delete i.next,this):r?(o?r[b]=o:delete r[b],(n=r[0]||r[1]||r[2]||r[3])&&n===(r[3]||r[2]||r[1]||r[0])&&!n.length&&(s?s[p]=n:this._root=n),this):(this._root=o,this)}function Av(e){for(var r=0,n=e.length;r<n;++r)this.remove(e[r]);return this}function Dv(){return this._root}function Mv(){var e=0;return this.visit(function(r){if(!r.length)do++e;while(r=r.next)}),e}function $v(e){var r=[],n,s=this._root,i,o,l,c,u;for(s&&r.push(new We(s,this._x0,this._y0,this._x1,this._y1));n=r.pop();)if(!e(s=n.node,o=n.x0,l=n.y0,c=n.x1,u=n.y1)&&s.length){var d=(o+c)/2,f=(l+u)/2;(i=s[3])&&r.push(new We(i,d,f,c,u)),(i=s[2])&&r.push(new We(i,o,f,d,u)),(i=s[1])&&r.push(new We(i,d,l,c,f)),(i=s[0])&&r.push(new We(i,o,l,d,f))}return this}function zv(e){var r=[],n=[],s;for(this._root&&r.push(new We(this._root,this._x0,this._y0,this._x1,this._y1));s=r.pop();){var i=s.node;if(i.length){var o,l=s.x0,c=s.y0,u=s.x1,d=s.y1,f=(l+u)/2,h=(c+d)/2;(o=i[0])&&r.push(new We(o,l,c,f,h)),(o=i[1])&&r.push(new We(o,f,c,u,h)),(o=i[2])&&r.push(new We(o,l,h,f,d)),(o=i[3])&&r.push(new We(o,f,h,u,d))}n.push(s)}for(;s=n.pop();)e(s.node,s.x0,s.y0,s.x1,s.y1);return this}function Lv(e){return e[0]}function Fv(e){return arguments.length?(this._x=e,this):this._x}function Iv(e){return e[1]}function Hv(e){return arguments.length?(this._y=e,this):this._y}function xu(e,r,n){var s=new di(r??Lv,n??Iv,NaN,NaN,NaN,NaN);return e==null?s:s.addAll(e)}function di(e,r,n,s,i,o){this._x=e,this._y=r,this._x0=n,this._y0=s,this._x1=i,this._y1=o,this._root=void 0}function Do(e){for(var r={data:e.data},n=r;e=e.next;)n=n.next={data:e.data};return r}var Be=xu.prototype=di.prototype;Be.copy=function(){var e=new di(this._x,this._y,this._x0,this._y0,this._x1,this._y1),r=this._root,n,s;if(!r)return e;if(!r.length)return e._root=Do(r),e;for(n=[{source:r,target:e._root=new Array(4)}];r=n.pop();)for(var i=0;i<4;++i)(s=r.source[i])&&(s.length?n.push({source:s,target:r.target[i]=new Array(4)}):r.target[i]=Do(s));return e};Be.add=kv;Be.addAll=Cv;Be.cover=Pv;Be.data=Ev;Be.extent=Ov;Be.find=Rv;Be.remove=Tv;Be.removeAll=Av;Be.root=Dv;Be.size=Mv;Be.visit=$v;Be.visitAfter=zv;Be.x=Fv;Be.y=Hv;function Uv(e){const r=+this._x.call(null,e),n=+this._y.call(null,e),s=+this._z.call(null,e);return yu(this.cover(r,n,s),r,n,s,e)}function yu(e,r,n,s,i){if(isNaN(r)||isNaN(n)||isNaN(s))return e;var o,l=e._root,c={data:i},u=e._x0,d=e._y0,f=e._z0,h=e._x1,x=e._y1,w=e._z1,v,j,b,p,m,_,g,y,S,N,k;if(!l)return e._root=c,e;for(;l.length;)if((g=r>=(v=(u+h)/2))?u=v:h=v,(y=n>=(j=(d+x)/2))?d=j:x=j,(S=s>=(b=(f+w)/2))?f=b:w=b,o=l,!(l=l[N=S<<2|y<<1|g]))return o[N]=c,e;if(p=+e._x.call(null,l.data),m=+e._y.call(null,l.data),_=+e._z.call(null,l.data),r===p&&n===m&&s===_)return c.next=l,o?o[N]=c:e._root=c,e;do o=o?o[N]=new Array(8):e._root=new Array(8),(g=r>=(v=(u+h)/2))?u=v:h=v,(y=n>=(j=(d+x)/2))?d=j:x=j,(S=s>=(b=(f+w)/2))?f=b:w=b;while((N=S<<2|y<<1|g)===(k=(_>=b)<<2|(m>=j)<<1|p>=v));return o[k]=l,o[N]=c,e}function qv(e){Array.isArray(e)||(e=Array.from(e));const r=e.length,n=new Float64Array(r),s=new Float64Array(r),i=new Float64Array(r);let o=1/0,l=1/0,c=1/0,u=-1/0,d=-1/0,f=-1/0;for(let h=0,x,w,v,j;h<r;++h)isNaN(w=+this._x.call(null,x=e[h]))||isNaN(v=+this._y.call(null,x))||isNaN(j=+this._z.call(null,x))||(n[h]=w,s[h]=v,i[h]=j,w<o&&(o=w),w>u&&(u=w),v<l&&(l=v),v>d&&(d=v),j<c&&(c=j),j>f&&(f=j));if(o>u||l>d||c>f)return this;this.cover(o,l,c).cover(u,d,f);for(let h=0;h<r;++h)yu(this,n[h],s[h],i[h],e[h]);return this}function Wv(e,r,n){if(isNaN(e=+e)||isNaN(r=+r)||isNaN(n=+n))return this;var s=this._x0,i=this._y0,o=this._z0,l=this._x1,c=this._y1,u=this._z1;if(isNaN(s))l=(s=Math.floor(e))+1,c=(i=Math.floor(r))+1,u=(o=Math.floor(n))+1;else{for(var d=l-s||1,f=this._root,h,x;s>e||e>=l||i>r||r>=c||o>n||n>=u;)switch(x=(n<o)<<2|(r<i)<<1|e<s,h=new Array(8),h[x]=f,f=h,d*=2,x){case 0:l=s+d,c=i+d,u=o+d;break;case 1:s=l-d,c=i+d,u=o+d;break;case 2:l=s+d,i=c-d,u=o+d;break;case 3:s=l-d,i=c-d,u=o+d;break;case 4:l=s+d,c=i+d,o=u-d;break;case 5:s=l-d,c=i+d,o=u-d;break;case 6:l=s+d,i=c-d,o=u-d;break;case 7:s=l-d,i=c-d,o=u-d;break}this._root&&this._root.length&&(this._root=f)}return this._x0=s,this._y0=i,this._z0=o,this._x1=l,this._y1=c,this._z1=u,this}function Bv(){var e=[];return this.visit(function(r){if(!r.length)do e.push(r.data);while(r=r.next)}),e}function Vv(e){return arguments.length?this.cover(+e[0][0],+e[0][1],+e[0][2]).cover(+e[1][0],+e[1][1],+e[1][2]):isNaN(this._x0)?void 0:[[this._x0,this._y0,this._z0],[this._x1,this._y1,this._z1]]}function _e(e,r,n,s,i,o,l){this.node=e,this.x0=r,this.y0=n,this.z0=s,this.x1=i,this.y1=o,this.z1=l}function Gv(e,r,n,s){var i,o=this._x0,l=this._y0,c=this._z0,u,d,f,h,x,w,v=this._x1,j=this._y1,b=this._z1,p=[],m=this._root,_,g;for(m&&p.push(new _e(m,o,l,c,v,j,b)),s==null?s=1/0:(o=e-s,l=r-s,c=n-s,v=e+s,j=r+s,b=n+s,s*=s);_=p.pop();)if(!(!(m=_.node)||(u=_.x0)>v||(d=_.y0)>j||(f=_.z0)>b||(h=_.x1)<o||(x=_.y1)<l||(w=_.z1)<c))if(m.length){var y=(u+h)/2,S=(d+x)/2,N=(f+w)/2;p.push(new _e(m[7],y,S,N,h,x,w),new _e(m[6],u,S,N,y,x,w),new _e(m[5],y,d,N,h,S,w),new _e(m[4],u,d,N,y,S,w),new _e(m[3],y,S,f,h,x,N),new _e(m[2],u,S,f,y,x,N),new _e(m[1],y,d,f,h,S,N),new _e(m[0],u,d,f,y,S,N)),(g=(n>=N)<<2|(r>=S)<<1|e>=y)&&(_=p[p.length-1],p[p.length-1]=p[p.length-1-g],p[p.length-1-g]=_)}else{var k=e-+this._x.call(null,m.data),C=r-+this._y.call(null,m.data),E=n-+this._z.call(null,m.data),O=k*k+C*C+E*E;if(O<s){var A=Math.sqrt(s=O);o=e-A,l=r-A,c=n-A,v=e+A,j=r+A,b=n+A,i=m.data}}return i}const Yv=(e,r,n,s,i,o)=>Math.sqrt((e-s)**2+(r-i)**2+(n-o)**2);function Xv(e,r,n,s){const i=[],o=e-s,l=r-s,c=n-s,u=e+s,d=r+s,f=n+s;return this.visit((h,x,w,v,j,b,p)=>{if(!h.length)do{const m=h.data;Yv(e,r,n,this._x(m),this._y(m),this._z(m))<=s&&i.push(m)}while(h=h.next);return x>u||w>d||v>f||j<o||b<l||p<c}),i}function Kv(e){if(isNaN(x=+this._x.call(null,e))||isNaN(w=+this._y.call(null,e))||isNaN(v=+this._z.call(null,e)))return this;var r,n=this._root,s,i,o,l=this._x0,c=this._y0,u=this._z0,d=this._x1,f=this._y1,h=this._z1,x,w,v,j,b,p,m,_,g,y,S;if(!n)return this;if(n.length)for(;;){if((m=x>=(j=(l+d)/2))?l=j:d=j,(_=w>=(b=(c+f)/2))?c=b:f=b,(g=v>=(p=(u+h)/2))?u=p:h=p,r=n,!(n=n[y=g<<2|_<<1|m]))return this;if(!n.length)break;(r[y+1&7]||r[y+2&7]||r[y+3&7]||r[y+4&7]||r[y+5&7]||r[y+6&7]||r[y+7&7])&&(s=r,S=y)}for(;n.data!==e;)if(i=n,!(n=n.next))return this;return(o=n.next)&&delete n.next,i?(o?i.next=o:delete i.next,this):r?(o?r[y]=o:delete r[y],(n=r[0]||r[1]||r[2]||r[3]||r[4]||r[5]||r[6]||r[7])&&n===(r[7]||r[6]||r[5]||r[4]||r[3]||r[2]||r[1]||r[0])&&!n.length&&(s?s[S]=n:this._root=n),this):(this._root=o,this)}function Jv(e){for(var r=0,n=e.length;r<n;++r)this.remove(e[r]);return this}function Zv(){return this._root}function Qv(){var e=0;return this.visit(function(r){if(!r.length)do++e;while(r=r.next)}),e}function ew(e){var r=[],n,s=this._root,i,o,l,c,u,d,f;for(s&&r.push(new _e(s,this._x0,this._y0,this._z0,this._x1,this._y1,this._z1));n=r.pop();)if(!e(s=n.node,o=n.x0,l=n.y0,c=n.z0,u=n.x1,d=n.y1,f=n.z1)&&s.length){var h=(o+u)/2,x=(l+d)/2,w=(c+f)/2;(i=s[7])&&r.push(new _e(i,h,x,w,u,d,f)),(i=s[6])&&r.push(new _e(i,o,x,w,h,d,f)),(i=s[5])&&r.push(new _e(i,h,l,w,u,x,f)),(i=s[4])&&r.push(new _e(i,o,l,w,h,x,f)),(i=s[3])&&r.push(new _e(i,h,x,c,u,d,w)),(i=s[2])&&r.push(new _e(i,o,x,c,h,d,w)),(i=s[1])&&r.push(new _e(i,h,l,c,u,x,w)),(i=s[0])&&r.push(new _e(i,o,l,c,h,x,w))}return this}function tw(e){var r=[],n=[],s;for(this._root&&r.push(new _e(this._root,this._x0,this._y0,this._z0,this._x1,this._y1,this._z1));s=r.pop();){var i=s.node;if(i.length){var o,l=s.x0,c=s.y0,u=s.z0,d=s.x1,f=s.y1,h=s.z1,x=(l+d)/2,w=(c+f)/2,v=(u+h)/2;(o=i[0])&&r.push(new _e(o,l,c,u,x,w,v)),(o=i[1])&&r.push(new _e(o,x,c,u,d,w,v)),(o=i[2])&&r.push(new _e(o,l,w,u,x,f,v)),(o=i[3])&&r.push(new _e(o,x,w,u,d,f,v)),(o=i[4])&&r.push(new _e(o,l,c,v,x,w,h)),(o=i[5])&&r.push(new _e(o,x,c,v,d,w,h)),(o=i[6])&&r.push(new _e(o,l,w,v,x,f,h)),(o=i[7])&&r.push(new _e(o,x,w,v,d,f,h))}n.push(s)}for(;s=n.pop();)e(s.node,s.x0,s.y0,s.z0,s.x1,s.y1,s.z1);return this}function rw(e){return e[0]}function nw(e){return arguments.length?(this._x=e,this):this._x}function sw(e){return e[1]}function aw(e){return arguments.length?(this._y=e,this):this._y}function iw(e){return e[2]}function ow(e){return arguments.length?(this._z=e,this):this._z}function bu(e,r,n,s){var i=new hi(r??rw,n??sw,s??iw,NaN,NaN,NaN,NaN,NaN,NaN);return e==null?i:i.addAll(e)}function hi(e,r,n,s,i,o,l,c,u){this._x=e,this._y=r,this._z=n,this._x0=s,this._y0=i,this._z0=o,this._x1=l,this._y1=c,this._z1=u,this._root=void 0}function Mo(e){for(var r={data:e.data},n=r;e=e.next;)n=n.next={data:e.data};return r}var Le=bu.prototype=hi.prototype;Le.copy=function(){var e=new hi(this._x,this._y,this._z,this._x0,this._y0,this._z0,this._x1,this._y1,this._z1),r=this._root,n,s;if(!r)return e;if(!r.length)return e._root=Mo(r),e;for(n=[{source:r,target:e._root=new Array(8)}];r=n.pop();)for(var i=0;i<8;++i)(s=r.source[i])&&(s.length?n.push({source:s,target:r.target[i]=new Array(8)}):r.target[i]=Mo(s));return e};Le.add=Uv;Le.addAll=qv;Le.cover=Wv;Le.data=Bv;Le.extent=Vv;Le.find=Gv;Le.findAllWithinRadius=Xv;Le.remove=Kv;Le.removeAll=Jv;Le.root=Zv;Le.size=Qv;Le.visit=ew;Le.visitAfter=tw;Le.x=nw;Le.y=aw;Le.z=ow;function $t(e){return function(){return e}}function Dt(e){return(e()-.5)*1e-6}function lw(e){return e.index}function $o(e,r){var n=e.get(r);if(!n)throw new Error("node not found: "+r);return n}function cw(e){var r=lw,n=x,s,i=$t(30),o,l,c,u,d,f,h=1;e==null&&(e=[]);function x(p){return 1/Math.min(u[p.source.index],u[p.target.index])}function w(p){for(var m=0,_=e.length;m<h;++m)for(var g=0,y,S,N,k=0,C=0,E=0,O,A;g<_;++g)y=e[g],S=y.source,N=y.target,k=N.x+N.vx-S.x-S.vx||Dt(f),c>1&&(C=N.y+N.vy-S.y-S.vy||Dt(f)),c>2&&(E=N.z+N.vz-S.z-S.vz||Dt(f)),O=Math.sqrt(k*k+C*C+E*E),O=(O-o[g])/O*p*s[g],k*=O,C*=O,E*=O,N.vx-=k*(A=d[g]),c>1&&(N.vy-=C*A),c>2&&(N.vz-=E*A),S.vx+=k*(A=1-A),c>1&&(S.vy+=C*A),c>2&&(S.vz+=E*A)}function v(){if(l){var p,m=l.length,_=e.length,g=new Map(l.map((S,N)=>[r(S,N,l),S])),y;for(p=0,u=new Array(m);p<_;++p)y=e[p],y.index=p,typeof y.source!="object"&&(y.source=$o(g,y.source)),typeof y.target!="object"&&(y.target=$o(g,y.target)),u[y.source.index]=(u[y.source.index]||0)+1,u[y.target.index]=(u[y.target.index]||0)+1;for(p=0,d=new Array(_);p<_;++p)y=e[p],d[p]=u[y.source.index]/(u[y.source.index]+u[y.target.index]);s=new Array(_),j(),o=new Array(_),b()}}function j(){if(l)for(var p=0,m=e.length;p<m;++p)s[p]=+n(e[p],p,e)}function b(){if(l)for(var p=0,m=e.length;p<m;++p)o[p]=+i(e[p],p,e)}return w.initialize=function(p,...m){l=p,f=m.find(_=>typeof _=="function")||Math.random,c=m.find(_=>[1,2,3].includes(_))||2,v()},w.links=function(p){return arguments.length?(e=p,v(),w):e},w.id=function(p){return arguments.length?(r=p,w):r},w.iterations=function(p){return arguments.length?(h=+p,w):h},w.strength=function(p){return arguments.length?(n=typeof p=="function"?p:$t(+p),j(),w):n},w.distance=function(p){return arguments.length?(i=typeof p=="function"?p:$t(+p),b(),w):i},w}const uw=1664525,dw=1013904223,zo=4294967296;function hw(){let e=1;return()=>(e=(uw*e+dw)%zo)/zo}var Lo=3;function oa(e){return e.x}function Fo(e){return e.y}function fw(e){return e.z}var mw=10,pw=Math.PI*(3-Math.sqrt(5)),gw=Math.PI*20/(9+Math.sqrt(221));function xw(e,r){r=r||2;var n=Math.min(Lo,Math.max(1,Math.round(r))),s,i=1,o=.001,l=1-Math.pow(o,1/300),c=0,u=.6,d=new Map,f=ti(w),h=Tn("tick","end"),x=hw();e==null&&(e=[]);function w(){v(),h.call("tick",s),i<o&&(f.stop(),h.call("end",s))}function v(p){var m,_=e.length,g;p===void 0&&(p=1);for(var y=0;y<p;++y)for(i+=(c-i)*l,d.forEach(function(S){S(i)}),m=0;m<_;++m)g=e[m],g.fx==null?g.x+=g.vx*=u:(g.x=g.fx,g.vx=0),n>1&&(g.fy==null?g.y+=g.vy*=u:(g.y=g.fy,g.vy=0)),n>2&&(g.fz==null?g.z+=g.vz*=u:(g.z=g.fz,g.vz=0));return s}function j(){for(var p=0,m=e.length,_;p<m;++p){if(_=e[p],_.index=p,_.fx!=null&&(_.x=_.fx),_.fy!=null&&(_.y=_.fy),_.fz!=null&&(_.z=_.fz),isNaN(_.x)||n>1&&isNaN(_.y)||n>2&&isNaN(_.z)){var g=mw*(n>2?Math.cbrt(.5+p):n>1?Math.sqrt(.5+p):p),y=p*pw,S=p*gw;n===1?_.x=g:n===2?(_.x=g*Math.cos(y),_.y=g*Math.sin(y)):(_.x=g*Math.sin(y)*Math.cos(S),_.y=g*Math.cos(y),_.z=g*Math.sin(y)*Math.sin(S))}(isNaN(_.vx)||n>1&&isNaN(_.vy)||n>2&&isNaN(_.vz))&&(_.vx=0,n>1&&(_.vy=0),n>2&&(_.vz=0))}}function b(p){return p.initialize&&p.initialize(e,x,n),p}return j(),s={tick:v,restart:function(){return f.restart(w),s},stop:function(){return f.stop(),s},numDimensions:function(p){return arguments.length?(n=Math.min(Lo,Math.max(1,Math.round(p))),d.forEach(b),s):n},nodes:function(p){return arguments.length?(e=p,j(),d.forEach(b),s):e},alpha:function(p){return arguments.length?(i=+p,s):i},alphaMin:function(p){return arguments.length?(o=+p,s):o},alphaDecay:function(p){return arguments.length?(l=+p,s):+l},alphaTarget:function(p){return arguments.length?(c=+p,s):c},velocityDecay:function(p){return arguments.length?(u=1-p,s):1-u},randomSource:function(p){return arguments.length?(x=p,d.forEach(b),s):x},force:function(p,m){return arguments.length>1?(m==null?d.delete(p):d.set(p,b(m)),s):d.get(p)},find:function(){var p=Array.prototype.slice.call(arguments),m=p.shift()||0,_=(n>1?p.shift():null)||0,g=(n>2?p.shift():null)||0,y=p.shift()||1/0,S=0,N=e.length,k,C,E,O,A,M;for(y*=y,S=0;S<N;++S)A=e[S],k=m-A.x,C=_-(A.y||0),E=g-(A.z||0),O=k*k+C*C+E*E,O<y&&(M=A,y=O);return M},on:function(p,m){return arguments.length>1?(h.on(p,m),s):h.on(p)}}}function yw(){var e,r,n,s,i,o=$t(-30),l,c=1,u=1/0,d=.81;function f(v){var j,b=e.length,p=(r===1?pu(e,oa):r===2?xu(e,oa,Fo):r===3?bu(e,oa,Fo,fw):null).visitAfter(x);for(i=v,j=0;j<b;++j)n=e[j],p.visit(w)}function h(){if(e){var v,j=e.length,b;for(l=new Array(j),v=0;v<j;++v)b=e[v],l[b.index]=+o(b,v,e)}}function x(v){var j=0,b,p,m=0,_,g,y,S,N=v.length;if(N){for(_=g=y=S=0;S<N;++S)(b=v[S])&&(p=Math.abs(b.value))&&(j+=b.value,m+=p,_+=p*(b.x||0),g+=p*(b.y||0),y+=p*(b.z||0));j*=Math.sqrt(4/N),v.x=_/m,r>1&&(v.y=g/m),r>2&&(v.z=y/m)}else{b=v,b.x=b.data.x,r>1&&(b.y=b.data.y),r>2&&(b.z=b.data.z);do j+=l[b.data.index];while(b=b.next)}v.value=j}function w(v,j,b,p,m){if(!v.value)return!0;var _=[b,p,m][r-1],g=v.x-n.x,y=r>1?v.y-n.y:0,S=r>2?v.z-n.z:0,N=_-j,k=g*g+y*y+S*S;if(N*N/d<k)return k<u&&(g===0&&(g=Dt(s),k+=g*g),r>1&&y===0&&(y=Dt(s),k+=y*y),r>2&&S===0&&(S=Dt(s),k+=S*S),k<c&&(k=Math.sqrt(c*k)),n.vx+=g*v.value*i/k,r>1&&(n.vy+=y*v.value*i/k),r>2&&(n.vz+=S*v.value*i/k)),!0;if(v.length||k>=u)return;(v.data!==n||v.next)&&(g===0&&(g=Dt(s),k+=g*g),r>1&&y===0&&(y=Dt(s),k+=y*y),r>2&&S===0&&(S=Dt(s),k+=S*S),k<c&&(k=Math.sqrt(c*k)));do v.data!==n&&(N=l[v.data.index]*i/k,n.vx+=g*N,r>1&&(n.vy+=y*N),r>2&&(n.vz+=S*N));while(v=v.next)}return f.initialize=function(v,...j){e=v,s=j.find(b=>typeof b=="function")||Math.random,r=j.find(b=>[1,2,3].includes(b))||2,h()},f.strength=function(v){return arguments.length?(o=typeof v=="function"?v:$t(+v),h(),f):o},f.distanceMin=function(v){return arguments.length?(c=v*v,f):Math.sqrt(c)},f.distanceMax=function(v){return arguments.length?(u=v*v,f):Math.sqrt(u)},f.theta=function(v){return arguments.length?(d=v*v,f):Math.sqrt(d)},f}function bw(e,r,n,s){var i,o,l=$t(.1),c,u;typeof e!="function"&&(e=$t(+e)),r==null&&(r=0),n==null&&(n=0),s==null&&(s=0);function d(h){for(var x=0,w=i.length;x<w;++x){var v=i[x],j=v.x-r||1e-6,b=(v.y||0)-n||1e-6,p=(v.z||0)-s||1e-6,m=Math.sqrt(j*j+b*b+p*p),_=(u[x]-m)*c[x]*h/m;v.vx+=j*_,o>1&&(v.vy+=b*_),o>2&&(v.vz+=p*_)}}function f(){if(i){var h,x=i.length;for(c=new Array(x),u=new Array(x),h=0;h<x;++h)u[h]=+e(i[h],h,i),c[h]=isNaN(u[h])?0:+l(i[h],h,i)}}return d.initialize=function(h,...x){i=h,o=x.find(w=>[1,2,3].includes(w))||2,f()},d.strength=function(h){return arguments.length?(l=typeof h=="function"?h:$t(+h),f(),d):l},d.radius=function(h){return arguments.length?(e=typeof h=="function"?h:$t(+h),f(),d):e},d.x=function(h){return arguments.length?(r=+h,d):r},d.y=function(h){return arguments.length?(n=+h,d):n},d.z=function(h){return arguments.length?(s=+h,d):s},d}const{abs:Vr,cos:Rt,sin:pr,acos:vw,atan2:Gr,sqrt:qt,pow:nt}=Math;function Yr(e){return e<0?-nt(-e,1/3):nt(e,1/3)}const vu=Math.PI,Bn=2*vu,Wt=vu/2,ww=1e-6,la=Number.MAX_SAFE_INTEGER||9007199254740991,ca=Number.MIN_SAFE_INTEGER||-9007199254740991,_w={x:0,y:0,z:0},K={Tvalues:[-.06405689286260563,.06405689286260563,-.1911188674736163,.1911188674736163,-.3150426796961634,.3150426796961634,-.4337935076260451,.4337935076260451,-.5454214713888396,.5454214713888396,-.6480936519369755,.6480936519369755,-.7401241915785544,.7401241915785544,-.820001985973903,.820001985973903,-.8864155270044011,.8864155270044011,-.9382745520027328,.9382745520027328,-.9747285559713095,.9747285559713095,-.9951872199970213,.9951872199970213],Cvalues:[.12793819534675216,.12793819534675216,.1258374563468283,.1258374563468283,.12167047292780339,.12167047292780339,.1155056680537256,.1155056680537256,.10744427011596563,.10744427011596563,.09761865210411388,.09761865210411388,.08619016153195327,.08619016153195327,.0733464814110803,.0733464814110803,.05929858491543678,.05929858491543678,.04427743881741981,.04427743881741981,.028531388628933663,.028531388628933663,.0123412297999872,.0123412297999872],arcfn:function(e,r){const n=r(e);let s=n.x*n.x+n.y*n.y;return typeof n.z<"u"&&(s+=n.z*n.z),qt(s)},compute:function(e,r,n){if(e===0)return r[0].t=0,r[0];const s=r.length-1;if(e===1)return r[s].t=1,r[s];const i=1-e;let o=r;if(s===0)return r[0].t=e,r[0];if(s===1){const c={x:i*o[0].x+e*o[1].x,y:i*o[0].y+e*o[1].y,t:e};return n&&(c.z=i*o[0].z+e*o[1].z),c}if(s<4){let c=i*i,u=e*e,d,f,h,x=0;s===2?(o=[o[0],o[1],o[2],_w],d=c,f=i*e*2,h=u):s===3&&(d=c*i,f=c*e*3,h=i*u*3,x=e*u);const w={x:d*o[0].x+f*o[1].x+h*o[2].x+x*o[3].x,y:d*o[0].y+f*o[1].y+h*o[2].y+x*o[3].y,t:e};return n&&(w.z=d*o[0].z+f*o[1].z+h*o[2].z+x*o[3].z),w}const l=JSON.parse(JSON.stringify(r));for(;l.length>1;){for(let c=0;c<l.length-1;c++)l[c]={x:l[c].x+(l[c+1].x-l[c].x)*e,y:l[c].y+(l[c+1].y-l[c].y)*e},typeof l[c].z<"u"&&(l[c].z=l[c].z+(l[c+1].z-l[c].z)*e);l.splice(l.length-1,1)}return l[0].t=e,l[0]},computeWithRatios:function(e,r,n,s){const i=1-e,o=n,l=r;let c=o[0],u=o[1],d=o[2],f=o[3],h;if(c*=i,u*=e,l.length===2)return h=c+u,{x:(c*l[0].x+u*l[1].x)/h,y:(c*l[0].y+u*l[1].y)/h,z:s?(c*l[0].z+u*l[1].z)/h:!1,t:e};if(c*=i,u*=2*i,d*=e*e,l.length===3)return h=c+u+d,{x:(c*l[0].x+u*l[1].x+d*l[2].x)/h,y:(c*l[0].y+u*l[1].y+d*l[2].y)/h,z:s?(c*l[0].z+u*l[1].z+d*l[2].z)/h:!1,t:e};if(c*=i,u*=1.5*i,d*=3*i,f*=e*e*e,l.length===4)return h=c+u+d+f,{x:(c*l[0].x+u*l[1].x+d*l[2].x+f*l[3].x)/h,y:(c*l[0].y+u*l[1].y+d*l[2].y+f*l[3].y)/h,z:s?(c*l[0].z+u*l[1].z+d*l[2].z+f*l[3].z)/h:!1,t:e}},derive:function(e,r){const n=[];for(let s=e,i=s.length,o=i-1;i>1;i--,o--){const l=[];for(let c=0,u;c<o;c++)u={x:o*(s[c+1].x-s[c].x),y:o*(s[c+1].y-s[c].y)},r&&(u.z=o*(s[c+1].z-s[c].z)),l.push(u);n.push(l),s=l}return n},between:function(e,r,n){return r<=e&&e<=n||K.approximately(e,r)||K.approximately(e,n)},approximately:function(e,r,n){return Vr(e-r)<=(n||ww)},length:function(e){const n=K.Tvalues.length;let s=0;for(let i=0,o;i<n;i++)o=.5*K.Tvalues[i]+.5,s+=K.Cvalues[i]*K.arcfn(o,e);return .5*s},map:function(e,r,n,s,i){const o=n-r,l=i-s,c=e-r,u=c/o;return s+l*u},lerp:function(e,r,n){const s={x:r.x+e*(n.x-r.x),y:r.y+e*(n.y-r.y)};return r.z!==void 0&&n.z!==void 0&&(s.z=r.z+e*(n.z-r.z)),s},pointToString:function(e){let r=e.x+"/"+e.y;return typeof e.z<"u"&&(r+="/"+e.z),r},pointsToString:function(e){return"["+e.map(K.pointToString).join(", ")+"]"},copy:function(e){return JSON.parse(JSON.stringify(e))},angle:function(e,r,n){const s=r.x-e.x,i=r.y-e.y,o=n.x-e.x,l=n.y-e.y,c=s*l-i*o,u=s*o+i*l;return Gr(c,u)},round:function(e,r){const n=""+e,s=n.indexOf(".");return parseFloat(n.substring(0,s+1+r))},dist:function(e,r){const n=e.x-r.x,s=e.y-r.y;return qt(n*n+s*s)},closest:function(e,r){let n=nt(2,63),s,i;return e.forEach(function(o,l){i=K.dist(r,o),i<n&&(n=i,s=l)}),{mdist:n,mpos:s}},abcratio:function(e,r){if(r!==2&&r!==3)return!1;if(typeof e>"u")e=.5;else if(e===0||e===1)return e;const n=nt(e,r)+nt(1-e,r),s=n-1;return Vr(s/n)},projectionratio:function(e,r){if(r!==2&&r!==3)return!1;if(typeof e>"u")e=.5;else if(e===0||e===1)return e;const n=nt(1-e,r),s=nt(e,r)+n;return n/s},lli8:function(e,r,n,s,i,o,l,c){const u=(e*s-r*n)*(i-l)-(e-n)*(i*c-o*l),d=(e*s-r*n)*(o-c)-(r-s)*(i*c-o*l),f=(e-n)*(o-c)-(r-s)*(i-l);return f==0?!1:{x:u/f,y:d/f}},lli4:function(e,r,n,s){const i=e.x,o=e.y,l=r.x,c=r.y,u=n.x,d=n.y,f=s.x,h=s.y;return K.lli8(i,o,l,c,u,d,f,h)},lli:function(e,r){return K.lli4(e,e.c,r,r.c)},makeline:function(e,r){return new Se(e.x,e.y,(e.x+r.x)/2,(e.y+r.y)/2,r.x,r.y)},findbbox:function(e){let r=la,n=la,s=ca,i=ca;return e.forEach(function(o){const l=o.bbox();r>l.x.min&&(r=l.x.min),n>l.y.min&&(n=l.y.min),s<l.x.max&&(s=l.x.max),i<l.y.max&&(i=l.y.max)}),{x:{min:r,mid:(r+s)/2,max:s,size:s-r},y:{min:n,mid:(n+i)/2,max:i,size:i-n}}},shapeintersections:function(e,r,n,s,i){if(!K.bboxoverlap(r,s))return[];const o=[],l=[e.startcap,e.forward,e.back,e.endcap],c=[n.startcap,n.forward,n.back,n.endcap];return l.forEach(function(u){u.virtual||c.forEach(function(d){if(d.virtual)return;const f=u.intersects(d,i);f.length>0&&(f.c1=u,f.c2=d,f.s1=e,f.s2=n,o.push(f))})}),o},makeshape:function(e,r,n){const s=r.points.length,i=e.points.length,o=K.makeline(r.points[s-1],e.points[0]),l=K.makeline(e.points[i-1],r.points[0]),c={startcap:o,forward:e,back:r,endcap:l,bbox:K.findbbox([o,e,r,l])};return c.intersections=function(u){return K.shapeintersections(c,c.bbox,u,u.bbox,n)},c},getminmax:function(e,r,n){if(!n)return{min:0,max:0};let s=la,i=ca,o,l;n.indexOf(0)===-1&&(n=[0].concat(n)),n.indexOf(1)===-1&&n.push(1);for(let c=0,u=n.length;c<u;c++)o=n[c],l=e.get(o),l[r]<s&&(s=l[r]),l[r]>i&&(i=l[r]);return{min:s,mid:(s+i)/2,max:i,size:i-s}},align:function(e,r){const n=r.p1.x,s=r.p1.y,i=-Gr(r.p2.y-s,r.p2.x-n),o=function(l){return{x:(l.x-n)*Rt(i)-(l.y-s)*pr(i),y:(l.x-n)*pr(i)+(l.y-s)*Rt(i)}};return e.map(o)},roots:function(e,r){r=r||{p1:{x:0,y:0},p2:{x:1,y:0}};const n=e.length-1,s=K.align(e,r),i=function(N){return 0<=N&&N<=1};if(n===2){const N=s[0].y,k=s[1].y,C=s[2].y,E=N-2*k+C;if(E!==0){const O=-qt(k*k-N*C),A=-N+k,M=-(O+A)/E,T=-(-O+A)/E;return[M,T].filter(i)}else if(k!==C&&E===0)return[(2*k-C)/(2*k-2*C)].filter(i);return[]}const o=s[0].y,l=s[1].y,c=s[2].y,u=s[3].y;let d=-o+3*l-3*c+u,f=3*o-6*l+3*c,h=-3*o+3*l,x=o;if(K.approximately(d,0)){if(K.approximately(f,0))return K.approximately(h,0)?[]:[-x/h].filter(i);const N=qt(h*h-4*f*x),k=2*f;return[(N-h)/k,(-h-N)/k].filter(i)}f/=d,h/=d,x/=d;const w=(3*h-f*f)/3,v=w/3,j=(2*f*f*f-9*f*h+27*x)/27,b=j/2,p=b*b+v*v*v;let m,_,g,y,S;if(p<0){const N=-w/3,k=N*N*N,C=qt(k),E=-j/(2*C),O=E<-1?-1:E>1?1:E,A=vw(O),M=Yr(C),T=2*M;return g=T*Rt(A/3)-f/3,y=T*Rt((A+Bn)/3)-f/3,S=T*Rt((A+2*Bn)/3)-f/3,[g,y,S].filter(i)}else{if(p===0)return m=b<0?Yr(-b):-Yr(b),g=2*m-f/3,y=-m-f/3,[g,y].filter(i);{const N=qt(p);return m=Yr(-b+N),_=Yr(b+N),[m-_-f/3].filter(i)}}},droots:function(e){if(e.length===3){const r=e[0],n=e[1],s=e[2],i=r-2*n+s;if(i!==0){const o=-qt(n*n-r*s),l=-r+n,c=-(o+l)/i,u=-(-o+l)/i;return[c,u]}else if(n!==s&&i===0)return[(2*n-s)/(2*(n-s))];return[]}if(e.length===2){const r=e[0],n=e[1];return r!==n?[r/(r-n)]:[]}return[]},curvature:function(e,r,n,s,i){let o,l,c,u,d=0,f=0;const h=K.compute(e,r),x=K.compute(e,n),w=h.x*h.x+h.y*h.y;if(s?(o=qt(nt(h.y*x.z-x.y*h.z,2)+nt(h.z*x.x-x.z*h.x,2)+nt(h.x*x.y-x.x*h.y,2)),l=nt(w+h.z*h.z,3/2)):(o=h.x*x.y-h.y*x.x,l=nt(w,3/2)),o===0||l===0)return{k:0,r:0};if(d=o/l,f=l/o,!i){const v=K.curvature(e-.001,r,n,s,!0).k,j=K.curvature(e+.001,r,n,s,!0).k;u=(j-d+(d-v))/2,c=(Vr(j-d)+Vr(d-v))/2}return{k:d,r:f,dk:u,adk:c}},inflections:function(e){if(e.length<4)return[];const r=K.align(e,{p1:e[0],p2:e.slice(-1)[0]}),n=r[2].x*r[1].y,s=r[3].x*r[1].y,i=r[1].x*r[2].y,o=r[3].x*r[2].y,l=18*(-3*n+2*s+3*i-o),c=18*(3*n-s-3*i),u=18*(i-n);if(K.approximately(l,0)){if(!K.approximately(c,0)){let x=-u/c;if(0<=x&&x<=1)return[x]}return[]}const d=2*l;if(K.approximately(d,0))return[];const f=c*c-4*l*u;if(f<0)return[];const h=Math.sqrt(f);return[(h-c)/d,-(c+h)/d].filter(function(x){return 0<=x&&x<=1})},bboxoverlap:function(e,r){const n=["x","y"],s=n.length;for(let i=0,o,l,c,u;i<s;i++)if(o=n[i],l=e[o].mid,c=r[o].mid,u=(e[o].size+r[o].size)/2,Vr(l-c)>=u)return!1;return!0},expandbox:function(e,r){r.x.min<e.x.min&&(e.x.min=r.x.min),r.y.min<e.y.min&&(e.y.min=r.y.min),r.z&&r.z.min<e.z.min&&(e.z.min=r.z.min),r.x.max>e.x.max&&(e.x.max=r.x.max),r.y.max>e.y.max&&(e.y.max=r.y.max),r.z&&r.z.max>e.z.max&&(e.z.max=r.z.max),e.x.mid=(e.x.min+e.x.max)/2,e.y.mid=(e.y.min+e.y.max)/2,e.z&&(e.z.mid=(e.z.min+e.z.max)/2),e.x.size=e.x.max-e.x.min,e.y.size=e.y.max-e.y.min,e.z&&(e.z.size=e.z.max-e.z.min)},pairiteration:function(e,r,n){const s=e.bbox(),i=r.bbox(),o=1e5,l=n||.5;if(s.x.size+s.y.size<l&&i.x.size+i.y.size<l)return[(o*(e._t1+e._t2)/2|0)/o+"/"+(o*(r._t1+r._t2)/2|0)/o];let c=e.split(.5),u=r.split(.5),d=[{left:c.left,right:u.left},{left:c.left,right:u.right},{left:c.right,right:u.right},{left:c.right,right:u.left}];d=d.filter(function(h){return K.bboxoverlap(h.left.bbox(),h.right.bbox())});let f=[];return d.length===0||(d.forEach(function(h){f=f.concat(K.pairiteration(h.left,h.right,l))}),f=f.filter(function(h,x){return f.indexOf(h)===x})),f},getccenter:function(e,r,n){const s=r.x-e.x,i=r.y-e.y,o=n.x-r.x,l=n.y-r.y,c=s*Rt(Wt)-i*pr(Wt),u=s*pr(Wt)+i*Rt(Wt),d=o*Rt(Wt)-l*pr(Wt),f=o*pr(Wt)+l*Rt(Wt),h=(e.x+r.x)/2,x=(e.y+r.y)/2,w=(r.x+n.x)/2,v=(r.y+n.y)/2,j=h+c,b=x+u,p=w+d,m=v+f,_=K.lli8(h,x,j,b,w,v,p,m),g=K.dist(_,e);let y=Gr(e.y-_.y,e.x-_.x),S=Gr(r.y-_.y,r.x-_.x),N=Gr(n.y-_.y,n.x-_.x),k;return y<N?((y>S||S>N)&&(y+=Bn),y>N&&(k=N,N=y,y=k)):N<S&&S<y?(k=N,N=y,y=k):N+=Bn,_.s=y,_.e=N,_.r=g,_},numberSort:function(e,r){return e-r}};class pn{constructor(r){this.curves=[],this._3d=!1,r&&(this.curves=r,this._3d=this.curves[0]._3d)}valueOf(){return this.toString()}toString(){return"["+this.curves.map(function(r){return K.pointsToString(r.points)}).join(", ")+"]"}addCurve(r){this.curves.push(r),this._3d=this._3d||r._3d}length(){return this.curves.map(function(r){return r.length()}).reduce(function(r,n){return r+n})}curve(r){return this.curves[r]}bbox(){const r=this.curves;for(var n=r[0].bbox(),s=1;s<r.length;s++)K.expandbox(n,r[s].bbox());return n}offset(r){const n=[];return this.curves.forEach(function(s){n.push(...s.offset(r))}),new pn(n)}}const{abs:Xr,min:Io,max:Ho,cos:jw,sin:Nw,acos:Sw,sqrt:Kr}=Math,kw=Math.PI;class Se{constructor(r){let n=r&&r.forEach?r:Array.from(arguments).slice(),s=!1;if(typeof n[0]=="object"){s=n.length;const w=[];n.forEach(function(v){["x","y","z"].forEach(function(j){typeof v[j]<"u"&&w.push(v[j])})}),n=w}let i=!1;const o=n.length;if(s){if(s>4){if(arguments.length!==1)throw new Error("Only new Bezier(point[]) is accepted for 4th and higher order curves");i=!0}}else if(o!==6&&o!==8&&o!==9&&o!==12&&arguments.length!==1)throw new Error("Only new Bezier(point[]) is accepted for 4th and higher order curves");const l=this._3d=!i&&(o===9||o===12)||r&&r[0]&&typeof r[0].z<"u",c=this.points=[];for(let w=0,v=l?3:2;w<o;w+=v){var u={x:n[w],y:n[w+1]};l&&(u.z=n[w+2]),c.push(u)}const d=this.order=c.length-1,f=this.dims=["x","y"];l&&f.push("z"),this.dimlen=f.length;const h=K.align(c,{p1:c[0],p2:c[d]}),x=K.dist(c[0],c[d]);this._linear=h.reduce((w,v)=>w+Xr(v.y),0)<x/50,this._lut=[],this._t1=0,this._t2=1,this.update()}static quadraticFromPoints(r,n,s,i){if(typeof i>"u"&&(i=.5),i===0)return new Se(n,n,s);if(i===1)return new Se(r,n,n);const o=Se.getABC(2,r,n,s,i);return new Se(r,o.A,s)}static cubicFromPoints(r,n,s,i,o){typeof i>"u"&&(i=.5);const l=Se.getABC(3,r,n,s,i);typeof o>"u"&&(o=K.dist(n,l.C));const c=o*(1-i)/i,u=K.dist(r,s),d=(s.x-r.x)/u,f=(s.y-r.y)/u,h=o*d,x=o*f,w=c*d,v=c*f,j={x:n.x-h,y:n.y-x},b={x:n.x+w,y:n.y+v},p=l.A,m={x:p.x+(j.x-p.x)/(1-i),y:p.y+(j.y-p.y)/(1-i)},_={x:p.x+(b.x-p.x)/i,y:p.y+(b.y-p.y)/i},g={x:r.x+(m.x-r.x)/i,y:r.y+(m.y-r.y)/i},y={x:s.x+(_.x-s.x)/(1-i),y:s.y+(_.y-s.y)/(1-i)};return new Se(r,g,y,s)}static getUtils(){return K}getUtils(){return Se.getUtils()}static get PolyBezier(){return pn}valueOf(){return this.toString()}toString(){return K.pointsToString(this.points)}toSVG(){if(this._3d)return!1;const r=this.points,n=r[0].x,s=r[0].y,i=["M",n,s,this.order===2?"Q":"C"];for(let o=1,l=r.length;o<l;o++)i.push(r[o].x),i.push(r[o].y);return i.join(" ")}setRatios(r){if(r.length!==this.points.length)throw new Error("incorrect number of ratio values");this.ratios=r,this._lut=[]}verify(){const r=this.coordDigest();r!==this._print&&(this._print=r,this.update())}coordDigest(){return this.points.map(function(r,n){return""+n+r.x+r.y+(r.z?r.z:0)}).join("")}update(){this._lut=[],this.dpoints=K.derive(this.points,this._3d),this.computedirection()}computedirection(){const r=this.points,n=K.angle(r[0],r[this.order],r[1]);this.clockwise=n>0}length(){return K.length(this.derivative.bind(this))}static getABC(r=2,n,s,i,o=.5){const l=K.projectionratio(o,r),c=1-l,u={x:l*n.x+c*i.x,y:l*n.y+c*i.y},d=K.abcratio(o,r);return{A:{x:s.x+(s.x-u.x)/d,y:s.y+(s.y-u.y)/d},B:s,C:u,S:n,E:i}}getABC(r,n){n=n||this.get(r);let s=this.points[0],i=this.points[this.order];return Se.getABC(this.order,s,n,i,r)}getLUT(r){if(this.verify(),r=r||100,this._lut.length===r+1)return this._lut;this._lut=[],r++,this._lut=[];for(let n=0,s,i;n<r;n++)i=n/(r-1),s=this.compute(i),s.t=i,this._lut.push(s);return this._lut}on(r,n){n=n||5;const s=this.getLUT(),i=[];for(let o=0,l,c=0;o<s.length;o++)l=s[o],K.dist(l,r)<n&&(i.push(l),c+=o/s.length);return i.length?t/=i.length:!1}project(r){const n=this.getLUT(),s=n.length-1,i=K.closest(n,r),o=i.mpos,l=(o-1)/s,c=(o+1)/s,u=.1/s;let d=i.mdist,f=l,h=f,x;d+=1;for(let w;f<c+u;f+=u)x=this.compute(f),w=K.dist(r,x),w<d&&(d=w,h=f);return h=h<0?0:h>1?1:h,x=this.compute(h),x.t=h,x.d=d,x}get(r){return this.compute(r)}point(r){return this.points[r]}compute(r){return this.ratios?K.computeWithRatios(r,this.points,this.ratios,this._3d):K.compute(r,this.points,this._3d,this.ratios)}raise(){const r=this.points,n=[r[0]],s=r.length;for(let i=1,o,l;i<s;i++)o=r[i],l=r[i-1],n[i]={x:(s-i)/s*o.x+i/s*l.x,y:(s-i)/s*o.y+i/s*l.y};return n[s]=r[s-1],new Se(n)}derivative(r){return K.compute(r,this.dpoints[0],this._3d)}dderivative(r){return K.compute(r,this.dpoints[1],this._3d)}align(){let r=this.points;return new Se(K.align(r,{p1:r[0],p2:r[r.length-1]}))}curvature(r){return K.curvature(r,this.dpoints[0],this.dpoints[1],this._3d)}inflections(){return K.inflections(this.points)}normal(r){return this._3d?this.__normal3(r):this.__normal2(r)}__normal2(r){const n=this.derivative(r),s=Kr(n.x*n.x+n.y*n.y);return{t:r,x:-n.y/s,y:n.x/s}}__normal3(r){const n=this.derivative(r),s=this.derivative(r+.01),i=Kr(n.x*n.x+n.y*n.y+n.z*n.z),o=Kr(s.x*s.x+s.y*s.y+s.z*s.z);n.x/=i,n.y/=i,n.z/=i,s.x/=o,s.y/=o,s.z/=o;const l={x:s.y*n.z-s.z*n.y,y:s.z*n.x-s.x*n.z,z:s.x*n.y-s.y*n.x},c=Kr(l.x*l.x+l.y*l.y+l.z*l.z);l.x/=c,l.y/=c,l.z/=c;const u=[l.x*l.x,l.x*l.y-l.z,l.x*l.z+l.y,l.x*l.y+l.z,l.y*l.y,l.y*l.z-l.x,l.x*l.z-l.y,l.y*l.z+l.x,l.z*l.z];return{t:r,x:u[0]*n.x+u[1]*n.y+u[2]*n.z,y:u[3]*n.x+u[4]*n.y+u[5]*n.z,z:u[6]*n.x+u[7]*n.y+u[8]*n.z}}hull(r){let n=this.points,s=[],i=[],o=0;for(i[o++]=n[0],i[o++]=n[1],i[o++]=n[2],this.order===3&&(i[o++]=n[3]);n.length>1;){s=[];for(let l=0,c,u=n.length-1;l<u;l++)c=K.lerp(r,n[l],n[l+1]),i[o++]=c,s.push(c);n=s}return i}split(r,n){if(r===0&&n)return this.split(n).left;if(n===1)return this.split(r).right;const s=this.hull(r),i={left:this.order===2?new Se([s[0],s[3],s[5]]):new Se([s[0],s[4],s[7],s[9]]),right:this.order===2?new Se([s[5],s[4],s[2]]):new Se([s[9],s[8],s[6],s[3]]),span:s};return i.left._t1=K.map(0,0,1,this._t1,this._t2),i.left._t2=K.map(r,0,1,this._t1,this._t2),i.right._t1=K.map(r,0,1,this._t1,this._t2),i.right._t2=K.map(1,0,1,this._t1,this._t2),n?(n=K.map(n,r,1,0,1),i.right.split(n).left):i}extrema(){const r={};let n=[];return this.dims.forEach((function(s){let i=function(l){return l[s]},o=this.dpoints[0].map(i);r[s]=K.droots(o),this.order===3&&(o=this.dpoints[1].map(i),r[s]=r[s].concat(K.droots(o))),r[s]=r[s].filter(function(l){return l>=0&&l<=1}),n=n.concat(r[s].sort(K.numberSort))}).bind(this)),r.values=n.sort(K.numberSort).filter(function(s,i){return n.indexOf(s)===i}),r}bbox(){const r=this.extrema(),n={};return this.dims.forEach((function(s){n[s]=K.getminmax(this,s,r[s])}).bind(this)),n}overlaps(r){const n=this.bbox(),s=r.bbox();return K.bboxoverlap(n,s)}offset(r,n){if(typeof n<"u"){const s=this.get(r),i=this.normal(r),o={c:s,n:i,x:s.x+i.x*n,y:s.y+i.y*n};return this._3d&&(o.z=s.z+i.z*n),o}if(this._linear){const s=this.normal(0),i=this.points.map(function(o){const l={x:o.x+r*s.x,y:o.y+r*s.y};return o.z&&s.z&&(l.z=o.z+r*s.z),l});return[new Se(i)]}return this.reduce().map(function(s){return s._linear?s.offset(r)[0]:s.scale(r)})}simple(){if(this.order===3){const i=K.angle(this.points[0],this.points[3],this.points[1]),o=K.angle(this.points[0],this.points[3],this.points[2]);if(i>0&&o<0||i<0&&o>0)return!1}const r=this.normal(0),n=this.normal(1);let s=r.x*n.x+r.y*n.y;return this._3d&&(s+=r.z*n.z),Xr(Sw(s))<kw/3}reduce(){let r,n=0,s=0,i=.01,o,l=[],c=[],u=this.extrema().values;for(u.indexOf(0)===-1&&(u=[0].concat(u)),u.indexOf(1)===-1&&u.push(1),n=u[0],r=1;r<u.length;r++)s=u[r],o=this.split(n,s),o._t1=n,o._t2=s,l.push(o),n=s;return l.forEach(function(d){for(n=0,s=0;s<=1;)for(s=n+i;s<=1+i;s+=i)if(o=d.split(n,s),!o.simple()){if(s-=i,Xr(n-s)<i)return[];o=d.split(n,s),o._t1=K.map(n,0,1,d._t1,d._t2),o._t2=K.map(s,0,1,d._t1,d._t2),c.push(o),n=s;break}n<1&&(o=d.split(n,1),o._t1=K.map(n,0,1,d._t1,d._t2),o._t2=d._t2,c.push(o))}),c}translate(r,n,s){s=typeof s=="number"?s:n;const i=this.order;let o=this.points.map((l,c)=>(1-c/i)*n+c/i*s);return new Se(this.points.map((l,c)=>({x:l.x+r.x*o[c],y:l.y+r.y*o[c]})))}scale(r){const n=this.order;let s=!1;if(typeof r=="function"&&(s=r),s&&n===2)return this.raise().scale(s);const i=this.clockwise,o=this.points;if(this._linear)return this.translate(this.normal(0),s?s(0):r,s?s(1):r);const l=s?s(0):r,c=s?s(1):r,u=[this.offset(0,10),this.offset(1,10)],d=[],f=K.lli4(u[0],u[0].c,u[1],u[1].c);if(!f)throw new Error("cannot scale this curve. Try reducing it first.");return[0,1].forEach(function(h){const x=d[h*n]=K.copy(o[h*n]);x.x+=(h?c:l)*u[h].n.x,x.y+=(h?c:l)*u[h].n.y}),s?([0,1].forEach(function(h){if(!(n===2&&h)){var x=o[h+1],w={x:x.x-f.x,y:x.y-f.y},v=s?s((h+1)/n):r;s&&!i&&(v=-v);var j=Kr(w.x*w.x+w.y*w.y);w.x/=j,w.y/=j,d[h+1]={x:x.x+v*w.x,y:x.y+v*w.y}}}),new Se(d)):([0,1].forEach(h=>{if(n===2&&h)return;const x=d[h*n],w=this.derivative(h),v={x:x.x+w.x,y:x.y+w.y};d[h+1]=K.lli4(x,v,f,o[h+1])}),new Se(d))}outline(r,n,s,i){if(n=n===void 0?r:n,this._linear){const y=this.normal(0),S=this.points[0],N=this.points[this.points.length-1];let k,C,E;s===void 0&&(s=r,i=n),k={x:S.x+y.x*r,y:S.y+y.y*r},E={x:N.x+y.x*s,y:N.y+y.y*s},C={x:(k.x+E.x)/2,y:(k.y+E.y)/2};const O=[k,C,E];k={x:S.x-y.x*n,y:S.y-y.y*n},E={x:N.x-y.x*i,y:N.y-y.y*i},C={x:(k.x+E.x)/2,y:(k.y+E.y)/2};const A=[E,C,k],M=K.makeline(A[2],O[0]),T=K.makeline(O[2],A[0]),H=[M,new Se(O),T,new Se(A)];return new pn(H)}const o=this.reduce(),l=o.length,c=[];let u=[],d,f=0,h=this.length();const x=typeof s<"u"&&typeof i<"u";function w(y,S,N,k,C){return function(E){const O=k/N,A=(k+C)/N,M=S-y;return K.map(E,0,1,y+O*M,y+A*M)}}o.forEach(function(y){const S=y.length();x?(c.push(y.scale(w(r,s,h,f,S))),u.push(y.scale(w(-n,-i,h,f,S)))):(c.push(y.scale(r)),u.push(y.scale(-n))),f+=S}),u=u.map(function(y){return d=y.points,d[3]?y.points=[d[3],d[2],d[1],d[0]]:y.points=[d[2],d[1],d[0]],y}).reverse();const v=c[0].points[0],j=c[l-1].points[c[l-1].points.length-1],b=u[l-1].points[u[l-1].points.length-1],p=u[0].points[0],m=K.makeline(b,v),_=K.makeline(j,p),g=[m].concat(c).concat([_]).concat(u);return new pn(g)}outlineshapes(r,n,s){n=n||r;const i=this.outline(r,n).curves,o=[];for(let l=1,c=i.length;l<c/2;l++){const u=K.makeshape(i[l],i[c-l],s);u.startcap.virtual=l>1,u.endcap.virtual=l<c/2-1,o.push(u)}return o}intersects(r,n){return r?r.p1&&r.p2?this.lineIntersects(r):(r instanceof Se&&(r=r.reduce()),this.curveintersects(this.reduce(),r,n)):this.selfintersects(n)}lineIntersects(r){const n=Io(r.p1.x,r.p2.x),s=Io(r.p1.y,r.p2.y),i=Ho(r.p1.x,r.p2.x),o=Ho(r.p1.y,r.p2.y);return K.roots(this.points,r).filter(l=>{var c=this.get(l);return K.between(c.x,n,i)&&K.between(c.y,s,o)})}selfintersects(r){const n=this.reduce(),s=n.length-2,i=[];for(let o=0,l,c,u;o<s;o++)c=n.slice(o,o+1),u=n.slice(o+2),l=this.curveintersects(c,u,r),i.push(...l);return i}curveintersects(r,n,s){const i=[];r.forEach(function(l){n.forEach(function(c){l.overlaps(c)&&i.push({left:l,right:c})})});let o=[];return i.forEach(function(l){const c=K.pairiteration(l.left,l.right,s);c.length>0&&(o=o.concat(c))}),o}arcs(r){return r=r||.5,this._iterate(r,[])}_error(r,n,s,i){const o=(i-s)/4,l=this.get(s+o),c=this.get(i-o),u=K.dist(r,n),d=K.dist(r,l),f=K.dist(r,c);return Xr(d-u)+Xr(f-u)}_iterate(r,n){let s=0,i=1,o;do{o=0,i=1;let l=this.get(s),c,u,d,f,h=!1,x=!1,w,v=i,j=1;do if(x=h,f=d,v=(s+i)/2,c=this.get(v),u=this.get(i),d=K.getccenter(l,c,u),d.interval={start:s,end:i},h=this._error(d,l,s,i)<=r,w=x&&!h,w||(j=i),h){if(i>=1){if(d.interval.end=j=1,f=d,i>1){let p={x:d.x+d.r*jw(d.e),y:d.y+d.r*Nw(d.e)};d.e+=K.angle({x:d.x,y:d.y},p,this.get(1))}break}i=i+(i-s)/2}else i=v;while(!w&&o++<100);if(o>=100)break;f=f||d,n.push(f),s=j}while(i<1);return n}}function La(e,r){(r==null||r>e.length)&&(r=e.length);for(var n=0,s=Array(r);n<r;n++)s[n]=e[n];return s}function Cw(e){if(Array.isArray(e))return e}function Pw(e){if(Array.isArray(e))return La(e)}function Ew(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Ow(e,r){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var s,i,o,l,c=[],u=!0,d=!1;try{if(o=(n=n.call(e)).next,r!==0)for(;!(u=(s=o.call(n)).done)&&(c.push(s.value),c.length!==r);u=!0);}catch(f){d=!0,i=f}finally{try{if(!u&&n.return!=null&&(l=n.return(),Object(l)!==l))return}finally{if(d)throw i}}return c}}function Rw(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Tw(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Aw(e,r){if(e==null)return{};var n,s,i=Dw(e,r);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(s=0;s<o.length;s++)n=o[s],r.includes(n)||{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function Dw(e,r){if(e==null)return{};var n={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(r.includes(s))continue;n[s]=e[s]}return n}function Mw(e,r){return Cw(e)||Ow(e,r)||wu(e,r)||Rw()}function $w(e){return Pw(e)||Ew(e)||wu(e)||Tw()}function zw(e,r){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,r);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function Lw(e){var r=zw(e,"string");return typeof r=="symbol"?r:r+""}function wu(e,r){if(e){if(typeof e=="string")return La(e,r);var n={}.toString.call(e).slice(8,-1);return n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set"?Array.from(e):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?La(e,r):void 0}}var Fw=(function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1,i=(r instanceof Array?r.length?r:[void 0]:[r]).map(function(c){return{keyAccessor:c,isProp:!(c instanceof Function)}}),o=e.reduce(function(c,u){var d=c,f=u;return i.forEach(function(h,x){var w=h.keyAccessor,v=h.isProp,j;if(v){var b=f,p=b[w],m=Aw(b,[w].map(Lw));j=p,f=m}else j=w(f,x);x+1<i.length?(d.hasOwnProperty(j)||(d[j]={}),d=d[j]):n?(d.hasOwnProperty(j)||(d[j]=[]),d[j].push(f)):d[j]=f}),c},{});n instanceof Function&&(function c(u){var d=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;d===i.length?Object.keys(u).forEach(function(f){return u[f]=n(u[f])}):Object.values(u).forEach(function(f){return c(f,d+1)})})(o);var l=o;return s&&(l=[],(function c(u){var d=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];d.length===i.length?l.push({keys:d,vals:u}):Object.entries(u).forEach(function(f){var h=Mw(f,2),x=h[0],w=h[1];return c(w,[].concat($w(d),[x]))})})(o),r instanceof Array&&r.length===0&&l.length===1&&(l[0].keys=[])),l});function Iw(e){for(var r=e.length/6|0,n=new Array(r),s=0;s<r;)n[s]="#"+e.slice(s*6,++s*6);return n}const Hw=Iw("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928");function Uw(e,r){r===void 0&&(r={});var n=r.insertAt;if(!(typeof document>"u")){var s=document.head||document.getElementsByTagName("head")[0],i=document.createElement("style");i.type="text/css",n==="top"&&s.firstChild?s.insertBefore(i,s.firstChild):s.appendChild(i),i.styleSheet?i.styleSheet.cssText=e:i.appendChild(document.createTextNode(e))}}var qw=`.force-graph-container canvas {
  display: block;
  user-select: none;
  outline: none;
  -webkit-tap-highlight-color: transparent;
}

.force-graph-container .clickable {
  cursor: pointer;
}

.force-graph-container .grabbable {
  cursor: move;
  cursor: grab;
  cursor: -moz-grab;
  cursor: -webkit-grab;
}

.force-graph-container .grabbable:active {
  cursor: grabbing;
  cursor: -moz-grabbing;
  cursor: -webkit-grabbing;
}
`;Uw(qw);function Fa(e,r){(r==null||r>e.length)&&(r=e.length);for(var n=0,s=Array(r);n<r;n++)s[n]=e[n];return s}function Ww(e){if(Array.isArray(e))return e}function Bw(e){if(Array.isArray(e))return Fa(e)}function Uo(e,r,n){if(_u())return Reflect.construct.apply(null,arguments);var s=[null];s.push.apply(s,r);var i=new(e.bind.apply(e,s));return i}function Sn(e,r,n){return(r=Jw(r))in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}function _u(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(_u=function(){return!!e})()}function Vw(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Gw(e,r){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var s,i,o,l,c=[],u=!0,d=!1;try{if(o=(n=n.call(e)).next,r!==0)for(;!(u=(s=o.call(n)).done)&&(c.push(s.value),c.length!==r);u=!0);}catch(f){d=!0,i=f}finally{try{if(!u&&n.return!=null&&(l=n.return(),Object(l)!==l))return}finally{if(d)throw i}}return c}}function Yw(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Xw(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function qo(e,r){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);r&&(s=s.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,s)}return n}function gr(e){for(var r=1;r<arguments.length;r++){var n=arguments[r]!=null?arguments[r]:{};r%2?qo(Object(n),!0).forEach(function(s){Sn(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):qo(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function gn(e,r){return Ww(e)||Gw(e,r)||ju(e,r)||Yw()}function at(e){return Bw(e)||Vw(e)||ju(e)||Xw()}function Kw(e,r){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,r);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(e)}function Jw(e){var r=Kw(e,"string");return typeof r=="symbol"?r:r+""}function Ia(e){"@babel/helpers - typeof";return Ia=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},Ia(e)}function ju(e,r){if(e){if(typeof e=="string")return Fa(e,r);var n={}.toString.call(e).slice(8,-1);return n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set"?Array.from(e):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Fa(e,r):void 0}}var Zw=Bd(Hw);function Wo(e,r,n){!r||typeof n!="string"||e.filter(function(s){return!s[n]}).forEach(function(s){s[n]=Zw(r(s))})}function Qw(e,r){var n=e.nodes,s=e.links,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},o=i.nodeFilter,l=o===void 0?function(){return!0}:o,c=i.onLoopError,u=c===void 0?function(w){throw"Invalid DAG structure! Found cycle in node path: ".concat(w.join(" -> "),".")}:c,d={};n.forEach(function(w){return d[r(w)]={data:w,out:[],depth:-1,skip:!l(w)}}),s.forEach(function(w){var v=w.source,j=w.target,b=g(v),p=g(j);if(!d.hasOwnProperty(b))throw"Missing source node with id: ".concat(b);if(!d.hasOwnProperty(p))throw"Missing target node with id: ".concat(p);var m=d[b],_=d[p];m.out.push(_);function g(y){return Ia(y)==="object"?r(y):y}});var f=[];x(Object.values(d));var h=Object.assign.apply(Object,[{}].concat(at(Object.entries(d).filter(function(w){var v=gn(w,2),j=v[1];return!j.skip}).map(function(w){var v=gn(w,2),j=v[0],b=v[1];return Sn({},j,b.depth)}))));return h;function x(w){for(var v=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],j=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,b=function(){var g=w[p];if(v.indexOf(g)!==-1){var y=[].concat(at(v.slice(v.indexOf(g))),[g]).map(function(S){return r(S.data)});return f.some(function(S){return S.length===y.length&&S.every(function(N,k){return N===y[k]})})||(f.push(y),u(y)),1}j>g.depth&&(g.depth=j,x(g.out,[].concat(at(v),[g]),j+(g.skip?0:1)))},p=0,m=w.length;p<m;p++)b()}}var e_=2,Fe=function(r,n){return n.onNeedsRedraw&&n.onNeedsRedraw()},Bo=function(r,n){if(!n.isShadow){var s=ve(n.linkDirectionalParticles);n.graphData.links.forEach(function(i){var o=Math.round(Math.abs(s(i)));o?i.__photons=at(Array(o)).map(function(){return{}}):delete i.__photons})}},Ns=ai({props:{graphData:{default:{nodes:[],links:[]},onChange:function(r,n){n.engineRunning=!1,Bo(r,n)}},dagMode:{onChange:function(r,n){!r&&(n.graphData.nodes||[]).forEach(function(s){return s.fx=s.fy=void 0})}},dagLevelDistance:{},dagNodeFilter:{default:function(r){return!0}},onDagError:{triggerUpdate:!1},nodeRelSize:{default:4,triggerUpdate:!1,onChange:Fe},nodeId:{default:"id"},nodeVal:{default:"val",triggerUpdate:!1,onChange:Fe},nodeColor:{default:"color",triggerUpdate:!1,onChange:Fe},nodeAutoColorBy:{},nodeCanvasObject:{triggerUpdate:!1,onChange:Fe},nodeCanvasObjectMode:{default:function(){return"replace"},triggerUpdate:!1,onChange:Fe},nodeVisibility:{default:!0,triggerUpdate:!1,onChange:Fe},linkSource:{default:"source"},linkTarget:{default:"target"},linkVisibility:{default:!0,triggerUpdate:!1,onChange:Fe},linkColor:{default:"color",triggerUpdate:!1,onChange:Fe},linkAutoColorBy:{},linkLineDash:{triggerUpdate:!1,onChange:Fe},linkWidth:{default:1,triggerUpdate:!1,onChange:Fe},linkCurvature:{default:0,triggerUpdate:!1,onChange:Fe},linkCanvasObject:{triggerUpdate:!1,onChange:Fe},linkCanvasObjectMode:{default:function(){return"replace"},triggerUpdate:!1,onChange:Fe},linkDirectionalArrowLength:{default:0,triggerUpdate:!1,onChange:Fe},linkDirectionalArrowColor:{triggerUpdate:!1,onChange:Fe},linkDirectionalArrowRelPos:{default:.5,triggerUpdate:!1,onChange:Fe},linkDirectionalParticles:{default:0,triggerUpdate:!1,onChange:Bo},linkDirectionalParticleSpeed:{default:.01,triggerUpdate:!1},linkDirectionalParticleOffset:{default:0,triggerUpdate:!1},linkDirectionalParticleWidth:{default:4,triggerUpdate:!1},linkDirectionalParticleColor:{triggerUpdate:!1},linkDirectionalParticleCanvasObject:{triggerUpdate:!1},globalScale:{default:1,triggerUpdate:!1},d3AlphaMin:{default:0,triggerUpdate:!1},d3AlphaDecay:{default:.0228,triggerUpdate:!1,onChange:function(r,n){n.forceLayout.alphaDecay(r)}},d3AlphaTarget:{default:0,triggerUpdate:!1,onChange:function(r,n){n.forceLayout.alphaTarget(r)}},d3VelocityDecay:{default:.4,triggerUpdate:!1,onChange:function(r,n){n.forceLayout.velocityDecay(r)}},warmupTicks:{default:0,triggerUpdate:!1},cooldownTicks:{default:1/0,triggerUpdate:!1},cooldownTime:{default:15e3,triggerUpdate:!1},onUpdate:{default:function(){},triggerUpdate:!1},onFinishUpdate:{default:function(){},triggerUpdate:!1},onEngineTick:{default:function(){},triggerUpdate:!1},onEngineStop:{default:function(){},triggerUpdate:!1},onNeedsRedraw:{triggerUpdate:!1},isShadow:{default:!1,triggerUpdate:!1}},methods:{d3Force:function(r,n,s){return s===void 0?r.forceLayout.force(n):(r.forceLayout.force(n,s),this)},d3ReheatSimulation:function(r){return r.forceLayout.alpha(1),this.resetCountdown(),this},resetCountdown:function(r){return r.cntTicks=0,r.startTickTime=new Date,r.engineRunning=!0,this},isEngineRunning:function(r){return!!r.engineRunning},tickFrame:function(r){return!r.isShadow&&n(),i(),!r.isShadow&&o(),!r.isShadow&&l(),s(),this;function n(){r.engineRunning&&(++r.cntTicks>r.cooldownTicks||new Date-r.startTickTime>r.cooldownTime||r.d3AlphaMin>0&&r.forceLayout.alpha()<r.d3AlphaMin?(r.engineRunning=!1,r.onEngineStop()):(r.forceLayout.tick(),r.onEngineTick()))}function s(){var c=ve(r.nodeVisibility),u=ve(r.nodeVal),d=ve(r.nodeColor),f=ve(r.nodeCanvasObjectMode),h=r.ctx,x=r.isShadow/r.globalScale,w=r.graphData.nodes.filter(c);h.save(),w.forEach(function(v){var j=f(v);if(r.nodeCanvasObject&&(j==="before"||j==="replace")&&(r.nodeCanvasObject(v,h,r.globalScale),j==="replace")){h.restore();return}var b=Math.sqrt(Math.max(0,u(v)||1))*r.nodeRelSize+x;h.beginPath(),h.arc(v.x,v.y,b,0,2*Math.PI,!1),h.fillStyle=d(v)||"rgba(31, 120, 180, 0.92)",h.fill(),r.nodeCanvasObject&&j==="after"&&r.nodeCanvasObject(v,r.ctx,r.globalScale)}),h.restore()}function i(){var c=ve(r.linkVisibility),u=ve(r.linkColor),d=ve(r.linkWidth),f=ve(r.linkLineDash),h=ve(r.linkCurvature),x=ve(r.linkCanvasObjectMode),w=r.ctx,v=r.isShadow*2,j=r.graphData.links.filter(c);j.forEach(S);var b=[],p=[],m=j;if(r.linkCanvasObject){var _=[],g=[];j.forEach(function(N){return({before:b,after:p,replace:_}[x(N)]||g).push(N)}),m=[].concat(at(b),p,g),b=b.concat(_)}w.save(),b.forEach(function(N){return r.linkCanvasObject(N,w,r.globalScale)}),w.restore();var y=Fw(m,[u,d,f]);w.save(),Object.entries(y).forEach(function(N){var k=gn(N,2),C=k[0],E=k[1],O=!C||C==="undefined"?"rgba(0,0,0,0.15)":C;Object.entries(E).forEach(function(A){var M=gn(A,2),T=M[0],H=M[1],z=(T||1)/r.globalScale+v;Object.entries(H).forEach(function(B){var Y=gn(B,2);Y[0];var U=Y[1],G=f(U[0]);w.beginPath(),U.forEach(function(Z){var X=Z.source,oe=Z.target;if(!(!X||!oe||!X.hasOwnProperty("x")||!oe.hasOwnProperty("x"))){w.moveTo(X.x,X.y);var le=Z.__controlPoints;le?w[le.length===2?"quadraticCurveTo":"bezierCurveTo"].apply(w,at(le).concat([oe.x,oe.y])):w.lineTo(oe.x,oe.y)}}),w.strokeStyle=O,w.lineWidth=z,w.setLineDash(G||[]),w.stroke()})})}),w.restore(),w.save(),p.forEach(function(N){return r.linkCanvasObject(N,w,r.globalScale)}),w.restore();function S(N){var k=h(N);if(!k){N.__controlPoints=null;return}var C=N.source,E=N.target;if(!(!C||!E||!C.hasOwnProperty("x")||!E.hasOwnProperty("x"))){var O=Math.sqrt(Math.pow(E.x-C.x,2)+Math.pow(E.y-C.y,2));if(O>0){var A=Math.atan2(E.y-C.y,E.x-C.x),M=O*k,T={x:(C.x+E.x)/2+M*Math.cos(A-Math.PI/2),y:(C.y+E.y)/2+M*Math.sin(A-Math.PI/2)};N.__controlPoints=[T.x,T.y]}else{var H=k*70;N.__controlPoints=[E.x,E.y-H,E.x+H,E.y]}}}}function o(){var c=1.6,u=.2,d=ve(r.linkDirectionalArrowLength),f=ve(r.linkDirectionalArrowRelPos),h=ve(r.linkVisibility),x=ve(r.linkDirectionalArrowColor||r.linkColor),w=ve(r.nodeVal),v=r.ctx;v.save(),r.graphData.links.filter(h).forEach(function(j){var b=d(j);if(!(!b||b<0)){var p=j.source,m=j.target;if(!(!p||!m||!p.hasOwnProperty("x")||!m.hasOwnProperty("x"))){var _=Math.sqrt(Math.max(0,w(p)||1))*r.nodeRelSize,g=Math.sqrt(Math.max(0,w(m)||1))*r.nodeRelSize,y=Math.min(1,Math.max(0,f(j))),S=x(j)||"rgba(0,0,0,0.28)",N=b/c/2,k=j.__controlPoints&&Uo(Se,[p.x,p.y].concat(at(j.__controlPoints),[m.x,m.y])),C=k?function(z){return k.get(z)}:function(z){return{x:p.x+(m.x-p.x)*z||0,y:p.y+(m.y-p.y)*z||0}},E=k?k.length():Math.sqrt(Math.pow(m.x-p.x,2)+Math.pow(m.y-p.y,2)),O=_+b+(E-_-g-b)*y,A=C(O/E),M=C((O-b)/E),T=C((O-b*(1-u))/E),H=Math.atan2(A.y-M.y,A.x-M.x)-Math.PI/2;v.beginPath(),v.moveTo(A.x,A.y),v.lineTo(M.x+N*Math.cos(H),M.y+N*Math.sin(H)),v.lineTo(T.x,T.y),v.lineTo(M.x-N*Math.cos(H),M.y-N*Math.sin(H)),v.fillStyle=S,v.fill()}}}),v.restore()}function l(){var c=ve(r.linkDirectionalParticles),u=ve(r.linkDirectionalParticleSpeed),d=ve(r.linkDirectionalParticleOffset),f=ve(r.linkDirectionalParticleWidth),h=ve(r.linkVisibility),x=ve(r.linkDirectionalParticleColor||r.linkColor),w=r.ctx;w.save(),r.graphData.links.filter(h).forEach(function(v){var j=c(v);if(!(!v.hasOwnProperty("__photons")||!v.__photons.length)){var b=v.source,p=v.target;if(!(!b||!p||!b.hasOwnProperty("x")||!p.hasOwnProperty("x"))){var m=u(v),_=Math.abs(d(v)),g=v.__photons||[],y=Math.max(0,f(v)/2)/Math.sqrt(r.globalScale),S=x(v)||"rgba(0,0,0,0.28)";w.fillStyle=S;var N=v.__controlPoints?Uo(Se,[b.x,b.y].concat(at(v.__controlPoints),[p.x,p.y])):null,k=0,C=!1;g.forEach(function(E){var O=!!E.__singleHop;if(E.hasOwnProperty("__progressRatio")||(E.__progressRatio=O?0:(k+_)/j),!O&&k++,E.__progressRatio+=m,E.__progressRatio>=1)if(!O)E.__progressRatio=E.__progressRatio%1;else{C=!0;return}var A=E.__progressRatio,M=N?N.get(A):{x:b.x+(p.x-b.x)*A||0,y:b.y+(p.y-b.y)*A||0};r.linkDirectionalParticleCanvasObject?r.linkDirectionalParticleCanvasObject(M.x,M.y,v,w,r.globalScale):(w.beginPath(),w.arc(M.x,M.y,y,0,2*Math.PI,!1),w.fill())}),C&&(v.__photons=v.__photons.filter(function(E){return!E.__singleHop||E.__progressRatio<=1}))}}}),w.restore()}},emitParticle:function(r,n){return n&&(!n.__photons&&(n.__photons=[]),n.__photons.push({__singleHop:!0})),this}},stateInit:function(){return{forceLayout:xw().force("link",cw()).force("charge",yw()).force("center",dv()).force("dagRadial",null).stop(),engineRunning:!1}},init:function(r,n){n.ctx=r},update:function(r,n){r.engineRunning=!1,r.onUpdate(),r.nodeAutoColorBy!==null&&Wo(r.graphData.nodes,ve(r.nodeAutoColorBy),r.nodeColor),r.linkAutoColorBy!==null&&Wo(r.graphData.links,ve(r.linkAutoColorBy),r.linkColor),r.graphData.links.forEach(function(x){x.source=x[r.linkSource],x.target=x[r.linkTarget]}),r.forceLayout.stop().alpha(1).nodes(r.graphData.nodes);var s=r.forceLayout.force("link");s&&s.id(function(x){return x[r.nodeId]}).links(r.graphData.links);var i=r.dagMode&&Qw(r.graphData,function(x){return x[r.nodeId]},{nodeFilter:r.dagNodeFilter,onLoopError:r.onDagError||void 0}),o=Math.max.apply(Math,at(Object.values(i||[]))),l=r.dagLevelDistance||r.graphData.nodes.length/(o||1)*e_*(["radialin","radialout"].indexOf(r.dagMode)!==-1?.7:1);if(["lr","rl","td","bu"].includes(n.dagMode)){var c=["lr","rl"].includes(n.dagMode)?"fx":"fy";r.graphData.nodes.filter(r.dagNodeFilter).forEach(function(x){return delete x[c]})}if(["lr","rl","td","bu"].includes(r.dagMode)){var u=["rl","bu"].includes(r.dagMode),d=function(w){return(i[w[r.nodeId]]-o/2)*l*(u?-1:1)},f=["lr","rl"].includes(r.dagMode)?"fx":"fy";r.graphData.nodes.filter(r.dagNodeFilter).forEach(function(x){return x[f]=d(x)})}r.forceLayout.force("dagRadial",["radialin","radialout"].indexOf(r.dagMode)!==-1?bw(function(x){var w=i[x[r.nodeId]]||-1;return(r.dagMode==="radialin"?o-w:w)*l}).strength(function(x){return r.dagNodeFilter(x)?1:0}):null);for(var h=0;h<r.warmupTicks&&!(r.d3AlphaMin>0&&r.forceLayout.alpha()<r.d3AlphaMin);h++)r.forceLayout.tick();this.resetCountdown(),r.onFinishUpdate()}});function Nu(e,r){var n=e instanceof Array?e:[e],s=new r;return s._destructor&&s._destructor(),{linkProp:function(o){return{default:s[o](),onChange:function(c,u){n.forEach(function(d){return u[d][o](c)})},triggerUpdate:!1}},linkMethod:function(o){return function(l){for(var c=arguments.length,u=new Array(c>1?c-1:0),d=1;d<c;d++)u[d-1]=arguments[d];var f=[];return n.forEach(function(h){var x=l[h],w=x[o].apply(x,u);w!==x&&f.push(w)}),f.length?f[0]:this}}}}var t_=800,r_=4,n_=5,Su=Nu("forceGraph",Ns),s_=Nu(["forceGraph","shadowGraph"],Ns),a_=Object.assign.apply(Object,at(["nodeColor","nodeAutoColorBy","nodeCanvasObject","nodeCanvasObjectMode","linkColor","linkAutoColorBy","linkLineDash","linkWidth","linkCanvasObject","linkCanvasObjectMode","linkDirectionalArrowLength","linkDirectionalArrowColor","linkDirectionalArrowRelPos","linkDirectionalParticles","linkDirectionalParticleSpeed","linkDirectionalParticleOffset","linkDirectionalParticleWidth","linkDirectionalParticleColor","linkDirectionalParticleCanvasObject","dagMode","dagLevelDistance","dagNodeFilter","onDagError","d3AlphaMin","d3AlphaDecay","d3VelocityDecay","warmupTicks","cooldownTicks","cooldownTime","onEngineTick","onEngineStop"].map(function(e){return Sn({},e,Su.linkProp(e))})).concat(at(["nodeRelSize","nodeId","nodeVal","nodeVisibility","linkSource","linkTarget","linkVisibility","linkCurvature"].map(function(e){return Sn({},e,s_.linkProp(e))})))),i_=Object.assign.apply(Object,at(["d3Force","d3ReheatSimulation","emitParticle"].map(function(e){return Sn({},e,Su.linkMethod(e))})));function ua(e){if(e.canvas){var r=e.canvas.width,n=e.canvas.height;r===300&&n===150&&(r=n=0);var s=window.devicePixelRatio;r/=s,n/=s,[e.canvas,e.shadowCanvas].forEach(function(o){o.style.width="".concat(e.width,"px"),o.style.height="".concat(e.height,"px"),o.width=e.width*s,o.height=e.height*s,!r&&!n&&o.getContext("2d").scale(s,s)});var i=gt(e.canvas).k;e.zoom.translateBy(e.zoom.__baseElem,(e.width-r)/2/i,(e.height-n)/2/i),e.needsRedraw=!0}}function ku(e){var r=window.devicePixelRatio;e.setTransform(r,0,0,r,0,0)}function Vo(e,r,n){e.save(),ku(e),e.clearRect(0,0,r,n),e.restore()}var o_=ai({props:gr({width:{default:window.innerWidth,onChange:function(r,n){return ua(n)},triggerUpdate:!1},height:{default:window.innerHeight,onChange:function(r,n){return ua(n)},triggerUpdate:!1},graphData:{default:{nodes:[],links:[]},onChange:function(r,n){[r.nodes,r.links].every(function(i){return(i||[]).every(function(o){return!o.hasOwnProperty("__indexColor")})})&&n.colorTracker.reset(),[{type:"Node",objs:r.nodes},{type:"Link",objs:r.links}].forEach(s),n.forceGraph.graphData(r),n.shadowGraph.graphData(r);function s(i){var o=i.type,l=i.objs;l.filter(function(c){if(!c.hasOwnProperty("__indexColor"))return!0;var u=n.colorTracker.lookup(c.__indexColor);return!u||!u.hasOwnProperty("d")||u.d!==c}).forEach(function(c){c.__indexColor=n.colorTracker.register({type:o,d:c})})}},triggerUpdate:!1},backgroundColor:{onChange:function(r,n){n.canvas&&r&&(n.canvas.style.background=r)},triggerUpdate:!1},nodeLabel:{default:"name",triggerUpdate:!1},nodePointerAreaPaint:{onChange:function(r,n){n.shadowGraph.nodeCanvasObject(r?function(s,i,o){return r(s,s.__indexColor,i,o)}:null),n.flushShadowCanvas&&n.flushShadowCanvas()},triggerUpdate:!1},linkPointerAreaPaint:{onChange:function(r,n){n.shadowGraph.linkCanvasObject(r?function(s,i,o){return r(s,s.__indexColor,i,o)}:null),n.flushShadowCanvas&&n.flushShadowCanvas()},triggerUpdate:!1},linkLabel:{default:"name",triggerUpdate:!1},linkHoverPrecision:{default:4,triggerUpdate:!1},minZoom:{default:.01,onChange:function(r,n){n.zoom.scaleExtent([r,n.zoom.scaleExtent()[1]])},triggerUpdate:!1},maxZoom:{default:1e3,onChange:function(r,n){n.zoom.scaleExtent([n.zoom.scaleExtent()[0],r])},triggerUpdate:!1},enableNodeDrag:{default:!0,triggerUpdate:!1},enableZoomInteraction:{default:!0,triggerUpdate:!1},enablePanInteraction:{default:!0,triggerUpdate:!1},enableZoomPanInteraction:{default:!0,triggerUpdate:!1},enablePointerInteraction:{default:!0,onChange:function(r,n){n.hoverObj=null},triggerUpdate:!1},autoPauseRedraw:{default:!0,triggerUpdate:!1},onNodeDrag:{default:function(){},triggerUpdate:!1},onNodeDragEnd:{default:function(){},triggerUpdate:!1},onNodeClick:{triggerUpdate:!1},onNodeRightClick:{triggerUpdate:!1},onNodeHover:{triggerUpdate:!1},onLinkClick:{triggerUpdate:!1},onLinkRightClick:{triggerUpdate:!1},onLinkHover:{triggerUpdate:!1},onBackgroundClick:{triggerUpdate:!1},onBackgroundRightClick:{triggerUpdate:!1},showPointerCursor:{default:!0,triggerUpdate:!1},onZoom:{triggerUpdate:!1},onZoomEnd:{triggerUpdate:!1},onRenderFramePre:{triggerUpdate:!1},onRenderFramePost:{triggerUpdate:!1}},a_),aliases:{stopAnimation:"pauseAnimation"},methods:gr({graph2ScreenCoords:function(r,n,s){var i=gt(r.canvas);return{x:n*i.k+i.x,y:s*i.k+i.y}},screen2GraphCoords:function(r,n,s){var i=gt(r.canvas);return{x:(n-i.x)/i.k,y:(s-i.y)/i.k}},centerAt:function(r,n,s,i){if(!r.canvas)return null;if(n!==void 0||s!==void 0){var o=Object.assign({},n!==void 0?{x:n}:{},s!==void 0?{y:s}:{});return i?r.tweenGroup.add(new go(l()).to(o,i).easing(cr.Quadratic.Out).onUpdate(c).start()):c(o),this}return l();function l(){var u=gt(r.canvas);return{x:(r.width/2-u.x)/u.k,y:(r.height/2-u.y)/u.k}}function c(u){var d=u.x,f=u.y;r.zoom.translateTo(r.zoom.__baseElem,d===void 0?l().x:d,f===void 0?l().y:f),r.needsRedraw=!0}},zoom:function(r,n,s){if(!r.canvas)return null;if(n!==void 0)return s?r.tweenGroup.add(new go({k:i()}).to({k:n},s).easing(cr.Quadratic.Out).onUpdate(function(l){var c=l.k;return o(c)}).start()):o(n),this;return i();function i(){return gt(r.canvas).k}function o(l){r.zoom.scaleTo(r.zoom.__baseElem,l),r.needsRedraw=!0}},zoomToFit:function(r){for(var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:10,i=arguments.length,o=new Array(i>3?i-3:0),l=3;l<i;l++)o[l-3]=arguments[l];var c=this.getGraphBbox.apply(this,o);if(c){var u={x:(c.x[0]+c.x[1])/2,y:(c.y[0]+c.y[1])/2},d=Math.max(1e-12,Math.min(1e12,(r.width-s*2)/(c.x[1]-c.x[0]),(r.height-s*2)/(c.y[1]-c.y[0])));this.centerAt(u.x,u.y,n),this.zoom(d,n)}return this},getGraphBbox:function(r){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:function(){return!0},s=ve(r.nodeVal),i=function(c){return Math.sqrt(Math.max(0,s(c)||1))*r.nodeRelSize},o=r.graphData.nodes.filter(n).map(function(l){return{x:l.x,y:l.y,r:i(l)}});return o.length?{x:[Ci(o,function(l){return l.x-l.r}),Pi(o,function(l){return l.x+l.r})],y:[Ci(o,function(l){return l.y-l.r}),Pi(o,function(l){return l.y+l.r})]}:null},pauseAnimation:function(r){return r.animationFrameRequestId&&(cancelAnimationFrame(r.animationFrameRequestId),r.animationFrameRequestId=null),this},resumeAnimation:function(r){return r.animationFrameRequestId||this._animationCycle(),this},_destructor:function(){this.pauseAnimation(),this.graphData({nodes:[],links:[]})}},i_),stateInit:function(){return{lastSetZoom:1,zoom:jy(),forceGraph:new Ns,shadowGraph:new Ns().cooldownTicks(0).nodeColor("__indexColor").linkColor("__indexColor").isShadow(!0),colorTracker:new qb,tweenGroup:new Xc}},init:function(r,n){var s=this;r.innerHTML="";var i=document.createElement("div");i.classList.add("force-graph-container"),i.style.position="relative",r.appendChild(i),n.canvas=document.createElement("canvas"),n.backgroundColor&&(n.canvas.style.background=n.backgroundColor),i.appendChild(n.canvas),n.shadowCanvas=document.createElement("canvas");var o=n.canvas.getContext("2d"),l=n.shadowCanvas.getContext("2d",{willReadFrequently:!0}),c={x:-1e12,y:-1e12},u=function(){var h=null,x=window.devicePixelRatio,w=c.x>0&&c.y>0?l.getImageData(c.x*x,c.y*x,1,1):null;return w&&(h=n.colorTracker.lookup(w.data)),h};st(n.canvas).call(a0().subject(function(){if(!n.enableNodeDrag)return null;var f=u();return f&&f.type==="Node"?f.d:null}).on("start",function(f){var h=f.subject;h.__initialDragPos={x:h.x,y:h.y,fx:h.fx,fy:h.fy},f.active||(h.fx=h.x,h.fy=h.y),n.canvas.classList.add("grabbable")}).on("drag",function(f){var h=f.subject,x=h.__initialDragPos,w=f,v=gt(n.canvas).k,j={x:x.x+(w.x-x.x)/v-h.x,y:x.y+(w.y-x.y)/v-h.y};["x","y"].forEach(function(b){return h["f".concat(b)]=h[b]=x[b]+(w[b]-x[b])/v}),!(!h.__dragged&&n_>=Math.sqrt(Vd(["x","y"].map(function(b){return Math.pow(f[b]-x[b],2)}))))&&(n.forceGraph.d3AlphaTarget(.3).resetCountdown(),n.isPointerDragging=!0,h.__dragged=!0,n.onNodeDrag(h,j))}).on("end",function(f){var h=f.subject,x=h.__initialDragPos,w={x:h.x-x.x,y:h.y-x.y};x.fx===void 0&&(h.fx=void 0),x.fy===void 0&&(h.fy=void 0),delete h.__initialDragPos,n.forceGraph.d3AlphaTarget()&&n.forceGraph.d3AlphaTarget(0).resetCountdown(),n.canvas.classList.remove("grabbable"),n.isPointerDragging=!1,h.__dragged&&(delete h.__dragged,n.onNodeDragEnd(h,w))})),n.zoom(n.zoom.__baseElem=st(n.canvas)),n.zoom.__baseElem.on("dblclick.zoom",null),n.zoom.filter(function(f){return!f.button&&n.enableZoomPanInteraction&&(f.type!=="wheel"||ve(n.enableZoomInteraction)(f))&&(f.type==="wheel"||ve(n.enablePanInteraction)(f))}).on("zoom",function(f){var h=f.transform;[o,l].forEach(function(x){ku(x),x.translate(h.x,h.y),x.scale(h.k,h.k)}),n.isPointerDragging=!0,n.onZoom&&n.onZoom(gr(gr({},h),s.centerAt())),n.needsRedraw=!0}).on("end",function(f){n.isPointerDragging=!1,n.onZoomEnd&&n.onZoomEnd(gr(gr({},f.transform),s.centerAt()))}),ua(n),n.forceGraph.onNeedsRedraw(function(){return n.needsRedraw=!0}).onFinishUpdate(function(){gt(n.canvas).k===n.lastSetZoom&&n.graphData.nodes.length&&(n.zoom.scaleTo(n.zoom.__baseElem,n.lastSetZoom=r_/Math.cbrt(n.graphData.nodes.length)),n.needsRedraw=!0)}),n.tooltip=new uv(i),["pointermove","pointerdown"].forEach(function(f){return i.addEventListener(f,function(h){f==="pointerdown"&&(n.isPointerPressed=!0,n.pointerDownEvent=h),!n.isPointerDragging&&h.type==="pointermove"&&n.onBackgroundClick&&(h.pressure>0||n.isPointerPressed)&&(h.pointerType==="mouse"||h.movementX===void 0||[h.movementX,h.movementY].some(function(v){return Math.abs(v)>1}))&&(n.isPointerDragging=!0);var x=w(i);c.x=h.pageX-x.left,c.y=h.pageY-x.top;function w(v){var j=v.getBoundingClientRect(),b=window.pageXOffset||document.documentElement.scrollLeft,p=window.pageYOffset||document.documentElement.scrollTop;return{top:j.top+p,left:j.left+b}}},{passive:!0})}),i.addEventListener("pointerup",function(f){if(n.isPointerPressed){if(n.isPointerPressed=!1,n.isPointerDragging){n.isPointerDragging=!1;return}var h=[f,n.pointerDownEvent];requestAnimationFrame(function(){if(f.button===0)if(n.hoverObj){var x=n["on".concat(n.hoverObj.type,"Click")];x&&x.apply(void 0,[n.hoverObj.d].concat(h))}else n.onBackgroundClick&&n.onBackgroundClick.apply(n,h);if(f.button===2)if(n.hoverObj){var w=n["on".concat(n.hoverObj.type,"RightClick")];w&&w.apply(void 0,[n.hoverObj.d].concat(h))}else n.onBackgroundRightClick&&n.onBackgroundRightClick.apply(n,h)})}},{passive:!0}),i.addEventListener("contextmenu",function(f){return!n.onBackgroundRightClick&&!n.onNodeRightClick&&!n.onLinkRightClick?!0:(f.preventDefault(),!1)}),n.forceGraph(o),n.shadowGraph(l);var d=Ky(function(){Vo(l,n.width,n.height),n.shadowGraph.linkWidth(function(h){return ve(n.linkWidth)(h)+n.linkHoverPrecision});var f=gt(n.canvas);n.shadowGraph.globalScale(f.k).tickFrame()},t_);n.flushShadowCanvas=d.flush,(this._animationCycle=function f(){var h=!n.autoPauseRedraw||!!n.needsRedraw||n.forceGraph.isEngineRunning()||n.graphData.links.some(function(_){return _.__photons&&_.__photons.length});if(n.needsRedraw=!1,n.enablePointerInteraction){var x=n.isPointerDragging?null:u();if(x!==n.hoverObj){var w=n.hoverObj,v=w?w.type:null,j=x?x.type:null;if(v&&v!==j){var b=n["on".concat(v,"Hover")];b&&b(null,w.d)}if(j){var p=n["on".concat(j,"Hover")];p&&p(x.d,v===j?w.d:null)}n.tooltip.content(x&&ve(n["".concat(x.type.toLowerCase(),"Label")])(x.d)||null),n.canvas.classList[(x&&n["on".concat(j,"Click")]||!x&&n.onBackgroundClick)&&ve(n.showPointerCursor)(x==null?void 0:x.d)?"add":"remove"]("clickable"),n.hoverObj=x}h&&d()}if(h){Vo(o,n.width,n.height);var m=gt(n.canvas).k;n.onRenderFramePre&&n.onRenderFramePre(o,m),n.forceGraph.globalScale(m).tickFrame(),n.onRenderFramePost&&n.onRenderFramePost(o,m)}n.tweenGroup.update(),n.animationFrameRequestId=requestAnimationFrame(f)})()},update:function(r){}});const Gs={width:$.number,height:$.number,graphData:$.shape({nodes:$.arrayOf($.object).isRequired,links:$.arrayOf($.object).isRequired}),backgroundColor:$.string,nodeRelSize:$.number,nodeId:$.string,nodeLabel:$.oneOfType([$.string,$.func]),nodeVal:$.oneOfType([$.number,$.string,$.func]),nodeVisibility:$.oneOfType([$.bool,$.string,$.func]),nodeColor:$.oneOfType([$.string,$.func]),nodeAutoColorBy:$.oneOfType([$.string,$.func]),onNodeHover:$.func,onNodeClick:$.func,linkSource:$.string,linkTarget:$.string,linkLabel:$.oneOfType([$.string,$.func]),linkVisibility:$.oneOfType([$.bool,$.string,$.func]),linkColor:$.oneOfType([$.string,$.func]),linkAutoColorBy:$.oneOfType([$.string,$.func]),linkWidth:$.oneOfType([$.number,$.string,$.func]),linkCurvature:$.oneOfType([$.number,$.string,$.func]),linkDirectionalArrowLength:$.oneOfType([$.number,$.string,$.func]),linkDirectionalArrowColor:$.oneOfType([$.string,$.func]),linkDirectionalArrowRelPos:$.oneOfType([$.number,$.string,$.func]),linkDirectionalParticles:$.oneOfType([$.number,$.string,$.func]),linkDirectionalParticleSpeed:$.oneOfType([$.number,$.string,$.func]),linkDirectionalParticleOffset:$.oneOfType([$.number,$.string,$.func]),linkDirectionalParticleWidth:$.oneOfType([$.number,$.string,$.func]),linkDirectionalParticleColor:$.oneOfType([$.string,$.func]),onLinkHover:$.func,onLinkClick:$.func,dagMode:$.oneOf(["td","bu","lr","rl","zin","zout","radialin","radialout"]),dagLevelDistance:$.number,dagNodeFilter:$.func,onDagError:$.func,d3AlphaMin:$.number,d3AlphaDecay:$.number,d3VelocityDecay:$.number,warmupTicks:$.number,cooldownTicks:$.number,cooldownTime:$.number,onEngineTick:$.func,onEngineStop:$.func,getGraphBbox:$.func},Cu={zoomToFit:$.func,onNodeRightClick:$.func,onNodeDrag:$.func,onNodeDragEnd:$.func,onLinkRightClick:$.func,linkHoverPrecision:$.number,onBackgroundClick:$.func,onBackgroundRightClick:$.func,showPointerCursor:$.oneOfType([$.bool,$.func]),enablePointerInteraction:$.bool,enableNodeDrag:$.bool},fi={showNavInfo:$.bool,nodeOpacity:$.number,nodeResolution:$.number,nodeThreeObject:$.oneOfType([$.object,$.string,$.func]),nodeThreeObjectExtend:$.oneOfType([$.bool,$.string,$.func]),nodePositionUpdate:$.func,linkOpacity:$.number,linkResolution:$.number,linkCurveRotation:$.oneOfType([$.number,$.string,$.func]),linkMaterial:$.oneOfType([$.object,$.string,$.func]),linkThreeObject:$.oneOfType([$.object,$.string,$.func]),linkThreeObjectExtend:$.oneOfType([$.bool,$.string,$.func]),linkPositionUpdate:$.func,linkDirectionalArrowResolution:$.number,linkDirectionalParticleResolution:$.number,linkDirectionalParticleThreeObject:$.oneOfType([$.object,$.string,$.func]),forceEngine:$.oneOf(["d3","ngraph"]),ngraphPhysics:$.object,numDimensions:$.oneOf([1,2,3])},l_=Object.assign({},Gs,Cu,{linkLineDash:$.oneOfType([$.arrayOf($.number),$.string,$.func]),nodeCanvasObjectMode:$.oneOfType([$.string,$.func]),nodeCanvasObject:$.func,nodePointerAreaPaint:$.func,linkCanvasObjectMode:$.oneOfType([$.string,$.func]),linkCanvasObject:$.func,linkPointerAreaPaint:$.func,linkDirectionalParticleCanvasObject:$.func,autoPauseRedraw:$.bool,minZoom:$.number,maxZoom:$.number,enableZoomInteraction:$.oneOfType([$.bool,$.func]),enablePanInteraction:$.oneOfType([$.bool,$.func]),onZoom:$.func,onZoomEnd:$.func,onRenderFramePre:$.func,onRenderFramePost:$.func});Object.assign({},Gs,Cu,fi,{enableNavigationControls:$.bool,controlType:$.oneOf(["trackball","orbit","fly"]),rendererConfig:$.object,extraRenderers:$.arrayOf($.shape({render:$.func.isRequired}))});Object.assign({},Gs,fi,{nodeDesc:$.oneOfType([$.string,$.func]),linkDesc:$.oneOfType([$.string,$.func])});Object.assign({},Gs,fi,{markerAttrs:$.object,yOffset:$.number,glScale:$.number});const mi=xg(o_,{methodNames:["emitParticle","d3Force","d3ReheatSimulation","stopAnimation","pauseAnimation","resumeAnimation","centerAt","zoom","zoomToFit","getGraphBbox","screen2GraphCoords","graph2ScreenCoords"]});mi.displayName="ForceGraph2D";mi.propTypes=l_;const c_=({scanId:e})=>{const[r,n]=R.useState(null),[s,i]=R.useState(!0),[o,l]=R.useState(null),[c,u]=R.useState(null),[d,f]=R.useState(""),[h,x]=R.useState(!1),w=R.useRef(),v=R.useRef(null);R.useEffect(()=>{(async()=>{try{i(!0);const O=localStorage.getItem("token"),A=await fetch(`/api/scans/${e}/topology`,{headers:{Authorization:`Bearer ${O}`}});if(!A.ok)throw new Error("Failed to fetch topology data");const M=await A.json();n(M)}catch(O){l(O instanceof Error?O.message:"Unknown error")}finally{i(!1)}})()},[e]);const j=E=>E.critical_vulns>0||E.risk_score>=75?"#ef4444":E.high_vulns>0||E.risk_score>=50?"#f97316":E.risk_score>=25?"#eab308":"#22c55e",b=E=>{const A=Math.min(E.open_ports_count/10,3),M=Math.min(E.vuln_count/5,3),T=E.is_gateway?3:0;return 5+A+M+T},p=E=>{switch(E){case"server":return a.jsx(jt,{className:"w-4 h-4"});case"workstation":return a.jsx(Ol,{className:"w-4 h-4"});case"network":return a.jsx(ds,{className:"w-4 h-4"});case"gateway":return a.jsx(vi,{className:"w-4 h-4"});default:return a.jsx(kl,{className:"w-4 h-4"})}},m=E=>{switch(E.relationship_type){case"gateway":return"#3b82f6";case"shared_service":return"#8b5cf6";case"same_subnet":return"#6b7280";default:return"#6b7280"}},_=R.useCallback(E=>{u(E)},[]),g=()=>{if(w.current){const E=w.current.zoom();w.current.zoom(E*1.3,400)}},y=()=>{if(w.current){const E=w.current.zoom();w.current.zoom(E/1.3,400)}},S=()=>{if(!r||!d)return;const E=r.nodes.find(O=>{var A;return O.ip.includes(d)||((A=O.hostname)==null?void 0:A.toLowerCase().includes(d.toLowerCase()))});if(E&&w.current){const O=E;w.current.centerAt(O.x,O.y,1e3),w.current.zoom(3,1e3),u(E)}},N=()=>{x(!h)};if(s)return a.jsx(fe,{className:"p-8",children:a.jsxs("div",{className:"flex items-center justify-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600"}),a.jsx("span",{className:"ml-4 text-gray-600 dark:text-gray-400",children:"Loading network topology..."})]})});if(o)return a.jsx(fe,{className:"p-8",children:a.jsx("div",{className:"text-center text-red-600 dark:text-red-400",children:a.jsxs("p",{children:["Failed to load topology: ",o]})})});if(!r||r.nodes.length===0)return a.jsx(fe,{className:"p-8",children:a.jsxs("div",{className:"text-center text-gray-600 dark:text-gray-400",children:[a.jsx(ds,{className:"w-16 h-16 mx-auto mb-4 opacity-50"}),a.jsx("p",{children:"No topology data available for this scan."})]})});const k={nodes:r.nodes.map(E=>({...E,color:j(E),size:b(E)})),links:r.edges.map(E=>({...E,color:m(E)}))},C=h?"fixed inset-0 z-50 bg-gray-900":"relative";return a.jsx("div",{ref:v,className:C,children:a.jsxs(fe,{className:h?"h-full rounded-none":"h-[600px]",children:[a.jsxs("div",{className:"absolute top-4 left-4 z-10 flex flex-col gap-2",children:[a.jsxs("div",{className:"flex gap-2 bg-white dark:bg-gray-800 rounded-lg shadow-lg p-2",children:[a.jsx("input",{type:"text",placeholder:"Search IP or hostname...",value:d,onChange:E=>f(E.target.value),onKeyPress:E=>E.key==="Enter"&&S(),className:"px-3 py-2 bg-gray-50 dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 dark:text-white"}),a.jsx("button",{onClick:S,className:"px-3 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700 transition-colors",children:a.jsx(Os,{className:"w-4 h-4"})})]}),a.jsxs("div",{className:"flex gap-2 bg-white dark:bg-gray-800 rounded-lg shadow-lg p-2",children:[a.jsx("button",{onClick:g,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded transition-colors",title:"Zoom In",children:a.jsx(Cd,{className:"w-5 h-5 text-gray-700 dark:text-gray-300"})}),a.jsx("button",{onClick:y,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded transition-colors",title:"Zoom Out",children:a.jsx(Pd,{className:"w-5 h-5 text-gray-700 dark:text-gray-300"})}),a.jsx("button",{onClick:N,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded transition-colors",title:h?"Exit Fullscreen":"Fullscreen",children:h?a.jsx(Lt,{className:"w-5 h-5 text-gray-700 dark:text-gray-300"}):a.jsx(Fl,{className:"w-5 h-5 text-gray-700 dark:text-gray-300"})})]})]}),a.jsxs("div",{className:"absolute top-4 right-4 z-10 bg-white dark:bg-gray-800 rounded-lg shadow-lg p-4 max-w-xs",children:[a.jsx("h3",{className:"text-sm font-semibold mb-2 text-gray-900 dark:text-white",children:"Legend"}),a.jsxs("div",{className:"space-y-2 text-xs",children:[a.jsx("div",{className:"font-medium text-gray-700 dark:text-gray-300",children:"Risk Level"}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"w-4 h-4 rounded-full bg-green-500"}),a.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Low (0-25)"})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"w-4 h-4 rounded-full bg-yellow-500"}),a.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Medium (25-50)"})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"w-4 h-4 rounded-full bg-orange-500"}),a.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"High (50-75)"})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"w-4 h-4 rounded-full bg-red-500"}),a.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Critical (75+)"})]}),a.jsxs("div",{className:"mt-3 pt-2 border-t border-gray-200 dark:border-gray-700",children:[a.jsx("div",{className:"font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Connections"}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"w-8 h-0.5 bg-blue-500"}),a.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Gateway"})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"w-8 h-0.5 bg-purple-500"}),a.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Shared Service"})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"w-8 h-0.5 bg-gray-500"}),a.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Same Subnet"})]})]})]})]}),c&&a.jsxs("div",{className:"absolute bottom-4 left-4 z-10 bg-white dark:bg-gray-800 rounded-lg shadow-lg p-4 max-w-sm",children:[a.jsxs("div",{className:"flex items-start justify-between mb-2",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[p(c.node_type),a.jsx("h3",{className:"text-sm font-semibold text-gray-900 dark:text-white",children:c.hostname||c.ip})]}),a.jsx("button",{onClick:()=>u(null),className:"text-gray-500 hover:text-gray-700 dark:hover:text-gray-300",children:a.jsx(Lt,{className:"w-4 h-4"})})]}),a.jsxs("div",{className:"space-y-1 text-xs text-gray-600 dark:text-gray-400",children:[a.jsxs("div",{children:[a.jsx("strong",{children:"IP:"})," ",c.ip]}),c.os&&a.jsxs("div",{children:[a.jsx("strong",{children:"OS:"})," ",c.os]}),a.jsxs("div",{children:[a.jsx("strong",{children:"Subnet:"})," ",c.subnet]}),a.jsxs("div",{children:[a.jsx("strong",{children:"Open Ports:"})," ",c.open_ports_count]}),c.vuln_count>0&&a.jsxs("div",{className:"mt-2 pt-2 border-t border-gray-200 dark:border-gray-700",children:[a.jsxs("div",{children:[a.jsx("strong",{children:"Vulnerabilities:"})," ",c.vuln_count]}),c.critical_vulns>0&&a.jsxs("div",{className:"text-red-600 dark:text-red-400",children:["Critical: ",c.critical_vulns]}),c.high_vulns>0&&a.jsxs("div",{className:"text-orange-600 dark:text-orange-400",children:["High: ",c.high_vulns]}),a.jsxs("div",{children:[a.jsx("strong",{children:"Risk Score:"})," ",c.risk_score.toFixed(1)]})]}),c.is_gateway&&a.jsx("div",{className:"mt-2 pt-2 border-t border-gray-200 dark:border-gray-700",children:a.jsxs("span",{className:"inline-flex items-center px-2 py-1 bg-blue-100 dark:bg-blue-900 text-blue-800 dark:text-blue-200 rounded text-xs font-medium",children:[a.jsx(vi,{className:"w-3 h-3 mr-1"}),"Gateway"]})})]})]}),a.jsxs("div",{className:"absolute bottom-4 right-4 z-10 bg-white dark:bg-gray-800 rounded-lg shadow-lg p-4 max-w-xs",children:[a.jsxs("h3",{className:"text-sm font-semibold mb-2 text-gray-900 dark:text-white",children:["Subnets (",r.subnets.length,")"]}),a.jsx("div",{className:"space-y-1 text-xs max-h-32 overflow-y-auto",children:r.subnets.map(E=>a.jsxs("div",{className:"flex justify-between text-gray-600 dark:text-gray-400",children:[a.jsx("span",{className:"font-mono",children:E.subnet}),a.jsxs("span",{className:"text-gray-500 dark:text-gray-500",children:[E.host_count," ",E.host_count===1?"host":"hosts"]})]},E.subnet))})]}),a.jsx(mi,{ref:w,graphData:k,nodeLabel:E=>{const O=E;return`${O.hostname||O.ip}
${O.os||""}
Risk: ${O.risk_score.toFixed(1)}`},nodeColor:E=>E.color||"#22c55e",nodeVal:E=>E.size||5,linkColor:E=>E.color||"#64748b",linkWidth:E=>(E.strength||1)*2,linkDirectionalParticles:E=>E.relationship_type==="gateway"?2:0,linkDirectionalParticleSpeed:.005,onNodeClick:_,nodeCanvasObject:(E,O,A)=>{const M=E,T=M.hostname||M.ip,H=12/A;O.font=`${H}px Sans-Serif`,O.beginPath(),O.arc(M.x||0,M.y||0,M.size||5,0,2*Math.PI,!1),O.fillStyle=M.color||"#22c55e",O.fill(),M.is_gateway&&(O.strokeStyle="#3b82f6",O.lineWidth=2/A,O.stroke()),A>1.5&&(O.textAlign="center",O.textBaseline="middle",O.fillStyle="rgba(255, 255, 255, 0.9)",O.fillText(T,M.x||0,(M.y||0)+(M.size||5)+H+2))},enableNodeDrag:!0,enableZoomInteraction:!0,enablePanInteraction:!0,cooldownTicks:100,onEngineStop:()=>{var E;return(E=w.current)==null?void 0:E.zoomToFit(400)}})]})})},u_=()=>{const{activeScan:e,results:r}=ct(),[n,s]=R.useState(!1),[i,o]=R.useState(null),[l,c]=R.useState(""),[u,d]=R.useState("risk"),[f,h]=R.useState("all"),[x,w]=R.useState(!1),[v,j]=R.useState(!1),[b,p]=R.useState(!1),[m,_]=R.useState(0),[g,y]=R.useState("results"),[S,N]=R.useState(!1),[k,C]=R.useState([]),[E,O]=R.useState([]),[A,M]=R.useState(!1),[T,H]=R.useState(!1),z=e?r.get(e.id)||[]:[];R.useEffect(()=>{e&&e.status==="completed"&&z.length===0&&oe(),e&&(B(),Y())},[e]);const B=async()=>{if(e)try{const W=await ot.getTagsForScan(e.id);C(W.data)}catch(W){console.error("Failed to load scan tags:",W)}},Y=async()=>{try{const W=await ot.getAll();O(W.data)}catch(W){console.error("Failed to load all tags:",W)}},U=async W=>{if(e)try{const te=await ot.addTagsToScan(e.id,{tag_ids:[W]});C(te.data),M(!1),Q.success("Tag added")}catch{Q.error("Failed to add tag")}},G=async W=>{if(e)try{await ot.removeTagFromScan(e.id,W),C(k.filter(te=>te.id!==W)),Q.success("Tag removed")}catch{Q.error("Failed to remove tag")}},Z=async()=>{if(e){H(!0);try{const W=await vt.duplicate(e.id);Q.success(`Scan duplicated as "${W.data.name}"`),ct.getState().setActiveScan(W.data)}catch{Q.error("Failed to duplicate scan")}finally{H(!1)}}},X=E.filter(W=>!k.some(te=>te.id===W.id)),oe=async()=>{if(e){s(!0);try{const W=await vt.getResults(e.id);ct.getState().setResults(e.id,W.data)}catch{Q.error("Failed to load scan results")}finally{s(!1)}}},le=async()=>{var W,te,ne;if(e){N(!0);try{const ee=await Wf.exportScan(e.id);ee.data.success?Q.success(`Exported ${ee.data.events_count} events to ${ee.data.exported_to} SIEM integration(s)`):Q.warning("Export completed with issues. Check SIEM settings."),ee.data.errors&&ee.data.errors.length>0&&ee.data.errors.forEach(he=>{Q.error(`SIEM export error: ${he}`)})}catch(ee){const he=ee;((W=he.response)==null?void 0:W.status)===404?Q.error("No SIEM integrations configured. Go to Settings > SIEM Integration to set up."):Q.error(((ne=(te=he.response)==null?void 0:te.data)==null?void 0:ne.error)||"Failed to export to SIEM")}finally{N(!1)}}},me=R.useMemo(()=>{let W=[...z];switch(l&&(W=W.filter(te=>{var ne;return te.target.ip.includes(l)||((ne=te.target.hostname)==null?void 0:ne.toLowerCase().includes(l.toLowerCase()))})),f){case"with-vulns":W=W.filter(te=>te.vulnerabilities.length>0);break;case"critical":W=W.filter(te=>te.vulnerabilities.some(ne=>ne.severity==="Critical"));break;case"high":W=W.filter(te=>te.vulnerabilities.some(ne=>ne.severity==="Critical"||ne.severity==="High"));break}return W.sort((te,ne)=>{switch(u){case"risk":return na(ne)-na(te);case"vulns":return ne.vulnerabilities.length-te.vulnerabilities.length;case"ports":return ne.ports.filter(ee=>ee.state==="Open").length-te.ports.filter(ee=>ee.state==="Open").length;case"ip":default:return te.target.ip.localeCompare(ne.target.ip)}}),W},[z,l,u,f]);if(!e)return a.jsx(fe,{children:a.jsx("div",{className:"text-center py-12 text-slate-500",children:"Select a scan from the list to view results"})});if(n)return a.jsx(fe,{children:a.jsx("div",{className:"flex items-center justify-center py-12",children:a.jsx(wt,{})})});if(z.length===0)return a.jsx(fe,{children:a.jsx("div",{className:"text-center py-12 text-slate-500",children:e.status==="running"?"Scan in progress... Results will appear here as hosts are discovered":e.status==="pending"?"Scan is pending...":e.status==="failed"?`Scan failed: ${e.error_message||"Unknown error"}`:"No results available"})});const de=z.filter(W=>W.is_alive).length,ge=z.reduce((W,te)=>W+te.ports.filter(ne=>ne.state==="Open").length,0),J=z.reduce((W,te)=>W+te.vulnerabilities.length,0);return a.jsxs("div",{className:"space-y-4",children:[a.jsxs(fe,{children:[a.jsxs("div",{className:"flex justify-between items-start mb-4",children:[a.jsx("h3",{className:"text-lg font-semibold text-white",children:e==null?void 0:e.name}),a.jsxs("button",{onClick:Z,disabled:T,className:"flex items-center gap-1 px-3 py-1.5 text-sm border border-dark-border rounded hover:border-primary hover:text-primary transition-colors disabled:opacity-50",title:"Duplicate this scan",children:[T?a.jsx(wt,{className:"h-4 w-4"}):a.jsx(Rs,{className:"h-4 w-4"}),"Duplicate"]})]}),a.jsxs("div",{className:"flex items-center gap-2 mb-4 flex-wrap",children:[a.jsx(bn,{className:"h-4 w-4 text-slate-400"}),k.map(W=>a.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded text-sm",style:{backgroundColor:W.color+"20",color:W.color},children:[W.name,a.jsx("button",{onClick:()=>G(W.id),className:"hover:opacity-70",title:"Remove tag",children:a.jsx(Lt,{className:"h-3 w-3"})})]},W.id)),a.jsxs("div",{className:"relative",children:[a.jsxs("button",{onClick:()=>M(!A),className:"inline-flex items-center gap-1 px-2 py-1 rounded text-sm border border-dashed border-dark-border text-slate-400 hover:border-primary hover:text-primary",children:[a.jsx(_r,{className:"h-3 w-3"}),"Add Tag"]}),A&&X.length>0&&a.jsx("div",{className:"absolute top-full left-0 mt-1 z-10 bg-dark-surface border border-dark-border rounded-lg shadow-lg min-w-[150px] max-h-[200px] overflow-y-auto",children:X.map(W=>a.jsxs("button",{onClick:()=>U(W.id),className:"w-full text-left px-3 py-2 hover:bg-dark-hover flex items-center gap-2",children:[a.jsx("span",{className:"w-3 h-3 rounded-full",style:{backgroundColor:W.color}}),a.jsx("span",{className:"text-sm text-slate-300",children:W.name})]},W.id))}),A&&X.length===0&&a.jsx("div",{className:"absolute top-full left-0 mt-1 z-10 bg-dark-surface border border-dark-border rounded-lg shadow-lg p-3",children:a.jsx("span",{className:"text-sm text-slate-500",children:"No more tags available"})})]})]}),a.jsxs("div",{className:"grid grid-cols-3 gap-4 text-center",children:[a.jsxs("div",{children:[a.jsx(jt,{className:"h-8 w-8 mx-auto mb-2 text-primary"}),a.jsx("p",{className:"text-2xl font-bold text-white",children:de}),a.jsx("p",{className:"text-sm text-slate-400",children:"Alive Hosts"})]}),a.jsxs("div",{children:[a.jsx(ke,{className:"h-8 w-8 mx-auto mb-2 text-green-500"}),a.jsx("p",{className:"text-2xl font-bold text-white",children:ge}),a.jsx("p",{className:"text-sm text-slate-400",children:"Open Ports"})]}),a.jsxs("div",{children:[a.jsx(Ee,{className:"h-8 w-8 mx-auto mb-2 text-red-500"}),a.jsx("p",{className:"text-2xl font-bold text-white",children:J}),a.jsx("p",{className:"text-sm text-slate-400",children:"Vulnerabilities"})]})]})]}),a.jsx(fe,{children:a.jsxs("div",{className:"flex gap-2 border-b border-dark-border pb-2",children:[a.jsxs("button",{onClick:()=>y("results"),className:`flex items-center gap-2 px-4 py-2 rounded-t-lg text-sm font-medium transition-colors ${g==="results"?"bg-dark-surface text-primary border-b-2 border-primary":"text-slate-400 hover:text-white hover:bg-dark-hover"}`,children:[a.jsx(Ed,{className:"h-4 w-4"}),"Results"]}),a.jsxs("button",{onClick:()=>y("topology"),className:`flex items-center gap-2 px-4 py-2 rounded-t-lg text-sm font-medium transition-colors ${g==="topology"?"bg-dark-surface text-primary border-b-2 border-primary":"text-slate-400 hover:text-white hover:bg-dark-hover"}`,children:[a.jsx(ds,{className:"h-4 w-4"}),"Topology"]})]})}),g==="topology"&&e&&a.jsx(c_,{scanId:e.id}),g==="results"&&a.jsxs(a.Fragment,{children:[a.jsx(fe,{children:a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"flex-1",children:a.jsx(Ie,{type:"text",placeholder:"Search by IP or hostname...",value:l,onChange:W=>c(W.target.value),icon:a.jsx(Os,{className:"h-4 w-4"})})}),a.jsx(Gp,{hosts:me,scanName:e==null?void 0:e.name,scanId:e==null?void 0:e.id,disabled:me.length===0}),a.jsxs("button",{onClick:()=>p(!0),disabled:(e==null?void 0:e.status)!=="completed",className:"px-4 py-2 rounded-lg border border-green-500 text-green-500 hover:bg-green-500/10 transition-colors flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",children:[a.jsx(qa,{className:"h-4 w-4"}),"Compliance"]}),a.jsxs("button",{onClick:le,disabled:(e==null?void 0:e.status)!=="completed"||S,className:"px-4 py-2 rounded-lg border border-purple-500 text-purple-500 hover:bg-purple-500/10 transition-colors flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",title:"Export scan results to configured SIEM integrations",children:[S?a.jsx(wt,{}):a.jsx(Od,{className:"h-4 w-4"}),S?"Exporting...":"SIEM"]}),a.jsxs("button",{onClick:()=>j(!0),disabled:(e==null?void 0:e.status)!=="completed",className:"px-4 py-2 rounded-lg border border-primary text-primary hover:bg-primary/10 transition-colors flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",children:[a.jsx(Yt,{className:"h-4 w-4"}),"Report"]}),a.jsxs("button",{onClick:()=>w(!x),className:`px-4 py-2 rounded-lg border transition-colors flex items-center gap-2 ${x?"bg-primary border-primary text-white":"border-dark-border text-slate-400 hover:border-primary hover:text-white"}`,children:[a.jsx(Rd,{className:"h-4 w-4"}),"Filters"]})]}),x&&a.jsxs("div",{className:"grid grid-cols-2 gap-4 pt-3 border-t border-dark-border",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Sort by"}),a.jsxs("select",{value:u,onChange:W=>d(W.target.value),className:"w-full bg-dark-surface border border-dark-border rounded-lg px-3 py-2 text-white focus:ring-2 focus:ring-primary focus:border-transparent",children:[a.jsx("option",{value:"risk",children:"Risk Score (High to Low)"}),a.jsx("option",{value:"vulns",children:"Vulnerability Count"}),a.jsx("option",{value:"ports",children:"Port Count"}),a.jsx("option",{value:"ip",children:"IP Address"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Filter by"}),a.jsxs("select",{value:f,onChange:W=>h(W.target.value),className:"w-full bg-dark-surface border border-dark-border rounded-lg px-3 py-2 text-white focus:ring-2 focus:ring-primary focus:border-transparent",children:[a.jsx("option",{value:"all",children:"All Hosts"}),a.jsx("option",{value:"with-vulns",children:"With Vulnerabilities"}),a.jsx("option",{value:"high",children:"High/Critical Severity"}),a.jsx("option",{value:"critical",children:"Critical Only"})]})]})]}),a.jsxs("div",{className:"text-sm text-slate-400",children:["Showing ",me.length," of ",z.length," hosts"]})]})}),a.jsxs(fe,{children:[a.jsx("h3",{className:"text-xl font-semibold text-white mb-4",children:"Discovered Hosts"}),a.jsxs("div",{className:"space-y-3",children:[me.map(W=>{const te=na(W),ne=Pp(te);return a.jsxs("div",{className:`bg-dark-bg border rounded-lg p-4 cursor-pointer hover:border-primary/50 transition-all ${ne==="Critical"?"border-severity-critical":ne==="High"?"border-severity-high":"border-dark-border"}`,onClick:()=>o(i===W.target.ip?null:W.target.ip),children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-white font-mono font-semibold",children:W.target.ip}),W.target.hostname&&a.jsx("p",{className:"text-sm text-slate-400",children:W.target.hostname})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsxs(et,{variant:"severity",type:jc(ne),children:["Risk: ",te]}),a.jsx(et,{variant:"status",type:W.is_alive?"completed":"failed",children:W.is_alive?"Alive":"Down"}),W.ports.filter(ee=>ee.state==="Open").length>0&&a.jsxs("span",{className:"text-sm text-slate-400",children:[W.ports.filter(ee=>ee.state==="Open").length," ports"]}),W.vulnerabilities.length>0&&a.jsxs("span",{className:"text-sm text-red-400",children:[W.vulnerabilities.length," vulns"]})]})]}),i===W.target.ip&&a.jsxs("div",{className:"mt-4 border-t border-dark-border pt-4 space-y-4",children:[W.os_guess&&a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-slate-300 mb-1",children:"OS Detection"}),a.jsxs("p",{className:"text-sm text-slate-400",children:[W.os_guess.os_family," ",W.os_guess.os_version," (",W.os_guess.confidence,"% confidence)"]})]}),W.ports.filter(ee=>ee.state==="Open").length>0&&a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-slate-300 mb-2",children:"Open Ports"}),a.jsx("div",{className:"space-y-2",children:W.ports.filter(ee=>ee.state==="Open").map(ee=>{var he,Ce;return a.jsx("div",{children:a.jsxs("div",{className:"bg-dark-surface rounded p-3 text-sm",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("span",{className:"text-white font-mono font-semibold",children:[ee.port,"/",ee.protocol]}),ee.service&&a.jsxs("span",{className:"text-slate-400",children:[ee.service.name," ",ee.service.version&&a.jsxs("span",{className:"text-slate-500",children:["v",ee.service.version]})]})]}),((he=ee.service)==null?void 0:he.banner)&&a.jsx(Tp,{banner:ee.service.banner,port:ee.port,service:ee.service.name}),((Ce=ee.service)==null?void 0:Ce.ssl_info)&&a.jsx(Vp,{sslInfo:ee.service.ssl_info,port:ee.port})]})},ee.port)})})]}),W.vulnerabilities.length>0&&a.jsxs("div",{children:[a.jsxs("p",{className:"text-sm font-medium text-slate-300 mb-3",children:["Vulnerabilities (",W.vulnerabilities.length,")"]}),a.jsx("div",{className:"space-y-3",children:W.vulnerabilities.map((ee,he)=>a.jsx(Rp,{vulnerability:ee},he))})]})]})]},W.target.ip)}),me.length===0&&a.jsx("div",{className:"text-center py-8 text-slate-400",children:"No hosts match the current filters"})]})]}),(e==null?void 0:e.status)==="completed"&&a.jsx(Jp,{scanId:e.id,onGenerateNew:()=>j(!0)},m)]}),v&&e&&a.jsx(Xp,{scanId:e.id,scanName:e.name,onClose:()=>j(!1),onReportCreated:()=>_(W=>W+1)}),b&&e&&a.jsx(Zp,{scanId:e.id,scanName:e.name,onClose:()=>p(!1)})]})},Vn=({title:e,value:r,icon:n,color:s,subtitle:i})=>a.jsx(fe,{className:"p-6",children:a.jsxs("div",{className:"flex items-start justify-between",children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{className:"text-slate-400 text-sm font-medium mb-1",children:e}),a.jsx("p",{className:`text-3xl font-bold ${s} mb-1`,children:r}),i&&a.jsx("p",{className:"text-slate-500 text-xs",children:i})]}),a.jsx("div",{className:`${s.replace("text-","bg-")}/20 p-3 rounded-lg`,children:n})]})}),d_=()=>{const{scans:e,results:r}=ct(),n=R.useMemo(()=>{const s=e.filter(o=>o.status==="completed"),i=Array.from(r.values()).flat();return{...Op(i),completedScans:s.length}},[e,r]);return a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-6",children:[a.jsx(Vn,{title:"Completed Scans",value:n.completedScans,icon:a.jsx(bt,{className:"h-6 w-6 text-primary"}),color:"text-primary",subtitle:`${e.filter(s=>s.status==="running").length} running`}),a.jsx(Vn,{title:"Hosts Discovered",value:n.totalHosts,icon:a.jsx(jt,{className:"h-6 w-6 text-blue-400"}),color:"text-blue-400",subtitle:`${n.totalPorts} open ports`}),a.jsx(Vn,{title:"Total Vulnerabilities",value:n.totalVulnerabilities,icon:a.jsx(Ee,{className:"h-6 w-6 text-yellow-400"}),color:"text-yellow-400",subtitle:"Across all scans"}),a.jsx(Vn,{title:"Critical Findings",value:n.criticalVulnerabilities,icon:a.jsx(ke,{className:"h-6 w-6 text-severity-critical"}),color:"text-severity-critical",subtitle:"Requires immediate attention"})]})},h_={Critical:"#ef4444",High:"#f97316",Medium:"#eab308",Low:"#3b82f6"},f_=({hosts:e})=>{const r=R.useMemo(()=>{const s=_c(e);return Object.entries(s).filter(([i,o])=>o>0).map(([i,o])=>({name:i,value:o,color:h_[i]}))},[e]),n=r.reduce((s,i)=>s+i.value,0);return n===0?a.jsxs(fe,{className:"p-6",children:[a.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Vulnerability Distribution"}),a.jsx("div",{className:"flex items-center justify-center h-64 text-slate-400",children:a.jsx("p",{children:"No vulnerabilities found"})})]}):a.jsxs(fe,{className:"p-6",children:[a.jsxs("h3",{className:"text-lg font-semibold text-white mb-4",children:["Vulnerability Distribution",a.jsxs("span",{className:"text-sm font-normal text-slate-400 ml-2",children:["(",n," total)"]})]}),a.jsx(sr,{width:"100%",height:300,children:a.jsxs(Gd,{children:[a.jsx(Yd,{data:r,cx:"50%",cy:"50%",labelLine:!1,label:({name:s,percent:i})=>`${s}: ${(i*100).toFixed(0)}%`,outerRadius:100,fill:"#8884d8",dataKey:"value",children:r.map((s,i)=>a.jsx(Il,{fill:s.color},`cell-${i}`))}),a.jsx(ar,{contentStyle:{backgroundColor:"#1e293b",border:"1px solid #334155",borderRadius:"8px",color:"#fff"},formatter:s=>[`${s} vulnerabilities`,"Count"]}),a.jsx(Hl,{verticalAlign:"bottom",height:36,formatter:(s,i)=>a.jsxs("span",{style:{color:"#cbd5e1"},children:[s,": ",i.payload.value]})})]})})]})},m_={21:"#f97316",22:"#22c55e",23:"#ef4444",25:"#3b82f6",53:"#8b5cf6",80:"#06b6d4",110:"#3b82f6",143:"#3b82f6",443:"#10b981",445:"#f59e0b",3306:"#ec4899",3389:"#ef4444",5432:"#3b82f6",8080:"#06b6d4"},p_="#64748b",g_=({hosts:e})=>{const r=R.useMemo(()=>Ep(e).map(n=>({...n,displayName:`${n.port} (${n.service})`,color:m_[n.port]||p_})),[e]);return r.length===0?a.jsxs(fe,{className:"p-6",children:[a.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Port Distribution"}),a.jsx("div",{className:"flex items-center justify-center h-64 text-slate-400",children:a.jsx("p",{children:"No open ports found"})})]}):a.jsxs(fe,{className:"p-6",children:[a.jsxs("h3",{className:"text-lg font-semibold text-white mb-4",children:["Top Open Ports",a.jsx("span",{className:"text-sm font-normal text-slate-400 ml-2",children:"(Across all hosts)"})]}),a.jsx(sr,{width:"100%",height:300,children:a.jsxs(Ul,{data:r,layout:"vertical",margin:{top:5,right:30,left:100,bottom:5},children:[a.jsx(yr,{strokeDasharray:"3 3",stroke:"#334155"}),a.jsx(br,{type:"number",stroke:"#cbd5e1"}),a.jsx(vr,{dataKey:"displayName",type:"category",width:90,stroke:"#cbd5e1",tick:{fontSize:12}}),a.jsx(ar,{contentStyle:{backgroundColor:"#1e293b",border:"1px solid #334155",borderRadius:"8px",color:"#fff"},formatter:(n,s,i)=>[`${n} hosts`,i.payload.service],labelFormatter:n=>{var s;return`Port ${(s=r.find(i=>i.displayName===n))==null?void 0:s.port}`}}),a.jsx(ql,{dataKey:"count",radius:[0,4,4,0],children:r.map((n,s)=>a.jsx(Il,{fill:n.color},`cell-${s}`))})]})})]})},Gn=({title:e,value:r,subtitle:n,icon:s,color:i,trend:o})=>a.jsx(fe,{className:"p-6",children:a.jsxs("div",{className:"flex items-start justify-between",children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{className:"text-slate-400 text-sm font-medium mb-1",children:e}),a.jsx("p",{className:`text-3xl font-bold ${i} mb-1`,children:r}),n&&a.jsx("p",{className:"text-slate-500 text-xs",children:n}),o&&a.jsxs("div",{className:`flex items-center gap-1 mt-2 text-xs ${o.isPositive?"text-green-400":"text-red-400"}`,children:[a.jsx(Td,{className:`h-3 w-3 ${!o.isPositive&&"rotate-180"}`}),a.jsxs("span",{children:[o.isPositive?"+":"",o.value,"%"]})]})]}),a.jsx("div",{className:`${i.replace("text-","bg-")}/20 p-3 rounded-lg`,children:s})]})}),x_=()=>{const[e,r]=R.useState(30),[n,s]=R.useState(!0),[i,o]=R.useState(null),[l,c]=R.useState(null),[u,d]=R.useState([]),[f,h]=R.useState([]),[x,w]=R.useState([]),[v,j]=R.useState([]);R.useEffect(()=>{b()},[e]);const b=async()=>{var m,_;s(!0),o(null);try{const[g,y,S,N,k]=await Promise.all([Lr.getSummary(e),Lr.getHosts(e),Lr.getVulnerabilities(e),Lr.getServices(10),Lr.getFrequency(e)]);c(g.data),d(y.data),h(S.data),w(N.data),j(k.data)}catch(g){const y=g;console.error("Failed to load analytics:",g),o(((_=(m=y.response)==null?void 0:m.data)==null?void 0:_.message)||"Failed to load analytics data")}finally{s(!1)}},p=m=>new Date(m).toLocaleDateString("en-US",{month:"short",day:"numeric"});return n?a.jsx("div",{className:"flex items-center justify-center h-96",children:a.jsx(wt,{size:"lg"})}):i?a.jsx(fe,{className:"p-6",children:a.jsxs("div",{className:"text-center",children:[a.jsx(Ee,{className:"h-12 w-12 text-yellow-400 mx-auto mb-4"}),a.jsx("h3",{className:"text-lg font-semibold text-white mb-2",children:"Failed to Load Analytics"}),a.jsx("p",{className:"text-slate-400 mb-4",children:i}),a.jsx("button",{onClick:b,className:"px-4 py-2 bg-primary text-white rounded-lg hover:bg-primary/80 transition-colors",children:"Retry"})]})}):l?a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-2xl font-bold text-white mb-1",children:"Analytics Dashboard"}),a.jsx("p",{className:"text-slate-400",children:"Insights and trends from your security scans"})]}),a.jsxs("div",{className:"flex items-center gap-2 bg-dark-surface border border-dark-border rounded-lg p-1",children:[a.jsxs("button",{onClick:()=>r(7),className:`flex items-center gap-2 px-3 py-2 rounded transition-colors ${e===7?"bg-primary text-white":"text-slate-400 hover:text-white"}`,children:[a.jsx(hn,{className:"h-4 w-4"}),"7 Days"]}),a.jsxs("button",{onClick:()=>r(30),className:`flex items-center gap-2 px-3 py-2 rounded transition-colors ${e===30?"bg-primary text-white":"text-slate-400 hover:text-white"}`,children:[a.jsx(hn,{className:"h-4 w-4"}),"30 Days"]}),a.jsxs("button",{onClick:()=>r(90),className:`flex items-center gap-2 px-3 py-2 rounded transition-colors ${e===90?"bg-primary text-white":"text-slate-400 hover:text-white"}`,children:[a.jsx(hn,{className:"h-4 w-4"}),"90 Days"]})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[a.jsx(Gn,{title:"Total Scans",value:l.total_scans,subtitle:`${l.scans_this_week} this week`,icon:a.jsx(bt,{className:"h-6 w-6 text-primary"}),color:"text-primary"}),a.jsx(Gn,{title:"Hosts Discovered",value:l.total_hosts,subtitle:`${l.total_ports} open ports`,icon:a.jsx(jt,{className:"h-6 w-6 text-blue-400"}),color:"text-blue-400"}),a.jsx(Gn,{title:"Total Vulnerabilities",value:l.total_vulnerabilities,subtitle:`${l.critical_vulns} critical`,icon:a.jsx(Ee,{className:"h-6 w-6 text-yellow-400"}),color:"text-yellow-400"}),a.jsx(Gn,{title:"Critical Findings",value:l.critical_vulns,subtitle:"Requires immediate attention",icon:a.jsx(ke,{className:"h-6 w-6 text-severity-critical"}),color:"text-severity-critical"})]}),a.jsxs(fe,{className:"p-6",children:[a.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Vulnerability Severity Breakdown"}),a.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[a.jsxs("div",{className:"bg-dark-bg p-4 rounded-lg border border-dark-border",children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsx("span",{className:"text-sm text-slate-400",children:"Critical"}),a.jsx(ke,{className:"h-4 w-4 text-severity-critical"})]}),a.jsx("p",{className:"text-2xl font-bold text-severity-critical",children:l.critical_vulns})]}),a.jsxs("div",{className:"bg-dark-bg p-4 rounded-lg border border-dark-border",children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsx("span",{className:"text-sm text-slate-400",children:"High"}),a.jsx(ke,{className:"h-4 w-4 text-severity-high"})]}),a.jsx("p",{className:"text-2xl font-bold text-severity-high",children:l.high_vulns})]}),a.jsxs("div",{className:"bg-dark-bg p-4 rounded-lg border border-dark-border",children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsx("span",{className:"text-sm text-slate-400",children:"Medium"}),a.jsx(ke,{className:"h-4 w-4 text-severity-medium"})]}),a.jsx("p",{className:"text-2xl font-bold text-severity-medium",children:l.medium_vulns})]}),a.jsxs("div",{className:"bg-dark-bg p-4 rounded-lg border border-dark-border",children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsx("span",{className:"text-sm text-slate-400",children:"Low"}),a.jsx(ke,{className:"h-4 w-4 text-severity-low"})]}),a.jsx("p",{className:"text-2xl font-bold text-severity-low",children:l.low_vulns})]})]})]}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[a.jsxs(fe,{className:"p-6",children:[a.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Hosts Discovered Over Time"}),u.length>0?a.jsx(sr,{width:"100%",height:300,children:a.jsxs(ga,{data:u,children:[a.jsx(yr,{strokeDasharray:"3 3",stroke:"#334155"}),a.jsx(br,{dataKey:"date",tickFormatter:p,stroke:"#94a3b8",style:{fontSize:"12px"}}),a.jsx(vr,{stroke:"#94a3b8",style:{fontSize:"12px"}}),a.jsx(ar,{contentStyle:{backgroundColor:"#1e293b",border:"1px solid #334155",borderRadius:"8px",color:"#fff"},labelFormatter:p}),a.jsx(xa,{type:"monotone",dataKey:"value",stroke:"#3b82f6",strokeWidth:2,dot:{fill:"#3b82f6",r:4},activeDot:{r:6},name:"Hosts"})]})}):a.jsx("div",{className:"flex items-center justify-center h-64 text-slate-400",children:a.jsx("p",{children:"No data available"})})]}),a.jsxs(fe,{className:"p-6",children:[a.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Scan Frequency"}),v.length>0?a.jsx(sr,{width:"100%",height:300,children:a.jsxs(ga,{data:v,children:[a.jsx(yr,{strokeDasharray:"3 3",stroke:"#334155"}),a.jsx(br,{dataKey:"date",tickFormatter:p,stroke:"#94a3b8",style:{fontSize:"12px"}}),a.jsx(vr,{stroke:"#94a3b8",style:{fontSize:"12px"}}),a.jsx(ar,{contentStyle:{backgroundColor:"#1e293b",border:"1px solid #334155",borderRadius:"8px",color:"#fff"},labelFormatter:p}),a.jsx(xa,{type:"monotone",dataKey:"value",stroke:"#8b5cf6",strokeWidth:2,dot:{fill:"#8b5cf6",r:4},activeDot:{r:6},name:"Scans"})]})}):a.jsx("div",{className:"flex items-center justify-center h-64 text-slate-400",children:a.jsx("p",{children:"No data available"})})]}),a.jsxs(fe,{className:"p-6",children:[a.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Vulnerability Trends by Severity"}),f.length>0?a.jsx(sr,{width:"100%",height:300,children:a.jsxs(Xd,{data:f,children:[a.jsx(yr,{strokeDasharray:"3 3",stroke:"#334155"}),a.jsx(br,{dataKey:"date",tickFormatter:p,stroke:"#94a3b8",style:{fontSize:"12px"}}),a.jsx(vr,{stroke:"#94a3b8",style:{fontSize:"12px"}}),a.jsx(ar,{contentStyle:{backgroundColor:"#1e293b",border:"1px solid #334155",borderRadius:"8px",color:"#fff"},labelFormatter:p}),a.jsx(Hl,{verticalAlign:"bottom",height:36,iconType:"circle",wrapperStyle:{fontSize:"12px",color:"#cbd5e1"}}),a.jsx(Mn,{type:"monotone",dataKey:"critical",stackId:"1",stroke:"#ef4444",fill:"#ef4444",fillOpacity:.6,name:"Critical"}),a.jsx(Mn,{type:"monotone",dataKey:"high",stackId:"1",stroke:"#f97316",fill:"#f97316",fillOpacity:.6,name:"High"}),a.jsx(Mn,{type:"monotone",dataKey:"medium",stackId:"1",stroke:"#eab308",fill:"#eab308",fillOpacity:.6,name:"Medium"}),a.jsx(Mn,{type:"monotone",dataKey:"low",stackId:"1",stroke:"#3b82f6",fill:"#3b82f6",fillOpacity:.6,name:"Low"})]})}):a.jsx("div",{className:"flex items-center justify-center h-64 text-slate-400",children:a.jsx("p",{children:"No data available"})})]}),a.jsxs(fe,{className:"p-6",children:[a.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Top Services Discovered"}),x.length>0?a.jsx(sr,{width:"100%",height:300,children:a.jsxs(Ul,{data:x,layout:"vertical",children:[a.jsx(yr,{strokeDasharray:"3 3",stroke:"#334155"}),a.jsx(br,{type:"number",stroke:"#94a3b8",style:{fontSize:"12px"}}),a.jsx(vr,{dataKey:"service",type:"category",stroke:"#94a3b8",style:{fontSize:"12px"},width:100}),a.jsx(ar,{contentStyle:{backgroundColor:"#1e293b",border:"1px solid #334155",borderRadius:"8px",color:"#fff"}}),a.jsx(ql,{dataKey:"count",fill:"#06b6d4",radius:[0,4,4,0],name:"Count"})]})}):a.jsx("div",{className:"flex items-center justify-center h-64 text-slate-400",children:a.jsx("p",{children:"No data available"})})]})]})]}):null};var da={exports:{}},Jr={},dn={exports:{}},y_=dn.exports,Go;function pi(){return Go||(Go=1,(function(e,r){(function(n,s){s(r)})(y_,(function(n){function s(J){return function(te,ne,ee,he,Ce,Te,D){return J(te,ne,D)}}function i(J){return function(te,ne,ee,he){if(!te||!ne||typeof te!="object"||typeof ne!="object")return J(te,ne,ee,he);var Ce=he.get(te),Te=he.get(ne);if(Ce&&Te)return Ce===ne&&Te===te;he.set(te,ne),he.set(ne,te);var D=J(te,ne,ee,he);return he.delete(te),he.delete(ne),D}}function o(J,W){var te={};for(var ne in J)te[ne]=J[ne];for(var ne in W)te[ne]=W[ne];return te}function l(J){return J.constructor===Object||J.constructor==null}function c(J){return typeof J.then=="function"}function u(J,W){return J===W||J!==J&&W!==W}var d="[object Arguments]",f="[object Boolean]",h="[object Date]",x="[object RegExp]",w="[object Map]",v="[object Number]",j="[object Object]",b="[object Set]",p="[object String]",m=Object.prototype.toString;function _(J){var W=J.areArraysEqual,te=J.areDatesEqual,ne=J.areMapsEqual,ee=J.areObjectsEqual,he=J.areRegExpsEqual,Ce=J.areSetsEqual,Te=J.createIsNestedEqual,D=Te(L);function L(F,V,re){if(F===V)return!0;if(!F||!V||typeof F!="object"||typeof V!="object")return F!==F&&V!==V;if(l(F)&&l(V))return ee(F,V,D,re);var ae=Array.isArray(F),ie=Array.isArray(V);if(ae||ie)return ae===ie&&W(F,V,D,re);var ce=m.call(F);return ce!==m.call(V)?!1:ce===h?te(F,V,D,re):ce===x?he(F,V,D,re):ce===w?ne(F,V,D,re):ce===b?Ce(F,V,D,re):ce===j||ce===d?c(F)||c(V)?!1:ee(F,V,D,re):ce===f||ce===v||ce===p?u(F.valueOf(),V.valueOf()):!1}return L}function g(J,W,te,ne){var ee=J.length;if(W.length!==ee)return!1;for(;ee-- >0;)if(!te(J[ee],W[ee],ee,ee,J,W,ne))return!1;return!0}var y=i(g);function S(J,W){return u(J.valueOf(),W.valueOf())}function N(J,W,te,ne){var ee=J.size===W.size;if(!ee)return!1;if(!J.size)return!0;var he={},Ce=0;return J.forEach(function(Te,D){if(ee){var L=!1,F=0;W.forEach(function(V,re){!L&&!he[F]&&(L=te(D,re,Ce,F,J,W,ne)&&te(Te,V,D,re,J,W,ne))&&(he[F]=!0),F++}),Ce++,ee=L}}),ee}var k=i(N),C="_owner",E=Object.prototype.hasOwnProperty;function O(J,W,te,ne){var ee=Object.keys(J),he=ee.length;if(Object.keys(W).length!==he)return!1;for(var Ce;he-- >0;){if(Ce=ee[he],Ce===C){var Te=!!J.$$typeof,D=!!W.$$typeof;if((Te||D)&&Te!==D)return!1}if(!E.call(W,Ce)||!te(J[Ce],W[Ce],Ce,Ce,J,W,ne))return!1}return!0}var A=i(O);function M(J,W){return J.source===W.source&&J.flags===W.flags}function T(J,W,te,ne){var ee=J.size===W.size;if(!ee)return!1;if(!J.size)return!0;var he={};return J.forEach(function(Ce,Te){if(ee){var D=!1,L=0;W.forEach(function(F,V){!D&&!he[L]&&(D=te(Ce,F,Te,V,J,W,ne))&&(he[L]=!0),L++}),ee=D}}),ee}var H=i(T),z=Object.freeze({areArraysEqual:g,areDatesEqual:S,areMapsEqual:N,areObjectsEqual:O,areRegExpsEqual:M,areSetsEqual:T,createIsNestedEqual:s}),B=Object.freeze({areArraysEqual:y,areDatesEqual:S,areMapsEqual:k,areObjectsEqual:A,areRegExpsEqual:M,areSetsEqual:H,createIsNestedEqual:s}),Y=_(z);function U(J,W){return Y(J,W,void 0)}var G=_(o(z,{createIsNestedEqual:function(){return u}}));function Z(J,W){return G(J,W,void 0)}var X=_(B);function oe(J,W){return X(J,W,new WeakMap)}var le=_(o(B,{createIsNestedEqual:function(){return u}}));function me(J,W){return le(J,W,new WeakMap)}function de(J){return _(o(z,J(z)))}function ge(J){var W=_(o(B,J(B)));return(function(te,ne,ee){return ee===void 0&&(ee=new WeakMap),W(te,ne,ee)})}n.circularDeepEqual=oe,n.circularShallowEqual=me,n.createCustomCircularEqual=ge,n.createCustomEqual=de,n.deepEqual=U,n.sameValueZeroEqual=u,n.shallowEqual=Z,Object.defineProperty(n,"__esModule",{value:!0})}))})(dn,dn.exports)),dn.exports}var Yn={exports:{}},Yo;function Ys(){if(Yo)return Yn.exports;Yo=1;function e(n){var s,i,o="";if(typeof n=="string"||typeof n=="number")o+=n;else if(typeof n=="object")if(Array.isArray(n)){var l=n.length;for(s=0;s<l;s++)n[s]&&(i=e(n[s]))&&(o&&(o+=" "),o+=i)}else for(i in n)n[i]&&(o&&(o+=" "),o+=i);return o}function r(){for(var n,s,i=0,o="",l=arguments.length;i<l;i++)(n=arguments[i])&&(s=e(n))&&(o&&(o+=" "),o+=s);return o}return Yn.exports=r,Yn.exports.clsx=r,Yn.exports}var xe={},ha,Xo;function b_(){return Xo||(Xo=1,ha=function(r,n,s){return r===n?!0:r.className===n.className&&s(r.style,n.style)&&r.width===n.width&&r.autoSize===n.autoSize&&r.cols===n.cols&&r.draggableCancel===n.draggableCancel&&r.draggableHandle===n.draggableHandle&&s(r.verticalCompact,n.verticalCompact)&&s(r.compactType,n.compactType)&&s(r.layout,n.layout)&&s(r.margin,n.margin)&&s(r.containerPadding,n.containerPadding)&&r.rowHeight===n.rowHeight&&r.maxRows===n.maxRows&&r.isBounded===n.isBounded&&r.isDraggable===n.isDraggable&&r.isResizable===n.isResizable&&r.allowOverlap===n.allowOverlap&&r.preventCollision===n.preventCollision&&r.useCSSTransforms===n.useCSSTransforms&&r.transformScale===n.transformScale&&r.isDroppable===n.isDroppable&&s(r.resizeHandles,n.resizeHandles)&&s(r.resizeHandle,n.resizeHandle)&&r.onLayoutChange===n.onLayoutChange&&r.onDragStart===n.onDragStart&&r.onDrag===n.onDrag&&r.onDragStop===n.onDragStop&&r.onResizeStart===n.onResizeStart&&r.onResize===n.onResize&&r.onResizeStop===n.onResizeStop&&r.onDrop===n.onDrop&&s(r.droppingItem,n.droppingItem)&&s(r.innerRef,n.innerRef)}),ha}var Ko;function Dr(){if(Ko)return xe;Ko=1,Object.defineProperty(xe,"__esModule",{value:!0}),xe.bottom=u,xe.childrenEqual=w,xe.cloneLayout=d,xe.cloneLayoutItem=x,xe.collides=j,xe.compact=b,xe.compactItem=_,xe.compactType=he,xe.correctBounds=g,xe.fastPositionEqual=v,xe.fastRGLPropsEqual=void 0,xe.getAllCollisions=N,xe.getFirstCollision=S,xe.getLayoutItem=y,xe.getStatics=k,xe.modifyLayout=f,xe.moveElement=C,xe.moveElementAwayFromCollision=E,xe.noop=void 0,xe.perc=O,xe.resizeItemInDirection=me,xe.setTopLeft=ge,xe.setTransform=de,xe.sortLayoutItems=J,xe.sortLayoutItemsByColRow=te,xe.sortLayoutItemsByRowCol=W,xe.synchronizeLayoutWithChildren=ne,xe.validateLayout=ee,xe.withLayoutItem=h;var e=pi(),r=n(ut());function n(D){return D&&D.__esModule?D:{default:D}}function s(D,L){var F=Object.keys(D);if(Object.getOwnPropertySymbols){var V=Object.getOwnPropertySymbols(D);L&&(V=V.filter(function(re){return Object.getOwnPropertyDescriptor(D,re).enumerable})),F.push.apply(F,V)}return F}function i(D){for(var L=1;L<arguments.length;L++){var F=arguments[L]!=null?arguments[L]:{};L%2?s(Object(F),!0).forEach(function(V){o(D,V,F[V])}):Object.getOwnPropertyDescriptors?Object.defineProperties(D,Object.getOwnPropertyDescriptors(F)):s(Object(F)).forEach(function(V){Object.defineProperty(D,V,Object.getOwnPropertyDescriptor(F,V))})}return D}function o(D,L,F){return(L=l(L))in D?Object.defineProperty(D,L,{value:F,enumerable:!0,configurable:!0,writable:!0}):D[L]=F,D}function l(D){var L=c(D,"string");return typeof L=="symbol"?L:L+""}function c(D,L){if(typeof D!="object"||!D)return D;var F=D[Symbol.toPrimitive];if(F!==void 0){var V=F.call(D,L);if(typeof V!="object")return V;throw new TypeError("@@toPrimitive must return a primitive value.")}return(L==="string"?String:Number)(D)}function u(D){let L=0,F;for(let V=0,re=D.length;V<re;V++)F=D[V].y+D[V].h,F>L&&(L=F);return L}function d(D){const L=Array(D.length);for(let F=0,V=D.length;F<V;F++)L[F]=x(D[F]);return L}function f(D,L){const F=Array(D.length);for(let V=0,re=D.length;V<re;V++)L.i===D[V].i?F[V]=L:F[V]=D[V];return F}function h(D,L,F){let V=y(D,L);return V?(V=F(x(V)),D=f(D,V),[D,V]):[D,null]}function x(D){return{w:D.w,h:D.h,x:D.x,y:D.y,i:D.i,minW:D.minW,maxW:D.maxW,minH:D.minH,maxH:D.maxH,moved:!!D.moved,static:!!D.static,isDraggable:D.isDraggable,isResizable:D.isResizable,resizeHandles:D.resizeHandles,isBounded:D.isBounded}}function w(D,L){return(0,e.deepEqual)(r.default.Children.map(D,F=>F==null?void 0:F.key),r.default.Children.map(L,F=>F==null?void 0:F.key))&&(0,e.deepEqual)(r.default.Children.map(D,F=>F==null?void 0:F.props["data-grid"]),r.default.Children.map(L,F=>F==null?void 0:F.props["data-grid"]))}xe.fastRGLPropsEqual=b_();function v(D,L){return D.left===L.left&&D.top===L.top&&D.width===L.width&&D.height===L.height}function j(D,L){return!(D.i===L.i||D.x+D.w<=L.x||D.x>=L.x+L.w||D.y+D.h<=L.y||D.y>=L.y+L.h)}function b(D,L,F,V){const re=k(D);let ae=u(re);const ie=J(D,L),ce=Array(D.length);for(let Ne=0,Ae=ie.length;Ne<Ae;Ne++){let Ue=x(ie[Ne]);Ue.static||(Ue=_(re,Ue,L,F,ie,V,ae),ae=Math.max(ae,Ue.y+Ue.h),re.push(Ue)),ce[D.indexOf(ie[Ne])]=Ue,Ue.moved=!1}return ce}const p={x:"w",y:"h"};function m(D,L,F,V){const re=p[V];L[V]+=1;const ae=D.map(ie=>ie.i).indexOf(L.i);for(let ie=ae+1;ie<D.length;ie++){const ce=D[ie];if(!ce.static){if(ce.y>L.y+L.h)break;j(L,ce)&&m(D,ce,F+L[re],V)}}L[V]=F}function _(D,L,F,V,re,ae,ie){const ce=F==="vertical",Ne=F==="horizontal";if(ce)for(typeof ie=="number"?L.y=Math.min(ie,L.y):L.y=Math.min(u(D),L.y);L.y>0&&!S(D,L);)L.y--;else if(Ne)for(;L.x>0&&!S(D,L);)L.x--;let Ae;for(;(Ae=S(D,L))&&!(F===null&&ae);)if(Ne?m(re,L,Ae.x+Ae.w,"x"):m(re,L,Ae.y+Ae.h,"y"),Ne&&L.x+L.w>V)for(L.x=V-L.w,L.y++;L.x>0&&!S(D,L);)L.x--;return L.y=Math.max(L.y,0),L.x=Math.max(L.x,0),L}function g(D,L){const F=k(D);for(let V=0,re=D.length;V<re;V++){const ae=D[V];if(ae.x+ae.w>L.cols&&(ae.x=L.cols-ae.w),ae.x<0&&(ae.x=0,ae.w=L.cols),!ae.static)F.push(ae);else for(;S(F,ae);)ae.y++}return D}function y(D,L){for(let F=0,V=D.length;F<V;F++)if(D[F].i===L)return D[F]}function S(D,L){for(let F=0,V=D.length;F<V;F++)if(j(D[F],L))return D[F]}function N(D,L){return D.filter(F=>j(F,L))}function k(D){return D.filter(L=>L.static)}function C(D,L,F,V,re,ae,ie,ce,Ne){if(L.static&&L.isDraggable!==!0||L.y===V&&L.x===F)return D;"Moving element ".concat(L.i," to [").concat(String(F),",").concat(String(V),"] from [").concat(L.x,",").concat(L.y,"]");const Ae=L.x,Ue=L.y;typeof F=="number"&&(L.x=F),typeof V=="number"&&(L.y=V),L.moved=!0;let qe=J(D,ie);(ie==="vertical"&&typeof V=="number"?Ue>=V:ie==="horizontal"&&typeof F=="number"?Ae>=F:!1)&&(qe=qe.reverse());const St=N(qe,L),fr=St.length>0;if(fr&&Ne)return d(D);if(fr&&ae)return"Collision prevented on ".concat(L.i,", reverting."),L.x=Ae,L.y=Ue,L.moved=!1,D;for(let Mr=0,Jt=St.length;Mr<Jt;Mr++){const kt=St[Mr];"Resolving collision between ".concat(L.i," at [").concat(L.x,",").concat(L.y,"] and ").concat(kt.i," at [").concat(kt.x,",").concat(kt.y,"]"),!kt.moved&&(kt.static?D=E(D,kt,L,re,ie):D=E(D,L,kt,re,ie))}return D}function E(D,L,F,V,re,ae){const ie=re==="horizontal",ce=re==="vertical",Ne=L.static;if(V){V=!1;const qe={x:ie?Math.max(L.x-F.w,0):F.x,y:ce?Math.max(L.y-F.h,0):F.y,w:F.w,h:F.h,i:"-1"},ft=S(D,qe),St=ft&&ft.y+ft.h>L.y,fr=ft&&L.x+L.w>ft.x;if(ft){if(St&&ce)return C(D,F,void 0,F.y+1,V,Ne,re);if(St&&re==null)return L.y=F.y,F.y=F.y+F.h,D;if(fr&&ie)return C(D,L,F.x,void 0,V,Ne,re)}else return"Doing reverse collision on ".concat(F.i," up to [").concat(qe.x,",").concat(qe.y,"]."),C(D,F,ie?qe.x:void 0,ce?qe.y:void 0,V,Ne,re)}const Ae=ie?F.x+1:void 0,Ue=ce?F.y+1:void 0;return Ae==null&&Ue==null?D:C(D,F,ie?F.x+1:void 0,ce?F.y+1:void 0,V,Ne,re)}function O(D){return D*100+"%"}const A=(D,L,F,V)=>D+F>V?L:F,M=(D,L,F)=>D<0?L:F,T=D=>Math.max(0,D),H=D=>Math.max(0,D),z=(D,L,F)=>{let{left:V,height:re,width:ae}=L;const ie=D.top-(re-D.height);return{left:V,width:ae,height:M(ie,D.height,re),top:H(ie)}},B=(D,L,F)=>{let{top:V,left:re,height:ae,width:ie}=L;return{top:V,height:ae,width:A(D.left,D.width,ie,F),left:T(re)}},Y=(D,L,F)=>{let{top:V,height:re,width:ae}=L;const ie=D.left-(ae-D.width);return{height:re,width:ie<0?D.width:A(D.left,D.width,ae,F),top:H(V),left:T(ie)}},U=(D,L,F)=>{let{top:V,left:re,height:ae,width:ie}=L;return{width:ie,left:re,height:M(V,D.height,ae),top:H(V)}},le={n:z,ne:function(){return z(arguments.length<=0?void 0:arguments[0],B(...arguments))},e:B,se:function(){return U(arguments.length<=0?void 0:arguments[0],B(...arguments))},s:U,sw:function(){return U(arguments.length<=0?void 0:arguments[0],Y(...arguments))},w:Y,nw:function(){return z(arguments.length<=0?void 0:arguments[0],Y(...arguments))}};function me(D,L,F,V){const re=le[D];return re?re(L,i(i({},L),F),V):F}function de(D){let{top:L,left:F,width:V,height:re}=D;const ae="translate(".concat(F,"px,").concat(L,"px)");return{transform:ae,WebkitTransform:ae,MozTransform:ae,msTransform:ae,OTransform:ae,width:"".concat(V,"px"),height:"".concat(re,"px"),position:"absolute"}}function ge(D){let{top:L,left:F,width:V,height:re}=D;return{top:"".concat(L,"px"),left:"".concat(F,"px"),width:"".concat(V,"px"),height:"".concat(re,"px"),position:"absolute"}}function J(D,L){return L==="horizontal"?te(D):L==="vertical"?W(D):D}function W(D){return D.slice(0).sort(function(L,F){return L.y>F.y||L.y===F.y&&L.x>F.x?1:L.y===F.y&&L.x===F.x?0:-1})}function te(D){return D.slice(0).sort(function(L,F){return L.x>F.x||L.x===F.x&&L.y>F.y?1:-1})}function ne(D,L,F,V,re){D=D||[];const ae=[];r.default.Children.forEach(L,ce=>{if((ce==null?void 0:ce.key)==null)return;const Ne=y(D,String(ce.key)),Ae=ce.props["data-grid"];Ne&&Ae==null?ae.push(x(Ne)):Ae?ae.push(x(i(i({},Ae),{},{i:ce.key}))):ae.push(x({w:1,h:1,x:0,y:u(ae),i:String(ce.key)}))});const ie=g(ae,{cols:F});return re?ie:b(ie,V,F)}function ee(D){let L=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"Layout";const F=["x","y","w","h"];if(!Array.isArray(D))throw new Error(L+" must be an array!");for(let V=0,re=D.length;V<re;V++){const ae=D[V];for(let ie=0;ie<F.length;ie++){const ce=F[ie],Ne=ae[ce];if(typeof Ne!="number"||Number.isNaN(Ne))throw new Error("ReactGridLayout: ".concat(L,"[").concat(V,"].").concat(ce," must be a number! Received: ").concat(Ne," (").concat(typeof Ne,")"))}if(typeof ae.i<"u"&&typeof ae.i!="string")throw new Error("ReactGridLayout: ".concat(L,"[").concat(V,"].i must be a string! Received: ").concat(ae.i," (").concat(typeof ae.i,")"))}}function he(D){const{verticalCompact:L,compactType:F}=D||{};return L===!1?null:F}function Ce(){}const Te=()=>{};return xe.noop=Te,xe}var Tt={},Jo;function gi(){if(Jo)return Tt;Jo=1,Object.defineProperty(Tt,"__esModule",{value:!0}),Tt.calcGridColWidth=e,Tt.calcGridItemPosition=n,Tt.calcGridItemWHPx=r,Tt.calcWH=i,Tt.calcXY=s,Tt.clamp=o;function e(l){const{margin:c,containerPadding:u,containerWidth:d,cols:f}=l;return(d-c[0]*(f-1)-u[0]*2)/f}function r(l,c,u){return Number.isFinite(l)?Math.round(c*l+Math.max(0,l-1)*u):l}function n(l,c,u,d,f,h){const{margin:x,containerPadding:w,rowHeight:v}=l,j=e(l),b={};return h&&h.resizing?(b.width=Math.round(h.resizing.width),b.height=Math.round(h.resizing.height)):(b.width=r(d,j,x[0]),b.height=r(f,v,x[1])),h&&h.dragging?(b.top=Math.round(h.dragging.top),b.left=Math.round(h.dragging.left)):h&&h.resizing&&typeof h.resizing.top=="number"&&typeof h.resizing.left=="number"?(b.top=Math.round(h.resizing.top),b.left=Math.round(h.resizing.left)):(b.top=Math.round((v+x[1])*u+w[1]),b.left=Math.round((j+x[0])*c+w[0])),b}function s(l,c,u,d,f){const{margin:h,containerPadding:x,cols:w,rowHeight:v,maxRows:j}=l,b=e(l);let p=Math.round((u-x[0])/(b+h[0])),m=Math.round((c-x[1])/(v+h[1]));return p=o(p,0,w-d),m=o(m,0,j-f),{x:p,y:m}}function i(l,c,u,d,f,h){const{margin:x,maxRows:w,cols:v,rowHeight:j}=l,b=e(l);let p=Math.round((c+x[0])/(b+x[0])),m=Math.round((u+x[1])/(j+x[1])),_=o(p,0,v-d),g=o(m,0,w-f);return["sw","w","nw"].indexOf(h)!==-1&&(_=o(p,0,v)),["nw","n","ne"].indexOf(h)!==-1&&(g=o(m,0,w)),{w:_,h:g}}function o(l,c,u){return Math.max(Math.min(l,u),c)}return Tt}var Zr={},Qr={exports:{}},fa={},$e={},Bt={},Zo;function Xs(){if(Zo)return Bt;Zo=1,Object.defineProperty(Bt,"__esModule",{value:!0}),Bt.dontSetMe=i,Bt.findInArray=e,Bt.int=s,Bt.isFunction=r,Bt.isNum=n;function e(o,l){for(let c=0,u=o.length;c<u;c++)if(l.apply(l,[o[c],c,o]))return o[c]}function r(o){return typeof o=="function"||Object.prototype.toString.call(o)==="[object Function]"}function n(o){return typeof o=="number"&&!isNaN(o)}function s(o){return parseInt(o,10)}function i(o,l,c){if(o[l])return new Error(`Invalid prop ${l} passed to ${c} - do not set this, set it on the child.`)}return Bt}var Vt={},Qo;function v_(){if(Qo)return Vt;Qo=1,Object.defineProperty(Vt,"__esModule",{value:!0}),Vt.browserPrefixToKey=n,Vt.browserPrefixToStyle=s,Vt.default=void 0,Vt.getPrefix=r;const e=["Moz","Webkit","O","ms"];function r(){var c,u;let o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"transform";if(typeof window>"u")return"";const l=(u=(c=window.document)==null?void 0:c.documentElement)==null?void 0:u.style;if(!l||o in l)return"";for(let d=0;d<e.length;d++)if(n(o,e[d])in l)return e[d];return""}function n(o,l){return l?`${l}${i(o)}`:o}function s(o,l){return l?`-${l.toLowerCase()}-${o}`:o}function i(o){let l="",c=!0;for(let u=0;u<o.length;u++)c?(l+=o[u].toUpperCase(),c=!1):o[u]==="-"?c=!0:l+=o[u];return l}return Vt.default=r(),Vt}var el;function xi(){if(el)return $e;el=1,Object.defineProperty($e,"__esModule",{value:!0}),$e.addClassName=y,$e.addEvent=l,$e.addUserSelectStyles=m,$e.createCSSTransform=w,$e.createSVGTransform=v,$e.getTouch=b,$e.getTouchIdentifier=p,$e.getTranslation=j,$e.innerHeight=f,$e.innerWidth=h,$e.matchesSelector=i,$e.matchesSelectorAndParentsTo=o,$e.offsetXYFromParent=x,$e.outerHeight=u,$e.outerWidth=d,$e.removeClassName=S,$e.removeEvent=c,$e.scheduleRemoveUserSelectStyles=_;var e=Xs(),r=n(v_());function n(N,k){if(typeof WeakMap=="function")var C=new WeakMap,E=new WeakMap;return(n=function(O,A){if(!A&&O&&O.__esModule)return O;var M,T,H={__proto__:null,default:O};if(O===null||typeof O!="object"&&typeof O!="function")return H;if(M=A?E:C){if(M.has(O))return M.get(O);M.set(O,H)}for(const z in O)z!=="default"&&{}.hasOwnProperty.call(O,z)&&((T=(M=Object.defineProperty)&&Object.getOwnPropertyDescriptor(O,z))&&(T.get||T.set)?M(H,z,T):H[z]=O[z]);return H})(N,k)}let s="";function i(N,k){return s||(s=(0,e.findInArray)(["matches","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector"],function(C){return(0,e.isFunction)(N[C])})),(0,e.isFunction)(N[s])?N[s](k):!1}function o(N,k,C){let E=N;do{if(i(E,k))return!0;if(E===C)return!1;E=E.parentNode}while(E);return!1}function l(N,k,C,E){if(!N)return;const O={capture:!0,...E};N.addEventListener?N.addEventListener(k,C,O):N.attachEvent?N.attachEvent("on"+k,C):N["on"+k]=C}function c(N,k,C,E){if(!N)return;const O={capture:!0,...E};N.removeEventListener?N.removeEventListener(k,C,O):N.detachEvent?N.detachEvent("on"+k,C):N["on"+k]=null}function u(N){let k=N.clientHeight;const C=N.ownerDocument.defaultView.getComputedStyle(N);return k+=(0,e.int)(C.borderTopWidth),k+=(0,e.int)(C.borderBottomWidth),k}function d(N){let k=N.clientWidth;const C=N.ownerDocument.defaultView.getComputedStyle(N);return k+=(0,e.int)(C.borderLeftWidth),k+=(0,e.int)(C.borderRightWidth),k}function f(N){let k=N.clientHeight;const C=N.ownerDocument.defaultView.getComputedStyle(N);return k-=(0,e.int)(C.paddingTop),k-=(0,e.int)(C.paddingBottom),k}function h(N){let k=N.clientWidth;const C=N.ownerDocument.defaultView.getComputedStyle(N);return k-=(0,e.int)(C.paddingLeft),k-=(0,e.int)(C.paddingRight),k}function x(N,k,C){const O=k===k.ownerDocument.body?{left:0,top:0}:k.getBoundingClientRect(),A=(N.clientX+k.scrollLeft-O.left)/C,M=(N.clientY+k.scrollTop-O.top)/C;return{x:A,y:M}}function w(N,k){const C=j(N,k,"px");return{[(0,r.browserPrefixToKey)("transform",r.default)]:C}}function v(N,k){return j(N,k,"")}function j(N,k,C){let{x:E,y:O}=N,A=`translate(${E}${C},${O}${C})`;if(k){const M=`${typeof k.x=="string"?k.x:k.x+C}`,T=`${typeof k.y=="string"?k.y:k.y+C}`;A=`translate(${M}, ${T})`+A}return A}function b(N,k){return N.targetTouches&&(0,e.findInArray)(N.targetTouches,C=>k===C.identifier)||N.changedTouches&&(0,e.findInArray)(N.changedTouches,C=>k===C.identifier)}function p(N){if(N.targetTouches&&N.targetTouches[0])return N.targetTouches[0].identifier;if(N.changedTouches&&N.changedTouches[0])return N.changedTouches[0].identifier}function m(N){if(!N)return;let k=N.getElementById("react-draggable-style-el");k||(k=N.createElement("style"),k.type="text/css",k.id="react-draggable-style-el",k.innerHTML=`.react-draggable-transparent-selection *::-moz-selection {all: inherit;}
`,k.innerHTML+=`.react-draggable-transparent-selection *::selection {all: inherit;}
`,N.getElementsByTagName("head")[0].appendChild(k)),N.body&&y(N.body,"react-draggable-transparent-selection")}function _(N){window.requestAnimationFrame?window.requestAnimationFrame(()=>{g(N)}):g(N)}function g(N){if(N)try{if(N.body&&S(N.body,"react-draggable-transparent-selection"),N.selection)N.selection.empty();else{const k=(N.defaultView||window).getSelection();k&&k.type!=="Caret"&&k.removeAllRanges()}}catch{}}function y(N,k){N.classList?N.classList.add(k):N.className.match(new RegExp(`(?:^|\\s)${k}(?!\\S)`))||(N.className+=` ${k}`)}function S(N,k){N.classList?N.classList.remove(k):N.className=N.className.replace(new RegExp(`(?:^|\\s)${k}(?!\\S)`,"g"),"")}return $e}var pt={},tl;function Pu(){if(tl)return pt;tl=1,Object.defineProperty(pt,"__esModule",{value:!0}),pt.canDragX=i,pt.canDragY=o,pt.createCoreData=c,pt.createDraggableData=u,pt.getBoundPosition=n,pt.getControlPosition=l,pt.snapToGrid=s;var e=Xs(),r=xi();function n(h,x,w){if(!h.props.bounds)return[x,w];let{bounds:v}=h.props;v=typeof v=="string"?v:d(v);const j=f(h);if(typeof v=="string"){const{ownerDocument:b}=j,p=b.defaultView;let m;if(v==="parent"?m=j.parentNode:m=j.getRootNode().querySelector(v),!(m instanceof p.HTMLElement))throw new Error('Bounds selector "'+v+'" could not find an element.');const _=m,g=p.getComputedStyle(j),y=p.getComputedStyle(_);v={left:-j.offsetLeft+(0,e.int)(y.paddingLeft)+(0,e.int)(g.marginLeft),top:-j.offsetTop+(0,e.int)(y.paddingTop)+(0,e.int)(g.marginTop),right:(0,r.innerWidth)(_)-(0,r.outerWidth)(j)-j.offsetLeft+(0,e.int)(y.paddingRight)-(0,e.int)(g.marginRight),bottom:(0,r.innerHeight)(_)-(0,r.outerHeight)(j)-j.offsetTop+(0,e.int)(y.paddingBottom)-(0,e.int)(g.marginBottom)}}return(0,e.isNum)(v.right)&&(x=Math.min(x,v.right)),(0,e.isNum)(v.bottom)&&(w=Math.min(w,v.bottom)),(0,e.isNum)(v.left)&&(x=Math.max(x,v.left)),(0,e.isNum)(v.top)&&(w=Math.max(w,v.top)),[x,w]}function s(h,x,w){const v=Math.round(x/h[0])*h[0],j=Math.round(w/h[1])*h[1];return[v,j]}function i(h){return h.props.axis==="both"||h.props.axis==="x"}function o(h){return h.props.axis==="both"||h.props.axis==="y"}function l(h,x,w){const v=typeof x=="number"?(0,r.getTouch)(h,x):null;if(typeof x=="number"&&!v)return null;const j=f(w),b=w.props.offsetParent||j.offsetParent||j.ownerDocument.body;return(0,r.offsetXYFromParent)(v||h,b,w.props.scale)}function c(h,x,w){const v=!(0,e.isNum)(h.lastX),j=f(h);return v?{node:j,deltaX:0,deltaY:0,lastX:x,lastY:w,x,y:w}:{node:j,deltaX:x-h.lastX,deltaY:w-h.lastY,lastX:h.lastX,lastY:h.lastY,x,y:w}}function u(h,x){const w=h.props.scale;return{node:x.node,x:h.state.x+x.deltaX/w,y:h.state.y+x.deltaY/w,deltaX:x.deltaX/w,deltaY:x.deltaY/w,lastX:h.state.x,lastY:h.state.y}}function d(h){return{left:h.left,top:h.top,right:h.right,bottom:h.bottom}}function f(h){const x=h.findDOMNode();if(!x)throw new Error("<DraggableCore>: Unmounted during event!");return x}return pt}var en={},Xn={},rl;function Eu(){if(rl)return Xn;rl=1,Object.defineProperty(Xn,"__esModule",{value:!0}),Xn.default=e;function e(){}return Xn}var nl;function w_(){if(nl)return en;nl=1,Object.defineProperty(en,"__esModule",{value:!0}),en.default=void 0;var e=u(ut()),r=c(Kt()),n=c(Cs()),s=xi(),i=Pu(),o=Xs(),l=c(Eu());function c(j){return j&&j.__esModule?j:{default:j}}function u(j,b){if(typeof WeakMap=="function")var p=new WeakMap,m=new WeakMap;return(u=function(_,g){if(!g&&_&&_.__esModule)return _;var y,S,N={__proto__:null,default:_};if(_===null||typeof _!="object"&&typeof _!="function")return N;if(y=g?m:p){if(y.has(_))return y.get(_);y.set(_,N)}for(const k in _)k!=="default"&&{}.hasOwnProperty.call(_,k)&&((S=(y=Object.defineProperty)&&Object.getOwnPropertyDescriptor(_,k))&&(S.get||S.set)?y(N,k,S):N[k]=_[k]);return N})(j,b)}function d(j,b,p){return(b=f(b))in j?Object.defineProperty(j,b,{value:p,enumerable:!0,configurable:!0,writable:!0}):j[b]=p,j}function f(j){var b=h(j,"string");return typeof b=="symbol"?b:b+""}function h(j,b){if(typeof j!="object"||!j)return j;var p=j[Symbol.toPrimitive];if(p!==void 0){var m=p.call(j,b);if(typeof m!="object")return m;throw new TypeError("@@toPrimitive must return a primitive value.")}return(b==="string"?String:Number)(j)}const x={touch:{start:"touchstart",move:"touchmove",stop:"touchend"},mouse:{start:"mousedown",move:"mousemove",stop:"mouseup"}};let w=x.mouse,v=class extends e.Component{constructor(){super(...arguments),d(this,"dragging",!1),d(this,"lastX",NaN),d(this,"lastY",NaN),d(this,"touchIdentifier",null),d(this,"mounted",!1),d(this,"handleDragStart",b=>{if(this.props.onMouseDown(b),!this.props.allowAnyClick&&typeof b.button=="number"&&b.button!==0)return!1;const p=this.findDOMNode();if(!p||!p.ownerDocument||!p.ownerDocument.body)throw new Error("<DraggableCore> not mounted on DragStart!");const{ownerDocument:m}=p;if(this.props.disabled||!(b.target instanceof m.defaultView.Node)||this.props.handle&&!(0,s.matchesSelectorAndParentsTo)(b.target,this.props.handle,p)||this.props.cancel&&(0,s.matchesSelectorAndParentsTo)(b.target,this.props.cancel,p))return;b.type==="touchstart"&&!this.props.allowMobileScroll&&b.preventDefault();const _=(0,s.getTouchIdentifier)(b);this.touchIdentifier=_;const g=(0,i.getControlPosition)(b,_,this);if(g==null)return;const{x:y,y:S}=g,N=(0,i.createCoreData)(this,y,S);(0,l.default)("DraggableCore: handleDragStart: %j",N),(0,l.default)("calling",this.props.onStart),!(this.props.onStart(b,N)===!1||this.mounted===!1)&&(this.props.enableUserSelectHack&&(0,s.addUserSelectStyles)(m),this.dragging=!0,this.lastX=y,this.lastY=S,(0,s.addEvent)(m,w.move,this.handleDrag),(0,s.addEvent)(m,w.stop,this.handleDragStop))}),d(this,"handleDrag",b=>{const p=(0,i.getControlPosition)(b,this.touchIdentifier,this);if(p==null)return;let{x:m,y:_}=p;if(Array.isArray(this.props.grid)){let S=m-this.lastX,N=_-this.lastY;if([S,N]=(0,i.snapToGrid)(this.props.grid,S,N),!S&&!N)return;m=this.lastX+S,_=this.lastY+N}const g=(0,i.createCoreData)(this,m,_);if((0,l.default)("DraggableCore: handleDrag: %j",g),this.props.onDrag(b,g)===!1||this.mounted===!1){try{this.handleDragStop(new MouseEvent("mouseup"))}catch{const N=document.createEvent("MouseEvents");N.initMouseEvent("mouseup",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),this.handleDragStop(N)}return}this.lastX=m,this.lastY=_}),d(this,"handleDragStop",b=>{if(!this.dragging)return;const p=(0,i.getControlPosition)(b,this.touchIdentifier,this);if(p==null)return;let{x:m,y:_}=p;if(Array.isArray(this.props.grid)){let N=m-this.lastX||0,k=_-this.lastY||0;[N,k]=(0,i.snapToGrid)(this.props.grid,N,k),m=this.lastX+N,_=this.lastY+k}const g=(0,i.createCoreData)(this,m,_);if(this.props.onStop(b,g)===!1||this.mounted===!1)return!1;const S=this.findDOMNode();S&&this.props.enableUserSelectHack&&(0,s.scheduleRemoveUserSelectStyles)(S.ownerDocument),(0,l.default)("DraggableCore: handleDragStop: %j",g),this.dragging=!1,this.lastX=NaN,this.lastY=NaN,S&&((0,l.default)("DraggableCore: Removing handlers"),(0,s.removeEvent)(S.ownerDocument,w.move,this.handleDrag),(0,s.removeEvent)(S.ownerDocument,w.stop,this.handleDragStop))}),d(this,"onMouseDown",b=>(w=x.mouse,this.handleDragStart(b))),d(this,"onMouseUp",b=>(w=x.mouse,this.handleDragStop(b))),d(this,"onTouchStart",b=>(w=x.touch,this.handleDragStart(b))),d(this,"onTouchEnd",b=>(w=x.touch,this.handleDragStop(b)))}componentDidMount(){this.mounted=!0;const b=this.findDOMNode();b&&(0,s.addEvent)(b,x.touch.start,this.onTouchStart,{passive:!1})}componentWillUnmount(){this.mounted=!1;const b=this.findDOMNode();if(b){const{ownerDocument:p}=b;(0,s.removeEvent)(p,x.mouse.move,this.handleDrag),(0,s.removeEvent)(p,x.touch.move,this.handleDrag),(0,s.removeEvent)(p,x.mouse.stop,this.handleDragStop),(0,s.removeEvent)(p,x.touch.stop,this.handleDragStop),(0,s.removeEvent)(b,x.touch.start,this.onTouchStart,{passive:!1}),this.props.enableUserSelectHack&&(0,s.scheduleRemoveUserSelectStyles)(p)}}findDOMNode(){var b,p,m;return(b=this.props)!=null&&b.nodeRef?(m=(p=this.props)==null?void 0:p.nodeRef)==null?void 0:m.current:n.default.findDOMNode(this)}render(){return e.cloneElement(e.Children.only(this.props.children),{onMouseDown:this.onMouseDown,onMouseUp:this.onMouseUp,onTouchEnd:this.onTouchEnd})}};return en.default=v,d(v,"displayName","DraggableCore"),d(v,"propTypes",{allowAnyClick:r.default.bool,allowMobileScroll:r.default.bool,children:r.default.node.isRequired,disabled:r.default.bool,enableUserSelectHack:r.default.bool,offsetParent:function(j,b){if(j[b]&&j[b].nodeType!==1)throw new Error("Draggable's offsetParent must be a DOM Node.")},grid:r.default.arrayOf(r.default.number),handle:r.default.string,cancel:r.default.string,nodeRef:r.default.object,onStart:r.default.func,onDrag:r.default.func,onStop:r.default.func,onMouseDown:r.default.func,scale:r.default.number,className:o.dontSetMe,style:o.dontSetMe,transform:o.dontSetMe}),d(v,"defaultProps",{allowAnyClick:!1,allowMobileScroll:!1,disabled:!1,enableUserSelectHack:!0,onStart:function(){},onDrag:function(){},onStop:function(){},onMouseDown:function(){},scale:1}),en}var sl;function __(){return sl||(sl=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"DraggableCore",{enumerable:!0,get:function(){return u.default}}),e.default=void 0;var r=h(ut()),n=f(Kt()),s=f(Cs()),i=Ys(),o=xi(),l=Pu(),c=Xs(),u=f(w_()),d=f(Eu());function f(p){return p&&p.__esModule?p:{default:p}}function h(p,m){if(typeof WeakMap=="function")var _=new WeakMap,g=new WeakMap;return(h=function(y,S){if(!S&&y&&y.__esModule)return y;var N,k,C={__proto__:null,default:y};if(y===null||typeof y!="object"&&typeof y!="function")return C;if(N=S?g:_){if(N.has(y))return N.get(y);N.set(y,C)}for(const E in y)E!=="default"&&{}.hasOwnProperty.call(y,E)&&((k=(N=Object.defineProperty)&&Object.getOwnPropertyDescriptor(y,E))&&(k.get||k.set)?N(C,E,k):C[E]=y[E]);return C})(p,m)}function x(){return x=Object.assign?Object.assign.bind():function(p){for(var m=1;m<arguments.length;m++){var _=arguments[m];for(var g in _)({}).hasOwnProperty.call(_,g)&&(p[g]=_[g])}return p},x.apply(null,arguments)}function w(p,m,_){return(m=v(m))in p?Object.defineProperty(p,m,{value:_,enumerable:!0,configurable:!0,writable:!0}):p[m]=_,p}function v(p){var m=j(p,"string");return typeof m=="symbol"?m:m+""}function j(p,m){if(typeof p!="object"||!p)return p;var _=p[Symbol.toPrimitive];if(_!==void 0){var g=_.call(p,m);if(typeof g!="object")return g;throw new TypeError("@@toPrimitive must return a primitive value.")}return(m==="string"?String:Number)(p)}class b extends r.Component{static getDerivedStateFromProps(m,_){let{position:g}=m,{prevPropsPosition:y}=_;return g&&(!y||g.x!==y.x||g.y!==y.y)?((0,d.default)("Draggable: getDerivedStateFromProps %j",{position:g,prevPropsPosition:y}),{x:g.x,y:g.y,prevPropsPosition:{...g}}):null}constructor(m){super(m),w(this,"onDragStart",(_,g)=>{if((0,d.default)("Draggable: onDragStart: %j",g),this.props.onStart(_,(0,l.createDraggableData)(this,g))===!1)return!1;this.setState({dragging:!0,dragged:!0})}),w(this,"onDrag",(_,g)=>{if(!this.state.dragging)return!1;(0,d.default)("Draggable: onDrag: %j",g);const y=(0,l.createDraggableData)(this,g),S={x:y.x,y:y.y,slackX:0,slackY:0};if(this.props.bounds){const{x:k,y:C}=S;S.x+=this.state.slackX,S.y+=this.state.slackY;const[E,O]=(0,l.getBoundPosition)(this,S.x,S.y);S.x=E,S.y=O,S.slackX=this.state.slackX+(k-S.x),S.slackY=this.state.slackY+(C-S.y),y.x=S.x,y.y=S.y,y.deltaX=S.x-this.state.x,y.deltaY=S.y-this.state.y}if(this.props.onDrag(_,y)===!1)return!1;this.setState(S)}),w(this,"onDragStop",(_,g)=>{if(!this.state.dragging||this.props.onStop(_,(0,l.createDraggableData)(this,g))===!1)return!1;(0,d.default)("Draggable: onDragStop: %j",g);const S={dragging:!1,slackX:0,slackY:0};if(!!this.props.position){const{x:k,y:C}=this.props.position;S.x=k,S.y=C}this.setState(S)}),this.state={dragging:!1,dragged:!1,x:m.position?m.position.x:m.defaultPosition.x,y:m.position?m.position.y:m.defaultPosition.y,prevPropsPosition:{...m.position},slackX:0,slackY:0,isElementSVG:!1},m.position&&!(m.onDrag||m.onStop)&&console.warn("A `position` was applied to this <Draggable>, without drag handlers. This will make this component effectively undraggable. Please attach `onDrag` or `onStop` handlers so you can adjust the `position` of this element.")}componentDidMount(){typeof window.SVGElement<"u"&&this.findDOMNode()instanceof window.SVGElement&&this.setState({isElementSVG:!0})}componentWillUnmount(){this.state.dragging&&this.setState({dragging:!1})}findDOMNode(){var m,_;return((_=(m=this.props)==null?void 0:m.nodeRef)==null?void 0:_.current)??s.default.findDOMNode(this)}render(){const{axis:m,bounds:_,children:g,defaultPosition:y,defaultClassName:S,defaultClassNameDragging:N,defaultClassNameDragged:k,position:C,positionOffset:E,scale:O,...A}=this.props;let M={},T=null;const z=!!!C||this.state.dragging,B=C||y,Y={x:(0,l.canDragX)(this)&&z?this.state.x:B.x,y:(0,l.canDragY)(this)&&z?this.state.y:B.y};this.state.isElementSVG?T=(0,o.createSVGTransform)(Y,E):M=(0,o.createCSSTransform)(Y,E);const U=(0,i.clsx)(g.props.className||"",S,{[N]:this.state.dragging,[k]:this.state.dragged});return r.createElement(u.default,x({},A,{onStart:this.onDragStart,onDrag:this.onDrag,onStop:this.onDragStop}),r.cloneElement(r.Children.only(g),{className:U,style:{...g.props.style,...M},transform:T}))}}e.default=b,w(b,"displayName","Draggable"),w(b,"propTypes",{...u.default.propTypes,axis:n.default.oneOf(["both","x","y","none"]),bounds:n.default.oneOfType([n.default.shape({left:n.default.number,right:n.default.number,top:n.default.number,bottom:n.default.number}),n.default.string,n.default.oneOf([!1])]),defaultClassName:n.default.string,defaultClassNameDragging:n.default.string,defaultClassNameDragged:n.default.string,defaultPosition:n.default.shape({x:n.default.number,y:n.default.number}),positionOffset:n.default.shape({x:n.default.oneOfType([n.default.number,n.default.string]),y:n.default.oneOfType([n.default.number,n.default.string])}),position:n.default.shape({x:n.default.number,y:n.default.number}),className:c.dontSetMe,style:c.dontSetMe,transform:c.dontSetMe}),w(b,"defaultProps",{...u.default.defaultProps,axis:"both",bounds:!1,defaultClassName:"react-draggable",defaultClassNameDragging:"react-draggable-dragging",defaultClassNameDragged:"react-draggable-dragged",defaultPosition:{x:0,y:0},scale:1})})(fa)),fa}var al;function yi(){if(al)return Qr.exports;al=1;const{default:e,DraggableCore:r}=__();return Qr.exports=e,Qr.exports.default=e,Qr.exports.DraggableCore=r,Qr.exports}var tn={exports:{}},rn={},Kn={},il;function j_(){if(il)return Kn;il=1,Kn.__esModule=!0,Kn.cloneElement=c;var e=r(ut());function r(u){return u&&u.__esModule?u:{default:u}}function n(u,d){var f=Object.keys(u);if(Object.getOwnPropertySymbols){var h=Object.getOwnPropertySymbols(u);d&&(h=h.filter(function(x){return Object.getOwnPropertyDescriptor(u,x).enumerable})),f.push.apply(f,h)}return f}function s(u){for(var d=1;d<arguments.length;d++){var f=arguments[d]!=null?arguments[d]:{};d%2?n(Object(f),!0).forEach(function(h){i(u,h,f[h])}):Object.getOwnPropertyDescriptors?Object.defineProperties(u,Object.getOwnPropertyDescriptors(f)):n(Object(f)).forEach(function(h){Object.defineProperty(u,h,Object.getOwnPropertyDescriptor(f,h))})}return u}function i(u,d,f){return d=o(d),d in u?Object.defineProperty(u,d,{value:f,enumerable:!0,configurable:!0,writable:!0}):u[d]=f,u}function o(u){var d=l(u,"string");return typeof d=="symbol"?d:String(d)}function l(u,d){if(typeof u!="object"||u===null)return u;var f=u[Symbol.toPrimitive];if(f!==void 0){var h=f.call(u,d);if(typeof h!="object")return h;throw new TypeError("@@toPrimitive must return a primitive value.")}return(d==="string"?String:Number)(u)}function c(u,d){return d.style&&u.props.style&&(d.style=s(s({},u.props.style),d.style)),d.className&&u.props.className&&(d.className=u.props.className+" "+d.className),e.default.cloneElement(u,d)}return Kn}var nn={},ol;function Ou(){if(ol)return nn;ol=1,nn.__esModule=!0,nn.resizableProps=void 0;var e=r(Kt());yi();function r(s){return s&&s.__esModule?s:{default:s}}var n={axis:e.default.oneOf(["both","x","y","none"]),className:e.default.string,children:e.default.element.isRequired,draggableOpts:e.default.shape({allowAnyClick:e.default.bool,cancel:e.default.string,children:e.default.node,disabled:e.default.bool,enableUserSelectHack:e.default.bool,offsetParent:e.default.node,grid:e.default.arrayOf(e.default.number),handle:e.default.string,nodeRef:e.default.object,onStart:e.default.func,onDrag:e.default.func,onStop:e.default.func,onMouseDown:e.default.func,scale:e.default.number}),height:function(){for(var i=arguments.length,o=new Array(i),l=0;l<i;l++)o[l]=arguments[l];var c=o[0];if(c.axis==="both"||c.axis==="y"){var u;return(u=e.default.number).isRequired.apply(u,o)}return e.default.number.apply(e.default,o)},handle:e.default.oneOfType([e.default.node,e.default.func]),handleSize:e.default.arrayOf(e.default.number),lockAspectRatio:e.default.bool,maxConstraints:e.default.arrayOf(e.default.number),minConstraints:e.default.arrayOf(e.default.number),onResizeStop:e.default.func,onResizeStart:e.default.func,onResize:e.default.func,resizeHandles:e.default.arrayOf(e.default.oneOf(["s","w","e","n","sw","nw","se","ne"])),transformScale:e.default.number,width:function(){for(var i=arguments.length,o=new Array(i),l=0;l<i;l++)o[l]=arguments[l];var c=o[0];if(c.axis==="both"||c.axis==="x"){var u;return(u=e.default.number).isRequired.apply(u,o)}return e.default.number.apply(e.default,o)}};return nn.resizableProps=n,nn}var ll;function Ru(){if(ll)return rn;ll=1,rn.__esModule=!0,rn.default=void 0;var e=l(ut()),r=yi(),n=j_(),s=Ou(),i=["children","className","draggableOpts","width","height","handle","handleSize","lockAspectRatio","axis","minConstraints","maxConstraints","onResize","onResizeStop","onResizeStart","resizeHandles","transformScale"];function o(p){if(typeof WeakMap!="function")return null;var m=new WeakMap,_=new WeakMap;return(o=function(y){return y?_:m})(p)}function l(p,m){if(p&&p.__esModule)return p;if(p===null||typeof p!="object"&&typeof p!="function")return{default:p};var _=o(m);if(_&&_.has(p))return _.get(p);var g={},y=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var S in p)if(S!=="default"&&Object.prototype.hasOwnProperty.call(p,S)){var N=y?Object.getOwnPropertyDescriptor(p,S):null;N&&(N.get||N.set)?Object.defineProperty(g,S,N):g[S]=p[S]}return g.default=p,_&&_.set(p,g),g}function c(){return c=Object.assign?Object.assign.bind():function(p){for(var m=1;m<arguments.length;m++){var _=arguments[m];for(var g in _)Object.prototype.hasOwnProperty.call(_,g)&&(p[g]=_[g])}return p},c.apply(this,arguments)}function u(p,m){if(p==null)return{};var _={},g=Object.keys(p),y,S;for(S=0;S<g.length;S++)y=g[S],!(m.indexOf(y)>=0)&&(_[y]=p[y]);return _}function d(p,m){var _=Object.keys(p);if(Object.getOwnPropertySymbols){var g=Object.getOwnPropertySymbols(p);m&&(g=g.filter(function(y){return Object.getOwnPropertyDescriptor(p,y).enumerable})),_.push.apply(_,g)}return _}function f(p){for(var m=1;m<arguments.length;m++){var _=arguments[m]!=null?arguments[m]:{};m%2?d(Object(_),!0).forEach(function(g){h(p,g,_[g])}):Object.getOwnPropertyDescriptors?Object.defineProperties(p,Object.getOwnPropertyDescriptors(_)):d(Object(_)).forEach(function(g){Object.defineProperty(p,g,Object.getOwnPropertyDescriptor(_,g))})}return p}function h(p,m,_){return m=x(m),m in p?Object.defineProperty(p,m,{value:_,enumerable:!0,configurable:!0,writable:!0}):p[m]=_,p}function x(p){var m=w(p,"string");return typeof m=="symbol"?m:String(m)}function w(p,m){if(typeof p!="object"||p===null)return p;var _=p[Symbol.toPrimitive];if(_!==void 0){var g=_.call(p,m);if(typeof g!="object")return g;throw new TypeError("@@toPrimitive must return a primitive value.")}return(m==="string"?String:Number)(p)}function v(p,m){p.prototype=Object.create(m.prototype),p.prototype.constructor=p,j(p,m)}function j(p,m){return j=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(g,y){return g.__proto__=y,g},j(p,m)}var b=(function(p){v(m,p);function m(){for(var g,y=arguments.length,S=new Array(y),N=0;N<y;N++)S[N]=arguments[N];return g=p.call.apply(p,[this].concat(S))||this,g.handleRefs={},g.lastHandleRect=null,g.slack=null,g}var _=m.prototype;return _.componentWillUnmount=function(){this.resetData()},_.resetData=function(){this.lastHandleRect=this.slack=null},_.runConstraints=function(y,S){var N=this.props,k=N.minConstraints,C=N.maxConstraints,E=N.lockAspectRatio;if(!k&&!C&&!E)return[y,S];if(E){var O=this.props.width/this.props.height,A=y-this.props.width,M=S-this.props.height;Math.abs(A)>Math.abs(M*O)?S=y/O:y=S*O}var T=y,H=S,z=this.slack||[0,0],B=z[0],Y=z[1];return y+=B,S+=Y,k&&(y=Math.max(k[0],y),S=Math.max(k[1],S)),C&&(y=Math.min(C[0],y),S=Math.min(C[1],S)),this.slack=[B+(T-y),Y+(H-S)],[y,S]},_.resizeHandler=function(y,S){var N=this;return function(k,C){var E=C.node,O=C.deltaX,A=C.deltaY;y==="onResizeStart"&&N.resetData();var M=(N.props.axis==="both"||N.props.axis==="x")&&S!=="n"&&S!=="s",T=(N.props.axis==="both"||N.props.axis==="y")&&S!=="e"&&S!=="w";if(!(!M&&!T)){var H=S[0],z=S[S.length-1],B=E.getBoundingClientRect();if(N.lastHandleRect!=null){if(z==="w"){var Y=B.left-N.lastHandleRect.left;O+=Y}if(H==="n"){var U=B.top-N.lastHandleRect.top;A+=U}}N.lastHandleRect=B,z==="w"&&(O=-O),H==="n"&&(A=-A);var G=N.props.width+(M?O/N.props.transformScale:0),Z=N.props.height+(T?A/N.props.transformScale:0),X=N.runConstraints(G,Z);G=X[0],Z=X[1];var oe=G!==N.props.width||Z!==N.props.height,le=typeof N.props[y]=="function"?N.props[y]:null,me=y==="onResize"&&!oe;le&&!me&&(k.persist==null||k.persist(),le(k,{node:E,size:{width:G,height:Z},handle:S})),y==="onResizeStop"&&N.resetData()}}},_.renderResizeHandle=function(y,S){var N=this.props.handle;if(!N)return e.createElement("span",{className:"react-resizable-handle react-resizable-handle-"+y,ref:S});if(typeof N=="function")return N(y,S);var k=typeof N.type=="string",C=f({ref:S},k?{}:{handleAxis:y});return e.cloneElement(N,C)},_.render=function(){var y=this,S=this.props,N=S.children,k=S.className,C=S.draggableOpts;S.width,S.height,S.handle,S.handleSize,S.lockAspectRatio,S.axis,S.minConstraints,S.maxConstraints,S.onResize,S.onResizeStop,S.onResizeStart;var E=S.resizeHandles;S.transformScale;var O=u(S,i);return(0,n.cloneElement)(N,f(f({},O),{},{className:(k?k+" ":"")+"react-resizable",children:[].concat(N.props.children,E.map(function(A){var M,T=(M=y.handleRefs[A])!=null?M:y.handleRefs[A]=e.createRef();return e.createElement(r.DraggableCore,c({},C,{nodeRef:T,key:"resizableHandle-"+A,onStop:y.resizeHandler("onResizeStop",A),onStart:y.resizeHandler("onResizeStart",A),onDrag:y.resizeHandler("onResize",A)}),y.renderResizeHandle(A,T))}))}))},m})(e.Component);return rn.default=b,b.propTypes=s.resizableProps,b.defaultProps={axis:"both",handleSize:[20,20],lockAspectRatio:!1,minConstraints:[20,20],maxConstraints:[1/0,1/0],resizeHandles:["se"],transformScale:1},rn}var sn={},cl;function N_(){if(cl)return sn;cl=1,sn.__esModule=!0,sn.default=void 0;var e=c(ut()),r=o(Kt()),n=o(Ru()),s=Ou(),i=["handle","handleSize","onResize","onResizeStart","onResizeStop","draggableOpts","minConstraints","maxConstraints","lockAspectRatio","axis","width","height","resizeHandles","style","transformScale"];function o(m){return m&&m.__esModule?m:{default:m}}function l(m){if(typeof WeakMap!="function")return null;var _=new WeakMap,g=new WeakMap;return(l=function(S){return S?g:_})(m)}function c(m,_){if(m&&m.__esModule)return m;if(m===null||typeof m!="object"&&typeof m!="function")return{default:m};var g=l(_);if(g&&g.has(m))return g.get(m);var y={},S=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var N in m)if(N!=="default"&&Object.prototype.hasOwnProperty.call(m,N)){var k=S?Object.getOwnPropertyDescriptor(m,N):null;k&&(k.get||k.set)?Object.defineProperty(y,N,k):y[N]=m[N]}return y.default=m,g&&g.set(m,y),y}function u(){return u=Object.assign?Object.assign.bind():function(m){for(var _=1;_<arguments.length;_++){var g=arguments[_];for(var y in g)Object.prototype.hasOwnProperty.call(g,y)&&(m[y]=g[y])}return m},u.apply(this,arguments)}function d(m,_){var g=Object.keys(m);if(Object.getOwnPropertySymbols){var y=Object.getOwnPropertySymbols(m);_&&(y=y.filter(function(S){return Object.getOwnPropertyDescriptor(m,S).enumerable})),g.push.apply(g,y)}return g}function f(m){for(var _=1;_<arguments.length;_++){var g=arguments[_]!=null?arguments[_]:{};_%2?d(Object(g),!0).forEach(function(y){h(m,y,g[y])}):Object.getOwnPropertyDescriptors?Object.defineProperties(m,Object.getOwnPropertyDescriptors(g)):d(Object(g)).forEach(function(y){Object.defineProperty(m,y,Object.getOwnPropertyDescriptor(g,y))})}return m}function h(m,_,g){return _=x(_),_ in m?Object.defineProperty(m,_,{value:g,enumerable:!0,configurable:!0,writable:!0}):m[_]=g,m}function x(m){var _=w(m,"string");return typeof _=="symbol"?_:String(_)}function w(m,_){if(typeof m!="object"||m===null)return m;var g=m[Symbol.toPrimitive];if(g!==void 0){var y=g.call(m,_);if(typeof y!="object")return y;throw new TypeError("@@toPrimitive must return a primitive value.")}return(_==="string"?String:Number)(m)}function v(m,_){if(m==null)return{};var g={},y=Object.keys(m),S,N;for(N=0;N<y.length;N++)S=y[N],!(_.indexOf(S)>=0)&&(g[S]=m[S]);return g}function j(m,_){m.prototype=Object.create(_.prototype),m.prototype.constructor=m,b(m,_)}function b(m,_){return b=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(y,S){return y.__proto__=S,y},b(m,_)}var p=(function(m){j(_,m);function _(){for(var y,S=arguments.length,N=new Array(S),k=0;k<S;k++)N[k]=arguments[k];return y=m.call.apply(m,[this].concat(N))||this,y.state={width:y.props.width,height:y.props.height,propsWidth:y.props.width,propsHeight:y.props.height},y.onResize=function(C,E){var O=E.size;y.props.onResize?(C.persist==null||C.persist(),y.setState(O,function(){return y.props.onResize&&y.props.onResize(C,E)})):y.setState(O)},y}_.getDerivedStateFromProps=function(S,N){return N.propsWidth!==S.width||N.propsHeight!==S.height?{width:S.width,height:S.height,propsWidth:S.width,propsHeight:S.height}:null};var g=_.prototype;return g.render=function(){var S=this.props,N=S.handle,k=S.handleSize;S.onResize;var C=S.onResizeStart,E=S.onResizeStop,O=S.draggableOpts,A=S.minConstraints,M=S.maxConstraints,T=S.lockAspectRatio,H=S.axis;S.width,S.height;var z=S.resizeHandles,B=S.style,Y=S.transformScale,U=v(S,i);return e.createElement(n.default,{axis:H,draggableOpts:O,handle:N,handleSize:k,height:this.state.height,lockAspectRatio:T,maxConstraints:M,minConstraints:A,onResizeStart:C,onResize:this.onResize,onResizeStop:E,resizeHandles:z,transformScale:Y,width:this.state.width},e.createElement("div",u({},U,{style:f(f({},B),{},{width:this.state.width+"px",height:this.state.height+"px"})})))},_})(e.Component);return sn.default=p,p.propTypes=f(f({},s.resizableProps),{},{children:r.default.element}),sn}var ul;function S_(){return ul||(ul=1,tn.exports=function(){throw new Error("Don't instantiate Resizable directly! Use require('react-resizable').Resizable")},tn.exports.Resizable=Ru().default,tn.exports.ResizableBox=N_().default),tn.exports}var At={},dl;function Tu(){if(dl)return At;dl=1,Object.defineProperty(At,"__esModule",{value:!0}),At.resizeHandleType=At.resizeHandleAxesType=At.default=void 0;var e=n(Kt()),r=n(ut());function n(o){return o&&o.__esModule?o:{default:o}}const s=At.resizeHandleAxesType=e.default.arrayOf(e.default.oneOf(["s","w","e","n","sw","nw","se","ne"])),i=At.resizeHandleType=e.default.oneOfType([e.default.node,e.default.func]);return At.default={className:e.default.string,style:e.default.object,width:e.default.number,autoSize:e.default.bool,cols:e.default.number,draggableCancel:e.default.string,draggableHandle:e.default.string,verticalCompact:function(o){o.verticalCompact},compactType:e.default.oneOf(["vertical","horizontal"]),layout:function(o){var l=o.layout;l!==void 0&&Dr().validateLayout(l,"layout")},margin:e.default.arrayOf(e.default.number),containerPadding:e.default.arrayOf(e.default.number),rowHeight:e.default.number,maxRows:e.default.number,isBounded:e.default.bool,isDraggable:e.default.bool,isResizable:e.default.bool,allowOverlap:e.default.bool,preventCollision:e.default.bool,useCSSTransforms:e.default.bool,transformScale:e.default.number,isDroppable:e.default.bool,resizeHandles:s,resizeHandle:i,onLayoutChange:e.default.func,onDragStart:e.default.func,onDrag:e.default.func,onDragStop:e.default.func,onResizeStart:e.default.func,onResize:e.default.func,onResizeStop:e.default.func,onDrop:e.default.func,droppingItem:e.default.shape({i:e.default.string.isRequired,w:e.default.number.isRequired,h:e.default.number.isRequired}),children:function(o,l){const c=o[l],u={};r.default.Children.forEach(c,function(d){if((d==null?void 0:d.key)!=null){if(u[d.key])throw new Error('Duplicate child key "'+d.key+'" found! This will cause problems in ReactGridLayout.');u[d.key]=!0}})},innerRef:e.default.any},At}var hl;function k_(){if(hl)return Zr;hl=1,Object.defineProperty(Zr,"__esModule",{value:!0}),Zr.default=void 0;var e=d(ut()),r=Cs(),n=d(Kt()),s=yi(),i=S_(),o=Dr(),l=gi(),c=Tu(),u=d(Ys());function d(b){return b&&b.__esModule?b:{default:b}}function f(b,p){var m=Object.keys(b);if(Object.getOwnPropertySymbols){var _=Object.getOwnPropertySymbols(b);p&&(_=_.filter(function(g){return Object.getOwnPropertyDescriptor(b,g).enumerable})),m.push.apply(m,_)}return m}function h(b){for(var p=1;p<arguments.length;p++){var m=arguments[p]!=null?arguments[p]:{};p%2?f(Object(m),!0).forEach(function(_){x(b,_,m[_])}):Object.getOwnPropertyDescriptors?Object.defineProperties(b,Object.getOwnPropertyDescriptors(m)):f(Object(m)).forEach(function(_){Object.defineProperty(b,_,Object.getOwnPropertyDescriptor(m,_))})}return b}function x(b,p,m){return(p=w(p))in b?Object.defineProperty(b,p,{value:m,enumerable:!0,configurable:!0,writable:!0}):b[p]=m,b}function w(b){var p=v(b,"string");return typeof p=="symbol"?p:p+""}function v(b,p){if(typeof b!="object"||!b)return b;var m=b[Symbol.toPrimitive];if(m!==void 0){var _=m.call(b,p);if(typeof _!="object")return _;throw new TypeError("@@toPrimitive must return a primitive value.")}return(p==="string"?String:Number)(b)}let j=class extends e.default.Component{constructor(){super(...arguments),x(this,"state",{resizing:null,dragging:null,className:""}),x(this,"elementRef",e.default.createRef()),x(this,"onDragStart",(p,m)=>{let{node:_}=m;const{onDragStart:g,transformScale:y}=this.props;if(!g)return;const S={top:0,left:0},{offsetParent:N}=_;if(!N)return;const k=N.getBoundingClientRect(),C=_.getBoundingClientRect(),E=C.left/y,O=k.left/y,A=C.top/y,M=k.top/y;S.left=E-O+N.scrollLeft,S.top=A-M+N.scrollTop,this.setState({dragging:S});const{x:T,y:H}=(0,l.calcXY)(this.getPositionParams(),S.top,S.left,this.props.w,this.props.h);return g.call(this,this.props.i,T,H,{e:p,node:_,newPosition:S})}),x(this,"onDrag",(p,m,_)=>{let{node:g,deltaX:y,deltaY:S}=m;const{onDrag:N}=this.props;if(!N)return;if(!this.state.dragging)throw new Error("onDrag called before onDragStart.");let k=this.state.dragging.top+S,C=this.state.dragging.left+y;const{isBounded:E,i:O,w:A,h:M,containerWidth:T}=this.props,H=this.getPositionParams();if(E){const{offsetParent:U}=g;if(U){const{margin:G,rowHeight:Z}=this.props,X=U.clientHeight-(0,l.calcGridItemWHPx)(M,Z,G[1]);k=(0,l.clamp)(k,0,X);const oe=(0,l.calcGridColWidth)(H),le=T-(0,l.calcGridItemWHPx)(A,oe,G[0]);C=(0,l.clamp)(C,0,le)}}const z={top:k,left:C};_?this.setState({dragging:z}):(0,r.flushSync)(()=>{this.setState({dragging:z})});const{x:B,y:Y}=(0,l.calcXY)(H,k,C,A,M);return N.call(this,O,B,Y,{e:p,node:g,newPosition:z})}),x(this,"onDragStop",(p,m)=>{let{node:_}=m;const{onDragStop:g}=this.props;if(!g)return;if(!this.state.dragging)throw new Error("onDragEnd called before onDragStart.");const{w:y,h:S,i:N}=this.props,{left:k,top:C}=this.state.dragging,E={top:C,left:k};this.setState({dragging:null});const{x:O,y:A}=(0,l.calcXY)(this.getPositionParams(),C,k,y,S);return g.call(this,N,O,A,{e:p,node:_,newPosition:E})}),x(this,"onResizeStop",(p,m,_)=>this.onResizeHandler(p,m,_,"onResizeStop")),x(this,"onResizeStart",(p,m,_)=>this.onResizeHandler(p,m,_,"onResizeStart")),x(this,"onResize",(p,m,_)=>this.onResizeHandler(p,m,_,"onResize"))}shouldComponentUpdate(p,m){if(this.props.children!==p.children||this.props.droppingPosition!==p.droppingPosition)return!0;const _=(0,l.calcGridItemPosition)(this.getPositionParams(this.props),this.props.x,this.props.y,this.props.w,this.props.h,this.state),g=(0,l.calcGridItemPosition)(this.getPositionParams(p),p.x,p.y,p.w,p.h,m);return!(0,o.fastPositionEqual)(_,g)||this.props.useCSSTransforms!==p.useCSSTransforms}componentDidMount(){this.moveDroppingItem({})}componentDidUpdate(p){this.moveDroppingItem(p)}moveDroppingItem(p){const{droppingPosition:m}=this.props;if(!m)return;const _=this.elementRef.current;if(!_)return;const g=p.droppingPosition||{left:0,top:0},{dragging:y}=this.state,S=y&&m.left!==g.left||m.top!==g.top;if(!y)this.onDragStart(m.e,{node:_,deltaX:m.left,deltaY:m.top});else if(S){const N=m.left-y.left,k=m.top-y.top;this.onDrag(m.e,{node:_,deltaX:N,deltaY:k},!0)}}getPositionParams(){let p=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.props;return{cols:p.cols,containerPadding:p.containerPadding,containerWidth:p.containerWidth,margin:p.margin,maxRows:p.maxRows,rowHeight:p.rowHeight}}createStyle(p){const{usePercentages:m,containerWidth:_,useCSSTransforms:g}=this.props;let y;return g?y=(0,o.setTransform)(p):(y=(0,o.setTopLeft)(p),m&&(y.left=(0,o.perc)(p.left/_),y.width=(0,o.perc)(p.width/_))),y}mixinDraggable(p,m){return e.default.createElement(s.DraggableCore,{disabled:!m,onStart:this.onDragStart,onDrag:this.onDrag,onStop:this.onDragStop,handle:this.props.handle,cancel:".react-resizable-handle"+(this.props.cancel?","+this.props.cancel:""),scale:this.props.transformScale,nodeRef:this.elementRef},p)}curryResizeHandler(p,m){return(_,g)=>m(_,g,p)}mixinResizable(p,m,_){const{cols:g,minW:y,minH:S,maxW:N,maxH:k,transformScale:C,resizeHandles:E,resizeHandle:O}=this.props,A=this.getPositionParams(),M=(0,l.calcGridItemPosition)(A,0,0,g,0).width,T=(0,l.calcGridItemPosition)(A,0,0,y,S),H=(0,l.calcGridItemPosition)(A,0,0,N,k),z=[T.width,T.height],B=[Math.min(H.width,M),Math.min(H.height,1/0)];return e.default.createElement(i.Resizable,{draggableOpts:{disabled:!_},className:_?void 0:"react-resizable-hide",width:m.width,height:m.height,minConstraints:z,maxConstraints:B,onResizeStop:this.curryResizeHandler(m,this.onResizeStop),onResizeStart:this.curryResizeHandler(m,this.onResizeStart),onResize:this.curryResizeHandler(m,this.onResize),transformScale:C,resizeHandles:E,handle:O},p)}onResizeHandler(p,m,_,g){let{node:y,size:S,handle:N}=m;const k=this.props[g];if(!k)return;const{x:C,y:E,i:O,maxH:A,minH:M,containerWidth:T}=this.props,{minW:H,maxW:z}=this.props;let B=S;y&&(B=(0,o.resizeItemInDirection)(N,_,S,T),(0,r.flushSync)(()=>{this.setState({resizing:g==="onResizeStop"?null:B})}));let{w:Y,h:U}=(0,l.calcWH)(this.getPositionParams(),B.width,B.height,C,E,N);Y=(0,l.clamp)(Y,Math.max(H,1),z),U=(0,l.clamp)(U,M,A),k.call(this,O,Y,U,{e:p,node:y,size:B,handle:N})}render(){const{x:p,y:m,w:_,h:g,isDraggable:y,isResizable:S,droppingPosition:N,useCSSTransforms:k}=this.props,C=(0,l.calcGridItemPosition)(this.getPositionParams(),p,m,_,g,this.state),E=e.default.Children.only(this.props.children);let O=e.default.cloneElement(E,{ref:this.elementRef,className:(0,u.default)("react-grid-item",E.props.className,this.props.className,{static:this.props.static,resizing:!!this.state.resizing,"react-draggable":y,"react-draggable-dragging":!!this.state.dragging,dropping:!!N,cssTransforms:k}),style:h(h(h({},this.props.style),E.props.style),this.createStyle(C))});return O=this.mixinResizable(O,C,S),O=this.mixinDraggable(O,y),O}};return Zr.default=j,x(j,"propTypes",{children:n.default.element,cols:n.default.number.isRequired,containerWidth:n.default.number.isRequired,rowHeight:n.default.number.isRequired,margin:n.default.array.isRequired,maxRows:n.default.number.isRequired,containerPadding:n.default.array.isRequired,x:n.default.number.isRequired,y:n.default.number.isRequired,w:n.default.number.isRequired,h:n.default.number.isRequired,minW:function(b,p){const m=b[p];if(typeof m!="number")return new Error("minWidth not Number");if(m>b.w||m>b.maxW)return new Error("minWidth larger than item width/maxWidth")},maxW:function(b,p){const m=b[p];if(typeof m!="number")return new Error("maxWidth not Number");if(m<b.w||m<b.minW)return new Error("maxWidth smaller than item width/minWidth")},minH:function(b,p){const m=b[p];if(typeof m!="number")return new Error("minHeight not Number");if(m>b.h||m>b.maxH)return new Error("minHeight larger than item height/maxHeight")},maxH:function(b,p){const m=b[p];if(typeof m!="number")return new Error("maxHeight not Number");if(m<b.h||m<b.minH)return new Error("maxHeight smaller than item height/minHeight")},i:n.default.string.isRequired,resizeHandles:c.resizeHandleAxesType,resizeHandle:c.resizeHandleType,onDragStop:n.default.func,onDragStart:n.default.func,onDrag:n.default.func,onResizeStop:n.default.func,onResizeStart:n.default.func,onResize:n.default.func,isDraggable:n.default.bool.isRequired,isResizable:n.default.bool.isRequired,isBounded:n.default.bool.isRequired,static:n.default.bool,useCSSTransforms:n.default.bool.isRequired,transformScale:n.default.number,className:n.default.string,handle:n.default.string,cancel:n.default.string,droppingPosition:n.default.shape({e:n.default.object.isRequired,left:n.default.number.isRequired,top:n.default.number.isRequired})}),x(j,"defaultProps",{className:"",cancel:"",handle:"",minH:1,minW:1,maxH:1/0,maxW:1/0,transformScale:1}),Zr}var fl;function Au(){if(fl)return Jr;fl=1,Object.defineProperty(Jr,"__esModule",{value:!0}),Jr.default=void 0;var e=u(ut()),r=pi(),n=c(Ys()),s=Dr(),i=gi(),o=c(k_()),l=c(Tu());function c(p){return p&&p.__esModule?p:{default:p}}function u(p,m){if(typeof WeakMap=="function")var _=new WeakMap,g=new WeakMap;return(u=function(y,S){if(!S&&y&&y.__esModule)return y;var N,k,C={__proto__:null,default:y};if(y===null||typeof y!="object"&&typeof y!="function")return C;if(N=S?g:_){if(N.has(y))return N.get(y);N.set(y,C)}for(const E in y)E!=="default"&&{}.hasOwnProperty.call(y,E)&&((k=(N=Object.defineProperty)&&Object.getOwnPropertyDescriptor(y,E))&&(k.get||k.set)?N(C,E,k):C[E]=y[E]);return C})(p,m)}function d(p,m){var _=Object.keys(p);if(Object.getOwnPropertySymbols){var g=Object.getOwnPropertySymbols(p);m&&(g=g.filter(function(y){return Object.getOwnPropertyDescriptor(p,y).enumerable})),_.push.apply(_,g)}return _}function f(p){for(var m=1;m<arguments.length;m++){var _=arguments[m]!=null?arguments[m]:{};m%2?d(Object(_),!0).forEach(function(g){h(p,g,_[g])}):Object.getOwnPropertyDescriptors?Object.defineProperties(p,Object.getOwnPropertyDescriptors(_)):d(Object(_)).forEach(function(g){Object.defineProperty(p,g,Object.getOwnPropertyDescriptor(_,g))})}return p}function h(p,m,_){return(m=x(m))in p?Object.defineProperty(p,m,{value:_,enumerable:!0,configurable:!0,writable:!0}):p[m]=_,p}function x(p){var m=w(p,"string");return typeof m=="symbol"?m:m+""}function w(p,m){if(typeof p!="object"||!p)return p;var _=p[Symbol.toPrimitive];if(_!==void 0){var g=_.call(p,m);if(typeof g!="object")return g;throw new TypeError("@@toPrimitive must return a primitive value.")}return(m==="string"?String:Number)(p)}const v="react-grid-layout";let j=!1;try{j=/firefox/i.test(navigator.userAgent)}catch{}let b=class extends e.Component{constructor(){super(...arguments),h(this,"state",{activeDrag:null,layout:(0,s.synchronizeLayoutWithChildren)(this.props.layout,this.props.children,this.props.cols,(0,s.compactType)(this.props),this.props.allowOverlap),mounted:!1,oldDragItem:null,oldLayout:null,oldResizeItem:null,resizing:!1,droppingDOMNode:null,children:[]}),h(this,"dragEnterCounter",0),h(this,"onDragStart",(m,_,g,y)=>{let{e:S,node:N}=y;const{layout:k}=this.state,C=(0,s.getLayoutItem)(k,m);if(!C)return;const E={w:C.w,h:C.h,x:C.x,y:C.y,placeholder:!0,i:m};return this.setState({oldDragItem:(0,s.cloneLayoutItem)(C),oldLayout:k,activeDrag:E}),this.props.onDragStart(k,C,C,null,S,N)}),h(this,"onDrag",(m,_,g,y)=>{let{e:S,node:N}=y;const{oldDragItem:k}=this.state;let{layout:C}=this.state;const{cols:E,allowOverlap:O,preventCollision:A}=this.props,M=(0,s.getLayoutItem)(C,m);if(!M)return;const T={w:M.w,h:M.h,x:M.x,y:M.y,placeholder:!0,i:m};C=(0,s.moveElement)(C,M,_,g,!0,A,(0,s.compactType)(this.props),E,O),this.props.onDrag(C,k,M,T,S,N),this.setState({layout:O?C:(0,s.compact)(C,(0,s.compactType)(this.props),E),activeDrag:T})}),h(this,"onDragStop",(m,_,g,y)=>{let{e:S,node:N}=y;if(!this.state.activeDrag)return;const{oldDragItem:k}=this.state;let{layout:C}=this.state;const{cols:E,preventCollision:O,allowOverlap:A}=this.props,M=(0,s.getLayoutItem)(C,m);if(!M)return;C=(0,s.moveElement)(C,M,_,g,!0,O,(0,s.compactType)(this.props),E,A);const H=A?C:(0,s.compact)(C,(0,s.compactType)(this.props),E);this.props.onDragStop(H,k,M,null,S,N);const{oldLayout:z}=this.state;this.setState({activeDrag:null,layout:H,oldDragItem:null,oldLayout:null}),this.onLayoutMaybeChanged(H,z)}),h(this,"onResizeStart",(m,_,g,y)=>{let{e:S,node:N}=y;const{layout:k}=this.state,C=(0,s.getLayoutItem)(k,m);C&&(this.setState({oldResizeItem:(0,s.cloneLayoutItem)(C),oldLayout:this.state.layout,resizing:!0}),this.props.onResizeStart(k,C,C,null,S,N))}),h(this,"onResize",(m,_,g,y)=>{let{e:S,node:N,size:k,handle:C}=y;const{oldResizeItem:E}=this.state,{layout:O}=this.state,{cols:A,preventCollision:M,allowOverlap:T}=this.props;let H=!1,z,B,Y;const[U,G]=(0,s.withLayoutItem)(O,m,X=>{let oe;return B=X.x,Y=X.y,["sw","w","nw","n","ne"].indexOf(C)!==-1&&(["sw","nw","w"].indexOf(C)!==-1&&(B=X.x+(X.w-_),_=X.x!==B&&B<0?X.w:_,B=B<0?0:B),["ne","n","nw"].indexOf(C)!==-1&&(Y=X.y+(X.h-g),g=X.y!==Y&&Y<0?X.h:g,Y=Y<0?0:Y),H=!0),M&&!T&&(oe=(0,s.getAllCollisions)(O,f(f({},X),{},{w:_,h:g,x:B,y:Y})).filter(me=>me.i!==X.i).length>0,oe&&(Y=X.y,g=X.h,B=X.x,_=X.w,H=!1)),X.w=_,X.h=g,X});if(!G)return;z=U,H&&(z=(0,s.moveElement)(U,G,B,Y,!0,this.props.preventCollision,(0,s.compactType)(this.props),A,T));const Z={w:G.w,h:G.h,x:G.x,y:G.y,static:!0,i:m};this.props.onResize(z,E,G,Z,S,N),this.setState({layout:T?z:(0,s.compact)(z,(0,s.compactType)(this.props),A),activeDrag:Z})}),h(this,"onResizeStop",(m,_,g,y)=>{let{e:S,node:N}=y;const{layout:k,oldResizeItem:C}=this.state,{cols:E,allowOverlap:O}=this.props,A=(0,s.getLayoutItem)(k,m),M=O?k:(0,s.compact)(k,(0,s.compactType)(this.props),E);this.props.onResizeStop(M,C,A,null,S,N);const{oldLayout:T}=this.state;this.setState({activeDrag:null,layout:M,oldResizeItem:null,oldLayout:null,resizing:!1}),this.onLayoutMaybeChanged(M,T)}),h(this,"onDragOver",m=>{var _;if(m.preventDefault(),m.stopPropagation(),j&&!((_=m.nativeEvent.target)!==null&&_!==void 0&&_.classList.contains(v)))return!1;const{droppingItem:g,onDropDragOver:y,margin:S,cols:N,rowHeight:k,maxRows:C,width:E,containerPadding:O,transformScale:A}=this.props,M=y==null?void 0:y(m);if(M===!1)return this.state.droppingDOMNode&&this.removeDroppingPlaceholder(),!1;const T=f(f({},g),M),{layout:H}=this.state,z=m.currentTarget.getBoundingClientRect(),B=m.clientX-z.left,Y=m.clientY-z.top,U={left:B/A,top:Y/A,e:m};if(this.state.droppingDOMNode){if(this.state.droppingPosition){const{left:G,top:Z}=this.state.droppingPosition;(G!=B||Z!=Y)&&this.setState({droppingPosition:U})}}else{const G={cols:N,margin:S,maxRows:C,rowHeight:k,containerWidth:E,containerPadding:O||S},Z=(0,i.calcXY)(G,Y,B,T.w,T.h);this.setState({droppingDOMNode:e.createElement("div",{key:T.i}),droppingPosition:U,layout:[...H,f(f({},T),{},{x:Z.x,y:Z.y,static:!1,isDraggable:!0})]})}}),h(this,"removeDroppingPlaceholder",()=>{const{droppingItem:m,cols:_}=this.props,{layout:g}=this.state,y=(0,s.compact)(g.filter(S=>S.i!==m.i),(0,s.compactType)(this.props),_,this.props.allowOverlap);this.setState({layout:y,droppingDOMNode:null,activeDrag:null,droppingPosition:void 0})}),h(this,"onDragLeave",m=>{m.preventDefault(),m.stopPropagation(),this.dragEnterCounter--,this.dragEnterCounter===0&&this.removeDroppingPlaceholder()}),h(this,"onDragEnter",m=>{m.preventDefault(),m.stopPropagation(),this.dragEnterCounter++}),h(this,"onDrop",m=>{m.preventDefault(),m.stopPropagation();const{droppingItem:_}=this.props,{layout:g}=this.state,y=g.find(S=>S.i===_.i);this.dragEnterCounter=0,this.removeDroppingPlaceholder(),this.props.onDrop(g,y,m)})}componentDidMount(){this.setState({mounted:!0}),this.onLayoutMaybeChanged(this.state.layout,this.props.layout)}static getDerivedStateFromProps(m,_){let g;return _.activeDrag?null:(!(0,r.deepEqual)(m.layout,_.propsLayout)||m.compactType!==_.compactType?g=m.layout:(0,s.childrenEqual)(m.children,_.children)||(g=_.layout),g?{layout:(0,s.synchronizeLayoutWithChildren)(g,m.children,m.cols,(0,s.compactType)(m),m.allowOverlap),compactType:m.compactType,children:m.children,propsLayout:m.layout}:null)}shouldComponentUpdate(m,_){return this.props.children!==m.children||!(0,s.fastRGLPropsEqual)(this.props,m,r.deepEqual)||this.state.activeDrag!==_.activeDrag||this.state.mounted!==_.mounted||this.state.droppingPosition!==_.droppingPosition}componentDidUpdate(m,_){if(!this.state.activeDrag){const g=this.state.layout,y=_.layout;this.onLayoutMaybeChanged(g,y)}}containerHeight(){if(!this.props.autoSize)return;const m=(0,s.bottom)(this.state.layout),_=this.props.containerPadding?this.props.containerPadding[1]:this.props.margin[1];return m*this.props.rowHeight+(m-1)*this.props.margin[1]+_*2+"px"}onLayoutMaybeChanged(m,_){_||(_=this.state.layout),(0,r.deepEqual)(_,m)||this.props.onLayoutChange(m)}placeholder(){const{activeDrag:m}=this.state;if(!m)return null;const{width:_,cols:g,margin:y,containerPadding:S,rowHeight:N,maxRows:k,useCSSTransforms:C,transformScale:E}=this.props;return e.createElement(o.default,{w:m.w,h:m.h,x:m.x,y:m.y,i:m.i,className:"react-grid-placeholder ".concat(this.state.resizing?"placeholder-resizing":""),containerWidth:_,cols:g,margin:y,containerPadding:S||y,maxRows:k,rowHeight:N,isDraggable:!1,isResizable:!1,isBounded:!1,useCSSTransforms:C,transformScale:E},e.createElement("div",null))}processGridItem(m,_){if(!m||!m.key)return;const g=(0,s.getLayoutItem)(this.state.layout,String(m.key));if(!g)return null;const{width:y,cols:S,margin:N,containerPadding:k,rowHeight:C,maxRows:E,isDraggable:O,isResizable:A,isBounded:M,useCSSTransforms:T,transformScale:H,draggableCancel:z,draggableHandle:B,resizeHandles:Y,resizeHandle:U}=this.props,{mounted:G,droppingPosition:Z}=this.state,X=typeof g.isDraggable=="boolean"?g.isDraggable:!g.static&&O,oe=typeof g.isResizable=="boolean"?g.isResizable:!g.static&&A,le=g.resizeHandles||Y,me=X&&M&&g.isBounded!==!1;return e.createElement(o.default,{containerWidth:y,cols:S,margin:N,containerPadding:k||N,maxRows:E,rowHeight:C,cancel:z,handle:B,onDragStop:this.onDragStop,onDragStart:this.onDragStart,onDrag:this.onDrag,onResizeStart:this.onResizeStart,onResize:this.onResize,onResizeStop:this.onResizeStop,isDraggable:X,isResizable:oe,isBounded:me,useCSSTransforms:T&&G,usePercentages:!G,transformScale:H,w:g.w,h:g.h,x:g.x,y:g.y,i:g.i,minH:g.minH,minW:g.minW,maxH:g.maxH,maxW:g.maxW,static:g.static,droppingPosition:_?Z:void 0,resizeHandles:le,resizeHandle:U},m)}render(){const{className:m,style:_,isDroppable:g,innerRef:y}=this.props,S=(0,n.default)(v,m),N=f({height:this.containerHeight()},_);return e.createElement("div",{ref:y,className:S,style:N,onDrop:g?this.onDrop:s.noop,onDragLeave:g?this.onDragLeave:s.noop,onDragEnter:g?this.onDragEnter:s.noop,onDragOver:g?this.onDragOver:s.noop},e.Children.map(this.props.children,k=>this.processGridItem(k)),g&&this.state.droppingDOMNode&&this.processGridItem(this.state.droppingDOMNode,!0),this.placeholder())}};return Jr.default=b,h(b,"displayName","ReactGridLayout"),h(b,"propTypes",l.default),h(b,"defaultProps",{autoSize:!0,cols:12,className:"",style:{},draggableHandle:"",draggableCancel:"",containerPadding:null,rowHeight:150,maxRows:1/0,layout:[],margin:[10,10],isBounded:!1,isDraggable:!0,isResizable:!0,allowOverlap:!1,isDroppable:!1,useCSSTransforms:!0,transformScale:1,verticalCompact:!0,compactType:"vertical",preventCollision:!1,droppingItem:{i:"__dropping-elem__",h:1,w:1},resizeHandles:["se"],onLayoutChange:s.noop,onDragStart:s.noop,onDrag:s.noop,onDragStop:s.noop,onResizeStart:s.noop,onResize:s.noop,onResizeStop:s.noop,onDrop:s.noop,onDropDragOver:s.noop}),Jr}var an={},er={},ml;function Du(){if(ml)return er;ml=1,Object.defineProperty(er,"__esModule",{value:!0}),er.findOrGenerateResponsiveLayout=s,er.getBreakpointFromWidth=r,er.getColsFromBreakpoint=n,er.sortBreakpoints=i;var e=Dr();function r(o,l){const c=i(o);let u=c[0];for(let d=1,f=c.length;d<f;d++){const h=c[d];l>o[h]&&(u=h)}return u}function n(o,l){if(!l[o])throw new Error("ResponsiveReactGridLayout: `cols` entry for breakpoint "+o+" is missing!");return l[o]}function s(o,l,c,u,d,f){if(o[c])return(0,e.cloneLayout)(o[c]);let h=o[u];const x=i(l),w=x.slice(x.indexOf(c));for(let v=0,j=w.length;v<j;v++){const b=w[v];if(o[b]){h=o[b];break}}return h=(0,e.cloneLayout)(h||[]),(0,e.compact)((0,e.correctBounds)(h,{cols:d}),f,d)}function i(o){return Object.keys(o).sort(function(c,u){return o[c]-o[u]})}return er}var pl;function C_(){if(pl)return an;pl=1,Object.defineProperty(an,"__esModule",{value:!0}),an.default=void 0;var e=u(ut()),r=c(Kt()),n=pi(),s=Dr(),i=Du(),o=c(Au());const l=["breakpoint","breakpoints","cols","layouts","margin","containerPadding","onBreakpointChange","onLayoutChange","onWidthChange"];function c(g){return g&&g.__esModule?g:{default:g}}function u(g,y){if(typeof WeakMap=="function")var S=new WeakMap,N=new WeakMap;return(u=function(k,C){if(!C&&k&&k.__esModule)return k;var E,O,A={__proto__:null,default:k};if(k===null||typeof k!="object"&&typeof k!="function")return A;if(E=C?N:S){if(E.has(k))return E.get(k);E.set(k,A)}for(const M in k)M!=="default"&&{}.hasOwnProperty.call(k,M)&&((O=(E=Object.defineProperty)&&Object.getOwnPropertyDescriptor(k,M))&&(O.get||O.set)?E(A,M,O):A[M]=k[M]);return A})(g,y)}function d(){return d=Object.assign?Object.assign.bind():function(g){for(var y=1;y<arguments.length;y++){var S=arguments[y];for(var N in S)({}).hasOwnProperty.call(S,N)&&(g[N]=S[N])}return g},d.apply(null,arguments)}function f(g,y){if(g==null)return{};var S,N,k=h(g,y);if(Object.getOwnPropertySymbols){var C=Object.getOwnPropertySymbols(g);for(N=0;N<C.length;N++)S=C[N],y.indexOf(S)===-1&&{}.propertyIsEnumerable.call(g,S)&&(k[S]=g[S])}return k}function h(g,y){if(g==null)return{};var S={};for(var N in g)if({}.hasOwnProperty.call(g,N)){if(y.indexOf(N)!==-1)continue;S[N]=g[N]}return S}function x(g,y){var S=Object.keys(g);if(Object.getOwnPropertySymbols){var N=Object.getOwnPropertySymbols(g);y&&(N=N.filter(function(k){return Object.getOwnPropertyDescriptor(g,k).enumerable})),S.push.apply(S,N)}return S}function w(g){for(var y=1;y<arguments.length;y++){var S=arguments[y]!=null?arguments[y]:{};y%2?x(Object(S),!0).forEach(function(N){v(g,N,S[N])}):Object.getOwnPropertyDescriptors?Object.defineProperties(g,Object.getOwnPropertyDescriptors(S)):x(Object(S)).forEach(function(N){Object.defineProperty(g,N,Object.getOwnPropertyDescriptor(S,N))})}return g}function v(g,y,S){return(y=j(y))in g?Object.defineProperty(g,y,{value:S,enumerable:!0,configurable:!0,writable:!0}):g[y]=S,g}function j(g){var y=b(g,"string");return typeof y=="symbol"?y:y+""}function b(g,y){if(typeof g!="object"||!g)return g;var S=g[Symbol.toPrimitive];if(S!==void 0){var N=S.call(g,y);if(typeof N!="object")return N;throw new TypeError("@@toPrimitive must return a primitive value.")}return(y==="string"?String:Number)(g)}const p=g=>Object.prototype.toString.call(g);function m(g,y){return g==null?null:Array.isArray(g)?g:g[y]}let _=class extends e.Component{constructor(){super(...arguments),v(this,"state",this.generateInitialState()),v(this,"onLayoutChange",y=>{this.props.onLayoutChange(y,w(w({},this.props.layouts),{},{[this.state.breakpoint]:y}))})}generateInitialState(){const{width:y,breakpoints:S,layouts:N,cols:k}=this.props,C=(0,i.getBreakpointFromWidth)(S,y),E=(0,i.getColsFromBreakpoint)(C,k),O=this.props.verticalCompact===!1?null:this.props.compactType;return{layout:(0,i.findOrGenerateResponsiveLayout)(N,S,C,C,E,O),breakpoint:C,cols:E}}static getDerivedStateFromProps(y,S){if(!(0,n.deepEqual)(y.layouts,S.layouts)){const{breakpoint:N,cols:k}=S;return{layout:(0,i.findOrGenerateResponsiveLayout)(y.layouts,y.breakpoints,N,N,k,y.compactType),layouts:y.layouts}}return null}componentDidUpdate(y){(this.props.width!=y.width||this.props.breakpoint!==y.breakpoint||!(0,n.deepEqual)(this.props.breakpoints,y.breakpoints)||!(0,n.deepEqual)(this.props.cols,y.cols))&&this.onWidthChange(y)}onWidthChange(y){const{breakpoints:S,cols:N,layouts:k,compactType:C}=this.props,E=this.props.breakpoint||(0,i.getBreakpointFromWidth)(this.props.breakpoints,this.props.width),O=this.state.breakpoint,A=(0,i.getColsFromBreakpoint)(E,N),M=w({},k);if(O!==E||y.breakpoints!==S||y.cols!==N){O in M||(M[O]=(0,s.cloneLayout)(this.state.layout));let z=(0,i.findOrGenerateResponsiveLayout)(M,S,E,O,A,C);z=(0,s.synchronizeLayoutWithChildren)(z,this.props.children,A,C,this.props.allowOverlap),M[E]=z,this.props.onBreakpointChange(E,A),this.props.onLayoutChange(z,M),this.setState({breakpoint:E,layout:z,cols:A})}const T=m(this.props.margin,E),H=m(this.props.containerPadding,E);this.props.onWidthChange(this.props.width,T,A,H)}render(){const y=this.props,{breakpoint:S,breakpoints:N,cols:k,layouts:C,margin:E,containerPadding:O,onBreakpointChange:A,onLayoutChange:M,onWidthChange:T}=y,H=f(y,l);return e.createElement(o.default,d({},H,{margin:m(E,this.state.breakpoint),containerPadding:m(O,this.state.breakpoint),onLayoutChange:this.onLayoutChange,layout:this.state.layout,cols:this.state.cols}))}};return an.default=_,v(_,"propTypes",{breakpoint:r.default.string,breakpoints:r.default.object,allowOverlap:r.default.bool,cols:r.default.object,margin:r.default.oneOfType([r.default.array,r.default.object]),containerPadding:r.default.oneOfType([r.default.array,r.default.object]),layouts(g,y){if(p(g[y])!=="[object Object]")throw new Error("Layout property must be an object. Received: "+p(g[y]));Object.keys(g[y]).forEach(S=>{if(!(S in g.breakpoints))throw new Error("Each key in layouts must align with a key in breakpoints.");(0,s.validateLayout)(g.layouts[S],"layouts."+S)})},width:r.default.number.isRequired,onBreakpointChange:r.default.func,onLayoutChange:r.default.func,onWidthChange:r.default.func}),v(_,"defaultProps",{breakpoints:{lg:1200,md:996,sm:768,xs:480,xxs:0},cols:{lg:12,md:10,sm:6,xs:4,xxs:2},containerPadding:{lg:null,md:null,sm:null,xs:null,xxs:null},layouts:{},margin:[10,10],allowOverlap:!1,onBreakpointChange:s.noop,onLayoutChange:s.noop,onWidthChange:s.noop}),an}var Jn={},Mu=(function(){if(typeof Map<"u")return Map;function e(r,n){var s=-1;return r.some(function(i,o){return i[0]===n?(s=o,!0):!1}),s}return(function(){function r(){this.__entries__=[]}return Object.defineProperty(r.prototype,"size",{get:function(){return this.__entries__.length},enumerable:!0,configurable:!0}),r.prototype.get=function(n){var s=e(this.__entries__,n),i=this.__entries__[s];return i&&i[1]},r.prototype.set=function(n,s){var i=e(this.__entries__,n);~i?this.__entries__[i][1]=s:this.__entries__.push([n,s])},r.prototype.delete=function(n){var s=this.__entries__,i=e(s,n);~i&&s.splice(i,1)},r.prototype.has=function(n){return!!~e(this.__entries__,n)},r.prototype.clear=function(){this.__entries__.splice(0)},r.prototype.forEach=function(n,s){s===void 0&&(s=null);for(var i=0,o=this.__entries__;i<o.length;i++){var l=o[i];n.call(s,l[1],l[0])}},r})()})(),Ha=typeof window<"u"&&typeof document<"u"&&window.document===document,Ss=(function(){return typeof global<"u"&&global.Math===Math?global:typeof self<"u"&&self.Math===Math?self:typeof window<"u"&&window.Math===Math?window:Function("return this")()})(),P_=(function(){return typeof requestAnimationFrame=="function"?requestAnimationFrame.bind(Ss):function(e){return setTimeout(function(){return e(Date.now())},1e3/60)}})(),E_=2;function O_(e,r){var n=!1,s=!1,i=0;function o(){n&&(n=!1,e()),s&&c()}function l(){P_(o)}function c(){var u=Date.now();if(n){if(u-i<E_)return;s=!0}else n=!0,s=!1,setTimeout(l,r);i=u}return c}var R_=20,T_=["top","right","bottom","left","width","height","size","weight"],A_=typeof MutationObserver<"u",D_=(function(){function e(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=O_(this.refresh.bind(this),R_)}return e.prototype.addObserver=function(r){~this.observers_.indexOf(r)||this.observers_.push(r),this.connected_||this.connect_()},e.prototype.removeObserver=function(r){var n=this.observers_,s=n.indexOf(r);~s&&n.splice(s,1),!n.length&&this.connected_&&this.disconnect_()},e.prototype.refresh=function(){var r=this.updateObservers_();r&&this.refresh()},e.prototype.updateObservers_=function(){var r=this.observers_.filter(function(n){return n.gatherActive(),n.hasActive()});return r.forEach(function(n){return n.broadcastActive()}),r.length>0},e.prototype.connect_=function(){!Ha||this.connected_||(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),A_?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},e.prototype.disconnect_=function(){!Ha||!this.connected_||(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},e.prototype.onTransitionEnd_=function(r){var n=r.propertyName,s=n===void 0?"":n,i=T_.some(function(o){return!!~s.indexOf(o)});i&&this.refresh()},e.getInstance=function(){return this.instance_||(this.instance_=new e),this.instance_},e.instance_=null,e})(),$u=(function(e,r){for(var n=0,s=Object.keys(r);n<s.length;n++){var i=s[n];Object.defineProperty(e,i,{value:r[i],enumerable:!1,writable:!1,configurable:!0})}return e}),Or=(function(e){var r=e&&e.ownerDocument&&e.ownerDocument.defaultView;return r||Ss}),zu=Ks(0,0,0,0);function ks(e){return parseFloat(e)||0}function gl(e){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];return r.reduce(function(s,i){var o=e["border-"+i+"-width"];return s+ks(o)},0)}function M_(e){for(var r=["top","right","bottom","left"],n={},s=0,i=r;s<i.length;s++){var o=i[s],l=e["padding-"+o];n[o]=ks(l)}return n}function $_(e){var r=e.getBBox();return Ks(0,0,r.width,r.height)}function z_(e){var r=e.clientWidth,n=e.clientHeight;if(!r&&!n)return zu;var s=Or(e).getComputedStyle(e),i=M_(s),o=i.left+i.right,l=i.top+i.bottom,c=ks(s.width),u=ks(s.height);if(s.boxSizing==="border-box"&&(Math.round(c+o)!==r&&(c-=gl(s,"left","right")+o),Math.round(u+l)!==n&&(u-=gl(s,"top","bottom")+l)),!F_(e)){var d=Math.round(c+o)-r,f=Math.round(u+l)-n;Math.abs(d)!==1&&(c-=d),Math.abs(f)!==1&&(u-=f)}return Ks(i.left,i.top,c,u)}var L_=(function(){return typeof SVGGraphicsElement<"u"?function(e){return e instanceof Or(e).SVGGraphicsElement}:function(e){return e instanceof Or(e).SVGElement&&typeof e.getBBox=="function"}})();function F_(e){return e===Or(e).document.documentElement}function I_(e){return Ha?L_(e)?$_(e):z_(e):zu}function H_(e){var r=e.x,n=e.y,s=e.width,i=e.height,o=typeof DOMRectReadOnly<"u"?DOMRectReadOnly:Object,l=Object.create(o.prototype);return $u(l,{x:r,y:n,width:s,height:i,top:n,right:r+s,bottom:i+n,left:r}),l}function Ks(e,r,n,s){return{x:e,y:r,width:n,height:s}}var U_=(function(){function e(r){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=Ks(0,0,0,0),this.target=r}return e.prototype.isActive=function(){var r=I_(this.target);return this.contentRect_=r,r.width!==this.broadcastWidth||r.height!==this.broadcastHeight},e.prototype.broadcastRect=function(){var r=this.contentRect_;return this.broadcastWidth=r.width,this.broadcastHeight=r.height,r},e})(),q_=(function(){function e(r,n){var s=H_(n);$u(this,{target:r,contentRect:s})}return e})(),W_=(function(){function e(r,n,s){if(this.activeObservations_=[],this.observations_=new Mu,typeof r!="function")throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=r,this.controller_=n,this.callbackCtx_=s}return e.prototype.observe=function(r){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(!(typeof Element>"u"||!(Element instanceof Object))){if(!(r instanceof Or(r).Element))throw new TypeError('parameter 1 is not of type "Element".');var n=this.observations_;n.has(r)||(n.set(r,new U_(r)),this.controller_.addObserver(this),this.controller_.refresh())}},e.prototype.unobserve=function(r){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(!(typeof Element>"u"||!(Element instanceof Object))){if(!(r instanceof Or(r).Element))throw new TypeError('parameter 1 is not of type "Element".');var n=this.observations_;n.has(r)&&(n.delete(r),n.size||this.controller_.removeObserver(this))}},e.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},e.prototype.gatherActive=function(){var r=this;this.clearActive(),this.observations_.forEach(function(n){n.isActive()&&r.activeObservations_.push(n)})},e.prototype.broadcastActive=function(){if(this.hasActive()){var r=this.callbackCtx_,n=this.activeObservations_.map(function(s){return new q_(s.target,s.broadcastRect())});this.callback_.call(r,n,r),this.clearActive()}},e.prototype.clearActive=function(){this.activeObservations_.splice(0)},e.prototype.hasActive=function(){return this.activeObservations_.length>0},e})(),Lu=typeof WeakMap<"u"?new WeakMap:new Mu,Fu=(function(){function e(r){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var n=D_.getInstance(),s=new W_(r,n,this);Lu.set(this,s)}return e})();["observe","unobserve","disconnect"].forEach(function(e){Fu.prototype[e]=function(){var r;return(r=Lu.get(this))[e].apply(r,arguments)}});var B_=(function(){return typeof Ss.ResizeObserver<"u"?Ss.ResizeObserver:Fu})();const V_=Object.freeze(Object.defineProperty({__proto__:null,default:B_},Symbol.toStringTag,{value:"Module"})),G_=ad(V_);var xl;function Y_(){if(xl)return Jn;xl=1,Object.defineProperty(Jn,"__esModule",{value:!0}),Jn.default=v;var e=l(ut()),r=o(Kt()),n=o(G_),s=o(Ys());const i=["measureBeforeMount"];function o(j){return j&&j.__esModule?j:{default:j}}function l(j,b){if(typeof WeakMap=="function")var p=new WeakMap,m=new WeakMap;return(l=function(_,g){if(!g&&_&&_.__esModule)return _;var y,S,N={__proto__:null,default:_};if(_===null||typeof _!="object"&&typeof _!="function")return N;if(y=g?m:p){if(y.has(_))return y.get(_);y.set(_,N)}for(const k in _)k!=="default"&&{}.hasOwnProperty.call(_,k)&&((S=(y=Object.defineProperty)&&Object.getOwnPropertyDescriptor(_,k))&&(S.get||S.set)?y(N,k,S):N[k]=_[k]);return N})(j,b)}function c(){return c=Object.assign?Object.assign.bind():function(j){for(var b=1;b<arguments.length;b++){var p=arguments[b];for(var m in p)({}).hasOwnProperty.call(p,m)&&(j[m]=p[m])}return j},c.apply(null,arguments)}function u(j,b){if(j==null)return{};var p,m,_=d(j,b);if(Object.getOwnPropertySymbols){var g=Object.getOwnPropertySymbols(j);for(m=0;m<g.length;m++)p=g[m],b.indexOf(p)===-1&&{}.propertyIsEnumerable.call(j,p)&&(_[p]=j[p])}return _}function d(j,b){if(j==null)return{};var p={};for(var m in j)if({}.hasOwnProperty.call(j,m)){if(b.indexOf(m)!==-1)continue;p[m]=j[m]}return p}function f(j,b,p){return(b=h(b))in j?Object.defineProperty(j,b,{value:p,enumerable:!0,configurable:!0,writable:!0}):j[b]=p,j}function h(j){var b=x(j,"string");return typeof b=="symbol"?b:b+""}function x(j,b){if(typeof j!="object"||!j)return j;var p=j[Symbol.toPrimitive];if(p!==void 0){var m=p.call(j,b);if(typeof m!="object")return m;throw new TypeError("@@toPrimitive must return a primitive value.")}return(b==="string"?String:Number)(j)}const w="react-grid-layout";function v(j){var b;return b=class extends e.Component{constructor(){super(...arguments),f(this,"state",{width:1280}),f(this,"elementRef",e.createRef()),f(this,"mounted",!1),f(this,"resizeObserver",void 0)}componentDidMount(){this.mounted=!0,this.resizeObserver=new n.default(_=>{if(this.elementRef.current instanceof HTMLElement){const y=_[0].contentRect.width;this.setState({width:y})}});const m=this.elementRef.current;m instanceof HTMLElement&&this.resizeObserver.observe(m)}componentWillUnmount(){this.mounted=!1;const m=this.elementRef.current;m instanceof HTMLElement&&this.resizeObserver.unobserve(m),this.resizeObserver.disconnect()}render(){const m=this.props,{measureBeforeMount:_}=m,g=u(m,i);return _&&!this.mounted?e.createElement("div",{className:(0,s.default)(this.props.className,w),style:this.props.style,ref:this.elementRef}):e.createElement(j,c({innerRef:this.elementRef},g,this.state))}},f(b,"defaultProps",{measureBeforeMount:!1}),f(b,"propTypes",{measureBeforeMount:r.default.bool}),b}return Jn}var yl;function X_(){return yl||(yl=1,(function(e){e.exports=Au().default,e.exports.utils=Dr(),e.exports.calculateUtils=gi(),e.exports.Responsive=C_().default,e.exports.Responsive.utils=Du(),e.exports.WidthProvider=Y_().default})(da)),da.exports}var K_=X_();const J_=Nl(K_),Ht=({title:e,icon:r,children:n,onRemove:s,className:i=""})=>a.jsxs("div",{className:`bg-dark-surface border border-dark-border rounded-lg shadow-lg h-full flex flex-col ${i}`,children:[a.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-dark-border",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Ad,{className:"h-4 w-4 text-slate-400 cursor-move drag-handle"}),r&&a.jsx("div",{className:"text-primary",children:r}),a.jsx("h3",{className:"text-lg font-semibold text-white",children:e})]}),s&&a.jsx("button",{onClick:s,className:"p-1 text-slate-400 hover:text-white hover:bg-dark-hover rounded transition-colors",children:a.jsx(Lt,{className:"h-4 w-4"})})]}),a.jsx("div",{className:"flex-1 p-4 overflow-auto",children:n})]}),Z_=({onRemove:e})=>{const[r,n]=R.useState([]),[s,i]=R.useState(!0);R.useEffect(()=>{o()},[]);const o=async()=>{try{const u=await(await fetch("/api/dashboard/data/recent_scans",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}})).json();n(u.scans||[])}catch(c){console.error("Failed to fetch recent scans:",c)}finally{i(!1)}},l=c=>{switch(c){case"completed":return a.jsx(Ze,{className:"h-4 w-4 text-green-500"});case"failed":return a.jsx(Ft,{className:"h-4 w-4 text-red-500"});case"running":return a.jsx(Qe,{className:"h-4 w-4 text-blue-500 animate-spin"});default:return a.jsx(Rr,{className:"h-4 w-4 text-yellow-500"})}};return a.jsx(Ht,{title:"Recent Scans",icon:a.jsx(bt,{className:"h-5 w-5"}),onRemove:e,children:s?a.jsx("div",{className:"flex items-center justify-center h-32",children:a.jsx(Qe,{className:"h-6 w-6 text-primary animate-spin"})}):r.length===0?a.jsx("div",{className:"text-center text-slate-400 py-8",children:"No recent scans"}):a.jsx("div",{className:"space-y-2",children:r.map(c=>a.jsxs("div",{className:"flex items-center justify-between p-3 bg-dark-bg rounded-lg border border-dark-border hover:border-primary transition-colors",children:[a.jsxs("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[l(c.status),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("div",{className:"font-medium text-white truncate",children:c.name}),a.jsx("div",{className:"text-xs text-slate-400",children:Is(new Date(c.created_at),{addSuffix:!0})})]})]}),a.jsx("div",{className:"text-xs text-slate-400 capitalize",children:c.status})]},c.id))})})},Q_=({onRemove:e})=>{const[r,n]=R.useState(null),[s,i]=R.useState(!0);R.useEffect(()=>{o()},[]);const o=async()=>{try{const c=await(await fetch("/api/dashboard/data/vulnerability_summary",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}})).json();n(c)}catch(l){console.error("Failed to fetch vulnerability summary:",l)}finally{i(!1)}};return a.jsx(Ht,{title:"Vulnerability Summary",icon:a.jsx(ke,{className:"h-5 w-5"}),onRemove:e,children:s?a.jsx("div",{className:"flex items-center justify-center h-32",children:a.jsx(Qe,{className:"h-6 w-6 text-primary animate-spin"})}):r?a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{className:"text-center p-4 bg-dark-bg rounded-lg border border-dark-border",children:[a.jsx("div",{className:"text-3xl font-bold text-white",children:r.total}),a.jsx("div",{className:"text-sm text-slate-400",children:"Total"})]}),a.jsxs("div",{className:"text-center p-4 bg-dark-bg rounded-lg border border-red-900/30",children:[a.jsx("div",{className:"text-3xl font-bold text-red-500",children:r.critical}),a.jsx("div",{className:"text-sm text-slate-400",children:"Critical"})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"w-3 h-3 rounded-full bg-orange-500"}),a.jsx("span",{className:"text-sm text-slate-300",children:"High"})]}),a.jsx("span",{className:"text-sm font-semibold text-white",children:r.high})]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"w-3 h-3 rounded-full bg-yellow-500"}),a.jsx("span",{className:"text-sm text-slate-300",children:"Medium"})]}),a.jsx("span",{className:"text-sm font-semibold text-white",children:r.medium})]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"w-3 h-3 rounded-full bg-blue-500"}),a.jsx("span",{className:"text-sm text-slate-300",children:"Low"})]}),a.jsx("span",{className:"text-sm font-semibold text-white",children:r.low})]})]})]}):a.jsx("div",{className:"text-center text-slate-400 py-8",children:"No vulnerability data"})})},ej=({onRemove:e})=>{const[r,n]=R.useState([]),[s,i]=R.useState(!0);R.useEffect(()=>{o()},[]);const o=async()=>{try{const d=await(await fetch("/api/dashboard/data/compliance_scores",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}})).json();n(d.scores||[])}catch(u){console.error("Failed to fetch compliance scores:",u)}finally{i(!1)}},l=u=>u>=90?"text-green-500":u>=70?"text-yellow-500":"text-red-500",c=u=>u>=90?"bg-green-500":u>=70?"bg-yellow-500":"bg-red-500";return a.jsx(Ht,{title:"Compliance Scores",icon:a.jsx(Dd,{className:"h-5 w-5"}),onRemove:e,children:s?a.jsx("div",{className:"flex items-center justify-center h-32",children:a.jsx(Qe,{className:"h-6 w-6 text-primary animate-spin"})}):r.length===0?a.jsx("div",{className:"text-center text-slate-400 py-8",children:"No compliance data"}):a.jsx("div",{className:"space-y-4",children:r.map(u=>{const d=u.score/u.total*100;return a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-sm font-medium text-white",children:u.framework}),a.jsxs("span",{className:`text-sm font-bold ${l(d)}`,children:[u.score,"/",u.total," (",d.toFixed(0),"%)"]})]}),a.jsx("div",{className:"w-full bg-dark-bg rounded-full h-2",children:a.jsx("div",{className:`${c(d)} h-2 rounded-full transition-all duration-300`,style:{width:`${d}%`}})})]},u.framework)})})})},tj=({onRemove:e})=>{const[r,n]=R.useState([]),[s,i]=R.useState(!0);R.useEffect(()=>{o()},[]);const o=async()=>{try{const c=await(await fetch("/api/dashboard/data/scan_activity_chart",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}})).json();n(c.data||[])}catch(l){console.error("Failed to fetch scan activity:",l)}finally{i(!1)}};return a.jsx(Ht,{title:"Scan Activity (Last 30 Days)",icon:a.jsx(Wa,{className:"h-5 w-5"}),onRemove:e,children:s?a.jsx("div",{className:"flex items-center justify-center h-32",children:a.jsx(Qe,{className:"h-6 w-6 text-primary animate-spin"})}):r.length===0?a.jsx("div",{className:"text-center text-slate-400 py-8",children:"No scan activity data"}):a.jsx(sr,{width:"100%",height:200,children:a.jsxs(ga,{data:r,children:[a.jsx(yr,{strokeDasharray:"3 3",stroke:"#374151"}),a.jsx(br,{dataKey:"date",stroke:"#9ca3af",tick:{fill:"#9ca3af",fontSize:12},tickFormatter:l=>{const c=new Date(l);return`${c.getMonth()+1}/${c.getDate()}`}}),a.jsx(vr,{stroke:"#9ca3af",tick:{fill:"#9ca3af",fontSize:12}}),a.jsx(ar,{contentStyle:{backgroundColor:"#1f2937",border:"1px solid #374151",borderRadius:"0.5rem",color:"#fff"}}),a.jsx(xa,{type:"monotone",dataKey:"count",stroke:"#3b82f6",strokeWidth:2,dot:{fill:"#3b82f6",r:4}})]})})})},rj=({onRemove:e})=>{const[r,n]=R.useState([]),[s,i]=R.useState(!0);R.useEffect(()=>{o()},[]);const o=async()=>{try{const u=await(await fetch("/api/dashboard/data/top_risky_hosts",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}})).json();n(u.hosts||[])}catch(c){console.error("Failed to fetch risky hosts:",c)}finally{i(!1)}},l=c=>c>=50?"text-red-500":c>=20?"text-orange-500":"text-yellow-500";return a.jsx(Ht,{title:"Top Risky Hosts",icon:a.jsx(Ee,{className:"h-5 w-5"}),onRemove:e,children:s?a.jsx("div",{className:"flex items-center justify-center h-32",children:a.jsx(Qe,{className:"h-6 w-6 text-primary animate-spin"})}):r.length===0?a.jsx("div",{className:"text-center text-slate-400 py-8",children:"No risky hosts found"}):a.jsx("div",{className:"space-y-2",children:r.map((c,u)=>a.jsxs("div",{className:"flex items-center justify-between p-3 bg-dark-bg rounded-lg border border-dark-border hover:border-primary transition-colors",children:[a.jsxs("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[a.jsx("div",{className:`text-xl font-bold ${l(c.risk_score)}`,children:u+1}),a.jsx(jt,{className:"h-4 w-4 text-slate-400"}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("div",{className:"font-medium text-white truncate",children:c.hostname||c.ip}),c.hostname&&a.jsx("div",{className:"text-xs text-slate-400",children:c.ip})]})]}),a.jsxs("div",{className:"flex flex-col items-end gap-1",children:[a.jsxs("div",{className:"text-sm font-semibold text-white",children:[c.vulnerability_count," vulns"]}),a.jsxs("div",{className:"flex gap-2 text-xs",children:[c.critical_count>0&&a.jsxs("span",{className:"text-red-500",children:[c.critical_count,"C"]}),c.high_count>0&&a.jsxs("span",{className:"text-orange-500",children:[c.high_count,"H"]})]})]})]},c.ip))})})},nj=({onRemove:e})=>{const[r,n]=R.useState([]),[s,i]=R.useState(!0);R.useEffect(()=>{o()},[]);const o=async()=>{try{const c=await(await fetch("/api/dashboard/data/critical_vulns",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}})).json();n(c.vulnerabilities||[])}catch(l){console.error("Failed to fetch critical vulnerabilities:",l)}finally{i(!1)}};return a.jsx(Ht,{title:"Critical Vulnerabilities",icon:a.jsx(wi,{className:"h-5 w-5"}),onRemove:e,children:s?a.jsx("div",{className:"flex items-center justify-center h-32",children:a.jsx(Qe,{className:"h-6 w-6 text-primary animate-spin"})}):r.length===0?a.jsx("div",{className:"text-center text-slate-400 py-8",children:"No critical vulnerabilities"}):a.jsx("div",{className:"space-y-2",children:r.map(l=>a.jsxs("div",{className:"flex items-center justify-between p-3 bg-dark-bg rounded-lg border border-red-900/30 hover:border-red-500 transition-colors",children:[a.jsxs("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[a.jsx(wi,{className:"h-4 w-4 text-red-500 flex-shrink-0"}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("div",{className:"font-medium text-white truncate",children:l.vulnerability_id}),a.jsxs("div",{className:"text-xs text-slate-400",children:[l.host_ip,"  ",Is(new Date(l.created_at),{addSuffix:!0})]})]})]}),a.jsxs("div",{className:"flex flex-col items-end gap-1",children:[a.jsx("div",{className:"px-2 py-1 bg-red-900/30 text-red-500 text-xs font-semibold rounded",children:l.severity.toUpperCase()}),a.jsx("div",{className:"text-xs text-slate-400 capitalize",children:l.status.replace("_"," ")})]})]},l.id))})})},sj=({onRemove:e})=>{const[r,n]=R.useState([]),[s,i]=R.useState(!0);R.useEffect(()=>{o()},[]);const o=async()=>{try{const c=await(await fetch("/api/dashboard/data/upcoming_scheduled_scans",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}})).json();n(c.scans||[])}catch(l){console.error("Failed to fetch upcoming scans:",l)}finally{i(!1)}};return a.jsx(Ht,{title:"Upcoming Scheduled Scans",icon:a.jsx(hn,{className:"h-5 w-5"}),onRemove:e,children:s?a.jsx("div",{className:"flex items-center justify-center h-32",children:a.jsx(Qe,{className:"h-6 w-6 text-primary animate-spin"})}):r.length===0?a.jsx("div",{className:"text-center text-slate-400 py-8",children:"No upcoming scans"}):a.jsx("div",{className:"space-y-2",children:r.map(l=>a.jsxs("div",{className:"flex items-center justify-between p-3 bg-dark-bg rounded-lg border border-dark-border hover:border-primary transition-colors",children:[a.jsxs("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[a.jsx(Rr,{className:"h-4 w-4 text-primary flex-shrink-0"}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("div",{className:"font-medium text-white truncate",children:l.name}),a.jsxs("div",{className:"text-xs text-slate-400 capitalize",children:[l.schedule_type," scan"]})]})]}),a.jsx("div",{className:"text-xs text-slate-400",children:Is(new Date(l.next_run_at),{addSuffix:!0})})]},l.id))})})},bl={critical:"bg-red-900/30 text-red-500 border-red-500/50",high:"bg-orange-900/30 text-orange-500 border-orange-500/50",medium:"bg-yellow-900/30 text-yellow-500 border-yellow-500/50",low:"bg-blue-900/30 text-blue-500 border-blue-500/50",info:"bg-slate-700/30 text-slate-400 border-slate-500/50"},aj={exposed_service:a.jsx(or,{className:"h-4 w-4"}),exploit_available:a.jsx(Md,{className:"h-4 w-4"}),known_exploited_vulnerability:a.jsx(_i,{className:"h-4 w-4"}),critical_cve:a.jsx(Ee,{className:"h-4 w-4"}),new_cve:a.jsx(Ee,{className:"h-4 w-4"}),ransomware_threat:a.jsx(_i,{className:"h-4 w-4"}),misconfiguration:a.jsx(ke,{className:"h-4 w-4"})},ij=({onRemove:e,limit:r=5})=>{const{data:n,isLoading:s,error:i}=rd({queryKey:["threatAlerts","widget",r],queryFn:async()=>(await Vf.getAlerts({limit:r})).data,refetchInterval:6e4}),o=(n==null?void 0:n.alerts)||[],l=(n==null?void 0:n.total)||0,c=o.filter(h=>h.severity==="critical").length,u=o.filter(h=>h.severity==="high").length,d=o.filter(h=>h.in_cisa_kev).length,f=o.filter(h=>h.exploit_available).length;return a.jsx(Ht,{title:"Threat Intelligence",icon:a.jsx(ke,{className:"h-5 w-5"}),onRemove:e,children:s?a.jsx("div",{className:"flex items-center justify-center h-32",children:a.jsx(Qe,{className:"h-6 w-6 text-primary animate-spin"})}):i?a.jsx("div",{className:"text-center text-red-400 py-8",children:"Failed to load threat alerts"}):o.length===0?a.jsxs("div",{className:"text-center text-slate-400 py-8",children:[a.jsx(ke,{className:"h-8 w-8 mx-auto mb-2 opacity-50"}),a.jsx("p",{children:"No active threat alerts"}),a.jsx("p",{className:"text-xs mt-1",children:"Run threat intel enrichment on your scans to generate alerts"})]}):a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"grid grid-cols-4 gap-2 mb-4",children:[a.jsxs("div",{className:"bg-dark-bg rounded-lg p-2 text-center border border-dark-border",children:[a.jsx("div",{className:"text-lg font-bold text-red-400",children:c}),a.jsx("div",{className:"text-xs text-slate-400",children:"Critical"})]}),a.jsxs("div",{className:"bg-dark-bg rounded-lg p-2 text-center border border-dark-border",children:[a.jsx("div",{className:"text-lg font-bold text-orange-400",children:u}),a.jsx("div",{className:"text-xs text-slate-400",children:"High"})]}),a.jsxs("div",{className:"bg-dark-bg rounded-lg p-2 text-center border border-dark-border",children:[a.jsx("div",{className:"text-lg font-bold text-yellow-400",children:d}),a.jsx("div",{className:"text-xs text-slate-400",children:"KEV"})]}),a.jsxs("div",{className:"bg-dark-bg rounded-lg p-2 text-center border border-dark-border",children:[a.jsx("div",{className:"text-lg font-bold text-primary",children:f}),a.jsx("div",{className:"text-xs text-slate-400",children:"Exploits"})]})]}),a.jsx("div",{className:"space-y-2",children:o.slice(0,r).map(h=>a.jsx(oj,{alert:h},h.id))}),l>r&&a.jsx("div",{className:"mt-3 text-center",children:a.jsxs("a",{href:"/threat-intel",className:"text-sm text-primary hover:underline flex items-center justify-center gap-1",children:["View all ",l," alerts",a.jsx(As,{className:"h-4 w-4"})]})})]})})},oj=({alert:e})=>{const r=aj[e.alert_type]||a.jsx(Ee,{className:"h-4 w-4"}),n=bl[e.severity]||bl.info;return a.jsxs("div",{className:`flex items-center justify-between p-3 bg-dark-bg rounded-lg border ${e.severity==="critical"?"border-red-900/50":e.severity==="high"?"border-orange-900/50":"border-dark-border"} hover:border-primary/50 transition-colors`,children:[a.jsxs("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[a.jsx("div",{className:`p-1.5 rounded ${n}`,children:r}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("div",{className:"font-medium text-white text-sm truncate",title:e.title,children:e.title}),a.jsxs("div",{className:"text-xs text-slate-400 flex items-center gap-2",children:[a.jsx("span",{children:e.source}),a.jsx("span",{className:"text-slate-600",children:"|"}),a.jsx("span",{children:Is(new Date(e.created_at),{addSuffix:!0})})]})]})]}),a.jsxs("div",{className:"flex flex-col items-end gap-1 ml-2",children:[a.jsx("div",{className:`px-2 py-0.5 text-xs font-semibold rounded ${n}`,children:e.severity.toUpperCase()}),a.jsxs("div",{className:"flex gap-1",children:[e.in_cisa_kev&&a.jsx("span",{className:"px-1.5 py-0.5 text-xs bg-red-900/30 text-red-400 rounded",children:"KEV"}),e.exploit_available&&a.jsx("span",{className:"px-1.5 py-0.5 text-xs bg-purple-900/30 text-purple-400 rounded",children:"Exploit"})]})]})]})},lj=({onRemove:e})=>{const r=Ua(),[n,s]=R.useState(null),[i,o]=R.useState([]),[l,c]=R.useState(!0),u=R.useCallback(async()=>{try{c(!0);const x=await Gi.getMyAssignments({status:""});s(x.data.stats),o(x.data.assignments.slice(0,5))}catch(x){console.error("Failed to fetch assignments:",x)}finally{c(!1)}},[]);R.useEffect(()=>{u()},[u]);const d=async(x,w,v)=>{x.stopPropagation();try{await Gi.updateAssignment(w,{status:v}),Q.success("Status updated"),u()}catch(j){console.error("Failed to update status:",j),Q.error("Failed to update status")}},f=x=>{const w="px-2 py-0.5 text-xs font-semibold rounded-full";switch(x.toLowerCase()){case"critical":return`${w} bg-red-500/20 text-red-400`;case"high":return`${w} bg-orange-500/20 text-orange-400`;case"medium":return`${w} bg-yellow-500/20 text-yellow-400`;case"low":return`${w} bg-blue-500/20 text-blue-400`;default:return`${w} bg-gray-500/20 text-gray-400`}},h=(x,w,v)=>{if(!x)return null;const b=new Date(x).toLocaleDateString();if(v)return a.jsxs("span",{className:"text-red-400 flex items-center gap-1",children:[a.jsx(Ee,{className:"h-3 w-3"}),"Overdue"]});if(w!==null){if(w===0)return a.jsx("span",{className:"text-yellow-400",children:"Today"});if(w<=3)return a.jsxs("span",{className:"text-yellow-400",children:[w,"d"]})}return a.jsx("span",{className:"text-gray-400",children:b})};return a.jsx(Ht,{title:"My Assignments",icon:a.jsx(zd,{className:"h-5 w-5"}),onRemove:e,children:l?a.jsx("div",{className:"flex items-center justify-center h-32",children:a.jsx(Qe,{className:"h-6 w-6 text-primary animate-spin"})}):a.jsxs(a.Fragment,{children:[n&&a.jsxs("div",{className:"grid grid-cols-4 gap-2 mb-4 p-3 bg-dark-bg rounded-lg border border-dark-border",children:[a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-lg font-bold text-white",children:n.total}),a.jsx("div",{className:"text-xs text-slate-400",children:"Total"})]}),a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-lg font-bold text-red-400",children:n.overdue}),a.jsx("div",{className:"text-xs text-slate-400",children:"Overdue"})]}),a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-lg font-bold text-yellow-400",children:n.in_progress}),a.jsx("div",{className:"text-xs text-slate-400",children:"In Progress"})]}),a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-lg font-bold text-cyan-400",children:n.critical+n.high}),a.jsx("div",{className:"text-xs text-slate-400",children:"High+"})]})]}),i.length===0?a.jsxs("div",{className:"text-center text-slate-400 py-8",children:[a.jsx(Ze,{className:"h-12 w-12 mx-auto mb-2 text-green-500/50"}),a.jsx("p",{children:"No assignments"}),a.jsx("p",{className:"text-sm mt-1",children:"You are all caught up!"})]}):a.jsx("div",{className:"space-y-2",children:i.map(x=>a.jsxs("div",{className:`flex items-center justify-between p-3 bg-dark-bg rounded-lg border border-dark-border hover:border-primary cursor-pointer transition-colors ${x.is_overdue?"border-red-900/50":""}`,onClick:()=>r(`/remediation?vuln=${x.id}`),children:[a.jsxs("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[a.jsx("span",{className:f(x.severity),children:x.severity.charAt(0).toUpperCase()}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("div",{className:"font-medium text-white truncate text-sm",children:x.vulnerability_id}),a.jsxs("div",{className:"text-xs text-slate-400",children:[x.host_ip,x.port?`:${x.port}`:""]})]})]}),a.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",onClick:w=>w.stopPropagation(),children:[a.jsxs("div",{className:"text-xs",children:[a.jsx(hn,{className:"h-3 w-3 inline mr-1 text-gray-500"}),h(x.due_date,x.days_until_due,x.is_overdue)||a.jsx("span",{className:"text-gray-500",children:"--"})]}),x.status==="open"&&a.jsx("button",{onClick:w=>d(w,x.id,"in_progress"),className:"p-1 text-yellow-400 hover:bg-yellow-500/20 rounded transition-colors",title:"Start Working",children:a.jsx($d,{className:"h-4 w-4"})}),x.status==="in_progress"&&a.jsx("button",{onClick:w=>d(w,x.id,"resolved"),className:"p-1 text-green-400 hover:bg-green-500/20 rounded transition-colors",title:"Mark Resolved",children:a.jsx(Ze,{className:"h-4 w-4"})}),a.jsx(As,{className:"h-4 w-4 text-gray-500"})]})]},x.id))}),n&&n.total>5&&a.jsx("div",{className:"pt-3 text-center",children:a.jsxs("button",{onClick:()=>r("/remediation?assigned=me"),className:"text-cyan-400 hover:text-cyan-300 text-sm font-medium",children:["View all ",n.total," assignments"]})})]})})},vl=[{type:"recent_scans",label:"Recent Scans",minW:4,minH:2},{type:"vulnerability_summary",label:"Vulnerability Summary",minW:4,minH:2},{type:"compliance_scores",label:"Compliance Scores",minW:4,minH:2},{type:"scan_activity_chart",label:"Scan Activity",minW:6,minH:3},{type:"top_risky_hosts",label:"Top Risky Hosts",minW:4,minH:3},{type:"critical_vulns",label:"Critical Vulnerabilities",minW:4,minH:2},{type:"upcoming_scheduled_scans",label:"Upcoming Scans",minW:4,minH:2},{type:"threat_intel",label:"Threat Intelligence",minW:4,minH:3},{type:"my_assignments",label:"My Assignments",minW:4,minH:3}],cj=({editMode:e=!1,onEditModeChange:r})=>{const[n,s]=R.useState([]),[i,o]=R.useState(!0),[l,c]=R.useState(!1),[u,d]=R.useState(e),[f,h]=R.useState(!1);R.useEffect(()=>{x()},[]),R.useEffect(()=>{d(e)},[e]);const x=async()=>{try{const y=await(await fetch("/api/dashboard/widgets",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}})).json();s(y.widgets||[])}catch(g){console.error("Failed to fetch dashboard config:",g)}finally{o(!1)}},w=async()=>{c(!0);try{await fetch("/api/dashboard/widgets",{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},body:JSON.stringify({widgets:n})})}catch(g){console.error("Failed to save dashboard config:",g)}finally{c(!1)}},v=g=>{if(!u)return;const y=n.map(S=>{const N=g.find(k=>k.i===S.id);return N?{...S,x:N.x,y:N.y,w:N.w,h:N.h}:S});s(y)},j=g=>{const y=vl.find(N=>N.type===g);if(!y)return;const S={id:`${g}_${Date.now()}`,widget_type:g,x:0,y:1/0,w:y.minW,h:y.minH};s([...n,S]),h(!1)},b=g=>{s(n.filter(y=>y.id!==g))},p=()=>{const g=!u;d(g),r&&r(g)},m=g=>{const y={onRemove:u?()=>b(g.id):void 0};switch(g.widget_type){case"recent_scans":return a.jsx(Z_,{...y});case"vulnerability_summary":return a.jsx(Q_,{...y});case"compliance_scores":return a.jsx(ej,{...y});case"scan_activity_chart":return a.jsx(tj,{...y});case"top_risky_hosts":return a.jsx(rj,{...y});case"critical_vulns":return a.jsx(nj,{...y});case"upcoming_scheduled_scans":return a.jsx(sj,{...y});case"threat_intel":return a.jsx(ij,{...y});case"my_assignments":return a.jsx(lj,{...y});default:return null}};if(i)return a.jsx("div",{className:"flex items-center justify-center h-64",children:a.jsx("div",{className:"text-slate-400",children:"Loading dashboard..."})});const _=n.map(g=>({i:g.id,x:g.x,y:g.y,w:g.w,h:g.h}));return a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsxs("button",{onClick:p,className:`flex items-center gap-2 px-4 py-2 rounded-lg font-medium transition-colors ${u?"bg-primary text-white":"bg-dark-surface text-slate-300 hover:text-white border border-dark-border"}`,children:[a.jsx(ji,{className:"h-4 w-4"}),u?"Exit Edit Mode":"Customize Dashboard"]}),u&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"relative",children:[a.jsxs("button",{onClick:()=>h(!f),className:"flex items-center gap-2 px-4 py-2 bg-dark-surface text-slate-300 hover:text-white border border-dark-border rounded-lg transition-colors",children:[a.jsx(_r,{className:"h-4 w-4"}),"Add Widget"]}),f&&a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>h(!1)}),a.jsx("div",{className:"absolute top-full mt-2 left-0 bg-dark-surface border border-dark-border rounded-lg shadow-xl z-50 min-w-[200px]",children:vl.map(g=>a.jsx("button",{onClick:()=>j(g.type),className:"w-full text-left px-4 py-2 text-sm text-slate-300 hover:text-white hover:bg-dark-hover transition-colors first:rounded-t-lg last:rounded-b-lg",children:g.label},g.type))})]})]}),a.jsxs("button",{onClick:w,disabled:l,className:"flex items-center gap-2 px-4 py-2 bg-green-600 hover:bg-green-700 text-white rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[a.jsx($l,{className:"h-4 w-4"}),l?"Saving...":"Save Layout"]})]})]}),u&&a.jsx("div",{className:"text-sm text-slate-400",children:"Drag widgets to reposition, resize from corners"})]}),a.jsx(J_,{className:"layout",layout:_,cols:12,rowHeight:100,width:1200,isDraggable:u,isResizable:u,onLayoutChange:v,draggableHandle:".drag-handle",children:n.map(g=>a.jsx("div",{className:u?"cursor-move":"",children:m(g)},g.id))}),n.length===0&&a.jsxs("div",{className:"text-center py-12 text-slate-400",children:[a.jsx(ji,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),a.jsx("p",{children:"No widgets added yet"}),u&&a.jsx("button",{onClick:()=>h(!0),className:"mt-4 text-primary hover:underline",children:"Add your first widget"})]})]})},uj=({selectedCount:e,onClear:r,actions:n,onAction:s,isProcessing:i=!1})=>{const[o,l]=R.useState(null);if(e===0)return null;const c=h=>{h.requiresConfirmation?l(h.id):s(h.id)},u=()=>{o&&(s(o),l(null))},d=h=>{if(h.icon)return h.icon;switch(h.id){case"delete":return a.jsx(Ds,{className:"h-4 w-4"});case"export":return a.jsx(Nr,{className:"h-4 w-4"});default:return null}},f=n.find(h=>h.id===o);return a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"fixed bottom-6 left-1/2 transform -translate-x-1/2 z-50 animate-slide-up",children:a.jsx("div",{className:"bg-dark-card border border-dark-border rounded-lg shadow-2xl px-6 py-4 min-w-[400px]",children:a.jsxs("div",{className:"flex items-center justify-between space-x-4",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:"bg-primary/10 text-primary rounded-full w-8 h-8 flex items-center justify-center font-semibold text-sm",children:e}),a.jsxs("span",{className:"text-white font-medium",children:[e," item",e!==1?"s":""," selected"]})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[n.map(h=>a.jsxs(ze,{variant:h.variant||"secondary",onClick:()=>c(h),disabled:i,className:"flex items-center space-x-2",children:[d(h),a.jsx("span",{children:h.label})]},h.id)),a.jsx("button",{onClick:r,disabled:i,className:"text-slate-400 hover:text-white transition-colors p-2 rounded-lg hover:bg-dark-bg disabled:opacity-50",title:"Clear selection",children:a.jsx(Lt,{className:"h-5 w-5"})})]})]})})}),o&&f&&a.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-[60]",children:a.jsxs("div",{className:"bg-dark-card border border-dark-border rounded-lg p-6 max-w-md w-full mx-4",children:[a.jsx("h3",{className:"text-xl font-semibold text-white mb-4",children:"Confirm Action"}),a.jsx("p",{className:"text-slate-300 mb-6",children:f.confirmationMessage||`Are you sure you want to ${f.label.toLowerCase()} ${e} item${e!==1?"s":""}?`}),a.jsxs("div",{className:"flex justify-end space-x-3",children:[a.jsx(ze,{variant:"secondary",onClick:()=>l(null),disabled:i,children:"Cancel"}),a.jsx(ze,{variant:f.variant||"primary",onClick:u,disabled:i,children:"Confirm"})]})]})})]})},dj=({shortcuts:e,enabled:r=!0})=>{R.useEffect(()=>{if(!r)return;const n=s=>{if(!(s.target instanceof HTMLInputElement||s.target instanceof HTMLTextAreaElement||s.target instanceof HTMLSelectElement))for(const i of e){const o=i.ctrl===void 0||i.ctrl===(s.ctrlKey||s.metaKey),l=i.shift===void 0||i.shift===s.shiftKey,c=i.alt===void 0||i.alt===s.altKey,u=s.key.toLowerCase()===i.key.toLowerCase();if(o&&l&&c&&u){s.preventDefault(),i.action();break}}};return window.addEventListener("keydown",n),()=>{window.removeEventListener("keydown",n)}},[e,r])},hj=e=>{const r=[];return e.ctrl&&r.push("Ctrl"),e.shift&&r.push("Shift"),e.alt&&r.push("Alt"),r.push(e.key.toUpperCase()),r.join("+")},wl=()=>{const{activeScan:e,results:r,setActiveScan:n,scans:s,setScans:i}=ct(),[o,l]=R.useState(!1),[c,u]=R.useState("overview"),[d,f]=R.useState(new Set),[h,x]=R.useState(!1),w=g=>{const y=s.find(S=>S.id===g);y&&n(y)},v=async g=>{if(d.size!==0){x(!0);try{switch(g){case"delete":await j();break;case"export-json":await b("json");break;case"export-csv":await b("csv");break;default:Q.warning("Unknown action")}}catch(y){console.error("Bulk action failed:",y),Q.error("Bulk action failed")}finally{x(!1)}}},j=async()=>{try{const g=await vt.bulkDelete(Array.from(d));g.data.failed&&g.data.failed>0?Q.warning(g.data.message):Q.success(g.data.message);const y=await vt.getAll();i(y.data),f(new Set)}catch(g){throw Q.error("Failed to delete scans"),g}},b=async g=>{try{const y=await vt.bulkExport(Array.from(d),g,{include_vulnerabilities:!0,include_services:!0}),S=window.URL.createObjectURL(new Blob([y.data])),N=document.createElement("a");N.href=S,N.setAttribute("download","scans_export.zip"),document.body.appendChild(N),N.click(),N.remove(),window.URL.revokeObjectURL(S),Q.success(`Exported ${d.size} scan(s) successfully`),f(new Set)}catch(y){throw Q.error("Failed to export scans"),y}},p=[{id:"delete",label:"Delete",icon:a.jsx(Ds,{className:"h-4 w-4"}),variant:"danger",requiresConfirmation:!0,confirmationMessage:`Are you sure you want to delete ${d.size} scan${d.size!==1?"s":""}? This action cannot be undone.`},{id:"export-json",label:"Export JSON",icon:a.jsx(Nr,{className:"h-4 w-4"}),variant:"secondary"},{id:"export-csv",label:"Export CSV",icon:a.jsx(Nr,{className:"h-4 w-4"}),variant:"secondary"}],m=R.useMemo(()=>e&&r.has(e.id)?r.get(e.id)||[]:Array.from(r.values()).flat(),[e,r]),_=[{key:"f",ctrl:!0,action:()=>{const g=document.querySelector('input[placeholder*="Search"]');g&&(g.focus(),g.select())},description:"Focus search"},{key:"k",ctrl:!0,action:()=>l(!o),description:"Show keyboard shortcuts"},{key:"Escape",action:()=>l(!1),description:"Close modals"}];return dj({shortcuts:_}),a.jsx(Qf,{children:a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-3xl font-bold text-slate-900 dark:text-white mb-2",children:"Network Triage Dashboard"}),a.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:"Create scans, monitor progress, and analyze results in real-time"})]}),a.jsxs("button",{onClick:()=>l(!0),className:"flex items-center gap-2 px-3 py-2 text-sm text-slate-500 dark:text-slate-400 hover:text-slate-900 dark:hover:text-white transition-colors border border-light-border dark:border-dark-border hover:border-primary rounded-lg",children:[a.jsx(Ni,{className:"h-4 w-4"}),"Shortcuts"]})]}),a.jsxs("div",{className:"flex gap-2 border-b border-light-border dark:border-dark-border pb-2",children:[a.jsxs("button",{onClick:()=>u("overview"),className:`flex items-center gap-2 px-4 py-2 rounded-t-lg text-sm font-medium transition-colors ${c==="overview"?"bg-light-surface dark:bg-dark-surface text-primary border-b-2 border-primary":"text-slate-500 dark:text-slate-400 hover:text-slate-900 dark:hover:text-white hover:bg-light-hover dark:hover:bg-dark-hover"}`,children:[a.jsx(Ld,{className:"h-4 w-4"}),"Overview"]}),a.jsxs("button",{onClick:()=>u("scans"),className:`flex items-center gap-2 px-4 py-2 rounded-t-lg text-sm font-medium transition-colors ${c==="scans"?"bg-light-surface dark:bg-dark-surface text-primary border-b-2 border-primary":"text-slate-500 dark:text-slate-400 hover:text-slate-900 dark:hover:text-white hover:bg-light-hover dark:hover:bg-dark-hover"}`,children:[a.jsx(Tl,{className:"h-4 w-4"}),"Scans"]}),a.jsxs("button",{onClick:()=>u("analytics"),className:`flex items-center gap-2 px-4 py-2 rounded-t-lg text-sm font-medium transition-colors ${c==="analytics"?"bg-light-surface dark:bg-dark-surface text-primary border-b-2 border-primary":"text-slate-500 dark:text-slate-400 hover:text-slate-900 dark:hover:text-white hover:bg-light-hover dark:hover:bg-dark-hover"}`,children:[a.jsx(Wa,{className:"h-4 w-4"}),"Analytics"]})]}),c==="overview"&&a.jsx(cj,{}),c==="scans"&&a.jsxs(a.Fragment,{children:[a.jsx(d_,{}),a.jsx(Sp,{onScanSelect:w}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[a.jsxs("div",{className:"space-y-6",children:[a.jsx(nm,{}),a.jsx(bp,{selectedIds:d,onSelectionChange:f})]}),a.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[a.jsx(Np,{scanId:(e==null?void 0:e.id)||null}),(e==null?void 0:e.status)==="running"&&a.jsx(kp,{scanId:e.id}),m.length>0&&a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.jsx(f_,{hosts:m}),a.jsx(g_,{hosts:m})]}),a.jsx(u_,{})]})]})]}),c==="analytics"&&a.jsx(x_,{}),a.jsx(uj,{selectedCount:d.size,onClear:()=>f(new Set),actions:p,onAction:v,isProcessing:h}),o&&a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"fixed inset-0 bg-black/50 z-40 animate-fadeIn",onClick:()=>l(!1)}),a.jsxs("div",{className:"fixed top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 z-50 bg-light-surface dark:bg-dark-surface border border-light-border dark:border-dark-border rounded-lg shadow-2xl p-6 w-full max-w-md animate-fadeIn",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsxs("h3",{className:"text-xl font-semibold text-slate-900 dark:text-white flex items-center gap-2",children:[a.jsx(Ni,{className:"h-5 w-5 text-primary"}),"Keyboard Shortcuts"]}),a.jsx("button",{onClick:()=>l(!1),className:"text-slate-500 dark:text-slate-400 hover:text-slate-900 dark:hover:text-white transition-colors",children:a.jsx("svg",{className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),a.jsx("div",{className:"space-y-2",children:_.map((g,y)=>a.jsxs("div",{className:"flex items-center justify-between py-2 px-3 bg-light-bg dark:bg-dark-bg rounded border border-light-border dark:border-dark-border",children:[a.jsx("span",{className:"text-sm text-slate-700 dark:text-slate-300",children:g.description}),a.jsx("kbd",{className:"px-2 py-1 bg-light-surface dark:bg-dark-surface border border-light-border dark:border-dark-border rounded text-xs font-mono text-primary",children:hj(g)})]},y))}),a.jsxs("p",{className:"text-xs text-slate-500 mt-4 text-center",children:["Press ",a.jsx("kbd",{className:"px-1 py-0.5 bg-light-surface dark:bg-dark-surface border border-light-border dark:border-dark-border rounded text-xs font-mono",children:"Esc"})," to close"]})]})]})]})})},fj=R.lazy(()=>be(()=>import("./AdminPage-C4FRDIbH.js"),__vite__mapDeps([0,1,2,3,4]))),mj=R.lazy(()=>be(()=>import("./SettingsPage-Bpwvjm0n.js"),__vite__mapDeps([5,1,2,3,6,4]))),pj=R.lazy(()=>be(()=>import("./SalesPage-B5oOcwp0.js"),__vite__mapDeps([7,1,2,3]))),gj=R.lazy(()=>be(()=>import("./AssetsPage-BJGrFDcK.js"),__vite__mapDeps([8,1,2,3,4]))),xj=R.lazy(()=>be(()=>import("./WebAppScanPage-C2wg7vto.js"),__vite__mapDeps([9,1,2,3,4]))),yj=R.lazy(()=>be(()=>import("./DnsToolsPage-Cn-3A8cy.js"),__vite__mapDeps([10,1,2,3,4]))),bj=R.lazy(()=>be(()=>import("./CompliancePage-BTRdxETv.js"),__vite__mapDeps([11,1,2,3,4]))),vj=R.lazy(()=>be(()=>import("./RemediationPage-CVX1NzSC.js"),__vite__mapDeps([12,1,2,3,4]))),wj=R.lazy(()=>be(()=>import("./ManualAssessmentPage-IjxM3r_y.js"),__vite__mapDeps([13,1,2,3,4]))),_j=R.lazy(()=>be(()=>import("./AssessmentDetailPage-Djxr2jrg.js"),__vite__mapDeps([14,1,2,3,4]))),_l=R.lazy(()=>be(()=>import("./MethodologyPage-CH73fQ5X.js"),__vite__mapDeps([15,1,2,3,4]))),jj=R.lazy(()=>be(()=>import("./ExecutiveDashboardPage-CXs5QycK.js"),__vite__mapDeps([16,1,2,3,4]))),Nj=R.lazy(()=>be(()=>import("./ApiSecurityPage-7wm3N-y0.js"),__vite__mapDeps([17,1,2,3,4]))),Sj=R.lazy(()=>be(()=>import("./AttackPathsPage-BypfCxCS.js"),__vite__mapDeps([18,1,2,3,4]))),kj=R.lazy(()=>be(()=>import("./ScanComparisonPage-CwLzPMUt.js"),__vite__mapDeps([19,1,2,6,3,4]))),Cj=R.lazy(()=>be(()=>import("./CrmDashboard-DaHvQQiS.js"),__vite__mapDeps([20,1,2,3,4]))),Pj=R.lazy(()=>be(()=>import("./CustomerList-D9ErLJGx.js"),__vite__mapDeps([21,1,2,3,4]))),Ej=R.lazy(()=>be(()=>import("./CustomerDetail-tpOGN55P.js"),__vite__mapDeps([22,1,2,3,4]))),Oj=R.lazy(()=>be(()=>import("./EngagementsPage-9Bdwprbo.js"),__vite__mapDeps([23,1,2,3,4]))),Rj=R.lazy(()=>be(()=>import("./ContractsPage-BNr-Mu8L.js"),__vite__mapDeps([24,1,2,3,4]))),Tj=R.lazy(()=>be(()=>import("./TimeTrackingPage-LV2of-Kw.js"),__vite__mapDeps([25,1,2,3,4]))),Aj=R.lazy(()=>be(()=>import("./PortalLogin-DcZS-c7o.js"),__vite__mapDeps([26,1,2,3,4]))),Dj=R.lazy(()=>be(()=>import("./PortalForgotPassword-B1Yj4gEj.js"),__vite__mapDeps([27,1,2,3,4]))),Mj=R.lazy(()=>be(()=>import("./PortalResetPassword-eU35e2wA.js"),__vite__mapDeps([28,1,2,3,4]))),$j=R.lazy(()=>be(()=>import("./PortalDashboard-BPp4clKJ.js"),__vite__mapDeps([29,1,2,30,3,4]))),zj=R.lazy(()=>be(()=>import("./PortalEngagementList-CLT1WPv-.js"),__vite__mapDeps([31,1,2,30,3,4]))),Lj=R.lazy(()=>be(()=>import("./PortalEngagementDetail-LgEu8enV.js"),__vite__mapDeps([32,1,2,30,3,4]))),Fj=R.lazy(()=>be(()=>import("./PortalVulnerabilityList-DGEFuct5.js"),__vite__mapDeps([33,1,2,30,3,4]))),Ij=R.lazy(()=>be(()=>import("./PortalVulnerabilityDetail-DbXbB1vU.js"),__vite__mapDeps([34,1,2,30,3,4]))),Hj=R.lazy(()=>be(()=>import("./PortalReportList-BC03nhx9.js"),__vite__mapDeps([35,1,2,30,3,4]))),Uj=R.lazy(()=>be(()=>import("./PortalProfile-CqTdyJD3.js"),__vite__mapDeps([36,1,2,30,3,4]))),qj=()=>a.jsx("div",{className:"min-h-screen bg-light-bg dark:bg-gray-900 flex items-center justify-center",children:a.jsxs("div",{className:"flex flex-col items-center gap-4",children:[a.jsx("div",{className:"w-12 h-12 border-4 border-primary border-t-transparent rounded-full animate-spin"}),a.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm",children:"Loading..."})]})}),De=({children:e})=>Sr(n=>n.isAuthenticated)?a.jsx(a.Fragment,{children:e}):a.jsx(xn,{to:"/",replace:!0}),Wj=({children:e})=>{const r=Sr(s=>s.isAuthenticated),n=Sr(s=>s.isAdmin);return r?n()?a.jsx(a.Fragment,{children:e}):a.jsx(xn,{to:"/dashboard",replace:!0}):a.jsx(xn,{to:"/",replace:!0})},tr=({children:e})=>zf.isAuthenticated()?a.jsx(a.Fragment,{children:e}):a.jsx(xn,{to:"/portal/login",replace:!0}),Bj=()=>{const{resolvedTheme:e}=gc();return a.jsx(Fd,{position:"top-right",autoClose:3e3,hideProgressBar:!1,newestOnTop:!0,closeOnClick:!0,rtl:!1,pauseOnFocusLoss:!0,draggable:!0,pauseOnHover:!0,theme:e})};function Vj(){return a.jsx(If,{defaultTheme:"system",children:a.jsxs(id,{children:[a.jsx(R.Suspense,{fallback:a.jsx(qj,{}),children:a.jsxs(od,{children:[a.jsx(pe,{path:"/",element:a.jsx(Kf,{})}),a.jsx(pe,{path:"/sales",element:a.jsx(pj,{})}),a.jsx(pe,{path:"/dashboard",element:a.jsx(De,{children:a.jsx(wl,{})})}),a.jsx(pe,{path:"/dashboard/:scanId",element:a.jsx(De,{children:a.jsx(wl,{})})}),a.jsx(pe,{path:"/admin",element:a.jsx(Wj,{children:a.jsx(fj,{})})}),a.jsx(pe,{path:"/settings",element:a.jsx(De,{children:a.jsx(mj,{})})}),a.jsx(pe,{path:"/assets",element:a.jsx(De,{children:a.jsx(gj,{})})}),a.jsx(pe,{path:"/webapp-scan",element:a.jsx(De,{children:a.jsx(xj,{})})}),a.jsx(pe,{path:"/dns-tools",element:a.jsx(De,{children:a.jsx(yj,{})})}),a.jsx(pe,{path:"/compliance",element:a.jsx(De,{children:a.jsx(bj,{})})}),a.jsx(pe,{path:"/remediation",element:a.jsx(De,{children:a.jsx(vj,{})})}),a.jsx(pe,{path:"/manual-assessments",element:a.jsx(De,{children:a.jsx(wj,{})})}),a.jsx(pe,{path:"/manual-assessments/:assessmentId",element:a.jsx(De,{children:a.jsx(_j,{})})}),a.jsx(pe,{path:"/methodology",element:a.jsx(De,{children:a.jsx(_l,{})})}),a.jsx(pe,{path:"/methodology/:checklistId",element:a.jsx(De,{children:a.jsx(_l,{})})}),a.jsx(pe,{path:"/executive-dashboard",element:a.jsx(De,{children:a.jsx(jj,{})})}),a.jsx(pe,{path:"/api-security",element:a.jsx(De,{children:a.jsx(Nj,{})})}),a.jsx(pe,{path:"/attack-paths/:scanId",element:a.jsx(De,{children:a.jsx(Sj,{})})}),a.jsx(pe,{path:"/compare",element:a.jsx(De,{children:a.jsx(kj,{})})}),a.jsx(pe,{path:"/crm",element:a.jsx(De,{children:a.jsx(Cj,{})})}),a.jsx(pe,{path:"/crm/customers",element:a.jsx(De,{children:a.jsx(Pj,{})})}),a.jsx(pe,{path:"/crm/customers/:id",element:a.jsx(De,{children:a.jsx(Ej,{})})}),a.jsx(pe,{path:"/crm/engagements",element:a.jsx(De,{children:a.jsx(Oj,{})})}),a.jsx(pe,{path:"/crm/contracts",element:a.jsx(De,{children:a.jsx(Rj,{})})}),a.jsx(pe,{path:"/crm/time-tracking",element:a.jsx(De,{children:a.jsx(Tj,{})})}),a.jsx(pe,{path:"/portal/login",element:a.jsx(Aj,{})}),a.jsx(pe,{path:"/portal/forgot-password",element:a.jsx(Dj,{})}),a.jsx(pe,{path:"/portal/reset-password",element:a.jsx(Mj,{})}),a.jsx(pe,{path:"/portal/dashboard",element:a.jsx(tr,{children:a.jsx($j,{})})}),a.jsx(pe,{path:"/portal/engagements",element:a.jsx(tr,{children:a.jsx(zj,{})})}),a.jsx(pe,{path:"/portal/engagements/:id",element:a.jsx(tr,{children:a.jsx(Lj,{})})}),a.jsx(pe,{path:"/portal/vulnerabilities",element:a.jsx(tr,{children:a.jsx(Fj,{})})}),a.jsx(pe,{path:"/portal/vulnerabilities/:id",element:a.jsx(tr,{children:a.jsx(Ij,{})})}),a.jsx(pe,{path:"/portal/reports",element:a.jsx(tr,{children:a.jsx(Hj,{})})}),a.jsx(pe,{path:"/portal/profile",element:a.jsx(tr,{children:a.jsx(Uj,{})})}),a.jsx(pe,{path:"*",element:a.jsx(xn,{to:"/",replace:!0})})]})}),a.jsx(Bj,{})]})})}Zd.createRoot(document.getElementById("root")).render(a.jsx(Sl.StrictMode,{children:a.jsx(Vj,{})}));export{Gi as A,ze as B,fe as C,Sr as D,k1 as E,R1 as F,A1 as G,O1 as H,Ie as I,T1 as J,M1 as K,wt as L,Yi as M,$1 as N,L1 as O,z1 as P,jc as Q,S1 as R,zf as S,x1 as T,y1 as U,b1 as V,v1 as W,g1 as X,w1 as a,et as b,Is as c,Qf as d,_a as e,Gt as f,Kp as g,qf as h,D1 as i,Gf as j,N1 as k,C1 as l,Hf as m,j1 as n,Wf as o,vt as p,I1 as q,F1 as r,_1 as s,Uf as t,ct as u,Bf as v,xr as w,E1 as x,P1 as y,Ln as z};
